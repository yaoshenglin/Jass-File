globals

integer tInt = 0	// RefreshWild
integer PlayerIndex = 0
integer TeamIndex1 = 0
integer SelfIndex = 1
integer TeamIndex2 = 6
integer neutralIndex1 = PLAYER_NEUTRAL_AGGRESSIVE
integer neutralIndex2 = bj_PLAYER_NEUTRAL_VICTIM
integer neutralIndex3 = bj_PLAYER_NEUTRAL_EXTRA
integer neutralIndex4 = PLAYER_NEUTRAL_PASSIVE
integer TDSCount = 0
integer Key
integer timerCount
integer DeathBaseIndex
real TestReal = 2.99
boolean isOK = false
boolean isCheck = false
boolean isPickHero = false
location Point = null
integer array HeroID
integer array BaseCustomValue
string array TDSList
unit targetUnit
unit CoordUnit
string filePath = "save\\YDWE\\Data.txt"
hashtable HashTable = InitHashtable()
integer array GameState

constant integer D=StringHash("AIDummyState")
integer E=0
boolean array G
integer array J
integer array K
integer array M
boolean N=false
boolean O=false
string array P
boolean array I
timer array A
integer array Q
timer array T
integer array U
timer V=null
integer array F
integer W=0
integer B=0
integer array H
integer array C
boolean L=false
boolean D4=false
boolean E4=false
boolean O4=false
boolean P4=false
multiboard R4=null
unit T4=null
boolean array V4
integer W4=0
boolean X4=false
boolean Y4=false
boolean A4=false
location Z=null
location vv=null
location ev=null
location ov=null
location rv=null
boolean av=false
boolean Ev=false
boolean Ov=false
boolean Rv=false
boolean Av=false
boolean Nv=false
boolean bv=false
boolean Bv=false
boolean cv=false
boolean Cv=false
boolean Dv=false
boolean fv=false
integer C4=0
integer D7=0
location Jv=null
location lv=null
location Lv=null
location mv=null
location pv=null
location qv=null
location Qv=null
location sv=null
location tv=null
location Tv=null
location Uv=null
location Wv=null
location E7=null
location F7=null
unit array G7
integer ae=0
integer ne=0
player array M7
player array O7
integer array P7
integer array S7
integer array T7
unit array U7
integer array Be
force W7=null
force X7=null
player array Y7
player array Z7
player A7=null
player B7=null
boolean ge=false
integer Ge=0
integer he=0
integer array je
hashtable C7=null
player Le=null
unit L7=null
integer D8=0
real E8=0
item array se
item array Se
item array We
item array ze
item array Ze
item array vx
boolean F8=false
integer G8=0
location array N8
unit ox=null
group O8=null
boolean R8=false
boolean AJ=false
boolean V8=false
boolean W8=false
boolean Ox=false
boolean Rx=false
boolean Nx=false
boolean bx=false
string cx=""
boolean X8=false
integer Y8=0
item jx=null
player lx=null
boolean Z8=false
boolean array mx
integer array A8
integer B8=0
force C8=null
boolean L8=false
real D9=0
boolean E9=false
boolean F9=false
boolean G9=false
boolean array O9
string vo=""
boolean array eo
boolean array oo
boolean P9=false
boolean S9=false
trigger T9
integer array U9
integer array V9
integer array W9
weathereffect bo=null
weathereffect Bo=null
boolean X9=false
location Y9=null
real Z9=0
string A9=""
string array B9
rect go=null
rect jo=null
rect lo=null
rect C9=null
rect Qo=null
rect to=null
rect Uo=null
rect wo=null
rect zo=null
rect er=null
rect L9=null
rect ar=null
rect Er=null
rect Xr=null
rect ED=null
rect FD=null
rect GD=null
rect HD=null
rect Br=null
rect cr=null
rect Cr=null
rect fr=null
rect Fr=null
rect Hr=null
rect jr=null
rect Jr=null
rect lr=null
rect mr=null
rect pr=null
rect qr=null
rect MD=null
rect Sr=null
rect Ur=null
rect Wr=null
rect zr=null
rect Zr=null
rect vi=null
rect ei=null
rect xi=null
rect oi=null
rect ai=null
rect ND=null
rect OD=null
rect Ai=null
rect Ni=null
rect bi=null
rect Bi=null
rect PD=null
rect QD=null
rect di=null
rect fi=null
rect Fi=null
rect Gi=null
rect Ji=null
rect li=null
rect Li=null
rect pi=null
rect TD=null
rect WD=null
rect XD=null
rect YD=null
rect ZD=null
rect AD=null
rect BD=null
rect LD=null
rect KE=null
rect RE=null
rect SE=null
rect TE=null
rect WE=null
rect YE=null
rect ZE=null
rect EF=null
rect FF=null
rect GF=null
rect HF=null
rect JF=null
rect KF=null
rect MF=null
rect NF=null
rect OF=null
rect PF=null
rect QF=null
rect RF=null
rect SF=null
rect TF=null
rect UF=null
rect WF=null
rect XF=null
rect YF=null
rect ZF=null
rect BF=null
rect CF=null
rect LF=null
rect DG=null
rect EG=null
rect FG=null
rect GG=null
rect JG=null
rect MG=null
rect OG=null
rect PG=null
rect QG=null
rect RG=null
rect SG=null
rect TG=null
rect UG=null
rect VG=null
rect WG=null
rect XG=null
rect ZG=null
rect AG=null
rect BG=null
rect CG=null
rect LG=null
rect DH=null
rect EH=null
rect HH=null
rect OH=null
rect PH=null
rect QH=null
rect RH=null
rect TH=null
rect UH=null
rect WH=null
rect XH=null
rect YH=null
rect ZH=null
rect AH=null
rect CH=null
rect DI=null
rect EI=null
rect GI=null
rect HI=null
rect II=null
rect JI=null
rect NI=null
rect PI=null
rect SI=null
rect TI=null
rect UI=null
rect WI=null
rect XI=null
rect YI=null
rect BI=null
rect CI=null
rect LI=null
rect TJ=null
rect MK=null
rect UK=null
rect YK=null
rect SM=null
rect TM=null
rect UM=null
rect WM=null
rect YM=null
rect ZM=null
rect JN=null
rect eE=null
rect oE=null
rect aE=null
rect nE=null
rect VE=null
rect EE=null
rect XE=null
rect OE=null
rect IE=null
rect AE=null
rect bE=null
rect BE=null
rect cE=null
rect CE=null
rect dE=null
rect fE=null
rect FE=null
rect gE=null
rect GE=null
rect JE=null
rect lE=null
rect LE=null
rect ME=null
rect pE=null
rect PE=null
rect qE=null
rect QE=null
rect MN=null
rect TN=null
sound yE=null
sound zE=null
sound vX=null
sound UN=null
sound WN=null
sound YN=null
sound nX=null
sound EX=null
sound OX=null
sound ZN=null
sound AN=null
sound bX=null
sound BX=null
sound cX=null
sound CX=null
sound fX=null
sound kX=null
sound LX=null
sound mX=null
sound MX=null
sound PX=null
sound qX=null
sound QX=null
sound tX=null
sound TX=null
sound BN=null
sound UX=null
sound CN=null
sound JO=null
sound oO=null
sound TO=null
sound aO=null
sound VO=null
sound EO=null
sound XO=null
sound OO=null
sound AO=null
sound NO=null
sound bO=null
sound BO=null
sound cO=null
sound CO=null
sound fO=null
sound FO=null
sound gO=null
sound hO=null
sound HO=null
sound kO=null
sound lO=null
sound mO=null
sound pO=null
sound qO=null
sound QO=null
sound tO=null
sound UO=null
sound wO=null
sound WO=null
sound zO=null
sound vR=null
sound eR=null
sound oR=null
sound rR=null
sound aR=null
sound RR=null
sound bR=null
sound BR=null
sound YO=null
sound CR=null
sound ZO=null
sound LO=null
sound hR=null
sound DP=null
sound JR=null
sound lR=null
sound LR=null
sound mR=null
sound pR=null
sound PR=null
sound qR=null
sound QR=null
sound sR=null
sound SR=null
sound UR=null
sound WR=null
sound zR=null
sound EP=null
sound GP=null
sound eI=null
sound oI=null
sound IP=null
sound JP=null
sound RI=null
sound KP=null
string OP="Sound\\Music\\mp3Music\\Undead1.mp3"
string RP="Sound\\Music\\mp3Music\\Undead2.mp3"
string TP="Sound\\Music\\mp3Music\\Undead3.mp3"
string VP="Sound\\Music\\mp3Music\\Orc1.mp3"
string XP="Sound\\Music\\mp3Music\\Orc2.mp3"
string YP="Sound\\Music\\mp3Music\\Orc3.mp3"
string ZP="Sound\\Music\\mp3Music\\NightElf1.mp3"
string BP="Sound\\Music\\mp3Music\\NightElf2.mp3"
string CP="Sound\\Music\\mp3Music\\NightElf3.mp3"
string GQ="Sound\\Music\\mp3Music\\Human1.mp3"
string IQ="Sound\\Music\\mp3Music\\Human2.mp3"
string JQ="Sound\\Music\\mp3Music\\Human3.mp3"
string YQ="Sound\\Music\\mp3Music\\BloodElfTheme.mp3"
string GR="Sound\\Music\\mp3Music\\DarkAgents.mp3"
string HR="Sound\\Music\\mp3Music\\TragicConfrontation.mp3"
string IR="Sound\\Music\\mp3Music\\SadMystery.mp3"
string OR="Sound\\Music\\mp3Music\\IllidansTheme.mp3"
string XR="Sound\\Music\\mp3Music\\PH1.mp3"
trigger YR=null
trigger ZR=null
trigger DS=null
trigger ZI=null
trigger vA=null
trigger eA=null
trigger xA=null
trigger ES=null
trigger VA=null
trigger EA=null
trigger OA=null
trigger RA=null
trigger FS=null
trigger GS=null
trigger HS=null
trigger cA=null
trigger CA=null
trigger dA=null
trigger DA=null
trigger fA=null
trigger FA=null
trigger gA=null
trigger GA=null
trigger LA=null
trigger mA=null
trigger MA=null
trigger PA=null
trigger SA=null
trigger TA=null
trigger JS=null
trigger wA=null
trigger KS=null
trigger MS=null
boolean zA=false
unit vN=null
real OS=0
integer array YS
constant real VN=1
constant real EN=4
constant real XN=4
constant real ON=$96
real BS=1.
boolean bN=false
boolean CS=false
boolean LS=false
integer array DT
real dN
unit DN
unit fN
integer FN
group gN
unit ET
integer FT
integer pN=0
real SN
real tN
unit IT
unit JT
real KT
boolean array MT
integer array vb
boolean array eb
boolean array ob
boolean array ib
boolean array ab
real array nb
integer array OT
boolean array PT
boolean array Ob
boolean array Ab
boolean array Nb
integer bb
integer Bb
integer cb
string array Cb
boolean array db
boolean array QT
boolean array fb
integer Fb=0
boolean gb=true
string array RT
integer TT=0
string Lb
real mb
real array Mb
integer array pb
integer array Qb
integer Tb=1
constant real wb=$F
boolean UT=false
boolean VT=false
boolean WT=false
boolean XT=false
boolean ZT=false
boolean AT=false
boolean BT=false
boolean CT=false
boolean LT=false
boolean EU=false
integer array FU
player array IU
integer array JU
integer array MU
constant real NU=55
integer EB=1747990090
real OB
real AB
unit BB
unit cB
group CB=null
string dB=null
real DB
integer fB
unit FB
unit gB
real lB
unit OU
real PU
unit MB
real pB
unit PB
destructable SB=null
unit TB=null
real wB=0
constant real QU=26
constant real yB=550
constant real zB=500
group ZB
unit vc
real ec
integer xc
integer ac
unit nc=null
unit Vc=null
integer array RU
integer array SU
integer array ZU
integer array AU
string array BU
integer array CU
integer array LU
integer DV=0
integer EV
integer FV
integer JV
integer MV
integer NV
integer OV
integer QV
integer SV
integer TV
integer UV
integer XV
integer AV
integer BV
integer CV
integer LV
integer EW
integer HW
integer NW
integer OW
integer QW
integer RW
integer TW
integer UW
integer VW
integer YW
integer ZW
integer GX
integer NX
integer RX
integer SX
integer WX
integer YX
integer ZX
integer AX
integer GY
integer HY
integer SY
integer UY
integer ZY
integer DZ
integer EZ
integer HZ
integer NZ
integer OZ
integer RZ
integer UZ
integer XZ
integer AZ
integer BZ
integer CZ
integer IA
integer JA
integer NA
integer QA
integer WA
integer YA
integer ZA
integer BA
integer GB
integer JB
integer QB
integer RB
integer VB
integer WB
integer YB
integer LB
integer EC
integer FC
integer GC
integer JC
integer NC
integer OC
integer PC
integer QC
integer TC
integer VC
integer WC
integer XC
integer YC
integer ZC
integer AC
integer BC
integer CC
integer LC
integer H3
integer M3
integer N3
integer R3
integer U3
integer W3
integer Y3
integer Z3
integer B3
integer C3
integer E6
integer F6
integer G6
integer H6
integer N6
integer S6
integer V6
integer W6
integer A6
integer DL
integer HL
integer OL
integer RL
integer WL
integer ZL
integer AL
integer LL
integer D1
integer E1
integer F1
integer H1
integer J1
integer O1
integer P1
integer Q1
integer R1
integer T1
integer U1
integer V1
integer X1
integer A1
integer D0
integer E0
integer J0
integer N0
integer O0
integer R0
integer T0
integer X0
integer Y0
integer B0
integer C0
integer F5
integer G5
integer J5
integer M5
integer N5
integer R5
integer S5
integer T5
integer W5
integer A5
integer B5
integer C5
integer L5
integer E2
integer F2
integer H2
integer P2
integer R2
integer S2
integer T2
integer W2
integer X2
integer Z2
integer D44
integer D74
integer D84
integer D94
integer DD4
integer DE4
integer DF4
integer DG4
integer DH4
integer DI4
integer DJ4
integer DK4
integer DM4
integer DN4
integer DO4
integer DP4
integer DQ4
integer DR4
integer DS4
integer DT4
integer DU4
integer DV4
integer DW4
integer DX4
integer DY4
integer DZ4
integer DA4
integer DB4
integer DC4
integer D34
integer D64
integer DL4
integer D04
integer D54
integer D24
integer D_4
integer E44
integer E74
integer E84
integer E94
integer ED4
integer EE4
integer EF4
integer EG4
integer EH4
integer EI4
integer EJ4
integer EK4
integer EM4
integer EN4
integer EO4
integer EP4
integer EQ4
integer ER4
integer ES4
integer ET4
integer EU4
integer EV4
integer EW4
integer EX4
integer EY4
integer EZ4
integer EA4
integer EB4
integer EC4
integer E34
integer E64
integer EL4
integer E14
integer E04
integer E54
integer E24
integer E_4
integer F44
integer F74
integer F84
integer F94
integer FD4
integer FE4
integer FF4
integer FG4
integer FH4=-1
integer array FI4
integer array FJ4
integer array FK4
integer array FM4
integer array FN4
integer array FO4
integer FP4=0
integer FQ4
integer FR4
integer FS4
integer FT4
integer FU4
integer FV4
integer FW4
integer FX4
integer FY4
integer FZ4
integer FA4
integer FB4
integer FC4
integer F34
integer F64
integer FL4
integer F14
integer F04
integer F54
integer F24
integer F_4
integer G44
integer G74
integer G84
integer G94
integer GD4
integer GE4
integer GG4
integer GH4
integer GI4
integer GJ4
integer GK4
integer GM4
integer GN4
integer GO4
integer GP4
integer GQ4
integer GR4
integer GS4
integer GT4
integer GU4
integer GV4
integer GW4
integer GX4
integer GY4
integer GZ4
integer GA4
integer GB4
integer G34
integer G64
integer GL4
integer G14
integer G04
integer G54
player Sh
boolean Th=false
boolean Uh=false
player G24
unit G_4
unit zh
integer array Zh
integer array H44
unit eH
boolean H74=true
boolean oH=false
trigger H84
integer H94=0
integer HD4=0
integer HE4=0
integer HF4=0
integer HG4=0
integer HH4=0
boolean NH=false
boolexpr bH=null
trigger BH
trigger cH
constant real HI4=40
integer array dH
integer array HJ4
integer FH
integer GH
integer hH
integer jH
integer JH
integer kH
integer lH
integer LH
integer MH
rect pH=null
integer array HK4
integer array HM4
integer array HN4
integer array HO4
integer array HP4
integer array HQ4
integer array HR4
integer array HS4
integer array HT4
integer array HU4
string array HV4
string array HW4
string array HX4
string array HY4
trigger array rj
trigger array aj
trigger array nj
trigger array Vj
trigger array Ej
trigger array Rj
trigger array Aj
trigger array Nj
boolean array bj
item HZ4=null
integer HA4=0
integer HB4=0
string Dj="|c00ff0303"
string fj="|c00ff0303"
string gj="|c000042ff"
string Gj="|c00646464"
string Hj="|c00ffffff"
boolean jj=false
boolean Jj=false
boolean lj=false
boolean HC4=false
integer array H34
integer array H64
integer array HL4
trigger H14=null
trigger Tj=null
trigger Uj=null
trigger wj=null
trigger zj=null
trigger Zj=null
trigger vJ=null
trigger eJ=null
trigger xJ=null
trigger oJ=null
trigger iJ=null
trigger H04=null
trigger nJ=null
trigger do=null
trigger VJ=null
trigger dq=null
trigger H54=null
trigger dr=null
trigger dR=null
trigger dT=null
trigger du=null
trigger dU=null
trigger dX=null
trigger dY=null
trigger dZ=null
trigger d0=null
trigger H24=null
trigger H_4=null
trigger d3=null
trigger d4=null
trigger d5=null
trigger I44=null
trigger d8=null
trigger d9=null
trigger XJ=null
trigger Dc=null
trigger DC=null
trigger OJ=null
trigger DF=null
trigger RJ=null
trigger I74=null
trigger Dk=null
trigger DK=null
trigger Dm=null
trigger NJ=null
trigger Do=null
trigger DO=null
trigger Dp=null
trigger DQ=null
unit BJ=null
unit cJ=null
unit CJ=null
unit dJ=null
unit DJ=null
unit fJ=null
unit FJ=null
unit gJ=null
unit GJ=null
unit HJ=null
unit JJ=null
unit lJ=null
unit LJ=null
unit MJ=null
unit PJ=null
unit qJ=null
unit QJ=null
unit SJ=null
unit tJ=null
unit IE4=null
unit UJ=null
unit wJ=null
unit WJ=null
unit yJ=null
unit zJ=null
unit ZJ=null
unit vk=null
unit ek=null
unit xk=null
unit ok=null
unit ik=null
unit ak=null
unit nk=null
unit Vk=null
unit Ek=null
unit Ok=null
unit Rk=null
unit Ak=null
unit Nk=null
unit bk=null
unit Bk=null
unit ck=null
unit Ck=null
unit dk=null
unit fk=null
unit Fk=null
unit gk=null
unit Gk=null
unit jk=null
unit Jk=null
unit lk=null
unit Lk=null
unit pk=null
unit Pk=null
unit qk=null
unit Qk=null
unit Sk=null
unit tk=null
unit Uk=null
unit wk=null
unit Wk=null
unit yk=null
unit zk=null
unit vK=null
unit eK=null
unit xK=null
unit aK=null
unit VK=null
unit EK=null
unit XK=null
unit OK=null
unit AK=null
unit NK=null
unit bK=null
unit BK=null
unit cK=null
unit CK=null
unit dK=null
unit fK=null
unit FK=null
unit gK=null
unit GK=null
unit JK=null
unit lK=null
unit LK=null
unit PK=null
unit qK=null
unit QK=null
unit SK=null
unit TK=null
unit wK=null
unit WK=null
unit zK=null
unit ZK=null
unit vl=null
unit el=null
unit xl=null
unit ol=null
unit rl=null
unit al=null
unit Vl=null
unit El=null
unit Xl=null
unit Ol=null
unit Rl=null
unit Al=null
unit Nl=null
unit bl=null
unit Bl=null
unit cl=null
unit Cl=null
unit dl=null
unit array fl
unit array Fl
unit array gl
integer Hl=0
trigger array Dx
real array DX
integer Dy=0
boolean array IF4
real array Jl
integer array ll
integer array Ll
integer Ml=0
string array Pl
integer array ql
integer Ql=0
integer sl=0
integer IG4
integer tl
integer Tl
real IH4
real IJ4
real IK4
real Zl
real vL
real eL
unit IM4
unit IN4
trigger eC
group IP4
group aL
player IQ4
boolean EL
string IR4
unit IS4=null
region IT4
integer array NL
integer array bL
integer array BL
integer array cL
integer CL=0
gamecache IU4
weathereffect fL
weathereffect FL
rect IV4
constant playercolor gL=ConvertPlayerColor(0)
constant playercolor hL=ConvertPlayerColor(6)
constant playercolor JL=ConvertPlayerColor($C)
real IW4=-7168
real IX4=-7264
real ML=-6816
real PL=-7264
real QL=-7200
real SL=-6752
real tL=-7200
real TL=-6944
real UL=-6560
real wL=-7264
real zL=-6560
real vm=-6560
real em=-6688
real xm=-6496
real om=-6816
real rm=-6496
real im=-6944
real am=-6496
real Vm=-7072
real Em=-6560
real Xm=-7328
real Om=-5984
real Am=-5632
real Nm=-6144
real bm=-6112
real Bm=$620
real cm=-$5E0
real Cm=-$720
real dm=4960
real fm=-6752
real Fm=-6112
real hm=-$4E0
real Jm=-$DA0
real lm=-$CE0
real Mm=-544
real pm=-6688
real Pm=-6368
real Qm=-4256
real Tm=-4448
real Um=-4960
real wm=-$EA0
real Wm=-6816
real zm=-5600
real vM=-5728
real eM=-5280
real oM=-6112
real rM=-6080
real iM=-4480
real aM=-4416
real nM=-5312
real VM=-$FC0
real XM=-7040
real AM=-6656
real bM=-4480
real BM=-4864
real cM=-4992
real dM=-$FC0
real fM=-6528
real gM=-5792
real hM=-5408
real HM=-6624
real JM=-5088
real kM=-5344
real lM=-$F60
real pM=-4832
real sM=-4384
real tM=-$F60
real wM=-5216
real zM=-5088
real vp=-5536
real ep=-4896
real op=-6240
real rp=-$E20
real ap=-5728
real Vp=-4512
real Ep=-7072
real Xp=-5472
real Rp=-4704
real Ap=-4512
real bp=-5856
real Bp=-6080
real cp=-5120
real Cp=-4544
real dp=-6528
real fp=-6400
real Fp=-5696
real gp=-5248
real Hp=-6848
unit IY4
unit IZ4
unit I34
unit IL4
unit I04
unit I_4
unit J44
unit J74
unit J84
unit J94
unit JD4
unit JE4
unit JF4
unit JG4
unit JH4
unit JI4
unit JJ4
unit JK4
unit JM4
unit JN4
unit JO4
unit JP4
unit JQ4
unit JR4
unit JS4
unit JT4
unit JU4
unit JV4
unit JW4
unit fP
unit FP
unit lP
unit LP
unit MP
unit pP
unit PP
unit qP
unit QP
unit sP
unit tP
unit WP
unit zP
unit vq
unit eq
real JX4=6272
real JY4=5504
real rq=6464
real iq=5120
real aq=5952
real Eq=5568
real Rq=6080
real Aq=5568
real Nq=6464
real bq=4736
real Bq=5696
real cq=5120
real Cq=5568
real Dq=5248
real fq=5568
real Fq=5376
real Hq=5696
real jq=5504
real Jq=5568
real Mq=5696
real qq=5568
real Qq=5696
real Sq=4992
real tq=4544
real Uq=-4704
real zq=5920
real Zq=$420
real vQ=-$A0
real eQ=6048
real xQ=-$820
real oQ=32
real iQ=5856
real aQ=$960
real EQ=$6A0
real OQ=6112
real RQ=-96
real AQ=$C60
real NQ=5920
real bQ=$E20
real BQ=$CE0
real cQ=6048
real CQ=$AE0
real fQ=4640
real FQ=4576
real hQ=5088
real HQ=4192
real lQ=$EC0
real LQ=5888
real mQ=4096
real MQ=$D40
real PQ=6208
real QQ=$CC0
real SQ=$DC0
real UQ=5376
real WQ=$EC0
real zQ=$F00
real ZQ=5696
real vs=$CC0
real es=$C60
real os=$FA0
real rs=4192
real as=5536
real ns=4128
real Vs=4512
real Es=4640
real Xs=$E60
real Rs=4832
real As=$C20
real Ns=5408
real bs=$A20
real Bs=5408
real cs=$CE0
real Cs=6112
real Ds=$FA0
real fs=$BE0
real Fs=5088
real Hs=6304
real js=$EA0
real Js=6304
real Ks=$EA0
real ls=$DC0
real Ls=4608
real ms=4096
real Ms=$A40
real ps=4096
real Ps=$A40
real Qs=4096
real Ss=$A40
unit JZ4
unit JA4
unit zs
unit Zs
unit JB4
unit eS
unit oS
unit rS
unit aS
unit nS
unit VS
unit JC4
unit J34
unit J64
unit JL4
unit J14
unit J04
unit J54
unit J24
unit J_4
unit K44
unit K74
unit K84
unit K94
unit KD4
unit KE4
unit KF4
unit KG4
unit KH4
unit PS
unit QS
unit SS
unit tS
unit TS
unit US
unit WS
unit ZS
unit vt
unit et
unit xt
unit ot
unit rt
unit at
unit Vt
unit KI4
unit KJ4
unit KK4
unit KM4
unit KN4
unit KO4
unit KP4
unit KQ4
unit KR4
unit KS4
unit array KT4
real array KU4
real array KV4
player KW4
player KX4
string array KY4
integer array KZ4
integer array KA4
integer array KB4
integer array KC4
integer array K34
integer K64
integer KL4
integer K14
integer K04
integer array K54
integer K24
integer array K_4
integer M44
integer array M74
integer M84
integer array M94
integer MD4
integer array ME4
integer MF4
string array MG4
integer array MH4
string array MI4
string array MJ4
string array MK4
string array MM4
string array MN4
unit MO4
unit MP4
unit MQ4
unit MR4
unit MS4
unit MT4
unit MU4
unit MV4
unit MW4
unit MX4
unit MY4
unit MZ4
integer array MA4
integer MB4=0
boolean MC4=false
integer M34=0
trigger M64
boolean ML4=false
trigger M14
trigger M04
trigger M54
real M24=0
real M_4=0
hashtable N44
timer array N74
integer array N84
integer array N94
multiboard ND4
integer array NE4
integer array NF4
player array NG4
integer NH4=0
string Fx="|c00FF6600"
multiboard NI4
trigger NJ4
unit array NK4
real array NM4
boolean array NN4
integer NO4=0
unit array qu
real array Qu
boolean array Su
integer array NP4
integer array NQ4
integer array NR4
integer array NS4
integer array NT4
integer array NU4
unit NV4=null
boolean NW4=true
integer NX4=1
trigger NY4
integer NZ4=0
integer NA4
integer NB4
integer array NC4
integer array N34
integer N64
integer NL4
integer array N14
boolean N04=false
unit N54=null
unit N24=null
group KU
boolean N_4=true
boolean O44=false
boolean O74=false
integer O84
player O94
trigger OD4=null
trigger OE4=null
integer OF4
integer TU=1093683285
integer vw=1093683288
trigger OG4
region ow
integer array gD
unit array rw
unit OH4=null
unit OI4
region Ew
integer array Rw
integer OJ4=1093742918
integer OK4=1093742917
integer OM4=1093686067
integer ON4=1093742916
integer OO4=1093742919
integer OP4=1093742920
integer OQ4=1093815369
integer OR4=1093742914
integer OS4=1093742913
integer OT4=1093686066
integer OU4=1093742905
integer OV4=1093742915
integer OW4=1093742904
integer OX4=1093815368
integer OY4=1093682777
unit Mw
group pw
unit qw
unit Qw
boolean tw=false
boolean Uw=false
boolean zw=false
boolean vW=false
boolean eW=false
boolean oW=false
boolean rW=false
boolean iW=false
unit array OZ4
timer array gg
integer array FI
boolean OA4=false
real array Fj
integer gi=0
real array OB4
item array OC4
integer O34=0
boolean array AW
boolean array O64
leaderboard array gm
boolean bW=true
weathereffect BW
boolean array cW
boolean array CW
integer dW=0
integer array DW
integer array fW
integer array FW
integer array hW
integer array LW
integer array mW
integer array MW
integer array pW
integer array PW
string OL4="No Mode"
unit gr
boolean O14=false
boolean O04=false
boolean Fz=false
integer array O54
constant real O24=-6950
constant real O_4=6750
boolean P44=false
boolean F0=false
boolean P74=false
boolean gH=false
boolean P84=false
integer P94
boolean PD4=false
boolean oy=true
boolean PE4=false
boolean PF4=false
boolean PG4=false
boolean PH4=false
boolean PI4=false
boolean Ny=false
boolean PJ4=false
boolean PK4=false
unit array PM4
integer Ly=1093742670
integer my=1093686064
integer My=1093742671
integer py=1093742672
real PN4
real PO4
unit PP4
trigger PQ4
integer PR4=1093678422
boolean PS4=false
boolean uy=false
boolean vY=true
boolean Gs=false
boolean PT4=false
boolean PU4=false
boolean GT=false
boolean GU=false
boolean Gv=true
boolean Gw=true
boolean PV4=true
boolean PW4=true
boolean PX4=false
boolean array GZ
boolean array G0
integer G1=0
integer G2=0
integer G3=-1
integer G4=-1
boolean PY4=true
boolean PZ4=true
integer PA4=0
integer PB4=0
integer PC4=0
integer P34=0
integer P64=0
integer PL4=0
integer P14=0
integer P04=0
integer P54=4
integer P24=5
integer P_4=5
integer hD=0
integer hE=0
integer hF=0
integer array hG
integer array eY
integer array hj
integer xY=0
integer oY
integer rY
real aY=0
real VY=0
real EY=0
real XY=0
real OY=0
real IY=0
real AY=0
real bY=0
real BY=0
real cY=0
real CY=0
real DY=0
real fY=0
real FY=0
real JY=0
real kY=0
real lY=0
real mY=0
real MY=0
real PY=0
real QY=0
real sY=0
real tY=0
real TY=0
real uY=0
real wY=0
real YY=0
real vz=0
constant real Q44=90
boolean xz=false
boolean oz=false
boolean rz=false
boolean az=false
boolean nz=false
boolean Vz=false
boolean Ez=false
boolean Xz=false
timer Q74
boolean Q84=false
integer Q94=90
boolean QD4=false
real Bz=.0
real array hq
unit hr=null
unit hS=null
unit hx=null
unit hy=null
unit hz=null
unit hZ=null
unit h0=null
unit array h4
unit array h7
unit array h8
unit array h9
location Ha
location HA
location Hb
location HB
location Hc
location array HC
rect cz=null
real QE4
real QF4
real QG4
real QH4
real QI4
real QJ4
player QK4
rect QM4=null
rect QN4=null
rect QO4=null
rect Cz=null
rect QP4=null
rect QQ4=null
rect QR4=null
rect He=null
player QS4=null
player QT4=null
player QU4=null
player QV4=null
force QW4=CreateForce()
boolean array QX4
trigger HK=CreateTrigger()
trigger QY4=CreateTrigger()
trigger QZ4=CreateTrigger()
trigger Hn=CreateTrigger()
trigger HN=CreateTrigger()
trigger Ho=CreateTrigger()
trigger QA4=CreateTrigger()
trigger QB4=CreateTrigger()
trigger QC4
trigger Q34
trigger Q64
trigger QL4
trigger array Q14
item Hu
destructable H0
group H8=CreateGroup()
group H9=CreateGroup()
group iA=CreateGroup()
group Q04=CreateGroup()
group iC=CreateGroup()
group iE=CreateGroup()
group iF=CreateGroup()
group ig=CreateGroup()
group iG=CreateGroup()
group iH=CreateGroup()
group ii=CreateGroup()
group ij=null
boolexpr Q54=null
boolexpr iL
boolexpr Q24
boolexpr ip
boolexpr iP
integer Q_4=StringHash("PBMN|AI")
integer array R44
integer array R74
real Wz=.0
real Yz=.0
group Zz=null
unit vZ
integer R84
unit oZ
unit R94
unit RD4
unit RE4
group RF4
real VZ
unit RG4
unit RH4
group RI4
integer array RJ4
integer array RK4
integer array RM4
integer array RN4
integer array RO4
integer array RP4
integer array RQ4
integer array RR4
unit RS4
real RT4
unit FZ
real gZ
integer jZ
integer JZ
unit LZ
real mZ
integer MZ
player QZ
unit sZ
integer tZ
player TZ
integer RU4
unit array wZ
integer WZ
unit array YZ
unit array zZ
integer ZZ
unit array v0
unit e0
unit o0
unit array RV4
integer n0
boolean V0=false
unit RW4
integer RX4
boolean RY4=false
boolean array A0
boolean RZ4=false
integer RA4
unit RB4
real RC4
integer R34
unit R64
real RL4
real j0
real K0
integer l0
unit m0
integer M0
group p0
unit Q0
real R14
group t0
integer R04
unit U0
real R54
integer array W0
integer array z0
real Z0
unit v1
unit R24
real o1
integer a1
integer array n1
boolean R_4=false
unit S44
unit N1
integer S74
real B1
real C1
unit S84
integer S94
integer SD4
integer m1
group M1
unit SE4
real SF4
integer SG4
integer SH4
integer SI4
unit array SJ4
boolean w1=false
boolean W1=false
unit Y1
unit z1
real Z1
real v2
real SK4
real o2
boolean a2=false
boolean SM4=false
force V2=null
integer array SN4
integer array SO4
real A2
real N2
unit b2
unit B2=null
unit C2=null
unit D2=null
unit SP4
integer array SQ4
unit array SR4
integer l2=0
integer SS4
constant real M2=6
constant real p2=600
unit ST4
trigger SU4
boolean array U2
real array SV4
real array SW4
real array SX4
unit array SY4
integer array SZ4
integer array SA4
integer a3
unit n3
integer V3
unit E3
integer X3
unit A3
region SB4
unit SC4
unit S34
real S64
real SL4
unit array D3
boolean f3=false
integer F3=0
string array j3
constant real L3=8
unit S14
integer S04
boolean p3=false
player array S54
real array S24
real array S_4
real array T44
integer T74=-1
constant real e4=25
constant real o4=525
region T84
integer array T94
integer TD4=0
integer array TE4
integer array TF4
integer array TG4
integer array N4
integer array TH4
boolean B4=false
integer TI4
integer array TJ4
boolean array TK4
group array TM4
integer TN4=0
integer TO4=0
boolean TP4=false
unit TQ4
unit TR4
real TS4
real TT4
real TU4
real array TV4
real array TW4
unit TX4
boolean TY4=false
boolean TZ4=false
boolean TA4=false
real array TB4
string array TC4
boolean T34=false
boolean T64=false
integer array TL4
real array T14
real array T04
boolean array T54
item array T24
item array T_4
item array U44
item array U74
boolean array U84
boolean array U94
boolean array UD4
integer UE4
integer UF4=$A
boolean array UG4
boolean array UH4
unit UI4
unit UJ4
unit UK4
unit UM4
unit UN4
unit UO4
real UP4
real UQ4
real UR4
real US4
constant real UT4=300
constant real UU4=20
unit UV4
unit UW4
integer UX4
group UY4
real UZ4
real UA4
integer UB4
integer UC4
integer U34
region U64
region UL4
real U14
unit U54
boolean U24=false
sound U_4=null
sound V44=null
sound V74=null
sound V84=null
sound V94=null
unit VD4
group VE4
integer array VF4
boolean VG4=false
unit VH4
sound VI4
sound VJ4=null
string VK4
string VM4
string VN4
string VO4
sound VP4=null
sound VQ4=null
unit VR4
unit VS4
unit VT4
real VU4
real VV4
real VW4
unit VX4
real VY4
real VZ4
unit VA4
real VB4
real VC4
real V34
boolean V64=false
boolean array VL4
destructable V14
real V04
real V54
real V24
real V_4
real W44
real W74
real W84
real W94
unit WD4
integer WE4
unit WF4
integer array WG4
integer array WH4
integer array WI4
integer array WJ4
integer WK4
player WM4
region WN4=null
region WO4=null
region WP4=null
region WQ4=null
trigger WR4=null
trigger WS4=null
real WT4
real WU4
trigger WV4=null
boolean WW4=false
sound WX4=null
sound WY4=null
sound WZ4=null
unit WA4=null
unit WB4=null
unit WC4=null
group W34
integer W64
unit WL4
constant integer W14=$578
constant real W04=$514
constant real W54=20
constant real W24=20
constant real W_4=20
integer X44
unit X74
group X84
real X94
real XD4
unit XE4
integer XF4
unit XG4
unit XH4
unit XI4
integer XJ4
group XK4
group XM4
unit XN4
unit XO4
unit XP4
integer XQ4
real XR4
real XS4
real XT4
integer XU4
destructable array XV4
destructable array XW4
destructable array XX4
integer XY4=0
integer XZ4=0
unit XA4
integer XB4
constant real XC4=6
player X34
boolean X64=false
boolean XL4=false
unit X14
boolean X04=false
player X54=null
player X24=null
integer array X_4
unit Y44
real Y74
integer array Y84
group Y94
group YD4
unit YE4
integer YF4
trigger YG4=null
string YH4=""
boolean YI4=false
unit YJ4
unit YK4
unit YM4
group YN4
group YO4
group YP4
integer YQ4=0
unit YR4
constant real YS4=3
unit YT4
unit YU4
unit YV4
real YW4
group YX4
integer YY4
sound YZ4=null
sound YA4=null
sound YB4=null
sound YC4=null
sound Y34=null
sound Y64=null
sound YL4=null
sound Y14=null
unit Y04
integer Y54
group Y24
integer Y_4
unit Z44
unit Z74
unit Z84
group Z94
integer ZD4
unit ZE4
unit ZF4
unit ZG4
group ZH4
real ZI4
integer array ZJ4
integer ZK4=0
integer ZM4
constant real ZN4=20
constant real ZO4=7
constant real ZP4=300
unit ZQ4
real ZR4
unit ZS4
unit ZT4
real ZU4
unit ZX4
real ZY4
real ZZ4
real ZA4
unit ZB4
real ZC4
real Z34
group Z64
unit ZL4
unit Z14
real Z04
real Z54
real Z24
trigger Z_4
integer A44=0
boolean A74=false
integer array A84
boolean A94
boolean AD4=false
boolean AE4=false
integer array AF4
integer array AG4
integer AH4
integer AI4
integer array AJ4
integer array AK4
integer AM4=0
integer AN4=0
integer array AO4
integer array AP4
integer AQ4=0
integer AR4=0
integer AS4=0
multiboard AT4
image AU4
image AV4
image AW4
image AX4
boolean AY4=false
image AZ4=null
real AA4=-7030
real AB4=6966
unit AC4
integer A34
player A64
boolean AL4=false
constant integer A14=$D00C4
constant integer A04=$D022E
constant integer A54=$D0277
unit A24=null
unit A_4=null
unit B44=null
unit B74=null
integer B84=0
integer B94=0
constant real BD4=$F
constant real BE4=4
constant real BF4=$F
constant real BG4=4
integer BH4
integer BI4
real BJ4
real BK4
unit BM4
integer array BN4
constant real BO4=7
unit array BV4
integer array BW4
integer array BZ4
integer BA4=0
integer BB4=0
integer array BC4
integer array B34
unit array B64
integer BL4=0
boolean B14=true
boolean array B04
boolean B54=false
boolean B24=false
boolean B_4=true
unit CK4=null
trigger CM4=null
trigger CN4=null
trigger CP4=null
timer CQ4=null
real array CR4
constant integer CS4=$B4
hashtable CU4
boolean CL4=false
real C_4=1
real L44=1
string L74=""
real L84=0
real L94=0
widget LD4=null
boolean LE4=false
player LF4=null
force LG4=null
item LH4=null
item LI4=null
integer LJ4=0
unit LK4=null
real LM4=0
constant real LN4=$C8
trigger LO4=null
string LP4=""
boolean LQ4=true
boolean LR4=false
integer array LS4
unit array LT4
real array LU4
boolexpr LV4=null
integer array LW4
integer LX4=0
integer LY4=1
constant integer LZ4=8-1
boolean LA4=true
boolean LB4=true
real LC4=.0
constant integer L34=425+$C8
unit L64=null
constant string LL4="|c00dd8dff"+"  - AI|r"
constant string L14="|c0020c060"+"Exp.|r"
constant string L04="|c00ffcc60"+"Gold|r"
constant real L54=8
real L24=120.
integer L_4
boolean D47=false
unit D77
integer D87
boolean D97=false
unit DD7
unit DE7
location DF7=Location(0,0)
unit DG7
boolean DH7=false
boolean DI7=false
boolean DJ7=false
unit DK7=null
unit DM7=null
real DN7=99999999.
trigger DO7=null
unit DP7
integer DQ7
integer DR7
unit DS7
real DT7
real DU7
real DV7
unit DW7
integer array DX7
boolean DY7=true
unit DZ7
integer DA7
unit DB7
group DC7
real D37
integer array D67
integer array DL7
integer D17
integer D07
integer D57
unit D27
integer D_7
integer E47
boolean E77=false
unit E87
real E97
group ED7
unit EE7
integer EF7
constant real EG7=300
integer EH7
integer EI7
integer array EJ7
constant real EK7=$C8
constant real EM7=$C8
group EN7
unit EO7
integer EP7
unit EQ7
integer ER7
unit ES7
integer ET7
leaderboard array EU7
integer EV7
integer EW7=0
integer EX7=0
integer array EY7
integer array EZ7
integer EA7=-1
integer array EB7
sound EC7=null
unit E37
group E67
boolean array EL7
integer E17=600
integer E07=360
integer E57
constant real E27=5
unit E_7
real F47
unit F77
unit F87
integer F97
group FD7
unit FE7
real FF7
integer FG7
unit FH7
real FI7
real FJ7
real FK7
unit FM7
integer FN7
integer FO7
boolean FP7=false
real FQ7
unit FR7
constant real FS7=4
group FT7
constant real FU7=20
integer FV7
unit FW7
integer FX7
unit FY7
unit FZ7
real FA7=1.35
real FB7=500
group FC7
trigger F37
unit F67
unit FL7=null
constant real F17=6
constant real F07=6
constant real F57=50
integer F27
integer F_7
item array G47
integer array G77
integer array G87
boolean array G97
player GD7=null
integer GE7=0
constant integer GF7=$7D0
unit GG7=null
integer GH7=0
integer GI7=0
unit GJ7=null
integer GK7=0
unit GM7=null
integer array GN7
unit GO7=null
unit GP7=null
boolean GQ7=true
unit GR7=null
unit GS7=null
boolean GT7=false
string GU7="0123456789"
string GV7="ABCDEFGHIJKLMNOPQRSTUVWXYZ"
string GW7="abcdefghijklmnopqrstuvwxyz"
string GX7="on"
string GY7="-text"
string GZ7="-!!"
string GA7="-spell "
string GB7="-despell "
string GC7="-ratio "
string G37="-lock "
string G67="-enable "
string GL7="-disable "
string G17="-search "
string G07="-debug "
string G57="-spellmsg "
string G27="-regen "
string G_7="-dmgdbg "
string H47="-invul "
string H77="-share "
string H87="-charge "
string H97="-item "
string HD7="-desitem "
string HE7="-drop "
string HF7="-decease "
string HG7="-get "
string HH7="-stat "
string HI7="  "
string HJ7="|c00FF0000Object ID:|r   "
string HK7="|c00FF0000Name:|r   "
string HM7="|c00FF0000Spell List: |r
"
string HN7="
"
string HO7="|cffff0303NeutralPlayer|r"
string HP7="|cffff0303**Hero Player Number|r:  "
string HQ7="|c00fffc01Spawned Unit`Name is|r  "
string HR7="     *|cff1ce6b9Unit Type Id|r:   "
string HS7="**|c00fffc01OwningPlayer|r  "
string HT7="|cffff0303 Caster is|r  "
string HU7="|cffff0303 Spell Name is|r   "
string HV7="      |cff1ce6b9 SpellAbility ID |r : "
string HW7="       |c00fffc01 Last Order String  |r: "
string HX7="       |c00fffc01 OrderId:  |r: "
string HY7="|c00FF0000 Damage Source:  |r"
string HZ7="|c00FF0000 Target:  |r"
string HA7="|c00FF0000 Value:  |r"
string HB7="|c00FF8000 Debug  On  |r"
trigger HC7=CreateTrigger()
trigger H37=CreateTrigger()
trigger H67=CreateTrigger()
trigger HL7=CreateTrigger()
trigger H17=CreateTrigger()
trigger H07=CreateTrigger()
integer H57=1633840244
unit array H27
hashtable H_7=InitHashtable()
region I47=null
boolean array I77
boolean array I87
boolean I97=false
boolean array ID7
boolean IE7=true
integer IF7=0
group IG7=CreateGroup()
unit IH7=null
unit II7=null
unit array IJ7
real IK7=.0
real IM7=.0
boolexpr IN7=null
trigger IO7=CreateTrigger()
constant integer IP7=StringHash("listtop1")
constant integer IQ7=StringHash("listtop2")
constant integer IR7=StringHash("attack")
hashtable IS7=InitHashtable()
unit array IT7
integer array IU7
integer IV7=0
integer IW7=0
integer IX7=0
real IY7
integer IZ7=0
integer IA7=0
trigger array IB7
integer IC7=0
group I37=null
integer I67=0
hashtable IL7=InitHashtable()
group I17=CreateGroup()
real I07=1000.

//native ShowTimedTextToPlayer	takes integer playerid, real duration, string message returns nothing

endglobals

//===========================================================================
// endglobals
//===========================================================================

// ****************StartFunction****************
//===========================================================================
// function: ASCII String Convert Integer
//===========================================================================
function ASCIIStringToInteger takes string text returns integer
	local string s0 = "0123456789-------ABCDEFGHIJKLMNOPQRSTUVWXYZ------abcdefghijklmnopqrstuvwxyz"
	local string s1 = ""
	local string s2 = ""
	local real tR1 = 0
	local integer result = 0
	local integer tIndex1 = 0
	local integer tEndIndex1 = 0
	local integer tIndex2 = 0
	local integer tEndIndex2 = 0
	
    if ( StringLength(text) != 4 ) then
	    // 不符合转化格式
	    call DisplayTimedTextToForce( bj_FORCE_PLAYER[0], 5.00, "不符合转化格式" )
        return 0
    endif

	// 得到字符串对应的整数值
	set tIndex1 = 1
	set tEndIndex1 = StringLength(text)
    loop
        exitwhen tIndex1 > tEndIndex1
        set s1 = SubString(text, tIndex1-1, tIndex1)
        set tIndex2 = 1
        set tEndIndex2 = 75
        loop
            exitwhen tIndex2 > tEndIndex2
            set s2 = SubString(s0, tIndex2-1, tIndex2)
            if s1 == s2 then
	            set tR1 = Pow(256.0, 4.0-tIndex1)
                set result = (tIndex2+47)*R2I(tR1) + result
            endif
            set tIndex2 = tIndex2 + 1
        endloop
        set tIndex1 = tIndex1 + 1
    endloop
    return result
endfunction

//===========================================================================
// function: Integer Convert ASCII String
//===========================================================================
function IntegerToASCIIString takes integer value returns string

    local string s0 = "0123456789-------ABCDEFGHIJKLMNOPQRSTUVWXYZ------abcdefghijklmnopqrstuvwxyz"
    local string sID = ""
    local string s
    local integer n = 0
    local integer sub = 0
    local integer tIndex = 0

    if ( value < 808464432 ) then
        //不符合转化格式
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000不符合转化格式|r" )
        return null
    endif

    set sub = value
    set tIndex = 0
    loop
        exitwhen tIndex > 4

        set n = sub / R2I(Pow(256.0, 3-tIndex))
        //set sub = sub mod Pow(256.00, 3-bj_forLoopAIndex)
        set sub = ModuloInteger(sub, R2I(Pow(256.0, 3-tIndex)))
        set s = SubString(s0,n-48,n-47)
        set sID = sID + s

        if ( tIndex == 3 ) then
            //call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff" + sID + "|r") )
            return sID
        endif

        set tIndex = tIndex + 1
    endloop

    return sID
endfunction

//===========================================================================
// function: SplitString
//===========================================================================
function SplitStringWith takes string ChatString, string delimiterS returns integer

    local string s
    local string tString = ""
    local integer TempValue = 0
    local integer index = 0
    local integer endIndex = 0

    if ( StringLength(ChatString) <= 0 ) then
        return 0
    endif


    set endIndex = StringLength(ChatString)
    loop
        exitwhen index >= endIndex
        //遍历每一个字符
        set s = SubString(ChatString, index, index+1)
        if ( s != delimiterS ) then
            set tString = tString + s
            if (StringLength(tString) > 0 and index == StringLength(ChatString)-1 ) then
                //最后一个
                set TempValue = ( TempValue + 1 )
                call SaveStringBJ( tString, TempValue, StringHashBJ("TDS"), HashTable )
                set TDSList[TempValue] = tString
            endif
        else
            //遇到分隔符
            if ( StringLength(tString) > 0 ) then
                set TempValue = ( TempValue + 1 )
                call SaveStringBJ( tString, TempValue, StringHashBJ("TDS"), HashTable )
                set TDSList[TempValue] = tString
            endif
            set tString = ""
        endif
        set index = index + 1
    endloop

    set TDSCount = TempValue

    return TempValue
endfunction

function ForgeItems_Func takes unit whichUnit, string mItemString ,string lItmeString returns nothing

    local integer len = SplitStringWith( mItemString, "," )
    local string tString
    local integer mItemID
    local integer lItemID = ASCIIStringToInteger(lItmeString)
    local integer index = 0

    set isOK = false
    set bj_forLoopAIndexEnd = len

    loop

        exitwhen index >= bj_forLoopAIndexEnd

        //材料物品
        set tString = LoadStringBJ(index+1, StringHashBJ("TDS"), HashTable)
        set mItemID = ASCIIStringToInteger(tString)
        call RemoveItem( GetItemOfTypeFromUnitBJ(whichUnit, mItemID) )


        set index = index + 1
    endloop

    //最终物品
    call DisplayTimedTextToPlayer(Player(SelfIndex), 0, 0, 3, "|cff0042ff合成物品|r" + GetObjectName(lItemID))
    call UnitAddItemByIdSwapped( lItemID, whichUnit )
    call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", whichUnit, "origin") )

endfunction

function UnitInventoryItemCount takes unit whichUnit, integer itemId returns integer

    local item TempItem
    local integer count = 0
    local integer index = 0

    set bj_forLoopAIndexEnd = UnitInventorySizeBJ(whichUnit) - 1
    loop
        exitwhen index >= bj_forLoopAIndexEnd
        set TempItem = UnitItemInSlot(whichUnit, index)

        if GetItemTypeId(TempItem) == itemId and TempItem != GetManipulatedItem() then
            //属于这种物品而且不是被正在操作的物品
            set count = count + 1
        endif


        set index = index + 1
    endloop

    return count
endfunction

function GetTeamBase takes integer teamId returns unit
	local unit tUnit
	if teamId == 1 then
	    set tUnit = JE4
	elseif teamId == 2 then
		set tUnit = JC4
	endif
	return tUnit
endfunction

function ShowTimedTextToPlayer takes integer playerid, real duration, string message returns nothing
	call DisplayTimedTextToPlayer( Player(playerid), 0, 0, duration, message )
endfunction

//===========================================================================

function I57 takes nothing returns boolean
return(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_USER and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function I27 takes integer I_7,integer a1,integer a2,integer a3,integer a4,integer a5 returns nothing
call SaveInteger(IL7,I_7,1,a1)
call SaveInteger(IL7,I_7,2,a2)
call SaveInteger(IL7,I_7,3,a3)
call SaveInteger(IL7,I_7,4,a4)
call SaveInteger(IL7,I_7,5,a5)
endfunction
function J47 takes unit u returns nothing
local integer I_7=GetUnitTypeId(u)
local player p=GetOwningPlayer(u)
local integer i=1
loop
exitwhen i>5
call SetPlayerAbilityAvailable(p,LoadInteger(IL7,I_7,i),true)
set i=i+1
endloop
endfunction
function J77 takes nothing returns nothing
call J47(GetEnumUnit())
endfunction
function AvailableHumanTimer takes nothing returns nothing
call GroupClear(I17)
call GroupEnumUnitsInRect(I17,GetWorldBounds(),Condition(function I57))
call ForGroup(I17,function J77)
endfunction
function bug_SkillEnableInit takes nothing returns boolean
call CommentString("call TimerStart(i_HumanHeroAbilityEnableLoop,0.1,true,(function AvailableHumanTimer))")
call DestroyTrigger(GetTriggeringTrigger())
return false
endfunction
function J87 takes nothing returns nothing
call I27(1214344551,1093678938,1093677402,1093809742,1096904043,1093815628)
call I27(1214409837,0,1093742680,1093742932,1093742898,1093684818)
call I27(1215130471,1093677361,1093678167,1093679155,1093679160,1096904043)
call I27(1215324524,1095264354,1095263347,1095266917,1095262564,0)
call I27(1331850337,1095726955,1095721842,1095724393,1095726967,0)
call I27(1332109682,1093810505,1093808694,1096904043,1093678134,1093678149)
call I27(1332963428,1093677649,1093683019,1093816137,0,1096904043)
call I27(1333027688,1093682248,1093682252,1093686091,1093682250,1096904043)
call I27(1164207469,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1164209517,1095069026,1095068013,1095066998,1095069029,0)
call I27(1164666213,1096904043,1093677877,1093678679,1093678678,0)
call I27(1164799855,1093682264,1093677378,1093682263,1093682265,1096904043)
call I27(1165451634,1093687629,1093685324,1093677904,1093677905,1096904043)
call I27(1432580716,1093744977,1093682009,1096904043,1093684300,1093681754)
call I27(1432642913,1093684819,1093684551,1093683507,1093684550,1096904043)
call I27(1432646245,0,1093679173,1093677899,1096904043,1093677640)
call I27(1433168227,1096904043,1093678387,1093678918,1093679186,1093678420)
call I27(1315074670,1093685570,1096904043,1093677625,1093677622,1093686851)
call I27(1315988077,1093678669,1097032808,1093684568,1093684561,1096904043)
call I27(1316252014,1093678645,1093678137,1093678405,1096904043,1093681745)
call I27(1316122466,1095660409,1095656307,1095656807,1095660135,0)
call I27(1315334514,1093682773,1093681746,1093810506,1093682521,1093684818)
call I27(1164277353,1096904043,1093678929,1093751369,1093815130,1093683252)
call I27(1164277357,1096904043,1093678929,1093751369,1093815130,1093683252)
call I27(1164799603,1096904043,1093808453,1093677391,1095067246,1093752632)
call I27(1214345830,1093679182,1093679190,1093682514,1093678657,1096904043)
call I27(1214802796,1095264354,1095263347,1095266917,1095262564,0)
call I27(1214931305,1096904043,1093748025,1093678147,1095262562,1093677906)
call I27(1215063922,1093677895,1093677894,1096904043,1093812553,1093681996)
call I27(1215128178,1096904043,1093677616,1093684789,1093683779,1093810503)
call I27(1215324721,1095264354,1095263347,1095266917,1095262564,0)
call I27(1215657064,1093750841,1093684291,1093677913,1096904043,1095657827)
call I27(1215722344,1093684296,1093683512,1093682499,1096904043,1093684293)
call I27(1215723364,1096904043,1093677633,1094934883,1093744463,1093683534)
call I27(1315070563,1096904043,1093678135,1093678407,1093677131,1093684529)
call I27(1331982964,1095722611,1095725926,1095721836,1095722353,0)
call I27(1332179560,1093682242,1093742660,1093682231,1093687627,1096904043)
call I27(1332766568,1096904043,1093683510,1093686065,1093681974,1093682482)
call I27(1332898670,1096904043,1093677136,1093685848,1093677360,1093677128)
call I27(1432510828,1093751127,1093681985,1093681991,1093682004,1096904043)
call I27(1433105516,1096904043,1093683511,1093744688,1093681713,1093747288)
call I27(1433631084,1093678160,1096904043,1093677909,1093677907,1093678644)
call I27(1315007329,1096904043,1093749073,1093678913,1093677108,1093681716)
call I27(1162032439,1096904043,1093744435,1093684569,1093684563,1093677363)
call I27(1162032951,1096904043,1093746995,1093679152,1093679446,1093684557)
call I27(1311781175,1096904043,1093681733,1093808460,1093685040,1093748042)
call I27(1429221451,1093678674,1093683248,1093678671,1093682753,1096904043)
call I27(1313026096,1096904043,1095267426,1095721842,1096114550,1093677401)
call I27(1430466872,1096904043,1093687349,1093684558,1093677646,1093679413)
call I27(1162032181,1093679153,1096904043,1093682010,1093684299,1093683761)
call I27(1311781174,1096904043,1093681733,1093808460,1093685040,1093748042)
call I27(1430467634,1093684818,1093679412,1093742674,1093750608,1093684565)
call I27(1211117637,1093677895,1093677894,1096904043,1093812553,1093681996)
call I27(1429221430,1093687121,1093681739,1093681736,1096904043,1093681735)
call I27(1160785970,1093748023,1093747792,1093748022,1093747023,1096904043)
call I27(1211117639,1093677895,1093677894,1096904043,1093812553,1093681996)
call I27(1211117643,1093684818,1093678664,1093678410,1093678658,1093681483)
call I27(1429221431,1093683793,1096904043,1093678681,1093677381,1093677624)
call I27(1212363833,1096904043,1093815125,1093809220,1093678643,1093678933)
call I27(1430466609,1096904043,1093685559,1093684549,1093678145,1093810258)
call I27(1212365106,1096904043,1093682266,1093684025,1093677130,1093685831)
call I27(1429221432,1096904043,1093677893,1093687878,1093679411,1093677892)
call I27(1311781199,1093684818,1093681461,1093681464,1093748038,1093681479)
call I27(1429221424,1096904043,1093687351,1093679445,1093748789,1093815119)
call I27(1311781171,1093684818,1093681461,1093681464,1093748038,1093681479)
call I27(1211117616,1096904043,1093816142,1093677142,1093677139,1093816118)
call I27(1328558160,1093682998,0,1093684818,1093684056,1093682766)
call I27(1430466865,1096904043,1093677651,1093677879,1093751364,1093810508)
call I27(1211117638,1093677895,1093677894,1096904043,1093812553,1093681996)
call I27(1430468144,1093684818,1093679192,1093750341,1093686872,1093750337)
call I27(1429221441,1093677903,1093677902,1093685847,1093678389,1096904043)
call I27(1160785972,1093678161,1093677621,1093677872,1096904043,1095263841)
call I27(1328558154,1096904043,1093750840,1093682996,1093682997,1093682515)
call I27(1211117640,1096904043,1093679428,1093684564,1093681989,1093681987)
call I27(1429221445,1093678647,1093678422,1093678640,1093677390,1096904043)
call I27(1430468406,1093677635,1096904043,1093677645,1093685302,1093678899)
call I27(1430468913,1096904043,1093678403,1093810507,1093683786,1093677876)
call I27(1160785973,1093678642,1093678130,1093678388,1096904043,1093678129)
call I27(1211117617,1096904043,1093744944,1093677387,1093814611,1093752648)
call I27(1311781172,1093684818,1093681461,1093681464,1093748038,1093681479)
call I27(1211117624,1093682774,1093684531,1093683024,1093682775,1096904043)
call I27(1211117654,1093747028,1093682994,1093684560,1093747504,1096904043)
call I27(1311781185,1093684314,1093815892,1093743692,1093684275,1096904043)
call I27(1211117620,1096904043,1093677382,1093677623,1093744728,1093677392)
call I27(1429221446,1093678665,1093678660,1093682764,1093678667,1096904043)
call I27(1311781173,1093684818,1093681461,1093681464,1093748038,1093681479)
call I27(1211117633,1093684310,1093810260,1093684308,1096904043,1093684045)
call I27(1160786241,1093684815,1093684813,1093684820,1093684805,1096904043)
call I27(1160786242,1093682776,1093684801,1093683287,1093683257,1096904043)
call I27(1211117636,1093685071,1093685041,1096904043,1093681732,1093685042)
call I27(1160786000,1093685047,1093685046,1093685048,1093685045,1096904043)
call I27(1429221456,1096904043,1093685067,1093685066,1093685065,1093683526)
call I27(1160786243,1093683765,1093681491,1093678672,1395667000,1096904043)
call I27(1311781192,1096904043,0,1093683532,1093685043,1095656306)
call I27(1311781193,1096904043,0,1093683532,1093685043,1095656306)
call I27(1311781194,1096904043,0,1093683532,1093685043,1095656306)
call I27(1311781204,1096904043,0,1093683532,1093685043,1095656306)
call I27(1311781206,1093684280,1093684302,1093684054,1096904043,1093684053)
call I27(1211117641,1096904043,1093684792,1093684802,1093684791,1093684567)
call I27(1211117642,1096904043,1093684792,1093684802,1093684791,1093684567)
call I27(1311781207,1093742668,1093685074,1093742673,1096904043,1093684817)
call I27(1311781442,1096904043,1093681733,1093808460,1093685040,1093748042)
call I27(1211117646,1093685579,1093685815,1093685575,1096904043,1093685573)
call I27(1211117649,1093685586,1093685585,1093685582,1093685584,1096904043)
call I27(1311780946,1096904043,1093685825,1093677385,0,1095328612)
call I27(1211117650,1093743955,1093685813,1093743958,1093743946,1093684818)
call I27(1211117651,1093743698,1093743696,1093743695,1096904043,1093685591)
call I27(1160786265,1093685840,1093685839,1093748033,1096904043,1093685846)
call I27(1311780930,1093686072,1093686083,1093686082,1093686073,1096904043)
call I27(1429221443,1093686103,1096904043,1093686099,1093686322,1093744948)
call I27(1211117653,1093808473,1093808472,1093808471,1093808470,0)
call I27(1160786256,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1160786481,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1160786483,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1160786484,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1211117652,1093687864,1093687862,1093687861,1096904043,1093687860)
call I27(1211119187,1093743414,1093743444,0,1093742923,1096904043)
call I27(1211119191,0,1093742680,1093742932,1093742898,1093684818)
call I27(1211119192,0,1093742680,1093742932,1093742898,1093684818)
call I27(1211119193,0,1093742680,1093742932,1093742898,1093684818)
call I27(1211119409,1093749069,1093748818,1096904043,1093749070,1093749303)
call I27(1311786311,1093743184,1093743179,1093743689,1096904043,1093743178)
call I27(1311786313,1093743184,1093743179,1093743408,1096904043,1093743178)
call I27(1311786314,1093743184,1093743179,1093743408,1096904043,1093743178)
call I27(1311786315,1093743184,1093743179,1093743408,1096904043,1093743178)
call I27(1311786317,1093743184,1093743179,1093743408,1096904043,1093743178)
call I27(1211119433,1093743955,1093743958,1093685813,1093743946,1093684818)
call I27(1328558389,1093747524,1093747009,0,1093746993,1096904043)
call I27(1328558390,1093748044,1093744982,1093744986,1093744975,1093684818)
call I27(1328558391,1093748044,1093744982,1093744986,1093744975,1093684818)
call I27(1211119668,1093747028,1093682994,1093684560,1093747504,1096904043)
call I27(1211119682,1093747028,1093682994,1093684560,1093747504,1096904043)
call I27(1211119683,1093747028,1093682994,1093684560,1093747504,1096904043)
call I27(1211119684,1093747028,1093682994,1093684560,1093747504,1096904043)
call I27(1311787088,1096904043,1093748819,1093750087,0,1093748817)
call I27(1311787092,1096904043,0,1093683532,1093685043,1095656306)
call I27(1211122243,0,1093742680,1093742932,1093742898,1093684818)
call I27(1160786502,1093684818,0,1093751371,0,0)
call I27(1160786503,1097885816,0,0,0,0)
call I27(1160786504,1096904043,1093751604,1093751608,1093751617,1093751618)
call I27(1160786505,1096904043,1093753167,1093753169,1093751607,1093753170)
call I27(1160786506,1096904043,1093751637,1093751894,1093751639,1093752118)
call I27(1160786507,1096904043,1093813065,1093813593,1093814834,1093814850)
call I27(1160786508,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1160786509,1096904043,1093684057,1093677618,1095066220,1093682483)
call I27(1160786510,1096904043,1093751631,1093751633,1093808697,1093751861)
call I27(1328558406,1093684818,1093751864,0,1093751874,1093810257)
call I27(1160786511,1096904043,1093751631,1093751633,1093808697,1093751861)
call I27(1160786517,1096904043,1093678929,1093751369,1093815130,1093683252)
call I27(1160786518,1096904043,1093678929,1093751369,1093815130,1093683252)
call I27(1160786519,1096904043,1093678929,1093751369,1093815130,1093683252)
call I27(1211122513,1096904043,1093744944,1093677387,1093814611,1093752648)
call I27(1160786520,1093684818,0,1093809991,1093809992,1093810006)
call I27(1311788336,1096904043,1093814320,1093814323,1093814355,0)
call I27(1311788338,1096904043,1093812534,1093812536,1093812537,1093812545)
call I27(1211122764,1096904043,1093812803,1093812788,1093812789,1093812790)
call I27(1211122767,1096904043,1093812805,1093814350,1093812807,1093814612)
call I27(1160786737,1096904043,1093813335,1093813336,1093813338,1093813552)
call I27(1160786738,1096904043,1093813835,1093813555,1093813556,0)
call I27(1311788343,1096904043,1093815361,1093815362,1093687856,1093815877)
call I27(1311788345,1096904043,1093813573,1093813808,1093813812,1093813813)
call I27(1311788353,1096904043,1093815361,1093815362,1093687856,1093815877)
call I27(1311788356,1096904043,1093813844,1093813583,1093813841,1093813836)
call I27(1311788360,1096904043,1093814320,1093814323,1093814355,0)
call I27(1211122993,1096904043,1093814337,1093814338,1093814340,1093814343)
call I27(1211122995,1096904043,1093814337,1093814338,1093814340,1093814343)
call I27(1211122996,1096904043,1093814337,1093814338,1093814340,1093814343)
call I27(1211122997,1096904043,1093814337,1093814338,1093814340,1093814343)
call I27(1429221720,1093744977,1093682009,1096904043,1093684300,1093681754)
call I27(1311788363,1096904043,1093815372,1093815373,1093815600,1093815601)
call I27(1311788365,1096904043,1093815372,1093815373,1093815600,1093815601)
call I27(1311788354,1096904043,1093815361,1093815362,1093687856,1093815877)
call I27(1311788355,1096904043,1093815361,1093815362,1093687856,1093815877)
call I27(1311788367,1096904043,1093815361,1093815362,1093687856,1093815877)
endfunction
function GetLastEnumedGroup takes nothing returns group
return I37
endfunction
function J97 takes real JD7,location JE7,boolexpr JF7 returns group
set I37=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(I37,JE7,JD7,JF7)
if JF7!=null then
call DestroyBoolExpr(JF7)
endif
return I37
endfunction
function JG7 takes rect r,boolexpr JF7 returns group
set I37=CreateGroup()
call GroupEnumUnitsInRect(I37,r,JF7)
if JF7!=null then
call DestroyBoolExpr(JF7)
endif
return I37
endfunction
function JH7 takes rect r,player JI7 returns group
set I37=CreateGroup()
set bj_groupEnumOwningPlayer=JI7
call GroupEnumUnitsInRect(I37,r,filterGetUnitsInRectOfPlayer)
return I37
endfunction
function JJ7 takes player JI7,boolexpr JF7 returns group
set I37=CreateGroup()
call GroupEnumUnitsOfPlayer(I37,JI7,JF7)
if JF7!=null then
call DestroyBoolExpr(JF7)
endif
return I37
endfunction
function JK7 takes player JI7,integer JM7 returns group
set I37=CreateGroup()
set bj_groupEnumTypeId=JM7
call GroupEnumUnitsOfPlayer(I37,JI7,filterGetUnitsOfPlayerAndTypeId)
return I37
endfunction
function JN7 takes string s returns boolean
if I87[GetPlayerId(GetTriggerPlayer())]then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,45,s)
endif
return true
endfunction
function JO7 takes nothing returns boolean
local integer JP7=LoadInteger(IS7,IZ7,IQ7)-1
local unit JQ7
local real JR7
set IA7=0
loop
exitwhen IA7>JP7
if IY7-LoadReal(IS7,IZ7,IA7)>2.5 or IsUnit(LoadUnitHandle(IS7,IZ7,IA7),null)then
set JQ7=LoadUnitHandle(IS7,IZ7,JP7)
set JR7=LoadReal(IS7,IZ7,JP7)
call RemoveSavedBoolean(IS7,IZ7,GetHandleId(LoadUnitHandle(IS7,IZ7,IA7)))
call RemoveSavedInteger(IS7,IZ7,GetHandleId(LoadUnitHandle(IS7,IZ7,IA7)))
call SaveUnitHandle(IS7,IZ7,IA7,JQ7)
call SaveReal(IS7,IZ7,IA7,JR7)
call RemoveSavedHandle(IS7,IZ7,JP7)
call RemoveSavedReal(IS7,IZ7,JP7)
call SaveInteger(IS7,IZ7,GetHandleId(JQ7),IA7)
call SaveInteger(IS7,IZ7,IQ7,JP7)
set JP7=JP7-1
endif
set IA7=IA7+1
endloop
set JQ7=null
return JP7==-1
endfunction
function JS7 takes nothing returns boolean
local integer JP7=LoadInteger(IS7,IZ7,IP7)-1
local integer JT7=JP7+IR7
local unit JQ7
local real JR7
set IA7=IR7
loop
exitwhen IA7>JT7
if IY7-LoadReal(IS7,IZ7,IA7)>=5 or IsUnit(LoadUnitHandle(IS7,IZ7,IA7),null)then
set JQ7=LoadUnitHandle(IS7,IZ7,JP7)
set JR7=LoadReal(IS7,IZ7,JP7)
call RemoveSavedBoolean(IS7,IZ7,IR7+GetHandleId(LoadUnitHandle(IS7,IZ7,IA7)))
call RemoveSavedInteger(IS7,IZ7,IR7+GetHandleId(LoadUnitHandle(IS7,IZ7,IA7)))
call SaveUnitHandle(IS7,IZ7,IA7,JQ7)
call SaveReal(IS7,IZ7,IA7,JR7)
call RemoveSavedHandle(IS7,IZ7,JP7)
call RemoveSavedReal(IS7,IZ7,JP7)
call SaveInteger(IS7,IZ7,GetHandleId(JQ7),IA7)
call SaveInteger(IS7,IZ7,IP7,JP7)
set JP7=JP7-1
endif
set IA7=IA7+1
endloop
set JQ7=null
return JP7==-1
endfunction
function JU7 takes boolean do returns nothing
if do then
call FlushChildHashtable(IS7,IZ7)
set IT7[IW7]=IT7[IV7-1]
set IU7[IW7]=IU7[IV7-1]
set IT7[IV7-1]=null
set IU7[IV7-1]=0
endif
endfunction
function JV7 takes nothing returns boolean
set IX7=IX7+1
set IW7=0
set IY7=TimerGetElapsed(V)
loop
exitwhen IW7>IV7
set IZ7=GetHandleId(IT7[IW7])
if IsUnit(IT7[IW7],null)or GetWidgetLife(IT7[IW7])<=.405 then
call JU7(true)
else
if IU7[IW7]==2 then
call JU7(JO7())
elseif IU7[IW7]==1 and IX7-IX7/2*2==0 then
call JU7(JS7())
endif
endif
set IW7=IW7+1
endloop
return false
endfunction
function JW7 takes unit JX7,unit JY7 returns nothing
local integer JZ7=GetHandleId(JX7)
local integer JP7
local integer JA7=GetHandleId(JY7)
if not LoadBoolean(IS7,JZ7,JA7+IR7)then
set JP7=LoadInteger(IS7,JZ7,IP7)
if JP7==0 then
set IT7[IV7]=(JX7)
set IU7[IV7]=1
set IV7=IV7+1
endif
call SaveUnitHandle(IS7,JZ7,IR7+JP7,JY7)
call SaveInteger(IS7,JZ7,IP7,JP7+1)
call SaveBoolean(IS7,JZ7,JA7+IR7,true)
call SaveInteger(IS7,JZ7,JA7+IR7,JP7)
else
set JP7=LoadInteger(IS7,JZ7,JA7+IR7)
endif
call SaveReal(IS7,JZ7,IR7+JP7,TimerGetElapsed(V))
endfunction
function JB7 takes unit JY7,unit JX7 returns nothing
local integer JZ7=GetHandleId(JY7)
local integer JP7
local integer JA7=GetHandleId(JX7)
if not LoadBoolean(IS7,JZ7,JA7)then
set JP7=LoadInteger(IS7,JZ7,IQ7)
if JP7==0 then
set IT7[IV7]=(JY7)
set IV7=IV7+1
endif
call SaveUnitHandle(IS7,JZ7,JP7,JY7)
call SaveInteger(IS7,JZ7,IQ7,JP7+1)
call SaveBoolean(IS7,JZ7,JA7,true)
call SaveInteger(IS7,JZ7,JA7,JP7)
else
set JP7=LoadInteger(IS7,JZ7,JA7)
endif
call SaveReal(IS7,JZ7,JP7,TimerGetElapsed(V))
endfunction
function JC7 takes nothing returns boolean
local unit J37
local unit J67
local integer pointerid
set J37=GetAttacker()
set J67=GetTriggerUnit()
call JW7(J67,J37)
call JB7(J37,J67)
set J37=null
set J67=null
return false
endfunction
function JL7 takes unit J17 returns nothing
local trigger t=null
set LP4="Aatk_RegisterTower"
if IsUnit(J17,null)==false then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,J17,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JC7))
set t=null
endif
endfunction
function J07 takes unit J57 returns integer
return LoadInteger(IS7,GetHandleId(J57),IP7)
endfunction
function J27 takes unit J57 returns boolean
local integer i
local integer JT7
local integer JA7
if LoadInteger(IS7,GetHandleId(J57),IP7)==0 then
return false
endif
set i=IR7
set JT7=IR7+LoadInteger(IS7,GetHandleId(J57),IP7)
set JA7=GetHandleId(J57)
loop
exitwhen i>=JT7
if IsUnitType(LoadUnitHandle(IS7,JA7,i),UNIT_TYPE_HERO) or IsUnitType(LoadUnitHandle(IS7,JA7,i),UNIT_TYPE_STRUCTURE) then
return true
endif
set i=i+1
endloop
return false
endfunction
function J_7 takes unit J57 returns boolean
local integer i
local integer JT7
local integer JA7
if LoadInteger(IS7,GetHandleId(J57),IQ7)==0 then
return false
endif
set i=0
set JT7=LoadInteger(IS7,GetHandleId(J57),IQ7)
set JA7=GetHandleId(J57)
loop
exitwhen i>=JT7
if IsUnitType(LoadUnitHandle(IS7,JA7,i),UNIT_TYPE_HERO) or IsUnitType(LoadUnitHandle(IS7,JA7,i),UNIT_TYPE_STRUCTURE) then
return true
endif
set i=i+1
endloop
return false
endfunction
function K47 takes nothing returns nothing
local integer i=0
call TriggerRegisterTimerEvent(IO7,.5,true)
call TriggerAddCondition(IO7,Condition(function JV7))
loop
exitwhen i>$400
set IT7[i]=null
set IU7[i]=0
set i=i+1
endloop
endfunction
function K77 takes nothing returns nothing
call JL7(JF4)
call JL7(JG4)
call JL7(JH4)
call JL7(JI4)
call JL7(JJ4)
call JL7(JK4)
call JL7(JM4)
call JL7(JN4)
call JL7(JO4)
call JL7(JP4)
call JL7(JQ4)
call JL7(J34)
call JL7(J64)
call JL7(JL4)
call JL7(J14)
call JL7(J04)
call JL7(J54)
call JL7(J24)
call JL7(J_4)
call JL7(K44)
call JL7(K74)
call JL7(K84)
endfunction
function K87 takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0
endfunction
function K97 takes nothing returns boolean
return not IsUnitIllusion(GetFilterUnit())
endfunction
function KD7 takes nothing returns boolean
return true
endfunction
function KE7 takes string KF7 returns boolean
return(KF7==GX7)
endfunction
function KG7 takes player J57 returns string
local integer id=GetPlayerId(J57)
if id>=$C then
return HO7
else
if id<=5 then
return HP7+I2S(id)
else
return HP7+I2S(id-1)
endif
endif
endfunction
function KH7 takes string s returns integer
local integer KI7=0
local integer KJ7=1
local integer KK7=1
loop
exitwhen KJ7>StringLength(s)
loop
exitwhen KK7>$A
if SubString(s,KJ7-1,KJ7)==SubString(GU7,KK7-1,KK7)then
set KI7=KI7+R2I((48+KK7-1)*Pow(256.,I2R(StringLength(s)-KJ7)))
set KK7=KK7+1
else
set KK7=KK7+1
endif
endloop
set KK7=1
loop
exitwhen KK7>26
if SubString(s,KJ7-1,KJ7)==SubString(GV7,KK7-1,KK7)then
set KI7=KI7+R2I(I2R(65+KK7-1)*Pow(256.,I2R(StringLength(s)-KJ7)))
set KK7=KK7+1
else
set KK7=KK7+1
endif
endloop
set KK7=1
loop
exitwhen KK7>26
if SubString(s,KJ7-1,KJ7)==SubString(GW7,KK7-1,KK7)then
set KI7=KI7+R2I((97+KK7-1)*Pow(256.,I2R(StringLength(s)-KJ7)))
set KK7=KK7+1
else
set KK7=KK7+1
endif
endloop
set KK7=1
set KJ7=KJ7+1
endloop
return KI7
endfunction
function KM7 takes integer i returns string
local string KI7=""
local integer KN7=0
local integer KO7=0
loop
exitwhen i==0
set KN7=i-(i/256)*256
if KN7>=48 and KN7<=57 then
set KO7=KN7-48
set KI7=SubString(GU7,KO7,KO7+1)+KI7
endif
if KN7>=65 and KN7<=90 then
set KO7=KN7-65
set KI7=SubString(GV7,KO7,KO7+1)+KI7
endif
if KN7>=97 and KN7<=122 then
set KO7=KN7-97
set KI7=SubString(GW7,KO7,KO7+1)+KI7
endif
set i=i/256
endloop
return KI7
endfunction
function KP7 takes integer KQ7,integer KR7,boolean KS7 returns nothing
local integer i=GetPlayerId(GetTriggerPlayer())
call UnitAddAbility(H27[i],KQ7)
call SetUnitAbilityLevel(H27[i],KQ7,KR7)
call UnitMakeAbilityPermanent(H27[i],KS7,KQ7)
endfunction
function KT7 takes unit J57,integer KU7,integer KV7 returns nothing
if IsUnitType(J57,UNIT_TYPE_HERO) then
if KU7==0 then
call SetHeroStr(J57,GetHeroStr(J57,false)+KV7,true)
elseif KU7==1 then
call SetHeroAgi(J57,GetHeroAgi(J57,false)+KV7,true)
elseif KU7==2 then
call SetHeroInt(J57,GetHeroInt(J57,false)+KV7,true)
endif
endif
endfunction
function KW7 takes nothing returns nothing
local unit u=GetTriggerUnit()
local string KX7=GetUnitName(u)
local integer KY7=GetLearnedSkill()
local integer KZ7=StringHash(KX7)
if GetUnitAbilityLevel(u,KY7)==1 and(not IsUnitIllusion(u))and LoadInteger(H_7,KZ7,KY7)!=1 then
call SaveInteger(H_7,KZ7,1851878757,GetUnitTypeId(u))
call SaveStr(H_7,KZ7,H57,LoadStr(H_7,KZ7,H57)+HI7+"|c00ED6C03"+GetObjectName(KY7)+"|r"+HI7+KM7(KY7)+HN7)
call SaveInteger(H_7,KZ7,KY7,1)
endif
set u=null
endfunction
function KA7 takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
set H27[id]=GetTriggerUnit()
endfunction
function KB7 takes nothing returns nothing
call TriggerAddAction(H37,function KA7)
endfunction
function KC7 takes nothing returns nothing
call TriggerAddAction(H67,function KW7)
endfunction
function K37 takes integer id returns player
if id>$F or id<0 then
return Player(0)
endif
return Player(id)
endfunction
function K67 takes nothing returns nothing
if ID7[GetPlayerId(GetLocalPlayer())]then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,HY7+GetUnitName(GetEventDamageSource())+HZ7+GetUnitName(GetTriggerUnit())+HA7+R2S(GetEventDamage()))
endif
endfunction
function KL7 takes nothing returns nothing
local group g=CreateGroup()
local unit u=null
call GroupEnumUnitsInRect(g,GetWorldBounds(),Condition(function K87))
set u=FirstOfGroup(g)
loop
exitwhen u==null
call TriggerRegisterUnitEvent(H07,u,EVENT_UNIT_DAMAGED)
call GroupRemoveUnit(g,u)
set u=FirstOfGroup(g)
endloop
call DestroyGroup(g)
set u=null
set g=null
call TriggerAddAction(H07,function K67)
endfunction
function K17 takes nothing returns nothing
local string K07=GetEventPlayerChatString()
local integer KK7=StringLength(K07)
local string K57=null
local string KV7=null
local integer i1=0
local integer i2=0
local real r1=0
local integer K27
local string K_7=GetEventPlayerChatStringMatched()
local integer id=GetPlayerId(GetTriggerPlayer())
local item M47=null
if K_7==G17 then
set K57=SubString(K07,8,KK7)
set K27=StringHash(K57)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$D,HJ7+KM7(LoadInteger(H_7,K27,1851878757)))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$D,HM7+LoadStr(H_7,K27,H57))
elseif K_7==G07 then
set K57=SubString(K07,7,KK7)
set I77[id]=KE7(K57)
elseif K_7==G37 then
set K57=SubString(K07,6,KK7)
set I97=KE7(K57)
elseif K_7==G57 then
set K57=SubString(K07,$A,KK7)
set I87[id]=KE7(K57)
elseif K_7==G_7 then
set K57=SubString(K07,8,KK7)
set ID7[id]=KE7(K57)
if IE7 then
call KL7()
set IE7=false
endif
elseif K_7==HH7 then
set i1=S2I(SubString(K07,6,7))
set i2=S2I(SubString(K07,8,KK7))
call KT7(H27[id],i1,i2)
elseif K_7==H47 then
set K57=SubString(K07,7,KK7)
call SetUnitInvulnerable(H27[id],KE7(K57))
elseif K_7==GC7 then
set r1=S2R(SubString(K07,7,KK7))
call SetUnitTimeScale(H27[id],r1)
elseif K_7==H77 then
set i2=9
loop
exitwhen i2==KK7-1
if SubString(K07,i2,i2+1)=="o" then
exitwhen true
endif
set i2=i2+1
endloop
set K57=SubString(K07,i2,KK7)
set i1=S2I(SubString(K07,7,9))
call SetPlayerAlliance(K37(i1),Player(id),ALLIANCE_SHARED_CONTROL,KE7(K57))
elseif K_7==HG7 then
set i1=S2I(SubString(K07,5,KK7))
call SetUnitOwner(H27[id],K37(i1),true)
elseif K_7==H87 then
set i1=S2I(SubString(K07,8,9))
set i2=S2I(SubString(K07,$A,KK7))
call SetItemCharges(UnitItemInSlot(H27[id],i1),i2)
elseif K_7==H97 then
set i1=KH7(SubString(K07,6,KK7))
set M47=CreateItem(i1,GetUnitX(H27[id]),GetUnitY(H27[id]))
call SetItemPlayer(M47,GetOwningPlayer(H27[id]),false)
call UnitAddItem(H27[id],M47)
set M47=null
elseif K_7==HD7 then
set i1=S2I(SubString(K07,9,$A))
set K57=SubString(K07,$B,KK7)
set M47=UnitRemoveItemFromSlot(H27[id],i1)
if KE7(K57)then
call SetWidgetLife(M47,.5)
call RemoveItem(M47)
set M47=null
endif
elseif K_7==HE7 then
set i1=S2I(SubString(K07,6,7))
set K57=SubString(K07,8,KK7)
call SetItemDroppable(UnitItemInSlot(H27[id],i1),KE7(K57))
elseif K_7==GA7 then
set i1=KH7(SubString(K07,7,$B))
set i2=S2I(SubString(K07,$C,StringLength(K07)))
call KP7(i1,i2,true)
elseif K_7==GB7 then
set i1=KH7(SubString(K07,9,KK7))
call UnitRemoveAbility(H27[id],i1)
elseif K_7==HF7 then
set i1=S2I(SubString(K07,9,KK7))
if i1==1 then
call KillUnit(H27[id])
else
call RemoveUnit(H27[id])
endif
elseif K_7==GZ7 then
set i1=KH7(SubString(K07,3,KK7))
call CreateUnit(GetOwningPlayer(H27[id]),i1,GetUnitX(H27[id]),GetUnitY(H27[id]),0)
elseif K_7==GY7 then
set K57=KM7(GetUnitTypeId(H27[id]))
set i1=S2I(SubString(K07,6,KK7))
set M47=UnitItemInSlot(H27[id],i1)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,HK7+(GetUnitName(H27[id])))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,HJ7+K57)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetItemName(M47)+HI7+KM7(GetItemTypeId(M47)))
set M47=null
elseif K_7==G67 then
set i1=KH7(SubString(K07,8,KK7))
call SetPlayerAbilityAvailable(GetOwningPlayer(H27[id]),i1,true)
elseif K_7==GL7 then
set i1=KH7(SubString(K07,9,KK7))
call SetPlayerAbilityAvailable(GetOwningPlayer(H27[id]),i1,false)
endif
endfunction
function M77 takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer M87=GetSpellAbilityId()
local integer K_7=LoadInteger(H_7,GetHandleId(u),1667330932)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$C,HT7+GetUnitName(u)+HR7+KM7(GetUnitTypeId(u))+HS7+KG7(GetTriggerPlayer()))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$C,HU7+GetObjectName(M87)+HV7+KM7(M87)+HW7+"|c00fffc01 "+OrderId2String(K_7)+"|r"+HX7+I2S(K_7))
set u=null
endfunction
function M97 takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer JA7=GetHandleId(u)
local integer MD7=GetUnitCurrentOrder(u)
local integer KQ7=GetSpellAbilityId()
if MD7!=0 then
call SaveInteger(H_7,JA7,1667330932,MD7)
endif
if KQ7!=0 then
if I87[GetPlayerId(GetLocalPlayer())]then
call M77()
endif
endif
call RemoveSavedInteger(H_7,JA7,1667330932)
set u=null
endfunction
function ME7 takes nothing returns nothing
local unit u=GetTriggerUnit()
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,HQ7+GetUnitName(u)+HR7+KM7(GetUnitTypeId(u))+HS7+KG7(GetTriggerPlayer()))
set u=null
endfunction
function MF7 takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer KZ7=StringHash(GetUnitName(u))
if not HaveSavedInteger(H_7,KZ7,1851878757)then
call SaveInteger(H_7,KZ7,1851878757,GetUnitTypeId(u))
endif
if I77[GetPlayerId(GetLocalPlayer())] then
call ME7()
endif
if GetUnitAbilityLevel(u,1097625443)==0 and(not IsUnitIllusion(u))and GetOwningPlayer(u)!=Player(0)and GetOwningPlayer(u)!=Player(6)then
call TriggerRegisterUnitEvent(H07,u,EVENT_UNIT_DAMAGED)
endif
set u=null
endfunction
function MG7 takes nothing returns nothing
set I47=CreateRegion()
call RegionAddRect(I47,GetWorldBounds())
endfunction
function MH7 takes trigger J57,code MI7 returns nothing
call TriggerRegisterEnterRegion(J57,I47,Condition(function KD7))
call TriggerAddAction(J57,MI7)
endfunction
function MJ7 takes nothing returns nothing
call TriggerAddAction(H17,function M97)
endfunction
function MK7 takes nothing returns nothing
local integer i=0
call MG7()
loop
exitwhen i>$F
call TriggerRegisterPlayerUnitEvent(H37,Player(i),EVENT_PLAYER_UNIT_SELECTED,Condition(function KD7))
call TriggerRegisterPlayerUnitEvent(H67,Player(i),EVENT_PLAYER_HERO_SKILL,Condition(function K97))
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GA7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GB7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G07,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G27,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G37,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G57,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G_7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GC7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),H77,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G17,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),H47,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),HH7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),HG7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),H87,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),H97,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),HD7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),HE7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),HF7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GZ7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GY7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),GL7,false)
call TriggerRegisterPlayerChatEvent(HC7,Player(i),G67,false)
call TriggerRegisterPlayerUnitEvent(H17,Player(i),EVENT_PLAYER_UNIT_SPELL_EFFECT,Condition(function KD7))
call TriggerRegisterPlayerUnitEvent(H17,Player(i),EVENT_PLAYER_UNIT_ISSUED_ORDER,Condition(function KD7))
call TriggerRegisterPlayerUnitEvent(H17,Player(i),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function KD7))
call TriggerRegisterPlayerUnitEvent(H17,Player(i),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Condition(function KD7))
set I77[i]=false
set I87[i]=false
set ID7[i]=false
set i=i+1
endloop
call TriggerAddAction(HC7,function K17)
call MH7(HL7,function MF7)
call KB7()
call KC7()
call MJ7()
endfunction
function MM7 takes nothing returns boolean
local string s=GetEventPlayerChatString()
local string MN7=SubString(s,$B,StringLength(s))
if StringHash(I2S(StringHash(MN7)))==$9461998 then
call MK7()
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,HB7)
endif
call DestroyTrigger(GetTriggeringTrigger())
return false
endfunction
function MO7 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
loop
exitwhen i>$F
call TriggerRegisterPlayerChatEvent(t,Player(i),"-debugging ",false)
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function MM7))
set t=null
endfunction
function MP7 takes unit MQ7 returns real
return GetWidgetLife(MQ7)*hq[752+GetPlayerId(GetOwningPlayer(MQ7))]
endfunction
function MR7 takes unit MQ7,real MS7,real MT7,integer MU7 returns boolean
if MU7==2 then
return GetUnitManaPercent(MQ7)>=MS7 or GetUnitState(MQ7,UNIT_STATE_MANA)>=MT7
endif
return GetUnitManaPercent(MQ7)<=MS7 or GetUnitState(MQ7,UNIT_STATE_MANA)<=MT7
endfunction
function MV7 takes unit MQ7,real MW7,real MX7,integer MU7 returns boolean
if MU7==2 then
return GetUnitManaPercent(MQ7)>=MW7 or GetUnitState(MQ7,UNIT_STATE_MANA)>=MX7
endif
return GetUnitManaPercent(MQ7)<=MW7 or GetUnitState(MQ7,UNIT_STATE_MANA)<=MX7
endfunction
function MY7 takes unit a,unit b returns real
return bj_RADTODEG*Atan2(GetUnitY(b)-GetUnitY(a),GetUnitX(b)-GetUnitX(a))
endfunction
function MZ7 takes real x1,real y1,real x2,real y2 returns real
return bj_RADTODEG*Atan2(y2-y1,x2-x1)
endfunction
function MA7 takes player pl returns string
if(X_4[GetPlayerId(pl)]==1)then
return"E "
elseif(X_4[GetPlayerId(pl)]==3)then
return"N "
else
return"I "
endif
endfunction
function MB7 takes player p returns nothing
if GetAIDifficulty(p)==AI_DIFFICULTY_NEWBIE then
set X_4[GetPlayerId(p)]=1
elseif GetAIDifficulty(p)==AI_DIFFICULTY_NORMAL then
set X_4[GetPlayerId(p)]=3
elseif GetAIDifficulty(p)==AI_DIFFICULTY_INSANE then
set X_4[GetPlayerId(p)]=5
else
set X_4[GetPlayerId(p)]=0
endif
endfunction
function MC7 takes boolean M37,unit M67,unit ML7 returns unit
if M37 then
return M67
else
return ML7
endif
return null
endfunction
function M17 takes boolean M37,integer M07,integer M57 returns integer
if M37 then
return M07
else
return M57
endif
return 0
endfunction
function M27 takes boolean M37,string M_7,string N47 returns string
if M37 then
return M_7
else
return N47
endif
return""
endfunction
function N77 takes boolean M37,real M07,real M57 returns real
if M37 then
return M07
else
return M57
endif
return .0
endfunction
function N87 takes integer N97 returns integer
if(N97==1212363833 or N97==1212365106 or N97==1311781199 or N97==1315070563 or N97==1215657064 or N97==1332179560 or N97==1160785973 or N97==1311781174 or N97==1315074670 or N97==1164277353 or N97==1429221430 or N97==1165451634 or N97==1160785972 or N97==1162032181 or N97==1162032951 or N97==1315334514 or N97==1215722344 or N97==1160786242 or N97==1211117641 or N97==1211119409)then
return 1
endif
if(N97==1215723364 or N97==1328558160 or N97==1211117617 or N97==1212363833 or N97==1212365106 or N97==1311781199 or N97==1315070563 or N97==1215657064 or N97==1332179560 or N97==1160785973 or N97==1433631084 or N97==1211117624 or N97==1315007329 or N97==1215063922 or N97==1164207469 or N97==1315074670 or N97==1211117636 or N97==1311781206 or N97==1211117649 or N97==1160786265 or N97==1211117652 or N97==1211119187 or N97==1164277353 or N97==1162032439 or N97==1430466865 or N97==1429221441 or N97==1429221432 or N97==1429221430 or N97==1211117654 or N97==1432646245 or N97==1430467634 or N97==1429221424 or N97==1430468913 or N97==1162032181 or N97==1162032951 or N97==1160785970 or N97==1429221443 or N97==1328558154 or N97==1432510828 or N97==1315334514 or N97==1429221451 or N97==1215722344 or N97==1160786242 or N97==1211117641 or N97==1211119409 or N97==1160786505 or N97==1160786510 or N97==1311788336 or N97==1160786507)then
return 2
endif
if(N97==1211117617 or N97==1214344551 or N97==1211117624 or N97==1315988077 or N97==1211117616 or N97==1215063922 or N97==1311781193 or N97==1211119187 or N97==1430466865 or N97==1429221441 or N97==1429221432 or N97==1313026096 or N97==1429221443 or N97==1332109682 or N97==1429221446 or N97==1332766568 or N97==1432642913 or N97==1211117650 or N97==1328558389 or N97==1328558406 or N97==1160786502 or N97==1160786507 or N97==1160786738)then
return 3
endif
if(N97==1164799855 or N97==1333027688 or N97==1311781185 or N97==1433105516 or N97==1214409837 or N97==1215130471 or N97==1164799603 or N97==1432580716 or N97==1211117633 or N97==1332898670 or N97==1214345830 or N97==1160786000 or N97==1311780930 or N97==1311786311 or N97==1430466872 or N97==1430468144 or N97==1430466609 or N97==1211117640 or N97==1332963428 or N97==1429221445 or N97==1160786241 or N97==1429221456 or N97==1160786243 or N97==1311781207 or N97==1311780946 or N97==1211117646 or N97==1211117653 or N97==1311787088 or N97==1328558390 or N97==1160786506 or N97==1160786504)then
return 4
endif
if(N97==1215128178 or N97==1164799855 or N97==1214931305 or N97==1211117620 or N97==1215130471 or N97==1316252014 or N97==1211117643 or N97==1160786000 or N97==1211117651 or N97==1164666213 or N97==1433168227 or N97==1430468406 or N97==1430466872 or N97==1211117640 or N97==1332963428 or N97==1160786241 or N97==1429221456 or N97==1211117653 or N97==1160786520 or N97==1432580716 or N97==1211122767)then
return 5
endif
if((N97==1215128178)or(N97==1211117620)or(N97==1215130471)or(N97==1316252014)or(N97==1332898670)or(N97==1160786000)or(N97==1433168227)or(N97==1430466872)or(N97==1430466609)or(N97==1211117640)or(N97==1211117653)or(N97==1311787088)or(N97==1211122767))then
return 6
endif
if(N97==1164799855)or(N97==1433105516)or(N97==1214409837)or(N97==1164799603)or(N97==1432580716)or(N97==1211117643)or(N97==1211117633)or(N97==1332898670)or(N97==1211117616)or(N97==1315074670)or(N97==1160786000)or(N97==1164666213)or(N97==1430468406)or(N97==1162032439)or(N97==1429221432)or(N97==1429221430)or(N97==1211117640)or(N97==1160786243)or(N97==1429221445)or(N97==1311780946)or(N97==1211117620)or(N97==1211117636)or(N97==1332179560)or(N97==1429221441)then
return 7
endif
return 0
endfunction
function ND7 takes integer N97,integer NE7 returns boolean
if NE7==0 then
return true
elseif NE7==1 and(N97==1212363833 or N97==1212365106 or N97==1311781199 or N97==1315070563 or N97==1215657064 or N97==1332179560 or N97==1160785973 or N97==1311781174 or N97==1315074670 or N97==1164277353 or N97==1429221430 or N97==1165451634 or N97==1160785972 or N97==1162032181 or N97==1162032951 or N97==1315334514 or N97==1215722344 or N97==1160786242 or N97==1211117641 or N97==1211119409)then
return true
elseif NE7==2 and(N97==1215723364 or N97==1328558160 or N97==1211117617 or N97==1212363833 or N97==1212365106 or N97==1311781199 or N97==1315070563 or N97==1215657064 or N97==1332179560 or N97==1160785973 or N97==1433631084 or N97==1211117624 or N97==1315007329 or N97==1215063922 or N97==1164207469 or N97==1315074670 or N97==1211117636 or N97==1311781206 or N97==1211117649 or N97==1160786265 or N97==1211117652 or N97==1211119187 or N97==1164277353 or N97==1162032439 or N97==1430466865 or N97==1429221441 or N97==1429221432 or N97==1429221430 or N97==1211117654 or N97==1432646245 or N97==1430467634 or N97==1429221424 or N97==1430468913 or N97==1162032181 or N97==1162032951 or N97==1160785970 or N97==1429221443 or N97==1328558154 or N97==1432510828 or N97==1315334514 or N97==1429221451 or N97==1215722344 or N97==1160786242 or N97==1211117641 or N97==1211119409 or N97==1160786505 or N97==1160786510 or N97==1311788336 or N97==1160786507)then
return true
elseif NE7==3 and(N97==1211117617 or N97==1214344551 or N97==1432580716 or N97==1211117624 or N97==1315988077 or N97==1211117616 or N97==1215063922 or N97==1311781193 or N97==1211119187 or N97==1430466865 or N97==1429221441 or N97==1429221432 or N97==1313026096 or N97==1429221443 or N97==1332109682 or N97==1429221446 or N97==1332766568 or N97==1432642913 or N97==1211117650 or N97==1328558389 or N97==1328558406 or N97==1160786502 or N97==1160786738)then
return true
elseif NE7==4 and(N97==1164799855 or N97==1333027688 or N97==1311781185 or N97==1433105516 or N97==1214409837 or N97==1215130471 or N97==1164799603 or N97==1432580716 or N97==1211117633 or N97==1332898670 or N97==1214345830 or N97==1160786000 or N97==1311780930 or N97==1311786311 or N97==1430466872 or N97==1430468144 or N97==1430466609 or N97==1211117640 or N97==1332963428 or N97==1429221445 or N97==1160786241 or N97==1429221456 or N97==1160786243 or N97==1311781207 or N97==1311780946 or N97==1211117646 or N97==1211117653 or N97==1311787088 or N97==1328558390 or N97==1160786506 or N97==1160786504)then
return true
elseif NE7==5 and(N97==1215128178 or N97==1164799855 or N97==1214931305 or N97==1211117620 or N97==1215130471 or N97==1316252014 or N97==1211117643 or N97==1160786000 or N97==1211117651 or N97==1164666213 or N97==1433168227 or N97==1430468406 or N97==1430466872 or N97==1211117640 or N97==1332963428 or N97==1160786241 or N97==1429221456 or N97==1211117653 or N97==1160786520 or N97==1432580716 or N97==1211122767)then
return true
elseif NE7==6 and(((N97==1215128178)or(N97==1211117620)or(N97==1215130471)or(N97==1316252014)or(N97==1332898670)or(N97==1160786000)or(N97==1433168227)or(N97==1430466872)or(N97==1430466609)or(N97==1211117640)or(N97==1211117653)or(N97==1311787088)or(N97==1211122767)))then
return true
elseif NE7==7 and((N97==1164799855)or(N97==1433105516)or(N97==1214409837)or(N97==1164799603)or(N97==1432580716)or(N97==1211117643)or(N97==1211117633)or(N97==1332898670)or(N97==1211117616)or(N97==1315074670)or(N97==1160786000)or(N97==1164666213)or(N97==1430468406)or(N97==1162032439)or(N97==1429221432)or(N97==1429221430)or(N97==1211117640)or(N97==1160786243)or(N97==1429221445)or(N97==1311780946)or(N97==1211117620)or(N97==1211117636)or(N97==1332179560)or(N97==1429221441))then
return true
endif
return false
endfunction
function NF7 takes integer N97 returns integer
if(N97==1211117620 or N97==1214409837 or N97==1432580716 or N97==1211117643 or N97==1160786000 or N97==1164666213 or N97==1430468406 or N97==1211117640 or N97==1332766568 or N97==1311780946 or N97==1211122767)then
return 1
endif
if(N97==1214931305 or N97==1333027688 or N97==1215130471 or N97==1316252014 or N97==1164799603 or N97==1332898670 or N97==1433168227 or N97==1430466872 or N97==1429221445 or N97==1160786241 or N97==1211117650 or N97==1211117646 or N97==1211117653 or N97==1160786506 or N97==1160786507)then
return 2
endif
if(N97==1215723364 or N97==1164799855 or N97==1212365106 or N97==1311781185 or N97==1214344551 or N97==1215657064 or N97==1211117633 or N97==1315007329 or N97==1215063922 or N97==1164207469 or N97==1315074670 or N97==1211117649 or N97==1160786265 or N97==1211117652 or N97==1429221441 or N97==1165451634 or N97==1432646245 or N97==1430467634 or N97==1332963428 or N97==1429221446 or N97==1160786243)then
return 4
endif
return 3
endfunction
function NG7 takes integer NH7,boolean NI7 returns string
if NH7==0 then
return" (Mid)"
elseif NH7==1 then
return" (Left)"
elseif NH7==2 then
return" (Right)"
elseif NH7==3 and NI7 then
return" (Tree)"
elseif NH7==4 and NI7 then
return" (Throne)"
endif
return""
endfunction
function NJ7 takes boolean NK7 returns integer
local integer NM7=M17(NK7,0,24)
local integer NN7=0
local integer k=0
local integer j
local integer i=-1
loop
exitwhen NN7>3
if NN7==0 then
set j=3
else
set j=NN7-1
endif
if LS4[NM7+8+j]>0 then
if LS4[NM7+$C+j]==0 then
set i=j
exitwhen true
elseif LS4[NM7+8+j]>k or(LS4[NM7+8+j]==k and GetRandomInt(1,5-NN7)==1)then
set i=j
set k=LS4[NM7+8+j]
endif
endif
set NN7=NN7+1
endloop
return i
endfunction
function NO7 takes unit it returns real
local integer i1=GetUnitTypeId(it)
if(i1==1433631084)then
return 550.+I2R(75*GetUnitAbilityLevel(it,1093677909))
elseif((i1==1211117616)or(i1==1214345830)or(i1==1315988077)or(i1==1214344551)or(i1==1211117624)or(i1==1328558154)or(i1==1429221443)or(i1==1429221432)or(i1==1432646245)or(i1==1311780946)or(i1==1430468913)or(i1==1211117650)or(i1==1164207469)or(i1==1315070563)or(i1==1212363833)or(i1==1332179560)or(i1==1211117641)or(i1==1215657064)or(i1==1215722344)or(i1==1165451634)or(i1==1164277353)or(i1==1160786242)or(i1==1215130471))then
return 100.
elseif((i1==1211117652)or(i1==1212365106))then
return 125.
elseif((i1==1211119187)or(i1==1333027688)or(i1==1311781193)or(i1==1429221451)or(i1==1429221446)or(i1==1315007329)or(i1==1162032181)or(i1==1429221424)or(i1==1328558389)or(i1==1211119409)or(i1==1160786505)or(i1==1311788336)or(i1==1160786507)or(i1==1160786738))then
return 128.
elseif((i1==1430467634)or(i1==1432642913)or(i1==1215063922))then
return 150.
elseif((i1==1211117636)or(i1==1211117617)or(i1==1432580716)or(i1==1430466865)or(i1==1332109682)or(i1==1332766568)or(i1==1429221441)or(i1==1313026096)or(i1==1211117646))then
return 200.
elseif(i1==1429221430)then
return 250.
elseif((i1==1328558160)or(i1==1215128178))then
return 350.
elseif((i1==1211117649)or(i1==1160786000))then
return 400.
elseif(i1==1432510828)or(i1==1311788343)then
return 425.
elseif((i1==1162032439)or(i1==1429221456))then
return 450.
elseif(i1==1160785970)then
return 475.
elseif(i1==1211117651)then
return 480.
elseif((i1==1315334514)or(i1==1316252014)or(i1==1332898670)or(i1==1311781207))then
return 500.
elseif(i1==1311781199)or(i1==1164799855)or(i1==1430466609)or(i1==1311780930)then
return 550.
elseif(i1==1162032951)then
return 575.
elseif((i1==1311781206)or(i1==1315074670)or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or(i1==1160785972)or(i1==1211117633)or(i1==1311781185)or(i1==1211117620)or(i1==1164666213)or(i1==1160786241)or(i1==1430468406)or(i1==1430466872)or(i1==1211117653)or(i1==1429221445)or(i1==1211117640)or(i1==1160786243)or(i1==1311787088)or(i1==1160786520)or(i1==1211122767))then
return 600.
elseif(i1==1311788363)then
return 625.
else
return .0
endif
endfunction
function NP7 takes unit MQ7,integer O5 returns nothing
if(IsUnitAlly(MQ7,Y7[0]))then
if LS4[64+O5]==0 then
set h8[64+O5]=h7[2]
elseif LS4[64+O5]==1 then
set h8[64+O5]=h7[4]
elseif LS4[64+O5]==2 then
set h8[64+O5]=h7[3]
elseif LS4[64+O5]==3 then
set h8[64+O5]=h7[1]
endif
else
if LS4[64+O5]==0 then
set h8[64+O5]=h7[102]
elseif LS4[64+O5]==1 then
set h8[64+O5]=h7[103]
elseif LS4[64+O5]==2 then
set h8[64+O5]=h7[104]
elseif LS4[64+O5]==3 then
set h8[64+O5]=h7[101]
endif
endif
endfunction
function NQ7 takes group g returns boolean
return FirstOfGroup(g)==null
endfunction
function NR7 takes integer NS7,unit NT7,integer NU7,integer NV7 returns boolean
set U94[NS7]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(NT7),NU7,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(NT7),NV7,true)
return true
endfunction
function NW7 takes integer NS7 returns boolean
set GZ[NS7]=true
return true
endfunction
function NX7 takes real NY7 returns nothing
local real NZ7
local real st=TimerGetElapsed(V)
if st<=0 then
set V=CreateTimer()
call TimerStart(V,9000,false,null)
endif
if(NY7>0)then
loop
set NZ7=NY7-TimerGetElapsed(V)+st
exitwhen NZ7<=0
if(NZ7>bj_POLLED_WAIT_SKIP_THRESHOLD)then
call TriggerSleepAction(.1*NZ7)
else
call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
endif
endloop
endif
endfunction
function NA7 takes unit a,widget b,real NB7 returns boolean
local real NC7=(GetUnitFacing(a)-bj_RADTODEG*Atan2(GetWidgetY(b)-GetUnitY(a),GetWidgetX(b)-GetUnitX(a)))
if NC7>$B4 then
set NC7=360-NC7
endif
if NC7<0 then
set NC7=-NC7
endif
return NC7<=NB7
endfunction
function N37 takes widget p5,widget m5 returns real
local real t5
local real w5
local real Y5
local real Z5
if p5!=null and m5!=null then
set t5=GetWidgetX(p5)
set w5=GetWidgetY(p5)
set Y5=GetWidgetX(m5)
set Z5=GetWidgetY(m5)
return SquareRoot((t5-Y5)*(t5-Y5)+(w5-Z5)*(w5-Z5))
endif
return 999999.
endfunction
function N67 takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function NL7 takes integer O5 returns integer
local integer kc=3
set LP4="tmv"
if((hj[256+O5]==18)or(hj[O5]==$A)or(hj[256+O5]==118)or(hj[O5]==110))then
set kc=0
elseif((hj[256+O5]==40)or(hj[O5]==30)or(hj[256+O5]==$8C)or(hj[O5]==$82))then
set kc=1
elseif((hj[256+O5]==60)or(hj[O5]==50)or(hj[256+O5]==$A0)or(hj[O5]==$96))then
set kc=2
endif
return kc
endfunction
function N17 takes unit it returns integer
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
set LP4="aiGetHeroLane_tMv"
if((UP==0)or(UP==100)or(UP==1)or(UP==101))then
set UP=GetUnitUserData(h9[O5])
endif
return NL7(UP)
endfunction
function N07 takes integer O5 returns integer
set eY[80+O5]=5
if IF4[O5]then
elseif(N37(G7[O5],h7[0])<4000.)then
set eY[80+O5]=3
elseif(N37(G7[O5],h7[100])<4000.)then
set eY[80+O5]=4
elseif IsUnitInRange(G7[O5],h8[O5],2000.)then
set eY[80+O5]=NL7(GetUnitUserData(h8[O5]))
if eY[80+O5]==3 then
set eY[80+O5]=5
endif
elseif IsUnitInRange(G7[O5],h8[80+O5],2000.)then
set eY[80+O5]=NL7(GetUnitUserData(h8[80+O5]))
if eY[80+O5]==3 then
set eY[80+O5]=5
endif
else
set eY[80+O5]=5
set GZ[400+O5]=true
endif
return eY[80+O5]
endfunction
function N57 takes integer N27 returns integer
local integer N_7=0
set LP4="DummyToHero"
loop
exitwhen N_7>K04
if MH4[N_7]==N27 then
return KC4[N_7]
endif
set N_7=N_7+1
endloop
return-1
endfunction
function O47 takes unit O77 returns integer
local integer O87=GetHeroLevel(O77)
set LP4="ConvertUnitToXP"
if O87==1 then
return 100
elseif O87==2 then
return 120
elseif O87==3 then
return $A0
elseif O87==4 then
return $DC
else
return-$C8+100*O87
endif
return 0
endfunction
function O97 takes nothing returns real
return TimerGetElapsed(V)
endfunction
function OD7 takes unit OE7 returns nothing
call PauseUnit(OE7,true)
call IssueImmediateOrderById(OE7,$D0004)
call PauseUnit(OE7,false)
endfunction
function OF7 takes location f4,real F4,real l4 returns location
return Location(GetLocationX(f4)+F4*Cos(l4*bj_DEGTORAD),GetLocationY(f4)+F4*Sin(l4*bj_DEGTORAD))
endfunction
function L4 takes nothing returns boolean
local real dx=GetDestructableX(GetFilterDestructable())-Wz
local real dy=GetDestructableY(GetFilterDestructable())-Yz
set LP4="L4"
return(dx*dx+dy*dy<=bj_enumDestructableRadius)
endfunction
function M4 takes player p4 returns force
set V2=CreateForce()
call ForceEnumEnemies(V2,p4,bH)
return V2
endfunction
function OG7 takes unit MQ7 returns boolean
local integer id=GetUnitTypeId(MQ7)
return id==1848651849 or id==1848652338 or id==1848652337 or id==1848658777 or id==1848658778 or id==1848659013 or id==1848652339 or id==1848652340 or id==1848652341 or id==1848658992 or id==1848658993 or id==1848659252 or id==1848651853 or id==1848658006 or id==1848659027
endfunction
function OH7 takes unit MQ7 returns boolean
local integer id=GetUnitTypeId(MQ7)
return id==1697657160 or id==1697657178 or id==1697657426 or id==1697657428 or id==1697657427 or id==1697657648
endfunction
function OI7 takes unit MQ7 returns boolean
return OG7(MQ7)or OH7(MQ7)
endfunction

//===========================================================================
// function: RemoveItem
//===========================================================================
function RemoveItemAAAAA takes item Z4 returns nothing
    //不做任何事情，方便找到下面的函数
endfunction

function OJ7 takes item Z4 returns nothing
    local integer tItemID = GetItemTypeId(Z4)
    local integer array itemIDList
    local integer cItemID
    local integer tIndex = 1
    local integer tEndIndex = 9
    local boolean isExist = false

	// 自定义物品
	loop
	    exitwhen tIndex > tEndIndex
	    // I0PG,I0PH,I0PI,I0PJ,I0PK,I0PL,I0PM,I0PN,I0PO
	    set itemIDList[tIndex] = 'I0PF' + tIndex
	    set tIndex = tIndex + 1
	endloop
	
	set tIndex = 1
    loop
        set cItemID = itemIDList[tIndex]
        if ( cItemID == tItemID ) then
            set isExist = true
        endif

        //call BJDebugMsg( I2S(tIndex) + "-->" + tString )
        exitwhen ( tIndex >= tEndIndex or isExist )

        set tIndex = tIndex + 1
    endloop

	call DisableTrigger(H84)
    if isExist then
	    //自定义物品
	    //call BJDebugMsg("|cff0042ff自定义物品|r"+GetObjectName(tItemID))
    else
    	//非自定义物品
        call RemoveItem(Z4)
    endif

    //call BJDebugMsg("|cff0042ff处理物品|r"+GetObjectName(tItemID))
    //call DisableTrigger(H84)
    call EnableTrigger(H84)
endfunction

function OK7 takes item x5 returns integer
local integer o5
local integer i=1
if x5==null then
return-2
endif
set o5=GetItemTypeId(x5)
loop
exitwhen i>DV
if RU[i]==o5 or SU[i]==o5 or AU[i]==o5 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function OM7 takes item ON7 returns integer
local integer OO7
local integer i=1
if ON7==null then
return-2
endif
set OO7=GetItemTypeId(ON7)
loop
exitwhen i>DV
if RU[i]==OO7 or SU[i]==OO7 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function OP7 takes item ON7 returns integer
local integer OO7
local integer i=1
if ON7==null then
return-2
endif
set OO7=GetItemTypeId(ON7)
loop
exitwhen i>DV
if AU[i]==OO7 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function V5 takes nothing returns nothing
set HK4[1]=1093677633
set HM4[1]=1093744463
set HN4[1]=1094934883
set HO4[1]=1093683534
set HK4[2]=1093677616
set HM4[2]=1093683779
set HN4[2]=1093684789
set HO4[2]=1093810503
set HK4[3]=1093682263
set HM4[3]=1093682264
set HN4[3]=1093677378
set HO4[3]=1093682265
set HK4[4]=1093682766
set HM4[4]=1093682998
set HN4[4]=1093684056
set HO4[4]=1093683000
set HK4[5]=1093748025
set HM4[5]=1093678147
set HN4[5]=1095262562
set HO4[5]=1093677906
set HK4[6]=1093744944
set HM4[6]=1093677387
set HN4[6]=1093814611
set HO4[6]=1093752648
set HK4[7]=1093678643
set HM4[7]=1093681729
set HN4[7]=1093677125
set HO4[7]=1093678933
set HK4[8]=1093686091
set HM4[8]=1093682252
set HN4[8]=1093682250
set HO4[8]=1093682248
set HK4[9]=1093685831
set HM4[9]=1093684025
set HN4[9]=1093682266
set HO4[9]=1093677130
set HK4[$A]=1093681461
set HM4[$A]=1093748039
set HN4[$A]=1093681464
set HO4[$A]=1093681479
set HK4[$B]=1093677382
set HM4[$B]=1093677623
set HN4[$B]=1093744728
set HO4[$B]=1093677392
set HK4[$C]=1093678407
set HM4[$C]=1093678135
set HN4[$C]=1093677131
set HO4[$C]=1093684529
set HK4[$D]=1093743692
set HM4[$D]=1093684314
set HN4[$D]=1093815892
set HO4[$D]=1093684275
set HK4[$E]=1093677402
set HM4[$E]=1093748535
set HN4[$E]=1093677397
set HO4[$E]=1093678938
set HK4[$F]=1093747009
set HM4[$F]=1093747000
set HN4[$F]=1093747524
set HO4[$F]=1093746993
set HK4[16]=1093679157
set HM4[16]=1093742680
set HN4[16]=1093742898
set HO4[16]=1093742932
set HK4[17]=1093677913
set HM4[17]=1093750841
set HN4[17]=1095657827
set HO4[17]=1093684291
set HK4[18]=1093679172
set HM4[18]=1093677126
set HN4[18]=1093679177
set HO4[18]=1093679160
set HK4[19]=1093678137
set HM4[19]=1093678405
set HN4[19]=1093681745
set HO4[19]=1093678645
set HK4[20]=1093808453
set HM4[20]=1093677391
set HN4[20]=1095067246
set HO4[20]=1093752632
set HK4[21]=1093742660
set HM4[21]=1093682231
set HN4[21]=1093682242
set HO4[21]=1093687627
set HK4[22]=1093684300
set HM4[22]=1093681754
set HN4[22]=1093744977
set HO4[22]=1093682009
set HK4[23]=1093678410
set HM4[23]=1093678664
set HN4[23]=1093678658
set HO4[23]=1093681483
set HK4[24]=1093684045
set HM4[24]=1093684310
set HN4[24]=1093810260
set HO4[24]=1093684308
set HK4[25]=1093678130
set HM4[25]=1093678129
set HN4[25]=1093678642
set HO4[25]=1093678388
set HK4[26]=1093678644
set HM4[26]=1093677907
set HN4[26]=1093677909
set HO4[26]=1093678160
set HK4[27]=1093681733
set HM4[27]=1093681731
set HN4[27]=1093685040
set HO4[27]=1093748042
set HK4[28]=1093677360
set HM4[28]=1093685848
set HN4[28]=1093677136
set HO4[28]=1093677128
set HK4[29]=1093682775
set HM4[29]=1093683024
set HN4[29]=1093684531
set HO4[29]=1093682774
set HK4[30]=1093678669
set HM4[30]=1097032808
set HN4[30]=1093684568
set HO4[30]=1093684561
set HK4[31]=1093677139
set HM4[31]=1093816142
set HN4[31]=1093677142
set HO4[31]=1093816118
set HK4[32]=1093677108
set HM4[32]=1093749073
set HN4[32]=1093678913
set HO4[32]=1093681716
set HK4[33]=1093677894
set HM4[33]=1093681490
set HN4[33]=1093681996
set HO4[33]=1093677895
set HK4[34]=1093677618
set HM4[34]=1095066220
set HN4[34]=1093684057
set HO4[34]=1093682483
set HK4[35]=1093677622
set HM4[35]=1093685570
set HN4[35]=1093677625
set HO4[35]=1093686851
set HK4[36]=1093679182
set HM4[36]=1093679190
set HN4[36]=1093678657
set HO4[36]=1093682514
set HK4[37]=1093685041
set HM4[37]=1093685071
set HN4[37]=1093681732
set HO4[37]=1093685042
set HK4[38]=1093685047
set HM4[38]=1093685046
set HN4[38]=1093685048
set HO4[38]=1093685045
set HK4[39]=1093683532
set HM4[39]=1093750345
set HN4[39]=1093685043
set HO4[39]=1095656306
set HK4[40]=1093684054
set HM4[40]=1093684280
set HN4[40]=1093684302
set HO4[40]=1093684053
set HK4[41]=1093743696
set HM4[41]=1093743698
set HN4[41]=1093685591
set HO4[41]=1093743695
set HK4[42]=1093685584
set HM4[42]=1093685582
set HN4[42]=1093685585
set HO4[42]=1093685586
set HK4[43]=1093748033
set HM4[43]=1093685846
set HN4[43]=1093685839
set HO4[43]=1093685840
set HK4[44]=1093686073
set HM4[44]=1093686083
set HN4[44]=1093686082
set HO4[44]=1093686072
set HK4[45]=1093687860
set HM4[45]=1093687861
set HN4[45]=1093687862
set HO4[45]=1093687864
set HK4[46]=1093743414
set HM4[46]=1093743444
set HN4[46]=1093742926
set HO4[46]=1093742923
set HK4[47]=1093743178
set HM4[47]=1093743179
set HN4[47]=1093743689
set HO4[47]=1093743184
set HK4[48]=1093751631
set HM4[48]=1093751633
set HN4[48]=1093751895
set HO4[48]=1093751861
set HK4[49]=1093751894
set HM4[49]=1093751639
set HN4[49]=1093751637
set HO4[49]=1093752118
set HK4[50]=1093751873
set HM4[50]=1093751864
set HN4[50]=1093810257
set HO4[50]=1093751874
set HK4[51]=1093678918
set HM4[51]=1093679186
set HN4[51]=1093678387
set HO4[51]=1093678420
set HK4[52]=1093678904
set HM4[52]=1093678925
set HN4[52]=1093677635
set HO4[52]=1093678158
set HK4[53]=1093687349
set HM4[53]=1093684558
set HN4[53]=1093677646
set HO4[53]=1093679413
set HK4[54]=1093744435
set HM4[54]=1093684569
set HN4[54]=1093684563
set HO4[54]=1093677363
set HK4[55]=1093677651
set HM4[55]=1093677879
set HN4[55]=1093751364
set HO4[55]=1093810508
set HK4[56]=1093679192
set HM4[56]=1093750337
set HN4[56]=1093686872
set HO4[56]=1093678923
set HK4[57]=1093678389
set HM4[57]=1093685847
set HN4[57]=1093677902
set HO4[57]=1093677903
set HK4[58]=1093677892
set HM4[58]=1093687878
set HN4[58]=1093677893
set HO4[58]=1093679411
set HK4[59]=1093681736
set HM4[59]=1093681735
set HN4[59]=1093681739
set HO4[59]=1093687121
set HK4[60]=1093687629
set HM4[60]=1093685324
set HN4[60]=1093677904
set HO4[60]=1093677905
set HK4[61]=1093747504
set HM4[61]=1093682994
set HN4[61]=1093684560
set HO4[61]=1093747028
set HK4[62]=1093677640
set HM4[62]=1093679173
set HN4[62]=1093679158
set HO4[62]=1093677899
set HK4[63]=1095267426
set HM4[63]=1096114550
set HN4[63]=1095721842
set HO4[63]=1093677401
set HK4[64]=1093742674
set HM4[64]=1093750608
set HN4[64]=1093679412
set HO4[64]=1093684565
set HK4[65]=1093687351
set HM4[65]=1093748789
set HN4[65]=1093815119
set HO4[65]=1093679445
set HK4[66]=1093678403
set HM4[66]=1093810507
set HN4[66]=1093683786
set HO4[66]=1093677876
set HK4[67]=1093685559
set HM4[67]=1093684549
set HN4[67]=1093678145
set HO4[67]=1093810258
set HK4[68]=1093677872
set HM4[68]=1095263841
set HN4[68]=1093677621
set HO4[68]=1093678161
set HK4[69]=1093684299
set HM4[69]=1093682010
set HN4[69]=1093679153
set HO4[69]=1093683761
set HK4[70]=1093679446
set HM4[70]=1093746995
set HN4[70]=1093684557
set HO4[70]=1093679152
set HK4[71]=1093748023
set HM4[71]=1093747792
set HN4[71]=1093748022
set HO4[71]=1093747023
set HK4[72]=1093686322
set HM4[72]=1093686099
set HN4[72]=1093744948
set HO4[72]=1093686103
set HK4[73]=1093684564
set HM4[73]=1093681989
set HN4[73]=1093679428
set HO4[73]=1093681987
set HK4[74]=1093678134
set HM4[74]=1093678149
set HN4[74]=1093678132
set HO4[74]=1093810505
set HK4[75]=1093816137
set HM4[75]=1093683019
set HN4[75]=1093678169
set HO4[75]=1093677649
set HK4[76]=1093678422
set HM4[76]=1093677390
set HN4[76]=1093678640
set HO4[76]=1093678647
set HK4[77]=1093678665
set HM4[77]=1093678667
set HN4[77]=1093678660
set HO4[77]=1093682764
set HK4[78]=1093750840
set HM4[78]=1093682515
set HN4[78]=1093682997
set HO4[78]=1093682996
set HK4[79]=1093751127
set HM4[79]=1093681985
set HN4[79]=1093681991
set HO4[79]=1093682004
set HK4[80]=1093682521
set HM4[80]=1093681746
set HN4[80]=1093682773
set HO4[80]=1093810506
set HK4[81]=1093678671
set HM4[81]=1093683248
set HN4[81]=1093682753
set HO4[81]=1093678674
set HK4[82]=1093683510
set HM4[82]=1093686065
set HN4[82]=1093681974
set HO4[82]=1093682482
set HK4[83]=1093682499
set HM4[83]=1093684293
set HN4[83]=1093683512
set HO4[83]=1093684296
set HK4[84]=1093683507
set HM4[84]=1093684550
set HN4[84]=1093684551
set HO4[84]=1093684819
set HK4[85]=1093683287
set HM4[85]=1093682776
set HN4[85]=1093684801
set HO4[85]=1093683257
set HK4[86]=1093684813
set HM4[86]=1093684805
set HN4[86]=1093684815
set HO4[86]=1093684820
set HK4[87]=1093685065
set HM4[87]=1093685066
set HN4[87]=1093683526
set HO4[87]=1093685067
set HK4[88]=1093683765
set HM4[88]=1093681491
set HN4[88]=1093678672
set HO4[88]=1395667000
set HK4[89]=1093684802
set HM4[89]=1093684792
set HN4[89]=1093684791
set HO4[89]=1093684567
set HK4[90]=1093684817
set HM4[90]=1093742668
set HN4[90]=1093685074
set HO4[90]=1093742673
set HK4[91]=1093677385
set HM4[91]=1093685825
set HN4[91]=1093810232
set HO4[91]=1093685808
set HK4[92]=1093743955
set HM4[92]=1093685813
set HN4[92]=1093743958
set HO4[92]=1093743946
set HK4[93]=1093685573
set HM4[93]=1093685575
set HN4[93]=1093685815
set HO4[93]=1093685579
set HK4[94]=1093808471
set HM4[94]=1093808472
set HN4[94]=1093808470
set HO4[94]=1093808473
set HK4[95]=1093683511
set HM4[95]=1093744688
set HN4[95]=1093681713
set HO4[95]=1093747288
set HK4[96]=1093748044
set HM4[96]=1093744982
set HN4[96]=1093744986
set HO4[96]=1093744975
set HK4[97]=1093750087
set HM4[97]=1093748819
set HN4[97]=1093748817
set HO4[97]=1093750089
set HK4[98]=1093749069
set HM4[98]=1093749303
set HN4[98]=1093748818
set HO4[98]=1093749070
set HK4[99]=1093678156
set HM4[99]=1093683252
set HN4[99]=1093684566
set HO4[99]=1093678929
set HK4[100]=1093678679
set HM4[100]=1093677877
set HN4[100]=1093678678
set HO4[100]=1093808454
set HK4[101]=1093751608
set HM4[101]=1093751618
set HN4[101]=1093751604
set HO4[101]=1093751617
set HP4[1]=1093747031
set HP4[2]=1093810504
set HP4[5]=1093681494
set HP4[8]=1093750594
set HP4[$B]=1093679450
set HP4[$C]=1093747032
set HP4[20]=1093752633
set HP4[22]=1093752392
set HP4[23]=1093748313
set HP4[24]=1093747539
set HP4[25]=1093677141
set HP4[28]=1093681457
set HP4[30]=1093747254
set HP4[38]=1093747249
set HP4[42]=1093747251
set HP4[44]=1093751120
set HP4[45]=1093747542
set HP4[47]=1093747766
set HP4[50]=1093808455
set HP4[51]=1093679176
set HP4[53]=1093679447
set HP4[54]=1093681462
set HP4[62]=1093747248
set HP4[64]=1093681458
set HP4[67]=1093810259
set HP4[69]=1093747767
set HP4[70]=1093752154
set HP4[71]=1093752150
set HP4[73]=1093677658
set HP4[75]=1093747769
set HP4[76]=1093679184
set HP4[77]=1093747544
set HP4[78]=1093747768
set HP4[81]=1093747252
set HP4[82]=1093750098
set HP4[84]=1093747777
set HP4[86]=1093684824
set HP4[87]=1093752407
set HP4[88]=1395667029
set HP4[90]=1093747778
set HP4[94]=1093748565
set HV4[1]="thunderbolt"
set HW4[1]="volcano"
set HX4[1]="passive"
set HY4[1]="forkedlightning"
set HV4[2]="chainlightning"
set HW4[2]="thunderbolt"
set HX4[2]="passive"
set HY4[2]="thunderclap"
set HV4[3]="passive"
set HW4[3]="slow"
set HX4[3]="locustswarm"
set HY4[3]="poisonarrows"
set HV4[4]="carrionswarm"
set HW4[4]="acidbomb"
set HX4[4]="replenishmana"
set HY4[4]="itemillusion"
set HV4[5]="blizzard"
set HW4[5]="entanglingroots"
set HX4[5]="passive"
set HY4[5]="channel"
set HV4[6]="acidbomb"
set HW4[6]="passive"
set HX4[6]="volcano"
set HY4[6]="chemicalrage"
set HV4[7]="mirrorimage"
set HW4[7]="ensnare"
set HX4[7]="passive"
set HY4[7]="channel"
set HV4[8]="channel"
set HW4[8]="roar"
set HX4[8]="passive"
set HY4[8]="fanofknives"
set HV4[9]="blizzard"
set HW4[9]="channel"
set HX4[9]="passive"
set HY4[9]="passive"
set HV4[$A]="summongrizzly"
set HW4[$A]="fanofknives"
set HX4[$A]="passive"
set HY4[$A]="bearform"
set HV4[$B]="shockwave"
set HW4[$B]="inferno"
set HX4[$B]="passive"
set HY4[$B]="chainlightning"
set HV4[$C]="whirlwind"
set HW4[$C]="healingward"
set HX4[$C]="passive"
set HY4[$C]="thunderbolt"
set HV4[$D]="blizzard"
set HW4[$D]="poisonarrows"
set HX4[$D]="passive"
set HY4[$D]="channel"
set HV4[$E]="invisibility"
set HW4[$E]="thunderbolt"
set HX4[$E]="innerfire"
set HY4[$E]="channel"
set HV4[$F]="charm"
set HW4[$F]="volcano"
set HX4[$F]="passive"
set HY4[$F]="channel"
set HV4[16]="channel"
set HW4[16]="acidbomb"
set HX4[16]="acolyteharvest"
set HY4[16]="metamorphosis"
set HV4[17]="thunderclap"
set HW4[17]="channel"
set HX4[17]="passive"
set HY4[17]="berserk"
set HV4[18]="thunderbolt"
set HW4[18]="acidbomb"
set HX4[18]="bloodlust"
set HY4[18]="passive"
set HV4[19]="drunkenhaze"
set HW4[19]="fanofknives"
set HX4[19]="curse"
set HY4[19]="channel"
set HV4[20]="thunderbolt"
set HW4[20]="blink"
set HX4[20]="forceofnature"
set HY4[20]="chainlightning"
set HV4[21]="acidbomb"
set HW4[21]="windwalk"
set HX4[21]="passive"
set HY4[21]="passive"
set HV4[22]="blizzard"
set HW4[22]="channel"
set HX4[22]="passive"
set HY4[22]="passive"
set HV4[23]="landmine"
set HW4[23]="stasistrap"
set HX4[23]="selfdestruct"
set HY4[23]="summonward"
set HV4[24]="drunkenhaze"
set HW4[24]="thunderbolt"
set HX4[24]="charm"
set HY4[24]="channel"
set HV4[25]="firebolt"
set HW4[25]="moonglaive"
set HX4[25]="passive"
set HY4[25]="channel"
set HV4[26]="blizzard"
set HW4[26]="passive"
set HX4[26]="moonglaive"
set HY4[26]="thunderbolt"
set HV4[27]="bearform"
set HW4[27]="curse"
set HX4[27]="passive"
set HY4[27]="fanofknives"
set HV4[28]="forkedlightning"
set HW4[28]="hex"
set HX4[28]="magicleash"
set HY4[28]="summonward"
set HV4[29]="channel"
set HW4[29]="fanofknives"
set HX4[29]="passive"
set HY4[29]="passive"
set HV4[30]="thunderclap"
set HW4[30]="drunkenhaze"
set HX4[30]="passive"
set HY4[30]="elementalfury"
set HV4[31]="stomp"
set HW4[31]="firebolt"
set HX4[31]="passive"
set HY4[31]="passive"
set HV4[32]="thunderbolt"
set HW4[32]="passive"
set HX4[32]="windwalk"
set HY4[32]="faeriefire"
set HV4[33]="breathoffire"
set HW4[33]="thunderbolt"
set HX4[33]="passive"
set HY4[33]="metamorphosis"
set HV4[34]="passive"
set HW4[34]="blink"
set HX4[34]="passive"
set HY4[34]="thunderbolt"
set HV4[35]="coldarrows"
set HW4[35]="silence"
set HX4[35]="passive"
set HY4[35]="passive"
set HV4[36]="frostarmor"
set HW4[36]="antimagicshell"
set HX4[36]="passive"
set HY4[36]="battleroar"
set HV4[37]="carrionswarm"
set HW4[37]="summonquillbeast"
set HX4[37]="passive"
set HY4[37]="thunderbolt"
set HV4[38]="carrionswarm"
set HW4[38]="breathoffire"
set HX4[38]="passive"
set HY4[38]="shockwave"
set HV4[39]="blizzard"
set HW4[39]="fanofknives"
set HX4[39]="passive"
set HY4[39]="chemicalrage"
set HV4[40]="channel"
set HW4[40]="acidbomb"
set HX4[40]="windwalk"
set HY4[40]="corporealform"
set HV4[41]="fanofknives"
set HW4[41]="chainlightning"
set HX4[41]="passive"
set HY4[41]="carrionswarm"
set HV4[42]="thunderbolt"
set HW4[42]="poisonarrows"
set HX4[42]="passive"
set HY4[42]="firebolt"
set HV4[43]="fanofknives"
set HW4[43]="windwalk"
set HX4[43]="passive"
set HY4[43]="curse"
set HV4[44]="acidbomb"
set HW4[44]="channel"
set HX4[44]="phaseshift"
set HY4[44]="blizzard"
set HV4[45]="channel"
set HW4[45]="charm"
set HX4[45]="blizzard"
set HY4[45]="clusterrockets"
set HV4[46]="blizzard"
set HW4[46]="passive"
set HX4[46]="charm"
set HY4[46]="acidbomb"
set HV4[47]="chainlightning"
set HW4[47]="acidbomb"
set HX4[47]="fanofknives"
set HY4[47]="charm"
set HV4[48]=""
set HW4[48]=""
set HX4[48]=""
set HY4[48]=""
set HV4[49]=""
set HW4[49]=""
set HX4[49]=""
set HY4[49]=""
set HV4[50]=""
set HW4[50]=""
set HX4[50]=""
set HY4[50]=""
set HV4[51]="frostnova"
set HW4[51]="frostarmor"
set HX4[51]="innerfire"
set HY4[51]="sleep"
set HV4[52]="carrionswarm"
set HW4[52]="silence"
set HX4[52]="passive"
set HY4[52]="locustswarm"
set HV4[53]="impale"
set HW4[53]="hex"
set HX4[53]="drain"
set HY4[53]="chainlightning"
set HV4[54]="volcano"
set HW4[54]="passive"
set HX4[54]="summonward"
set HY4[54]="summongrizzly"
set HV4[55]="shockwave"
set HW4[55]="innerfire"
set HX4[55]="carrionswarm"
set HY4[55]="stomp"
set HV4[56]="cripple"
set HW4[56]="creepheal"
set HX4[56]="passive"
set HY4[56]="fanofknives"
set HV4[57]="firebolt"
set HW4[57]="channel"
set HX4[57]="passive"
set HY4[57]="mirrorimage"
set HV4[58]="spiritwolf"
set HW4[58]="channel"
set HX4[58]="passive"
set HY4[58]="metamorphosis"
set HV4[59]="parasite"
set HW4[59]="inferno"
set HX4[59]="passive"
set HY4[59]="roar"
set HV4[60]="acidbomb"
set HW4[60]="channel"
set HX4[60]="passive"
set HY4[60]="passive"
set HV4[61]="bearform"
set HW4[61]="chainlightning"
set HX4[61]="manashield"
set HY4[61]="charm"
set HV4[62]="thunderbolt"
set HW4[62]="drunkenhaze"
set HX4[62]="passive"
set HY4[62]="itemchangetime"
set HV4[63]="thunderbolt"
set HW4[63]="passive"
set HX4[63]="passive"
set HY4[63]="reincarnation"
set HV4[64]="channel"
set HW4[64]="fanofknives"
set HX4[64]="firebolt"
set HY4[64]="doom"
set HV4[65]="impale"
set HW4[65]="creepheal"
set HX4[65]="carrionscarabsoff"
set HY4[65]="windwalk"
set HV4[66]="berserk"
set HW4[66]="stomp"
set HX4[66]="passive"
set HY4[66]="faeriefire"
set HV4[67]="shadowstrike"
set HW4[67]="blink"
set HX4[67]="fanofknives"
set HY4[67]="carrionswarm"
set HV4[68]="berserk"
set HW4[68]="flamingarrows"
set HX4[68]="windwalk"
set HY4[68]="innerfire"
set HV4[69]="carrionswarm"
set HW4[69]="passive"
set HX4[69]="passive"
set HY4[69]="clusterrockets"
set HV4[70]="poisonarrows"
set HW4[70]="passive"
set HX4[70]="passive"
set HY4[70]="shadowstrike"
set HV4[71]="fanofknives"
set HW4[71]="acidbomb"
set HX4[71]="passive"
set HY4[71]="darkportal"
set HV4[72]="itemareaheal"
set HW4[72]="passive"
set HX4[72]="chainlightning"
set HY4[72]="channel"
set HV4[73]="blizzard"
set HW4[73]="banish"
set HX4[73]="summongrizzly"
set HY4[73]="drain"
set HV4[74]="acidbomb"
set HW4[74]="passive"
set HX4[74]="passive"
set HY4[74]="stomp"
set HV4[75]="innerfire"
set HW4[75]="chainlightning"
set HX4[75]="sleep"
set HY4[75]="magicleash"
set HV4[76]="fanofknives"
set HW4[76]="passive"
set HX4[76]="passive"
set HY4[76]="thunderbolt"
set HV4[77]="channel"
set HW4[77]="immolation"
set HX4[77]="passive"
set HY4[77]="magicleash"
set HV4[78]="channel"
set HW4[78]="passive"
set HX4[78]="passive"
set HY4[78]="channel"
set HV4[79]="acidbomb"
set HW4[79]="windwalk"
set HX4[79]="passive"
set HY4[79]="channel"
set HV4[80]="roar"
set HW4[80]="passive"
set HX4[80]="passive"
set HY4[80]="stomp"
set HV4[81]="channel"
set HW4[81]="voodoo"
set HX4[81]="incinerate"
set HY4[81]="charm"
set HV4[82]="channel"
set HW4[82]="creepheal"
set HX4[82]="passive"
set HY4[82]="chainlightning"
set HV4[83]="soulburn"
set HW4[83]="passive"
set HX4[83]="passive"
set HY4[83]="firebolt"
set HV4[84]="acidbomb"
set HW4[84]="chainlightning"
set HX4[84]="passive"
set HY4[84]="windwalk"
set HV4[85]="acidbomb"
set HW4[85]="passive"
set HX4[85]="passive"
set HY4[85]="ancestralspirit"
set HV4[86]="chainlightning"
set HW4[86]="immolation"
set HX4[86]="blizzard"
set HY4[86]="tornado"
set HV4[87]="poisonarrows"
set HW4[87]="chainlightning"
set HX4[87]="passive"
set HY4[87]="blizzard"
set HV4[88]="thunderbolt"
set HW4[88]="creepheal"
set HX4[88]="blizzard"
set HY4[88]="inferno"
set HV4[89]="blizzard"
set HW4[89]="carrionscarabsoff"
set HX4[89]="passive"
set HY4[89]="passive"
set HV4[90]="thunderbolt"
set HW4[90]="devourmagic"
set HX4[90]="darkportal"
set HY4[90]="blizzard"
set HV4[91]="rainoffire"
set HW4[91]="flamestrike"
set HX4[91]="fanofknives"
set HY4[91]="channel"
set HV4[92]="blizzard"
set HW4[92]="volcano"
set HX4[92]="acidbomb"
set HY4[92]="metamorphosis"
set HV4[93]="blizzard"
set HW4[93]="thunderbolt"
set HX4[93]="bloodlust"
set HY4[93]="curse"
set HV4[94]="roar"
set HW4[94]="fanofknives"
set HX4[94]="battleroar"
set HY4[94]="howlofterror"
set HV4[95]="acidbomb"
set HW4[95]="thunderbolt"
set HX4[95]="channel"
set HY4[95]="cannibalize"
set HV4[96]="blizzard"
set HW4[96]="thunderbolt"
set HX4[96]="metamorphosis"
set HY4[96]="chainlightning"
set HV4[97]="channel"
set HW4[97]="blizzard"
set HX4[97]="berserk"
set HY4[97]="acidbomb"
set HV4[98]="fanofknives"
set HW4[98]="channel"
set HX4[98]="passive"
set HY4[98]="windwalk"
set HV4[99]="drain"
set HW4[99]="channel"
set HX4[99]="metamorphosis"
set HY4[99]="cripple"
set HV4[100]="inferno"
set HW4[100]="summongrizzly"
set HX4[100]="chainlightning"
set HY4[100]="immolation"
set HV4[101]=""
set HW4[101]=""
set HX4[101]=""
set HY4[101]=""
set HK4[500]=1094004784
set HM4[500]=1094004785
set HN4[500]=1094004786
set HO4[500]=1094004787
set HV4[500]="humanbuild"
set HW4[500]="nightelfbuild"
set HX4[500]="orcbuild"
set HY4[500]="undeadbuild"
set HQ4[1]=1094070320
set HR4[1]=1094070321
set HS4[1]=1094070322
set HT4[1]=1094070323
set HQ4[2]=1094070324
set HR4[2]=1094070325
set HS4[2]=1094070326
set HT4[2]=1094070327
set HQ4[3]=1094070328
set HR4[3]=1094070329
set HS4[3]=1094070337
set HT4[3]=1094070338
set HQ4[4]=1094070339
set HR4[4]=1094070340
set HT4[4]=1094070342
set HQ4[5]=1094070343
set HR4[5]=1094070344
set HS4[5]=1094070345
set HT4[5]=1094070346
set HQ4[6]=1094070347
set HS4[6]=1094070349
set HT4[6]=1094070350
set HQ4[7]=1094070351
set HR4[7]=1094070352
set HS4[7]=1094070353
set HT4[7]=1094070354
set HQ4[8]=1094070355
set HR4[8]=1094070356
set HS4[8]=1094070357
set HT4[8]=1094070358
set HQ4[9]=1094070359
set HR4[9]=1094070360
set HS4[9]=1094070361
set HT4[9]=1094070362
set HQ4[$A]=1094070576
set HR4[$A]=1094070577
set HQ4[$B]=1094070580
set HR4[$B]=1094070581
set HS4[$B]=1094070582
set HT4[$B]=1094070583
set HQ4[$C]=1094070584
set HR4[$C]=1094070585
set HS4[$C]=1094070593
set HT4[$C]=1094070594
set HQ4[$D]=1094070595
set HR4[$D]=1094070596
set HS4[$D]=1094070597
set HT4[$D]=1094070598
set HQ4[$E]=1094070599
set HR4[$E]=1094070600
set HS4[$E]=1094070601
set HT4[$E]=1094070602
set HQ4[$F]=1094070603
set HS4[$F]=1094070605
set HT4[$F]=1094070606
set HQ4[16]=1094070607
set HR4[16]=1094070608
set HS4[16]=1094070609
set HQ4[17]=1094070611
set HR4[17]=1094070612
set HS4[17]=1094070613
set HT4[17]=1094070614
set HQ4[18]=1094070615
set HR4[18]=1094070616
set HS4[18]=1094070617
set HQ4[19]=1094070832
set HR4[19]=1094070833
set HS4[19]=1094070834
set HT4[19]=1094070835
set HQ4[20]=1094070836
set HR4[20]=1094070837
set HS4[20]=1094070838
set HT4[20]=1094070839
set HQ4[21]=1094070840
set HR4[21]=1094070841
set HS4[21]=1094070849
set HT4[21]=1094070850
set HQ4[22]=1094070851
set HR4[22]=1094070852
set HS4[22]=1094070853
set HQ4[23]=1094070855
set HR4[23]=1094070856
set HS4[23]=1094070857
set HT4[23]=1094070858
set HQ4[24]=1094070859
set HR4[24]=1094070860
set HS4[24]=1094070861
set HT4[24]=1094070862
set HQ4[25]=1094070863
set HS4[25]=1094070865
set HT4[25]=1094070866
set HQ4[26]=1094070867
set HR4[26]=1094070868
set HT4[26]=1094070870
set HR4[27]=1094070872
set HS4[27]=1094070873
set HT4[27]=1094070874
set HQ4[28]=1094071088
set HR4[28]=1094071089
set HS4[28]=1094071090
set HT4[28]=1094071091
set HQ4[29]=1094071092
set HR4[29]=1094071093
set HS4[29]=1094071094
set HT4[29]=1094071095
set HQ4[30]=1094071096
set HR4[30]=1094071097
set HS4[30]=1094071105
set HT4[30]=1094071106
set HQ4[31]=1094071107
set HR4[31]=1094071108
set HS4[31]=1094071109
set HT4[31]=1094071110
set HQ4[32]=1094071111
set HR4[32]=1094071112
set HS4[32]=1094071113
set HT4[32]=1094071114
set HQ4[33]=1094071115
set HR4[33]=1094071116
set HS4[33]=1094071117
set HQ4[34]=1094071119
set HR4[34]=1094071120
set HS4[34]=1094071121
set HT4[34]=1094071122
set HQ4[35]=1094071123
set HR4[35]=1094071124
set HS4[35]=1094071125
set HT4[35]=1094071126
set HQ4[36]=1094071127
set HR4[36]=1094071128
set HS4[36]=1094071129
set HT4[36]=1094071130
set HQ4[37]=1094071344
set HR4[37]=1094071345
set HS4[37]=1094071346
set HT4[37]=1094071347
set HQ4[38]=1094071348
set HR4[38]=1094071349
set HS4[38]=1094071350
set HT4[38]=1094071351
set HQ4[39]=1094071352
set HS4[39]=1094071361
set HQ4[40]=1094071363
set HR4[40]=1094071364
set HS4[40]=1094071365
set HT4[40]=1094071366
set HQ4[41]=1094071367
set HR4[41]=1094071368
set HS4[41]=1094071369
set HT4[41]=1094071370
set HQ4[42]=1094071371
set HR4[42]=1094071372
set HS4[42]=1094071373
set HT4[42]=1094071374
set HQ4[43]=1094071375
set HR4[43]=1094071376
set HT4[43]=1094071378
set HQ4[44]=1094071379
set HR4[44]=1094071380
set HS4[44]=1094071381
set HT4[44]=1094071382
set HQ4[45]=1094071383
set HR4[45]=1094071384
set HS4[45]=1094071385
set HT4[45]=1094071386
set HQ4[46]=1094071600
set HS4[46]=1094071602
set HT4[46]=1094071603
set HQ4[47]=1094071604
set HR4[47]=1094071605
set HS4[47]=1094071606
set HT4[47]=1094071607
set HQ4[48]=1094071608
set HR4[48]=1094071609
set HS4[48]=1094071617
set HT4[48]=1094071618
set HQ4[49]=1094071619
set HR4[49]=1094071620
set HT4[49]=1094071622
set HQ4[50]=1094071623
set HR4[50]=1094071624
set HS4[50]=1094071625
set HT4[50]=1094071626
set HQ4[51]=1094071627
set HR4[51]=1094071628
set HS4[51]=1094071629
set HT4[51]=1094071630
set HQ4[52]=1094071631
set HR4[52]=1094071632
set HT4[52]=1094071634
set HQ4[53]=1094071635
set HR4[53]=1094071636
set HS4[53]=1094071637
set HT4[53]=1094071638
set HQ4[54]=1094071639
set HR4[54]=1094071640
set HS4[54]=1094071641
set HT4[54]=1094071642
set HQ4[55]=1094071856
set HR4[55]=1094071857
set HT4[55]=1094071859
set HQ4[56]=1094071860
set HT4[56]=1094071863
set HQ4[57]=1094071864
set HR4[57]=1094071865
set HS4[57]=1094071873
set HT4[57]=1094071874
set HQ4[58]=1094071875
set HR4[58]=1094071876
set HS4[58]=1094071877
set HQ4[59]=1094071879
set HR4[59]=1094071880
set HS4[59]=1094071881
set HQ4[60]=1094071883
set HR4[60]=1094071884
set HS4[60]=1094071885
set HT4[60]=1094071886
set HR4[61]=1094071888
set HS4[61]=1094071889
set HT4[61]=1094071890
set HQ4[62]=1094071891
set HR4[62]=1094071892
set HS4[62]=1094071893
set HT4[62]=1094071894
set HQ4[63]=1094071895
set HR4[63]=1094071896
set HS4[63]=1094071897
set HT4[63]=1094071898
set HR4[64]=1094072113
set HS4[64]=1094072114
set HT4[64]=1094072115
set HQ4[65]=1094072116
set HR4[65]=1094072117
set HS4[65]=1094072118
set HT4[65]=1094072119
set HQ4[66]=1094072120
set HR4[66]=1094072121
set HS4[66]=1094072129
set HT4[66]=1094072130
set HQ4[67]=1094072131
set HR4[67]=1094072132
set HS4[67]=1094072133
set HT4[67]=1094072134
set HQ4[68]=1094072135
set HR4[68]=1094072136
set HS4[68]=1094072137
set HT4[68]=1094072138
set HQ4[69]=1094072139
set HR4[69]=1094072140
set HS4[69]=1094072141
set HT4[69]=1094072142
set HQ4[70]=1094072143
set HR4[70]=1094072144
set HS4[70]=1094072145
set HT4[70]=1094072146
set HQ4[71]=1094072147
set HR4[71]=1094072148
set HS4[71]=1094072149
set HT4[71]=1094072150
set HR4[72]=1094072152
set HS4[72]=1094072153
set HQ4[73]=1094072368
set HR4[73]=1094072369
set HS4[73]=1094072370
set HT4[73]=1094072371
set HQ4[74]=1094072372
set HR4[74]=1094072373
set HT4[74]=1094072375
set HQ4[75]=1094072376
set HR4[75]=1094072377
set HS4[75]=1094072385
set HT4[75]=1094072386
set HQ4[76]=1094072387
set HR4[76]=1094072388
set HS4[76]=1094072389
set HT4[76]=1094072390
set HQ4[77]=1094072391
set HR4[77]=1094072392
set HS4[77]=1094072393
set HT4[77]=1094072394
set HR4[78]=1094072396
set HS4[78]=1094072397
set HT4[78]=1094072398
set HQ4[79]=1094072399
set HR4[79]=1094072400
set HS4[79]=1094072401
set HT4[79]=1094072402
set HQ4[81]=1094072407
set HR4[81]=1094072408
set HS4[81]=1094072409
set HT4[81]=1094072410
set HQ4[82]=1094072624
set HR4[82]=1094072625
set HS4[82]=1094072626
set HT4[82]=1094072627
set HQ4[83]=1094072628
set HR4[83]=1094072629
set HS4[83]=1094072630
set HT4[83]=1094072631
set HQ4[84]=1094072632
set HR4[84]=1094072633
set HS4[84]=1094072641
set HT4[84]=1094072642
set HQ4[85]=1094072643
set HR4[85]=1094072644
set HS4[85]=1094072645
set HT4[85]=1094072646
set HQ4[86]=1094072647
set HR4[86]=1094072648
set HS4[86]=1094072649
set HT4[86]=1094072650
set HQ4[87]=1094072651
set HR4[87]=1094072652
set HS4[87]=1094072653
set HT4[87]=1094072654
set HQ4[88]=1094072655
set HR4[88]=1094072656
set HS4[88]=1094072657
set HT4[88]=1094072658
set HQ4[89]=1094072659
set HS4[89]=1094072661
set HQ4[90]=1094072663
set HR4[90]=1094072664
set HS4[90]=1094072665
set HT4[90]=1094072666
set HQ4[91]=1094074672
set HR4[91]=1094074673
set HS4[91]=1094074674
set HT4[91]=1094074675
set HQ4[92]=1094074676
set HR4[92]=1094074677
set HS4[92]=1094074678
set HQ4[93]=1094074680
set HR4[93]=1094074681
set HS4[93]=1094074689
set HT4[93]=1094074690
set HQ4[95]=1094074695
set HR4[95]=1094074696
set HS4[95]=1094074697
set HT4[95]=1094074698
set HQ4[96]=1094074699
set HR4[96]=1094074700
set HT4[96]=1094074702
set HQ4[97]=1094074703
set HR4[97]=1094074704
set HS4[97]=1094074705
set HT4[97]=1094074706
set HQ4[98]=1094074707
set HR4[98]=1094074708
set HS4[98]=1094074709
set HT4[98]=1094074710
set HU4[1]=1094135856
set HU4[2]=1094135857
set HU4[5]=1094135858
set HU4[8]=1094135897
set HU4[$B]=1094135859
set HU4[$C]=1094135860
set HU4[20]=1094135861
set HU4[23]=1094135862
set HU4[24]=1094135863
set HU4[25]=1094135864
set HU4[28]=1094135865
set HU4[30]=1094135873
set HU4[38]=1094135874
set HU4[42]=1094135875
set HU4[45]=1094135876
set HU4[47]=1094135877
set HU4[50]=1094135878
set HU4[51]=1094135879
set HU4[53]=1094135880
set HU4[54]=1094135881
set HU4[62]=1094135882
set HU4[64]=1094135883
set HU4[67]=1094135884
set HU4[69]=1094135885
set HU4[73]=1094135886
set HU4[75]=1094135887
set HU4[76]=1094135888
set HU4[77]=1094135889
set HU4[78]=1094135890
set HU4[81]=1094135891
set HU4[82]=1094135896
set HU4[84]=1094135892
set HU4[86]=1094135893
set HU4[90]=1094135894
endfunction
function E5 takes nothing returns nothing
set HJ4[EV]=500
set HJ4[FV]=500
set HJ4[JV]=450
set HJ4[MV]=$B9
set HJ4[NV]=450
set HJ4[OV]=$3E8
set HJ4[QV]=450
set HJ4[SV]=$4B0
set HJ4[TV]=550
set HJ4[UV]=$578
set HJ4[XV]=$960
set HJ4[AV]=$CE4
set HJ4[BV]=$3E8
set HJ4[CV]=$96
set HJ4[LV]=700
set HJ4[EW]=700
set HJ4[HW]=950
set HJ4[NW]=$834
set HJ4[OW]=53
set HJ4[QW]=$866
set HJ4[RW]=$866
set HJ4[TW]=$96
set HJ4[UW]=900
set HJ4[VW]=$C80
set HJ4[YW]=$640
set HJ4[ZW]=$A8C
set HJ4[GX]=$3E8
set HJ4[NX]=550
set HJ4[RX]=$578
set HJ4[SX]=$4B0
set HJ4[WX]=900
set HJ4[YX]=875
set HJ4[ZX]=$AF
set HJ4[AX]=350
set HJ4[GY]=450
set HJ4[HY]=$ED8
set HJ4[SY]=$96
set HJ4[UY]=325
set HJ4[ZY]=$3E8
set HJ4[DZ]=$FA
set HJ4[EZ]=$FA
set HJ4[HZ]=$834
set HJ4[NZ]=$44C
set HJ4[OZ]=875
set HJ4[RZ]=$5DC
set HJ4[UZ]=600
set HJ4[XZ]=600
set HJ4[AZ]=600
set HJ4[BZ]=600
set HJ4[CZ]=600
set HJ4[IA]=600
set HJ4[JA]=600
set HJ4[NA]=600
set HJ4[QA]=600
set HJ4[WA]=600
set HJ4[YA]=$C8
set HJ4[ZA]=$E1
set HJ4[BA]=$E1
set HJ4[GB]=$708
set HJ4[NC]=50
set HJ4[OC]=0
set HJ4[PC]=100
set HJ4[QC]=90
set HJ4[TC]=$C8
set HJ4[VC]=$C8
set HJ4[WC]=$87
set HJ4[XC]=$87
set HJ4[YC]=$96
set HJ4[ZC]=$3E8
set HJ4[AC]=0
set HJ4[BC]=$B4
set HJ4[W3]=$6D6
set HJ4[Y3]=603
set HJ4[Z3]=803
set HJ4[B3]=500
set HJ4[C3]=500
set HJ4[E6]=$9C4
set HJ4[F6]=$5AA
set HJ4[G6]=$5AA
set HJ4[H6]=$5AA
set HJ4[N6]=$76C
set HJ4[V6]=$68B
set HJ4[W6]=525
set HJ4[A6]=485
set HJ4[DL]=505
set HJ4[HL]=$866
set HJ4[OL]=$866
set HJ4[RL]=$B86
set HJ4[WL]=$B86
set HJ4[ZL]=$898
set HJ4[AL]=$A8C
set HJ4[LL]=$CE4
set HJ4[D1]=4150
set HJ4[E1]=$CE4
set HJ4[F1]=4150
set HJ4[H1]=$73A
set HJ4[J1]=$73A
set HJ4[O1]=$76C
set HJ4[P1]=$AF0
set HJ4[Q1]=$CE4
set HJ4[R1]=$902
set HJ4[T1]=4300
set HJ4[U1]=4100
set HJ4[V1]=4350
set HJ4[X1]=$866
set HJ4[A1]=$F3C
set HJ4[D0]=$F3C
set HJ4[E0]=$F3C
set HJ4[J0]=$F3C
set HJ4[N0]=$F3C
set HJ4[O0]=$F3C
set HJ4[T0]=0
set HJ4[X0]=4900
set HJ4[Y0]=4900
set HJ4[B0]=$CE4
set HJ4[C0]=$AF5
set HJ4[F5]=4105
set HJ4[G5]=5405
set HJ4[J5]=6705
set HJ4[M5]=8005
set HJ4[N5]=$A8C
set HJ4[R5]=$F6E
set HJ4[S5]=5200
set HJ4[T5]=5175
set HJ4[W5]=5175
set HJ4[A5]=6200
set HJ4[C5]=5750
set HJ4[L5]=5400
set HJ4[E2]=5400
set HJ4[F2]=5150
set HJ4[H2]=5150
set HJ4[P2]=5500
set HJ4[S2]=6150
set HJ4[T2]=5750
set HJ4[W2]=5750
set HJ4[X2]=6000
set HJ4[Z2]=5300
set HJ4[D44]=5675
set HJ4[D74]=$8B1
set HJ4[D84]=$8B1
set HJ4[DD4]=5400
set HJ4[DE4]=370
set HJ4[DF4]=$802
set HJ4[DG4]=5350
set HJ4[DH4]=5050
set HJ4[DI4]=$84D
set HJ4[DJ4]=$A28
set HJ4[DK4]=$A28
set HJ4[DM4]=$A28
set HJ4[DN4]=$A28
set HJ4[DO4]=4700
set HJ4[DP4]=4700
set HJ4[DQ4]=4125
set HJ4[DR4]=$578
set HJ4[DS4]=509
set HJ4[DT4]=$898
set HJ4[DU4]=$E2C
set HJ4[DV4]=550
set HJ4[DW4]=550
set HJ4[DX4]=875
set HJ4[DZ4]=$640
set HJ4[DA4]=$C8
set HJ4[DB4]=$C8
set HJ4[DC4]=$7D0
set HJ4[D34]=0
set HJ4[D64]=$578
set HJ4[DL4]=$BE
set HJ4[D04]=$96
set HJ4[D54]=$AA
set HJ4[D24]=700
set HJ4[D_4]=700
set HJ4[E44]=$3E8
set HJ4[E74]=800
set HJ4[E84]=850
set HJ4[E94]=$3E8
set HJ4[ED4]=600
set HJ4[EE4]=900
set HJ4[EF4]=0
set HJ4[EG4]=900
set HJ4[EH4]=500
set HJ4[EI4]=$514
set HJ4[EJ4]=650
set HJ4[EK4]=$3E8
set HJ4[EM4]=$514
set HJ4[EN4]=$4E2
set HJ4[EO4]=$52D
set HJ4[EP4]=$4B0
set HJ4[EQ4]=$546
set HJ4[ER4]=$4B0
set HJ4[ES4]=$44C
set HJ4[ET4]=0
set HJ4[EU4]=$753
set HJ4[EW4]=$C8
set HJ4[EX4]=300
set HJ4[EY4]=$514
set HJ4[EZ4]=700
set HJ4[EA4]=600
set HJ4[EB4]=$96
set HJ4[EC4]=300
set HJ4[E34]=900
set HJ4[E64]=600
set HJ4[EL4]=$FA
set HJ4[F94]=$4E2
set HJ4[FD4]=775
set HJ4[E24]=350
set HJ4[E_4]=350
set HJ4[F44]=$5DC
set HJ4[JB]=$5DC
set HJ4[QB]=$5DC
set HJ4[RB]=$6BD
set HJ4[VB]=$6BD
set HJ4[LC]=100
set HJ4[H3]=$433
set HJ4[F84]=$C8
set HJ4[F74]=750
set HJ4[M3]=$A5A
set HJ4[N3]=$F6E
set HJ4[EC]=$C1C
set HJ4[YB]=$401
set HJ4[LB]=$401
set HJ4[R3]=6750
set HJ4[GC]=985
set HJ4[JC]=985
set HJ4[FR4]=4200
set HJ4[FS4]=4200
set HJ4[FT4]=4200
set HJ4[FU4]=4200
set HJ4[FV4]=4200
set HJ4[FW4]=4200
set HJ4[FX4]=4200
set HJ4[FY4]=4200
set HJ4[FZ4]=4200
set HJ4[FA4]=4200
set HJ4[FC4]=4200
set HJ4[F34]=4200
set HJ4[F64]=4200
set HJ4[FL4]=4200
set HJ4[F14]=4200
set HJ4[F04]=4200
set HJ4[F54]=4200
set HJ4[F24]=4200
set HJ4[F_4]=4200
set HJ4[G44]=4200
set HJ4[G74]=4200
set HJ4[G84]=4200
set HJ4[G94]=4200
set HJ4[GD4]=4200
set HJ4[GE4]=4200
set HJ4[GG4]=4200
set HJ4[GH4]=4200
set HJ4[GI4]=4200
set HJ4[GJ4]=4200
set HJ4[GK4]=4200
set HJ4[GM4]=4200
set HJ4[GN4]=4200
set HJ4[GO4]=4200
set HJ4[GP4]=4200
set HJ4[GQ4]=4200
set HJ4[GR4]=4200
set HJ4[GS4]=4200
set HJ4[GT4]=4200
set HJ4[FB4]=4200
set HJ4[GU4]=4200
set HJ4[GV4]=4200
set HJ4[GX4]=4200
set HJ4[GY4]=4200
set HJ4[GZ4]=4200
set HJ4[GA4]=4200
set HJ4[GB4]=4200
set HJ4[G34]=4200
set HJ4[G64]=4200
set HJ4[GL4]=4200
set HJ4[G14]=4200
set HJ4[G04]=4200
set HJ4[G54]=4200
set HJ4[GW4]=4200
endfunction
function is takes unit it returns boolean
return((GetUnitCurrentOrder(it)<$D0020)and(Bz>hq[832+GetPlayerId(GetOwningPlayer(it))]))
endfunction
function OQ7 takes unit OR7 returns boolean
local integer OS7=GetUnitCurrentOrder(OR7)
return(OS7==0)or(OS7==$D0005)or(OS7==$D0007)or(OS7==$D0013)or(OS7==$D0019)
endfunction
function iU takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
return((X5<$D0020)and(not LoadBoolean(C7,GetHandleId(it),1145131595))and((X5!=$D000F)or(not GZ[48+GetPlayerId(GetOwningPlayer(it))]))and(Bz>hq[832+GetPlayerId(GetOwningPlayer(it))])and(GetUnitAbilityLevel(it,1110459975)==0))
endfunction
function iy takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
return((h4[O5]==null)and((h4[$A0+O5]==null)or(GetWidgetLife(h4[$A0+O5])<=.405)or(not IsUnitInRange(h4[$A0+O5],it,1000.)))and(not G0[$90+O5]))
endfunction
function OT7 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
local integer OU7=GetHandleId(it)
if hq[832+GetPlayerId(GetOwningPlayer(it))]>Bz then
return false
elseif((X5==$D0005)or(GetWidgetLife(it)<=.405)or(IsUnitPaused(it)))then
return false
elseif(X5>$D0027)and(X5<$D002E)and((GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==SU[XC])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==SU[E6]))then
return false
elseif((X5<$D0028)and((i1!=1328558154)or((LoadBoolean(C7,OU7,1145131595)==false))))then
return true
elseif(GetUnitAbilityLevel(it,1110459975)!=0)then
return false
endif
return((X5>$D002D)and(X5!=$D0200)and(X5!=$D022D)and(X5!=$D0207)and(X5!=$D0275)and((i1!=1160786243)or(X5!=$D0079))and((i1!=1429221451)or(X5!=$D0265))and((X5!=$D0278)or((i1!=1214931305)and(i1!=1316252014)and(i1!=1214409837)))and(((i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517))or(X5!=$D00DD))and((i1!=1311780946)or(X5!=$D010E))and((i1!=1311786311)or(X5!=$D02B6))and((i1!=1328558389)or(X5!=$D0265)))
endfunction
function OV7 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
local integer OU7=GetHandleId(it)
if hq[832+GetPlayerId(GetOwningPlayer(it))]>Bz then
return false
elseif((X5==$D0005)or(GetWidgetLife(it)<=.405)or(IsUnitPaused(it)))then
return false
elseif(X5>$D0027)and(X5<$D002E)and((GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==SU[XC])or(GetItemTypeId(UnitItemInSlot(it,X5-$D0027))==SU[E6]))then
return false
elseif((X5<$D0028)and((i1!=1328558154)or((LoadBoolean(C7,OU7,1145131595)==false))))then
return true
elseif(X5==$D0278)and((i1==1212363833))then
return false
elseif(GetUnitAbilityLevel(it,1110459975)!=0)then
return false
endif
return((X5>$D002D)and(X5!=$D0200)and(X5!=$D022D)and(X5!=$D0207)and(X5!=$D0275)and((i1!=1160786243)or(X5!=$D0079))and((i1!=1315334514)or(X5!=$D009F))and((i1!=1429221451)or(X5!=$D0265))and((X5!=$D0249)or((i1!=1211117641)and(i1!=1211117642)))and((X5!=$D0278)or((i1!=1214931305)and(i1!=1316252014)and(i1!=1214409837)))and(((i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517))or(X5!=$D00DD))and((i1!=1311780946)or(X5!=$D010E))and((i1!=1311786311)or(X5!=$D02B6))and((i1!=1328558389)or(X5!=$D0265))and((i1!=1429221451)or(X5!=$D0217))and((i1!=1311780930)or(X5!=$D0222))and(((i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(X5!=$D0118)))
endfunction
function i2 takes unit it returns boolean
local integer X5=GetUnitCurrentOrder(it)
local integer i1=GetUnitTypeId(it)
if(X5<$D0028)then
return false
endif
return((X5<=$D002D)or(X5==$D0200)or(X5==$D0207)or(X5==$D0275)or((i1==1328558154)and LoadBoolean(C7,GetHandleId(it),1145131595))or((i1==1160786243)and(X5==$D0079))or((i1==1315334514)and(X5==$D009F))or((i1==1429221451)and(X5==$D0265))or(((i1==1214931305)or(i1==1316252014)or(i1==1214409837))and(X5==$D0278)))
endfunction
function OW7 takes integer O5 returns player
if((O5>0)and(O5<6))then
return Y7[O5]
elseif((O5>5)and(O5<$B))then
return Z7[O5-5]
endif
return null
endfunction
function OX7 takes string O5 returns player
if O5=="0" then
set bj_forLoopAIndex=$A
else
set bj_forLoopAIndex=S2I(O5)
endif
if((bj_forLoopAIndex>0)and(bj_forLoopAIndex<6))then
return Y7[bj_forLoopAIndex]
elseif((bj_forLoopAIndex>5)and(bj_forLoopAIndex<$B))then
return Z7[bj_forLoopAIndex-5]
endif
return null
endfunction
function i5 takes player pl returns integer
local integer O5=1
loop
exitwhen O5>5
if(pl==Y7[O5])then
return O5
elseif(pl==Z7[O5])then
return O5+5
endif
set O5=O5+1
endloop
return 0
endfunction
function OY7 takes unit MQ7 returns boolean
if IsUnitAlly(MQ7,Y7[0])then
return IsUnitVisible(MQ7,X24)
else
return IsUnitVisible(MQ7,X54)
endif
return false
endfunction
function OZ7 takes unit MQ7 returns boolean
if IsUnitAlly(MQ7,Y7[0])then
return IsVisibleToPlayer(GetUnitX(MQ7),GetUnitY(MQ7),X24)
else
return IsVisibleToPlayer(GetUnitX(MQ7),GetUnitY(MQ7),X54)
endif
return false
endfunction
function OA7 takes unit it returns boolean
return(GetWidgetLife(it)>.405 and((not IsUnitType(it,UNIT_TYPE_HERO))or(not IF4[GetPlayerId(GetOwningPlayer(it))])))
endfunction
function OB7 takes unit OC7,unit MQ7 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
return((IsUnitType(OC7,UNIT_TYPE_HERO))and(((R2I(GetWidgetLife(OC7))<(300+(GetHeroLevel(OC7)*30)))and(GetUnitLifePercent(OC7)<40.))or((hq[624+O5]>Bz and h4[O5]==OC7)))and(OA7(OC7)))
endfunction
function O37 takes unit it returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(300+(GetHeroLevel(it)*30)))and(GetUnitLifePercent(it)<40.)and(OA7(it)))
endfunction
function O67 takes integer O5 returns boolean
return(hq[624+O5]>Bz and h4[O5]!=null)and(not O37(G7[O5]))
endfunction
function OL7 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1110459472)>0)or(GetUnitAbilityLevel(it,1093687122)>0)or(GetUnitAbilityLevel(it,1110454856)>0))
endfunction
function O17 takes unit it returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(600+(GetHeroLevel(it)*30)))and(GetWidgetLife(it)>.405))
endfunction
function O07 takes unit it,unit IB returns boolean
return((IsUnitType(it,UNIT_TYPE_HERO))and(R2I(GetWidgetLife(it))<(300+(GetHeroLevel(it)*30)))and(GetUnitLifePercent(it)<40.)and(GetWidgetLife(it)>.405)and(GetUnitState(IB,UNIT_STATE_LIFE)>(GetUnitState(it,UNIT_STATE_LIFE)-(10.*GetHeroLevel(IB)))))
endfunction
function IC takes integer O5 returns boolean
return((U[O5]-3)>=Q[O5])
endfunction
function Id takes integer O5 returns boolean
return((h4[O5]!=null)and(O07(h4[O5],G7[O5])))
endfunction
function Ie takes rect r,boolexpr Ig returns unit
call GroupClear(ig)
call GroupEnumUnitsInRect(ig,r,Ig)
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call ForGroup(ig,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function O57 takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
set IK7=IK7+GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
endfunction
function IH takes player pl,boolexpr Ig returns integer
call GroupClear(ig)
call GroupEnumUnitsOfPlayer(ig,pl,Ig)
set bj_groupCountUnits=0
call ForGroup(ig,function CountUnitsInGroupEnum)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function O27 takes real Im,location b5,boolexpr Ig returns unit
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call GroupClear(H9)
call GroupEnumUnitsInRangeOfLoc(H9,b5,Im,Ig)
call ForGroup(H9,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function O_7 takes real Im,unit MQ7,boolexpr Ig returns unit
set bj_groupRandomConsidered=0
set bj_groupRandomCurrentPick=null
call GroupClear(H9)
call GroupEnumUnitsInRange(H9,GetUnitX(MQ7),GetUnitY(MQ7),Im,Ig)
call ForGroup(H9,function GroupPickRandomUnitEnum)
call DestroyBoolExpr(Ig)
return bj_groupRandomCurrentPick
endfunction
function P47 takes real Im,location b5,boolexpr Ig returns unit
call GroupClear(H9)
call GroupEnumUnitsInRangeOfLoc(H9,b5,Im,Ig)
call DestroyBoolExpr(Ig)
return FirstOfGroup(H9)
endfunction
function P77 takes real Im,location b5,boolexpr Ig returns integer
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,Im,Ig)
set bj_groupCountUnits=0
call ForGroup(H8,function CountUnitsInGroupEnum)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function P87 takes real Im,unit it,boolexpr Ig returns integer
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(it),GetUnitY(it),Im,Ig)
set bj_groupCountUnits=0
set IK7=.0
call ForGroup(H8,function O57)
call DestroyBoolExpr(Ig)
return bj_groupCountUnits
endfunction
function IV takes real x,real y,real IW,boolexpr Ig,code IX returns nothing
call GroupClear(iF)
call GroupEnumUnitsInRange(iF,x,y,IW,Ig)
call ForGroup(iF,IX)
call DestroyBoolExpr(Ig)
endfunction
function P97 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function PD7 takes unit it,integer Iz returns boolean
local integer I8=0
local item ja
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(GetItemTypeId(ja)==Iz))then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function PE7 takes unit it returns boolean
local integer I8=0
loop
if(UnitItemInSlot(it,I8)==null)then
return false
endif
set I8=I8+1
exitwhen(I8>=bj_MAX_INVENTORY)
endloop
return true
endfunction
function PF7 takes unit it returns boolean
local integer I8=0
loop
if(UnitItemInSlot(it,I8)!=null)then
return false
endif
set I8=I8+1
exitwhen(I8>=bj_MAX_INVENTORY)
endloop
return true
endfunction
function PG7 takes unit S4,integer n5,item Z4 returns item
local integer D5
local item f5
set D5=0
loop
exitwhen D5>5
set f5=UnitItemInSlot(S4,D5)
if f5!=null and f5!=Z4 and GetItemTypeId(f5)==n5 then
set f5=null
return UnitItemInSlot(S4,D5)
endif
set D5=D5+1
endloop
set f5=null
return null
endfunction
function PH7 takes unit S4,integer n5 returns item
local integer D5
local item f5
set D5=0
loop
exitwhen D5>5
set f5=UnitItemInSlot(S4,D5)
if(f5!=null)and(GetItemTypeId(f5)==n5)then
set f5=null
return UnitItemInSlot(S4,D5)
endif
set D5=D5+1
endloop
set f5=null
return null
endfunction
function PI7 takes integer i1 returns boolean
return(i1==SU[A1]or i1==SU[D0]or i1==SU[E0]or i1==SU[J0]or i1==SU[N0]or i1==SU[O0])
endfunction
function PJ7 takes integer i1,integer Iz,boolean PK7 returns boolean
if i1==Iz then
return true
elseif(i1==DV4 or i1==DW4)and(Iz==DV4 or Iz==DW4)then
return true
elseif(i1==DZ or i1==EZ)and(Iz==DZ or Iz==EZ)then
return true
elseif(i1==ZA or i1==BA)and(Iz==ZA or Iz==BA)then
return true
elseif(i1==RL or i1==WL)and(Iz==RL or Iz==WL)then
return true
elseif(i1==JB or i1==QB)and(Iz==JB or Iz==QB)then
return true
elseif(i1==X0 or i1==Y0)and(Iz==X0 or Iz==Y0)then
return true
elseif(i1==T2 or i1==W2)and(Iz==T2 or Iz==W2)then
return true
elseif(i1==D74 or i1==D84)and(Iz==D74 or Iz==D84)then
return true
elseif(i1==UZ or i1==XZ or i1==AZ or i1==BZ or i1==CZ or i1==IA or i1==JA or i1==NA or i1==QA or i1==WA)and(Iz==UZ or Iz==XZ or Iz==AZ or Iz==BZ or Iz==CZ or Iz==IA or Iz==JA or Iz==NA or Iz==QA or Iz==WA)then
return true
elseif(i1==RB or i1==VB)and(Iz==RB or Iz==VB)then
return true
elseif(i1==F6 or i1==G6 or i1==H6)and(Iz==F6 or Iz==G6 or Iz==H6)then
return true
elseif(i1==DX4 or i1==DY4)and(Iz==DX4 or Iz==DY4)then
return true
elseif PK7 and((i1==LL or i1==E1 or i1==D1 or i1==F1)and(Iz==LL or Iz==E1 or Iz==D1 or Iz==F1))then
return true
elseif(i1==LL or i1==E1)and(Iz==LL or Iz==E1)then
return true
elseif(i1==D1 or i1==F1)and(Iz==D1 or Iz==F1)then
return true
elseif PK7 and((i1==C0 or i1==F5 or i1==G5 or i1==J5 or i1==M5)and(Iz==C0 or Iz==F5 or Iz==G5 or Iz==J5 or Iz==M5))then
return true
elseif PK7 and((i1==N5 or i1==R5 or i1==S5)and(Iz==N5 or Iz==R5 or Iz==S5))then
return true
elseif(i1==A1 or i1==D0 or i1==E0 or i1==J0 or i1==N0 or i1==O0)and(Iz==A1 or Iz==D0 or Iz==E0 or Iz==J0 or Iz==N0 or Iz==O0)then
return true
elseif(i1==B3 or i1==C3)and(Iz==B3 or Iz==C3)then
return true
elseif(i1==GC or i1==JC)and(Iz==GC or Iz==JC)then
return true
elseif(i1==F2 or i1==H2)and(Iz==F2 or Iz==H2)then
return true
elseif(i1==L5 or i1==E2)and(Iz==L5 or Iz==E2)then
return true
elseif(i1==P2 or i1==R2)and(Iz==P2 or Iz==R2)then
return true
elseif(i1==DJ4 or i1==DK4 or i1==DM4 or i1==DN4)and(Iz==DJ4 or Iz==DK4 or Iz==DM4 or Iz==DN4)then
return true
elseif(i1==WC or i1==XC)and(Iz==WC or Iz==XC)then
return true
elseif(i1==T5 or i1==W5)and(Iz==T5 or Iz==W5)then
return true
elseif(i1==A5 or i1==B5)and(Iz==A5 or Iz==B5)then
return true
elseif(i1==H1 or i1==J1)and(Iz==H1 or Iz==J1)then
return true
elseif(i1==LV or i1==EW)and(Iz==LV or Iz==EW)then
return true
elseif(i1==N6 or i1==S6)and(Iz==N6 or Iz==S6)then
return true
elseif(i1==DO4 or i1==DP4)and(Iz==DO4 or Iz==DP4)then
return true
endif
return false
endfunction
function PM7 takes unit it,integer Iz returns boolean
local integer i=0
local item ja
local integer i1
local boolean PN7=false
set i=0
loop
exitwhen i>DV
if RU[i]==Iz or SU[i]==Iz or AU[i]==Iz then
set Iz=i
exitwhen true
endif
set i=i+1
endloop
if i>DV then
return false
endif
set i=0
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,i)
if ja!=null then
set i1=OK7(ja)
if PJ7(i1,Iz,true)then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
endif
set i=i+1
exitwhen i>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function PO7 takes unit it returns boolean
local integer I8=0
local item ja
set bj_lastCreatedItem=null
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(GetItemTypeId(ja)==SU[DS4]or GetItemTypeId(ja)==SU[YA]))then
set bj_lastCreatedItem=ja
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function PP7 takes unit j5,integer Iz returns boolean
local boolean jR=false
local integer O5
set LP4="aiUseItemOfBasicType"
if(PM7(j5,Iz))then
set O5=GetPlayerId(GetOwningPlayer(j5))
set GZ[$E0+O5]=true
set jR=UnitUseItem(j5,bj_lastCreatedItem)
set GZ[$E0+O5]=false
endif
return jR
endfunction
function PQ7 takes unit PR7,unit PS7 returns boolean
local boolean PT7=false
local integer O5=GetPlayerId(GetOwningPlayer(PR7))
set LP4="AIDagonFinish"
if((T64)and(not T54[O5])and(GetUnitTypeId(PR7)!=1211117642)and(not IsUnitIllusion(PR7))and(Bz>T04[O5])and(PS7!=null)and(GetUnitLevel(PR7)>5)and(GetUnitState(PR7,UNIT_STATE_MANA)>300)and(not PD7(PR7,SU[C0]))and(not PD7(PR7,SU[F5]))and(not PD7(PR7,SU[G5]))and(not PD7(PR7,SU[J5]))and(not PD7(PR7,SU[M5]))and(GetRandomInt(1,4)!=4))then
if(GetUnitLevel(PR7)>$C and GetUnitLevel(PR7)<20)then
set UE4=GetRandomInt(3,5)
elseif(GetUnitLevel(PR7)>19 and GetUnitLevel(PR7)<25)then
set UE4=GetRandomInt(4,5)
elseif(GetUnitLevel(PR7)>24)then
set UE4=5
else
set UE4=GetRandomInt(1,5)
endif
set T_4[O5]=CreateItem(TL4[UE4],9999,-9999)
set T54[O5]=false
if(T_4[O5]!=null)then
set T24[O5]=UnitItemInSlot(PR7,5)
if(T24[O5]!=null)then
call DisableTrigger(H84)
call UnitRemoveItem(PR7,T24[O5])
call SetItemPosition(T24[O5],9999,-9999)
call EnableTrigger(H84)
endif
call NX7(.2)
set T54[O5]=(UnitAddItem(PR7,T_4[O5]))
call SetItemPlayer(T_4[O5],GetOwningPlayer(PR7),true)
endif
if(T54[O5])then
else
if(T24[O5]!=null)then
call NX7(.2)
call UnitAddItem(PR7,T24[O5])
call OJ7(T_4[O5])
endif
set T54[O5]=false
set T_4[O5]=null
set T24[O5]=null
endif
else
if((PD7(PR7,SU[M5]))and(not IsUnitIllusion(PS7))and(IsUnitInRange(PR7,PS7,800.))and((GetUnitState(PS7,UNIT_STATE_LIFE)>10.)and(GetUnitState(PS7,UNIT_STATE_LIFE)<650.)))then
set PT7=(PS7!=null)and(UnitUseItemTarget(PR7,bj_lastCreatedItem,PS7))
elseif((PD7(PR7,SU[J5]))and(not IsUnitIllusion(PS7))and(IsUnitInRange(PR7,PS7,750.))and((GetUnitState(PS7,UNIT_STATE_LIFE)>10.)and(GetUnitState(PS7,UNIT_STATE_LIFE)<550.)))then
set PT7=(PS7!=null)and(UnitUseItemTarget(PR7,bj_lastCreatedItem,PS7))
elseif((PD7(PR7,SU[G5]))and(not IsUnitIllusion(PS7))and(IsUnitInRange(PR7,PS7,700.))and((GetUnitState(PS7,UNIT_STATE_LIFE)>10.)and(GetUnitState(PS7,UNIT_STATE_LIFE)<450.)))then
set PT7=(PS7!=null)and(UnitUseItemTarget(PR7,bj_lastCreatedItem,PS7))
elseif((PD7(PR7,SU[F5]))and(not IsUnitIllusion(PS7))and(IsUnitInRange(PR7,PS7,650.))and((GetUnitState(PS7,UNIT_STATE_LIFE)>10.)and(GetUnitState(PS7,UNIT_STATE_LIFE)<350.)))then
set PT7=(PS7!=null)and(UnitUseItemTarget(PR7,bj_lastCreatedItem,PS7))
elseif((PD7(PR7,SU[C0]))and(not IsUnitIllusion(PS7))and(IsUnitInRange(PR7,PS7,600.))and((GetUnitState(PS7,UNIT_STATE_LIFE)>10.)and(GetUnitState(PS7,UNIT_STATE_LIFE)<250.)))then
set PT7=(PS7!=null)and(UnitUseItemTarget(PR7,bj_lastCreatedItem,PS7))
endif
endif
return PT7
endfunction
function ju takes group jU,code IX returns nothing
call ForGroup(jU,IX)
call DestroyGroup(jU)
endfunction
function PU7 takes widget it returns location
call MoveLocation(HA,GetWidgetX(it),GetWidgetY(it))
return HA
endfunction
function PV7 takes unit u,integer X5,unit m5 returns boolean
local integer j=0
local integer O5=0
if(h7[GetUnitUserData(m5)]!=m5)or(X5!=$D000F and X5!=$D0012 and X5!=$D0003)then
return IssuePointOrderById(u,X5,GetUnitX(m5),GetUnitY(m5))
endif
set j=GetUnitUserData(m5)
if j<=0 or j>=100 then
return IssuePointOrderById(u,X5,GetUnitX(m5),GetUnitY(m5))
else
set LM4=MY7(u,m5)-90
set O5=GetPlayerId(GetOwningPlayer(u))
return IssuePointOrderById(u,X5,GetUnitX(m5)+hq[864+O5]*Cos(LM4*bj_DEGTORAD),GetUnitY(m5)+hq[864+O5]*Sin(LM4*bj_DEGTORAD))
endif
endfunction
function j1 takes unit j4,rect Ja returns real
local real JD=GetRectCenterX(Ja)-GetUnitX(j4)
local real Je=GetRectCenterY(Ja)-GetUnitY(j4)
return SquareRoot(JD*JD+Je*Je)
endfunction
function PW7 takes unit x6,integer X5,integer o6,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(GetPlayerController(GetOwningPlayer(x6))!=MAP_CONTROL_COMPUTER)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call DisableTrigger(Q14[O5])
if(IssueTargetOrderById(x6,X5,m5))then
call EnableTrigger(Q14[O5])
return true
endif
call EnableTrigger(Q14[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,(false))
return false
endfunction
function PX7 takes unit x6,integer X5,integer o6,location b5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if b5==null or(GetPlayerController(GetOwningPlayer(x6))!=MAP_CONTROL_COMPUTER)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,(true))
call DisableTrigger(Q14[O5])
if(IssuePointOrderById(x6,X5,GetLocationX(b5),GetLocationY(b5)))then
call EnableTrigger(Q14[O5])
return true
endif
call EnableTrigger(Q14[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
return false
endfunction
function PY7 takes unit x6,integer X5,integer o6,integer n6,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QX4[O5]or o6==0)or(GetPlayerController(GetOwningPlayer(x6))!=MAP_CONTROL_COMPUTER)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,(true))
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,(true))
call DisableTrigger(Q14[O5])
if(IssueTargetOrderById(x6,X5,m5))then
call EnableTrigger(Q14[O5])
return true
endif
call EnableTrigger(Q14[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,false)
return false
endfunction
function PZ7 takes unit x6,integer X5,integer o6,integer n6,real x,real y returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QX4[O5]or o6==0)or(GetPlayerController(GetOwningPlayer(x6))!=MAP_CONTROL_COMPUTER)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,true)
call DisableTrigger(Q14[O5])
if(IssuePointOrderById(x6,X5,x,y))then
call EnableTrigger(Q14[O5])
return true
endif
call EnableTrigger(Q14[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),n6,false)
return false
endfunction
function PA7 takes unit u returns boolean
call SaveInteger(CU4,D,GetHandleId(u),1)
return true
endfunction
function PB7 takes unit u,string OS7,widget JX7 returns boolean
return IssueTargetOrder(u,OS7,JX7)and PA7(u)
endfunction
function PC7 takes unit x6,integer X5,integer o6 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(x6))
if(not QX4[O5]or o6==0)or(GetPlayerController(GetOwningPlayer(x6))!=MAP_CONTROL_COMPUTER)then
return false
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,true)
call DisableTrigger(Q14[16+O5])
if(IssueImmediateOrderById(x6,X5))then
call EnableTrigger(Q14[16+O5])
return true
endif
call EnableTrigger(Q14[16+O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),o6,false)
return false
endfunction
function P37 takes unit P67 returns nothing
call SaveBoolean(CU4,D,GetHandleId(P67),true)
endfunction
function Jw takes unit it returns boolean
return((X_4[GetPlayerId(GetOwningPlayer(it))]!=1)or(GetRandomInt(1,5)<=2))
endfunction
function JW takes unit it returns unit
if(IsUnitAlly(it,Y7[0]))then
return h7[1]
else
return h7[101]
endif
endfunction
function PL7 takes unit it returns unit
if(IsUnitAlly(it,Y7[0]))then
return h7[0]
else
return h7[100]
endif
endfunction
function JX takes unit it returns unit
if(IsUnitAlly(it,Z7[0]))then
return h7[0]
else
return h7[100]
endif
endfunction
function P17 takes boolean P07 returns integer
if(P07)then
return HB4
else
return HA4
endif
endfunction
function P57 takes integer O5,boolean P07 returns player
if(P07)then
return Y7[O5]
else
return Z7[O5]
endif
endfunction
function P27 takes boolean P07 returns player
if(P07)then
return QS4
else
return QT4
endif
endfunction
function P_7 takes boolean P07 returns player
if(P07)then
return QU4
else
return QV4
endif
endfunction
function Q47 takes integer Gu returns nothing
call FlushChildHashtable(C7,Gu)
endfunction
function Q77 takes integer Q87,string GW returns nothing
call RemoveSavedHandle(C7,Q87,StringHash(GW))
endfunction
function Q97 takes integer Gu,string GW,integer Gy returns nothing
call SaveInteger(C7,Gu,StringHash(GW),Gy)
endfunction
function QD7 takes integer Gu,string GW,real Gy returns nothing
call SaveReal(C7,Gu,StringHash(GW),Gy)
endfunction
function QE7 takes integer Gu,string GW,string Gy returns nothing
call SaveStr(C7,Gu,StringHash(GW),Gy)
endfunction
function QF7 takes integer Gu,string GW,boolean Gy returns nothing
call SaveBoolean(C7,Gu,StringHash(GW),Gy)
endfunction
function QG7 takes integer Gu,string GW,unit Gy returns nothing
call SaveUnitHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QH7 takes integer Gu,string GW,effect Gy returns nothing
call SaveEffectHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QI7 takes integer Gu,string GW,trigger Gy returns nothing
call SaveTriggerHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QJ7 takes integer Gu,string GW,lightning Gy returns nothing
call SaveLightningHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QK7 takes integer Gu,string GW,fogmodifier Gy returns nothing
call SaveFogModifierHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QM7 takes integer Gu,string GW,destructable Gy returns nothing
call SaveDestructableHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QN7 takes integer Gu,string GW,player Gy returns nothing
call SavePlayerHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QO7 takes integer Gu,string GW,item Gy returns nothing
call SaveItemHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QP7 takes integer Gu,string GW,group Gy returns nothing
call SaveGroupHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QQ7 takes integer Gu,string GW,timer Gy returns nothing
call SaveTimerHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QR7 takes integer Gu,string GW,widget Gy returns nothing
call SaveWidgetHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QS7 takes integer Gu,string GW,texttag Gy returns nothing
call SaveTextTagHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QT7 takes integer Gu,string GW,location Gy returns nothing
call SaveLocationHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QU7 takes integer Gu,string GW,boolexpr Gy returns nothing
call SaveBooleanExprHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QV7 takes integer Gu,string GW,button Gy returns nothing
call SaveButtonHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QW7 takes integer Gu,string GW,image Gy returns nothing
call SaveImageHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QX7 takes integer Gu,string GW,force Gy returns nothing
call SaveForceHandle(C7,Gu,StringHash(GW),Gy)
endfunction
function QY7 takes integer Gu,string GW returns fogmodifier
return LoadFogModifierHandle(C7,Gu,StringHash(GW))
endfunction
function QZ7 takes integer Gu,string GW returns destructable
return LoadDestructableHandle(C7,Gu,StringHash(GW))
endfunction
function QA7 takes integer Gu,string GW returns unit
return LoadUnitHandle(C7,Gu,StringHash(GW))
endfunction
function QB7 takes integer Gu,string GW returns texttag
return LoadTextTagHandle(C7,Gu,StringHash(GW))
endfunction
function QC7 takes integer Gu,string GW returns player
return LoadPlayerHandle(C7,Gu,StringHash(GW))
endfunction
function Q37 takes integer Gu,string GW returns timer
return LoadTimerHandle(C7,Gu,StringHash(GW))
endfunction
function Q67 takes integer Gu,string GW returns trigger
return LoadTriggerHandle(C7,Gu,StringHash(GW))
endfunction
function QL7 takes integer Gu,string GW returns group
return LoadGroupHandle(C7,Gu,StringHash(GW))
endfunction
function Q17 takes integer Gu,string GW returns effect
return LoadEffectHandle(C7,Gu,StringHash(GW))
endfunction
function Q07 takes integer Gu,string GW returns lightning
return LoadLightningHandle(C7,Gu,StringHash(GW))
endfunction
function Q57 takes integer Gu,string GW returns location
return LoadLocationHandle(C7,Gu,StringHash(GW))
endfunction
function Q27 takes integer Gu,string GW returns item
return LoadItemHandle(C7,Gu,StringHash(GW))
endfunction
function Q_7 takes integer Gu,string GW returns image
return LoadImageHandle(C7,Gu,StringHash(GW))
endfunction
function R47 takes integer Gu,string GW returns integer
return LoadInteger(C7,Gu,StringHash(GW))
endfunction
function R77 takes integer Gu,string GW returns real
return LoadReal(C7,Gu,StringHash(GW))
endfunction
function R87 takes integer Gu,string GW returns boolean
return LoadBoolean(C7,Gu,StringHash(GW))
endfunction
function R97 takes integer Gu,string GW returns string
return LoadStr(C7,Gu,StringHash(GW))
endfunction
function RD7 takes integer ki,string kI returns button
return LoadButtonHandle(C7,ki,StringHash(kI))
endfunction
function RE7 takes integer ki,string kI returns boolexpr
return LoadBooleanExprHandle(C7,ki,StringHash(kI))
endfunction
function RF7 takes integer ki,string kI returns force
return LoadForceHandle(C7,ki,StringHash(kI))
endfunction
function RG7 takes unit hI,string Hh returns boolean
return LoadInteger(C7,GetHandleId(hI),StringHash("state"+Hh))==1
endfunction
function RH7 takes trigger hI,string Hh returns boolean
return LoadInteger(C7,GetHandleId(hI),StringHash("state"+Hh))==1
endfunction
function RI7 takes unit hI,string Hh returns nothing
call SaveInteger(C7,GetHandleId(hI),StringHash("state"+Hh),1)
endfunction
function RJ7 takes trigger hI,string Hh returns nothing
call SaveInteger(C7,GetHandleId(hI),StringHash("state"+Hh),1)
endfunction
function RK7 takes unit hI,string Hh returns nothing
call SaveInteger(C7,GetHandleId(hI),StringHash("state"+Hh),2)
endfunction
function RM7 takes trigger hI,string Hh returns nothing
call SaveInteger(C7,GetHandleId(hI),StringHash("state"+Hh),2)
endfunction
function l5 takes nothing returns nothing
local integer i=0
set LP4="l5"
if L8==false and PS4==false then
loop
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303An internal checksum has failed|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303This might not be a serious glitch, but it is important for me to get it|r")
call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303Please send me the replay for this game to IceFrog@gmail.com|r")
set i=i+1
exitwhen i==$C
endloop
endif
endfunction
function RN7 takes trigger t returns nothing
call DisableTrigger(t)
set Dy=Dy+1
set Dx[Dy]=t
set DX[Dy]=O97()+60
if Dy>8000 then
call l5()
endif
endfunction
function RO7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="RO7"
call RK7(QA7(RP7,"hero"),R97(RP7,"state"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function RQ7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="RQ7"
call RM7(Q67(RP7,"hero"),R97(RP7,"state"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function RR7 takes unit hI,string Hh,real Hk returns nothing
local trigger t=CreateTrigger()
set LP4="AddHeroState"
call TriggerAddCondition(t,Condition(function RO7))
call TriggerRegisterTimerEvent(t,Hk,false)
call RI7(hI,Hh)
call QG7(GetHandleId(t),"hero",hI)
call QE7(GetHandleId(t),"state",Hh)
set t=null
endfunction
function RS7 takes trigger hI,string Hh,real Hk returns nothing
local trigger t=CreateTrigger()
set LP4="LcTriggerVersion"
call TriggerAddCondition(t,Condition(function RQ7))
call TriggerRegisterTimerEvent(t,Hk,false)
call RJ7(hI,Hh)
call QI7(GetHandleId(t),"hero",hI)
call QE7(GetHandleId(t),"state",Hh)
set t=null
endfunction
function RT7 takes group g returns integer
set bj_groupCountUnits=0
call ForGroup(g,function CountUnitsInGroupEnum)
return bj_groupCountUnits
endfunction
function RU7 takes force RV7,force RW7 returns force
local integer RX7=0
set LP4="ForceAddForce"
loop
exitwhen RX7>$B
if IsPlayerInForce(Player(RX7),RV7)then
call ForceAddPlayer(RW7,Player(RX7))
endif
set RX7=RX7+1
endloop
return RW7
endfunction
function RY7 takes unit MQ7,string RZ7,player RA7 returns nothing
local integer RX7=0
local integer RB7=0
local unit RC7=null
local real R37=0
local string R67=""
local string RL7=""
set LP4="aiSendMsgToPlayers_Sub"
set RX7=GetPlayerId(RA7)
set RC7=G7[RX7]
if MQ7!=null then
set RB7=GetPlayerId(GetOwningPlayer(MQ7))
else
set RB7=$F
endif
if not(RB7==0 or RB7==6 or RB7==$F)then
if RC7!=null and GetWidgetLife(RC7)>.405 and MQ7!=null then
set R37=N37(MQ7,RC7)
if R37<=$5DC then
set R67=""
elseif R37<=3000. then
set R67="|c00c0c0c0"
else
set R67="|c00a0a0a0"
endif
endif
set RL7="|r"+P[RB7]+KY4[RB7]+"|r: "+R67+RZ7+"|r"
elseif RB7==GetPlayerId(Y7[0])then
set RL7="[AI] "+P[RB7]+"The Sentinel|r: "+RZ7
elseif RB7==GetPlayerId(Z7[0])then
set RL7="[AI] "+P[RB7]+"The Scourge|r: "+RZ7
elseif RB7==$C then
set RL7="[AI]: "+RZ7+"|r"
endif
if B04[RX7]and RA7==GetLocalPlayer()then
call DisplayTimedTextToPlayer(RA7,0,0,$A,RL7)
endif
set RC7=null
set R67=""
endfunction
function R17 takes group R07,string RL7,force R57 returns nothing
local integer RX7=0
local unit MQ7=null
local string R27="|r"
local integer i=1
set LP4="aiSendMsgToPlayers_Multi"
loop
exitwhen i>$A
set MQ7=G7[GetPlayerId(OW7(i))]
if IsUnitInGroup(MQ7,R07)then
call GroupRemoveUnit(R07,MQ7)
set RX7=GetPlayerId(GetOwningPlayer(MQ7))
if R27!="|r" then
set R27=R27+", "
endif
set R27=R27+P[RX7]+KY4[RX7]+"|r"
endif
set i=i+1
endloop
loop
set MQ7=FirstOfGroup(R07)
exitwhen MQ7==null
call GroupRemoveUnit(R07,MQ7)
set RX7=GetPlayerId(GetOwningPlayer(MQ7))
if R27!="|r" then
set R27=R27+", "
endif
set R27=R27+P[RX7]+KY4[RX7]+"|r"
endloop
set R27=R27+": "
if(IsPlayerInForce(GetLocalPlayer(),R57))then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,R27)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,"      - "+RL7)
endif
endfunction
function R_7 takes nothing returns nothing
local timer S47=GetExpiredTimer()
local force S77=null
local integer RX7=1
local unit MQ7=null
local group R07=null
local integer S87=GetHandleId(S47)
local string RL7=""
set LP4="R_7"
if R87(S87,"Personal")then
set S77=RF7(S87,"Target")
set RL7=R97(S87,"SubTag")
set MQ7=QA7(S87,"Owner")
loop
exitwhen RX7>$B
if IsPlayerInForce(Player(RX7),S77)then
if RL7==" " then
call DisplayTimedTextToPlayer(Player(RX7),0,0,$A,RL7)
else
call RY7(MQ7,RL7,Player(RX7))
endif
endif
set RX7=RX7+1
endloop
call Q47(S87)
call DestroyTimer(S47)
else
set RL7=R97(S87,"SubTag")
set S87=StringHash("cAI|Re"+RL7)
set S77=RF7(S87,"Target")
set R07=QL7(S87,"Owner")
if R47(S87,"CountDn")==0 then
call PauseTimer(S47)
if RT7(R07)==1 then
set MQ7=FirstOfGroup(R07)
loop
exitwhen RX7>$B
if IsPlayerInForce(Player(RX7),S77)then
call RY7(MQ7,RL7,Player(RX7))
endif
set RX7=RX7+1
endloop
else
call R17(R07,RL7,S77)
endif
call DestroyGroup(R07)
call Q47(S87)
call DestroyTimer(S47)
else
call Q97(S87,"CountDn",R47(S87,"CountDn")-1)
endif
endif
set R07=null
set S77=null
endfunction
function S97 takes unit MQ7,force S77,string RL7 returns nothing
local force SD7=null
local group SE7=null
local timer S47=null
local integer RX7=1
local boolean PN7=true
local boolean SF7=false
local integer S87=0
set LP4="aiSendMsgToPlayers"
if MQ7==null then
set MQ7=KT4[bj_forLoopAIndex]
endif
set S87=StringHash("cAI|Re"+RL7)
set SD7=RF7(S87,"Target")
if SD7==null and RL7!=" " then
set SF7=true
set SD7=RU7(S77,CreateForce())
call QX7(S87,"Target",SD7)
set S47=CreateTimer()
call QE7(GetHandleId(S47),"SubTag",RL7)
set SE7=CreateGroup()
call GroupAddUnit(SE7,MQ7)
call QP7(S87,"Owner",SE7)
else
if RL7==" " then
set PN7=false
else
set PN7=true
set RX7=1
loop
exitwhen RX7>$B
if IsPlayerInForce(Player(RX7),S77)then
if not IsPlayerInForce(Player(RX7),SD7)then
set PN7=false
set RX7=$B
endif
endif
set RX7=RX7+1
endloop
endif
if PN7 then
set SE7=QL7(S87,"Owner")
call GroupAddUnit(SE7,MQ7)
else
set SF7=true
set S47=CreateTimer()
set S87=GetHandleId(S47)
call QE7(S87,"SubTag",RL7)
set SD7=RU7(S77,CreateForce())
call QX7(S87,"Target",SD7)
call QG7(S87,"Owner",MQ7)
call QF7(S87,"Personal",true)
endif
endif
if SF7 then
if RL7==" " then
call TimerStart(S47,.1,false,function R_7)
else
call TimerStart(S47,.01,true,function R_7)
endif
endif
set SD7=null
set SE7=null
endfunction
function SG7 takes force S77,real x,real y,integer O5 returns nothing
if(IsPlayerInForce(GetLocalPlayer(),S77))then
if GetAllyColorFilterState()==2 then
call PingMinimapEx(x,y,5.,48,$E6,$B9,true)
else
call PingMinimapEx(x,y,5.,KZ4[O5],KA4[O5],KB4[O5],true)
endif
endif
endfunction
function SH7 takes unit MQ7,force S77 returns nothing
if MQ7!=null then
if GetUnitState(MQ7,UNIT_STATE_LIFE)>0 then
if(IsPlayerInForce(GetLocalPlayer(),S77))then
call PingMinimap(GetUnitX(MQ7),GetUnitY(MQ7),5.)
endif
else
if IsUnitAlly(MQ7,Y7[0])then
set MQ7=IY4
else
set MQ7=JZ4
endif
if(IsPlayerInForce(GetLocalPlayer(),S77))then
call PingMinimap(GetUnitX(MQ7),GetUnitY(MQ7),5.)
endif
endif
endif
endfunction
function SI7 takes unit MQ7,string RL7 returns nothing
local integer O5=1
local real NC7
set LG4=CreateForce()
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if IsUnitAlly(MQ7,Player(O5))then
if G7[O5]==null or GetWidgetLife(G7[O5])<.405 then
call ForceAddPlayer(LG4,Player(O5))
else
set NC7=N37(MQ7,G7[O5])
if NC7<=3000. then
call ForceAddPlayer(LG4,Player(O5))
endif
endif
endif
set O5=O5+1
endloop
call S97(MQ7,LG4,RL7)
call SH7(MQ7,LG4)
call DestroyForce(LG4)
set LG4=null
endfunction
function SJ7 takes unit it,boolean J2 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="(aiRetreat_J1)"+LP4
if((not Id(O5))or(J2))then
if(GetUnitTypeId(it)!=1211117642)then
set G0[32+O5]=true
if(not GZ[$A0+O5])and(GetUnitLifePercent(it)<30)then
call SI7(it,"Retreating")
endif
set h4[O5]=null
set hq[512+O5]=.0
set GZ[$80+O5]=false
set GZ[$A0+O5]=true
endif
if(is(it))then
call PV7(it,$D0012,h9[O5])
if(PD7(it,SU[B0]))then
call UnitUseItem(it,bj_lastCreatedItem)
endif
endif
endif
endfunction
function kD takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110456148)>0)or(GetUnitAbilityLevel(u,1110456118)>0)or(GetUnitAbilityLevel(u,1110455864)>0)or(GetUnitAbilityLevel(u,1112041075)>0)or(GetUnitAbilityLevel(u,1110454347)>0)or(GetUnitAbilityLevel(u,1110454833)>0)or(GetUnitAbilityLevel(u,1110454609)>0)or(GetUnitAbilityLevel(u,1110455097)>0)or(GetUnitAbilityLevel(u,1093677130)>0)or(GetUnitAbilityLevel(u,1093684052)>0)or(GetUnitAbilityLevel(u,1093677617)>0)or(GetUnitAbilityLevel(u,1112504171)>0))
endfunction
function SK7 takes unit it returns string
if(IsUnitAlly(it,Y7[0]))then
return"Sent"
else
return"Scrg"
endif
endfunction
function SM7 takes nothing returns boolean
local integer O5=R47(GetHandleId(GetTriggeringTrigger()),"pID")
local integer SN7=GetPlayerId(GetOwningPlayer(h4[O5]))
if(GetWidgetLife(G7[O5])<.405)or(Bz>hq[608+O5])or(h4[O5]==null)or(GetWidgetLife(h4[O5])<.405)or(eY[32+SN7]<=0)then
call DisableTrigger(GetTriggeringTrigger())
return false
elseif(IsUnitVisible(h4[O5],Player(O5)))then
if OV7(G7[O5])then
call IssueTargetOrderById(G7[O5],$D000F,h4[O5])
endif
call DisableTrigger(GetTriggeringTrigger())
return false
endif
if is(G7[O5])then
if(((IsVisibleToPlayer(GetUnitX(h4[O5]),GetUnitY(h4[O5]),Player(O5)))and(not IsUnitHidden(h4[O5])))or((eY[32+SN7]<2)and(kD(h4[O5]))))then
if(PD7(G7[O5],SU[S5]))then
call UnitUseItem(G7[O5],bj_lastCreatedItem)
elseif(PD7(G7[O5],SU[BC]))and(N37(G7[O5],h4[O5])<=600)then
call UnitUseItem(G7[O5],bj_lastCreatedItem)
elseif(PD7(G7[O5],SU[VC]))and((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))then
call UnitUseItemPoint(G7[O5],bj_lastCreatedItem,GetUnitX(h4[O5]),GetUnitY(h4[O5]))
else
if(not R87(Q_4,SK7(G7[O5])+"|W"))then
call QF7(Q_4,SK7(G7[O5])+"|W",true)
endif
call DisableTrigger(GetTriggeringTrigger())
return false
endif
endif
if eY[464+SN7]==$D0012 or eY[464+SN7]==$D0003 or eY[464+SN7]==$D0016 then
call IssuePointOrderById(G7[O5],$D0012,I2R(eY[480+SN7]),I2R(eY[496+SN7]))
else
call PV7(G7[O5],$D0012,h4[O5])
endif
endif
return false
endfunction
function J3 takes unit it,boolean J2 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
set LP4="(J3)"+LP4
if(O37(it))then
if(J2)then
if(not Id(O5))then
call SJ7(it,true)
elseif((OA7(h4[O5]))and(GetUnitAbilityLevel(h4[O5],1110454854)==0))then
set LP4="(J3a)"+LP4
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
else
call SJ7(it,false)
endif
elseif(G0[272+O5]or is(it))and((J2)or(((not GZ[$80+O5])or((GetUnitCurrentOrder(it)!=$D000F)and(GetUnitCurrentOrder(it)!=$D0019)))and(iU(it))))then
if((G0[O5])or(G0[48+O5])or(not G0[$80+O5]))then
set LP4="(J3b)"+LP4
set J4=PV7(it,$D0012,h9[O5])
endif
if(h4[96+O5]!=null)and(GetUnitTypeId(h4[96+O5])==1966092371)then
set LP4="(J3c)"+LP4
set J4=IssueTargetOrderById(it,$D000F,h4[96+O5])
endif
if((not J4)and(h4[O5]!=null)and(OA7(h4[O5]))and(GetUnitAbilityLevel(h4[O5],1110454854)==0))then
if IsUnitVisible(h4[O5],GetOwningPlayer(it))then
set bj_lastLoadedUnit=it
if R87(GetHandleId(h4[O5]),"XMarked")then
call MoveLocation(HA,R77(GetHandleId(h4[O5]),"AI|XMark|X"),R77(GetHandleId(h4[O5]),"AI|XMark|Y"))
if(not IsUnitInRangeLoc(h4[O5],HA,600.))then
set LP4="(J3d)"+LP4
set J4=IssuePointOrderByIdLoc(it,$D0012,HA)
else
set LP4="(J3e)"+LP4
set J4=IssueTargetOrderById(it,$D000F,h4[O5])
endif
elseif RG7(it,"AI|Lasso")then
set LP4="(J3f)"+LP4
set J4=IssueTargetOrderById(it,$D0012,h9[O5])
elseif(GetUnitTypeId(it)==1164666213 and GetHeroLevel(it)>=6)and(eY[320+O5]>=0)and(not IsUnitInRange(it,h4[O5],300))and((GetUnitLifePercent(it)>80)or(GetUnitLifePercent(it)>(GetUnitLifePercent(h4[O5])+30)))and(GetUnitManaPercent(it)>20)and(h4[304+O5]==null)and(P87(900,h4[O5],Condition(function P97))==0)then
set LP4="(J3g)"+LP4
set J4=IssueTargetOrderById(it,$D0012,h4[O5])
else
set LP4="(J3h)"+LP4
set J4=IssueTargetOrderById(it,$D000F,h4[O5])
endif
set hq[608+O5]=Bz+10.
elseif hq[608+O5]>Bz and eY[32+GetPlayerId(GetOwningPlayer(h4[O5]))]>0 then
if not IsVisibleToPlayer(GetUnitX(h4[O5]),GetUnitY(h4[O5]),GetOwningPlayer(it))then
call EnableTrigger(Q14[96+O5])
set LP4="(J3i)"+LP4
set J4=PV7(it,$D0012,h4[O5])
endif
else
call DisableTrigger(Q14[96+O5])
endif
endif
set DK7=LoadUnitHandle(C7,(GetHandleId(it)),(652))
set DM7=QA7((GetHandleId(it)),"AI|TetherSource")
if(J4)then
elseif(DK7!=null)and(not IsUnitInRange(it,DK7,700)and(IsUnitType(DK7,UNIT_TYPE_HERO)))then
set LP4="(J3j)"+LP4
call PV7(it,$D0012,DK7)
elseif(DM7!=null)and(not IsUnitInRange(it,DM7,700))then
set LP4="(J3k)"+LP4
call PV7(it,$D0012,DM7)
elseif((eY[O5]>=9))then
if eY[272+O5]<=2 then
if((G0[$B0+O5])or(h8[48+O5]!=h8[32+O5]))then
set LP4="(J3m)"+LP4
call PV7(it,$D000F,h8[48+O5])
else
set LP4="(J3n)"+LP4
call PV7(it,$D0012,h9[O5])
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
elseif GZ[$A0+O5]or(not G0[$80+O5])then
set LP4="(J3o)"+LP4
call PV7(it,$D0012,h9[O5])
else
set LP4="(J3p)"+LP4
call PV7(it,$D000F,h8[O5])
endif
endif
endfunction
function SO7 takes unit it returns nothing
if((PD7(it,SU[Z3]))and(UnitUseItem(it,bj_lastCreatedItem)))then
call NX7(.3)
endif
if((PD7(it,SU[R1]))and(UnitUseItem(it,bj_lastCreatedItem)))then
call NX7(.3)
endif
call IssueImmediateOrderById(it,$D0004)
endfunction
function SP7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)) and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=null
endfunction
function SQ7 takes unit it,unit OC7 returns boolean
local item SR7=null
local boolean SS7=false
local item ST7=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean SU7=(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)
local boolean SV7=false
local boolean SW7=false
local real SX7=0
local real SY7=0
local real SZ7=0
set LP4="aiUseTele_uZv"
if QA7((GetHandleId(it)),"AI|TetherSource")!=null then
return false
elseif(GetUnitTypeId(it)==1211117642)then
return false
endif
if(OC7==IY4 or OC7==JZ4)then
if G0[352+O5]or(N37(it,OC7)<$BB8)then
return false
endif
elseif(N37(it,OC7)<$7D0)then
return false
endif
if OC7==IY4 or OC7==JZ4 then
set SY7=GetUnitX(OC7)
set SZ7=GetUnitY(OC7)
else
set bj_lastLoadedUnit=PL7(it)
set SX7=Atan2(GetUnitY(bj_lastLoadedUnit)-GetUnitY(OC7),GetUnitX(bj_lastLoadedUnit)-GetUnitX(OC7))+GetRandomReal(-.4,.4)
set SY7=GetUnitX(OC7)+500.*Cos(SX7)
set SZ7=GetUnitY(OC7)+500.*Sin(SX7)
endif
if((GetUnitAbilityLevel(it,1093677391)>0)and(Bz>TB4[32+O5]))then
if IssuePointOrderById(it,$D022D,SY7,SZ7)then
return true
endif
endif
if((GetUnitAbilityLevel(it,1093685808)>0)and(Bz>TB4[O5]))then
if IssuePointOrderById(it,$D0278,SY7,SZ7)then
return true
endif
endif
if not(eY[$E0+O5]<R2I(Bz)and GetUnitState(it,UNIT_STATE_MANA)>75)then
return false
endif
if not IsUnitType(OC7,UNIT_TYPE_STRUCTURE)then
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=P47(2000.,PU7(OC7),Condition(function SP7))
set SW7=((bj_lastLoadedUnit!=null)and(N37(it,OC7)>N37(bj_lastLoadedUnit,OC7)))
else
set SW7=true
endif
if(SU7 and T54[O5])then
if(PD7(it,GetItemTypeId(T_4[O5])))then
call DisableTrigger(H84)
call UnitRemoveItem(it,PH7(it,GetItemTypeId(T_4[O5])))
call RemoveItem(T_4[O5])
call EnableTrigger(H84)
endif
if(T24[O5]!=null)then
call NX7(.2)
call UnitAddItem(it,T24[O5])
endif
set T54[O5]=false
set T_4[O5]=null
set T24[O5]=null
endif
if(PD7(it,SU[XC]))and SW7 then
if((GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitAbilityLevel(it,1110455864)==0)and(GetUnitAbilityLevel(it,1110454347)==0)and(GetUnitAbilityLevel(it,1110455097)==0))then
call SO7(it)
set SV7=UnitUseItemPoint(it,PH7(it,SU[XC]),SY7,SZ7)
endif
elseif(PD7(it,SU[E6]))then
call SO7(it)
set SV7=UnitUseItemPoint(it,PH7(it,SU[E6]),GetUnitX(OC7),GetUnitY(OC7))
elseif(not G97[O5])then
if(GetUnitTypeId(it)==1211117642 or IsUnitIllusion(it))or(not SW7)then
return false
endif
set SS7=false
if((not PE7(it)))then
set SS7=true
elseif(PD7(it,SU[PC]))then
set ST7=bj_lastCreatedItem
set SS7=true
elseif(PD7(it,SU[QC]))then
set ST7=bj_lastCreatedItem
set SS7=true
elseif(PD7(it,SU[VC]))then
set ST7=bj_lastCreatedItem
set SS7=true
endif
if SS7 then
if ST7!=null then
call OJ7(ST7)
endif
set SR7=CreateItem(SU[XC],GetUnitX(it),GetUnitY(it))
set SS7=UnitAddItem(it,SR7)
call NX7(.3)
else
if(PD7(it,SU[EV]))then
set U44[O5]=bj_lastCreatedItem
set SS7=true
endif
if SS7 then
call DisableTrigger(H84)
call UnitRemoveItem(it,U44[O5])
call SetItemPosition(U44[O5],9999,-9999)
call EnableTrigger(H84)
set SR7=CreateItem(SU[XC],GetUnitX(it),GetUnitY(it))
set SS7=UnitAddItem(it,SR7)
set U84[O5]=true
call NX7(.3)
endif
endif
set ST7=null
if(not SS7)then
call OJ7(SR7)
call NX7(.2)
if((not PE7(it)))then
call UnitAddItem(it,U44[O5])
set U84[O5]=false
set U44[O5]=null
endif
endif
if(PD7(it,SU[XC]))then
call SO7(it)
set SS7=UnitUseItemPoint(it,PH7(it,SU[XC]),SY7,SZ7)
call NX7(.5)
set SR7=null
set SV7=SS7
if not SV7 then
call NX7(.01)
set SV7=(eY[$E0+O5]>R2I(Bz)+1)
endif
endif
endif
if SV7 then
set eY[$E0+O5]=R2I(Bz)+67
set eY[$D0+O5]=0
set h8[$90+O5]=null
else
if not SS7 then
set eY[$D0+O5]=0
set h8[$90+O5]=null
endif
if U44[O5]!=null then
call DisableTrigger(H84)
call RemoveItem(PH7(it,SU[XC]))
call UnitAddItem(it,U44[O5])
call EnableTrigger(H84)
set U44[O5]=null
set U84[O5]=false
endif
endif
return SV7
endfunction
function SA7 takes integer O5,unit j5,integer o6 returns nothing
call DisableTrigger(Q14[O5])
if((not O37(j5))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5])and(h4[O5]!=null)and(OA7(h4[O5]))and(IsUnitVisible(h4[O5],GetOwningPlayer(j5))))then
call IssueTargetOrderById(j5,$D000F,h4[O5])
set GZ[48+O5]=true
else
call J3(j5,true)
endif
call EnableTrigger(Q14[O5])
if(o6!=0)then
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),o6,not(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER))
endif
endfunction
function J6 takes integer O5,unit j5,integer o6,integer n6 returns nothing
call SA7(O5,j5,o6)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),n6,not((GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER)))
endfunction
function J7 takes integer O5,unit j5,integer o6 returns nothing
call DisableTrigger(Q14[O5])
if((not O37(j5))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5])and(h4[O5]!=null)and(OA7(h4[O5]))and(IsUnitVisible(h4[O5],GetOwningPlayer(j5))))then
call IssueTargetOrderById(j5,$D000F,h4[O5])
set GZ[48+O5]=true
else
call J3(j5,true)
endif
call EnableTrigger(Q14[O5])
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),o6,not(GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER))
endfunction
function J8 takes integer O5,boolean J9 returns boolean
set GZ[O5]=false
return J9
endfunction
function SB7 takes unit u returns boolean
if(IsUnitAlly(u,Y7[0]))then
return(IsUnitInRange(u,IY4,1100.))
else
return(IsUnitInRange(u,JZ4,1100.))
endif
endfunction
function kA takes unit IB,unit m5,real kb returns boolean
if(IsUnitAlly(m5,Y7[0]))then
return(N37(IB,h7[0])-N37(m5,h7[0]))>kb
else
return(N37(IB,h7[100])-N37(m5,h7[100]))>kb
endif
endfunction
function kB takes boolean J4,group jU returns integer
local unit it
local integer kc=0
local boolean kC=false
local boolean kd=false
set LP4="kB"
loop
set it=FirstOfGroup(jU)
exitwhen(it==null)
if(GetUnitTypeId(it)==1211117641)then
set kc=kc+1
set kd=true
elseif(GetUnitTypeId(it)!=1211117642)then
set kc=kc+1
elseif(not kC)then
set kC=true
endif
call GroupRemoveUnit(jU,it)
endloop
if((kC)and((not kd)or(J4)))then
set kc=kc+1
endif
return kc
endfunction
function ke takes unit u returns boolean
return((GetUnitAbilityLevel(u,1093685838)>0)or(GZ[256+GetPlayerId(GetOwningPlayer(u))]))
endfunction
function kE takes string kf,string kF returns integer
local integer kg=StringLength(kf)
local integer kG=0
set LP4="kE"
loop
exitwhen kg<=kG
if(SubString(kf,kg,kg+1)==kF)then
return kg
endif
set kg=kg-1
endloop
return-1
endfunction
function kh takes string kf returns integer
local integer kg=0
local integer kG=StringLength(kf)
set LP4="kh"
loop
exitwhen kg>=kG
if(SubString(kf,kg,kg+1)==",")then
return kg
endif
set kg=kg+1
endloop
return-1
endfunction
function kj takes nothing returns nothing
set GT=false
endfunction
function kJ takes real x,real y returns boolean
set GT=true
call SetRect(He,x-160.,y-160.,x+160.,y+160.)
call EnumDestructablesInRect(He,Q54,function kj)
return GT
endfunction
function kk takes unit it,real IW,unit r returns location
local integer kK=0
local real kl=Atan2(GetUnitY(r)-GetUnitY(it),GetUnitX(r)-GetUnitX(it))
set LP4="kk"
loop
if(kJ(GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl))
return HB
endif
set kK=kK+1
set IW=IW-50.
exitwhen(kK>5)
endloop
return null
endfunction
function kL takes unit it,unit m5,real km returns location
local real IW=N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5))+km
local real kl=0
local integer kK=0
set LP4="kL"
set kK=GetPlayerId(GetOwningPlayer(m5))
set kl=Atan2(GetUnitY(h9[kK])-GetUnitY(m5),GetUnitX(h9[kK])-GetUnitX(m5))
set kK=0
loop
if(kJ(GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+IW*Cos(kl),GetUnitY(it)+IW*Sin(kl))
return HB
endif
set kK=kK+1
set IW=IW-50.
exitwhen(kK>5)
endloop
return null
endfunction
function SC7 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1093678162)==0)and(GetUnitAbilityLevel(it,1097625443)==0))
endfunction
function S37 takes unit it returns boolean
return((GetUnitAbilityLevel(it,1093678162)==0)and(GetUnitAbilityLevel(it,1097625443)==0)and(GetUnitTypeId(it)!=1970497636)and(GetUnitTypeId(it)!=1848652113)and(GetUnitTypeId(it)!=1848652114))
endfunction
function S67 takes unit u returns boolean
return(IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER))
endfunction
function SL7 takes unit x6 returns integer
return(GetItemTypeId(UnitItemInSlot(x6,GetIssuedOrderId()-$D0028)))
endfunction
function S17 takes integer Iz returns boolean
return((Iz==1093679446)or(Iz==1095263841)or(Iz==1093681972)or(Iz==1093685065)or(Iz==1093677622)or(Iz==1093682265)or(Iz==1093684314)or(Iz==1093685582))
endfunction
function kP takes integer i1 returns boolean
return((i1==1429221424)or(i1==1160785972)or(i1==1430468144)or(i1==1430467634)or(i1==1432642913)or(i1==1432510828)or(i1==1315334514)or(i1==1332109682)or(i1==1429221456)or(i1==1311780946)or(i1==1211117624)or(i1==1160785973)or(i1==1214345830)or(i1==1315007329)or(i1==1215723364)or(i1==1164799855)or(i1==1212365106)or(i1==1432580716)or(i1==1333027688)or(i1==1311781185)or(i1==1332179560)or(i1==1214344551)or(i1==1311781206)or(ND7(i1,5)))
endfunction
function kq takes integer i1 returns boolean
return(not ND7(i1,5))
endfunction
function kQ takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110455620)>0)or(GetUnitAbilityLevel(u,1110455629)>0)or(GetUnitAbilityLevel(u,1110455630)>0)or(GetUnitAbilityLevel(u,1110455631)>0))
endfunction
function kr takes unit u returns boolean
return((GetUnitAbilityLevel(u,1110456120)>0)or(GetUnitAbilityLevel(u,1113943649)>0)or(GetUnitAbilityLevel(u,1113943655)>0)or(GetUnitAbilityLevel(u,1110459185)>0))
endfunction
function S07 takes integer Iz returns boolean
return((Iz==SU[C0])or(Iz==SU[F5])or(Iz==SU[G5])or(Iz==SU[J5])or(Iz==SU[M5]))
endfunction
function ks takes integer Iz returns boolean
return((Iz==SU[N5])or(Iz==SU[R5])or(Iz==SU[S5]))
endfunction
function kS takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
set LP4="kS"
if(kt==4)then
return 1093678925
elseif(kt==3)then
return 1093678922
elseif(kt==2)then
return 1093678921
elseif(kt==1)then
return 1093678920
else
return 1093685302
endif
endfunction
function kT takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
set LP4="kT"
if(kt==4)then
return 1093678904
elseif(kt==3)then
return 1093678900
elseif(kt==2)then
return 1093678898
elseif(kt==1)then
return 1093678670
else
return 1093677645
endif
endfunction
function S57 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093677635)
if(kt==4)then
return 1093678158
elseif(kt==3)then
return 1093678157
elseif(kt==2)then
return 1093678154
elseif(kt==1)then
return 1093677898
else
return 1093678899
endif
endfunction
function S27 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
set LP4="aiOgre_Fireblast"
if(kt==3)then
return 1093679172
elseif(kt==2)then
return 1093679169
elseif(kt==1)then
return 1093679161
else
return 1093678167
endif
endfunction
function S_7 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
set LP4="aiOgre_Ignite"
if(kt==3)then
return 1093677126
elseif(kt==2)then
return 1093677396
elseif(kt==1)then
return 1093677111
else
return 1093677361
endif
endfunction
function T47 takes unit u returns integer
local integer kt=GetUnitAbilityLevel(u,1093679160)
set LP4="aiOgre_Bloodlust"
if(kt==3)then
return 1093679177
elseif(kt==2)then
return 1093679175
elseif(kt==1)then
return 1093679174
else
return 1093679155
endif
endfunction
function T77 takes integer Iz returns integer
if((Iz==SU[OW])or(Iz==SU[PC])or(Iz==SU[QC])or(Iz==SU[WC])or(Iz==SU[XC]))then
return 100
elseif((Iz==SU[CV])or(Iz==SU[SY])or(Iz==SU[TW])or(Iz==SU[MV])or(Iz==SU[ZX]))then
return $96
elseif((Iz==SU[ZA])or(Iz==SU[BA]))then
return $E1
elseif((Iz==SU[UY])or(Iz==SU[AX])or(Iz==SU[VC])or(Iz==SU[DZ]))then
return 350
elseif((Iz==SU[EV])or(Iz==SU[NV])or(Iz==SU[JV])or(Iz==SU[GY])or(Iz==SU[W6])or(Iz==SU[A6])or(Iz==SU[DL])or(Iz==SU[B3]))then
return 450
elseif((Iz==SU[QV])or(Iz==SU[TV])or(Iz==SU[NX])or(Iz==SU[FV])or(Iz==SU[LV])or(Iz==SU[Y3]))then
return 650
elseif((Iz==SU[HW])or(Iz==SU[UW])or(Iz==SU[GX])or(Iz==SU[OV])or(Iz==SU[ZY])or(Iz==SU[YX])or(Iz==SU[OZ])or(Iz==SU[BV])or(Iz==SU[Z3]))then
return 950
elseif((Iz==SU[SV])or(Iz==SU[WX])or(Iz==SU[SX])or(Iz==SU[NZ]))then
return $4B0
elseif((Iz==SU[UV])or(Iz==SU[YW])or(Iz==SU[RX])or(Iz==SU[F6])or(Iz==SU[W3])or(Iz==SU[ZL])or(Iz==SU[D94])or(Iz==SU[F44]))then
return $5DC
elseif((Iz==SU[QW])or(Iz==SU[N6])or(Iz==SU[V6])or(Iz==SU[O1])or(Iz==SU[ZL])or(Iz==SU[H1])or(Iz==SU[OL])or(Iz==SU[HL])or(Iz==SU[DF4])or(Iz==SU[DI4]))then
return $7D0
elseif((Iz==SU[HZ])or(Iz==SU[XV])or(Iz==SU[NW])or(Iz==SU[E6])or(Iz==SU[X1])or(Iz==SU[DF4])or(Iz==SU[R1]))then
return $9C4
elseif((Iz==SU[VW])or(Iz==SU[ZW])or(Iz==SU[WL])or(Iz==SU[RL])or(Iz==SU[P1])or(Iz==SU[LL])or(Iz==SU[C0])or(Iz==SU[N5]))then
return $BB8
elseif((Iz==SU[AV])or(Iz==SU[AL])or(Iz==SU[Q1]))then
return $DAC
elseif((Iz==SU[HY])or(Iz==SU[B0])or(PI7(Iz))or(Iz==SU[R5])or(Iz==1869375847))then
return $FA0
elseif((Iz==SU[U1])or(Iz==SU[F5]))then
return 4500
elseif((Iz==SU[T1])or(Iz==SU[S5])or(Iz==SU[V1])or(Iz==SU[D44])or(Iz==SU[DQ4]))then
return 5000
elseif((Iz==SU[X0])or(Iz==SU[Y0])or(Iz==SU[G5])or(Iz==SU[T5])or(Iz==SU[P2])or(Iz==SU[L5])or(Iz==SU[F2])or(Iz==SU[Z2])or(Iz==SU[DH4]))then
return 5500
elseif((Iz==SU[DG4])or(Iz==SU[J5])or(Iz==SU[C5])or(Iz==SU[X2])or(Iz==SU[S2])or(Iz==1936683571)or(Iz==1936683572)or(Iz==1936683573)or(Iz==1936683574)or(Iz==1227895094)or(Iz==1227894838))then
return 6000
elseif((Iz==SU[M5])or(Iz==SU[W2])or(Iz==SU[T2])or(Iz==SU[DD4]))then
return 7000
elseif(Iz==SU[A5])then
return 8000
endif
return 500
endfunction
function B6 takes trigger kW,playerunitevent kx returns nothing
call TriggerRegisterPlayerUnitEvent(kW,Y7[1],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Y7[2],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Y7[3],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Y7[4],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Y7[5],kx,Q54)
endfunction
function c6 takes trigger kW,playerunitevent kx returns nothing
call TriggerRegisterPlayerUnitEvent(kW,Z7[1],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Z7[2],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Z7[3],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Z7[4],kx,Q54)
call TriggerRegisterPlayerUnitEvent(kW,Z7[5],kx,Q54)
endfunction
function ky takes trigger kW,playerunitevent kx returns nothing
call B6(kW,kx)
call c6(kW,kx)
endfunction
function T87 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))!=null
endfunction
function T97 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(OA7(GetFilterUnit()))and(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)and(N17(GetFilterUnit())==bj_forLoopBIndex))!=null
endfunction
function TD7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit))))!=null
endfunction
function TE7 takes unit I_7 returns boolean
local real x=GetUnitX(I_7)
local real y=GetUnitY(I_7)
if IsUnitAlly(I_7,Y7[0])then
return x<GetRectMaxX(GD)and x>GetRectMinX(GD)and y<GetRectMaxY(GD)and y>GetRectMinY(GD)
endif
return x<GetRectMaxX(FD)and x>GetRectMinX(FD)and y<GetRectMaxY(FD)and y>GetRectMinY(FD)
endfunction
function TF7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false and GetUnitAbilityLevel(GetFilterUnit(),1098282348)==0)and TE7(GetFilterUnit())==false)!=null
endfunction
function TG7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(OA7(GetFilterUnit())))!=null
endfunction
function TH7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(OA7(GetFilterUnit())))then
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))then
return true
elseif(not kD(GetFilterUnit()))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or(IsUnitInRange(GetFilterUnit(),GetTriggerUnit(),600.)))
else
return(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>2)
endif
endif
return false
endfunction
function TI7 takes nothing returns boolean
return((GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(OA7(GetFilterUnit()))and(not O37(GetFilterUnit())))!=null
endfunction
function TJ7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(S37(GetFilterUnit())))!=null
endfunction
function k0 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function TK7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function IsEnemyTowerInRangeAttacker takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function TorrentedKillableFilter takes nothing returns boolean
return O37(GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),1110456657)>0
endfunction
function k2 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(S37(GetFilterUnit())))
endfunction
function k3 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function TM7 takes nothing returns boolean
return((GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function TN7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitIllusion(GetFilterUnit()))and(GetFilterUnit()!=GetTriggerUnit())and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function k5 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetFilterUnit()!=GetTriggerUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))!=null
endfunction
function TO7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="TO7"
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function TP7 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and OA7(GetFilterUnit())and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function TQ7 takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and OA7(GetFilterUnit())and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function TR7 takes nothing returns boolean
return not IsUnitInRange(GetFilterUnit(),GetEnumUnit(),I07)
endfunction
function TS7 takes nothing returns boolean
local integer i=GetUnitTypeId(GetFilterUnit())
return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830
endfunction
function k6 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function TT7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)and P87(300,GetFilterUnit(),Condition(function TM7))==0)!=null
endfunction
function TU7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetUnitLifePercent(GetFilterUnit())<=40.)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function TV7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function TW7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function TX7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function TY7 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function k642 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function k65 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))))!=null
endfunction
function TZ7 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function TA7 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastCreatedUnit))))!=null
endfunction
function TB7 takes nothing returns boolean
return(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetWidgetLife(GetFilterUnit())>.405)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_SUMMONED)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function k7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitLifePercent(GetFilterUnit())<50.))!=null
endfunction
function TC7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitLifePercent(GetFilterUnit())<30.))!=null
endfunction
function k8 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function T37 takes nothing returns boolean
return(((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function k9 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit()))and(GetUnitState(GetFilterUnit(),UNIT_STATE_MANA)>200.))!=null
endfunction
function Ka takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit())))
endfunction
function KA takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function T67 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(S37(GetFilterUnit())))!=null
endfunction
function KA_Ally takes nothing returns boolean
return((not IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(S37(GetFilterUnit())))!=null
endfunction
function TL7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit))))then
if N37(GetFilterUnit(),bj_lastLoadedUnit)<=$FA then
if GetUnitLifePercent(GetFilterUnit())>L84 then
set IM4=GetFilterUnit()
set L84=GetUnitLifePercent(IM4)
endif
else
if GetUnitLifePercent(GetFilterUnit())>L94 then
set IN4=GetFilterUnit()
set L94=GetUnitLifePercent(IN4)
endif
endif
endif
return false
endfunction
function T17 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))and(J07(GetFilterUnit())>=1))!=null
endfunction
function T07 takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit())))and(J07(GetFilterUnit())>=1))!=null
endfunction
function IsUnitAllyHeroAttacking takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405))and J_7(GetFilterUnit()))!=null
endfunction
function T57 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function T27 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit())))!=null
endfunction
function T_7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))))!=null
endfunction
function U47 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))))!=null
endfunction
function U77 takes nothing returns nothing
local integer U87=P87(IM7,GetEnumUnit(),IN7)
local integer U97=P87(IM7,IH7,IN7)
if(IH7==null)or(U87>U97)then
set IH7=GetEnumUnit()
endif
endfunction
function UD7 takes real UE7,real UF7,unit J57,integer UG7,boolexpr Ig,boolexpr UH7 returns unit
set LP4="GetEnemyMaxiumCountUnitInRangeOfUnit_Generic"
set IF7=UG7
set IM7=UF7
set IN7=UH7
set IH7=null
call GroupClear(IG7)
call GroupEnumUnitsInRange(IG7,GetUnitX(J57),GetUnitY(J57),UE7,Ig)
call GroupRemoveUnit(IG7,J57)
call ForGroup(IG7,function U77)
call DestroyBoolExpr(Ig)
if UH7!=null then
call DestroyBoolExpr(IN7)
endif
set IN7=null
set Ig=null
return IH7
endfunction
function UI7 takes unit UJ7,unit UK7 returns boolean
local integer UM7=GetHeroLevel(UJ7)
local integer UN7=GetHeroLevel(UK7)
local integer NE7=N87(GetUnitTypeId(UK7))
set LP4="EvaluateSplitTargetLESSTHAN"
if NE7==1 or NE7==2 then
return GetUnitLifePercent(UK7)>=GetUnitLifePercent(UJ7)and(UN7>$D)and(UM7>UN7 or IAbsBJ(UM7-UN7)<5)
endif
return GetUnitState(UK7,UNIT_STATE_LIFE)<=400 or GetUnitLifePercent(UK7)>=GetUnitLifePercent(UJ7)
endfunction
function UO7 takes nothing returns nothing
local integer U87=P87(350,GetEnumUnit(),Condition(function T_7))
local integer U97=P87(350,IH7,Condition(function T_7))
local integer UP7=P87(350,IH7,Condition(function T27))
local real UQ7=IK7
local integer UR7=P87(350,GetEnumUnit(),Condition(function T27))
local real US7=IK7
if(IH7==null)or(UR7>UP7)then
set IH7=GetEnumUnit()
elseif UR7==UP7 then
set IH7=MC7(US7>=UQ7 or U87>=U97,GetEnumUnit(),IH7)
endif
endfunction
function UT7 takes real UE7,unit J57,integer UG7,boolexpr Ig returns unit
set LP4="GetEnemyMaxiumCountUnitInRangeOfUnitCon"
set IF7=UG7
set IH7=null
call GroupClear(IG7)
call GroupEnumUnitsInRange(IG7,GetUnitX(J57),GetUnitY(J57),UE7,Ig)
call GroupRemoveUnit(IG7,J57)
call ForGroup(IG7,function UO7)
call DestroyBoolExpr(Ig)
set Ig=null
return IH7
endfunction
function UU7 takes nothing returns nothing
local unit J67=GetEnumUnit()
local unit UV7
local integer UW7=0
if(hy==null)or(UI7(hy,J67)and P87(350,J67,Condition(function T_7))>0)then
set UV7=UT7(350,J67,UW7,Condition(function TB7))
set UV7=MC7(UV7!=null,UV7,UT7(350,J67,UW7,Condition(function T57)))
if IsUnitType(UV7,UNIT_TYPE_HERO)then
set UV7=MC7(GetUnitLifePercent(UV7)>GetUnitLifePercent(J67),UV7,J67)
endif
set II7=MC7((UV7!=null),UV7,II7)
endif
set J67=null
set UV7=null
endfunction
function UX7 takes real UY7,unit UZ7 returns unit
local boolexpr Ig=Condition(function k6)
set LP4="SplitFindTargetHero"
set hy=null
set II7=null
set bj_lastLoadedUnit=UZ7
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(UZ7),GetUnitY(UZ7),UY7,Ig)
call GroupRemoveUnit(iA,UZ7)
call ForGroup(iA,function UU7)
call DestroyBoolExpr(Ig)
set Ig=null
set IJ7[GetPlayerId(GetOwningPlayer(UZ7))]=hy
return II7
endfunction
function UA7 takes unit JX7 returns unit
local boolexpr Ig=Condition(function U47)
set LP4="SplitLoadTargetHero"
set IH7=null
set bj_lastLoadedUnit=GetEnumUnit()
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(JX7),GetUnitY(JX7),350,Ig)
call GroupRemoveUnit(iA,JX7)
call ForGroup(iA,function UO7)
call DestroyBoolExpr(Ig)
set Ig=null
call JN7(GetUnitName(IH7))
return IH7
endfunction
function UB7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function UC7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((i1==1747993430)or(i1==1747993432)or(i1==1747993431)))
endfunction
function U37 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1970169187)or(i1==1966092338)or(i1==1701081721)or(i1==1697656919)))
endfunction
function U67 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function KB takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="KB"
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1970496880)or(i1==1970564964)or(i1==1700884333)or(i1==1700884325)))!=null
endfunction
function Kc takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<150.))!=null
endfunction
function UL7 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<250.))!=null
endfunction
function FindEnemyCreepTrig takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<250.))!=null
endfunction
function U17 takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<160.))!=null
endfunction
function U07 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>200.))!=null
endfunction
function U57 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>200.))!=null
endfunction
function KC takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))!=null
endfunction
function Kd takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))!=null
endfunction
function KD takes nothing returns boolean
if((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))or GetUnitTypeId(GetEnumUnit())==1433105516)and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==Player($C))))then
if((GetUnitTypeId(GetEnumUnit())==1433105516)or(not IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)))then
return((GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<150.)or(GetUnitLifePercent(GetFilterUnit())<35.))
elseif((GetUnitTypeId(GetEnumUnit())==1433168227)or(GetUnitTypeId(GetEnumUnit())==1160785972))then
return(GetUnitLifePercent(GetFilterUnit())>70.)
endif
endif
return false
endfunction
function U27 takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>30.)and(S37(GetFilterUnit()))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0])or(GetOwningPlayer(GetFilterUnit())==Player($C))))then
return(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<L84)
endif
return false
endfunction
function U_7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function V47 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())>40.)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function V77 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MELEE_ATTACKER))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetUnitLifePercent(GetFilterUnit())>65.)and(not IsUnitIllusion(GetFilterUnit())))!=null
endfunction
function V87 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetUnitLifePercent(GetFilterUnit())>65.)and(not IsUnitIllusion(GetFilterUnit())))!=null
endfunction
function Kf takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(OV7(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function V97 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<50.))!=null
endfunction
function VD7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<30.)and(OV7(GetFilterUnit())))!=null
endfunction
function IsUnitHeroAllyUnder70HPEnum takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<70.))!=null
endfunction
function VE7 takes nothing returns boolean
return ND7(GetUnitTypeId(GetFilterUnit()),E)
endfunction
function VF7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitLifePercent(GetFilterUnit())<99.)and(GetUnitTypeId(GetFilterUnit())!=1211117642))!=null
endfunction
function VG7 takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1697656915)or(i1==1697657137)or(i1==1697656914)or(i1==1697657145)or(i1==1966092366)or(i1==1966092356)or(i1==1966092365)or(i1==1966092372)))!=null
endfunction
function KG takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="KG"
if(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))then
if(GZ[272+GetPlayerId(GetOwningPlayer(GetFilterUnit()))])then
return(GetUnitUserData(GetFilterUnit())==1)
else
return(GetUnitUserData(GetFilterUnit())==0)
endif
endif
return false
endfunction
function VH7 takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1869901684))
endfunction
function aiIsTechiesMines takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314)or(i1==1869901684)or(i1==1311780943)or(i1==1311780944)or(i1==1311780945)or(i1==1311780942)))
endfunction
function VI7 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1868921189 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))
endfunction
function VJ7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(GetWidgetLife(GetFilterUnit())>.405)and((not LE4)or(GetUnitLifePercent(GetFilterUnit())>50)))then
set bj_forLoopAIndexEnd=Q[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]-U[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]
if(hy==null)or(bj_forLoopAIndex<bj_forLoopAIndexEnd)then
set hy=GetFilterUnit()
set bj_forLoopAIndex=bj_forLoopAIndexEnd
endif
endif
return false
endfunction
function VK7 takes real K1,unit it,boolean VM7 returns unit
local boolexpr Ig=Condition(function VJ7)
set hy=null
set bj_lastLoadedUnit=it
set bj_forLoopAIndex=0
set LE4=VM7
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(it),GetUnitY(it),K1,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function Kh takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1697657392))
endfunction
function KH takes nothing returns boolean
return((GetFilterUnit()!=GetAttacker())and(S37(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitInRange(GetAttacker(),GetFilterUnit(),800.)))
endfunction
function Ki takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))))!=null
endfunction
function KI takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))))!=null
endfunction
function Kj takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetFilterUnit()!=GetAttacker())and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(S37(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function KJ takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Kk takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetFilterUnit()!=GetAttacker())and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetAttacker())))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function KK takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((O37(GetFilterUnit()))or((GetUnitLifePercent(GetEnumUnit())-GetUnitLifePercent(GetFilterUnit()))>20.)))!=null
endfunction
function Kl takes nothing returns boolean
return((IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((GetUnitLifePercent(GetFilterUnit())<50.)or((GetUnitLifePercent(GetEnumUnit())-GetUnitLifePercent(GetFilterUnit()))>20.)))
endfunction
function KL takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetUnitTypeId(GetFilterUnit())==1211117642))!=null
endfunction
function Km takes nothing returns boolean
return(((GetUnitTypeId(GetFilterUnit())==1865429304)or(GetUnitTypeId(GetFilterUnit())==1865429042)or(GetUnitTypeId(GetFilterUnit())==1865429058))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function KM takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((GetUnitAbilityLevel(GetFilterUnit(),1113815395)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1113815346)>0)or(GetUnitCurrentOrder(GetFilterUnit())==$D0005)))!=null
endfunction
function Kn takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,GetFilterUnit(),false,false)==0))!=null
endfunction
function KN takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(kP(GetUnitTypeId(GetFilterUnit()))))!=null
endfunction
function Ko takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetFilterUnit()!=GetEnumUnit())and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))
endfunction
function KO takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(PD7(GetFilterUnit(),SU[VC]))and(X_4[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]!=1))!=null
endfunction
function KP_OLD takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(X_4[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]!=1))!=null
endfunction
function VN7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function Kq takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(GetFilterUnit()!=GetTriggerUnit()))!=null
endfunction
function KQ takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(not O37(GetFilterUnit())))!=null
endfunction
function Kr takes nothing returns boolean
if(T87())then
return GetUnitAbilityLevel(GetFilterUnit(),1112560453)>0
endif
return false
endfunction
function KR takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1865429043)
endfunction
function C6 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(IsUnitInForce(GetTriggerUnit(),QW4)))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Y7[0])))!=null
endfunction
function D6 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))!=null
endfunction
function VO7 takes nothing returns boolean
return(((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Y7[0])))
endfunction
function VP7 takes nothing returns boolean
return(((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)or(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))
endfunction
function VQ7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Y7[0])))!=null
endfunction
function Kt2 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Y7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]==3))!=null
endfunction
function VR7 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Z7[0])))!=null
endfunction
function KT2 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(IsUnitAlly(GetFilterUnit(),Z7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetFilterUnit()))]==3))!=null
endfunction
function VS7 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit())))!=null
endfunction
function VT7 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit())))!=null
endfunction
function Kv takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(S37(GetFilterUnit()))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))))!=null
endfunction
function KV takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(S37(GetFilterUnit()))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER)))!=null
endfunction
function Kw takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(S37(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_RANGED_ATTACKER))and(not IsUnitInRange(GetEnumUnit(),GetFilterUnit(),200.)))!=null
endfunction
function KW takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))and(GetUnitLifePercent(GetFilterUnit())>40.))!=null
endfunction
function VU7 takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))then
return true
elseif(not kD(GetFilterUnit()))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.)))
else
return(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>2)
endif
endif
return false
endfunction
function KX takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))then
if((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))then
return true
elseif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))
endif
endif
return false
endfunction
function Ky takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetOwningPlayer(GetFilterUnit())!=Player($C))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetFilterUnit())>.405)and(S37(GetFilterUnit())))then
if((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))then
return true
elseif(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))then
return((eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0)or((not kD(GetFilterUnit()))and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),600.))))
endif
endif
return false
endfunction
function KY takes real IW,location b5 returns integer
local boolexpr Ig=Condition(function KW)
set LP4="KY"
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,IW,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return kB(true,H8)
endfunction
function Kz takes real IW,location b5 returns integer
local boolexpr Ig=Condition(function k6)
set LP4="Kz"
call GroupClear(H8)
call GroupEnumUnitsInRangeOfLoc(H8,b5,IW,Ig)
call DestroyBoolExpr(Ig)
set Ig=null
return kB(false,H8)
endfunction
function KZ takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)>GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(GetEnumUnit()!=CK4 or CK4==null)then
set hy=GetEnumUnit()
endif
endfunction
function VV7 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)<GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(GetEnumUnit()!=CK4 or CK4==null)then
set hy=GetEnumUnit()
endif
endfunction
function VX7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function T87)
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function VY7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function TD7)
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function VZ7 takes real K1,unit IB,real x,real y returns unit
local boolexpr Ig=Condition(function TD7)
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,x,y,K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function VA7 takes real K1,unit IB,boolexpr Ig returns unit
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
return hy
endfunction
function VB7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function TF7)
set LP4="GetWeakestAllyInRangeOfUnitNotFountain"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function VC7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function TG7)
set LP4="GetWeakestAllyInRangeOfUnit"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function V37 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function TG7)
set LP4="GetWeakestAllyInRangeOfUnit"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function VV7)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function V67 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_MANA)<GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)))and(GetEnumUnit()!=CK4 or CK4==null)then
set hy=GetEnumUnit()
endif
endfunction
function VL7 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function T87)
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function V67)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function V17 takes nothing returns nothing
if((hy==null)or(GetHeroLevel(hy)<GetHeroLevel(GetEnumUnit())))and(GetEnumUnit()!=CK4 or CK4==null)and(R47(GetHandleId(GetOwningPlayer(GetEnumUnit())),"AI|Class")<=2)then
set hy=GetEnumUnit()
endif
endfunction
function V07 takes real K1,unit IB returns unit
local boolexpr Ig=Condition(function T87)
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function V17)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function V57 takes nothing returns nothing
if((hy==null)or(GetUnitState(hy,UNIT_STATE_LIFE)>GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)))and(N37(GetEnumUnit(),bj_lastLoadedUnit)>800.)and(GetEnumUnit()!=CK4 or CK4==null)then
set hy=GetEnumUnit()
endif
endfunction
function V27 takes unit IB returns unit
local boolexpr Ig=Condition(function TD7)
set LP4="GetWeakestHeroInRangeOfUnit"
set hy=null
set bj_lastLoadedUnit=IB
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),1200.,Ig)
call ForGroup(iA,function V57)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function K2 takes real K1,location b5 returns unit
local boolexpr Ig=Condition(function T87)
set LP4="K2"
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRangeOfLoc(iA,b5,K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
set Ig=null
return hy
endfunction
function K3 takes real K1,unit IB,boolexpr Ig returns unit
set hy=null
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(IB),GetUnitY(IB),K1,Ig)
call ForGroup(iA,function KZ)
call DestroyBoolExpr(Ig)
return hy
endfunction
function K4 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(((GetHeroLevel(GetEnumUnit())>5)and(IsUnitInRange(GetFilterUnit(),GetEnumUnit(),300.)))or(N37(GetEnumUnit(),PL7(GetEnumUnit()))>N37(GetFilterUnit(),PL7(GetEnumUnit())))))!=null
endfunction
function V_7 takes nothing returns nothing
set GU=true
endfunction
function W47 takes nothing returns boolean
local integer d=GetDestructableTypeId(GetFilterDestructable())
set LP4="W47"
return d==1096053874 or d==1112831095 or d==1263826039 or d==1498703476 or d==1247044468 or d==1498706804 or d==1498702708 or d==1498707828 or d==1247049588 or d==1247049588 or d==1179939959 or d==1129608306 or d==1230271607 or d==1314157687 or d==1330934903 or d==1515484279 or d==1465152372 or d==1280601204 or d==1196716904 or d==1484024948 or d==1465152631 or d==1098151011 or d==1112831075 or d==1129608291 or d==1230271587 or d==1314157667 or d==1515484259
endfunction
function K5 takes nothing returns nothing
if((GetDestructableTypeId(GetEnumDestructable())==1465152372)or(GetDestructableTypeId(GetEnumDestructable())==1230271587)or(GetDestructableTypeId(GetEnumDestructable())==1230271607)or(GetDestructableTypeId(GetEnumDestructable())==1314157687)or(GetDestructableTypeId(GetEnumDestructable())==1096053874))then
set GU=true
endif
endfunction
function K6 takes unit u returns boolean
local boolexpr b
set LP4="K6"
set GU=false
call MoveLocation(Ha,GetUnitX(u),GetUnitY(u))
set bj_enumDestructableCenter=Ha
set bj_enumDestructableRadius=375.
call SetRect(He,GetUnitX(u)-375.,GetUnitY(u)-375.,GetUnitX(u)+375.,GetUnitY(u)+375.)
set b=Filter(function W47)
call EnumDestructablesInRect(He,b,function V_7)
call DestroyBoolExpr(b)
return GU
endfunction
function W77 takes nothing returns nothing
local real dx=GetLocationX(bj_enumDestructableCenter)-GetDestructableX(GetEnumDestructable())
local real dy=GetLocationY(bj_enumDestructableCenter)-GetDestructableY(GetEnumDestructable())
local real r=dx*dx+dy*dy
set LP4="W77"
if GetDestructableLife(GetEnumDestructable())>.405 and r<bj_enumDestructableRadius then
set V14=GetEnumDestructable()
set bj_enumDestructableRadius=r
endif
endfunction
function W87 takes location l,real r returns boolean
local boolexpr b
set LP4="AI_NearbyTreeFound"
set V14=null
if bj_enumDestructableCenter==null then
set bj_enumDestructableCenter=Location(GetLocationX(l),GetLocationY(l))
else
call MoveLocation(bj_enumDestructableCenter,GetLocationX(l),GetLocationY(l))
endif
set bj_enumDestructableRadius=r*r
call SetRect(He,GetLocationX(l)-r,GetLocationY(l)-r,GetLocationX(l)+r,GetLocationY(l)+r)
set b=Filter(function W47)
call EnumDestructablesInRect(He,b,function W77)
call DestroyBoolExpr(b)
set b=null
return V14!=null
endfunction
function W97 takes nothing returns nothing
local real x=GetDestructableX(GetEnumDestructable())
local real y=GetDestructableY(GetEnumDestructable())
local real dx=x-GetLocationX(bj_enumDestructableCenter)
local real dy=y-GetLocationY(bj_enumDestructableCenter)
local real r=dx*dx+dy*dy
local real r2
if r<bj_enumDestructableRadius and GetDestructableLife(GetEnumDestructable())>.405 then
set dx=x-V04
set dy=y-V54
set r=dx*V24+dy*V_4
set r2=dx*dx+dy*dy-r*r
if r<W44 then
elseif r<W74 and r2<W94*r*r then
set bj_enumDestructableRadius=0
elseif r2<W84*r*r then
set W84=r2/r/r
set V14=GetEnumDestructable()
endif
endif
endfunction
function WD7 takes unit u,real UE7 returns boolean
local real x=GetLocationX(DF7)
local real y=GetLocationY(DF7)
local real dx=x-GetUnitX(u)
local real dy=y-GetUnitY(u)
local real r=SquareRoot(dx*dx+dy*dy)
local boolexpr b
set V14=null
if bj_enumDestructableCenter==null then
set bj_enumDestructableCenter=GetUnitLoc(u)
else
call MoveLocation(bj_enumDestructableCenter,GetUnitX(u),GetUnitY(u))
endif
set bj_enumDestructableRadius=UE7*UE7
set W44=r*90./225.
set W74=W44+r
set V24=dx/r
set V_4=dy/r
set V04=x-W74*V24
set V54=y-W74*V_4
set W84=1/(W74*W74/((90.+225.)*315.)-1)
set W94=W84
call SetRect(He,GetUnitX(u)-UE7,GetUnitY(u)-UE7,GetUnitX(u)+UE7,GetUnitY(u)+UE7)
set b=Filter(function W47)
call EnumDestructablesInRect(He,b,function W97)
call DestroyBoolExpr(b)
set b=null
if V14==null or bj_enumDestructableRadius==0 then
return false
endif
call MoveLocation(DF7,x+(GetDestructableX(V14)-x)*225./315.,y+(GetDestructableY(V14)-y)*225./315.)
return true
endfunction
function K7 takes nothing returns boolean
return((IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and((GetUnitAbilityLevel(GetFilterUnit(),1097102451)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1097102385)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093684533)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1098150517)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093683785)>0)))
endfunction
function K8 takes nothing returns boolean
return((GetDestructableTypeId(GetFilterDestructable())==1096053874)or(GetDestructableTypeId(GetFilterDestructable())==1314157687))
endfunction
function K9 takes nothing returns nothing
if(GetDestructableMaxLife(GetEnumDestructable())==49.)then
set H0=GetEnumDestructable()
endif
endfunction
function la takes nothing returns nothing
if(GetDestructableMaxLife(GetEnumDestructable())==48.)then
set H0=GetEnumDestructable()
endif
endfunction
function lA takes unit it,boolean O6 returns boolean
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set H0=null
if(O6)then
call EnumDestructablesInRect(He,Condition(function K8),function K9)
else
call EnumDestructablesInRect(He,Condition(function K8),function la)
endif
return H0!=null
endfunction
function WE7 takes nothing returns boolean
return true
endfunction
function l6 takes multiboard L6,integer c,integer r,string M6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemValue(p6,M6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function P6 takes multiboard L6,integer c,integer r,string q6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemIcon(p6,q6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function s6 takes multiboard L6,integer c,integer r,boolean t6,boolean T6 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemStyle(p6,t6,T6)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function U6 takes multiboard L6,integer c,integer r,real w6,real Y6,real Z6,real e7 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemValueColor(p6,PercentTo255(w6),PercentTo255(Y6),PercentTo255(Z6),PercentTo255(100.-e7))
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function x7 takes multiboard L6,integer c,integer r,real r7 returns nothing
local multiboarditem p6=null
set p6=MultiboardGetItem(L6,r-1,c-1)
call MultiboardSetItemWidth(p6,r7/ 100)
call MultiboardReleaseItem(p6)
set p6=null
endfunction
function WF7 takes integer i returns nothing
if i>$3E80 then
set gl[i-$3E80]=null
elseif i>8000 then
set Fl[i-8000]=null
else
set fl[i]=null
endif
endfunction
function WG7 takes integer i returns unit
if i>$3E80 then
return gl[i-$3E80]
elseif i>8000 then
return Fl[i-8000]
else
return fl[i]
endif
return fl[i]
endfunction
function WH7 takes integer i returns destructable
if i>$3E80 then
return XV4[i-$3E80]
elseif i>8000 then
return XW4[i-8000]
else
return XX4[i]
endif
return XX4[i]
endfunction
function WI7 takes unit u returns integer
set Hl=Hl+1
if Hl>$3E80 then
set gl[Hl-$3E80]=u
elseif Hl>8000 then
set Fl[Hl-8000]=u
else
set fl[Hl]=u
endif
return Hl
endfunction
function WJ7 takes integer i returns nothing
if i>$3E80 then
set XV4[i-$3E80]=null
elseif i>8000 then
set XW4[i-8000]=null
else
set XX4[i]=null
endif
endfunction
function WK7 takes destructable d returns integer
set XY4=XY4+1
if XY4>$3E80 then
set XV4[XY4-$3E80]=d
elseif XY4>8000 then
set XW4[XY4-8000]=d
else
set XX4[XY4]=d
endif
return XY4
endfunction
function WM7 takes player hd returns boolean
return((hd==Y7[0])or(hd==Y7[1])or(hd==Y7[2])or(hd==Y7[3])or(hd==Y7[4])or(hd==Y7[5]))
endfunction
function WN7 takes player hd returns boolean
return((hd==Z7[0])or(hd==Z7[1])or(hd==Z7[2])or(hd==Z7[3])or(hd==Z7[4])or(hd==Z7[5]))
endfunction
function WO7 takes player p returns boolean
return p==Y7[1]or p==Y7[2]or p==Y7[3]or p==Y7[4]or p==Y7[5]or p==Z7[1]or p==Z7[2]or p==Z7[3]or p==Z7[4]or p==Z7[5]
endfunction
function WP7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(j8)==MAP_CONTROL_USER))
endfunction
function WQ7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(j8)==MAP_CONTROL_COMPUTER))
endfunction
function WR7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and((GetPlayerController(j8)==MAP_CONTROL_USER)or(GetPlayerController(j8)==MAP_CONTROL_COMPUTER)))
endfunction
function WS7 takes player j8 returns boolean
return((GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING)and((GetPlayerController(j8)==MAP_CONTROL_USER)or(QX4[GetPlayerId(j8)])))
endfunction
function WT7 takes integer JM7,unit WU7 returns integer
local integer x=1
local integer NS7=0
set LP4="findPlayerEnemyByUnitTypeIdReturnPID"
loop
exitwhen x>5
if WR7(Y7[x])then
if(GetUnitTypeId(G7[x])==JM7 and IsUnitEnemy(G7[x],GetOwningPlayer(WU7)))then
return GetPlayerId(Y7[x])
endif
endif
if WR7(Z7[x])then
if(GetUnitTypeId(G7[6+x])==JM7 and IsUnitEnemy(G7[6+x],GetOwningPlayer(WU7)))then
return GetPlayerId(Z7[x])
endif
endif
set x=x+1
endloop
return NS7
endfunction
function WV7 takes unit WW7 returns integer
return R47(GetHandleId(WW7),"Invoker|Wex")
endfunction
function WX7 takes unit WW7 returns integer
return R47(GetHandleId(WW7),"Invoker|Quas")
endfunction
function WY7 takes unit WW7 returns integer
return R47(GetHandleId(WW7),"Invoker|Exort")
endfunction
function WZ7 takes unit WW7,integer WA7 returns boolean
local integer WB7=GetHandleId(WW7)
local integer WC7=R47(WB7,"Invoker|Current1")
local integer W37=R47(WB7,"Invoker|Current2")
set LP4="AI_IsSkillInvoked"
if WA7==WC7 or WA7==W37 then
return true
endif
return false
endfunction
function W67 takes unit WW7,integer WL7,integer W17,integer W07,boolean W57 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(WW7))
if(W57)then
set J4=(Bz>TB4[O5])and IssueImmediateOrderById(WW7,WL7)and IssueImmediateOrderById(WW7,W17)and IssueImmediateOrderById(WW7,W07)
else
set J4=IssueImmediateOrderById(WW7,WL7)and IssueImmediateOrderById(WW7,W17)and IssueImmediateOrderById(WW7,W07)
endif
if(W57 and J4)then
set J4=IssueImmediateOrderById(WW7,$D026C)
endif
return J4
endfunction
function W27 takes unit WW7,integer WL7,integer W17,integer W07,integer WA7 returns boolean
if(WZ7(WW7,WA7))then
return true
elseif GetUnitTypeId(WW7)==1160786520 and eY[416+GetPlayerId(GetOwningPlayer(WW7))]==WA7 then
return true
else
return W67(WW7,WL7,W17,W07,true)
endif
endfunction
function W_7 takes unit it returns unit
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local real X47=99999.
local unit X77
local unit m5=null
local integer j
set LP4="tPv"
call GroupClear(H8)
set bj_wantDestroyGroup=false
call GroupAddGroup(ii,H8)
loop
set X77=FirstOfGroup(H8)
exitwhen(X77==null)
if((m5==null)or(N37(it,X77)<X47))then
set j=NL7(GetUnitUserData(X77))
if((j!=0 or(not PF4))and(j!=1 or(not PG4))and(j!=2 or(not PE4)))then
set m5=X77
set X47=N37(it,X77)
endif
endif
call GroupRemoveUnit(H8,X77)
endloop
set hr=m5
set m5=null
return hr
endfunction
function X87 takes integer O5,integer UP,integer X97,integer XD7 returns nothing
set h7[O5]=h7[UP]
set hj[O5]=X97
set hj[256+O5]=XD7
set hj[512+UP]=O5
set hj[512+O5]=UP
endfunction
function XE7 takes unit it,integer UP returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4=LP4+"(tDv)"
if(UP==0)then
return
endif
set h8[O5]=h7[UP+1]
set h8[80+O5]=h7[UP]
set h9[O5]=h7[UP-1]
set h9[16+O5]=h7[hj[UP]]
set h8[16+O5]=h7[hj[256+UP]]
if(iU(it)and(h4[O5]==null)and(WQ7(Player(O5))))then
if(h4[O5]!=null and OA7(h4[O5])and N37(it,h4[O5])<$4B0)then
elseif(eY[O5]==1)then
if((G0[O5])or(G0[32+O5])or(G0[48+O5])or(not G0[$80+O5])or(G0[64+O5])or((O37(it))and(not Id(O5)))or(GetUnitCurrentOrder(it)==$D0012))then
call PV7(it,$D0012,h9[O5])
else
call PV7(it,$D000F,h8[O5])
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(GetUnitCurrentOrder(it)==$D0012)then
call PV7(it,$D0012,h9[O5])
endif
endif
endif
if O37(it)or h4[O5]!=null then
set hq[864+O5]=0
else
set hq[864+O5]=GetRandomReal(-LN4,LN4)
endif
endfunction
function XF7 takes unit it,unit OC7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local unit m5=W_7(OC7)
set LP4="aiRegisterHeroToLane_tQv"
if(m5!=null)then
set UP=GetUnitUserData(m5)
if(IsUnitAlly(it,Y7[0]))then
call XE7(it,UP)
else
call XE7(it,hj[512+UP])
endif
endif
set m5=null
endfunction
function XG7 takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local unit m5=W_7(it)
set LP4="aiRegisterHeroToLane_tQv"
if(m5!=null)then
set UP=GetUnitUserData(m5)
if(IsUnitAlly(it,Y7[0]))then
call XE7(it,UP)
else
call XE7(it,hj[512+UP])
endif
endif
set h4[96+O5]=null
set m5=null
endfunction
function M8 takes player j8 returns boolean
if(GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_PLAYING or GetPlayerSlotState(j8)==PLAYER_SLOT_STATE_LEFT)then
if(GetPlayerController(j8)==MAP_CONTROL_USER or GetPlayerController(j8)==MAP_CONTROL_COMPUTER)then
return true
endif
endif
return false
endfunction
function p8 takes nothing returns nothing
if(WR7(GetEnumPlayer()))then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endfunction
function P8 takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function p8)
return bj_forceCountPlayers
endfunction
function hh takes nothing returns nothing
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING then
if GetEnumPlayer()!=Player($D)and GetEnumPlayer()!=Player($E)then
set bj_forceCountPlayers=bj_forceCountPlayers+1
endif
endif
endfunction
function q8 takes force f returns integer
set bj_forceCountPlayers=0
call ForForce(f,function hh)
return bj_forceCountPlayers
endfunction
function hi takes integer hI,player j8 returns nothing
if H74 then
call SetPlayerTechMaxAllowed(j8,hI,0)
set G[GetUnitPointValueByType(hI)]=true
endif
endfunction
function XH7 takes integer hI returns nothing
call hi(hI,Y7[1])
call hi(hI,Y7[2])
call hi(hI,Y7[3])
call hi(hI,Y7[4])
call hi(hI,Y7[5])
call hi(hI,Z7[1])
call hi(hI,Z7[2])
call hi(hI,Z7[3])
call hi(hI,Z7[4])
call hi(hI,Z7[5])
endfunction
function S8 takes integer hI returns nothing
if H74 then
call SetPlayerTechMaxAllowed(Y7[1],hI,0)
call SetPlayerTechMaxAllowed(Y7[2],hI,0)
call SetPlayerTechMaxAllowed(Y7[3],hI,0)
call SetPlayerTechMaxAllowed(Y7[4],hI,0)
call SetPlayerTechMaxAllowed(Y7[5],hI,0)
call SetPlayerTechMaxAllowed(Z7[1],hI,0)
call SetPlayerTechMaxAllowed(Z7[2],hI,0)
call SetPlayerTechMaxAllowed(Z7[3],hI,0)
call SetPlayerTechMaxAllowed(Z7[4],hI,0)
call SetPlayerTechMaxAllowed(Z7[5],hI,0)
endif
endfunction
function XI7 takes player j8 returns nothing
local integer T8=K64
local integer U8=KL4
set LP4="TechAllForPlayer"
if H74 then
loop
exitwhen T8>U8
call SetPlayerTechMaxAllowed(j8,KC4[T8],0)
set T8=T8+1
endloop
set T8=K14
set U8=K04
loop
exitwhen T8>U8
call SetPlayerTechMaxAllowed(j8,KC4[T8],0)
set T8=T8+1
endloop
endif
endfunction
function XJ7 takes nothing returns nothing
call XI7(Y7[1])
call XI7(Y7[2])
call XI7(Y7[3])
call XI7(Y7[4])
call XI7(Y7[5])
call XI7(Z7[1])
call XI7(Z7[2])
call XI7(Z7[3])
call XI7(Z7[4])
call XI7(Z7[5])
endfunction
function XK7 takes player p returns nothing
local integer i
set LP4="vvv"
if H74 then
set i=K64
loop
exitwhen i>K04
if G[i]==false then
call SetPlayerTechMaxAllowed(p,KC4[i],1)
endif
set i=i+1
endloop
if WM7(p)then
set i=K64
loop
exitwhen i>KL4
call SetPlayerTechMaxAllowed(p,KC4[i],0)
set i=i+1
endloop
else
set i=K14
loop
exitwhen i>K04
call SetPlayerTechMaxAllowed(p,KC4[i],0)
set i=i+1
endloop
endif
endif
endfunction
function XM7 takes player p returns nothing
local integer i
set LP4="DisableManualAIPickHeroes"
if H74 then
set i=K64
loop
exitwhen i>K04
if G[i]==false then
call SetPlayerTechMaxAllowed(p,KC4[i],1)
endif
set i=i+1
endloop
if WM7(p)then
set i=K14
loop
exitwhen i>K04
call SetPlayerTechMaxAllowed(p,KC4[i],0)
set i=i+1
endloop
else
set i=K64
loop
exitwhen i>KL4
call SetPlayerTechMaxAllowed(p,KC4[i],0)
set i=i+1
endloop
endif
endif
endfunction
function XN7 takes nothing returns nothing
local integer i
set LP4="XN7"
if H74 then
set i=K14
loop
exitwhen i>K04
call SetPlayerTechMaxAllowed(Y7[1],KC4[i],0)
call SetPlayerTechMaxAllowed(Y7[2],KC4[i],0)
call SetPlayerTechMaxAllowed(Y7[3],KC4[i],0)
call SetPlayerTechMaxAllowed(Y7[4],KC4[i],0)
call SetPlayerTechMaxAllowed(Y7[5],KC4[i],0)
set i=i+1
endloop
set i=K64
loop
exitwhen i>KL4
call SetPlayerTechMaxAllowed(Z7[1],KC4[i],0)
call SetPlayerTechMaxAllowed(Z7[2],KC4[i],0)
call SetPlayerTechMaxAllowed(Z7[3],KC4[i],0)
call SetPlayerTechMaxAllowed(Z7[4],KC4[i],0)
call SetPlayerTechMaxAllowed(Z7[5],KC4[i],0)
set i=i+1
endloop
endif
endfunction
function XO7 takes nothing returns nothing
local integer T8
local integer U8
local integer XP7=0
set LP4="XO7"
set Ge=K64
set T8=K64
set U8=KL4
loop
exitwhen T8>U8
set XP7=XP7+1
set je[XP7]=T8
set T8=T8+1
endloop
set T8=K14
set U8=K04
loop
exitwhen T8>U8
set XP7=XP7+1
set je[XP7]=T8
set T8=T8+1
endloop
set he=XP7
endfunction
function XQ7 takes nothing returns integer
return je[GetRandomInt(Ge,he)]
endfunction
function XR7 takes nothing returns integer
local integer XS7=GetRandomInt(Ge,he)
local integer hs=je[XS7]
set LP4="XR7"
set hs=je[XS7]
if(Ge==he)then
set je[XS7]=0
return hs
endif
if(XS7==he)then
set he=he-1
return hs
endif
set je[XS7]=je[he]
set he=he-1
return hs
endfunction
function XT7 takes unit MQ7 returns boolean
return GetUnitAbilityLevel(MQ7,1110454612)>0 or GetUnitAbilityLevel(MQ7,1112437609)>0 or GetUnitAbilityLevel(MQ7,1110454616)>0 or GetUnitAbilityLevel(MQ7,1112433775)>0 or GetUnitAbilityLevel(MQ7,1110454861)>0 or GetUnitAbilityLevel(MQ7,1114137953)>0 or GetUnitAbilityLevel(MQ7,1110456150)>0 or GetUnitAbilityLevel(MQ7,1110458969)>0 or GetUnitAbilityLevel(MQ7,1110456399)>0 or GetUnitAbilityLevel(MQ7,1110456149)>0 or GetUnitAbilityLevel(MQ7,1110459468)>0 or GetUnitAbilityLevel(MQ7,1110456406)>0 or GetUnitAbilityLevel(MQ7,1110455089)>0 or GetUnitAbilityLevel(MQ7,1110459988)>0 or GetUnitAbilityLevel(MQ7,1110459975)>0
endfunction
function XU7 takes string hT returns integer
if hT=="a"then
return $A
elseif hT=="b"then
return $B
elseif hT=="c"then
return $C
elseif hT=="d"then
return $D
elseif hT=="e"then
return $E
elseif hT=="f"then
return $F
else
return S2I(hT)
endif
endfunction
function XV7 takes string hU returns integer
return XU7(SubString(hU,0,1))*16+XU7(SubString(hU,1,2))
endfunction
function XW7 takes integer hX returns boolean
local integer i=1
set LP4="IsRealSpellWithItems"
loop
exitwhen i>B8
if hX==A8[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function XX7 takes unit XY7 returns integer
local integer XZ7=GetUnitTypeId(XY7)
if XZ7==1697656914 or XZ7==1966092365 then
return 1
elseif XZ7==1697657137 or XZ7==1966092356 then
return 2
elseif XZ7==1697656915 or XZ7==1966092366 then
return 3
elseif XZ7==1697657145 or XZ7==1966092372 then
return 4
endif
return 0
endfunction
function XA7 takes player hV,integer hY returns nothing
local texttag t
set LP4="ShareTowerGold_GiveGold"
if hY>0 then
set t=CreateTextTag()
call SetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD)+hY)
call SetTextTagText(t,"+"+I2S(hY),.025)
call SetTextTagPosUnit(t,G7[GetPlayerId(hV)],0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==hV then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endif
endfunction
function lW takes player hV,integer XB7 returns nothing
local integer x=1
set LP4="lW"
if IsPlayerAlly(hV,Y7[0])then
loop
exitwhen x>5
if Y7[x]!=hV then
call XA7(Y7[x],XB7)
endif
set x=x+1
endloop
endif
set x=1
if IsPlayerAlly(hV,Z7[0])then
loop
exitwhen x>5
if Z7[x]!=hV then
call XA7(Z7[x],XB7)
endif
set x=x+1
endloop
endif
endfunction
function XC7 takes unit hn,integer X37 returns nothing
local integer XB7
local player p=GetOwningPlayer(hn)
local integer X67=0
local integer XL7
set LP4="vRv"
set XB7=$A0+40*X37
if WM7(GetOwningPlayer(hn))then
set XL7=P8(W7)
else
set XL7=P8(X7)
endif
if p==Y7[0]or p==Z7[0]then
set X67=R2I(((400+50*X37)+GetRandomInt(2,20))*.7)
endif
if IsUnitAlly(GetDyingUnit(),p)then
if IsUnitAlly(hn,Y7[0])then
set p=Z7[0]
else
set p=Y7[0]
endif
set XB7=XB7/ 2+X67/ XL7
else
set XB7=XB7+X67/ XL7
endif
if p==Y7[0]then
call XA7(Y7[1],XB7)
call XA7(Y7[2],XB7)
call XA7(Y7[3],XB7)
call XA7(Y7[4],XB7)
call XA7(Y7[5],XB7)
elseif p==Z7[0]then
call XA7(Z7[1],XB7)
call XA7(Z7[2],XB7)
call XA7(Z7[3],XB7)
call XA7(Z7[4],XB7)
call XA7(Z7[5],XB7)
else
call lW(GetOwningPlayer(hn),XB7)
endif
endfunction
function X17 takes integer z8 returns boolean
local integer i=1
set LP4="vbv"
loop
exitwhen i>M84
if M74[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function X07 takes integer z8 returns boolean
local integer i=1
set LP4="vBv"
loop
exitwhen i>K24
if K54[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function X57 takes integer z8 returns boolean
local integer i=1
set LP4="vcv"
loop
exitwhen i>M44
if K_4[i]==z8 then
return true
endif
set i=i+1
endloop
return false
endfunction
function X27 takes player j8 returns nothing
local integer X_7
local integer Y47
local location Y77
local integer XS7
local boolean GotHero=false
set LP4="vCv"
set V4[GetPlayerId(j8)]=true
if WM7(j8) then
set X_7=K64
set Y47=KL4
set Y77=GetRectCenter(L9)
else
set X_7=K14
set Y47=K04
set Y77=GetRectCenter(C9)
endif
if O4 then
if(GetRandomInt(1,2)==1)then
set X_7=K64
set Y47=KL4
else
set X_7=K14
set Y47=K04
endif
endif
loop
set XS7=GetRandomInt(X_7,Y47)
exitwhen G[XS7]==false and X17(KC4[XS7])and KC4[XS7]!=1211117643
endloop
if W8==false then
call S8(KC4[XS7])
set G[XS7]=true
endif
call CreateUnitAtLoc(j8,KC4[XS7],Y77,0)
call RemoveLocation(Y77)
set Y77=null
endfunction
function Y87 takes player j8 returns nothing
local integer X_7
local integer Y47
local location Y77
local integer XS7
local boolean GotHero=false
set LP4="vFv"
set V4[GetPlayerId(j8)]=true
if WM7(j8) then
set X_7=K64
set Y47=KL4
set Y77=GetRectCenter(L9)
else
set X_7=K14
set Y47=K04
set Y77=GetRectCenter(C9)
endif
if O4 then
if(GetRandomInt(1,2)==1)then
set X_7=K64
set Y47=KL4
else
set X_7=K14
set Y47=K04
endif
endif
loop
set XS7=GetRandomInt(X_7,Y47)
exitwhen G[XS7]==false and X57(KC4[XS7])
endloop
if W8==false then
call S8(KC4[XS7])
set G[XS7]=true
endif
call CreateUnitAtLoc(j8,KC4[XS7],Y77,0)
call RemoveLocation(Y77)
set Y77=null
endfunction
function Y97 takes player j8 returns nothing
local integer X_7
local integer Y47
local location Y77
local integer XS7
local boolean GotHero=false
set LP4="vgv"
set V4[GetPlayerId(j8)]=true
if WM7(j8) then
set X_7=K64
set Y47=KL4
set Y77=GetRectCenter(L9)
else
set X_7=K14
set Y47=K04
set Y77=GetRectCenter(C9)
endif
if O4 then
if(GetRandomInt(1,2)==1)then
set X_7=K64
set Y47=KL4
else
set X_7=K14
set Y47=K04
endif
endif
loop
set XS7=GetRandomInt(X_7,Y47)
exitwhen G[XS7]==false and X07(KC4[XS7])
endloop
if W8==false then
call S8(KC4[XS7])
set G[XS7]=true
endif
call CreateUnitAtLoc(j8,KC4[XS7],Y77,0)
call RemoveLocation(Y77)
set Y77=null
endfunction
function YD7 takes player j8 returns nothing
local integer X_7
local integer Y47
local location Y77
local integer XS7
local boolean GotHero=false
set LP4="vGv"
set V4[GetPlayerId(j8)]=true
if WM7(j8) then
set X_7=K64
set Y47=KL4
set Y77=GetRectCenter(L9)
else
set X_7=K14
set Y47=K04
set Y77=GetRectCenter(C9)
endif
if O4 then
if(GetRandomInt(1,2)==1)then
set X_7=K64
set Y47=KL4
else
set X_7=K14
set Y47=K04
endif
endif
loop
set XS7=GetRandomInt(X_7,Y47)
exitwhen G[XS7]==false
endloop
if W8==false then
call S8(KC4[XS7])
set G[XS7]=true
endif
call CreateUnitAtLoc(j8,KC4[XS7],Y77,0)
call RemoveLocation(Y77)
set Y77=null
endfunction
function ly takes boolean h5,boolean h6 returns integer
local integer h1
local integer h2
set LP4="ly"
if h5 and h6 then
if(GetRandomInt(1,2)==1)then
set h1=K64
set h2=KL4
else
set h1=K14
set h2=K04
endif
elseif h5 then
set h1=K64
set h2=KL4
else
set h1=K14
set h2=K04
endif
return GetRandomInt(h1,h2)
endfunction
function YE7 takes destructable d returns boolean
return GetDestructableTypeId(d)==1314157667 or GetDestructableTypeId(d)==1314157687 or GetDestructableTypeId(d)==1096053874 or GetDestructableTypeId(d)==1110454322 or GetDestructableTypeId(d)==1110454323 or GetDestructableTypeId(d)==1110454325
endfunction
function YF7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0
endfunction
function YG7 takes integer id returns boolean
return id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614
endfunction
function YH7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1112500344)>0 or GetUnitAbilityLevel(u,1110454344)>0
endfunction
function YI7 takes integer XZ7 returns boolean
return(XZ7==1852862003 or XZ7==1852862006 or XZ7==1848652080 or XZ7==1848657754)or(XZ7==1852862002 or XZ7==1852862006 or XZ7==1848652082 or XZ7==1848657969)or(XZ7==1852862001 or XZ7==1852862004 or XZ7==1848652081 or XZ7==1848657968)
endfunction
function YJ7 takes player p returns string
return KY4[GetPlayerId(p)]
endfunction
function YK7 takes integer i returns string
return GetObjectName(i)
endfunction
function YM7 takes force ir,real Hk,string iR returns nothing
if(IsPlayerInForce(GetLocalPlayer(),ir))then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,D9,Hk,iR)
endif
endfunction
function vlv takes nothing returns group
return CreateGroup()
endfunction
function l7 takes integer i returns nothing
if i!=Dy then
set Dx[i]=Dx[Dy]
set DX[i]=DX[Dy]
endif
set Dx[Dy]=null
set DX[Dy]=0
set Dy=Dy-1
endfunction
function l8 takes nothing returns boolean
local real YN7=O97()
local integer i
set LP4="l8"
set i=1
loop
exitwhen i>Dy
if DX[i]<YN7 then
if Dx[i]==null or IsTriggerEnabled(Dx[i])then
call l5()
else
call DestroyTrigger(Dx[i])
endif
call l7(i)
else
set i=i+1
endif
endloop
return false
endfunction
function YO7 takes trigger t returns nothing
call Q47(GetHandleId(t))
call DisableTrigger(t)
call DestroyTrigger(t)
endfunction
function FilterTreeSentinels takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1747993172)or(GetUnitTypeId(GetFilterUnit())==1747993173))
endfunction
function YP7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YQ7=GetHandleId(t)
local unit YR7=QA7(YQ7,"TreantUnit")
local unit YS7=QA7(YQ7,"SentinelUnit")
local unit JX7=null
local unit u=null
local group g=CreateGroup()
local integer O5=GetPlayerId(GetOwningPlayer(YR7))
set LP4="YP7"
if((GetTriggerEventId()==EVENT_UNIT_DEATH)and((GetUnitTypeId(YS7)==1747993172)or(GetUnitTypeId(YS7)==1747993173)))then
call FlushChildHashtable(C7,YQ7)
call RN7(t)
call DestroyTrigger(t)
elseif((GetUnitTypeId(YS7)==1747993172)and(Bz>TB4[64+O5]))then
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(YS7),500,Condition(function TX7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(YR7))
endloop
set JX7=u
endif
if((GetUnitState(YR7,UNIT_STATE_LIFE)>5.)and(JX7!=null)and(WQ7(GetOwningPlayer(YR7)))and(GetUnitTypeId(YS7)==1747993172)and(XT7(YR7)==false))then
call IssuePointOrderById(YR7,$D00D9,GetUnitX(YS7),GetUnitY(YS7))
set TB4[64+O5]=Bz+10.
endif
endif
call DestroyGroup(g)
set t=null
set YR7=null
set YS7=null
set JX7=null
set u=null
set g=null
return false
endfunction
function YT7 takes unit YU7,unit YV7 returns nothing
local unit YS7=YV7
local unit YR7=YU7
local trigger t=null
local integer YW7=0
local boolexpr b=Condition(function TX7)
set LP4="TreeForestSentinels"
if(WQ7(GetOwningPlayer(YR7)))then
set t=CreateTrigger()
set YW7=GetHandleId(t)
call QG7(YW7,"TreantUnit",YR7)
call QG7(YW7,"SentinelUnit",YS7)
if(GetUnitTypeId(YS7)==1747993172)then
call TriggerRegisterUnitInRange(t,YS7,500,b)
endif
call TriggerRegisterUnitEvent(t,YS7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YP7))
endif
call DestroyBoolExpr(b)
set YS7=null
set YR7=null
set t=null
endfunction
function YX7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local fogmodifier YZ7=(LoadFogModifierHandle(C7,(YY7),(42)))
set LP4="YX7"
call FogModifierStop(YZ7)
call DestroyFogModifier(YZ7)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
set t=null
return false
endfunction
function YC7 takes integer id returns boolean
return id==WA or id==NA or id==JA or id==QA or id==IA
endfunction
function Y37 takes unit u returns string
if u==null then
return(GetObjectName((1848654164)))
endif
if GetUnitPointValue(u)==500 then
return"Formless"
elseif GetUnitPointValue(u)==600 then
return"Bastion"
endif
return(GetObjectName((K34[GetUnitPointValue(u)])))
endfunction
function Y67 takes unit MQ7 returns string
local integer i=GetUnitPointValue(MQ7)
set LP4="aiGetPlayerName"
if HC4 then
set i=GetPlayerId(GetOwningPlayer(MQ7))
if Player(i)==Y7[1]then
return"Blue"
elseif Player(i)==Y7[2]then
return"Teal"
elseif Player(i)==Y7[3]then
return"Purple"
elseif Player(i)==Y7[4]then
return"Yellow"
elseif Player(i)==Y7[5]then
return"Orange"
elseif Player(i)==Z7[1]then
return"Pink"
elseif Player(i)==Z7[2]then
return"Gray"
elseif Player(i)==Z7[3]then
return"Light"
elseif Player(i)==Z7[4]then
return"Dark"
elseif Player(i)==Z7[5]then
return"Brown"
endif
return"Unknown"
endif
if(i==1)then
return"Shendelzare"
elseif(i==$F)then
return"Cairne"
elseif(i==18)then
return"Magi"
elseif(i==21)then
return"Azwraith"
elseif(i==29)then
return"Wisp"
elseif(i==33)then
return"Davion"
elseif(i==65)then
return"Anub'arak"
elseif(i==86)then
return"Vol'Jin"
elseif(i==91)then
return"Azgalor"
elseif(i==93)then
return"Ish'kafel"
elseif(i==97)then
return"Kaldr"
elseif(i==101)then
return"Eredar"
endif
return Y37(MQ7)
endfunction
function YL7 takes integer i returns string
if i==0 then
return(GetObjectName((1848654164)))
endif
return(GetObjectName((K34[i])))
endfunction
function Y17 takes unit S4 returns integer
local integer z8
local integer i=0
set LP4="UnitToIndex"
if S4==null then
return-2
endif
set z8=GetUnitTypeId(S4)
loop
exitwhen i>DV
if ZU[i]==z8 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function Y07 takes unit u returns string
if u==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return MG4[GetUnitPointValue(u)]
endfunction
function Y57 takes unit u returns boolean
return GetUnitAbilityLevel(u,1093686070)>0 or GetUnitAbilityLevel(u,1093744441)>0 or GetUnitAbilityLevel(u,1094937961)>0 or GetUnitAbilityLevel(u,1093686101)>0 or GetUnitAbilityLevel(u,1110454580)>0 or GetUnitAbilityLevel(u,1093683251)>0 or RG7(u,"BladeFury|Active")
endfunction
function Y27 takes player p returns boolean
return R8 and(KW4==p or KX4==p)
endfunction
function Y_7 takes unit Z47 returns integer
local integer x
local integer id=GetUnitTypeId(Z47)
set LP4="GetHeroType"
set x=1
loop
exitwhen x>K24
if id==K54[x]then
return 2
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>M44
if id==K_4[x]then
return 3
endif
set x=x+1
endloop
set x=1
loop
exitwhen x>M84
if id==M74[x]then
return 1
endif
set x=x+1
endloop
if id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517 or id==1311781442 or id==1311781175 or id==1211119684 or id==1211119683 or id==1211119668 or id==1211119682 or id==1311781171 or id==1311781172 or id==1311781173 or id==1160786511 or id==1311788365 then
return 2
endif
if id==1311781192 or id==1311781204 or id==1311781194 or id==1211117637 or id==1211117639 or id==1211117638 or id==1211119433 or id==1160786229 or id==1211122513 or id==1211122995 or id==1211122996 or id==1211122997 or id==1429221720 then
return 3
endif
if id==1211119192 or id==1211119193 or id==1211119191 or id==1211122243 or id==1328558391 or id==1311788354 or id==1311788355 or id==1311788367 or id==1311788353 then
return 1
endif
return 0
endfunction
function Z77 takes unit Z47 returns integer
local integer Hm=Y_7(Z47)
if Hm==1 then
return GetHeroInt(Z47,true)
endif
if Hm==2 then
return GetHeroAgi(Z47,true)
endif
if Hm==3 then
return GetHeroStr(Z47,true)
endif
return 0
endfunction
function Z87 takes unit u returns boolean
return GetUnitState(u,UNIT_STATE_LIFE)<1 or IF4[GetPlayerId(GetOwningPlayer(u))]
endfunction
function Z97 takes integer z8,integer r,integer g,integer b returns nothing
set CL=CL+1
set NL[CL]=r
set bL[CL]=g
set BL[CL]=b
set cL[CL]=z8
endfunction
function ZD7 takes nothing returns nothing
call PauseUnit(GetEnumUnit(),true)
endfunction
function emv takes nothing returns nothing
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,D9,DB,dB)
endfunction
function ZE7 takes nothing returns nothing
if eb[GetPlayerId(GetEnumPlayer())]then
call DisplayTimedTextToPlayer(GetEnumPlayer(),0,D9,mb,Lb)
endif
endfunction
function ZF7 takes force ir,real Hk,string iR returns nothing
set Lb=iR
set mb=Hk
call ForForce(ir,function ZE7)
endfunction
function ZG7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1110458953)>0 or GetUnitAbilityLevel(u,1112437619)>0 or GetUnitAbilityLevel(u,1110459734)>0
endfunction
function ZH7 takes group g returns nothing
local integer i=GetHandleId(g)-TN4
if i<0 or i>120 then
set TP4=true
call DestroyGroup(g)
else
call GroupClear(g)
set TK4[i]=false
set TO4=i
endif
endfunction
function ZI7 takes nothing returns group
local integer i=TO4
loop
exitwhen i==TO4-1
if TK4[i]==false then
set TO4=i+1
if TO4==120 then
set TO4=0
endif
set TK4[i]=true
return TM4[i]
endif
set i=i+1
if i==120 then
set i=0
endif
endloop
call ZF7(C8,5.,"|c00ff0303CRITICAL ERROR: FOUND NO AVAILABLE GROUPS|r")
call ZF7(C8,5.,"|c00ff0303Send this replay to IceFrog@gmail.com|r")
return CreateGroup()
endfunction
function ZJ7 takes real ZK7,real dx,real dy,real Vx,real Vy returns real
local real a
local real b
local real d
set a=ZK7*ZK7-Vx*Vx-Vy*Vy
set b=Vx*dx+Vy*dy
if a==0 then
if b>0 then
return .0
endif
return(dx*dx+dy*dy)/2/b
endif
set d=b*b+a*(dx*dx+dy*dy)
if d<0 then
return .0
endif
set d=SquareRoot(d)
if b<d then
return(b+d)/a
endif
return(b-d)/a
endfunction
function ZM7 takes real x,real y returns boolean
return( not(x<GetRectMinX(bj_mapInitialPlayableArea)+75))and( not(x>GetRectMaxX(bj_mapInitialPlayableArea)-75))and( not(y<GetRectMinY(bj_mapInitialPlayableArea)+75))and( not(y>GetRectMaxY(bj_mapInitialPlayableArea)-75))
endfunction
function ZN7 takes unit ZO7,unit J67,real X,real Y,real r,boolexpr JF7 returns boolean
local group g=ZI7()
local real Hx=GetUnitX(ZO7)
local real Hy=GetUnitY(ZO7)
local player p=GetOwningPlayer(ZO7)
local real dx=(X-Hx)*.5
local real dy=(Y-Hy)*.5
local real R=SquareRoot(dx*dx+dy*dy)
local unit u
local real d
local real ZP7=99999.
local real ZQ7=.0
local real NC7
call GroupEnumUnitsInRange(g,Hx+dx,Hy+dy,R,JF7)
set bj_lastReplacedUnit=null
set bj_lastLoadedUnit=null
set bj_forLoopAIndex=0
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
set d=((GetUnitX(u)-Hx)*dy-(GetUnitY(u)-Hy)*dx)/R
if u!=ZO7 and u!=J67 and IsUnitVisible(u,p)and d*d<=r*r then
set NC7=N37(ZO7,u)
if NC7<ZP7 then
set ZP7=NC7
set bj_lastReplacedUnit=u
endif
if NC7>ZQ7 then
set ZQ7=NC7
set bj_lastLoadedUnit=u
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endif
endloop
call ZH7(g)
set g=null
return bj_forLoopAIndex==0
endfunction
function ZR7 takes unit ZO7,unit J67,real ZK7,real ZS7,real UY7 returns location
local real dt=TimerGetElapsed(V)
local real X
local real Y
local real dx=GetUnitX(J67)
local real dy=GetUnitY(J67)
call NX7(.1)
set dt=TimerGetElapsed(V)-dt
set X=GetUnitX(J67)
set Y=GetUnitY(J67)
if X==dx and Y==dy then
call MoveLocation(DF7,X,Y)
return DF7
endif
set dx=(X-dx)/dt
set dy=(Y-dy)/dt
set dt=ZJ7(ZK7,X+dx*ZS7-GetUnitX(ZO7),Y+dy*ZS7-GetUnitY(ZO7),dx,dy)
if dt==0 then
return null
endif
call MoveLocation(DF7,X+dx*(dt+ZS7),Y+dy*(dt+ZS7))
if ZM7(GetLocationX(DF7),GetLocationY(DF7))then
return DF7
endif
return null
endfunction
function ZT7 takes unit MQ7,unit OC7,real ZU7,real UY7 returns location
local real SY7=GetUnitX(OC7)
local real SZ7=GetUnitY(OC7)
local real ZV7=TimerGetElapsed(V)
local real ZW7=0
local real ZX7=0
call NX7(.1)
set ZV7=1./(TimerGetElapsed(V)-ZV7)
set ZW7=(GetUnitX(OC7)-SY7)*ZV7
set ZX7=(GetUnitY(OC7)-SZ7)*ZV7
if not(ZW7==0 and ZX7==0)then
set SY7=SY7+ZW7*ZU7
set SZ7=SZ7+ZX7*ZU7
endif
if N67(GetUnitX(MQ7),GetUnitY(MQ7),SY7,SZ7)<=UY7 then
call MoveLocation(DF7,SY7,SZ7)
if ZM7(GetLocationX(DF7),GetLocationY(DF7))then
return DF7
endif
endif
return null
endfunction
function ZY7 takes location RV7,real ZZ7,real ZA7 returns location
local real x=GetLocationX(RV7)+ZZ7*Cos(ZA7*bj_DEGTORAD)
local real y=GetLocationY(RV7)+ZZ7*Sin(ZA7*bj_DEGTORAD)
call MoveLocation(HA,x,y)
return HA
endfunction
function ZB7 takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))and(GetUnitTypeId(GetFilterUnit())==1212363833)and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.405))
endfunction
function aiSiren_CheckRipTide_Enum takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetEnumUnit()))and(GetUnitTypeId(GetFilterUnit())==1212363833)and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.405))
endfunction
function ZC7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE)==false and GetUnitAbilityLevel(GetFilterUnit(),1098282348)==0)and P87(450,GetFilterUnit(),Condition(function ZB7))>=1)!=null
endfunction
function Z37 takes unit it,unit m5 returns boolean
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=P47(350,PU7(m5),Condition(function ZB7))
return(bj_lastLoadedUnit!=null)
endfunction
function Z67 takes nothing returns boolean
local integer ZL7=0
local integer i=0
set LP4="Z67"
loop
exitwhen i==120
if TK4[i] then
set ZL7=ZL7+1
endif
set i=i+1
endloop
if ZL7>100 or TP4 then
call ZF7(C8,5.,"|c00ff0303Please send me this replay ("+I2S(ZL7)+")")
endif
return false
endfunction
function Z17 takes nothing returns nothing
local integer i=0
set LP4="Z17"
set TO4=0
set TM4[i]=CreateGroup()
set TK4[i]=false
set i=i+1
set TN4=GetHandleId(TM4[0])
loop
exitwhen i==120
set TM4[i]=CreateGroup()
set TK4[i]=false
set i=i+1
endloop
endfunction
function Z07 takes nothing returns boolean
local group g=ZI7()
set LP4="Z07"
call GroupEnumUnitsInRange(g,0,0,$3E80,Condition(function WE7))
call ForGroup(g,function ZD7)
call ZH7(g)
set g=null
return false
endfunction
function Z57 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Z57"
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function Z07))
call TriggerEvaluate(t)
set t=null
endfunction
function Z27 takes unit ZO7,integer Z_7 returns nothing
call UnitAddAbility(ZO7,Z_7)
call UnitMakeAbilityPermanent(ZO7,true,Z_7)
endfunction
function A47 takes unit u returns boolean
return GetUnitTypeId(u)<1 or IsUnitType(u,UNIT_TYPE_DEAD)
endfunction
function A77 takes unit A87,unit A97 returns nothing
if N37(A87,A97)>$4B0 or(A47(A87)and GetUnitTypeId(A87)==1211117643)then
call AddHeroXP(A87,O47(A97),true)
endif
endfunction
function AD7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="AD7"
call Q47(GetHandleId(QA7(RP7,"Unit")))
call ShowUnit(QA7(RP7,"Unit"),false)
call RemoveUnit(QA7(RP7,"Unit"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function AE7 takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="v9v"
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function AD7))
call QG7(RP7,"Unit",u)
set t=null
endfunction
function AF7 takes integer AG7 returns nothing
local unit u=CreateUnit(Player($F),AG7,0,0,0)
set LP4="PreloadUnit"
call RemoveUnit(u)
set u=null
endfunction
function AH7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"u")
local real AI7=R77(RP7,"duration")
local integer AJ7=R47(RP7,"fade")
set LP4="AH7"
if GetTriggerEvalCount(t)/ $A>R2I(AI7)then
call SetUnitVertexColor(u,$FF,100,$FF,$FF)
call Q47(RP7)
call RN7(t)
elseif A47(u)==false then
call SetUnitVertexColor(u,$FF,100,$FF,AJ7)
endif
set t=null
set u=null
return false
endfunction
function AK7 takes unit u,real AI7,integer AJ7 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="eiv"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function AH7))
call QG7(RP7,"u",u)
call QD7(RP7,"duration",AI7)
call Q97(RP7,"fade",AJ7)
set t=null
endfunction
function AM7 takes integer z8,real AN7,integer AO7 returns nothing
set Ml=Ml+1
set Jl[Ml]=AN7
set ll[Ml]=z8
set Ll[Ml]=AO7
endfunction
function AP7 takes unit u returns real
local integer z8=GetUnitTypeId(u)
local integer i=1
set LP4="GetUnitScale"
loop
exitwhen i>Ml
if ll[i]==z8 then
return Jl[i]
endif
set i=i+1
endloop
return 1.
endfunction
function AQ7 takes integer z8,string AR7 returns nothing
set Ql=Ql+1
set Pl[Ql]=AR7
set ql[Ql]=z8
endfunction
function AS7 takes unit u returns string
local integer z8=GetUnitTypeId(u)
local integer i=1
set LP4="eRv"
loop
exitwhen i>Ql
if ql[i]==z8 then
return Pl[i]
endif
set i=i+1
endloop
return"stand"
endfunction
function AT7 takes unit u returns nothing
if GetUnitTypeId(u)==1311781193 then
call SetUnitAnimationByIndex(u,6)
else
call SetUnitAnimation(u,AS7(u))
endif
endfunction
function AU7 takes player hV,string Ht returns nothing
local sound HT=CreateSound(Ht,false,false,false,$A,$A,"DefaultEAXON")
set LP4="SoundForPlayer"
if(GetLocalPlayer()==hV)then
call StartSound(HT)
endif
call KillSoundWhenDone(HT)
endfunction
function AV7 takes player HU,string Hv returns nothing
local sound HV=CreateSoundFromLabel("InterfaceError",false,false,false,$A,$A)
set LP4="Error"
if(GetLocalPlayer()==HU)then
if(Hv!="")and(Hv!=null)then
call ClearTextMessages()
call DisplayTimedTextToPlayer(HU,.5,-1.,2.,"|cffffcc00"+Hv+"|r")
endif
call StartSound(HV)
endif
call KillSoundWhenDone(HV)
endfunction
function AW7 takes nothing returns boolean
if(GetTimeOfDay()>6. and GetTimeOfDay()<18.)then
return true
else
return false
endif
endfunction
function AX7 takes string H4,boolean H5 returns nothing
if H5 then
call ExecuteFunc(H4)
endif
endfunction
function AY7 takes real x returns real
local real H7=GetRectMinX(bj_mapInitialPlayableArea)+50
set LP4="SafeX"
if(x<H7)then
return H7
endif
set H7=GetRectMaxX(bj_mapInitialPlayableArea)-50
if(x>H7)then
return H7
endif
return x
endfunction
function AZ7 takes real y returns real
local real H7=GetRectMinY(bj_mapInitialPlayableArea)+50
set LP4="SafeY"
if(y<H7)then
return H7
endif
set H7=GetRectMaxY(bj_mapInitialPlayableArea)-50
if(y>H7)then
return H7
endif
return y
endfunction
function AA7 takes real x returns real
local real UG7=GetRectMinX(bj_mapInitialPlayableArea)+75
set LP4="SafeX2"
if(x<UG7)then
return UG7
endif
set UG7=GetRectMaxX(bj_mapInitialPlayableArea)-75
if(x>UG7)then
return UG7
endif
return x
endfunction
function AB7 takes real y returns real
local real UG7=GetRectMinY(bj_mapInitialPlayableArea)+75
set LP4="SafeY2"
if(y<UG7)then
return UG7
endif
set UG7=GetRectMaxY(bj_mapInitialPlayableArea)-75
if(y>UG7)then
return UG7
endif
return y
endfunction
function AC7 takes integer A37 returns nothing
local unit u=CreateUnit(Player($F),1211117657,0,0,270)
set LP4="PreloadAbility"
call UnitAddAbility(u,A37)
call UnitRemoveAbility(u,A37)
call RemoveUnit(u)
set u=null
endfunction
function A67 takes unit u,integer A37 returns nothing
call UnitAddAbility(u,A37)
call UnitRemoveAbility(u,A37)
endfunction
function AL7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer ia=R47(RP7,"abilcode")
set LP4="AL7"
call AC7(ia)
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function A17 takes integer ia,real A07 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="PreloadDotaAbilityDelayed"
call Q97(RP7,"abilcode",ia)
call TriggerRegisterTimerEvent(t,A07,false)
call TriggerAddCondition(t,Condition(function AL7))
set t=null
endfunction
function Tree_Killer takes nothing returns nothing
call KillDestructable(GetEnumDestructable())
endfunction
function A57 takes unit Z47 returns nothing
call QF7(GetHandleId(Z47),"DamageRegisterAlready",false)
call Q47(GetHandleId(Z47))
call RemoveUnit(Z47)
endfunction
function A27 takes unit hn,integer iB,integer ic returns nothing
if GetUnitAbilityLevel(hn,iB)==0 then
call UnitAddAbility(hn,iB)
endif
call SetUnitAbilityLevel(hn,iB,ic)
endfunction
function A_7 takes integer a,integer b returns integer
if(a<b)then
return a
else
return b
endif
endfunction
function B47 takes integer a,integer b returns integer
if(a<b)then
return b
else
return a
endif
endfunction
function B77 takes integer ih,integer a,integer b returns integer
return B47(A_7(ih,b),a)
endfunction
function B87 takes real a,real b returns real
if(a<b)then
return a
else
return b
endif
endfunction
function B97 takes real a,real b returns real
if(a<b)then
return b
else
return a
endif
endfunction
function iI takes nothing returns nothing
local integer RP7=GetHandleId(GetExpiredTimer())
local unit hn=QA7(RP7,"Unit")
set LP4="iI"
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+R77(RP7,"Damage"))
set hn=null
endfunction
function m6 takes unit hn,real BD7 returns nothing
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
set LP4="m6"
call QD7(RP7,"Damage",BD7)
call QG7(RP7,"Unit",hn)
call TimerStart(t,0,false,function iI)
set t=null
endfunction
function BE7 takes unit hn,real BD7 returns nothing
local real iK=GetUnitState(hn,UNIT_STATE_MAX_LIFE)
local real il=GetUnitState(hn,UNIT_STATE_LIFE)
set LP4="PreventDamage"
if(GetUnitState(hn,UNIT_STATE_LIFE)>1)then
if BD7>(iK-il)then
if BD7>=il then
call SetUnitState(hn,UNIT_STATE_LIFE,iK)
call m6(hn,BD7-(iK-il))
else
call m6(hn,BD7)
endif
else
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+BD7)
endif
endif
endfunction
function m9 takes unit p5,unit m5,real in returns boolean
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
set LP4="m9"
return((iN-hN)*(iN-hN)+(io-ho)*(io-ho))<in*in
endfunction
function Ma takes unit p5,unit m5 returns real
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
set LP4="Ma"
if p5==null or m5==null then
return I2R($540BE3FF)
else
return SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
endif
endfunction
function BF7 takes unit p5,location m5 returns real
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real hN=GetLocationX(m5)
local real ho=GetLocationY(m5)
set LP4="DistanceBetweenUnitAndPoint"
if p5==null then
return I2R($540BE3FF)
else
return SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
endif
endfunction
function BG7 takes unit hn returns nothing
call SetUnitState(hn,UNIT_STATE_MANA,GetUnitState(hn,UNIT_STATE_MAX_MANA))
endfunction
function BH7 takes unit hn,real iS returns nothing
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+iS)
endfunction
function BI7 takes nothing returns nothing
call PauseAllUnitsBJ(true)
endfunction
function RepeatedPauseAll takes nothing returns nothing
call TimerStart(CreateTimer(),1,true,function BI7)
endfunction
function iu takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="iu"
call DestroyEffect(Q17(RP7,"fx"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function BJ7 takes string iv,unit hn,string iV,real Hk returns nothing
local effect fx=AddSpecialEffectTarget(iv,hn,iV)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TimedLifeUnitEffect"
call QH7(RP7,"fx",fx)
call TriggerRegisterUnitEvent(t,hn,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function iu))
set fx=null
set t=null
endfunction
function iw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="iw"
call DestroyEffect(Q17(RP7,"fx"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function BK7 takes string iv,real x,real y,real Hk returns nothing
local effect fx=AddSpecialEffect(iv,x,y)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="TimedLifeEffect"
call QH7(JZ7,"fx",fx)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function iw))
set fx=null
set t=null
endfunction
function ix takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local string iv=R97(RP7,"Effect")
local string iV=R97(RP7,"Attach")
local integer iX=R47(RP7,"Count")
set LP4="ix"
call BJ7(iv,m5,iV,2)
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>iX then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function Mv takes timer t returns nothing
call PauseTimer(t)
call Q47(GetHandleId(t))
call DestroyTimer(t)
endfunction
function BM7 takes unit it,unit m5 returns boolean
local real x=RAbsBJ(GetUnitFacing(it)-GetUnitFacing(m5))
if(x<20 or x>340)then
set x=RAbsBJ(GetUnitFacing(it)-MY7(it,m5))
return(x<20 or x>340)
endif
return false
endfunction
function i4 takes nothing returns nothing
call DestroyLightning(Q07(GetHandleId(GetExpiredTimer()),"Lightning"))
endfunction
function BN7 takes string i6,real x1,real y1,real x2,real y2,real r,real g,real b,real a,real Hk returns nothing
local timer t=CreateTimer()
local lightning i7=AddLightning(i6,true,x1,y1,x2,y2)
set LP4="AddTimedLightning"
call SetLightningColor(i7,r,g,b,a)
call QJ7(GetHandleId(t),"Lightning",i7)
call TimerStart(t,Hk,false,function i4)
set t=null
endfunction
function BO7 takes string Hx,real Hk,unit HX,real Ia,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
set LP4="TextTagOnUnitEx"
call SetTextTagText(tt,Hx,Ia)
call SetTextTagPosUnit(tt,HX,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,Hk)
if IsUnitVisible(HX,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function BP7 takes player p,string BQ7,real NY7,unit JX7,real BR7,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
set LP4="TextTagOnUnitExForAllied"
call SetTextTagText(tt,BQ7,BR7)
call SetTextTagPosUnit(tt,JX7,64)
call SetTextTagColor(tt,r,g,b,a)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,NY7)
if IsPlayerAlly(GetLocalPlayer(),p) or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function BT7 takes trigger t,playerunitevent Ib returns nothing
local integer BU7=0
set LP4="TriggerRegisterAnyUnitEvent"
loop
call TriggerRegisterPlayerUnitEvent(t,Player(BU7),Ib,Condition(function WE7))
set BU7=BU7+1
exitwhen BU7==16
endloop
endfunction
function BV7 takes nothing returns nothing
if YE7(GetEnumDestructable())and IsDestructableAliveBJ(GetEnumDestructable())then
set sl=sl+1
call KillDestructable(GetEnumDestructable())
endif
endfunction
function BW7 takes real x,real y,real d returns integer
local rect r=Rect(x-d,y-d,x+d,y+d)
set LP4="KillTrees"
set sl=0
call EnumDestructablesInRect(r,Condition(function WE7),function BV7)
call RemoveRect(r)
set r=null
return sl
endfunction
function BX7 takes real x,real y returns boolean
return( not(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)))
endfunction
function BY7 takes sound BZ7,real x,real y returns nothing
call SetSoundPosition(BZ7,x,y,0)
call SetSoundVolume(BZ7,$7F)
set bj_lastPlayedSound=BZ7
if(BZ7!=null)then
call StartSound(BZ7)
endif
endfunction
function If takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local fogmodifier IF=QY7(RP7,"fog")
set LP4="If"
call FogModifierStop(IF)
call DestroyFogModifier(IF)
call Q47(RP7)
call RN7(t)
set t=null
set IF=null
return false
endfunction
function BA7 takes player p,real Hk,real x,real y,real r returns nothing
local trigger t=CreateTrigger()
local fogmodifier IF=CreateFogModifierRadius(p,FOG_OF_WAR_VISIBLE,x,y,r,true,true)
set LP4="TimedReveal"
call FogModifierStart(IF)
call QK7(GetHandleId(t),"fog",IF)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function If))
set IF=null
set t=null
endfunction
function IG takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function Ih takes nothing returns nothing
if YE7(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())>0 then
set EL=true
endif
endfunction
function nA takes real x,real y,real d returns boolean
local rect r=Rect(x-d,y-d,x+d,y+d)
set LP4="nA"
set EL=false
call EnumDestructablesInRect(r,null,function Ih)
call RemoveRect(r)
set r=null
return EL
endfunction
function Ii takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=QA7(JZ7,"Target")
local real Ij=R77(JZ7,"Speed")
local unit BB7=QA7(JZ7,"Projectile")
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local real BC7=GetUnitX(J67)
local real B37=GetUnitY(J67)
local real B67=Ij*.03
local real BL7=MZ7(x,y,BC7,B37)
local real B17=x+B67*Cos(BL7*bj_DEGTORAD)
local real B07=y+B67*Sin(BL7*bj_DEGTORAD)
local boolean B57=(LoadBoolean(C7,(JZ7),(698)))
set LP4="Ii"
call SetUnitX(BB7,B17)
call SetUnitY(BB7,B07)
call SetUnitFacing(BB7,BL7)
if A47(J67)and B57==false then
call KillUnit(BB7)
call Q47(JZ7)
call RN7(t)
elseif N67(BC7,B37,B17,B07)<=B67 then
call KillUnit(BB7)
set IM4=QA7(JZ7,"Source")
set IN4=J67
call ExecuteFunc(R97(JZ7,"Callback"))
call Q47(JZ7)
call RN7(t)
endif
set t=null
set J67=null
set BB7=null
return false
endfunction
function B27 takes unit p5,unit m5,integer IM,string In,real Ij returns trigger
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local real IN=GetUnitFacing(p5)
set LP4="CreateProjectileToUnit"
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function Ii))
call QD7(RP7,"Speed",Ij)
call QG7(RP7,"Target",m5)
call QE7(RP7,"Callback",In)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Projectile",CreateUnit(GetOwningPlayer(p5),IM,iN,io,IN))
call SaveBoolean(C7,(RP7),(698),(false))
set eC=t
set t=null
return eC
endfunction
function Io takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="Io"
call UnitAddAbility(QA7(RP7,"Unit"),1097625443)
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function IO takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit Z47=QA7(RP7,"Hero")
local real Ip=R77(RP7,"curscale")
local real AN7=Ip-(Ip-AP7(Z47))*iX/40
set LP4="IO"
if iX>40 or A47(Z47)then
call Q47(RP7)
call RN7(t)
else
call SetUnitScale(Z47,AN7,AN7,AN7)
endif
set t=null
set Z47=null
return false
endfunction
function ng takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real Iq=R77(RP7,"EndScale")
set LP4="ng"
call Q47(RP7)
call RN7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function IO))
set RP7=GetHandleId(t)
call QD7(RP7,"curscale",Iq)
call QG7(RP7,"Hero",Z47)
set t=null
set Z47=null
return false
endfunction
function nI takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit Z47=QA7(RP7,"Hero")
local real Ir=(R77(RP7,"scale")-AP7(Z47))*iX/40
local real AN7=AP7(Z47)+Ir
set LP4="nI"
if iX>40 or A47(Z47)then
call Q47(RP7)
call RN7(t)
else
call SetUnitScale(Z47,AN7,AN7,AN7)
endif
set t=null
set Z47=null
return false
endfunction
function B_7 takes unit Z47,real Hk,real AN7 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real Is=AN7*AP7(Z47)
local real Iq=Is
set LP4="SetUnitScaleTimed"
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"EndScale",Iq)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function ng))
if Hk>3 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function nI))
set RP7=GetHandleId(t)
call QD7(RP7,"scale",Is)
call QG7(RP7,"Hero",Z47)
else
call SetUnitScale(Z47,Iq,Iq,Iq)
endif
set t=null
endfunction
function IS takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer It=R47(RP7,"Ability")
set LP4="IS"
if Z47!=null and GetUnitAbilityLevel(Z47,It)>0 then
call UnitRemoveAbility(Z47,It)
endif
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function C47 takes unit u,integer It,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="GiveUnitAbilityForDuration"
call Z27(u,It)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function IS))
call QG7(RP7,"Hero",u)
call Q97(RP7,"Ability",It)
set t=null
endfunction
function Iu takes nothing returns nothing
set bj_groupCountUnits=bj_groupCountUnits+1
endfunction
function C77 takes group g returns integer
set bj_groupCountUnits=0
call ForGroup(g,function Iu)
return bj_groupCountUnits
endfunction
function Iv takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local fogmodifier IF=QY7(RP7,"fog")
set LP4="Iv"
call FogModifierStop(IF)
call DestroyFogModifier(IF)
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function C87 takes fogmodifier IF,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TimedFog"
call FogModifierStart(IF)
call QK7(RP7,"fog",IF)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Iv))
set t=null
endfunction
function Iw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer C97=GetHandleId(t)
local integer CD7=(LoadInteger(C7,(C97),(55)))
local destructable d=WH7(CD7)
set LP4="Iw"
if d!=null then
call RemoveDestructable(d)
endif
call WJ7(CD7)
call Q47(C97)
call RN7(t)
set d=null
set t=null
return false
endfunction
function CE7 takes destructable d,real CF7 returns nothing
local trigger t=CreateTrigger()
local integer C97=GetHandleId(t)
set LP4="DestructableTimedLife"
call TriggerRegisterTimerEvent(t,CF7,false)
call TriggerAddCondition(t,Condition(function Iw))
call SaveInteger(C7,(C97),(55),(WK7(d)))
set t=null
endfunction
function Ix takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer It=R47(RP7,"Ability")
set LP4="Ix"
if Z47!=null and GetUnitAbilityLevel(Z47,It)>0 then
call UnitRemoveAbility(Z47,It)
endif
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function nl takes unit u,integer It,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="nl"
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Ix))
call QG7(RP7,"Hero",u)
call Q97(RP7,"Ability",It)
set t=null
endfunction
function Iy takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="Iy"
call SetUnitAnimation(QA7(RP7,"Unit"),"stand")
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function CG7 takes unit u,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="ResetUnitAnimationTimed"
call QG7(RP7,"Unit",u)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function Iy))
set t=null
endfunction
function nm takes real Hk,boolean IZ,real x,real y,real I0,real I1,real I2,real I3,real I4 returns nothing
local real I5
local real I6
local real I7
set LP4="nm"
if(I1<=0 or I4<=0 or I3<=0)then
return
endif
set I6=2.*Hk/I3
set I5=2.*I1/I4
set I7=I0/I1
call TerrainDeformRipple(x,y,I1,I2,R2I(Hk*$3E8),1,I5,I6,I7,IZ)
endfunction
function CH7 takes player hV,unit hn,integer hY returns nothing
local texttag t=CreateTextTag()
set LP4="GiveGoldWithEffect"
call SetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(hV,PLAYER_STATE_RESOURCE_GOLD)+hY)
call SetTextTagText(t,"+"+I2S(hY),.025)
call SetTextTagPosUnit(t,hn,0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==hV then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function I9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="I9"
call RemoveUnit(QA7(RP7,"Unit"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function nn takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="nn"
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function I9))
call QG7(RP7,"Unit",u)
set t=null
endfunction
function jA takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="jA"
call RemoveUnit(QA7(RP7,"Unit"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function jb takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="jb"
call KillUnit(QA7(RP7,"Unit"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function CI7 takes unit u,real d returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="RemoveUnitTimedAndKill"
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function jb))
call QG7(RP7,"Unit",u)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,d+.01,false)
call TriggerAddCondition(t,Condition(function jA))
call QG7(RP7,"Unit",u)
set t=null
endfunction
function CJ7 takes sound BZ7 returns nothing
if BZ7!=null and CW[GetPlayerId(GetLocalPlayer())]==false then
call StartSound(BZ7)
endif
endfunction
function CK7 takes sound BZ7,player HU returns nothing
if GetLocalPlayer()==HU and CW[GetPlayerId(HU)]==false then
call StartSound(BZ7)
endif
endfunction
function CM7 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false)!=null
endfunction
function CN7 takes nothing returns nothing
call CK7(VI4,GetOwningPlayer(GetEnumUnit()))
endfunction
function CO7 takes unit CP7,sound CQ7,real x,real y,real r returns nothing
local group g=ZI7()
set LP4="PlaySoundForNearbyPlayers"
set IM4=CP7
set VI4=CQ7
call GroupEnumUnitsInRange(g,x,y,r,Condition(function CM7))
call GroupRemoveUnit(g,CP7)
call ForGroup(g,function CN7)
call ZH7(g)
set g=null
endfunction
function CR7 takes player p returns nothing
if GetLocalPlayer()==p then
call ClearTextMessages()
endif
endfunction
function CS7 takes unit u,real d returns nothing
call SetUnitState(u,UNIT_STATE_LIFE,B97(GetUnitState(u,UNIT_STATE_LIFE)-d,1))
endfunction
function CT7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer CU7=R47(RP7,"AbilityID")
set LP4="CT7"
if UnitRemoveAbility(m5,CU7) or GetUnitAbilityLevel(m5,CU7)==0 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function CV7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer CU7=R47(RP7,"AbilityID")
set LP4="CV7"
call Q47(RP7)
call RN7(t)
if UnitRemoveAbility(m5,CU7)==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function CT7))
call QG7(RP7,"Target",m5)
call Q97(RP7,"AbilityID",CU7)
endif
set t=null
set m5=null
return false
endfunction
function CW7 takes unit m5,integer CU7,integer X37,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="AddTimedAbility"
call Z27(m5,CU7)
call SetUnitAbilityLevel(m5,CU7,X37)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function CV7))
call QG7(RP7,"Target",m5)
call Q97(RP7,"AbilityID",CU7)
set t=null
endfunction
function CX7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer o6=R47(RP7,"AbilityID")
local integer CY7=R47(RP7,"AbilityID")
set LP4="CX7"
call UnitRemoveAbility(m5,CY7)
if UnitRemoveAbility(m5,o6) or GetUnitAbilityLevel(m5,o6)==0 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function CZ7 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer o6=R47(RP7,"AbilityID")
local integer CY7=R47(RP7,"BuffID")
set LP4="CZ7"
call Q47(RP7)
call RN7(t)
call UnitRemoveAbility(m5,CY7)
if UnitRemoveAbility(m5,o6)==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function CX7))
call QG7(RP7,"Target",m5)
call Q97(RP7,"AbilityID",o6)
call Q97(RP7,"BuffID",CY7)
endif
set t=null
set m5=null
return false
endfunction
function CA7 takes unit m5,integer o6,integer X37,real CB7,integer CY7 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="AddTimedAbilityAndRemove"
call Z27(m5,o6)
call SetUnitAbilityLevel(m5,o6,X37)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,CB7,false)
call TriggerAddCondition(t,Condition(function CZ7))
call QG7(RP7,"Target",m5)
call Q97(RP7,"AbilityID",o6)
call Q97(RP7,"BuffID",CY7)
set t=null
endfunction
function CC7 takes unit S4 returns boolean
local integer z8=GetUnitTypeId(S4)
return z8==1848651828 or z8==1848652103 or z8==1848652099 or z8==1848652088 or z8==1697656907 or z8==1697656905 or z8==1697656908 or z8==1697657162
endfunction
function C37 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)!=null
endfunction
function GenericCondition_Structure takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)!=null
endfunction
function C67 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisAndStructureWithAncient takes nothing returns boolean
return Y57(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoInvisAndStructureWithAncient takes nothing returns boolean
return IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)
endfunction
function GenericCondition_EnemyUnitsExNoImmuneNoInvisWithAncient takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function CL7 takes nothing returns boolean
return(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function C17 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function C07 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and WO7(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function C57 takes unit u returns boolean
return GetUnitAbilityLevel(u,1097167980)>0 or GetUnitAbilityLevel(u,1113815395)>0 or GetUnitAbilityLevel(u,1113815346)>0 or GetUnitAbilityLevel(u,1110454606)>0
endfunction
function C27 takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110459185))>0)or(GetUnitAbilityLevel((u),(1111844210))>0)or(GetUnitAbilityLevel((u),(1113943655))>0)or(GetUnitAbilityLevel((u),(1113943649))>0)or(GetUnitAbilityLevel((u),(1110454583))>0)or(GetUnitAbilityLevel((u),(1110456120))>0)or(GetUnitAbilityLevel((u),(1110456390))>0)or(GetUnitAbilityLevel((u),(1110456389))>0)or(GetUnitAbilityLevel((u),(1110459730))>0)or(GetUnitAbilityLevel((u),(1110459982))>0)
endfunction
function C_7 takes unit u returns nothing
call UnitRemoveAbility(u,1110459185)
call UnitRemoveAbility(u,1111844210)
call UnitRemoveAbility(u,1113943655)
call UnitRemoveAbility(u,1113943649)
call UnitRemoveAbility(u,1110454583)
call UnitRemoveAbility(u,1110456120)
call UnitRemoveAbility(u,1110456390)
call UnitRemoveAbility(u,1110456389)
call UnitRemoveAbility(u,1110459730)
call UnitRemoveAbility(u,1110459982)
endfunction
function L47 takes unit u returns nothing
call UnitRemoveAbility(u,1096971630)
call SaveInteger(C7,(GetHandleId(u)),(790),(0))
endfunction
function L77 takes unit u returns nothing
local integer JA7=GetHandleId(u)
local integer L87=(LoadInteger(C7,(JA7),(790)))
call Z27(u,1096971630)
set L87=L87+1
call SaveInteger(C7,(JA7),(790),(L87))
endfunction
function L97 takes unit u returns nothing
local integer JA7=GetHandleId(u)
local integer L87=(LoadInteger(C7,(JA7),(790)))
set L87=IMaxBJ(L87-1,0)
call SaveInteger(C7,(JA7),(790),(L87))
if L87==0 then
call L47(u)
endif
endfunction
function LD7 takes unit u returns boolean
return(u==J34)or(u==J64)or(u==JL4)or(u==J14)or(u==J04)or(u==J54)or(u==J24)or(u==J_4)or(u==K44)or(u==K74)or(u==K84)or(u==K94)or(u==KD4)or(u==KE4)or(u==KF4)or(u==KG4)or(u==KH4)or(u==JF4)or(u==JG4)or(u==JH4)or(u==JI4)or(u==JJ4)or(u==JK4)or(u==JM4)or(u==JN4)or(u==JO4)or(u==JP4)or(u==JQ4)or(u==JR4)or(u==JS4)or(u==JT4)or(u==JU4)or(u==JV4)or(u==JW4)
endfunction
function LE7 takes nothing returns boolean
return LD7(GetFilterUnit())and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetEnumUnit()))and GetUnitLifePercent(GetFilterUnit())<=90.
endfunction
function LF7 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsExHeroesVision takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4)))!=null
endfunction
function GenericCondition_EnemyUnitsExHeroes takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function LG7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1110455864)>0 or GetUnitAbilityLevel(u,1110456148)>0 or GetUnitAbilityLevel(u,1110456118)>0 or GetUnitAbilityLevel(u,1112504171)>0 or GetUnitAbilityLevel(u,1110455378)>0 or GetUnitAbilityLevel(u,1110458677)>0 or GetUnitAbilityLevel(u,1110454609)>0 or GetUnitAbilityLevel(u,1110454326)>0 or GetUnitAbilityLevel(u,1114205814)>0 or GetUnitAbilityLevel(u,1097886070)>0 or GetUnitAbilityLevel(u,1093677617)>0 or GetUnitAbilityLevel(u,1093684020)>0 or GetUnitAbilityLevel(u,1093687362)>0 or GetUnitAbilityLevel(u,1093687858)>0 or GetUnitAbilityLevel(u,1093748545)>0 or GetUnitAbilityLevel(u,1093748823)>0 or GetUnitAbilityLevel(u,1093748824)>0 or GetUnitAbilityLevel(u,1093677130)>0 or GetUnitAbilityLevel(u,1110456395)>0 or GetUnitAbilityLevel(u,1110456408)>0 or GetUnitAbilityLevel(u,1110455097)>0 or GetUnitAbilityLevel(u,1110454347)>0 or GetUnitAbilityLevel(u,1112041075)>0 or GetUnitAbilityLevel(u,1093743664)>0 or GetUnitAbilityLevel(u,1110454833)>0 or GetUnitAbilityLevel(u,1093687876)>0 or GetUnitAbilityLevel(u,1093684052)>0 or GetUnitAbilityLevel(u,1110460216)>0
endfunction
function LH7 takes unit J57 returns boolean
return GetUnitAbilityLevel(J57,1093748823)>0 or GetUnitAbilityLevel(J57,1093748824)>0 or GetUnitAbilityLevel(J57,1110454347)>0 or GetUnitAbilityLevel(J57,1110456118)>0 or GetUnitAbilityLevel(J57,1110456148)>0 or GetUnitAbilityLevel(J57,1093677617)>0 or GetUnitAbilityLevel(J57,1093810499)>0 or GetUnitAbilityLevel(J57,1112041075)>0 or GetUnitAbilityLevel(J57,1110456395)>0 or GetUnitAbilityLevel(J57,1110455864)>0 or GetUnitAbilityLevel(J57,1110455097)>0 or GetUnitAbilityLevel(J57,1093677130)>0 or GetUnitAbilityLevel(J57,1093684052)>0
endfunction
function LI7 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1868921189 or PD7(GetFilterUnit(),SU[VC])or GetUnitAbilityLevel(GetFilterUnit(),1093743691)>0 or GetUnitAbilityLevel(GetFilterUnit(),1095332962)>0
endfunction
function LJ7 takes unit u returns boolean
return GetUnitAbilityLevel(u,1110454356)==0 and GetUnitAbilityLevel(u,1110454348)==0
endfunction
function LK7 takes unit u,player p returns boolean
return LG7(u)==false or IsUnitVisible(GetFilterUnit(),p)
endfunction
function GenericCondition_EnemyUnitsExHeroesNoDotaInvis takes nothing returns boolean
return(((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and LG7(GetFilterUnit())==false)!=null
endfunction
function LM7 takes nothing returns boolean
return(((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(LG7(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))))!=null
endfunction
function LN7 takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1093751362)==0)!=null
endfunction
function LO7 takes nothing returns boolean
return(((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4)))and C57(GetFilterUnit())==false)!=null
endfunction
function XMI2 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LP7 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function LQ7 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LR7 takes unit OR7 returns boolean
return GetUnitTypeId(OR7)==1848651828 or GetUnitTypeId(OR7)==1848652088 or GetUnitTypeId(OR7)==1848652099 or GetUnitTypeId(OR7)==1848652103
endfunction
function LS7 takes nothing returns boolean
return IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())==1700946284 or GetUnitTypeId(GetFilterUnit())==1970107511)
endfunction
function LT7 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and YF7(GetFilterUnit())==false)!=null
endfunction
function LU7 takes nothing returns boolean
return LT7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function jE takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false and YF7(GetFilterUnit())==false
endfunction
function LV7 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsVisible takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function GenericCondition_EnemyUnitsAndVisibleOrWW takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))or LG7(GetFilterUnit())))!=null
endfunction
function jF takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and LT7()
endfunction
function LW7 takes nothing returns boolean
return IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and LT7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))
endfunction
function LX7 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LY7 takes nothing returns boolean
return((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4)))and Y57(GetFilterUnit())==false and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LZ7 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit()))))!=null
endfunction
function LA7 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LB7 takes nothing returns boolean
return((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LC7 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit()))))!=null
endfunction
function L37 takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false)!=null
endfunction
function L67 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LL7 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function jh takes nothing returns boolean
return IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and LT7()
endfunction
function L17 takes nothing returns boolean
return(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function ji takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function jI takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function L07 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function L57 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function GenericCondition_EnemyHeroesEx_OLD takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function L27 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_EnemyHeroesExNoDotAInvis takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)or LG7(GetEnumUnit()))!=null
endfunction
function L_7 takes nothing returns boolean
return(LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function D48 takes nothing returns boolean
return LT7()
endfunction
function D78 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function D88 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_MyUnits takes nothing returns boolean
return(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function D98 takes nothing returns boolean
return(LT7()and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function jL takes nothing returns boolean
return(LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)or IsUnitIllusion(GetFilterUnit()))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function jm takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)!=null)!=null
endfunction
function GenericCondition_EnemyUnitsExVisible takes nothing returns boolean
return LF7()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))
endfunction
function GenericCondition_EnemyUnitsExNoWW takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))or(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))==false and LG7(GetFilterUnit()))==false))!=null
endfunction
function jn takes nothing returns boolean
return(LT7()and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function ny takes nothing returns boolean
return jn()and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))
endfunction
function DD8 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit()) and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(GetFilterUnit())!=1848657461)!=null
endfunction
function DE8 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IM4)) and XX7(GetFilterUnit())>0
endfunction
function DF8 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false))!=null
endfunction
function DG8 takes nothing returns boolean
return(Y57(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit()))))!=null
endfunction
function DH8 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DI8 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DJ8 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function GenericCondition_AlliedHeroesAndCreeps takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or GetOwningPlayer(GetFilterUnit())==Y7[0]or GetOwningPlayer(GetFilterUnit())==Z7[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DK8 takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and WO7(GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))!=null
endfunction
function DM8 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or GetOwningPlayer(GetFilterUnit())==Y7[0]or GetOwningPlayer(GetFilterUnit())==Z7[0])and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DN8 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DO8 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit())) and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function DP8 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IM4)) and S37(GetFilterUnit())and GetWidgetLife(GetFilterUnit())>.405 and GetOwningPlayer(GetFilterUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE)
endfunction
function DQ8 takes nothing returns nothing
local destructable m5=GetEnumDestructable()
local real a=Atan2(GetDestructableY(m5)-GetUnitY(IM4),GetDestructableX(m5)-GetUnitX(IM4))
local real DR8=RAbsBJ((IH4-a)*bj_RADTODEG)
set LP4="DQ8"
if(YE7(m5)or GetDestructableTypeId(m5)==1110454325)and GetDestructableLife(m5)>1 and DR8<wB and DR8<(QU-5)then
set wB=DR8
set SB=m5
endif
set m5=null
endfunction
function DS8 takes unit DT8,unit p5,real l4 returns destructable
local real x=GetUnitX(DT8)
local real y=GetUnitY(DT8)
local rect r=Rect(x-zB,y-zB,x+zB,y+zB)
set LP4="aEe"
set wB=9999
set IM4=DT8
set SB=null
call EnumDestructablesInRect(r,Condition(function WE7),function DQ8)
call RemoveRect(r)
set r=null
return SB
endfunction
function DU8 takes nothing returns nothing
local unit m5=GetEnumUnit()
local real a=Atan2(GetUnitY(m5)-GetUnitY(IM4),GetUnitX(m5)-GetUnitX(IM4))
local real DR8=RAbsBJ((IH4-a)*bj_RADTODEG)
set LP4="DU8"
if DR8<wB and DR8<QU and m5!=IN4 then
set wB=DR8
set TB=m5
endif
set m5=null
endfunction
function DV8 takes unit DT8,unit p5,real l4 returns unit
local group g=ZI7()
set LP4="aOe"
set TB=null
set wB=9999
set IM4=DT8
set IH4=Atan2(GetUnitY(p5)-WU4,GetUnitX(p5)-WT4)
set IN4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),yB,Condition(function LX7))
call ForGroup(g,function DU8)
call ZH7(g)
set g=null
return TB
endfunction
function DW8 takes unit DT8,unit p5,real l4 returns unit
local group g=ZI7()
set LP4="aOe"
set TB=null
set wB=9999
set IM4=DT8
set IH4=l4
set IN4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),yB,Condition(function LY7))
call ForGroup(g,function DU8)
call ZH7(g)
set g=null
return TB
endfunction
function DX8 takes real DY8 returns integer
if DY8>=4. then
return 24
elseif DY8>=3.75 then
return 23
elseif DY8>=3.5 then
return 22
elseif DY8>=3.25 then
return 21
elseif DY8>=3 then
return 20
elseif DY8>=2.8 then
return 19
elseif DY8>=2.75 then
return 18
elseif DY8>=2.6 then
return 17
elseif DY8>=2.5 then
return 16
elseif DY8>=2.4 then
return $F
elseif DY8>=2.25 then
return $E
elseif DY8>=2.2 then
return $D
elseif DY8>=2 then
return $C
elseif DY8>=1.8 then
return $B
elseif DY8>=1.75 then
return $A
elseif DY8>=1.65 then
return 9
elseif DY8>=1.5 then
return 8
elseif DY8>=1.4 then
return 7
elseif DY8>=1.25 then
return 6
elseif DY8>=1.2 then
return 5
elseif DY8>=1 then
return 4
elseif DY8>=.75 then
return 3
elseif DY8>=.5 then
return 2
elseif DY8>=.25 then
return 1
endif
return 1
endfunction
function DZ8 takes unit p5,unit m5,real CB7 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer DB8=DX8(CB7)
call UnitAddAbility(DA8,1093687350)
call SetUnitAbilityLevel(DA8,1093687350,DB8)
call IssueTargetOrderById(DA8,$D007F,m5)
set DA8=null
endfunction
function D38 takes unit p5,unit m5,integer D68,real BD7 returns nothing
if D68==0 then
return
endif
if D68==1 then
call UnitDamageTarget(p5,m5,BD7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
elseif D68==2 then
call UnitDamageTarget(p5,m5,BD7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif D68==3 then
call UnitDamageTarget(p5,m5,BD7,true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
elseif D68==4 then
call UnitDamageTarget(p5,m5,BD7,true,true,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
elseif D68==5 then
call UnitDamageTarget(p5,m5,BD7,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function DL8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local integer D68=R47(RP7,"DamageType")
local real BD7=R77(RP7,"Damage")
set LP4="DL8"
call D38(p5,m5,D68,BD7)
call WF7(D18)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function D08 takes unit p5,unit m5,integer D68,real BD7,real CB7 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="xTv"
call QG7(RP7,"Source",p5)
call Q97(RP7,"TargetIndex",WI7(m5))
call Q97(RP7,"DamageType",D68)
call QD7(RP7,"Damage",BD7*1.)
call TriggerRegisterTimerEvent(t,CB7,false)
call TriggerAddCondition(t,Condition(function DL8))
set t=null
endfunction
function jQ takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer D68=R47(RP7,"DamageType")
local real BD7=R77(RP7,"Damage")
set LP4="jQ"
call D38(p5,m5,D68,BD7)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function D58 takes unit p5,unit m5,integer D68,real BD7,real Hk returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="DamageTargetDelayed"
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"DamageType",D68)
call QD7(RP7,"Damage",BD7)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function jQ))
set t=null
endfunction
function D28 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer D_8
set LP4="AddDamageBonus"
if d<1 then
call UnitRemoveAbility(u,H34[0])
call UnitRemoveAbility(u,H34[1])
call UnitRemoveAbility(u,H34[2])
call UnitRemoveAbility(u,H34[3])
call UnitRemoveAbility(u,H34[4])
call UnitRemoveAbility(u,H34[5])
call UnitRemoveAbility(u,H34[6])
call UnitRemoveAbility(u,H34[7])
call UnitRemoveAbility(u,H34[8])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set D_8=8
set i=0
loop
exitwhen i>D_8
if b[i]==1 then
call UnitAddAbility(u,H34[i])
else
call UnitRemoveAbility(u,H34[i])
endif
set i=i+1
endloop
endfunction
function E48 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer E78
set LP4="AddHPBonus"
if d<1 then
call UnitRemoveAbility(u,TJ4[0])
call UnitRemoveAbility(u,TJ4[1])
call UnitRemoveAbility(u,TJ4[2])
call UnitRemoveAbility(u,TJ4[3])
call UnitRemoveAbility(u,TJ4[4])
call UnitRemoveAbility(u,TJ4[5])
call UnitRemoveAbility(u,TJ4[6])
call UnitRemoveAbility(u,TJ4[7])
call UnitRemoveAbility(u,TJ4[8])
call UnitRemoveAbility(u,TJ4[9])
call UnitRemoveAbility(u,TJ4[$A])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set E78=$A
set i=0
loop
exitwhen i>E78
if b[i]==1 then
call UnitAddAbility(u,TJ4[i])
else
call UnitRemoveAbility(u,TJ4[i])
endif
set i=i+1
endloop
endfunction
function E88 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer D_8
set LP4="xwv"
if d<1 then
call UnitRemoveAbility(u,H64[0])
call UnitRemoveAbility(u,H64[1])
call UnitRemoveAbility(u,H64[2])
call UnitRemoveAbility(u,H64[3])
call UnitRemoveAbility(u,H64[4])
call UnitRemoveAbility(u,H64[5])
call UnitRemoveAbility(u,H64[6])
call UnitRemoveAbility(u,H64[7])
call UnitRemoveAbility(u,H64[8])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set D_8=8
set i=0
loop
exitwhen i>D_8
if b[i]==1 then
call UnitAddAbility(u,H64[i])
else
call UnitRemoveAbility(u,H64[i])
endif
set i=i+1
endloop
endfunction
function E98 takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer ED8
set LP4="AddNegativeArmorBonus"
if d<1 then
call UnitRemoveAbility(u,HL4[0])
call UnitRemoveAbility(u,HL4[1])
call UnitRemoveAbility(u,HL4[2])
call UnitRemoveAbility(u,HL4[3])
call UnitRemoveAbility(u,HL4[4])
call UnitRemoveAbility(u,HL4[5])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set ED8=i
set i=0
loop
exitwhen i>ED8
if b[i]==1 then
call UnitAddAbility(u,HL4[i])
else
call UnitRemoveAbility(u,HL4[i])
endif
set i=i+1
endloop
endfunction
function EE8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local integer i=R47(RP7,"i")
local string c="|c006699CC"
set LP4="EE8"
if(GetObjectName((1848657992)))=="Language: English" and(MI4[(i)]!="")then
if GetTriggerEvalCount(t)==1 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 1: "+c+MI4[i]+"|r")
call CK7(zR,p)
elseif GetTriggerEvalCount(t)==2 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 2: "+c+MJ4[i]+"|r")
call CK7(zR,p)
elseif GetTriggerEvalCount(t)==3 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 3: "+c+MK4[i]+"|r")
call CK7(zR,p)
elseif GetTriggerEvalCount(t)==4 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 4: "+c+MM4[i]+"|r")
call CK7(zR,p)
elseif GetTriggerEvalCount(t)==5 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Tip 5: "+c+MN4[i]+"|r")
call CK7(zR,p)
endif
endif
if GetTriggerEvalCount(t)==5 then
call RN7(t)
call Q47(RP7)
endif
set t=null
return false
endfunction
function EF8 takes player p,integer i returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="xzv"
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerRegisterTimerEvent(t,300.,true)
call TriggerAddCondition(t,Condition(function EE8))
call QN7(RP7,"p",p)
call Q97(RP7,"i",i)
set t=null
endfunction
function EG8 takes unit CP7 returns integer
local integer XZ7=GetUnitTypeId(CP7)
local integer EH8=1865429328
set LP4="GetVisionUnit"
if XZ7==1432646245 then
set EH8=1865429326
elseif XZ7==1164799855 or XZ7==1211117641 or XZ7==1211119409 or XZ7==1160785973 then
set EH8=1865429327
endif
return EH8
endfunction
function EI8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
set LP4="EI8"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call KillUnit(DA8)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
endif
set t=null
set CP7=null
set DA8=null
return false
endfunction
function EJ8 takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),EG8(CP7),GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="Buyback_VisionFollower"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EI8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
set t=null
endfunction
function EK8 takes integer EM8 returns boolean
local integer i=0
set LP4="IsBuybackUnit"
loop
exitwhen i>59
if EM8==U9[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function EN8 takes integer X37 returns integer
local real EO8=O97()-M24
local real EP8=(R2I(EO8)/ 60)-(1/ 2)
local real EQ8=100+X37*X37*1.5+EP8*$F
local integer ER8
set LP4="Buyback_GetUnitId"
set ER8=R2I(EQ8/ 50)
set ER8=IMinBJ(ER8,59)
set ER8=IMaxBJ(ER8,0)
return ER8
endfunction
function ES8 takes player p returns nothing
local integer id=GetPlayerId(p)
local unit ET8=KT4[id]
local unit EU8=G7[id]
local integer EV8=GetHeroLevel(EU8)
local integer i=0
set LP4="BuybackUpdatePlayer"
if L then
return
endif
if X64==false then
return
endif
if V9[id]==1747993652 then
return
endif
if V9[id]!=0 then
call RemoveUnitFromStock(ET8,V9[id])
endif
call AddUnitToStock(ET8,U9[EN8(EV8)],1,1)
set V9[id]=U9[EN8(EV8)]
set EU8=null
set ET8=null
endfunction
function EW8 takes nothing returns boolean
if L then
return false
endif
call ES8(Y7[1])
call ES8(Y7[2])
call ES8(Y7[3])
call ES8(Y7[4])
call ES8(Y7[5])
call ES8(Z7[1])
call ES8(Z7[2])
call ES8(Z7[3])
call ES8(Z7[4])
call ES8(Z7[5])
return false
endfunction
function EX8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer id=(LoadInteger(C7,(JZ7),(34)))
local unit EY8=KT4[id]
local unit ZO7=G7[id]
local integer DB8=GetHeroLevel(ZO7)
local integer i=0
set LP4="EX8"
call UnitRemoveAbility(EY8,1093808213)
call AddUnitToStock(EY8,U9[EN8(DB8)],1,1)
set V9[id]=U9[EN8(DB8)]
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set ZO7=null
return false
endfunction
function EZ8 takes player p returns nothing
local integer id=GetPlayerId(p)
local unit EY8=KT4[id]
local unit ZO7=G7[id]
local integer DB8=GetHeroLevel(ZO7)
local integer i=0
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="Buyback_StartCooldown"
call EJ8(ZO7)
loop
exitwhen i>59
call RemoveUnitFromStock(EY8,U9[i])
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function EX8))
call TriggerRegisterTimerEvent(t,300,false)
call SaveInteger(C7,(JZ7),(34),(id))
set V9[id]=1747993652
call UnitAddAbility(EY8,1093808213)
call IssueImmediateOrderById(EY8,$D022E)
set ZO7=null
set EY8=null
set t=null
endfunction
function EA8 takes nothing returns nothing
set KZ4[GetPlayerId(Y7[1])]=0
set KA4[GetPlayerId(Y7[1])]=66
set KB4[GetPlayerId(Y7[1])]=$FF
set KZ4[GetPlayerId(Y7[2])]=48
set KA4[GetPlayerId(Y7[2])]=$E6
set KB4[GetPlayerId(Y7[2])]=$B9
set KZ4[GetPlayerId(Y7[3])]=50
set KA4[GetPlayerId(Y7[3])]=0
set KB4[GetPlayerId(Y7[3])]=$81
set KZ4[GetPlayerId(Y7[4])]=$FF
set KA4[GetPlayerId(Y7[4])]=$FC
set KB4[GetPlayerId(Y7[4])]=1
set KZ4[GetPlayerId(Y7[5])]=$FF
set KA4[GetPlayerId(Y7[5])]=50
set KB4[GetPlayerId(Y7[5])]=0
set KZ4[GetPlayerId(Z7[1])]=$DC
set KA4[GetPlayerId(Z7[1])]=50
set KB4[GetPlayerId(Z7[1])]=50
set KZ4[GetPlayerId(Z7[2])]=50
set KA4[GetPlayerId(Z7[2])]=50
set KB4[GetPlayerId(Z7[2])]=50
set KZ4[GetPlayerId(Z7[3])]=75
set KA4[GetPlayerId(Z7[3])]=$96
set KB4[GetPlayerId(Z7[3])]=$BE
set KZ4[GetPlayerId(Z7[4])]=16
set KA4[GetPlayerId(Z7[4])]=60
set KB4[GetPlayerId(Z7[4])]=18
set KZ4[GetPlayerId(Z7[5])]=68
set KA4[GetPlayerId(Z7[5])]=42
set KB4[GetPlayerId(Z7[5])]=4
endfunction
function EB8 takes nothing returns nothing
local integer T8
local integer U8
set LP4="EB8"
set P[GetPlayerId(Y7[0])]="|c00ff0303"
set P[GetPlayerId(Y7[1])]="|c000042ff"
set P[GetPlayerId(Y7[2])]="|c001ce6b9"
set P[GetPlayerId(Y7[3])]="|c00540081"
set P[GetPlayerId(Y7[4])]="|c00fffc01"
set P[GetPlayerId(Y7[5])]="|c00ff8000"
set P[GetPlayerId(Z7[0])]="|c0020c000"
set P[GetPlayerId(Z7[1])]="|c00e55bb0"
set P[GetPlayerId(Z7[2])]="|c00959697"
set P[GetPlayerId(Z7[3])]="|c007ebff1"
set P[GetPlayerId(Z7[4])]="|c00106246"
set P[GetPlayerId(Z7[5])]="|c004e2a04"
call SetPlayerColor(Y7[0],PLAYER_COLOR_RED)
call SetPlayerColor(Y7[1],PLAYER_COLOR_BLUE)
call SetPlayerColor(Y7[2],PLAYER_COLOR_CYAN)
call SetPlayerColor(Y7[3],PLAYER_COLOR_PURPLE)
call SetPlayerColor(Y7[4],PLAYER_COLOR_YELLOW)
call SetPlayerColor(Y7[5],PLAYER_COLOR_ORANGE)
call SetPlayerColor(Z7[0],PLAYER_COLOR_GREEN)
call SetPlayerColor(Z7[1],PLAYER_COLOR_PINK)
call SetPlayerColor(Z7[2],PLAYER_COLOR_LIGHT_GRAY)
call SetPlayerColor(Z7[3],PLAYER_COLOR_LIGHT_BLUE)
call SetPlayerColor(Z7[4],PLAYER_COLOR_AQUA)
call SetPlayerColor(Z7[5],PLAYER_COLOR_BROWN)
set T8=1
set U8=5
loop
call MB7(Y7[T8])
if(WQ7(Y7[T8]))then
call SetPlayerName(Y7[T8],I2S(T8)+MA7(Y7[T8])+"Computer")
endif
call MB7(Z7[T8])
if(WQ7(Z7[T8]))then
call SetPlayerName(Z7[T8],I2S(5+T8)+MA7(Z7[T8])+"Computer")
endif
set T8=T8+1
exitwhen T8>U8
endloop
endfunction
function EC8 takes unit PR7 returns boolean
return GetUnitAbilityLevel(PR7,1093678162)>0 and WO7(GetOwningPlayer(PR7))
endfunction
function E38 takes real d returns boolean
return 2<d and d<$BB8
endfunction
function E68 takes nothing returns nothing
local integer T8=1
set LP4="E68"
set Le=Y7[1]
loop
exitwhen WP7(Le)or T8>5
set T8=T8+1
set Le=Y7[T8]
endloop
if not WP7(Le)then
set Le=Z7[1]
set T8=1
loop
exitwhen WP7(Le)or T8>5
set T8=T8+1
set Le=Z7[T8]
endloop
endif
endfunction
function EL8 takes player p,string E18,integer E08 returns nothing
local string id=I2S(GetPlayerId(p))
set LP4="Traffic_GenericData"
call StoreInteger(IU4,id,E18,E08)
if WR7(Le)==false then
call E68()
endif
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,id,E18)
endif
endfunction
function E58 takes string E18,integer E08 returns nothing
call StoreInteger(IU4,"Data",E18,E08)
if WR7(Le)==false then
call E68()
endif
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,"Data",E18)
endif
endfunction
function E28 takes nothing returns boolean
local string s
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
call E58("Learn"+I2S(GetPlayerId(GetTriggerPlayer())),GetLearnedSkill())
endif
return false
endfunction
function E_8 takes nothing returns boolean
local string s
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and IsUnitIllusion(GetTriggerUnit())==false and GetUnitTypeId(GetTriggerUnit())!=1211117642 then
call E58("Cast"+I2S(GetPlayerId(GetTriggerPlayer())),GetSpellAbilityId())
endif
return false
endfunction
function F48 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function E28))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function E_8))
set t=null
endfunction
function F78 takes string s,string F88,string F98 returns string
local string FD8=""
local integer i=0
local integer FE8=StringLength(s)
local string FF8
local integer FG8=StringLength(F88)
local boolean FH8=false
set LP4="StringReplace"
loop
exitwhen i+1>FE8
set FF8=SubString(s,i,i+FG8)
if FF8!=F88 or FH8 then
set FD8=FD8+SubString(s,i,i+1)
set i=i+1
else
set FD8=FD8+F98
set i=i+FG8
set FH8=true
endif
endloop
return FD8
endfunction
function FI8 takes player FJ8,player FK8 returns string
local string s=(GetObjectName((1848656696)))
set LP4="GetString_HeroDenied"
set s=F78(s,"$dead",P[GetPlayerId(FJ8)]+(KY4[GetPlayerId((FJ8))])+"|r")
set s=F78(s,"$killer",P[GetPlayerId(FK8)]+(KY4[GetPlayerId((FK8))])+"|r")
return s
endfunction
function FM8 takes nothing returns nothing
local integer i
local integer FN8=125
set LP4="FM8"
call SetUnitOwner(KI4,Y7[1],false)
set h4[512+GetPlayerId(Y7[1])]=KI4
call SetUnitOwner(KJ4,Y7[2],false)
set h4[512+GetPlayerId(Y7[2])]=KJ4
call SetUnitOwner(KK4,Y7[3],false)
set h4[512+GetPlayerId(Y7[3])]=KK4
call SetUnitOwner(KM4,Y7[4],false)
set h4[512+GetPlayerId(Y7[4])]=KM4
call SetUnitOwner(KN4,Y7[5],false)
set h4[512+GetPlayerId(Y7[5])]=KN4
call SetUnitOwner(KO4,Z7[1],false)
set h4[512+GetPlayerId(Z7[1])]=KO4
call SetUnitOwner(KP4,Z7[2],false)
set h4[512+GetPlayerId(Z7[2])]=KP4
call SetUnitOwner(KQ4,Z7[3],false)
set h4[512+GetPlayerId(Z7[3])]=KQ4
call SetUnitOwner(KR4,Z7[4],false)
set h4[512+GetPlayerId(Z7[4])]=KR4
call SetUnitOwner(KS4,Z7[5],false)
set h4[512+GetPlayerId(Z7[5])]=KS4
set KT4[GetPlayerId(Y7[1])]=KI4
set KT4[GetPlayerId(Y7[2])]=KJ4
set KT4[GetPlayerId(Y7[3])]=KK4
set KT4[GetPlayerId(Y7[4])]=KM4
set KT4[GetPlayerId(Y7[5])]=KN4
set KT4[GetPlayerId(Z7[1])]=KO4
set KT4[GetPlayerId(Z7[2])]=KP4
set KT4[GetPlayerId(Z7[3])]=KQ4
set KT4[GetPlayerId(Z7[4])]=KR4
set KT4[GetPlayerId(Z7[5])]=KS4
set i=1
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=2
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=3
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=4
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=5
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=7
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=8
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=9
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=$A
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set i=$B
if GetLocalPlayer()==Player(i)then
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(KT4[GetPlayerId(Player(i))],$FF,$FF,$FF,FN8)
endif
set KU4[GetPlayerId(Y7[1])]=GetUnitX(KT4[GetPlayerId(Y7[1])])
set KU4[GetPlayerId(Y7[2])]=GetUnitX(KT4[GetPlayerId(Y7[2])])
set KU4[GetPlayerId(Y7[3])]=GetUnitX(KT4[GetPlayerId(Y7[3])])
set KU4[GetPlayerId(Y7[4])]=GetUnitX(KT4[GetPlayerId(Y7[4])])
set KU4[GetPlayerId(Y7[5])]=GetUnitX(KT4[GetPlayerId(Y7[5])])
set KU4[GetPlayerId(Z7[1])]=GetUnitX(KT4[GetPlayerId(Z7[1])])
set KU4[GetPlayerId(Z7[2])]=GetUnitX(KT4[GetPlayerId(Z7[2])])
set KU4[GetPlayerId(Z7[3])]=GetUnitX(KT4[GetPlayerId(Z7[3])])
set KU4[GetPlayerId(Z7[4])]=GetUnitX(KT4[GetPlayerId(Z7[4])])
set KU4[GetPlayerId(Z7[5])]=GetUnitX(KT4[GetPlayerId(Z7[5])])
set KV4[GetPlayerId(Y7[1])]=GetUnitY(KT4[GetPlayerId(Y7[1])])
set KV4[GetPlayerId(Y7[2])]=GetUnitY(KT4[GetPlayerId(Y7[2])])
set KV4[GetPlayerId(Y7[3])]=GetUnitY(KT4[GetPlayerId(Y7[3])])
set KV4[GetPlayerId(Y7[4])]=GetUnitY(KT4[GetPlayerId(Y7[4])])
set KV4[GetPlayerId(Y7[5])]=GetUnitY(KT4[GetPlayerId(Y7[5])])
set KV4[GetPlayerId(Z7[1])]=GetUnitY(KT4[GetPlayerId(Z7[1])])
set KV4[GetPlayerId(Z7[2])]=GetUnitY(KT4[GetPlayerId(Z7[2])])
set KV4[GetPlayerId(Z7[3])]=GetUnitY(KT4[GetPlayerId(Z7[3])])
set KV4[GetPlayerId(Z7[4])]=GetUnitY(KT4[GetPlayerId(Z7[4])])
set KV4[GetPlayerId(Z7[5])]=GetUnitY(KT4[GetPlayerId(Z7[5])])
endfunction
function FO8 takes unit Z47 returns boolean
local integer ID=GetUnitTypeId(Z47)
set LP4="oCv"
return ID==1848651862 or ID==1848651863 or ID==1848651826 or ID==1848651825 or ID==1848651864 or ID==1849897784 or ID==1848652107 or ID==1848651833
endfunction
function jw takes nothing returns nothing
if(GetOwningPlayer(GetEnumUnit())==Player(0))then
call SetUnitOwner(GetEnumUnit(),Y7[0],false)
if FO8(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(0))
endif
else
call SetUnitOwner(GetEnumUnit(),Z7[0],false)
if FO8(GetEnumUnit())==false then
call SetUnitColor(GetEnumUnit(),ConvertPlayerColor(6))
endif
endif
endfunction
function Np takes nothing returns nothing
local group FP8=ZI7()
set LP4="Np"
call GroupEnumUnitsOfPlayer(FP8,Player(0),Condition(function WE7))
call ForGroup(FP8,function jw)
call GroupClear(FP8)
call GroupEnumUnitsOfPlayer(FP8,Player(6),Condition(function WE7))
call ForGroup(FP8,function jw)
call ZH7(FP8)
set FP8=null
endfunction
function FQ8 takes player p returns nothing
local integer i=0
local string jX=GetPlayerName(p)
local integer FE8=StringLength(jX)
local integer jY=FE8
set LP4="oDv"
loop
exitwhen i==FE8
if SubString(jX,i,i+1)=="("and SubString(jX,i-1,i)==" "then
set jY=i-1
call SetPlayerName(p,SubString(jX,0,jY))
set i=FE8
else
set i=i+1
endif
endloop
endfunction
function FR8 takes nothing returns nothing
local integer FS8
local integer FT8
local integer T8
local integer U8
local integer x=0
local integer y=0
local integer i
local location FU8=GetRectCenter(pr)
local location FV8=GetRectCenter(qr)
set LP4="FR8"
if GetPlayerState(Y7[0],PLAYER_STATE_OBSERVER)!=0 or GetPlayerState(Z7[0],PLAYER_STATE_OBSERVER)!=0 then
set R8=true
set Y7[0]=Player($D)
set Z7[0]=Player($E)
set KW4=Player(0)
set KX4=Player(6)
call SetAllyColorFilterState(0)
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call ForceAddPlayer(W7,Y7[0])
call ForceAddPlayer(W7,Y7[1])
call ForceAddPlayer(W7,Y7[2])
call ForceAddPlayer(W7,Y7[3])
call ForceAddPlayer(W7,Y7[4])
call ForceAddPlayer(W7,Y7[5])
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ForceAddPlayer(C8,Y7[1])
call ForceAddPlayer(C8,Y7[2])
call ForceAddPlayer(C8,Y7[3])
call ForceAddPlayer(C8,Y7[4])
call ForceAddPlayer(C8,Y7[5])
call ForceAddPlayer(C8,Z7[1])
call ForceAddPlayer(C8,Z7[2])
call ForceAddPlayer(C8,Z7[3])
call ForceAddPlayer(C8,Z7[4])
call ForceAddPlayer(C8,Z7[5])
if R8 then
call ForceAddPlayer(C8,Player(0))
call ForceAddPlayer(C8,Player(6))
endif
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
if(x!=y)then
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Y7[x],Y7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(0),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(1),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(2),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(3),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(4),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(5),true)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],Z7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Y7[x],Z7[y],ConvertAllianceType(7),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(0),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(1),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(2),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(3),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(4),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(5),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],Y7[y],ConvertAllianceType(7),false)
endif
set y=y+1
endloop
set y=0
set x=x+1
endloop
call SetPlayerTeam(Y7[0],0)
call SetPlayerTeam(Y7[1],0)
call SetPlayerTeam(Y7[2],0)
call SetPlayerTeam(Y7[3],0)
call SetPlayerTeam(Y7[4],0)
call SetPlayerTeam(Y7[5],0)
call SetPlayerTeam(Z7[0],1)
call SetPlayerTeam(Z7[1],1)
call SetPlayerTeam(Z7[2],1)
call SetPlayerTeam(Z7[3],1)
call SetPlayerTeam(Z7[4],1)
call SetPlayerTeam(Z7[5],1)
call SetPlayerName(Y7[0],(GetObjectName((1848652622))))
call SetPlayerName(Z7[0],(GetObjectName((1848652623))))
call SetPlayerName(A7,(GetObjectName((1848657208))))
call FM8()
if(Y7[0]!=Player(0)or Z7[0]!=Player(6))then
call Np()
endif
call EB8()
set FT8=q8(W7)
set FS8=q8(X7)
set T8=1
set U8=5
loop
exitwhen T8>U8
if(WR7(Y7[T8]))then
call SetPlayerState(Y7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FT8))
call SetPlayerState(Y7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(WR7(Z7[T8]))then
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FS8))
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
call SetPlayerHandicapXP(Y7[1],1)
call SetPlayerHandicapXP(Y7[2],1)
call SetPlayerHandicapXP(Y7[3],1)
call SetPlayerHandicapXP(Y7[4],1)
call SetPlayerHandicapXP(Y7[5],1)
call SetPlayerHandicapXP(Z7[1],1)
call SetPlayerHandicapXP(Z7[2],1)
call SetPlayerHandicapXP(Z7[3],1)
call SetPlayerHandicapXP(Z7[4],1)
call SetPlayerHandicapXP(Z7[5],1)
call SetPlayerState(Y7[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Y7[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Y7[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Y7[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Y7[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Y7[5],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[0],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[1],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[2],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[3],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[4],PLAYER_STATE_GIVES_BOUNTY,1)
call SetPlayerState(Z7[5],PLAYER_STATE_GIVES_BOUNTY,1)
call E68()
call EA8()
call FQ8(Y7[1])
call FQ8(Y7[2])
call FQ8(Y7[3])
call FQ8(Y7[4])
call FQ8(Y7[5])
call FQ8(Z7[1])
call FQ8(Z7[2])
call FQ8(Z7[3])
call FQ8(Z7[4])
call FQ8(Z7[5])
set x=1
loop
exitwhen x>5
if WR7(Y7[x])then
call CreateUnitAtLoc(Y7[x],1848651843,FU8,bj_UNIT_FACING)
endif
if WR7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,FV8,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set i=0
loop
set KY4[i]=GetPlayerName(Player(i))
set i=i+1
exitwhen i==16
endloop
set FU8=null
set FV8=null
endfunction
function FW8 takes nothing returns nothing
local integer i=1
set LP4="FW8"
set K64=1
set KC4[1]=1215723364
set MH4[1]=1747989338
set K34[1]=1848654165
set MG4[1]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"
call AQ7(KC4[1],"stand 4")
call AM7(KC4[1],1.35,MH4[1])
set MI4[i]="Cheap items such as Bracers, Bottle and Magic Stick help give Vengeful Spirit what she needs to use Magic Missile and Swap safely and frequently."
set MJ4[i]="By getting Magic Missile first, Vengeful Spirit should take advantage of this powerful stun by moving around the map instead of simply farming in a lane."
set MK4[i]="It sometimes a good idea to save the Command Aura for later in the game when it will give your team more damage."
set MM4[i]="Wave of Terror is used to provide sight, giving you vision over an area or providing an opportunity to use Swap."
set MN4[i]="Swap will allow you to isolate a key hero on their team, sometimes your sacrifice is needed to win the battle and maybe even the game."
set i=i+1
set KC4[2]=1215128178
set MH4[2]=1747989552
set K34[2]=1848654145
set MG4[2]="ReplaceableTextures\\CommandButtons\\BTNAvatar.blp"
call AQ7(KC4[2],"attack slam alternate")
call AM7(KC4[2],1.3,MH4[2])
set MI4[i]="When using Arc lightning, try to kill creeps and harass your opponent at the same time"
set MJ4[i]="When ganking, you can use Lightning Bolt to ensure you will not lose sight of the target quickly."
set MK4[i]="Lightning Bolt has a mini-stun that can be used against channeling spells and teleporting heroes."
set MM4[i]="Static Field is extremely powerful throughout the game: Use your spells as frequently as possible during fights."
set MN4[i]="Both Lightning Bolt and Wrath of the Thundergod reveal invisible units. Wrath will not damage invisible units."
set i=i+1
set KC4[3]=1164799855
set MH4[3]=1747989553
set K34[3]=1848654137
set MG4[3]="ReplaceableTextures\\CommandButtons\\BTNDryad.blp"
call AQ7(KC4[3],"stand 4")
call AM7(KC4[3],1,MH4[3])
set MI4[i]="Enchant can be used on neutral creeps, meaning Enchantress can fight and use neutral creeps to engage enemy heroes effectively."
set MJ4[i]="Nature's Attendants heals in an area AOE, so make sure you're far from creeps if you only want to heal yourself."
set MK4[i]="Untouchable is great against physical attacks, but it does not help you survive huge burst damage nukes."
set MM4[i]="Impetus deals negligible damage at short range; switch to normal attacks if your target gets close to save mana."
set MN4[i]="Impetus deals pure damage, making it a great tool against heroes with a lot of resistance because it is not reduced."
set i=i+1
set KC4[4]=1328558160
set MH4[4]=1747989554
set K34[4]=1848654136
set MG4[4]="ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"
call AQ7(KC4[4],"stand 2")
call AM7(KC4[4],1,MH4[4])
set MI4[i]="Waveform is extremely powerful: Used for damage, chasing, escaping, it even allows you to dodge some spells by casting it at the right time."
set MJ4[i]="Morph allows you to manipulate your Agility and Strength. Using the Strength Morph ('F') can act as a heal to help you survive between spells."
set MK4[i]="Use Morph Replicate to take the location of your Replicated unit, making it great for a quick escape or simply as a free teleport."
set MM4[i]="Replicate is usually cast on the strongest ally or enemy to a fight. Certain hero passives or items will retain their effects, so Replicate those heroes."
set MN4[i]="Eye of Skadi and Linken's Sphere are two examples of Statistic-increasing items which give Morphling a lot of versatility and the ability to cast spells often."
set i=i+1
set KC4[5]=1214931305
set MH4[5]=1747989555
set K34[5]=1848654167
set MG4[5]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"
call AQ7(KC4[5],"stand victory")
call AM7(KC4[5],1,MH4[5])
set MI4[i]="CM is a fragile support hero: Items like Bracers and Phase Boots will help her survive and deal with her low movement speed and armor."
set MJ4[i]="A few points of Brilliance Aura early on provides your team with massive amounts of extra mana."
set MK4[i]="Enemies hit by Frostbite can still cast spells, so don't take them lightly. "
set MM4[i]="Frostbite on non-hero units will last 10 seconds. This can be useful for killing neutral creeps that are level 5 or lower as well."
set MN4[i]="There are two items that can help you with the perfect Freezing Field: Placement with Kelen's Dagger and the spell immunity of Black King Bar."
set i=i+1
set KC4[6]=1211117617
set MH4[6]=1747989556
set K34[6]=1848654134
set MG4[6]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.tga"
call AQ7(KC4[6],"spell")
call AM7(KC4[6],1,MH4[6])
set MI4[i]="Storm Bolt is a skill Sven should usually get early because of its damage and stun. "
set MJ4[i]="Take advantage of Storm Bolt's area of effect by hitting additional enemy creeps and heroes whenever possible. "
set MK4[i]="Try to be near your allies when you cast Warcry."
set MM4[i]="Only items that increase Strength will give you additional damage from effect of God's Strength."
set MN4[i]="Casting God's Strength before engaging in fights or casting Storm Bolt will allow you to get additional attacks on your opponent."
set i=i+1
set KC4[7]=1212363833
set MH4[7]=1747989557
set K34[7]=1848654160
set MG4[7]="ReplaceableTextures\\CommandButtons\\BTNSeaWitch.blp"
call AQ7(KC4[7],"spell")
call AM7(KC4[7],1,MH4[7])
set MI4[i]="Opponents can attack and cast spells while Ensnared. However, it will work on magic immune units and reveal invisible heroes until the duration expires."
set MJ4[i]="Mirror Image can be used defensively to avoid certain spells and dispel debuffs or channeling spells."
set MK4[i]="Items that provide attribute bonuses improve your Image's power."
set MM4[i]="Enemies caught by Song of the Siren are invulnerable while asleep. Save your attacks and spells for after the spell expires."
set MN4[i]="Use Song of the Siren to isolate a magic immune or Cycloned hero (since they will not be affected), or to demolish buildings while enemies are asleep."
set i=i+1
set KC4[8]=1333027688
set MH4[8]=1747989558
set K34[8]=1848654148
set MG4[8]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"
call AQ7(KC4[8],"attack slam")
call AM7(KC4[8],1.1,MH4[8])
set MI4[i]="Although he's a strength hero, Earthshaker (ES) actually plays more like a caster. Damage items are not very useful, but mana items can be nice."
set MJ4[i]="A good cast of Fissure can isolate an opponent and cut off their escape. Practice often to achieve devastating results."
set MK4[i]="Kelen's Dagger is an incredible item on ES, it allows you to quickly position yourself for the perfect Fissure or Echoslam."
set MM4[i]="The timing of your spells is important, by spacing them out properly you can keep a group of heroes disabled for several seconds."
set MN4[i]="Due to Raigor's ability to split up an enemy team and keep them stunned, he is great for initiating fights."
set i=i+1
set KC4[9]=1212365106
set MH4[9]=1747989559
set K34[9]=1848654168
set MG4[9]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"
call AQ7(KC4[9],"stand 4")
call AM7(KC4[9],1,MH4[9])
set MI4[i]="Getting at least one level of Blink Strike and Smoke Screen help you survive to level 6 when you can learn Permanent Invisibility."
set MJ4[i]="Attacking or using your spells makes you visible: Consider the fade time of Permanent Invisibility before placing yourself at risk."
set MK4[i]="Try to position Smoke Screen slightly behind enemies so that they spend more time in the cloud if they retreat."
set MM4[i]="Wraith Bands and later a Yasha or a Diffusal Blade will provide Rikimaru with cheap damage and chasing power for dispatching fragile heroes quickly."
set MN4[i]="Be careful of items that render you visible, such as Dust of Appearance, Sentry Wards or a Gem of True Sight."
set i=i+1
set KC4[$A]=1311781199
set MH4[$A]=1747989560
set K34[$A]=1848654169
set MG4[$A]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"
call AQ7(KC4[$A],"spell slam")
call AM7(KC4[$A],1,MH4[$A])
call AM7(1848652083,1.1,MH4[$A])
call AM7(1848652084,1.2,MH4[$A])
call AM7(1848652085,1.3,MH4[$A])
call AM7(1848651828,1,MH4[$A])
call AM7(1848652088,1.1,MH4[$A])
call AM7(1848652099,1.2,MH4[$A])
call AM7(1848652103,1.3,MH4[$A])
set MI4[i]="Spirit Bear is great to have in the lane and allowing Syllabear to fight neutral creeps because of its high HP and damage. "
set MJ4[i]="Leveling Spirit Bear also gets various bonuses that make it very powerful for fighting heroes and towers so it is usually the first thing to max out."
set MK4[i]="Your Spirit Bear might be able to handle a lot of damage, but if it dies you will also take damage (100 X its level). If you die, it dies as well."
set MM4[i]="Give items to your bear instead of Syllabear since it is usually engaging the enemy for you. Remember that stat-increasing items do not benefit the bear."
set MN4[i]="True Form gives Syllabear massive HP in his melee form, and Rabid and Battle Cry give both him and his Bear huge damage temporarily."
set i=i+1
set KC4[$B]=1211117620
set MH4[$B]=1747989561
set K34[$B]=1848654170
set MG4[$B]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"
call AQ7(KC4[$B],"stand victory")
call AM7(KC4[$B],1.2,MH4[$B])
set MI4[i]="Light Strike Array is usually a good skill to get at level 1 because it provides you with a stun."
set MJ4[i]="Target the ground in their direction instead of clicking on enemies to maximize Dragon Slave's long range."
set MK4[i]="Cheap items will help Lina do her job: Bracers, Bottle, Phase Boots. A Point booster provides a nice HP/mana bonus for its cost."
set MM4[i]="Fiery Soul can help you maneuver better during a fight."
set MN4[i]="Try to stun as many heroes as possible during team fights"
set i=i+1
set KC4[$C]=1315070563
set MH4[$C]=1747989569
set K34[$C]=1848656181
set MG4[$C]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"
call AQ7(KC4[$C],"stand victory")
call AM7(KC4[$C],1,MH4[$C])
set MI4[i]="Blade Fury is your most important skill early game for getting hero kills and avoiding magic damage."
set MJ4[i]="Avoid follow-command (right-clicking) heroes with Blade Fury and instead click the ground near the opponent."
set MK4[i]="Isolate enemy heroes before using Omnislash to prevent Juggernaut from attacking multiple targets and doing less damage."
set MM4[i]="Increasing your attack speed will give you 'extra attacks' during Omnislash, which are treated like a normal attack (in terms of damage and orb effects)."
set MN4[i]="Protect the 1-HP Healing Ward in battles and it can prolong and save the lives of your entire team."
set i=i+1
set KC4[$D]=1311781185
set MH4[$D]=1747989570
set K34[$D]=1848654135
set MG4[$D]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"
call AQ7(KC4[$D],"stand ready")
call AM7(KC4[$D],1,MH4[$D])
set MI4[i]="Glaives of Wisdom is useful to get early because it is useful for killing creeps and harassing your opponent manually ('W' and then the target)."
set MJ4[i]="Curse of the Silent will cause an enemy to lose HP/mana if they do not choose to use their spells, or cannot use their spells (disabled, silenced, cooldown)."
set MK4[i]="Last Word will prevent enemies from using multiple spells on you and your team at the same time provided you get close enough."
set MM4[i]="Global Silence can be used for initiating on enemies or saving allies early on. Try to pay attention to your teammates and enemies, even those not nearby."
set MN4[i]="Global Silence will also give your allies the opportunity in team battles to use their spells without repercussions - making it a powerful control spell."
set i=i+1
set KC4[$E]=1214344551
set MH4[$E]=1747989571
set K34[$E]=1848654150
set MG4[$E]="ReplaceableTextures\\CommandButtons\\BTNTreant.blp"
call AQ7(KC4[$E],"stand 3")
call AM7(KC4[$E],.72,MH4[$E])
set MI4[i]="Thanks to his high base damage and survivability, Rooftrellen can usually obtain high-tier damage or caster items depending on the needs of the team."
set MJ4[i]="Living armor adds significant defensive bonuses to an allied unit. It can even be cast on buildings to make them more resilient and provide regeneration."
set MK4[i]="Nature's Guise is more than an escape tool, it can be used offensively as well. Use it to position allies and yourself near trees before surprising the enemy."
set MM4[i]="Use Eyes in the Forest whenever you can to gain vision of key locations such as the rune spots, neutral creep camps and Roshan."
set MN4[i]="Enemies under the effect of Overgrowth can still use spells and items, so make sure your team acts quickly while enemies remain immobilized."
set i=i+1
set KC4[$F]=1328558389
set MH4[$F]=1747990352
set K34[$F]=1848657731
set MG4[$F]="ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp"
call AQ7(KC4[$F],"stand victory")
call AM7(KC4[$F],1.1,MH4[$F])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[16]=1214409837
set MH4[16]=1747989573
set K34[16]=1848654151
set MG4[16]="ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"
call AQ7(KC4[16],"stand victory")
call AM7(KC4[16],1.2,MH4[16])
call AM7(1211119192,1.5,MH4[16])
call AM7(1211119193,1.5,MH4[16])
call AM7(1211119191,1.5,MH4[16])
set MI4[i]="Chakra Magic is an amazing support skill that you should cast on allies as often as possible if they have powerful spells."
set MJ4[i]="Illuminate can be useful for earning gold or clearing creeps quickly, but channeling the blast can leave you vulnerable. "
set MK4[i]="Mana Leak gives you the offensive: an enemy that moves loses his resources to cast spells, but if he does not, you can punish him with spells and attacks."
set MM4[i]="When in your Spirit Form, use Blinding Light to push enemies aside, and Recall for saving or calling on the assistance of an ally."
set MN4[i]="Keeper of the Light usually needs to stay back in fights and make use of the long range of his spells as a support hero when pushing and defending."
set i=i+1
set KC4[17]=1215657064
set MH4[17]=1747989574
set K34[17]=1848654166
set MG4[17]="ReplaceableTextures\\CommandButtons\\BTNFurbolgTracker.blp"
call AQ7(KC4[17],"attack spell")
call AM7(KC4[17],1.2,MH4[17])
set MI4[i]="Get Fury Swipes and Overpower early. Fury Swipes is a very powerful orb effect on Ursa, replacing it with another is not advised."
set MJ4[i]="Ursa is a very effective hero to fight neutral creeps with: Vladimir's Offering is a recommended item choice."
set MK4[i]="Thanks to Enrage, Ursa usually purchases items that increase HP or Strength over Agility and Damage items."
set MM4[i]="It is a good idea to fight the two ancient camps when you need a quick boost in experience and gold. They are marked red in your minimap."
set MN4[i]="Certain items like Kelen's Dagger and Lothar's Edge will help both close the distance on enemies and take them by surprise."
set i=i+1
set KC4[18]=1215130471
set MH4[18]=1747989575
set K34[18]=1848656177
set MG4[18]="ReplaceableTextures\\CommandButtons\\BTNOgreMagi.blp"
call AQ7(KC4[18],"sleep")
call AM7(KC4[18],1.4,MH4[18])
set MI4[i]="Buying a few Clarity Potions, Ring of Basilius or Bottle in the beginning of the game will help you cast a few more spells."
set MJ4[i]="Fireblast provides a disable, Ignite provides a slow. Both deal damage, usually making them good skills early."
set MK4[i]="Ogre Magi has a lot of survivability but he does need the ability to use his spells: an Arcane Ring might be the only item you will need all game."
set MM4[i]="Use Bloodlust to help teammates chase and escape enemies and on the hero capable of dealing the most damage before major battles."
set MN4[i]="Focus heroes that need to be shut down quickly with Fireblast: Hopefully they are repeatedly damaged and disabled by the effect of Multicast."
set i=i+1
set KC4[19]=1316252014
set MH4[19]=1747989576
set K34[19]=1848656193
set MG4[19]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"
call AQ7(KC4[19],"stand 2")
call AM7(KC4[19],1,MH4[19])
set MI4[i]="Laser and Missile give Tinker massive burst damage, so it is usually a good idea to get these two skills before Rearm, your ultimate."
set MJ4[i]="Laser is not reduced by magic resistance or armor; you deal the number in the description exactly."
set MK4[i]="You can use the active effects of items indefinitely with Rearm, which makes Boots of Travel a very powerful item for Tinker."
set MM4[i]="March of the Machines can be very useful for killing creeps quickly, its large area of effect makes it useful for pushing and team fights."
set MN4[i]="Level 1 of Rearm is generally enough until much later when you have the mana pool to support levels 2 and 3."
set i=i+1
set KC4[20]=1164799603
set MH4[20]=1747989577
set K34[20]=1848656180
set MG4[20]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"
call AQ7(KC4[20],"spell")
call AM7(KC4[20],1.2,MH4[20])
set MI4[i]="Get Force of Nature early if you plan on leaving the lane to kill neutral creeps. Start with a Ring of Basilius to provide you with mana and armor."
set MJ4[i]="Invest points in Teleportation, it gives you the mobility to be anywhere in the map: Cancel the spell if you change your mind by clicking 'S'."
set MK4[i]="Sprout can be extremely useful offensively and defensively so get at least one point in it. Higher levels increase the duration but also the mana cost."
set MM4[i]="Teleportation shows allies and enemies where you intend to go, so if you want to surprise enemies, teleport where they cannot see."
set MN4[i]="Wrath of Nature is a great farming tool but also a powerful nuke on enemy heroes: Hit other units nearby to deal more damage to the intended target."
set i=i+1
set KC4[21]=1332179560
set MH4[21]=1747989578
set K34[21]=1848656179
set MG4[21]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"
call AQ7(KC4[21],"stand victory")
call AM7(KC4[21],1,MH4[21])
set MI4[i]="Get Spirit Lance and Doppelwalk first because Juxtapose is better when your illusions have more health and damage."
set MJ4[i]="Beware of the high mana costs of your spells early game, especially for Doppelwalk, which can be an escape mechanism."
set MK4[i]="Keep your opponents guessing by controlling your illusions created by Doppelwalk and Juxtapose."
set MM4[i]="Your illusions are amazing for pushing later on. Focus creeps and heroes first because illusions will not create new ones when attacking buildings."
set MN4[i]="Diffusal Blade and Manta Style are good choices of because they make his images much stronger by adding Agility directly."
set i=i+1
set KC4[22]=1432580716
set MH4[22]=1747989579
set K34[22]=1848656183
set MG4[22]="ReplaceableTextures\\CommandButtons\\BTNMountainGiant.blp"
call AQ7(KC4[22],"spell")
call AM7(KC4[22],.5,MH4[22])
set MI4[i]="Buy items that give you at least 3 Intelligence or 39 mana in the beginning of the game so that you can use both of your spells at level 2."
set MJ4[i]="Avalanche and Toss should be the two spells you level first because they make you a force to be reckoned with early game."
set MK4[i]="You can sometimes kill a hero outright by casting Avalanche on him, and then Tossing him on the Avalanche area of effect before the animation ends."
set MM4[i]="To ensure that you Toss your desired target, isolate him by making him the only one in the area of effect. Kelen's Dagger can help you with placement."
set MN4[i]="Tiny deals most of his damage through Avalanche and Toss, so the reduced attack speed from Grow is less important than the bonuses given."
set i=i+1
set KC4[23]=1211117643
set MH4[23]=1747989580
set K34[23]=1848656185
set MG4[23]="ReplaceableTextures\\CommandButtons\\BTNGoblinSapper.blp"
call AQ7(KC4[23],"stand 2")
call AM7(KC4[23],1,MH4[23])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[24]=1211117633
set MH4[24]=1747989581
set K34[24]=1848656194
set MG4[24]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"
call AQ7(KC4[24],"spell chain lightning")
call AM7(KC4[24],1,MH4[24])
set MI4[i]="Chen can take control of high level neutral creeps with Holy Persuasion, making him extremely powerful at low levels even without items."
set MJ4[i]="Neutrals with special abilities usually are more useful, try to find out what has a disable or slow as this will be much better for attacking heroes with."
set MK4[i]="When preparing to attack from the forest, start with Penitence to slow enemies. Engage enemies from the side or from behind to catch them off guard."
set MM4[i]="Chen excels as a support hero, items that contribute to teammates such as Mekansm usually benefit the team more than damage items."
set MN4[i]="Hand of God is really useful early on for helping allies across the map. Later, it can be used to assist with pushing or defending."
set i=i+1
set KC4[25]=1160785973
set MH4[25]=1747989582
set K34[25]=1848656453
set MG4[25]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"
call AQ7(KC4[25],"spell")
call AM7(KC4[25],1,MH4[25])
set MI4[i]="The level of Lucent Beam determines the damage of Eclipse, making it the most important spell to get first. "
set MJ4[i]="Moon Glaives can be useful early if you plan to kill neutral creeps. Lifesteal items like Helm of the Dominator can help you survive against neutral creeps."
set MK4[i]="Try to cast Eclipse on enemy heroes when other units are not present to maximize the damage dealt to a single target. "
set MM4[i]="Later on with some attack speed, Lunar Blessing and Moon Glaives provide you with both massive damage and pushing power."
set MN4[i]="You should also consider items that allow you to land Eclipse successfully and increase your carry potential in battles, such as a Black King Bar."
set i=i+1
set KC4[26]=1433631084
set MH4[26]=1747989583
set K34[26]=1848656452
set MG4[26]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"
call AQ7(KC4[26],"spell")
call AM7(KC4[26],1.1,MH4[26])
set MI4[i]="Headshot will provide you with bonus damage and a short stun, making it useful for killing creeps and harassing with his incredible attack animation."
set MJ4[i]="Sniper usually needs to find a combination of damage, attack speed and survivability that allow him to deal significant damage but survive to do so."
set MK4[i]="Sniper is very fragile so he needs to maintain his range. Getting Take Aim and/or Shrapnel can help provide means of staying out of harm's way."
set MM4[i]="Shrapenl can also be used for slowing opponents, pushing or defending against large waves of creeps."
set MN4[i]="Try to use Assassinate to heavily damage an enemy before the fight even begins to give your team an advantage."
set i=i+1
set KC4[27]=1311781174
set MH4[27]=1747989584
set K34[27]=1848656184
set MG4[27]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"
call AQ7(KC4[27],"stand 3")
call AM7(KC4[27],1.25,MH4[27])
call AM7(1311781442,1.25,MH4[27])
call AM7(1311781175,1.25,MH4[27])
set MI4[i]="Berserker's Rage gives Troll the option of melee combat, which gives him many powerful offensive bonuses at the cost of losing his ranged ability."
set MJ4[i]="roll Warlord generally does not have to worry about attack speed thanks to his set of skills, go for damage or survivability items instead."
set MK4[i]="Blind will prevent your opponents from landing all their attacks, making it harder from them to harass you or kill your creeps for gold."
set MM4[i]="Play defensively and fight neutral creeps too. Switch to melee form and it will allow you to have an easier time."
set MN4[i]="In team battles, it is vital that you cast Blind on the enemy hero that deals the most damage as this will greatly reduce their damage output."
set i=i+1
set KC4[28]=1332898670
set MH4[28]=1747989815
set K34[28]=1848654132
set MG4[28]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"
call AQ7(KC4[28],"stand victory")
call AM7(KC4[28],1,MH4[28])
set MI4[i]="At least one level of Shackles is advised early on for immobilizing opponents. Remember that it is channeling so it can be interrupted or broken by yourself."
set MJ4[i]="Rhasta needs survivability and the mana to use his spells: Bracers, Null Talismans, Point Booster are examples of items that will help out a lot."
set MK4[i]="Forked Lightning is your primary nuke and finisher due to its range and ability to hit multiple targets, so it more effective to get it earlier than later."
set MM4[i]="Use Shackles and Voodoo on enemy heroes when casting Mass Serpent Ward. You can even surround an enemy completely with the right timing."
set MN4[i]="Mass Serpent Wards can clear creeps quickly and deal a lot of damage over time to buildings, making them really useful for pushing and defending."
set i=i+1
set KC4[29]=1328558406
set MH4[29]=1747993417
set K34[29]=1848658771
set MG4[29]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"
call AQ7(KC4[29],"stand 3")
call AM7(KC4[29],1.3,MH4[29])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[30]=1315988077
set MH4[30]=1747989811
set K34[30]=1848656207
set MG4[30]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"
call AQ7(KC4[30],"stand ready")
call AM7(KC4[30],1,MH4[30])
set MI4[i]="Thunder Clap is a great skill early game but you may need to invest in regeneration items such as a Bottle, Magic Stick, Ring of Basilius or Void Stone."
set MJ4[i]="Drunken Haze works not only as a slow, but the miss chance reduces the damage severely for enemy heroes."
set MK4[i]="Primal Split is not only for escaping: Once you master your three Pandas, Earth, Storm and Fire, you can use them offensively as well."
set MM4[i]="In Primal Split form, Mangix has two useful disables that can be used against enemies: Storm's Cyclone and Earth's Hurl Boulder."
set MN4[i]="Mangix usually initiates for the team, so survivability items are helpful, investing in a Kelen's Dagger to help land Thunder Clap is often a good idea."
set i=i+1
set KC4[31]=1211117616
set MH4[31]=1747989592
set K34[31]=1848656206
set MG4[31]="ReplaceableTextures\\CommandButtons\\BTNCentaurKhan.blp"
call AQ7(KC4[31],"stand 3")
call AM7(KC4[31],1.75,MH4[31])
set MI4[i]="Return should be leveled if Centaur plans to fight neutral creeps, otherwise Double Edge is more useful in the lane."
set MJ4[i]="Thanks to a high strength gain and the bonus strength from your ultimate, Centaur is a great at heading into battle first and receiving damage."
set MK4[i]="A Hood of Defiance can prove to be just as useful as a Vanguard depending on whether the other team has a lot of magical spells."
set MM4[i]="Avoid putting yourself at risk after using Double Edge. You can use it to commit suicide if you are about to die to deny opponents experience and gold."
set MN4[i]="Kelen's Dagger is a great way of initiating on opponents and dealing with his slow casting animation of Stomp."
set i=i+1
set KC4[32]=1315007329
set MH4[32]=1747989810
set K34[32]=1848656205
set MG4[32]="ReplaceableTextures\\CommandButtons\\BTNakama.blp"
call AQ7(KC4[32],"stand var4")
call AM7(KC4[32],1.2,MH4[32])
set MI4[i]="Shuriken Toss, Wind Walk and Track are much more useful than Jinada early on."
set MJ4[i]="You're going to need mana regen: Bottle, Ring Of Basillius and Void Stone are examples of good options. "
set MK4[i]="Use Wind Walk cautiously: If you wait until the cooldown is complete before breaking out of invisibility, you can cast it again immediately afterward."
set MM4[i]="Shuriken Toss and Wind Walk deal a lot of damage quickly: Search the map often for low HP heroes to hunt. "
set MN4[i]="Use Track on a nearby enemy hero to allow you and your allies to outrun them. Also cast it on nearly dead heroes for bonus gold."
set i=i+1
set KC4[33]=1215063922
set MH4[33]=1747989590
set K34[33]=1848656209
set MG4[33]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"
call AQ7(KC4[33],"stand victory")
call AM7(KC4[33],1.35,MH4[33])
call AM7(1211117638,1,MH4[33])
call AM7(1211117639,1,MH4[33])
call AM7(1211117637,1,MH4[33])
call Z97(1211117639,$FF,$FF,$C8)
call Z97(1211117638,$FF,$FF,$C8)
call Z97(1211117639,$FF,$C8,$C8)
set MI4[i]="Breath Fire is a strong nuke and farming ability. However, against difficult opponents, Dragon's Blood is very useful."
set MJ4[i]="Dragon Tail is the longest duration level 1 stun in the game. One point is usually sufficient until later on."
set MK4[i]="Thanks to the defensive bonuses on Dragon's Blood, he can often focus on other damage items instead of increasing armor and regeneration."
set MM4[i]="Level 1 of Elder Dragon Form has a special passive called Corrosive Attack, which deals significant damage over time against towers."
set MN4[i]="The ranged splash damage and slow of his Level 3 ultimate makes him extremely powerful; getting to level 16 is very important for DK."
set i=i+1
set KC4[34]=1164207469
set MH4[34]=1747989588
set K34[34]=1848656210
set MG4[34]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"
call AQ7(KC4[34],"stand channel")
call AM7(KC4[34],1,MH4[34])
set MI4[i]="Blink is very versatile, allowing you to chase, escape and even avoid certain spells. It is definitely worth at least one point in the beginning."
set MJ4[i]="You can also use Mana Break to prevent enemy heroes from casting spells on you, but be careful since it forces you to get in melee range to attack."
set MK4[i]="Spell Shield might be useful for reducing magic damage, but it does not prevent you from being disabled or status effects (slow, poison, etc.)."
set MM4[i]="Offensive items without orb effects such as a Battlefury, Monkey King Bar or Butterfly are usually desired over items that would override your Mana Break."
set MN4[i]="Sometimes survivability is just as important as damage, items such as Linken's Sphere or Manta Style offer a good mix of both offense and defense."
set i=i+1
set KC4[35]=1315074670
set MH4[35]=1747989813
set K34[35]=1848656204
set MG4[35]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.tga"
call AQ7(KC4[35],"spell")
call AM7(KC4[35],1,MH4[35])
set MI4[i]="Frost Arrows make Drow an excellent chaser early game and allow her to harass opponents safely by manually casting them (clicking 'R' and the target)."
set MJ4[i]="An early level of Silence is great for preventing opponents from using multiple spells on you or your allies."
set MK4[i]="Trueshot Aura and Marksmanship provide Traxex with plenty of damage even with just a few Wraith Bands and Power Treads."
set MM4[i]="Lothar's Edge provides damage and an escape mechanism, the latter of which can help Traxex survive."
set MN4[i]="Stay out of danger in major battles, only close in on your enemies when you are chasing and finishing off heroes near the end."
set i=i+1
set KC4[36]=1214345830
set MH4[36]=1747989594
set K34[36]=1848656211
set MG4[36]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"
call AQ7(KC4[36],"stand victory")
call AM7(KC4[36],1.1,MH4[36])
set MI4[i]="Omniknight is a powerful support hero, items that provide mana such as Arcane Ring help make sure that you can use all your spells."
set MJ4[i]="Purification can be used offensively and defensively: The unit you cast it on will deal damage around it, making it a powerful heal and nuke."
set MK4[i]="Degen Aura is a very strong passive slow that is useful both to chase down enemy heroes and help you and your allies escape as well."
set MM4[i]="Repel is used to remove buffs from allies and enemies, and to prevent heroes with spells from being interrupted or damage dealers from being disabled."
set MN4[i]="Guardian Angel makes a team nearly impervious to physical damage and provides 25/sec HP regeneration, use this time wisely to survive or attack."
set i=i+1
set KC4[37]=1211117636
set MH4[37]=1747989587
set K34[37]=1848656203
set MG4[37]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"
call AQ7(KC4[37],"spell slam")
call AM7(KC4[37],1,MH4[37])
set MI4[i]="Endurance Aura is usually more useful later in the game when your team is fighting together, so get your other skills first."
set MJ4[i]="Call of the Wild is very powerful: The boar gives damage and slow, while the hawk can provide vision over runes, neutral creeps and other key locations."
set MK4[i]="Wild Axes are more useful early game and against heroes with less armor. Destroy trees with Wild Axes to surprise your opponents and for escaping."
set MM4[i]="Try casting Wild Axes behind the target to compensate for their movement. You can also manipulate their return path by moving Rexxar."
set MN4[i]="Find opportunities to use Roar whenever it is available. It is useful on heroes who have an escape mechanism or are immune to magic."
set i=i+1
set KC4[38]=1160786000
set MH4[38]=1747989586
set K34[38]=1848656202
set MG4[38]="ReplaceableTextures\\CommandButtons\\BTNChimaera.blp"
call AQ7(KC4[38],"stand 3")
call AM7(KC4[38],1,MH4[38])
set MI4[i]="Dual Breath and Ice Path help to make Jakiro a strong offensive and defensive support hero. "
set MJ4[i]="Jakiro can cast his spells immediately by clicking the nearby ground in the desired direction, sometimes this is more effective than clicking on the target."
set MK4[i]="A level of Liquid Fire early on can be useful for deterring physical attacks "
set MM4[i]="Macropyre is a slow but powerful spell, combine it with other spells (yours or a teammate) to make sure the opponent is standing in the area of effect."
set MN4[i]="It is often a good idea to purchase useful support items like Mekansm or Shiva's Guard, two items that also increase his low armor significantly."
set i=i+1
set KC4[39]=1311781193
set MH4[39]=1747989812
set K34[39]=1848656201
set MG4[39]="ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"
call AQ7(KC4[39],"stand 2")
call AM7(KC4[39],1,MH4[39])
call AM7(1311781194,1,MH4[39])
call AM7(1311781192,1,MH4[39])
call AM7(1311781204,1,MH4[39])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[40]=1311781206
set MH4[40]=1747989591
set K34[40]=1848656200
set MG4[40]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"
call AQ7(KC4[40],"stand ready")
call AM7(KC4[40],1,MH4[40])
set MI4[i]="PotM can be extremely efficient and gank with just a few Wraith Bands, Boots of Speed and a Bottle."
set MJ4[i]="Getting one level of Leap is usually sufficient early on until Starfall and Elune's Arrow are fully leveled."
set MK4[i]="Land your Elune's Arrow by coordinating with allies and predicting enemy movements. You can even hit invisible or faraway targets with practice."
set MM4[i]="Starfall hits a second time for half damage to one random enemy within 200 range, get close if you can to deal bonus damage"
set MN4[i]="Moonlight Shadow can be used to initiate or escape but sometimes it can be learned later when PotM can use it without compromising her mana pool."
set i=i+1
set KC4[41]=1211117651
set MH4[41]=1747989585
set K34[41]=1848656212
set MG4[41]="ReplaceableTextures\\CommandButtons\\BTNStorm.blp"
call AQ7(KC4[41],"spell")
call AM7(KC4[41],1,MH4[41])
set MI4[i]="Do not get Overload at level 1 since you do not have any spells to activate its effect with."
set MJ4[i]="Choosing which ability to max first can be difficult, but generally at least one point in all three skills is a good idea."
set MK4[i]="You have to wait 1 second after casting Static Remnant before it begins detecting nearby units for its explosion effect."
set MM4[i]="In addition to chasing and escaping, Lightning Ball can be used to dodge many spells with the right timing."
set MN4[i]="An item like Bloodstone is useful on Storm Spirit because the percentage-based mana cost of Lightning Ball makes regeneration an important asset."
set i=i+1
set KC4[42]=1211117649
set MH4[42]=1747989593
set K34[42]=1848656199
set MG4[42]="ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp"
call AQ7(KC4[42],"stand alternate 3")
call AM7(KC4[42],1.15,MH4[42])
set MI4[i]="A level of Burning Spears early on is great for harassing enemy heroes. Use it manually by clicking 'R' then the desired target to avoid drawing focus fire."
set MJ4[i]="Berserker's Blood makes you stronger as you take damage. The bonuses stop when you have 51% HP, so there is little point in taking additional damage."
set MK4[i]="Life Break deals damage based on the remaining health of the target, making it strongest at the beginning of a fight. "
set MM4[i]="Inner Vitality heals more when you have less than 40% of your life, but avoid making the mistake of casting it too late in battles."
set MN4[i]="Survivability while in low health is important for Huskar: Consider items such as Armlet of Mordiggan, Black King Bar, or Heart of Tarrasque."
set i=i+1
set KC4[43]=1160786265
set MH4[43]=1747989816
set K34[43]=1848656198
set MG4[43]="ReplaceableTextures\\CommandButtons\\BTNAssassin.blp"
call AQ7(KC4[43],"stand victory")
call AM7(KC4[43],1.2,MH4[43])
set MI4[i]="Refraction is a great way of surviving in a lane, just be careful not to get hit by creeps too much."
set MJ4[i]="Meld starts cooling down when you click the spell, so you can hit him twice with it if you can predict your enemy's movements."
set MK4[i]="Traps can be used for vision, most effectively in cramped areas like the end of ramps or at the rune powerup spots."
set MM4[i]="You can farm extremely fast by positioning yourself so that the Psi Blades splash on multiple creeps at once."
set MN4[i]="Placing a trap or two before engaging a fight can be a good idea, to cut off possible escape and/or chase routes."
set i=i+1
set KC4[44]=1311780930
set MH4[44]=1747989808
set K34[44]=1848656197
set MG4[44]="ReplaceableTextures\\CommandButtons\\BTNFaerieDragon.blp"
call AQ7(KC4[44],"attack spell")
call AM7(KC4[44],1.1,MH4[44])
set MI4[i]="Illusory Orb and Jaunt are used to travel short distances quickly, but if you wait too long to Jaunt, you will lose the opportunity."
set MJ4[i]="Puck is very fragile early game, some Bracers or Null Talismans and a level of Phase Shift can help you survive."
set MK4[i]="Using Phase Shift manually instead of Autocast will prevent stray attacks from triggering it on Autocast. In general you will have better control of its use."
set MM4[i]="Waning Rift deals damage and silences, but forces you to be close enough. Use Illusory Orb or Dream Coil to help you land the spell on enemies."
set MN4[i]="Puck is a great initiator in fights who offers control of the battle with his spells, allowing allies to join the battle and use their spells or attacks safely."
set i=i+1
set KC4[45]=1211117652
set MH4[45]=1747989809
set K34[45]=1848656213
set MG4[45]="ReplaceableTextures\\CommandButtons\\BTNClockWerkGoblin.blp"
call AQ7(KC4[45],"Birth")
call AM7(KC4[45],1.5,MH4[45])
set MI4[i]="You can use Rocket Flare for harassing and killing creeps early on. With the right timing, you can even fire at enemies across the map."
set MJ4[i]="Power Cogs can be used to trap an enemy, push them away while draining mana, or as an escape mechanism since Rattletrap destroys Cogs in only 1 hit."
set MK4[i]="Battery Assault adds a lot of damage and the stuns help you with chasing, use it when no other units are nearby for best results."
set MM4[i]="Hookshot's long range and high speed lets you reach enemies from out of sight. Follow up with your other spells quickly so your target cannot escape."
set MN4[i]="Rocket Flare also gives vision where it lands, making it very useful for scouting areas such as rune spots, neutral creeps, the enemy base."
set i=i+1
set KC4[46]=1211119187
set MH4[46]=1747990100
set K34[46]=1848657221
set MG4[46]="ReplaceableTextures\\CommandButtons\\BTNProudmoore.blp"
call AQ7(KC4[46],"stand victory")
call AM7(KC4[46],1.1,MH4[46])
set MI4[i]="Tidebringer is extremely useful early game: Use the bonus damage for killing creeps and the cleave effect to harass opponents at the same time."
set MJ4[i]="The bubble animation from Torrent can only be seen by your team so try to use this to your advantage."
set MK4[i]="An ally's assistance or X Marks the Spot is a great way of making sure Torrent and Ghost Ship hit your opponent."
set MM4[i]="Escaping enemy heroes is easy by casting X Marks the Spot on them. It also prevents them from getting away."
set MN4[i]="The Ghost Ship will crash 1000 range from where you stand when you cast it. Keep your distance when you use it."
set i=i+1
set KC4[47]=1311786311
set MH4[47]=1747990337
set K34[47]=1848657224
set MG4[47]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
call AQ7(KC4[47],"stand victory")
call AM7(KC4[47],1.2,MH4[47])
set MI4[i]="Powershot deals significant damage, making it ideal to max first. Be sure not to fire through creeps if you want to deal maximum damage to your target."
set MJ4[i]="An early level of Windrunner can provide you with a quick getaway and chasing tool."
set MK4[i]="Shackleshot can either be used on your intended target to bind him to a nearby unit, or to bind the designated target located BEHIND the unit that you fired it at."
set MM4[i]="Focus Fire is also a powerful spell to use on buildings and Roshan."
set MN4[i]="As long as you do not attack another target, the effect of Focus Fire will stay on. Use your spells and active items to help you fire at your target."
set i=i+1
set KC4[48]=1160786510
set MH4[48]=1747993411
set K34[48]=1848658766
set MG4[48]="ReplaceableTextures\\CommandButtons\\BTNFlyingMachine.blp"
call AQ7(KC4[48],"stand 3")
call AM7(KC4[48],1.1,MH4[48])
call AM7(1160786511,1.1,MH4[48])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[49]=1160786506
set MH4[49]=1747993412
set K34[49]=1848658770
set MG4[49]="ReplaceableTextures\\CommandButtons\\BTNThrall.blp"
call AQ7(KC4[49],"stand 3")
call AM7(KC4[49],1.1,MH4[49])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[50]=1160786505
set MH4[50]=1747993401
set K34[50]=1848658763
set MG4[50]="ReplaceableTextures\\CommandButtons\\BTNTuskaarBrown.blp"
call AQ7(KC4[50],"stand 3")
call AM7(KC4[50],1.,MH4[50])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[51]=1160786502
set MH4[51]=1747993400
set K34[51]=1848658765
set MG4[51]="ReplaceableTextures\\CommandButtons\\BTNPhoenix.blp"
call AQ7(KC4[51],"stand 3")
call AM7(KC4[51],1.05,MH4[51])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[52]=1211117624
set MH4[52]=1747989589
set K34[52]=1848656195
set MG4[52]="ReplaceableTextures\\CommandButtons\\BTNRazorback.blp"
call AQ7(KC4[52],"stand")
call AM7(KC4[52],1.65,MH4[52])
set MI4[i]="Rigwarl is a known for punishing heroes that attack him and surviving for long times but he still needs armor, regeneration and hit points."
set MJ4[i]="Quill spray doesn't initially deal much damage, but the stacking effect makes it very powerful over time in battles."
set MK4[i]="Sometimes one level of Goo can be enough to slow down an enemy hero early game."
set MM4[i]="Rigwarl needs a fair amount of mana early-game, Ring of Basilius, Magic Stick or Bottle can boost his early offensive power immensely."
set MN4[i]="You can mitigate a lot of damage if you turn your hero at the right times thanks to your passive Bristleback. Play mind games on your opponent."
set i=i+1
set KC4[53]=1160786520
set MH4[53]=1747993428
set K34[53]=1848659019
set MG4[53]="ReplaceableTextures\\CommandButtons\\BTNMedivh.blp"
call AQ7(KC4[53],"stand 3")
call AM7(KC4[53],1.15,MH4[53])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[54]=1311788336
set MH4[54]=1747993671
set K34[54]=1848659249
set MG4[54]="ReplaceableTextures\\CommandButtons\\BTNFireBrewmaster.blp"
call AQ7(KC4[54],"stand 3")
call AM7(KC4[54],1,MH4[54])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[55]=1160786507
set MH4[55]=1747993409
set K34[55]=1848658762
set MG4[55]="ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"
call AQ7(KC4[55],"stand 3")
call AM7(KC4[55],1.3,MH4[55])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[56]=1211122767
set MH4[56]=1747993672
set K34[56]=1848659254
set MG4[56]="ReplaceableTextures\\CommandButtons\\BTNDragonHawk.blp"
call AQ7(KC4[56],"stand 3")
call AM7(KC4[56],1.1,MH4[56])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[57]=1160786738
set MH4[57]=1747993922
set K34[57]=1848659269
set MG4[57]="ReplaceableTextures\\CommandButtons\\BTNJunkGolem.blp"
call AQ7(KC4[57],"stand 3")
call AM7(KC4[57],1,MH4[57])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KL4=57
set i=58
set K14=58
set KC4[58]=1429221432
set MH4[58]=1747989832
set K34[58]=1848656435
set MG4[58]="ReplaceableTextures\\CommandButtons\\BTNKiljaedin.blp"
call AQ7(KC4[58],"spell")
call AM7(KC4[58],1.2,MH4[58])
call AM7(1160786229,1,MH4[58])
call Z97(KC4[58],$FF,75,$FF)
set MI4[i]="If you want to neutral creeps, start with Summon Wolves and a Ring of Basilius, which can be used to make Vladmir's Offering later."
set MJ4[i]="Spirit Wolves gain invisibility at level 4, making them difficult to kill and easy to harass heroes with in the lane."
set MK4[i]="Feral Heart make you and your wolves stronger overall, while Howl is an offensive spell used before engaging the enemy."
set MM4[i]="Shapeshift makes you incredibly powerful and gives you max movement speed. Avoid being blocked by your wolves when chasing."
set MN4[i]="A Black King Bar will prevent enemies from disabling you, making you very fearsome and almost unstoppable when attacking heroes."
set i=i+1
set KC4[59]=1429221430
set MH4[59]=1747989833
set K34[59]=1848656436
set MG4[59]="ReplaceableTextures\\CommandButtons\\BTNSpiderBlack.blp"
call AQ7(KC4[59],"walk")
call AM7(KC4[59],1.36,MH4[59])
set MI4[i]="At least one level in Spin Web early game will increase your survivability greatly. Remember that attacking/using spells will cause you to break invisibility."
set MJ4[i]="Spawn Spiderlings is both a nuke and pushing spell, so getting items like a Ring of Basilius will provide you with both mana and armor for pushing."
set MK4[i]="Incapacitating Bite makes it very difficult for enemies to get away from you, great for chasing and slowing opponents temporarily for your allies."
set MM4[i]="Try to space out your webs with least 2 seconds of walking distance so that you can benefit from its bonuses on as much ground as possible."
set MN4[i]="With the damage and lifesteal from Insatiable Hunger, sometimes it is best to get items that will prevent you from being disabled, such as a Black King Bar."
set i=i+1
set KC4[60]=1165451634
set MH4[60]=1747989834
set K34[60]=1848656437
set MG4[60]="ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"
call AQ7(KC4[60],"spell slam")
call AM7(KC4[60],1,MH4[60])
set MI4[i]="Stifling Dagger is used for creep-killing and slowing opponents; prevent enemies from escaping by using it with Blink Strike."
set MJ4[i]="Try to Blink Strike to a nearby allied or enemy unit to make a quick escape when caught in a defensive situation. "
set MK4[i]="Be cautious when entering battles with Blink Strike, you could be caught outnumbered or disabled without your escape mechanism."
set MM4[i]="Blur can sometimes allow you to surprise opponents if they aren't paying attention."
set MN4[i]="Items like Battlefury are useful, but getting a Black King Bar or a Satanic afterward will help you survive long enough to deal damage."
set i=i+1
set KC4[61]=1211117654
set MH4[61]=1747989835
set K34[61]=1848656438
set MG4[61]="ReplaceableTextures\\CommandButtons\\BTNNagaSeaWitch.blp"
call AQ7(KC4[61],"stand ready")
call AM7(KC4[61],1,MH4[61])
call AM7(1211119684,1,MH4[61])
call AM7(1211119683,1,MH4[61])
call AM7(1211119668,1,MH4[61])
call AM7(1211119682,1,MH4[61])
set MI4[i]="Mystic Snake is a smart choice to have early game: Its damage and mana drain makes it great for harassing and offsetting its own mana cost."
set MJ4[i]="Mana Shield will increase your survivability drastically. Use it wisely or it can also leave you with no mana for your other spells."
set MK4[i]="Using Split Shot allows you to attack multiple units, but the extra arrows from Split Shot do not gain the properties of orb effects."
set MM4[i]="Stone Gaze is an ultimate that is used to slow opponents and remove their buffs, making it easy to escape or attack the purged enemies."
set MN4[i]="Items that increase statistics and regeneration like Linkens Sphere will always be a good choice because of Mana Shield."
set i=i+1
set KC4[62]=1432646245
set MH4[62]=1747989836
set K34[62]=1848656439
set MG4[62]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"
call AQ7(KC4[62],"spell slam")
call AM7(KC4[62],1,MH4[62])
set MI4[i]="Night Stalker may be passive during the day, but at night his spells make him much more powerful and great for hunting heroes down."
set MJ4[i]="Void is your primary source of damage early game and can be used to interrupt spells and teleports with its mini-stun."
set MK4[i]="While Hunter in the Night does nothing during the day, get it so that during nighttime it will give you massive movement and attack speed."
set MM4[i]="Use Crippling Fear when you are hunting heroes so that they cannot disable or slow you while you are chasing them."
set MN4[i]="Since Darkness will pause time when activated, casting it at night whenever it is on cooldown will extend the total nighttime."
set i=i+1
set KC4[63]=1313026096
set MH4[63]=1747989837
set K34[63]=1848656688
set MG4[63]="ReplaceableTextures\\CommandButtons\\BTNSkeletonArcher.tga"
call AQ7(KC4[63],"stand victory")
call AM7(KC4[63],1.8,MH4[63])
call Z97(KC4[63],100,125,100)
set MI4[i]="Skeleton King is a hero who is known for his ability to reincarnate if focused upon and dealing a lot of damage if he is ignored by opponents. "
set MJ4[i]="Hellfire Blast is a great spell for the early laning phase and a few levels of Attribute Bonus can give you stat points for additional stuns."
set MK4[i]="Critical Strike is generally preferred over Vampiric Aura because its lifesteal is not very effective earlier when Leoric needs more damage."
set MM4[i]="Make sure you have enough mana for Hellfire Blasts and especially Reincarnation. Buying a Magic Stick and/or a Bottle can pay off nicely."
set MN4[i]="Get cheaper damage items like Armlet of Mordiggan and Desolator. A Black King Bar will allow you to dish out damage without being disabled."
set i=i+1
set KC4[64]=1430467634
set MH4[64]=1747989838
set K34[64]=1848656470
set MG4[64]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"
call AQ7(KC4[64],"stand victory")
call AM7(KC4[64],1.1,MH4[64])
set MI4[i]="Lucifer can obtain gold very quickly thanks to Devour, so getting regeneration items like Perseverance will help him to cast spells and survive in the lane."
set MJ4[i]="Devour deals 20 damage per second, so consume creeps with low HP remaining so you can finish digesting the enemy quickly."
set MK4[i]="Use the command -iObsScoreInt1 to find your opponents' level for potential LVL? Death targets. Its mini-stun will also interrupt channeling spells and teleports."
set MM4[i]="Doom is usually used in conjunction with LVL? Death for killing enemy heroes; you can also use it on heroes to silence their spells."
set MN4[i]="When chasing or escaping with Scorched Earth, cast it in front of you so that you will experience the movement speed bonuses for a longer period of time."
set i=i+1
set KC4[65]=1429221424
set MH4[65]=1747989839
set K34[65]=1848656469
set MG4[65]="ReplaceableTextures\\CommandButtons\\BTNHeroCryptLord.tga"
call AQ7(KC4[65],"spell throw")
call AM7(KC4[65],.8,MH4[65])
set MI4[i]="Effective use of Impale and Mana Burn early game requires you to purchase some Null Talismans or Bracers and Bottle."
set MJ4[i]="Mana Burn is a devastating spell to have in the lane, force opponents to play defensively by preventing them from casting spells."
set MK4[i]="Unlike other Agility heroes, Anub'arak is a caster. Getting items like Dagon can be more useful than purchasing damage items."
set MM4[i]="Vendetta is a good initiating spell for surprising opponents. Cast it far away so that they cannot hear its sound effect upon activation."
set MN4[i]="Be careful when using Vendetta against multiple opponents and going near towers where they can see you while you are invisible."
set i=i+1
set KC4[66]=1430468913
set MH4[66]=1747989840
set K34[66]=1848656689
set MG4[66]="ReplaceableTextures\\CommandButtons\\BTNNagaMyrmidon.tga"
call AQ7(KC4[66],"spell")
call AM7(KC4[66],1,MH4[66])
call Z97(KC4[66],$AF,75,$C8)
set MI4[i]="Slithereen Crush requires good positioning, so do your best to stand next to the hero you are trying to stun."
set MJ4[i]="Sprint is a great spell for both chasing and escaping but be careful when using it because you will take bonus damage."
set MK4[i]="In addition to lowering armor, Amplify Damage provides vision of enemies, even heroes that have the ability to become invisible."
set MM4[i]="Bash is usually more effective later in the game when you have more items like Armlet of Mordiggan."
set MN4[i]="Slardar's role in battles is to initiate with Slithereen Crush and focus an enemy with Bash and Amplify Damage. Pick off escapees with Sprint."
set i=i+1
set KC4[67]=1430466609
set MH4[67]=1747989841
set K34[67]=1848656690
set MG4[67]="ReplaceableTextures\\CommandButtons\\BTNBlueDemoness.tga"
call AQ7(KC4[67],"spell slam")
call AM7(KC4[67],1.3,MH4[67])
set MI4[i]="Blink provides you with an escape mechanism and spell dodge but on higher levels it becomes a powerful chasing tool as well."
set MJ4[i]="Scream of Pain is used for killing creeps and harassing opponents, making it more useful than Shadow Strike early game."
set MK4[i]="Try to hit as many targets as possible with Sonic Wave by targeting the ground instead of on an enemy hero directly."
set MM4[i]="Shadow Strike does decent damage but its primary use is for the slow it provides for chasing and outrunning opponents."
set MN4[i]="Her spell reliance, mobility and survivability allows her to buy expensive Intelligence items such as a Guinsoo's Scythe of Vyse."
set i=i+1
set KC4[68]=1160785972
set MH4[68]=1747989842
set K34[68]=1848656471
set MG4[68]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"
call AQ7(KC4[68],"stand victory")
call AM7(KC4[68],1,MH4[68])
set MI4[i]="Searing Arrows provide damage for last hitting creeps and harassing enemy heroes by using it manually by clicking 'R' followed by the designated target."
set MJ4[i]="Wind Walk is commonly used for chasing and escaping but the invisibility and movement speed can help you avoid specific spells with the right timing."
set MK4[i]="Cast Death Pact on enemy or neutral creeps instead of allied units whenever possible because it will give you the gold for killing the unit."
set MM4[i]="Regeneration items like Orchid Malevolence or a Linkens Sphere will allow liberal use of his abilities in battle and help him against spellcasters and nukers."
set MN4[i]="Strafe is usually gotten later, but combined with Searing Arrows, Clinkz can deal a lot of damage quickly, powerful against enemy heroes and buildings."
set i=i+1
set KC4[69]=1162032181
set MH4[69]=1747989843
set K34[69]=1848656467
set MG4[69]="ReplaceableTextures\\CommandButtons\\BTNFacelessOne.blp"
call AQ7(KC4[69],"spell slam")
call AM7(KC4[69],1.3,MH4[69])
call Z97(KC4[69],0,$FF,$96)
set MI4[i]="Time Walk is your escaping and chasing skill, but it will allow you to avoid spells and damage since you are invulnerable during the animation."
set MJ4[i]="Get Backtrack early game if you need to play defensively, while Time Lock will allow you to be a little more aggressive."
set MK4[i]="Since Darkterror is so fragile, enter battles by using Time Walk and then cast Chronosphere to prevent yourself from being disabled or killed otherwise."
set MM4[i]="Chronosphere affects all units that are not controlled by you, including both allies and enemies. Avoid hitting teammates or it could cost them their lives."
set MN4[i]="Items such as Power Treads and Butterfly will give both damage and attack speed, which is useful if Void wants to repetitively stun with Time Lock."
set i=i+1
set KC4[70]=1162032951
set MH4[70]=1747989844
set K34[70]=1848656466
set MG4[70]="ReplaceableTextures\\CommandButtons\\BTNNetherDragon.blp"
call AQ7(KC4[70],"spell slam")
call AM7(KC4[70],1.2,MH4[70])
call Z97(KC4[70],75,$FF,25)
set MI4[i]="Poison Attack allows you to harass an opponent and permanently chase them thanks to a 0 cooldown starting at level 3."
set MJ4[i]="Prevent creeps and towers from attacking you by casting Poison Attack manually by clicking 'C' and then the designated target."
set MK4[i]="Neurotoxin will add bonus damage, useful early for getting the last hit on creeps and also for dealing damage to heroes as well."
set MM4[i]="Early HP and movement speed items like Phase Boots or a Point/Vitality Booster can really make a difference."
set MN4[i]="Sometimes it is wise to invest in a Lothar's Edge or Kelen's Dagger to provide you with the ability to get in and out of combat safely."
set i=i+1
set KC4[71]=1160785970
set MH4[71]=1747989845
set K34[71]=1848656473
set MG4[71]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
call AQ7(KC4[71],"spell")
call AM7(KC4[71],1,MH4[71])
set MI4[i]="Use your attack range to help gauge how far opponents need to be for Plasma Field to deal the most damage."
set MJ4[i]="Unstable Current will slow opponents who cast spells on you and could be useful to help prevent yourself from being killed."
set MK4[i]="Static Link is powerful if you can stay within the range of opponents - getting Unstable Current can sometimes help with that."
set MM4[i]="Storm Seeker strikes the target with the lowest health, so use it after creeps have died or when chasing a solitary target."
set MN4[i]="Consider increasing your HP along with damage when purchasing items."
set i=i+1
set KC4[72]=1429221443
set MH4[72]=1747989846
set K34[72]=1848656465
set MG4[72]="ReplaceableTextures\\CommandButtons\\BTNGhoul.blp"
call AQ7(KC4[72],"victory")
call AM7(KC4[72],1.5,MH4[72])
call Z97(KC4[72],100,100,100)
set MI4[i]="Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit.Open Wounds is a powerful slow that nearly stops enemies in their tracks; it also lets you and your allies heal for attacking that unit."
set MJ4[i]="Feast deals percentage-based damage, which is useful against heroes with high HP and lets Naix fight neutral creeps with ease."
set MK4[i]="Rage can be used to avoid spells and to prevent opponents from disabling you while you are attacking them or trying to escape from them."
set MM4[i]="Infest can be used for escaping, surprising your opponents, to neutral, or to just gain significant health quickly when necessary."
set MN4[i]="Thanks to your physical damage and ability to steal life, Armlet of Mordiggan or Desolator are both solid choices for high-tier items."
set i=i+1
set KC4[73]=1211117640
set MH4[73]=1747989847
set K34[73]=1848656468
set MG4[73]="ReplaceableTextures\\CommandButtons\\BTNPugna.BLP"
call AQ7(KC4[73],"stand ready")
call AM7(KC4[73],1,MH4[73])
set MI4[i]="Nether Blast gives you an incredible skill for killing creeps, harassing heroes and pushing. Use it to score the killing blow to a tower."
set MJ4[i]="Decrepify can be used on opponents either to increase spell damage from you and your allies or to prevent them from attacking."
set MK4[i]="Nether Ward will drain mana and punish opponents for using spells. Just remember to cast it where opponents cannot destroy it easily."
set MM4[i]="Aghanim's Scepter, Linkens Sphere and Bloodstone are examples of items that offer survivability while improving his spellcasting abilities."
set MN4[i]="Life Drain deals a lot of damage unless opponents disable you or run away. With an Aghanim's Scepter, its cooldown becomes 0."
set i=i+1
set KC4[74]=1332109682
set MH4[74]=1747989848
set K34[74]=1848656464
set MG4[74]="ReplaceableTextures\\CommandButtons\\BTNSeaGiantGreen.blp"
call AQ7(KC4[74],"attack slam")
call AM7(KC4[74],1,MH4[74])
set MI4[i]="Be sure to attack enemies slowed by Gush, the armor reduction means that your hits will deal more damage than normal."
set MJ4[i]="Anchor Smash is an offensive damage spell that lets you hurt multiple units, good for killing neutral creeps and useful in team battles."
set MK4[i]="Kraken Shell gives you some protection against physical damage as well as a debuff removal against certain spells."
set MM4[i]="In fights, Tidehunter should be in the middle of the action drawing focus fire and dealing damage because of his skill set and high survivability."
set MN4[i]="Ravage has a large area of effect but Kelen's Dagger will allow you to initiate without being disabled and use it in an optimal spot."
set i=i+1
set KC4[75]=1332963428
set MH4[75]=1747989849
set K34[75]=1848656463
set MG4[75]="ReplaceableTextures\\CommandButtons\\BTNVoidWalker.blp"
call AQ7(KC4[75],"spell")
call AM7(KC4[75],1.5,MH4[75])
call Z97(KC4[75],$96,0,$96)
set MI4[i]="High costs and cooldowns give Atropos limited ability use: Cast spells intelligently and get items like Null Talismans and/or Magic Stick for your mana pool."
set MJ4[i]="Brain Sap is a powerful nuke and heal and deals exact unreduced damage so get it early and always try to use it on enemy heroes when using the spell."
set MK4[i]="Use Nightmare to help teammates to aim their spells and remove an opponent from battles temporarily while you fight their allies."
set MM4[i]="Enfeeble is usually a skill to get after Brain Sap and Nightmare to use on enemy heroes with high damage to reduce their damage capabilities severely."
set MN4[i]="Fiend's Grip will work on Magic Immune units such as those under the active effect of Black King Bar, holding them in place but dealing no damage."
set i=i+1
set KC4[76]=1429221445
set MH4[76]=1747989850
set K34[76]=1848656440
set MG4[76]="ReplaceableTextures\\CommandButtons\\BTNGhostOfKelThuzad.blp"
call AQ7(KC4[76],"stand victory")
call AM7(KC4[76],1.3,MH4[76])
set MI4[i]="Death Pulse lets you kill creeps and harass heroes simultaneously, great for pushing and healing allied units because of its low cooldown."
set MJ4[i]="Sadist will provide you with some early regeneration for killing creeps, while Heartstopper Aura becomes effective as the game goes on."
set MK4[i]="Reaper's Scythe is known for its ability to kill heroes outright, allowing you to bring down even high-HP Strength heroes with ease."
set MM4[i]="Your ultimate can also be used to stun opponents in certain situations, such as interrupting channeling spells and teleports."
set MN4[i]="Items like Bloodstone or Heart of Tarrasque allow you to survive long enough in team battles to make your spells more effective."
set i=i+1
set KC4[77]=1429221446
set MH4[77]=1747990064
set K34[77]=1848656693
set MG4[77]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"
call AQ7(KC4[77],"stand 3")
call AM7(KC4[77],1.,MH4[77])
set MI4[i]="Pudge can known for his ability to isolate enemies with Meat Hook and using Rot and Dismember afterward, killing them outright. "
set MJ4[i]="Early regeneration and movement speed items such as Bottle and Phase Boots help provide Pudge with the means to cast spells and chase his opponents."
set MK4[i]="Use Meat Hook from a location where you are not obstructed by any allied or enemy units other than your target to ensure a better chance of landing it."
set MM4[i]="A Hood of Defiance will improve your magic resistance to reduce damage from using Rot and getting hit by spells; The massive regeneration is also good."
set MN4[i]="Use your spells defensively: Rot can be used to commit suicide if necessary and Meat Hook can be used to rescue an ally from one or more enemies."
set i=i+1
set KC4[78]=1328558154
set MH4[78]=1747990065
set K34[78]=1848656691
set MG4[78]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"
call AQ7(KC4[78],"stand ready")
call AM7(KC4[78],1.2,MH4[78])
set MI4[i]="Empowering Haste is a smart skill to level first, it gives Barathrum movement speed and significant damage for killing creeps and heroes."
set MJ4[i]="A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels.A level of Greater Bash early game can be useful as an extra disable, since the 17% chance is the same for all levels."
set MK4[i]="Get Strength Power Treads because the attack and movement speed benefits your other skills and the boost in HP helps you survive."
set MM4[i]="Charge of Darkness gives Barathrum spell immunity after 12 seconds and provides vision of the target for you and your allies."
set MN4[i]="Nether Strike puts you from the opposite side of where you were facing, push opponents backwards and into your allies."
set i=i+1
set KC4[79]=1432510828
set MH4[79]=1747990066
set K34[79]=1848656472
set MG4[79]="ReplaceableTextures\\CommandButtons\\BTNNerubianQueen.blp"
call AQ7(KC4[79],"attack")
call AM7(KC4[79],1.,MH4[79])
call Z97(KC4[79],$FF,$C8,$C8)
set MI4[i]="Take care of Weaver's HP/damage problems with Bracers or Wraith Bands and get regeneration so he can use his spells freely."
set MJ4[i]="An early level of Watchers can be used to provide vision over the rune powerups. Patrol them to increase their area of detection."
set MK4[i]="Shukuchi is used for harassing and chasing opponents offensively, and escaping and avoiding certain projectile spells defensively."
set MM4[i]="If your Geminate Attack is not working, make sure that you input an attack command ('A' or right-click) and are not simply auto-attacking."
set MN4[i]="Use Time Lapse after taking a lot of recent damage to heal yourself, allowing you to pull off some dangerous moves like diving into towers."
set i=i+1
set KC4[80]=1315334514
set MH4[80]=1747990067
set K34[80]=1848656462
set MG4[80]="ReplaceableTextures\\CommandButtons\\BTNShade.blp"
call AQ7(KC4[80],"stand channel")
call AM7(KC4[80],1.15,MH4[80])
call Z97(KC4[80],0,0,0)
set MI4[i]="Necromastery is important because of its massive damage gain and because your ultimate deals damage based on the number of souls."
set MJ4[i]="Shadow Raze gives you three powerful nuke spells that should be maxed out first. Gauge the distance correctly and hit multiple times."
set MK4[i]="Requiem of Souls deals more damage the closer you are: Placement items like Lothar's Edge and Kelen's Dagger can help you land it."
set MM4[i]="After maxing your other two spells, Presence of the Dark Lord will be useful by then, good for pushing and dealing more physical damage."
set MN4[i]="If you die, remember to fill up on souls again before major fights when you respawn or you will be much less effective in battles."
set i=i+1
set KC4[81]=1429221451
set MH4[81]=1747990068
set K34[81]=1848656692
set MG4[81]="ReplaceableTextures\\CommandButtons\\BTNArachnathidGreen.blp"
call AQ7(KC4[81],"attack 3")
call AM7(KC4[81],1,MH4[81])
set MI4[i]="Burrowstrike is both versatile and powerful: It deals damage, stuns and provides you with a useful escape or chasing mechanism."
set MJ4[i]="Using Sandstorm at the right time will dodge certain projectile spells and can protect you temporarily if it is necessary."
set MK4[i]="Getting Kelen's Dagger will give him increased mobility and reach, and also the ability to Blink into battle right after channeling Epicenter."
set MM4[i]="While you cannot move while Epicenter is channeling, once the pulses begin you can freely move around (mostly to chase your opponent)."
set MN4[i]="Caustic Finale might be an orb effect but it is extremely useful for killing multiple units quickly for fighting neutrals, pushing and defending."
set i=i+1
set KC4[82]=1332766568
set MH4[82]=1747990069
set K34[82]=1848656461
set MG4[82]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"
call AQ7(KC4[82],"stand victory")
call AM7(KC4[82],1,MH4[82])
set MI4[i]="Counter Helix gives Axe the flexibility to both lane and jungle. A Stout Shield will help reduce the damage from taking attacks in order to activate Helix."
set MJ4[i]="A Vanguard or a Hood of Defiance offers survivability and regeneration, which are usually more useful to Axe than increasing his attack speed or damage."
set MK4[i]="Berserker's Call is used to initiate fights and draw focus fire. Using it when there are more enemy units increases the chance of activating Counter Helix."
set MM4[i]="Monitor your opponent's HP for the perfect Culling Blade opportunity to finish them off. However, if your enemy has too much HP, it will hardly do anything."
set MN4[i]="Kelen's Dagger and/or Phase Boots can help you enter the fight first and get close enough for a Berserker's Call."
set i=i+1
set KC4[83]=1215722344
set MH4[83]=1747990070
set K34[83]=1848656474
set MG4[83]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"
call AQ7(KC4[83],"stand victory")
call AM7(KC4[83],1.25,MH4[83])
call Z97(KC4[83],$FA,$96,$96)
set MI4[i]="Getting Blood Bath will allow you to take a few hits as you are killing creeps because you will recover your health immediately afterwards."
set MJ4[i]="An early level of Bloodrage can be useful for silencing enemies temporarily and for dealing a little bit of damage."
set MK4[i]="Phase Boots and HP can be just as useful as damage items because they increase his survivability for chasing enemies and other longer battles."
set MM4[i]="Use Rupture when your enemy has to either run away or to prevent them from moving, such as when an ally is about to use a powerful spell."
set MN4[i]="Both allies and enemies gain the massive damage increase and are silenced from Bloodrage, which can be disastrous if used incorrectly."
set i=i+1
set KC4[84]=1432642913
set MH4[84]=1747990071
set K34[84]=1848656460
set MG4[84]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"
call AQ7(KC4[84],"stand ready")
call AM7(KC4[84],1,MH4[84])
set MI4[i]="Abbadon's spells can save allies while dealing damage, so support and regeneration items like Vladmir's Offering can be more useful than damage items."
set MJ4[i]="Death Coil can be used both as a nuke and a heal, just remember that it deals damage to you unless you are using Aphotic Shield or Borrowed Time."
set MK4[i]="Aphotic Shield prevents damage but can also be used to remove certain debuffs, such as removing the stun duration effect on an ally."
set MM4[i]="Frostmourne is usually gotten later but it is very useful for chasing and helping your allies outrun your opponents."
set MN4[i]="Borrowed Time can be cast manually as well. If you know you are going to receive a lot of damage sometimes it can be wiser to use it then."
set i=i+1
set KC4[85]=1160786242
set MH4[85]=1747990072
set K34[85]=1848656441
set MG4[85]="ReplaceableTextures\\CommandButtons\\BTNvengeanceincarnate.blp"
call AQ7(KC4[85],"stand ready")
call AM7(KC4[85],.8,MH4[85])
set MI4[i]="Spectral Dagger is your utility spell. You can use it for chasing people down, scouting dangerous areas and escaping. "
set MJ4[i]="You also walk through units, trees, even cliffs while you are walking on Spectral Dagger's black path, making it very handy when used properly."
set MK4[i]="Desolate is great for dealing target to isolated targets but Dispersion helps you to survive in the lane: Chose whatever combination suits you best."
set MM4[i]="Haunt lets you jump into a fight directly from anywhere in the map; just make sure that you pay attention to the actions of your team."
set MN4[i]="Getting HP will allow you to withstand and dish out more Dispersion damage, which is extremely powerful in team fights."
set i=i+1
set KC4[86]=1160786241
set MH4[86]=1747990073
set K34[86]=1848656459
set MG4[86]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctor.blp"
call AQ7(KC4[86],"stand victory")
call AM7(KC4[86],1.25,MH4[86])
set MI4[i]="Paralyzing Cask is your initiating spell for your other skills and can effectively keep two nearby units stun-locked at higher levels."
set MJ4[i]="Maledict drastically reduces the damage needed to kill opponents and is an important spell to land in every fight."
set MK4[i]="An early level of Voodoo Restoration can provide a relatively cheap heal if you are forced to play defensively."
set MM4[i]="Damaging your opponent immediately after using Maledict is wise because it will deal more bonus damage overall at the 3 ticks."
set MN4[i]="Death Ward is a powerful channeling spell if not interrupted. A Black King Bar will help to prevent enemies from disabling you."
set i=i+1
set KC4[87]=1429221456
set MH4[87]=1747990081
set K34[87]=1848656449
set MG4[87]="ReplaceableTextures\\CommandButtons\\BTNDestroyer.blp"
call AQ7(KC4[87],"stand alternate 2")
call AM7(KC4[87],.85,MH4[87])
set MI4[i]="Getting Intelligence and mana items is extremely important for Harbringer as the power of Arcane Orb and Sanity's Eclipse rely on this."
set MJ4[i]="Use Astral Imprisonment to control your opponents' mana, for escaping/chasing, or on yourself and allies to avoid spells."
set MK4[i]="Cast Arcane Orb manually early on because you will have a greater chance of activating Essence Aura to use it endlessly."
set MM4[i]="Guinsoo's Scythe of Vyse is a great choice because it offers Intelligence, balanced stats and provides Harbringer with a powerful disable."
set MN4[i]="Use Sanity's Eclipse early in fights so that you drain casters with high Intelligence of their mana and cripple their ability to cast spells."
set i=i+1
set KC4[88]=1160786243
set MH4[88]=1747990083
set K34[88]=1848656450
set MG4[88]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"
call AQ7(KC4[88],"spell")
call AM7(KC4[88],1.5,MH4[88])
set MI4[i]="Shadow Word is either a heal or damage over time, definitely the most powerful early game spell to have."
set MJ4[i]="The affordable Mekansm is a good support item for Warlock, who is not a hero who is reliant on gold and items to be effective."
set MK4[i]="Rain of Chaos creates a powerful Infernal that can take on heroes and is also great for killing creeps and pushing buildings."
set MM4[i]="Fatal Bonds can deal huge damage if you and your teammates have other area of effect (AoE) spells that would hurt multiple linked units."
set MN4[i]="The stun when using Rain of Chaos along with its huge casting range (1200) is great for interrupting spells and initiating battles."
set i=i+1
set KC4[89]=1211117641
set MH4[89]=1747990084
set K34[89]=1848656458
set MG4[89]="ReplaceableTextures\\CommandButtons\\BTNKoboldGeomancer.blp"
call AQ7(KC4[89],"spell")
call AM7(KC4[89],1.4,MH4[89])
call AM7(1211117642,1.4,MH4[89])
set MI4[i]="Vladmir's Offering and/or Mekansm provides valuable auras and useful heals that can help support your team and keep your Meepos alive."
set MJ4[i]="Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival).Poof is both a teleport and damage spell and is great against neutrals. Poof to yourself to deal double the damage (from departure and arrival)."
set MK4[i]="Geomancer is an advanced hero: Be sure to monitor their individual health because if one dies, they all will."
set MM4[i]="Strength Power Treads are suggested since clones will receive all of the Strength from footwear along with a 2.5 bonus (12.5 total)."
set MN4[i]="Time Earthbind with each of your clones. With 4 Meepos and Level 4 Earthbind, you can almost permanently immobilize them."
set i=i+1
set KC4[90]=1311781207
set MH4[90]=1747990085
set K34[90]=1848656457
set MG4[90]="ReplaceableTextures\\CommandButtons\\BTNDarkTrollShadowPriest.blp"
call AQ7(KC4[90],"spell")
call AM7(KC4[90],1.2,MH4[90])
set MI4[i]="An early level of both Shadow Wave and Shallow Grave provides a lot of support before getting Poison Touch to level 3 for its added stun."
set MJ4[i]="Try to use Shadow Wave to heal and damage opponents at the same time. Surround an enemy with multiple allied units for more damage."
set MK4[i]="In addition to slowing and damaging opponents, Poison Touch will allow you to interrupt channeling spells and teleports"
set MM4[i]="Dazzle generally does not need many items and can sometimes focus on increasing his spell use with regeneration and support items like Mekansm."
set MN4[i]="Weave is a powerful spell, try to hit both allies and enemies with it, and it can also be used to provide vision before major battles occur."
set i=i+1
set KC4[91]=1311780946
set MH4[91]=1747990086
set K34[91]=1848656451
set MG4[91]="ReplaceableTextures\\CommandButtons\\BTNPitLord.blp"
call AQ7(KC4[91],"stand channel")
call AM7(KC4[91],.95,MH4[91])
set MI4[i]="Firestorm will be your main ability for killing creeps but it can deal a lot of damage to heroes if you combine it with disables or slows."
set MJ4[i]="The Pit of Malice is a useful disable that lasts for 10 seconds so it will both ensnare opponents and deter opponents from entering the circle."
set MK4[i]="Expulsion is usually used after some creeps have died so the spell lasts longer and will deal damage and mini-stun enemies."
set MM4[i]="Pit Lord is played more as a caster, increase his team presence and spell use by obtaining expensive Intelligence items like Shiva's Guard."
set MN4[i]="Dark Rift is a great spell for transporting multiple allies to surprise opponents, and more importantly to defend and attack the base."
set i=i+1
set KC4[92]=1211117650
set MH4[92]=1747990087
set K34[92]=1848656456
set MG4[92]="ReplaceableTextures\\CommandButtons\\BTNZombie.blp"
call AQ7(KC4[92],"stand")
call AM7(KC4[92],2,MH4[92])
call AM7(1211119433,1.3,MH4[92])
set MI4[i]="Decay is used to deal damage and make opponents more vulnerable, while increasing the survivability of Dirge temporarily."
set MJ4[i]="Make sure Dirge is a presence who can cast his spells in fights by buying regeneration items like Vladmir's Offering and Void Stone."
set MK4[i]="Soul Rip is a powerful heal or nuke but remember that it will have almost no effect without nearby units. Cast it in crowds."
set MM4[i]="Use Tombstone when engaging the enemy because the zombies have a slowing capability and may also help block your opponents."
set MN4[i]="Tombstone Zombies become extremely powerful when your opponents have low health and attack and move much faster."
set i=i+1
set KC4[93]=1211117646
set MH4[93]=1747990088
set K34[93]=1848656455
set MG4[93]="ReplaceableTextures\\CommandButtons\\BTNDranaiMage.blp"
call AQ7(KC4[93],"spell")
call AM7(KC4[93],1.15,MH4[93])
set MI4[i]="Ion shell is great for killing creeps and dealing damage to heroes, but it will not damage an enemy target if you cast it on them directly."
set MJ4[i]="A level of Surge early game can help you and allies escape and chase enemies, and works nicely to help you close in on opponents with Ion Shell."
set MK4[i]="Vacuum is an extremely powerful skill that can be used for initiating and combining with other spells. It can also interrupt channeling and teleport spells."
set MM4[i]="Make sure they are standing closer to the edge of your targeting circle when casting Vacuum to pull your opponents further."
set MN4[i]="Use Wall of Replica where multiple heroes will touch it; try using it with Vacuum. Get your allies to run through the wall too."
set i=i+1
set KC4[94]=1211117653
set MH4[94]=1747990082
set K34[94]=1848656454
set MG4[94]="ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp"
call AQ7(KC4[94],"spell")
call AM7(KC4[94],1.25,MH4[94])
set MI4[i]="Having at least one level in Quas, Wex and Exort will give you a larger repertoire of spells. Type -invokelist to obtain a full list of combinations."
set MJ4[i]="Ghost Walk (QQW) can be used to get yourself out of a tight situation, and also for slowing opponents so that your allies can chase/escape."
set MK4[i]="Sunstrike (EEE) is a global-ranged nuke that deals damage based on the level of Exort. When using it, you have to factor in the 1.7 casting time."
set MM4[i]="Forge Spirit (EEQ) and Cold Snap (QQQ) can be effective for pushing towers and against heroes with low armor. "
set MN4[i]="EMP (WWW) and Tornado (WWQ) can completely drain off heroes with low mana pools and have a impressive casting range."
set i=i+1
set KC4[95]=1433105516
set MH4[95]=1747989572
set K34[95]=1848656182
set MG4[95]="ReplaceableTextures\\CommandButtons\\BTNSpell_Shadow_SummonVoidWalker.blp"
call AQ7(KC4[95],"stand")
call AM7(KC4[95],1.5,MH4[95])
set MI4[i]="Conversion allows Enigma to neutral creep effectively. Target the highest level creep possible and move your low HP Eidolons out of the way to save them."
set MJ4[i]="In the lane, Conversion can be used on allied creeps to deny your opponents of experience and gold, and for making sure you last hit enemy creeps."
set MK4[i]="The multiple stuns on higher levels of Malefice make it useful for preventing an opponent from channeling spells or help you chase/escape them."
set MM4[i]="Use Midnight Pulse in conjunction with Black Hole to deal massive damage to enemies. Just make sure that you cast it before Black Hole."
set MN4[i]="Kelen's Dagger is great for Black Hole placement, and a Black King Bar will prevent most spells from stopping the channeling effect of the spell."
set i=i+1
set KC4[96]=1328558390
set MH4[96]=1747990354
set K34[96]=1848657721
set MG4[96]="ReplaceableTextures\\CommandButtons\\BTNTrollBatRider.blp"
call AQ7(KC4[96],"stand")
call AM7(KC4[96],1.2,MH4[96])
call AM7(1328558391,1.2,MH4[96])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[97]=1311787088
set MH4[97]=1747993136
set K34[97]=1848658002
set MG4[97]="ReplaceableTextures\\CommandButtons\\BTNIcyGhost.blp"
call AQ7(KC4[97],"stand")
call AM7(KC4[97],1.17,MH4[97])
call AM7(1311787088,1.2,MH4[97])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[98]=1211119409
set MH4[98]=1747990322
set K34[98]=1848657222
set MG4[98]="ReplaceableTextures\\CommandButtons\\BTNMurgulShadowCaster.blp"
call AQ7(KC4[98],"stand 3")
call AM7(KC4[98],1.25,MH4[98])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[99]=1164277353
set MH4[99]=1747989814
set K34[99]=1848656214
set MG4[99]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"
call AQ7(KC4[99],"spell channel")
call AM7(KC4[99],1,MH4[99])
call AM7(1164277357,1,MH4[99])
call AM7(1160786518,1,MH4[99])
call AM7(1160786519,1,MH4[99])
call AM7(1160786517,1,MH4[99])
set MI4[i]="Get Soul Steal if you need healing in the lane."
set MJ4[i]="Purchase statistic-increasing items like Wraith Bands and later items like Sange and Yasha to benefit both Terrorblade and his images."
set MK4[i]="It might be difficult to escape due to the trail you leave behind when walking, you may have to use an image to act as a block or decoy."
set MM4[i]="Sunder can turn fights around when you have low health but be careful of disables and high damage spells when trying to swap."
set MN4[i]="Creating ranged images in Metamorphosis will allow you to deal damage safely in fights as well as push down buildings very quickly."
set i=i+1
set KC4[100]=1164666213
set MH4[100]=1747989817
set K34[100]=1848656215
set MG4[100]="ReplaceableTextures\\CommandButtons\\BTNKeeperGhostBlue.blp"
call AQ7(KC4[100],"stand victory")
call AM7(KC4[100],1,MH4[100])
set MI4[i]="Split Earth is a very useful disable while Lightning Storm is taken because of its low cooldown. Both are powerful spells that hit multiple targets."
set MJ4[i]="By using Lightning Storm to finish low-health creeps with nearby opponents, you can get gold and harass enemy heroes at the same time."
set MK4[i]="Diabolic Edict is one of the most powerful spells for destroying buildings. Eliminate the creeps first so that you only have one target."
set MM4[i]="Turn off Pulse Nova when you have finished using it because the spell will continue until you have exhausted your entire mana pool."
set MN4[i]="Items like Bloodstone or Aghanim's Scepter will allow Leshrac to use his spells more liberally and survive in the midst of battle."
set i=i+1
set KC4[101]=1160786504
set MH4[101]=1747993410
set K34[101]=1848658764
set MG4[101]="ReplaceableTextures\\CommandButtons\\BTNArchimonde.blp"
call AQ7(KC4[101],"stand 3")
call AM7(KC4[101],1.25,MH4[101])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[102]=1433168227
set MH4[102]=1747989825
set K34[102]=1848656216
set MG4[102]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"
call AQ7(KC4[102],"stand channel")
call AM7(KC4[102],1.3,MH4[51])
set MI4[i]="Dark Ritual is useful for denying allied creeps and provides you with mana to use spells without buying regeneration items."
set MJ4[i]="Frost Nova is a very powerful spell that allows you to be aggressive. Attack the enemy a few extra times while they are slowed."
set MK4[i]="Chain Frost is most effective when used against 2-3 nearby targets (ideally heroes), but will not bounce when used on a lone unit."
set MM4[i]="Frost Armor should be cast on multiple teammates when you have the mana for it later on; it works nicely against melee units."
set MN4[i]="The first target of your Chain Frost can interrupt channeling and teleport spells if absolutely necessary."
set i=i+1
set KC4[103]=1430468406
set MH4[103]=1747989826
set K34[103]=1848656217
set MG4[103]="ReplaceableTextures\\CommandButtons\\BTNBanshee.blp"
call AQ7(KC4[103],"spell wail")
call AM7(KC4[103],1.35,MH4[103])
set MI4[i]="Carrion Swarm is your primary nuke and first skill to max. Make use of its range by casting it on the ground instead of on a unit directly."
set MJ4[i]="An early level of Silence can help prevent you and your allies from being attacked by multiple spells."
set MK4[i]="The ghosts of Exorcism will attack whatever you attack, so if you want to direct all attention to a single unit simply focus them and stay nearby."
set MM4[i]="Exorcism also makes Krobelus extremely effective for quickly destroying enemy buildings, so be sure to push the enemy base when you can"
set MN4[i]="The effect of Exorcism stops if you die in combat: Invest in items that improve your survivability, such as a Bloodstone or a Heart of Tarrasque."
set i=i+1
set KC4[104]=1430466872
set MH4[104]=1747989827
set K34[104]=1848656218
set MG4[104]="ReplaceableTextures\\CommandButtons\\BTNLion.BLP"
call AQ7(KC4[104],"spell callstorm")
call AM7(KC4[104],1.3,MH4[104])
call Z97(KC4[104],50,100,$FF)
set MI4[i]="With plenty of damage and disables, Lion is quite a force to be reckoned with cheap utility items such as Bottle and Phase Boots."
set MJ4[i]="Impale gives Lion the ability to disable multiple targets and deals decent damage, so it is definitely the most versatile of his three skills for the early game."
set MK4[i]="Mana Drain only works on units with mana: Using Mana Drain on enemy heroes will reduce their spell use while replenishing mana."
set MM4[i]="Avoid wasting Finger of Death on low-health enemy heroes when a few extra attacks or using another spell like Impale will deal enough damage."
set MN4[i]="Wait until the duration of your first disable wears off before using another one for maximum disable time when using Impale and Voodoo."
set i=i+1
set KC4[105]=1162032439
set MH4[105]=1747989828
set K34[105]=1848656432
set MG4[105]="ReplaceableTextures\\CommandButtons\\BTNHydralisk.blp"
call AQ7(KC4[105],"attack")
call AM7(KC4[105],1.,MH4[105])
call Z97(KC4[105],$96,$C8,$FF)
set MI4[i]="Venomous Gale is a spell that hits multiple opponents and slows them, making it very useful for getting early kills."
set MJ4[i]="At least one level of Poison Sting is recommended early game for its slow effect."
set MK4[i]="Bottle and Magic Stick will help deal with his low HP/mana, while Phase Boots are a cheap way to improve his chasing capabilities."
set MM4[i]="Wards are very useful for pushing a lane and killing neutral and enemy creeps, but you can also use it to provide vision."
set MN4[i]="Poison Nova deals a lot of damage but you have to combine it with other spells and attacks because it does not deal fatal damage (stops at 1 HP)."
set i=i+1
set KC4[106]=1430466865
set MH4[106]=1747989829
set K34[106]=1848656178
set MG4[106]="ReplaceableTextures\\CommandButtons\\BTNBlueMagnataur.tga"
call AQ7(KC4[106],"stand channel")
call AM7(KC4[106],1,MH4[106])
call Z97(KC4[106],$96,$96,100)
set MI4[i]="Bottle and Perseverance help with early regeneration,. while purchasing Kelen's Dagger later will help you to land Reverse Polarity."
set MJ4[i]="A few Attribute Bonus points can help you cast more spells. Save Mighty Swing for later levels when you have more damage."
set MK4[i]="By targeting the ground where you want to fire Shockwave, you can hit both creeps and opponents and make use of its long range."
set MM4[i]="Magnus should cast Empower on himself and other allies with high damage before initiating team battles with his ultimate."
set MN4[i]="The cleave of Battlefury stacks directly with Mighty Swing, making it a good damage item especially if you already have a Perseverance."
set i=i+1
set KC4[107]=1430468144
set MH4[107]=1747989830
set K34[107]=1848656433
set MG4[107]="ReplaceableTextures\\CommandButtons\\BTNSpiritWyvern.blp"
call AQ7(KC4[107],"stand victory")
call AM7(KC4[107],1,MH4[107])
call Z97(KC4[107],$96,$96,$96)
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[108]=1429221441
set MH4[108]=1747989831
set K34[108]=1848656434
set MG4[108]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"
call AQ7(KC4[108],"stand victory")
call AM7(KC4[108],1.05,MH4[108])
set MI4[i]="Chaos Bolt and Blink Strike are active abilities that are more useful in the lane and for killing opponents than Critical Strike."
set MJ4[i]="Chaos Bolt is a disable that switches between average and extremely powerful, the sooner you have max out this spell, the better."
set MK4[i]="His high natural movement speed (325 - the highest in the game) and Blink Strike make him very difficult for opponents to outrun or chase him."
set MM4[i]="If you Blink Strike and then use Chaos Bolt, you can spend more time hitting opponents and less time waiting for his slow casting animation. "
set MN4[i]="Make Nessaj and Phantasm stronger by buying Strength items like Armlet of Mordiggan (when activated) and Heart of Tarrasque."
set i=i+1
set KC4[109]=1311788343
set MH4[109]=1747993687
set K34[109]=1848659256
set MG4[109]="ReplaceableTextures\\CommandButtons\\BTNFrostWyrm.blp"
call AQ7(KC4[109],"stand victory")
call AM7(KC4[109],.9,MH4[109])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set KC4[110]=1311788363
set MH4[110]=1747993926
set K34[110]=1848659276
set MG4[110]="ReplaceableTextures\\CommandButtons\\BTNGnollWarden.blp"
call AQ7(KC4[110],"stand victory")
call AM7(KC4[110],1.1,MH4[110])
set MI4[i]=""
set MJ4[i]=""
set MK4[i]=""
set MM4[i]=""
set MN4[i]=""
set i=i+1
set K04=110
set KC4[500]=1211445296
set MG4[500]="ReplaceableTextures\\CommandButtons\\BTNWispHero.blp"
call AQ7(KC4[500],"stand")
call AM7(KC4[500],1.5,0)
set MI4[500]=""
set MJ4[500]=""
set MK4[500]=""
set MM4[500]=""
set MN4[500]=""
set KC4[600]=1211510832
set MG4[600]="ReplaceableTextures\\CommandButtons\\BTNSeaTurtleRed.blp"
call AQ7(KC4[600],"stand")
call AM7(KC4[600],.8,0)
set MI4[600]=""
set MJ4[600]=""
set MK4[600]=""
set MM4[600]=""
set MN4[600]=""
set K54[1]=1315074670
set K54[2]=1164207469
set K54[3]=1311781174
set K54[4]=1315070563
set K54[5]=1315007329
set K54[6]=1328558160
set K54[7]=1433631084
set K54[8]=1160785973
set K54[9]=1311781199
set K54[$A]=1212365106
set K54[$B]=1215723364
set K54[$C]=1212363833
set K54[$D]=1215657064
set K54[$E]=1332179560
set K54[$F]=1429221430
set K54[16]=1162032439
set K54[17]=1164277353
set K54[18]=1432510828
set K54[19]=1160785972
set K54[20]=1162032951
set K54[21]=1215722344
set K54[22]=1315334514
set K54[23]=1160785970
set K54[24]=1162032181
set K54[25]=1165451634
set K54[26]=1429221424
set K54[27]=1211117654
set K54[28]=1160786242
set K54[29]=1311781206
set K54[30]=1211117641
set K54[31]=1160786265
set K54[32]=1211119409
set K54[33]=1160786510
set K54[34]=1311788336
set K54[35]=1311788363
set K24=35
set K_4[1]=1315988077
set K_4[2]=1215063922
set K_4[3]=1214345830
set K_4[4]=1211117616
set K_4[5]=1211117617
set K_4[6]=1214344551
set K_4[7]=1211117624
set K_4[8]=1432580716
set K_4[9]=1333027688
set K_4[$A]=1313026096
set K_4[$B]=1432646245
set K_4[$C]=1430466865
set K_4[$D]=1332109682
set K_4[$E]=1429221446
set K_4[$F]=1429221451
set K_4[16]=1328558154
set K_4[17]=1432642913
set K_4[18]=1332766568
set K_4[19]=1429221441
set K_4[20]=1429221443
set K_4[21]=1430468913
set K_4[22]=1430467634
set K_4[23]=1429221432
set K_4[24]=1211117636
set K_4[25]=1311781193
set K_4[26]=1211117649
set K_4[27]=1311780946
set K_4[28]=1211117652
set K_4[29]=1211119187
set K_4[30]=1211117650
set K_4[31]=1328558389
set K_4[32]=1160786505
set K_4[33]=1160786502
set K_4[34]=1328558406
set K_4[35]=1160786738
set K_4[36]=1160786507
set M44=36
set M74[1]=1332898670
set M74[2]=1164799855
set M74[3]=1164799603
set M74[4]=1211117620
set M74[5]=1214931305
set M74[6]=1433105516
set M74[7]=1215128178
set M74[8]=1211117643
set M74[9]=1316252014
set M74[$A]=1215130471
set M74[$B]=1214409837
set M74[$C]=1311781185
set M74[$D]=1211117633
set M74[$E]=1433168227
set M74[$F]=1164666213
set M74[16]=1430468406
set M74[17]=1430466872
set M74[18]=1430466609
set M74[19]=1430468144
set M74[20]=1211117640
set M74[21]=1332963428
set M74[22]=1429221445
set M74[23]=1160786241
set M74[24]=1429221456
set M74[25]=1160786000
set M74[26]=1160786243
set M74[27]=1311781207
set M74[28]=1211117646
set M74[29]=1311786311
set M74[30]=1211117651
set M74[31]=1311780930
set M74[32]=1211117653
set M74[33]=1328558390
set M74[34]=1311787088
set M74[35]=1160786504
set M74[36]=1160786506
set M74[37]=1160786520
set M74[38]=1211122767
set M74[39]=1311788343
set M84=39
set M94[1]=1332898670
set M94[2]=1164799855
set M94[3]=1164799603
set M94[4]=1211117620
set M94[5]=1214931305
set M94[6]=1433105516
set M94[7]=1215128178
set M94[8]=1211117643
set M94[9]=1316252014
set M94[$A]=1315074670
set M94[$B]=1214409837
set M94[$C]=1311781185
set M94[$D]=1211117633
set M94[$E]=1433168227
set M94[$F]=1164666213
set M94[16]=1430468406
set M94[17]=1430466872
set M94[18]=1430466609
set M94[19]=1430468144
set M94[20]=1211117640
set M94[21]=1332963428
set M94[22]=1429221445
set M94[23]=1160786241
set M94[24]=1429221456
set M94[25]=1160786000
set M94[26]=1160786243
set M94[27]=1311781207
set M94[28]=1311786311
set M94[29]=1211117651
set M94[30]=1311780930
set M94[31]=1211117653
set M94[32]=1311781174
set M94[33]=1328558160
set M94[34]=1433631084
set M94[35]=1160785973
set M94[36]=1311781199
set M94[37]=1160786265
set M94[38]=1215723364
set M94[39]=1162032439
set M94[40]=1432510828
set M94[41]=1160785972
set M94[42]=1162032951
set M94[43]=1315334514
set M94[44]=1160785970
set M94[45]=1211117654
set M94[46]=1311781206
set M94[47]=1211117649
set M94[48]=1328558390
set M94[49]=1311787088
set M94[50]=1328558406
set M94[51]=1160786504
set M94[52]=1160786510
set M94[53]=1160786506
set M94[54]=1160786502
set M94[55]=1160786520
set M94[56]=1211122767
set M94[57]=1311788363
set M94[58]=1311788343
set MD4=58
set ME4[1]=1215130471
set ME4[2]=1211117646
set ME4[3]=1164207469
set ME4[4]=1315070563
set ME4[5]=1315007329
set ME4[6]=1212363833
set ME4[7]=1215657064
set ME4[8]=1332179560
set ME4[9]=1429221430
set ME4[$A]=1164277353
set ME4[$B]=1215722344
set ME4[$C]=1162032181
set ME4[$D]=1165451634
set ME4[$E]=1429221424
set ME4[$F]=1160786242
set ME4[16]=1211117641
set ME4[17]=1212365106
set ME4[18]=1315988077
set ME4[19]=1215063922
set ME4[20]=1214345830
set ME4[21]=1211117616
set ME4[22]=1211117617
set ME4[23]=1214344551
set ME4[24]=1211117624
set ME4[25]=1432580716
set ME4[26]=1333027688
set ME4[27]=1313026096
set ME4[28]=1432646245
set ME4[29]=1430466865
set ME4[30]=1332109682
set ME4[31]=1429221446
set ME4[32]=1429221451
set ME4[33]=1328558154
set ME4[34]=1432642913
set ME4[35]=1332766568
set ME4[36]=1429221441
set ME4[37]=1429221443
set ME4[38]=1430468913
set ME4[39]=1430467634
set ME4[40]=1429221432
set ME4[41]=1211117636
set ME4[42]=1311781193
set ME4[43]=1311780946
set ME4[44]=1211117652
set ME4[45]=1211119187
set ME4[46]=1211117650
set ME4[47]=1328558389
set ME4[48]=1211119409
set ME4[49]=1160786505
set ME4[50]=1311788336
set ME4[51]=1160786738
set ME4[52]=1160786507
set MF4=52
call XO7()
endfunction
function FX8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set LP4="FX8"
call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_MASKED,GetUnitX(MQ4),GetUnitY(MQ4),900,false,false))
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_MASKED,GetUnitX(MO4),GetUnitY(MO4),900,false,false))
call RN7(t)
set t=null
return false
endfunction
function FY8 takes item Z4 returns string
if Z4==null then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return BU[OK7(Z4)]
endfunction
function FZ8 takes nothing returns nothing
local unit a=CreateUnit(Player(0),1747990348,-6100,-5800,0)
local unit b=CreateUnit(Player(0),1747990348,-6100,-5800,0)
local item i=CreateItem(1227900749,0,0)
set LP4="FZ8"
call UnitAddItem(a,i)
if UnitUseItem(a,i)then
endif
call UnitRemoveItem(a,i)
call UnitAddItem(b,i)
if UnitUseItem(b,i)then
set MC4=true
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,(GetObjectName((1848657993))))
else
set MC4=false
endif
call ShowUnit(a,false)
call KillUnit(a)
call ShowUnit(b,false)
call KillUnit(b)
call RemoveItem(i)
set i=null
set b=null
set a=null
endfunction
function FA8 takes integer id returns boolean
return id==1211117642 or id==1311788365
endfunction
function FB8 takes integer id returns boolean
local integer i=0
loop
exitwhen i>EA7
if EZ7[i]==id then
return true
endif
set i=i+1
endloop
return false
endfunction
function FC8 takes nothing returns nothing
set EA7=EA7+1
set EZ7[EA7]=1093753431
set EA7=EA7+1
set EZ7[EA7]=1093681718
set EA7=EA7+1
set EZ7[EA7]=1093684023
set EA7=EA7+1
set EZ7[EA7]=1093686327
set EA7=EA7+1
set EZ7[EA7]=1093686328
set EA7=EA7+1
set EZ7[EA7]=1093742918
set EA7=EA7+1
set EZ7[EA7]=1093742920
set EA7=EA7+1
set EZ7[EA7]=1093742919
set EA7=EA7+1
set EZ7[EA7]=1093742916
set EA7=EA7+1
set EZ7[EA7]=1093686067
set EA7=EA7+1
set EZ7[EA7]=1093742917
set EA7=EA7+1
set EZ7[EA7]=1093743959
set EA7=EA7+1
set EZ7[EA7]=1093814353
set EA7=EA7+1
set EZ7[EA7]=1093808945
set EA7=EA7+1
set EZ7[EA7]=1093814351
set EA7=EA7+1
set EZ7[EA7]=1093677647
set EA7=EA7+1
set EZ7[EA7]=1093679193
set EA7=EA7+1
set EZ7[EA7]=1093679194
set EA7=EA7+1
set EZ7[EA7]=1093679408
set EA7=EA7+1
set EZ7[EA7]=1093679410
set EA7=EA7+1
set EZ7[EA7]=1095331943
set EA7=EA7+1
set EZ7[EA7]=1095332962
set EA7=EA7+1
set EZ7[EA7]=1093683254
set EA7=EA7+1
set EZ7[EA7]=1093751108
set EA7=EA7+1
set EZ7[EA7]=1093751863
set EA7=EA7+1
set EZ7[EA7]=1093744973
set EA7=EA7+1
set EZ7[EA7]=1093747011
set EA7=EA7+1
set EZ7[EA7]=1094936696
set EA7=EA7+1
set EZ7[EA7]=1093810265
set EA7=EA7+1
set EZ7[EA7]=1095328363
set EA7=EA7+1
set EZ7[EA7]=1093748055
set EA7=EA7+1
set EZ7[EA7]=1093677367
set EA7=EA7+1
set EZ7[EA7]=1093683801
set EA7=EA7+1
set EZ7[EA7]=1093682767
set EA7=EA7+1
set EZ7[EA7]=1093683255
set EA7=EA7+1
set EZ7[EA7]=1093681720
set EA7=EA7+1
set EZ7[EA7]=1093752645
set EA7=EA7+1
set EZ7[EA7]=1095333995
set EA7=EA7+1
set EZ7[EA7]=1093753417
set EA7=EA7+1
set EZ7[EA7]=1093681995
set EA7=EA7+1
set EZ7[EA7]=1093683788
set EA7=EA7+1
set EZ7[EA7]=1093748303
set EA7=EA7+1
set EZ7[EA7]=1095328865
set EA7=EA7+1
set EZ7[EA7]=1093683266
set EA7=EA7+1
set EZ7[EA7]=1093682227
set EA7=EA7+1
set EZ7[EA7]=1093682246
set EA7=EA7+1
set EZ7[EA7]=1093682756
set EA7=EA7+1
set EZ7[EA7]=1093743191
set EA7=EA7+1
set EZ7[EA7]=1093743681
set EA7=EA7+1
set EZ7[EA7]=1093748292
set EA7=EA7+1
set EZ7[EA7]=1093749071
set EA7=EA7+1
set EZ7[EA7]=1093677655
set EA7=EA7+1
set EZ7[EA7]=1093809721
set EA7=EA7+1
set EZ7[EA7]=1093815111
set EA7=EA7+1
set EZ7[EA7]=1093748304
set EA7=EA7+1
set EZ7[EA7]=1093686329
set EA7=EA7+1
set EZ7[EA7]=1093751096
set EA7=EA7+1
set EZ7[EA7]=1093750095
set EA7=EA7+1
set EZ7[EA7]=1093810244
set EA7=EA7+1
set EZ7[EA7]=1097163124
set EA7=EA7+1
set EZ7[EA7]=1093684016
set EA7=EA7+1
set EZ7[EA7]=1095331948
set EA7=EA7+1
set EZ7[EA7]=1093683796
set EA7=EA7+1
set EZ7[EA7]=1095331954
set EA7=EA7+1
set EZ7[EA7]=1093677656
set EA7=EA7+1
set EZ7[EA7]=1093751349
set EA7=EA7+1
set EZ7[EA7]=1095332727
set EA7=EA7+1
set EZ7[EA7]=1093808182
set EA7=EA7+1
set EZ7[EA7]=1093753416
set EA7=EA7+1
set EZ7[EA7]=1093813569
set EA7=EA7+1
set EZ7[EA7]=1093815092
set EA7=EA7+1
set EZ7[EA7]=1093815095
set EA7=EA7+1
set EZ7[EA7]=1093815089
endfunction
function F38 takes integer id returns boolean
return id==1093808454 or id==1093808455 or id==1093808456 or id==1093751609 or id==1093809217 or id==1093809218 or id==1093678667 or id==1093752391 or id==1093810257 or id==1093752646 or id==1093686328 or id==1093686327 or id==1093808206 or id==1093753394 or id==1093753395 or id==1093808181 or id==1093743681 or id==1093809721 or id==1093815111 or id==1093815881 or id==1093810008 or id==1093810265 or id==1093809221 or id==1093753416 or id==1093752655 or id==1093748305 or id==1093686341 or id==1093814863 or id==1093813848 or id==1093684560 or id==1093815109 or id==1093815112 or id==1093815097 or id==1093814860 or id==1093815857 or id==1093815618 or id==1093677625 or id==1093816121
endfunction
function F68 takes nothing returns nothing
set MB4=MB4+1
set MA4[MB4]=1093683254
set MB4=MB4+1
set MA4[MB4]=1093677362
set MB4=MB4+1
set MA4[MB4]=1093678667
set MB4=MB4+1
set MA4[MB4]=1093683513
set MB4=MB4+1
set MA4[MB4]=1093683265
set MB4=MB4+1
set MA4[MB4]=1093684021
set MB4=MB4+1
set MA4[MB4]=1093685337
set MB4=MB4+1
set MA4[MB4]=1093748303
set MB4=MB4+1
set MA4[MB4]=1093685844
set MB4=MB4+1
set MA4[MB4]=1093686081
set MB4=MB4+1
set MA4[MB4]=1093686327
set MB4=MB4+1
set MA4[MB4]=1093686328
set MB4=MB4+1
set MA4[MB4]=1093743681
set MB4=MB4+1
set MA4[MB4]=1093681733
set MB4=MB4+1
set MA4[MB4]=1093808472
set MB4=MB4+1
set MA4[MB4]=1093808471
set MB4=MB4+1
set MA4[MB4]=1093808470
set MB4=MB4+1
set MA4[MB4]=1097754673
set MB4=MB4+1
set MA4[MB4]=1093750618
set MB4=MB4+1
set MA4[MB4]=1093743428
set MB4=MB4+1
set MA4[MB4]=1093677622
set MB4=MB4+1
set MA4[MB4]=1093751096
endfunction
function FL8 takes nothing returns nothing
set A8[1]=1095331188
set A8[2]=1095328865
set A8[3]=1095660653
set A8[4]=1094935400
set A8[5]=1095333995
set A8[6]=1093681995
set A8[7]=1093677367
set A8[8]=1093681720
set A8[9]=1093683266
set A8[$A]=1093682227
set A8[$B]=1093682246
set A8[$C]=1093677655
set A8[$D]=1095331954
set A8[$E]=1095331948
set A8[$F]=1093682767
set A8[16]=1093683255
set A8[17]=1093683254
set A8[18]=1093677656
set A8[19]=1095332727
set A8[20]=1093682008
set A8[21]=1093681718
set A8[22]=1097163124
set A8[23]=1093679180
set A8[24]=1095328633
set A8[25]=1093678426
set A8[26]=1095328363
set A8[27]=1093682265
set A8[28]=1093684314
set A8[29]=1093685065
set A8[30]=1093684056
set A8[31]=1093684055
set A8[32]=1093677622
set A8[33]=1093681972
set A8[34]=1093677362
set A8[35]=1093678667
set A8[36]=1093677652
set A8[37]=1095263841
set A8[38]=1093679446
set A8[39]=1093678425
set A8[40]=1093683513
set A8[41]=1093683265
set A8[42]=1093684021
set A8[43]=1093685337
set A8[44]=1093685582
set A8[45]=1093685844
set A8[46]=1093685840
set A8[47]=1093743191
set A8[48]=1093686081
set A8[49]=1093686327
set A8[50]=1093686328
set A8[51]=1093743681
set A8[52]=1093681733
set A8[53]=1093808472
set A8[54]=1093808471
set A8[55]=1093808470
set A8[56]=1093684560
set A8[57]=1093743428
set A8[58]=1093683801
set A8[59]=1093743959
set A8[60]=1093748303
set A8[61]=1093748292
set A8[62]=1093750618
set A8[63]=1093750095
set A8[64]=1093749071
set A8[65]=1093751096
set A8[66]=1093751361
set A8[67]=1093751126
set A8[68]=1093752645
set A8[69]=1093752642
set A8[70]=1093815111
set A8[71]=1093815859
set B8=71
endfunction
function F18 takes nothing returns boolean
call FL8()
call F68()
call FC8()
return false
endfunction
function F08 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function F18))
endfunction
function F58 takes nothing returns nothing
call CreateQuestBJ(0,GetObjectName(1496395827),"TRIGSTR_49999","ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp")
call CreateQuestBJ(0,GetObjectName(1496395828),"TRIGSTR_49998","ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp")
call CreateQuestBJ(0,"TRIGSTR_50004","TRIGSTR_50005","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")
call CreateQuestBJ(0,"TRIGSTR_50006","TRIGSTR_50007","ReplaceableTextures\\CommandButtons\\BTNTome.blp")
call CreateQuestBJ(0,"TRIGSTR_50008","TRIGSTR_50009","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(2,"TRIGSTR_50010","TRIGSTR_50011","ReplaceableTextures\\CommandButtons\\BTNScrollOfHaste.blp")
call CreateQuestBJ(2,"TRIGSTR_50012","TRIGSTR_50013","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")
call CreateQuestBJ(2,"TRIGSTR_50014","TRIGSTR_50015","ReplaceableTextures\\CommandButtons\\BTNCarrionScarabs.blp")
endfunction
function F28 takes nothing returns boolean
local string s
if IsUnitIllusion(GetTriggerUnit())==false and FA8(GetUnitTypeId(GetTriggerUnit()))==false then
set s=GetUnitName(GetTriggerUnit())+" "+(GetObjectName((1848657986)))+" "+GetObjectName(GetLearnedSkill())+" ("+(GetObjectName((1848657987)))+" "+I2S(GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill()))+")"
call DisplayTimedTextToPlayer(KW4,0,0,3,s)
call DisplayTimedTextToPlayer(KX4,0,0,3,s)
endif
return false
endfunction
function F_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function F28))
set t=null
endfunction
function G48 takes player p returns nothing
local unit ZO7=G7[GetPlayerId(p)]
local integer i=0
local item M47
set LP4="LockAllItems"
loop
exitwhen i>5
set M47=UnitItemInSlot(ZO7,i)
call SetItemDroppable(M47,false)
set i=i+1
endloop
set ZO7=null
set M47=null
endfunction
function G88 takes nothing returns nothing
call YM7(bj_FORCE_ALL_PLAYERS,25.,(KY4[GetPlayerId((GetTriggerPlayer()))])+"|c00ff0303 "+(GetObjectName((1848652356)))+"|r")
endfunction
function Jf takes nothing returns nothing
local player G98=QC7(GetHandleId(GetExpiredTimer()),"Leaver")
local integer T8=1
local integer Jg
local integer hY=GetPlayerState(G98,PLAYER_STATE_RESOURCE_GOLD)
set LP4="Jf"
if hY>20 then
call SetPlayerState(G98,PLAYER_STATE_RESOURCE_GOLD,0)
set VF4[GetPlayerId(G98)]=0
if WM7(G98)then
set Jg=P8(W7)
else
set Jg=P8(X7)
endif
if WM7(G98)then
loop
exitwhen T8>5
if WR7(Y7[T8])then
call SetPlayerState(Y7[T8],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Y7[T8],PLAYER_STATE_RESOURCE_GOLD)+hY/Jg)
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>5
if WR7(Z7[T8])then
call SetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Z7[T8],PLAYER_STATE_RESOURCE_GOLD)+hY/Jg)
endif
set T8=T8+1
endloop
endif
endif
endfunction
function GD8 takes player G98 returns nothing
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
set LP4="omv"
call QN7(RP7,"Leaver",G98)
call TimerStart(t,2,true,function Jf)
set t=null
endfunction
function GE8 takes player p returns nothing
local multiboarditem GF8=MultiboardGetItem(R4,N94[GetPlayerId(p)],N84[GetPlayerId(p)])
set LP4="oMv"
call MultiboardSetItemValue(GF8,"|c00333333"+YJ7(p)+"|r")
call MultiboardReleaseItem(GF8)
endfunction
function GG8 takes nothing returns nothing
local player p=O94
local string id=I2S(GetPlayerId(p))
set LP4="GG8"
call StoreInteger(IU4,id,"8_0",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(0)))))
call StoreInteger(IU4,id,"8_1",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(1)))))
call StoreInteger(IU4,id,"8_2",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(2)))))
call StoreInteger(IU4,id,"8_3",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(3)))))
call StoreInteger(IU4,id,"8_4",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(4)))))
call StoreInteger(IU4,id,"8_5",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(5)))))
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_0")
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_1")
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_2")
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_3")
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_4")
call SyncStoredInteger(IU4,I2S(GetPlayerId(p)),"8_5")
endif
endfunction
function GH8 takes nothing returns nothing
local integer FT8=P8(W7)
local integer FS8=P8(X7)
local integer T8
local integer U8
local string GI8
local string GJ8
local unit Z47=G7[GetPlayerId(GetTriggerPlayer())]
set LP4="GH8"
if Z47==null then
set GJ8=(GetObjectName((1848657239)))
else
set GJ8=GetUnitName(Z47)
endif
if(B<$A)then
set GI8=I2S(W)+":0"+I2S(B)
else
set GI8=I2S(W)+":"+I2S(B)
endif
if L8==false then
set B9[GetPlayerId(GetTriggerPlayer())]="|c00555555"+GI8+"|r"
call YM7(bj_FORCE_ALL_PLAYERS,25.,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+" ("+GJ8+")|r|c00ff0303 "+(GetObjectName((1848652356)))+"|r")
if(WM7(GetTriggerPlayer()))then
set T8=1
set U8=5
loop
exitwhen T8>U8
if(Y7[T8]!=GetTriggerPlayer())then
if(WR7(Y7[T8]))then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),Y7[T8],4)
endif
endif
set T8=T8+1
endloop
else
set T8=1
set U8=5
loop
exitwhen T8>U8
if(Z7[T8]!=GetTriggerPlayer())then
if(WR7(Z7[T8]))then
call SetPlayerAllianceStateBJ(GetTriggerPlayer(),Z7[T8],4)
endif
endif
set T8=T8+1
endloop
endif
if WM7(GetTriggerPlayer())or WN7(GetTriggerPlayer())then
set M34=M34+1
endif
call E58("C"+"K"+I2S(S7[GetPlayerId(GetTriggerPlayer())])+"D"+I2S(T7[GetPlayerId(GetTriggerPlayer())])+"N"+I2S((LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId(GetTriggerPlayer()))),StringHash("NumOfNeutrals")))),GetPlayerId(GetTriggerPlayer()))
set O94=GetTriggerPlayer()
call ExecuteFunc("GG8")
call G48(GetTriggerPlayer())
set U2[GetPlayerId(GetTriggerPlayer())]=true
call GE8(GetTriggerPlayer())
call GD8(GetTriggerPlayer())
if M34==2 and R8==false and Ny then
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"|c006699CC"+(GetObjectName((1848657495)))+"|r")
endif
if M34==3 then
set O74=true
call ExecuteFunc("GK8")
set O74=false
endif
else
set B9[GetPlayerId(GetTriggerPlayer())]="|c00555555End|r"
call ExecuteFunc("GM8")
endif
set Z47=null
endfunction
function GN8 takes unit ZO7 returns nothing
if GetUnitTypeId(ZO7)!=1211117642 and GetUnitTypeId(ZO7)!=1211117641 then
if GetOwningPlayer(ZO7)==GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1,"|c006699CC"+(GetObjectName((1848657746))))
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1," ")
endif
call CK7(WR,GetOwningPlayer(ZO7))
endif
call SetUnitInvulnerable(ZO7,false)
call UnitRemoveAbility(ZO7,1093681498)
call UnitRemoveAbility(ZO7,1093679434)
call UnitRemoveAbility(ZO7,1093684052)
call UnitRemoveAbility(ZO7,1093684823)
call UnitRemoveAbility(ZO7,1093684821)
call UnitRemoveAbility(ZO7,1093685079)
call UnitRemoveAbility(ZO7,1093685078)
call UnitRemoveAbility(ZO7,1093685080)
call UnitRemoveAbility(ZO7,1093685081)
call UnitRemoveAbility(ZO7,1093685296)
call UnitRemoveAbility(ZO7,1093744459)
call UnitRemoveAbility(ZO7,1093685334)
call UnitRemoveAbility(ZO7,1093685583)
call UnitRemoveAbility(ZO7,1093685827)
call UnitRemoveAbility(ZO7,1093685830)
call UnitRemoveAbility(ZO7,Ly)
call UnitRemoveAbility(ZO7,my)
call UnitRemoveAbility(ZO7,My)
call UnitRemoveAbility(ZO7,py)
call UnitRemoveAbility(ZO7,1093684821)
call UnitRemoveAbility(ZO7,1093684823)
call UnitRemoveAbility(ZO7,1093682777)
call UnitRemoveAbility(ZO7,1093683509)
call UnitRemoveAbility(ZO7,1093681977)
call UnitRemoveAbility(ZO7,1093683528)
call UnitRemoveAbility(ZO7,1110455863)
call UnitRemoveAbility(ZO7,1110456396)
call UnitRemoveAbility(ZO7,1093686098)
call UnitRemoveAbility(ZO7,1093687119)
call UnitRemoveAbility(ZO7,1093687122)
call UnitRemoveAbility(ZO7,1093747534)
call UnitRemoveAbility(ZO7,1093686856)
call UnitRemoveAbility(ZO7,1093686858)
call UnitRemoveAbility(ZO7,1093742649)
call UnitRemoveAbility(ZO7,1093686871)
call UnitRemoveAbility(ZO7,1093687373)
call UnitRemoveAbility(ZO7,1093742927)
call UnitRemoveAbility(ZO7,1093742930)
call UnitRemoveAbility(ZO7,1093743671)
call UnitRemoveAbility(ZO7,1093743672)
call UnitRemoveAbility(ZO7,1093742933)
call UnitRemoveAbility(ZO7,1093743673)
call UnitRemoveAbility(ZO7,1093743153)
call UnitRemoveAbility(ZO7,1093743158)
call UnitRemoveAbility(ZO7,1093744441)
call UnitRemoveAbility(ZO7,1097167980)
call UnitRemoveAbility(ZO7,n1[0])
call UnitRemoveAbility(ZO7,n1[1])
call UnitRemoveAbility(ZO7,n1[2])
call UnitRemoveAbility(ZO7,n1[3])
call UnitRemoveAbility(ZO7,n1[4])
call UnitRemoveAbility(ZO7,n1[5])
call UnitRemoveAbility(ZO7,1093748533)
call UnitRemoveAbility(ZO7,1093748531)
call UnitRemoveAbility(ZO7,1093748534)
call UnitRemoveAbility(ZO7,1093748532)
call QF7(GetHandleId(ZO7),"Grapple",false)
call SetUnitPathing(ZO7,true)
call PauseUnit(ZO7,false)
call SetUnitFlyHeight(ZO7,GetUnitDefaultFlyHeight(ZO7),0)
call SetUnitScale(ZO7,AP7(ZO7)*BS,AP7(ZO7)*BS,AP7(ZO7)*BS)
call UnitRemoveAbility(ZO7,1093747521)
call UnitRemoveAbility(ZO7,1093747513)
call UnitRemoveAbility(ZO7,1093747522)
call UnitRemoveAbility(ZO7,1093747523)
call UnitRemoveAbility(ZO7,1093748545)
call UnitRemoveAbility(ZO7,1093752627)
call UnitRemoveAbility(ZO7,1110459471)
call UnitRemoveAbility(ZO7,1093752136)
call UnitRemoveAbility(ZO7,1093752137)
call UnitRemoveAbility(ZO7,1093753396)
call UnitRemoveAbility(ZO7,1093753409)
call UnitRemoveAbility(ZO7,1093753410)
call UnitRemoveAbility(ZO7,1093753401)
call UnitRemoveAbility(ZO7,1110459478)
call UnitRemoveAbility(ZO7,1093809718)
call UnitRemoveAbility(ZO7,1093809717)
call UnitRemoveAbility(ZO7,1093809228)
call UnitRemoveAbility(ZO7,1110459716)
call UnitRemoveAbility(ZO7,1093808975)
call UnitRemoveAbility(ZO7,1110459705)
call E98(ZO7,0)
if GetUnitTypeId(ZO7)==1160786510 or GetUnitTypeId(ZO7)==1160786511 then
call UnitRemoveAbility(ZO7,1093808951)
call UnitAddAbility(ZO7,1093808706)
call UnitRemoveAbility(ZO7,1093808706)
if PH7(ZO7,SU[GL4])!=null then
call UnitAddAbility(ZO7,1093808951)
endif
endif
call UnitRemoveAbility(ZO7,1093808966)
call L47(ZO7)
set IM4=ZO7
call ExecuteFunc("GO8")
endfunction
function GP8 takes nothing returns boolean
if GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),QZ,ALLIANCE_SHARED_CONTROL) and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
set MZ=MZ+1
endif
return false
endfunction
function GQ8 takes unit u,player p,real x,real y,boolean GR8 returns nothing
local group g=ZI7()
set LP4="ReviveCamera"
set MZ=0
set QZ=p
call GroupEnumUnitsSelected(g,p,Condition(function GP8))
if MZ==0 and GetLocalPlayer()==p then
if GR8==false then
call ClearSelection()
call SelectUnit(u,true)
endif
call PanCameraToTimed(x,y,0)
endif
set MZ=0
call ZH7(g)
set g=null
endfunction
function GS8 takes unit S4 returns boolean
return GetUnitTypeId(S4)==1211117641 or GetUnitTypeId(S4)==1211117642
endfunction
function GT8 takes unit GU8 returns nothing
local integer GV8
set LP4="GiveBloodruneExp"
if PH7(GU8,SU[DH4])!=null and GetUnitTypeId(GU8)!=1211117642 then
set GV8=R2I(GetItemCharges(PH7(GU8,SU[DH4]))*.67)
if GetItemCharges(PH7(GU8,SU[DH4]))==1 then
set GV8=0
endif
call SetItemCharges(PH7(GU8,SU[DH4]),GV8)
call AddHeroXP(GU8,GetHeroXP(OZ4[GetPlayerId(GetOwningPlayer(GU8))]),true)
call RemoveUnit(OZ4[GetPlayerId(GetOwningPlayer(GU8))])
endif
endfunction
function GW8 takes unit u returns nothing
local integer RP7=GetHandleId(GetOwningPlayer(u))
local unit GX8=QA7(RP7,"Kobold0")
local unit GY8=QA7(RP7,"Kobold1")
local unit GZ8=QA7(RP7,"Kobold2")
local unit GA8=QA7(RP7,"Kobold3")
local unit GB8=QA7(RP7,"Kobold4")
local unit GC8
set LP4="RemoveKoboldHero"
set GC8=GX8
if GC8!=null then
call RemoveUnit(GC8)
endif
set GC8=GY8
if GC8!=null then
call RemoveUnit(GC8)
endif
set GC8=GZ8
if GC8!=null then
call RemoveUnit(GC8)
endif
set GC8=GA8
if GC8!=null then
call RemoveUnit(GC8)
endif
set GC8=GB8
if GC8!=null then
call RemoveUnit(GC8)
endif
set GC8=null
set GB8=null
set GA8=null
set GZ8=null
set GY8=null
set GX8=null
endfunction
function G38 takes nothing returns boolean
call RN7(GetTriggeringTrigger())
set OA4=false
return false
endfunction
function G68 takes unit GL8 returns nothing
local integer RP7=GetHandleId(GetOwningPlayer(GL8))
local unit GX8=QA7(RP7,"Kobold0")
local unit GY8=QA7(RP7,"Kobold1")
local unit GZ8=QA7(RP7,"Kobold2")
local unit GA8=QA7(RP7,"Kobold3")
local unit GB8=QA7(RP7,"Kobold4")
local unit GC8
local real x=GetUnitX(GX8)
local real y=GetUnitY(GX8)
local trigger t
set LP4="HeroRevive_Kobold"
if OA4==false then
if WM7(GetOwningPlayer(GX8))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
else
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function G38))
endif
set GC8=GX8
if GC8!=null and GL8!=GC8 then
call ReviveHero(GC8,x,y,false)
call SetUnitX(GC8,x)
call SetUnitY(GC8,y)
call GN8(GC8)
call SetUnitPathing(GC8,true)
call SetUnitState(GC8,UNIT_STATE_MANA,$2710)
endif
set GC8=GY8
if GC8!=null and GL8!=GC8 then
call ReviveHero(GC8,x,y,false)
call SetUnitX(GC8,x)
call SetUnitY(GC8,y)
call GN8(GC8)
call SetUnitPathing(GC8,true)
call SetUnitState(GC8,UNIT_STATE_MANA,$2710)
endif
set GC8=GZ8
if GC8!=null and GL8!=GC8 then
call ReviveHero(GC8,x,y,false)
call SetUnitX(GC8,x)
call SetUnitY(GC8,y)
call GN8(GC8)
call SetUnitPathing(GC8,true)
call SetUnitState(GC8,UNIT_STATE_MANA,$2710)
endif
set GC8=GA8
if GC8!=null and GL8!=GC8 then
call ReviveHero(GC8,x,y,false)
call SetUnitX(GC8,x)
call SetUnitY(GC8,y)
call GN8(GC8)
call SetUnitPathing(GC8,true)
call SetUnitState(GC8,UNIT_STATE_MANA,$2710)
endif
set GC8=GB8
if GC8!=null and GL8!=GC8 then
call ReviveHero(GC8,x,y,false)
call SetUnitX(GC8,x)
call SetUnitY(GC8,y)
call GN8(GC8)
call SetUnitPathing(GC8,true)
call SetUnitState(GC8,UNIT_STATE_MANA,$2710)
endif
set t=null
set GC8=null
set GA8=null
set GZ8=null
set GY8=null
set GX8=null
endfunction
function G18 takes unit Z47 returns nothing
local integer G08=GetUnitPointValue(Z47)
local unit G58
set LP4="InitializeHero"
if(G08==34)then
call ExecuteFunc("G28")
call ExecuteFunc("G_8")
call ExecuteFunc("H48")
elseif(G08==37)then
call ExecuteFunc("H78")
call ExecuteFunc("H88")
call ExecuteFunc("H98")
call ExecuteFunc("HD8")
elseif(G08==38)then
call ExecuteFunc("HE8")
call ExecuteFunc("HF8")
call ExecuteFunc("HG8")
call ExecuteFunc("HH8")
elseif(G08==32)then
call ExecuteFunc("HI8")
call ExecuteFunc("HJ8")
call ExecuteFunc("HK8")
elseif(G08==52)then
call ExecuteFunc("HM8")
call ExecuteFunc("HN8")
call ExecuteFunc("HO8")
call ExecuteFunc("HP8")
elseif(G08==31)then
call ExecuteFunc("HQ8")
call ExecuteFunc("HR8")
call ExecuteFunc("HS8")
elseif(G08==24)then
call ExecuteFunc("HT8")
call ExecuteFunc("HU8")
call ExecuteFunc("HV8")
call ExecuteFunc("HW8")
elseif(G08==5)then
call ExecuteFunc("HX8")
call ExecuteFunc("HY8")
call ExecuteFunc("HZ8")
elseif(G08==8)then
call ExecuteFunc("HA8")
call ExecuteFunc("HB8")
call ExecuteFunc("HC8")
call ExecuteFunc("H38")
call ExecuteFunc("H68")
elseif(G08==3)then
call ExecuteFunc("HL8")
call ExecuteFunc("H18")
call ExecuteFunc("H08")
call ExecuteFunc("H58")
elseif(G08==95)then
call ExecuteFunc("H28")
call ExecuteFunc("H_8")
call ExecuteFunc("I48")
call ExecuteFunc("I78")
call ExecuteFunc("I88")
elseif(G08==20)then
call ExecuteFunc("I98")
call ExecuteFunc("ID8")
call ExecuteFunc("po")
call ExecuteFunc("IE8")
elseif(G08==$C)then
call ExecuteFunc("IF8")
call ExecuteFunc("IG8")
call ExecuteFunc("IH8")
elseif(G08==16)then
call ExecuteFunc("II8")
call ExecuteFunc("IJ8")
call ExecuteFunc("IK8")
call ExecuteFunc("IM8")
call ExecuteFunc("IN8")
elseif(G08==25)then
call ExecuteFunc("IO8")
call ExecuteFunc("IP8")
elseif(G08==4)then
call ExecuteFunc("IQ8")
call ExecuteFunc("IR8")
call ExecuteFunc("pZ")
call ExecuteFunc("IS8")
call ExecuteFunc("IT8")
call ExecuteFunc("IU8")
call SetUnitPathing(Z47,false)
set O44=true
set G58=CreateUnit(GetOwningPlayer(Z47),GetUnitTypeId(Z47),GetUnitX(Z47),GetUnitY(Z47),GetUnitFacing(Z47))
call QF7(GetHandleId(G58),"EnteredAlready",true)
set G7[GetPlayerId(GetOwningPlayer(Z47))]=G58
call SetUnitPathing(G58,false)
call SetUnitPosition(G58,GetUnitX(Z47),GetUnitY(Z47))
if L then
call SetHeroXP(G58,GetHeroXP(Z47),false)
call UnitAddItem(G58,UnitItemInSlot(Z47,0))
call UnitAddItem(G58,UnitItemInSlot(Z47,1))
call UnitAddItem(G58,UnitItemInSlot(Z47,2))
call UnitAddItem(G58,UnitItemInSlot(Z47,3))
call UnitAddItem(G58,UnitItemInSlot(Z47,4))
call UnitAddItem(G58,UnitItemInSlot(Z47,5))
endif
call A57(Z47)
call SetUnitPathing(G58,true)
call ClearSelectionForPlayer(GetOwningPlayer(G58))
call SelectUnitAddForPlayer(G58,GetOwningPlayer(G58))
elseif(G08==7)then
call ExecuteFunc("IV8")
call ExecuteFunc("IW8")
call ExecuteFunc("IX8")
elseif(G08==18)then
call ExecuteFunc("IY8")
call ExecuteFunc("IZ8")
elseif(G08==36)then
call ExecuteFunc("PN")
elseif(G08==21)then
call ExecuteFunc("Po")
call ExecuteFunc("PO")
call ExecuteFunc("IA8")
call ExecuteFunc("IB8")
elseif(G08==$E)then
call ExecuteFunc("IC8")
call ExecuteFunc("I38")
call ExecuteFunc("I68")
call ExecuteFunc("IL8")
call ExecuteFunc("Pr")
call ExecuteFunc("I18")
elseif(G08==$D)then
call ExecuteFunc("I08")
call ExecuteFunc("I58")
call ExecuteFunc("I28")
call ExecuteFunc("I_8")
elseif(G08==26)then
call ExecuteFunc("J48")
call ExecuteFunc("Pv")
call ExecuteFunc("PV")
call ExecuteFunc("J78")
elseif(G08==9)then
call ExecuteFunc("Pw")
call ExecuteFunc("J88")
call ExecuteFunc("J98")
call ExecuteFunc("JD8")
elseif(G08==$A)then
call ExecuteFunc("JE8")
call ExecuteFunc("JF8")
call ExecuteFunc("JG8")
call ExecuteFunc("JH8")
call ExecuteFunc("JI8")
call ExecuteFunc("qb")
call ExecuteFunc("qB")
call ExecuteFunc("qc")
elseif(G08==23)then
call ExecuteFunc("qC")
call ExecuteFunc("qD")
call ExecuteFunc("qe")
call ExecuteFunc("qg")
elseif(G08==19)then
call ExecuteFunc("JJ8")
call ExecuteFunc("JK8")
call ExecuteFunc("JM8")
elseif(G08==22)then
call ExecuteFunc("JN8")
call ExecuteFunc("JO8")
call ExecuteFunc("JP8")
call ExecuteFunc("JQ8")
elseif(G08==17)then
call ExecuteFunc("JR8")
call ExecuteFunc("JS8")
elseif(G08==1)then
call ExecuteFunc("JT8")
call ExecuteFunc("JU8")
call ExecuteFunc("JV8")
elseif(G08==2)then
call ExecuteFunc("JW8")
call ExecuteFunc("JX8")
call ExecuteFunc("JY8")
call ExecuteFunc("JZ8")
elseif(G08==27)then
call ExecuteFunc("JA8")
call ExecuteFunc("JB8")
call ExecuteFunc("JC8")
call ExecuteFunc("J38")
call ExecuteFunc("J68")
elseif(G08==82)then
call ExecuteFunc("JL8")
call ExecuteFunc("J18")
call ExecuteFunc("J08")
call ExecuteFunc("J58")
elseif(G08==75)then
call ExecuteFunc("J28")
call ExecuteFunc("J_8")
call ExecuteFunc("K48")
call ExecuteFunc("K78")
elseif(G08==83)then
call ExecuteFunc("K88")
call ExecuteFunc("K98")
call ExecuteFunc("KD8")
call ExecuteFunc("KE8")
elseif(G08==59)then
call ExecuteFunc("KF8")
call ExecuteFunc("KG8")
call ExecuteFunc("KH8")
call ExecuteFunc("KI8")
elseif(G08==108)then
call ExecuteFunc("KJ8")
call ExecuteFunc("KK8")
elseif(G08==69)then
call ExecuteFunc("KM8")
call ExecuteFunc("KN8")
call ExecuteFunc("KO8")
call ExecuteFunc("KP8")
call ExecuteFunc("KQ8")
elseif(G08==100)then
call ExecuteFunc("KR8")
call ExecuteFunc("KS8")
call ExecuteFunc("KT8")
elseif(G08==102)then
call ExecuteFunc("KU8")
elseif(G08==64)then
call ExecuteFunc("KV8")
call ExecuteFunc("KW8")
call ExecuteFunc("KX8")
elseif(G08==106)then
call ExecuteFunc("KY8")
call ExecuteFunc("KZ8")
call ExecuteFunc("KA8")
elseif(G08==61)then
call ExecuteFunc("KB8")
call ExecuteFunc("KC8")
call ExecuteFunc("K38")
elseif(G08==76)then
call ExecuteFunc("K68")
call ExecuteFunc("KL8")
call ExecuteFunc("K18")
call ExecuteFunc("K08")
elseif(G08==80)then
call ExecuteFunc("K58")
call ExecuteFunc("K28")
call ExecuteFunc("K_8")
call ExecuteFunc("M48")
call ExecuteFunc("RM")
elseif(G08==62)then
call ExecuteFunc("M78")
call ExecuteFunc("M88")
call ExecuteFunc("M98")
elseif(G08==60)then
call ExecuteFunc("MD8")
call ExecuteFunc("ME8")
call ExecuteFunc("MF8")
elseif(G08==77)then
call ExecuteFunc("MG8")
call ExecuteFunc("MH8")
call ExecuteFunc("MI8")
call ExecuteFunc("MJ8")
call ExecuteFunc("MK8")
elseif(G08==73)then
call ExecuteFunc("MM8")
elseif(G08==81)then
call ExecuteFunc("MN8")
call ExecuteFunc("MO8")
call ExecuteFunc("sa")
call ExecuteFunc("sB")
elseif(G08==66)then
call ExecuteFunc("MP8")
elseif(G08==78)then
call ExecuteFunc("MQ8")
call ExecuteFunc("MR8")
call ExecuteFunc("MS8")
call ExecuteFunc("MT8")
elseif(G08==99)then
call ExecuteFunc("MU8")
call ExecuteFunc("MV8")
call ExecuteFunc("MW8")
call ExecuteFunc("MX8")
call ExecuteFunc("MY8")
call ExecuteFunc("MZ8")
elseif(G08==74)then
call ExecuteFunc("MA8")
call ExecuteFunc("MB8")
call ExecuteFunc("MC8")
call ExecuteFunc("M38")
elseif(G08==105)then
call ExecuteFunc("M68")
call ExecuteFunc("ML8")
elseif(G08==70)then
call ExecuteFunc("M18")
call ExecuteFunc("M08")
call ExecuteFunc("M58")
elseif(G08==107)then
call ExecuteFunc("M28")
call ExecuteFunc("M_8")
call ExecuteFunc("N48")
call ExecuteFunc("N78")
elseif(G08==79)then
call ExecuteFunc("N88")
call ExecuteFunc("N98")
call ExecuteFunc("ND8")
call ExecuteFunc("NE8")
elseif(G08==68)then
call ExecuteFunc("NF8")
call ExecuteFunc("NG8")
elseif(G08==84)then
call ExecuteFunc("NH8")
call ExecuteFunc("NI8")
call ExecuteFunc("s7")
call ExecuteFunc("NJ8")
elseif(G08==85)then
call ExecuteFunc("NK8")
call ExecuteFunc("NM8")
call ExecuteFunc("NN8")
call ExecuteFunc("NO8")
call ExecuteFunc("NP8")
elseif(G08==86)then
call ExecuteFunc("NQ8")
call ExecuteFunc("NR8")
call ExecuteFunc("NS8")
call ExecuteFunc("NT8")
elseif(G08==87)then
call ExecuteFunc("NU8")
call ExecuteFunc("NV8")
call ExecuteFunc("NW8")
call ExecuteFunc("NX8")
elseif(G08==33)then
call ExecuteFunc("NY8")
call ExecuteFunc("NZ8")
call ExecuteFunc("NA8")
elseif(G08==39)then
call ExecuteFunc("NB8")
call ExecuteFunc("NC8")
call ExecuteFunc("N38")
elseif(G08==88)then
call ExecuteFunc("N68")
call ExecuteFunc("NL8")
call ExecuteFunc("N18")
call ExecuteFunc("N08")
elseif(G08==40)then
call ExecuteFunc("N58")
call ExecuteFunc("N28")
call ExecuteFunc("N_8")
call ExecuteFunc("O48")
elseif G08==89 then
call ExecuteFunc("O78")
call ExecuteFunc("O88")
elseif G08==90 then
call ExecuteFunc("O98")
call ExecuteFunc("OD8")
call ExecuteFunc("OE8")
call ExecuteFunc("OF8")
elseif G08==71 then
call ExecuteFunc("OG8")
call ExecuteFunc("OH8")
call ExecuteFunc("OI8")
call ExecuteFunc("OJ8")
elseif G08==93 then
call ExecuteFunc("OK8")
call ExecuteFunc("OM8")
call ExecuteFunc("ON8")
call ExecuteFunc("OO8")
elseif G08==42 then
call ExecuteFunc("OP8")
call ExecuteFunc("OQ8")
call ExecuteFunc("OR8")
call ExecuteFunc("OS8")
elseif G08==91 then
call ExecuteFunc("OT8")
call ExecuteFunc("OU8")
call ExecuteFunc("OV8")
call ExecuteFunc("OW8")
call ExecuteFunc("OX8")
call ExecuteFunc("OY8")
call ExecuteFunc("OZ8")
call ExecuteFunc("OA8")
elseif G08==92 then
call ExecuteFunc("OB8")
call ExecuteFunc("OC8")
call ExecuteFunc("O38")
call ExecuteFunc("O68")
elseif G08==41 then
call ExecuteFunc("OL8")
call ExecuteFunc("O18")
call ExecuteFunc("O08")
call ExecuteFunc("O58")
call ExecuteFunc("O28")
elseif G08==43 then
call ExecuteFunc("O_8")
call ExecuteFunc("P48")
call ExecuteFunc("P78")
call ExecuteFunc("P88")
call ExecuteFunc("P98")
call ExecuteFunc("PD8")
elseif G08==44 then
call ExecuteFunc("PE8")
call ExecuteFunc("PF8")
call ExecuteFunc("PG8")
call ExecuteFunc("PH8")
elseif G08==72 then
call ExecuteFunc("PI8")
call ExecuteFunc("PJ8")
call ExecuteFunc("PK8")
call ExecuteFunc("PM8")
elseif G08==94 then
call ExecuteFunc("PN8")
elseif G08==6 then
call ExecuteFunc("PO8")
call ExecuteFunc("PP8")
call ExecuteFunc("PQ8")
elseif G08==104 then
call ExecuteFunc("PR8")
call ExecuteFunc("PS8")
elseif G08==65 then
call ExecuteFunc("PT8")
call ExecuteFunc("PU8")
call ExecuteFunc("PV8")
call ExecuteFunc("PW8")
elseif G08==45 then
call ExecuteFunc("PX8")
call ExecuteFunc("PY8")
call ExecuteFunc("PZ8")
call ExecuteFunc("PA8")
elseif G08==58 then
call ExecuteFunc("PB8")
call ExecuteFunc("PC8")
call ExecuteFunc("P38")
elseif G08==63 then
call ExecuteFunc("P68")
call ExecuteFunc("PL8")
elseif G08==46 then
call ExecuteFunc("P18")
call ExecuteFunc("P08")
call ExecuteFunc("P58")
call ExecuteFunc("P28")
elseif G08==47 then
call ExecuteFunc("P_8")
call ExecuteFunc("Q48")
call ExecuteFunc("Q78")
call ExecuteFunc("Q88")
elseif G08==$B then
call ExecuteFunc("Q98")
call ExecuteFunc("QD8")
elseif G08==96 then
call ExecuteFunc("QF8")
call ExecuteFunc("QG8")
call ExecuteFunc("QH8")
call ExecuteFunc("QI8")
elseif G08==$F then
call ExecuteFunc("QJ8")
call ExecuteFunc("QK8")
call ExecuteFunc("QM8")
call ExecuteFunc("QN8")
elseif G08==97 then
call ExecuteFunc("QO8")
call ExecuteFunc("QP8")
call ExecuteFunc("QQ8")
call ExecuteFunc("QR8")
call ExecuteFunc("QS8")
elseif G08==98 then
call ExecuteFunc("QT8")
call ExecuteFunc("QU8")
call ExecuteFunc("QV8")
call ExecuteFunc("QW8")
call ExecuteFunc("QX8")
elseif G08==67 then
call ExecuteFunc("QY8")
elseif G08==28 then
call ExecuteFunc("QZ8")
elseif G08==51 then
call ExecuteFunc("QA8")
call ExecuteFunc("QB8")
call ExecuteFunc("QC8")
call ExecuteFunc("Q38")
call ExecuteFunc("Q68")
call ExecuteFunc("QL8")
call ExecuteFunc("Q18")
elseif G08==100 then
elseif G08==101 then
call ExecuteFunc("Q08")
call ExecuteFunc("Q58")
call ExecuteFunc("Q28")
call ExecuteFunc("Q_8")
elseif G08==48 then
call ExecuteFunc("R48")
call ExecuteFunc("R78")
call ExecuteFunc("R88")
call ExecuteFunc("R98")
elseif G08==49 then
call ExecuteFunc("RD8")
call ExecuteFunc("RE8")
call ExecuteFunc("RF8")
call ExecuteFunc("RG8")
elseif G08==29 then
call ExecuteFunc("RH8")
call ExecuteFunc("RI8")
call ExecuteFunc("RJ8")
call ExecuteFunc("RK8")
elseif G08==50 then
call ExecuteFunc("RM8")
call ExecuteFunc("RN8")
call ExecuteFunc("RO8")
call ExecuteFunc("RP8")
elseif G08==30 then
call ExecuteFunc("RQ8")
call ExecuteFunc("RR8")
elseif G08==53 then
call ExecuteFunc("RS8")
call ExecuteFunc("RT8")
call ExecuteFunc("RU8")
call ExecuteFunc("RV8")
elseif G08==103 then
call ExecuteFunc("RW8")
elseif G08==54 then
call ExecuteFunc("RX8")
call ExecuteFunc("RY8")
call ExecuteFunc("RZ8")
call ExecuteFunc("RA8")
call ExecuteFunc("RB8")
elseif G08==55 then
call ExecuteFunc("RC8")
call ExecuteFunc("R38")
call ExecuteFunc("R68")
call ExecuteFunc("RL8")
elseif G08==56 then
call ExecuteFunc("R18")
call ExecuteFunc("R08")
call ExecuteFunc("R58")
call ExecuteFunc("R28")
elseif G08==57 then
call ExecuteFunc("R_8")
call ExecuteFunc("S48")
call ExecuteFunc("S78")
call ExecuteFunc("S88")
elseif G08==109 then
call ExecuteFunc("S98")
call ExecuteFunc("SD8")
call ExecuteFunc("SE8")
call ExecuteFunc("SF8")
call ExecuteFunc("SG8")
call ExecuteFunc("SH8")
elseif G08==110 then
call ExecuteFunc("SI8")
call ExecuteFunc("SJ8")
call ExecuteFunc("SK8")
call ExecuteFunc("SM8")
call ExecuteFunc("SN8")
elseif G08==35 then
call ExecuteFunc("SO8")
call ExecuteFunc("SP8")
endif
call AX7("SQ8",false)
set G58=null
endfunction
function SR8 takes unit Z47 returns nothing
local integer G08=GetUnitPointValue(Z47)
set LP4="Fun_RegisterHeroSkills"
if G08==500 then
call ExecuteFunc("SS8")
call ExecuteFunc("ST8")
call ExecuteFunc("SU8")
elseif G08==600 then
call ExecuteFunc("SV8")
call ExecuteFunc("SW8")
call ExecuteFunc("SX8")
call ExecuteFunc("SY8")
call ExecuteFunc("SZ8")
endif
endfunction
function SA8 takes player JI7,string SB8 returns nothing
if IsPlayerInForce(GetLocalPlayer(),GetPlayersEnemies(JI7))then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,D9,40,P[GetPlayerId(JI7)]+(KY4[GetPlayerId((JI7))])+"|r "+SB8)
endif
endfunction
function SC8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
set ML4=true
call RN7(t)
call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_MASKED,O24,O_4,700,false,false))
call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_MASKED,O24,O_4,700,false,false))
set t=null
return false
endfunction
function S38 takes unit u returns boolean
return GetUnitTypeId(u)!=1211117645 and GetUnitTypeId(u)!=1311788365 and GetUnitTypeId(u)!=1211119431 and GetUnitTypeId(u)!=1211117657 and GetUnitTypeId(u)!=1211117642 and GetUnitTypeId(u)!=1211122232
endfunction
function S68 takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and R87(GetHandleId(GetTriggerUnit()),"EnteredAlready")==false and S38(GetTriggerUnit()))!=null
endfunction
function SL8 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1848651843
endfunction
function S18 takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function S08 takes player j8 returns nothing
local group FP8=ZI7()
local boolexpr hP=Condition(function SL8)
call GroupEnumUnitsOfPlayer(FP8,j8,hP)
call ForGroup(FP8,function S18)
call DestroyBoolExpr(hP)
call ZH7(FP8)
set hP=null
set FP8=null
endfunction
function S58 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1852010352
endfunction
function S28 takes nothing returns nothing
if UT then
call UnitRemoveAbility(KT4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743686)
call UnitRemoveAbility(KT4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743685)
call UnitRemoveAbility(KT4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))],1093743688)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093683508)==0 then
call UnitAddAbility(GetEnumUnit(),1093683508)
endif
endfunction
function S_8 takes player p returns nothing
local group g=ZI7()
set LP4="InitialiseBaseCoP"
call GroupEnumUnitsOfPlayer(g,p,Condition(function S58))
call ForGroup(g,function S28)
call ZH7(g)
set g=null
endfunction
function u6 takes player Ua returns player
local integer O5=1
local integer Uc=0
local boolean O6=false
set LP4="u6"
loop
if((Uc>0)and(P57(O5,O6)!=null)and(IsPlayerInForce(P57(O5,O6),QW4)))then
return P57(O5,O6)
endif
if(Y7[O5]==Ua)then
set O6=true
set Uc=O5
elseif(Z7[O5]==Ua)then
set Uc=O5
endif
set O5=O5+1
exitwhen O5>5
endloop
return null
endfunction
function T48 takes unit Z47,player p returns string
local string s=(GetObjectName((1848656962)))
set LP4="DisplayPlayerRandomed"
set s=F78(s,"$hero",GetUnitName(Z47))
set s=F78(s,"$p",(KY4[GetPlayerId((p))]))
return s
endfunction
function T78 takes unit T88 returns nothing
local item T98=UnitItemInSlot(T88,0)
local item TD8=UnitItemInSlot(T88,1)
local item TE8=UnitItemInSlot(T88,2)
local item TF8=UnitItemInSlot(T88,3)
local item TG8=UnitItemInSlot(T88,4)
local item TH8=UnitItemInSlot(T88,5)
local integer TI8=OM7(T98)
local integer TJ8=OM7(TD8)
local integer TK8=OM7(TE8)
local integer TM8=OM7(TF8)
local integer TN8=OM7(TG8)
local integer TO8=OM7(TH8)
local integer TP8=0
set LP4="AIDeathmatchItemReset"
call DisableTrigger(H84)
call UnitRemoveItem(T88,T98)
call UnitRemoveItem(T88,TD8)
call UnitRemoveItem(T88,TE8)
call UnitRemoveItem(T88,TF8)
call UnitRemoveItem(T88,TG8)
call UnitRemoveItem(T88,TH8)
call RemoveItem(T98)
call RemoveItem(TD8)
call RemoveItem(TE8)
call RemoveItem(TF8)
call RemoveItem(TG8)
call RemoveItem(TH8)
call EnableTrigger(H84)
if TI8>-1 then
set TP8=TP8+HJ4[TI8]
endif
if TJ8>-1 then
set TP8=TP8+HJ4[TJ8]
endif
if TK8>-1 then
set TP8=TP8+HJ4[TK8]
endif
if TM8>-1 then
set TP8=TP8+HJ4[TM8]
endif
if TN8>-1 then
set TP8=TP8+HJ4[TN8]
endif
if TO8>-1 then
set TP8=TP8+HJ4[TO8]
endif
call SetPlayerState(GetOwningPlayer(T88),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(T88),PLAYER_STATE_RESOURCE_GOLD)+TP8)
set dH[GetPlayerId(GetOwningPlayer(T88))]=0
set TH8=null
set TG8=null
set TF8=null
set TE8=null
set TD8=null
set T98=null
endfunction
function TQ8 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local player j8=GetOwningPlayer(Z47)
local real x
local real y
local region r=CreateRegion()
local player TR8=j8
local item TS8
local trigger t
local player p
local string s
set LP4="TQ8"
if((QZ4!=null)and(IsTriggerEnabled(QZ4)))then
if((GetOwningPlayer(GetTriggerUnit())==QS4)and(QU4!=null))then
call SetUnitOwner(GetTriggerUnit(),QU4,true)
call SetUnitOwner(h4[512+GetPlayerId(QS4)],QS4,false)
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
if(not oo[GetPlayerId(QU4)])then
call AdjustPlayerStateBJ($FA,QS4,PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(-$FA,QU4,PLAYER_STATE_RESOURCE_GOLD)
endif
call ExecuteFunc("UD")
set QU4=u6(QU4)
if(QU4!=null)then
if(not O4)then
call SetUnitOwner(h4[512+GetPlayerId(QS4)],QU4,false)
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QS4,false)
endif
set s="Pick a hero for "+P[GetPlayerId(QU4)]+GetPlayerName(QU4)+"|r. Type "+"|c00dd8dff"+"-px|r to cancel."
set p=QS4
else
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set s="End of Picking"
set p=QS4
if not O4 then
call XM7(QS4)
endif
endif
elseif((GetOwningPlayer(GetTriggerUnit())==QT4)and(QV4!=null))then
call SetUnitOwner(GetTriggerUnit(),QV4,true)
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
if(not oo[GetPlayerId(QV4)])then
call AdjustPlayerStateBJ($FA,QT4,PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(-$FA,QV4,PLAYER_STATE_RESOURCE_GOLD)
endif
call ExecuteFunc("UD")
set QV4=u6(QV4)
if(QV4!=null)then
if(not O4)then
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QV4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QT4,false)
endif
set s="Pick a hero for "+P[GetPlayerId(QV4)]+GetPlayerName(QV4)+"|r. Type "+"|c00dd8dff"+"-px|r to cancel."
set p=QT4
else
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set s="End of Picking"
set p=QT4
if not O4 then
call XM7(QT4)
endif
endif
endif
endif
set j8=GetOwningPlayer(Z47)
set TR8=j8
if L==false then
call ES8(GetOwningPlayer(Z47))
endif
if(GetObjectName((1848657992)))=="Language: English" and(MI4[(GetUnitPointValue(Z47))]!="")then
call DisplayTimedTextToPlayer(j8,0,0,4,"A |c006699CC-tips|r command is available if you would like some pointers for this hero")
endif
if QT[GetPlayerId(j8)] then
call EF8(j8,GetUnitPointValue(Z47))
endif
if ML4==false and(G7[GetPlayerId(Y7[1])]!=null and G7[GetPlayerId(Y7[2])]!=null and G7[GetPlayerId(Y7[3])]!=null and G7[GetPlayerId(Y7[4])]!=null and G7[GetPlayerId(Y7[5])]!=null and G7[GetPlayerId(Z7[1])]!=null and G7[GetPlayerId(Z7[2])]!=null and G7[GetPlayerId(Z7[3])]!=null and G7[GetPlayerId(Z7[4])]!=null and G7[GetPlayerId(Z7[5])]!=null)then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,7.,false)
call TriggerAddCondition(t,Condition(function SC8))
set t=null
endif
set IF4[GetPlayerId(GetOwningPlayer((Z47)))]=false
call RegionAddRect(r,cE)
if G9 and P9==false then
set eo[GetPlayerId(j8)]=true
set j8=QC7(StringHash("Global|ReverseMode"),(KY4[GetPlayerId((j8))]))
call SetUnitOwner(Z47,j8,true)
if(GetPlayerController(j8)==MAP_CONTROL_COMPUTER)and not L and not RY4 then
call QG7(Q_4,"AIHSwap|U",Z47)
call ExecuteFunc("Uf")
endif
endif
if WM7(GetOwningPlayer(Z47))then
if IsUnitInRegion(r,Z47)then
set x=GetRandomReal(GetRectMinX(L9),GetRectMaxX(L9))
set y=GetRandomReal(GetRectMinY(L9),GetRectMaxY(L9))
else
set x=GetUnitX(Z47)
set y=GetUnitY(Z47)
endif
else
if IsUnitInRegion(r,Z47)then
set x=GetRandomReal(GetRectMinX(C9),GetRectMaxX(C9))
set y=GetRandomReal(GetRectMinY(C9),GetRectMaxY(C9))
else
set x=GetUnitX(Z47)
set y=GetUnitY(Z47)
endif
endif
set O9[GetPlayerId(j8)]=true
if(not G9 or P9)then
if O14==false and O04==false then
call PanCameraToTimedForPlayer(j8,x,y,0)
endif
if GetUnitTypeId(Z47)!=1311788365 then
call ClearSelectionForPlayer(j8)
endif
call SelectUnitAddForPlayer(Z47,j8)
endif
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
if GetUnitTypeId(Z47)!=1311788365 then
set G7[GetPlayerId(j8)]=Z47
endif
call EL8(j8,"9",GetUnitTypeId(Z47))
if G9 and P9==false then
call XI7(TR8)
else
call XI7(j8)
endif
call QF7(GetHandleId(Z47),"EnteredAlready",true)
if not W8 and not RY4 then
set G[GetUnitPointValue(Z47)]=true
call XH7(GetUnitTypeId(Z47))
endif
if L then
if WM7(j8)then
set P7[0]=P7[0]+1
else
set P7[1]=P7[1]+1
endif
endif
if L or RY4 then
set Be[GetPlayerId(j8)]=Be[GetPlayerId(j8)]+1
if Be[GetPlayerId(GetOwningPlayer(Z47))]>1 and Z47!=U7[GetPlayerId(GetOwningPlayer(Z47))]then
call GT8(U7[GetPlayerId(GetOwningPlayer(Z47))])
call SetHeroXP(Z47,GetHeroXP(U7[GetPlayerId(GetOwningPlayer(Z47))]),false)
if GetPlayerController(GetOwningPlayer(Z47))==MAP_CONTROL_USER then
call DisableTrigger(H84)
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],0))
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],1))
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],2))
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],3))
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],4))
call UnitAddItem(Z47,UnitItemInSlot(U7[GetPlayerId(GetOwningPlayer(Z47))],5))
call EnableTrigger(H84)
else
call T78(U7[GetPlayerId(GetOwningPlayer(Z47))])
endif
if GS8(U7[GetPlayerId(GetOwningPlayer(Z47))])then
call GW8(U7[GetPlayerId(GetOwningPlayer(Z47))])
else
call A57(U7[GetPlayerId(GetOwningPlayer(Z47))])
endif
endif
endif
if j8!=Y7[0]and j8!=Z7[0]then
if G9 then
if TimerGetElapsed(V)>60 then
call SA8(j8,(GetObjectName((1848652357)))+" "+GetUnitName(Z47))
elseif V4[GetPlayerId(TR8)] then
call SA8(j8,T48(Z47,TR8))
else
call SetPlayerState(TR8,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(TR8,PLAYER_STATE_RESOURCE_GOLD)+$FA)
call SA8(j8,(GetObjectName((1848656945)))+" "+GetUnitName(Z47)+" "+(GetObjectName((1848656944)))+" "+(KY4[GetPlayerId((TR8))]))
endif
elseif HC4==false or j8==Le then
if(I[GetPlayerId(GetOwningPlayer(Z47))] and HC4==false)then
call SA8(j8,(GetObjectName((1848656949)))+" "+GetUnitName(Z47)+".")
elseif((V4[GetPlayerId(j8)] and L==false)or D4 or E4 or Z8 or RY4)then
call SA8(j8,(GetObjectName((1848656947)))+" "+GetUnitName(Z47)+".")
else
call SA8(j8,(GetObjectName((1848656946)))+" "+GetUnitName(Z47)+".")
endif
endif
endif
if H74 then
if G9 then
call S08(TR8)
else
call S08(j8)
endif
endif
if(O14 or O04)and H74 then
call S08(j8)
endif
call S_8(j8)
if(GetUnitTypeId(Z47)==1160785973)then
call DisplayTimedTextToPlayer(j8,0,D9,60.," ")
call DisplayTimedTextToPlayer(j8,0,D9,60.,"|c00ff0303"+(GetObjectName((1848653384)))+(GetObjectName((1848656706)))+" "+(GetObjectName((1848653381)))+"|r")
elseif GetUnitTypeId(Z47)==1328558154 or GetUnitTypeId(Z47)==1311781174 or GetUnitTypeId(Z47)==1430468913 or GetUnitTypeId(Z47)==1162032181 then
call DisplayTimedTextToPlayer(j8,0,D9,10.," ")
call DisplayTimedTextToPlayer(j8,0,D9,10.,"|c00ff0303"+(GetObjectName((1848657715)))+"|r")
endif
if(GetUnitTypeId(Z47)==1160786242)then
call DisplayTimedTextToPlayer(j8,0,D9,30.," ")
call DisplayTimedTextToPlayer(j8,0,D9,30.,"|c00ff0303"+(GetObjectName((1848653392)))+" "+(GetObjectName((1848653397)))+"|r")
endif
if(V4[GetPlayerId(j8)]==false)then
if(X8)then
call SetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD,$AF+GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
endif
endif
if R87(StringHash("HeroInit:"+I2S(GetUnitPointValue(Z47))),"Initialized")==false then
call QF7(StringHash("HeroInit:"+I2S(GetUnitPointValue(Z47))),"Initialized",true)
call G18(Z47)
call SR8(Z47)
endif
set IM4=Z47
call ExecuteFunc("TT8")
if ib[GetPlayerId(GetLocalPlayer())]==false then
if WQ7(j8)then
call SetPlayerName(j8,KY4[GetPlayerId((j8))])
else
call SetPlayerName(j8,(KY4[GetPlayerId((j8))])+" ("+Y37(G7[GetPlayerId(j8)])+")")
endif
endif
call DisplayTimedTextToPlayer(p,0,0,10.,s)
set p=null
call RemoveRegion(r)
set Z47=null
set TS8=null
endfunction
function TU8 takes nothing returns boolean
return(IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO))!=null
endfunction
function TV8 takes nothing returns nothing
if((QZ4!=null)and(IsTriggerEnabled(QZ4)))then
if((GetOwningPlayer(GetSoldUnit())==QS4)and(QU4!=null))then
return
elseif((GetOwningPlayer(GetSoldUnit())==QT4)and(QV4!=null))then
return
endif
endif
call XI7(GetOwningPlayer(GetSoldUnit()))
endfunction
function TW8 takes nothing returns boolean
local integer TX8
local integer O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set TX8=0
if(IsPlayerInForce(Player(O5),QW4))then
set CR4[O5]=CR4[O5]+(I2R(X_4[48+O5])/8)
set TX8=R2I(CR4[O5])
if TX8<0 then
set TX8=0
endif
set CR4[O5]=CR4[O5]-I2R(TX8)
endif
if(X4)then
set TX8=TX8+2
else
set TX8=TX8+1
endif
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+TX8)
set O5=O5+1
endloop
return false
endfunction
function TY8 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and(LoadInteger(N44,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))))>0 then
call TimerStart(N74[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],(LoadInteger(N44,(GetSpellAbilityId()),(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())))),false,null)
endif
if GetSpellAbilityId()==1093677655 then
call TimerStart(N74[GetPlayerId((GetOwningPlayer(GetTriggerUnit())))],0,false,null)
endif
return false
endfunction
function TZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i
set LP4="TZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TY8))
set i=0
loop
exitwhen(i>$D)
set N74[i]=CreateTimer()
set i=i+1
endloop
set N44=InitHashtable()
call SaveInteger(N44,1093742923,1,60)
call SaveInteger(N44,1093742923,2,50)
call SaveInteger(N44,1093742923,3,40)
call SaveInteger(N44,1093685042,1,80)
call SaveInteger(N44,1093685042,2,75)
call SaveInteger(N44,1093685042,3,70)
call SaveInteger(N44,1093810233,1,45)
call SaveInteger(N44,1093810233,2,45)
call SaveInteger(N44,1093810233,3,45)
call SaveInteger(N44,1093682248,1,$96)
call SaveInteger(N44,1093682248,2,$82)
call SaveInteger(N44,1093682248,3,110)
call SaveInteger(N44,1093750594,1,$96)
call SaveInteger(N44,1093750594,2,$82)
call SaveInteger(N44,1093750594,3,110)
call SaveInteger(N44,1093682514,1,$96)
call SaveInteger(N44,1093682514,2,$96)
call SaveInteger(N44,1093682514,3,$96)
call SaveInteger(N44,1093684561,1,$B4)
call SaveInteger(N44,1093684561,2,$A0)
call SaveInteger(N44,1093684561,3,$8C)
call SaveInteger(N44,1093747254,1,$A0)
call SaveInteger(N44,1093747254,2,$8C)
call SaveInteger(N44,1093747254,3,120)
call SaveInteger(N44,1093752648,1,80)
call SaveInteger(N44,1093752648,2,80)
call SaveInteger(N44,1093752648,3,80)
call SaveInteger(N44,1093746993,1,100)
call SaveInteger(N44,1093746993,2,100)
call SaveInteger(N44,1093746993,3,100)
call SaveInteger(N44,1093678938,1,70)
call SaveInteger(N44,1093678938,2,70)
call SaveInteger(N44,1093678938,3,70)
call SaveInteger(N44,1095656306,1,45)
call SaveInteger(N44,1095656306,2,45)
call SaveInteger(N44,1095656306,3,45)
call SaveInteger(N44,1093687864,1,70)
call SaveInteger(N44,1093687864,2,55)
call SaveInteger(N44,1093687864,3,40)
call SaveInteger(N44,1093747542,1,$C)
call SaveInteger(N44,1093747542,2,$C)
call SaveInteger(N44,1093747542,3,$C)
call SaveInteger(N44,1093677895,1,115)
call SaveInteger(N44,1093677895,2,115)
call SaveInteger(N44,1093677895,3,115)
call SaveInteger(N44,1093810508,1,120)
call SaveInteger(N44,1093810508,2,110)
call SaveInteger(N44,1093810508,3,100)
call SaveInteger(N44,1093685586,1,45)
call SaveInteger(N44,1093685586,2,30)
call SaveInteger(N44,1093685586,3,$F)
call SaveInteger(N44,1093747251,1,4)
call SaveInteger(N44,1093747251,2,4)
call SaveInteger(N44,1093747251,3,4)
call SaveInteger(N44,1093678674,1,$8C)
call SaveInteger(N44,1093678674,2,120)
call SaveInteger(N44,1093678674,3,100)
call SaveInteger(N44,1093747252,1,120)
call SaveInteger(N44,1093747252,2,100)
call SaveInteger(N44,1093747252,3,80)
call SaveInteger(N44,1093682996,1,75)
call SaveInteger(N44,1093682996,2,75)
call SaveInteger(N44,1093682996,3,75)
call SaveInteger(N44,1093747768,1,20)
call SaveInteger(N44,1093747768,2,20)
call SaveInteger(N44,1093747768,3,20)
call SaveInteger(N44,1093810505,1,$96)
call SaveInteger(N44,1093810505,2,$96)
call SaveInteger(N44,1093810505,3,$96)
call SaveInteger(N44,1093682482,1,75)
call SaveInteger(N44,1093682482,2,65)
call SaveInteger(N44,1093682482,3,55)
call SaveInteger(N44,1093750098,1,6)
call SaveInteger(N44,1093750098,2,6)
call SaveInteger(N44,1093750098,3,6)
call SaveInteger(N44,1093677903,1,$8C)
call SaveInteger(N44,1093677903,2,$8C)
call SaveInteger(N44,1093677903,3,$8C)
call SaveInteger(N44,1093684565,1,110)
call SaveInteger(N44,1093684565,2,110)
call SaveInteger(N44,1093684565,3,110)
call SaveInteger(N44,1093681458,1,110)
call SaveInteger(N44,1093681458,2,110)
call SaveInteger(N44,1093681458,3,110)
call SaveInteger(N44,1093686103,1,100)
call SaveInteger(N44,1093686103,2,100)
call SaveInteger(N44,1093686103,3,100)
call SaveInteger(N44,1093679411,1,100)
call SaveInteger(N44,1093679411,2,70)
call SaveInteger(N44,1093679411,3,40)
call SaveInteger(N44,1093677899,1,$B4)
call SaveInteger(N44,1093677899,2,$96)
call SaveInteger(N44,1093677899,3,120)
call SaveInteger(N44,1093747248,1,$B4)
call SaveInteger(N44,1093747248,2,$96)
call SaveInteger(N44,1093747248,3,120)
call SaveInteger(N44,1093685808,1,$82)
call SaveInteger(N44,1093685808,2,$82)
call SaveInteger(N44,1093685808,3,$82)
call SaveInteger(N44,1093682764,1,30)
call SaveInteger(N44,1093682764,2,30)
call SaveInteger(N44,1093682764,3,30)
call SaveInteger(N44,1093747544,1,30)
call SaveInteger(N44,1093747544,2,30)
call SaveInteger(N44,1093747544,3,30)
call SaveInteger(N44,1093677876,1,$A)
call SaveInteger(N44,1093677876,2,$A)
call SaveInteger(N44,1093677876,3,$A)
call SaveInteger(N44,1093743946,1,75)
call SaveInteger(N44,1093743946,2,75)
call SaveInteger(N44,1093743946,3,75)
call SaveInteger(N44,1093682483,1,70)
call SaveInteger(N44,1093682483,2,70)
call SaveInteger(N44,1093682483,3,70)
call SaveInteger(N44,1093678160,1,20)
call SaveInteger(N44,1093678160,2,$F)
call SaveInteger(N44,1093678160,3,$A)
call SaveInteger(N44,1093684529,1,$82)
call SaveInteger(N44,1093684529,2,120)
call SaveInteger(N44,1093684529,3,110)
call SaveInteger(N44,1093747032,1,110)
call SaveInteger(N44,1093747032,2,100)
call SaveInteger(N44,1093747032,3,90)
call SaveInteger(N44,1093678388,1,$A0)
call SaveInteger(N44,1093678388,2,$96)
call SaveInteger(N44,1093678388,3,$8C)
call SaveInteger(N44,1093677141,1,$A0)
call SaveInteger(N44,1093677141,2,$96)
call SaveInteger(N44,1093677141,3,$8C)
call SaveInteger(N44,1093683000,1,80)
call SaveInteger(N44,1093683000,2,80)
call SaveInteger(N44,1093683000,3,80)
call SaveInteger(N44,1093678933,1,$B4)
call SaveInteger(N44,1093678933,2,120)
call SaveInteger(N44,1093678933,3,60)
call SaveInteger(N44,1093684053,1,$A0)
call SaveInteger(N44,1093684053,2,$8C)
call SaveInteger(N44,1093684053,3,120)
call SaveInteger(N44,1093748042,1,20)
call SaveInteger(N44,1093748042,2,20)
call SaveInteger(N44,1093748042,3,20)
call SaveInteger(N44,1093681716,1,$A)
call SaveInteger(N44,1093681716,2,7)
call SaveInteger(N44,1093681716,3,5)
call SaveInteger(N44,1093683534,1,25)
call SaveInteger(N44,1093683534,2,25)
call SaveInteger(N44,1093683534,3,25)
call SaveInteger(N44,1093683761,1,120)
call SaveInteger(N44,1093683761,2,110)
call SaveInteger(N44,1093683761,3,100)
call SaveInteger(N44,1093747767,1,60)
call SaveInteger(N44,1093747767,2,60)
call SaveInteger(N44,1093747767,3,60)
call SaveInteger(N44,1093750089,1,45)
call SaveInteger(N44,1093750089,2,45)
call SaveInteger(N44,1093750089,3,45)
call SaveInteger(N44,1093747023,1,80)
call SaveInteger(N44,1093747023,2,70)
call SaveInteger(N44,1093747023,3,60)
call SaveInteger(N44,1093752150,1,80)
call SaveInteger(N44,1093752150,2,70)
call SaveInteger(N44,1093752150,3,60)
call SaveInteger(N44,1093750341,1,$B4)
call SaveInteger(N44,1093750341,2,$A0)
call SaveInteger(N44,1093750341,3,$8C)
call SaveInteger(N44,(1093814599),(1),($B4))
call SaveInteger(N44,(1093814599),(2),($A0))
call SaveInteger(N44,(1093814599),(3),($8C))
call SaveInteger(N44,(1093747028),(1),($8C))
call SaveInteger(N44,(1093747028),(2),(100))
call SaveInteger(N44,(1093747028),(3),(60))
call SaveInteger(N44,1093685840,1,$B)
call SaveInteger(N44,1093685840,2,9)
call SaveInteger(N44,1093685840,3,7)
call SaveInteger(N44,1093684291,1,25)
call SaveInteger(N44,1093684291,2,25)
call SaveInteger(N44,1093684291,3,25)
call SaveInteger(N44,1093683534,1,45)
call SaveInteger(N44,1093683534,2,45)
call SaveInteger(N44,1093683534,3,45)
call SaveInteger(N44,1093747031,1,$A)
call SaveInteger(N44,1093747031,2,$A)
call SaveInteger(N44,1093747031,3,$A)
call SaveInteger(N44,1093684296,1,70)
call SaveInteger(N44,1093684296,2,60)
call SaveInteger(N44,1093684296,3,50)
call SaveInteger(N44,1093678161,1,45)
call SaveInteger(N44,1093678161,2,45)
call SaveInteger(N44,1093678161,3,45)
call SaveInteger(N44,1093687121,1,45)
call SaveInteger(N44,1093687121,2,45)
call SaveInteger(N44,1093687121,3,45)
call SaveInteger(N44,1093679445,1,70)
call SaveInteger(N44,1093679445,2,60)
call SaveInteger(N44,1093679445,3,50)
call SaveInteger(N44,1093682004,1,60)
call SaveInteger(N44,1093682004,2,50)
call SaveInteger(N44,1093682004,3,40)
call SaveInteger(N44,1093810506,1,120)
call SaveInteger(N44,1093810506,2,110)
call SaveInteger(N44,1093810506,3,100)
call SaveInteger(N44,1093678929,1,$A0)
call SaveInteger(N44,1093678929,2,110)
call SaveInteger(N44,1093678929,3,60)
call SaveInteger(N44,1093683257,1,120)
call SaveInteger(N44,1093683257,2,120)
call SaveInteger(N44,1093683257,3,120)
call SaveInteger(N44,1093677363,1,$8C)
call SaveInteger(N44,1093677363,2,120)
call SaveInteger(N44,1093677363,3,100)
call SaveInteger(N44,1093681462,1,$8C)
call SaveInteger(N44,1093681462,2,120)
call SaveInteger(N44,1093681462,3,60)
call SaveInteger(N44,1093679152,1,80)
call SaveInteger(N44,1093679152,2,50)
call SaveInteger(N44,1093679152,3,30)
call SaveInteger(N44,1093752154,1,$C)
call SaveInteger(N44,1093752154,2,$C)
call SaveInteger(N44,1093752154,3,$C)
call SaveInteger(N44,1093677906,1,$96)
call SaveInteger(N44,1093677906,2,120)
call SaveInteger(N44,1093677906,3,90)
call SaveInteger(N44,1093681494,1,$96)
call SaveInteger(N44,1093681494,2,120)
call SaveInteger(N44,1093681494,3,90)
call SaveInteger(N44,1093686072,1,85)
call SaveInteger(N44,1093686072,2,85)
call SaveInteger(N44,1093686072,3,85)
call SaveInteger(N44,1093751120,1,85)
call SaveInteger(N44,1093751120,2,85)
call SaveInteger(N44,1093751120,3,85)
call SaveInteger(N44,1093684308,1,$8C)
call SaveInteger(N44,1093684308,2,$82)
call SaveInteger(N44,1093684308,3,120)
call SaveInteger(N44,1093747539,1,30)
call SaveInteger(N44,1093747539,2,30)
call SaveInteger(N44,1093747539,3,30)
call SaveInteger(N44,1093742932,1,80)
call SaveInteger(N44,1093742932,2,70)
call SaveInteger(N44,1093742932,3,60)
call SaveInteger(N44,1093752632,1,90)
call SaveInteger(N44,1093752632,2,75)
call SaveInteger(N44,1093752632,3,60)
call SaveInteger(N44,1093752633,1,90)
call SaveInteger(N44,1093752633,2,75)
call SaveInteger(N44,1093752633,3,60)
call SaveInteger(N44,1093810503,1,90)
call SaveInteger(N44,1093810503,2,90)
call SaveInteger(N44,1093810503,3,90)
call SaveInteger(N44,1093810504,1,90)
call SaveInteger(N44,1093810504,2,90)
call SaveInteger(N44,1093810504,3,90)
call SaveInteger(N44,1093684275,1,$8C)
call SaveInteger(N44,1093684275,2,$8C)
call SaveInteger(N44,1093684275,3,$8C)
call SaveInteger(N44,1093677392,1,70)
call SaveInteger(N44,1093677392,2,60)
call SaveInteger(N44,1093677392,3,50)
call SaveInteger(N44,1093679450,1,70)
call SaveInteger(N44,1093679450,2,60)
call SaveInteger(N44,1093679450,3,50)
call SaveInteger(N44,1093743184,1,60)
call SaveInteger(N44,1093743184,2,60)
call SaveInteger(N44,1093743184,3,60)
call SaveInteger(N44,1093747766,1,$F)
call SaveInteger(N44,1093747766,2,$F)
call SaveInteger(N44,1093747766,3,$F)
call SaveInteger(N44,1093744975,1,90)
call SaveInteger(N44,1093744975,2,70)
call SaveInteger(N44,1093744975,3,50)
call SaveInteger(N44,1093681483,1,$A)
call SaveInteger(N44,1093681483,2,$A)
call SaveInteger(N44,1093681483,3,$A)
call SaveInteger(N44,1093748313,1,$A)
call SaveInteger(N44,1093748313,2,$A)
call SaveInteger(N44,1093748313,3,$A)
call SaveInteger(N44,1093808473,1,22)
call SaveInteger(N44,1093808473,2,17)
call SaveInteger(N44,1093808473,3,$C)
call SaveInteger(N44,1093808473,4,5)
call SaveInteger(N44,1093748565,1,16)
call SaveInteger(N44,1093748565,2,8)
call SaveInteger(N44,1093748565,3,4)
call SaveInteger(N44,1093748565,4,2)
call SaveInteger(N44,1093678923,1,6)
call SaveInteger(N44,1093678923,2,6)
call SaveInteger(N44,1093678923,3,6)
call SaveInteger(N44,1093742673,1,40)
call SaveInteger(N44,1093742673,2,40)
call SaveInteger(N44,1093742673,3,40)
call SaveInteger(N44,1093747778,1,40)
call SaveInteger(N44,1093747778,2,40)
call SaveInteger(N44,1093747778,3,40)
call SaveInteger(N44,1093677128,1,110)
call SaveInteger(N44,1093677128,2,110)
call SaveInteger(N44,1093677128,3,110)
call SaveInteger(N44,1093681457,1,110)
call SaveInteger(N44,1093681457,2,110)
call SaveInteger(N44,1093681457,3,110)
call SaveInteger(N44,1093685045,1,60)
call SaveInteger(N44,1093685045,2,60)
call SaveInteger(N44,1093685045,3,60)
call SaveInteger(N44,1093747249,1,60)
call SaveInteger(N44,1093747249,2,60)
call SaveInteger(N44,1093747249,3,60)
call SaveInteger(N44,1093684820,1,80)
call SaveInteger(N44,1093684820,2,80)
call SaveInteger(N44,1093684820,3,80)
call SaveInteger(N44,1093684824,1,80)
call SaveInteger(N44,1093684824,2,80)
call SaveInteger(N44,1093684824,3,80)
call SaveInteger(N44,1093677649,1,100)
call SaveInteger(N44,1093677649,2,100)
call SaveInteger(N44,1093677649,3,100)
call SaveInteger(N44,1093747769,1,100)
call SaveInteger(N44,1093747769,2,100)
call SaveInteger(N44,1093747769,3,100)
call SaveInteger(N44,1093685579,1,100)
call SaveInteger(N44,1093685579,2,100)
call SaveInteger(N44,1093685579,3,100)
call SaveInteger(N44,1093678899,1,100)
call SaveInteger(N44,1093678899,2,100)
call SaveInteger(N44,1093678899,3,100)
call SaveInteger(N44,1093677898,1,100)
call SaveInteger(N44,1093677898,2,100)
call SaveInteger(N44,1093677898,3,100)
call SaveInteger(N44,1093678154,1,100)
call SaveInteger(N44,1093678154,2,100)
call SaveInteger(N44,1093678154,3,100)
call SaveInteger(N44,1093678157,1,100)
call SaveInteger(N44,1093678157,2,100)
call SaveInteger(N44,1093678157,3,100)
call SaveInteger(N44,1093678158,1,100)
call SaveInteger(N44,1093678158,2,100)
call SaveInteger(N44,1093678158,3,100)
call SaveInteger(N44,1093679413,1,$A0)
call SaveInteger(N44,1093679413,2,100)
call SaveInteger(N44,1093679413,3,40)
call SaveInteger(N44,1093679447,1,$A0)
call SaveInteger(N44,1093679447,2,100)
call SaveInteger(N44,1093679447,3,40)
call SaveInteger(N44,1093747288,1,$C8)
call SaveInteger(N44,1093747288,2,$BE)
call SaveInteger(N44,1093747288,3,$B4)
call SaveInteger(N44,1093678420,1,$91)
call SaveInteger(N44,1093678420,2,115)
call SaveInteger(N44,1093678420,3,60)
call SaveInteger(N44,1093679176,1,$91)
call SaveInteger(N44,1093679176,2,115)
call SaveInteger(N44,1093679176,3,60)
call SaveInteger(N44,1093678647,1,100)
call SaveInteger(N44,1093678647,2,85)
call SaveInteger(N44,1093678647,3,70)
call SaveInteger(N44,1093679184,1,70)
call SaveInteger(N44,1093679184,2,70)
call SaveInteger(N44,1093679184,3,70)
call SaveInteger(N44,1093681987,1,22)
call SaveInteger(N44,1093681987,2,22)
call SaveInteger(N44,1093681987,3,22)
call SaveInteger(N44,1093685067,1,$A0)
call SaveInteger(N44,1093685067,2,$A0)
call SaveInteger(N44,1093685067,3,$A0)
call SaveInteger(N44,1093752407,1,$A0)
call SaveInteger(N44,1093752407,2,$A0)
call SaveInteger(N44,1093752407,3,$A0)
call SaveInteger(N44,1093810258,1,$87)
call SaveInteger(N44,1093810258,2,$87)
call SaveInteger(N44,1093810258,3,$87)
call SaveInteger(N44,1093810259,1,100)
call SaveInteger(N44,1093810259,2,70)
call SaveInteger(N44,1093810259,3,40)
call SaveInteger(N44,1395667000,1,$A5)
call SaveInteger(N44,1395667000,2,$A5)
call SaveInteger(N44,1395667000,3,$A5)
call SaveInteger(N44,(1395667029),(1),($A5))
call SaveInteger(N44,(1395667029),(2),($A5))
call SaveInteger(N44,(1395667029),(3),($A5))
call SaveInteger(N44,(1093751874),(1),(90))
call SaveInteger(N44,(1093751874),(2),(75))
call SaveInteger(N44,(1093751874),(3),(60))
call SaveInteger(N44,(1093752118),(1),(85))
call SaveInteger(N44,(1093752118),(2),(85))
call SaveInteger(N44,(1093752118),(3),(85))
call SaveInteger(N44,(1093751861),(1),(55))
call SaveInteger(N44,(1093751861),(2),(50))
call SaveInteger(N44,(1093751861),(3),(45))
call SaveInteger(N44,(1093808949),(1),(55))
call SaveInteger(N44,(1093808949),(2),(50))
call SaveInteger(N44,(1093808949),(3),(45))
call SaveInteger(N44,(1093751617),(1),(50))
call SaveInteger(N44,(1093751617),(2),(50))
call SaveInteger(N44,(1093751617),(3),(50))
call SaveInteger(N44,(1093751371),(1),(110))
call SaveInteger(N44,(1093751371),(2),(110))
call SaveInteger(N44,(1093751371),(3),(110))
call SaveInteger(N44,(1093753169),(1),(30))
call SaveInteger(N44,(1093753169),(2),(24))
call SaveInteger(N44,(1093753169),(3),(18))
call SaveInteger(N44,(1093809992),(1),(20))
call SaveInteger(N44,(1093809992),(2),(18))
call SaveInteger(N44,(1093809992),(3),(16))
call SaveInteger(N44,(1093812807),(1),(60))
call SaveInteger(N44,(1093812807),(2),(40))
call SaveInteger(N44,(1093812807),(3),(20))
call SaveInteger(N44,(1093813065),(1),(50))
call SaveInteger(N44,(1093813065),(2),(50))
call SaveInteger(N44,(1093813065),(3),(50))
call SaveInteger(N44,(1093813557),(1),(8))
call SaveInteger(N44,(1093813557),(2),(8))
call SaveInteger(N44,(1093813557),(3),(8))
call SaveInteger(N44,(1093815600),(1),(65))
call SaveInteger(N44,(1093815600),(2),(60))
call SaveInteger(N44,(1093815600),(3),(55))
call SaveInteger(N44,(1093687856),(1),(90))
call SaveInteger(N44,(1093687856),(2),(80))
call SaveInteger(N44,(1093687856),(3),(70))
call SaveInteger(N44,(1093816118),(1),(120))
call SaveInteger(N44,(1093816118),(2),(90))
call SaveInteger(N44,(1093816118),(3),(60))
set t=null
endfunction
function TA8 takes nothing returns boolean
local player p
local integer i
local integer id
local integer TB8
set LP4="TA8"
set i=1
loop
exitwhen i>5
set p=Y7[i]
set id=GetPlayerId(p)
set TB8=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if TB8<VF4[id]then
set VF4[id]=TB8
endif
set p=Z7[i]
set id=GetPlayerId(p)
set TB8=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)
if TB8<VF4[id]then
set VF4[id]=TB8
endif
set i=i+1
endloop
return false
endfunction
function TC8 takes nothing returns nothing
endfunction
function T38 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
set LP4="T38"
if GetOwningPlayer(GetTriggerUnit())==A7 then
set JU[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=JU[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
elseif(id==1969711215)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970169187)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1702061422)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1701081721)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092337)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092338)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656918)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697656919)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1700946284)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1697657398)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1970107511)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
elseif(id==1966092370)then
if(IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit())))then
set T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=T7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
else
set S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=S7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
endif
call TC8()
endfunction
function T68 takes integer i returns nothing
local integer x=1
local integer y=1
set LP4="Vxv"
set NK4[i]=null
set NM4[i]=0
set NN4[i]=false
loop
exitwhen y>NO4
if NM4[y]!=0 then
set qu[x]=NK4[y]
set Qu[x]=NM4[y]
set Su[x]=NN4[y]
set NK4[y]=null
set NM4[y]=0
set NN4[y]=false
set x=x+1
endif
set y=y+1
endloop
set NO4=x-1
set x=1
loop
exitwhen x>NO4
set NK4[x]=qu[x]
set NM4[x]=Qu[x]
set NN4[x]=Su[x]
set x=x+1
endloop
endfunction
function TL8 takes nothing returns nothing
local integer T8
local integer U8
local integer T18
local integer T08
local integer i
local player p
set LP4="TL8"
set xY=xY+1
set HA4=0
set HB4=0
set i=0
loop
exitwhen i>5
set p=Y7[i]
if M8(p)then
set HA4=HA4+1
endif
set p=Z7[i]
if M8(p)then
set HB4=HB4+1
endif
set i=i+1
endloop
if a2==false then
set ae=HA4
set ne=HB4
endif
set T8=1
set U8=5
set T18=1
loop
exitwhen T8>U8
set p=Y7[T8]
if M8(p)then
set M7[T18]=p
set T18=T18+1
endif
set T8=T8+1
endloop
set T8=1
set U8=5
set T18=1
loop
exitwhen T8>U8
set p=Z7[T8]
if M8(p)then
set O7[T18]=p
set T18=T18+1
endif
set T8=T8+1
endloop
if xY==1 then
set R4=CreateMultiboardBJ(7+6+2,3+HB4+HA4," ")
call MultiboardMinimize(R4,true)
endif
call l6(R4,2,1,"CD")
call l6(R4,3,1,"|c00838B8BL|r")
call l6(R4,4,1,Dj+"K|r")
call l6(R4,5,1,gj+"D|r")
call l6(R4,6,1,Gj+"A|r")
call l6(R4,1,2,GetObjectName(1848656971))
call l6(R4,4,2,Dj+"0|r")
call l6(R4,5,2,gj+"0|r")
call l6(R4,1,3+HA4,GetObjectName(1848656975))
call l6(R4,4,3+HA4,Dj+"0|r")
call l6(R4,5,3+HA4,gj+"0|r")
call U6(R4,1,2,(XV7(SubString(P[GetPlayerId((Y7[0]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((Y7[0]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((Y7[0]))],8,$A)))/ 255.*100,0)
call U6(R4,1,3+HA4,(XV7(SubString(P[GetPlayerId((Z7[0]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((Z7[0]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((Z7[0]))],8,$A)))/ 255.*100,0)
set T8=1
set U8=3+HB4+HA4
loop
exitwhen T8>U8
call x7(R4,1,T8,10.8)
call x7(R4,2,T8,2)
call x7(R4,3,T8,2)
call x7(R4,4,T8,1.3)
call x7(R4,5,T8,1.3)
call x7(R4,6,T8,1.3)
call x7(R4,7,T8,2.5)
call x7(R4,8,T8,.01)
call x7(R4,9,T8,.01)
call x7(R4,$A,T8,.01)
call x7(R4,$B,T8,.01)
call x7(R4,$C,T8,.01)
call x7(R4,$D,T8,.01)
call x7(R4,$E,T8,.01)
call x7(R4,$F,T8,.01)
set T8=T8+1
endloop
set T8=1
set U8=7+6+2
loop
exitwhen T8>U8
set T18=1
set T08=3+HB4+HA4
loop
exitwhen T18>T08
call s6(R4,T8,T18,true,false)
set T18=T18+1
endloop
set T8=T8+1
endloop
set T8=1
set U8=HA4
loop
exitwhen T8>U8
call s6(R4,1,T8+2,true,true)
call U6(R4,7,T8+2,$FF,$CC,0,0)
set N84[GetPlayerId(M7[T8])]=1-1
set N94[GetPlayerId(M7[T8])]=T8+2-1
call l6(R4,1,T8+2,(KY4[GetPlayerId((M7[T8]))]))
if WR7(M7[T8])then
call U6(R4,1,T8+2,(XV7(SubString(P[GetPlayerId((M7[T8]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((M7[T8]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((M7[T8]))],8,$A)))/ 255.*100,0)
call U6(R4,2,T8+2,(XV7(SubString(P[GetPlayerId((M7[T8]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((M7[T8]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((M7[T8]))],8,$A)))/ 255.*100,0)
else
call l6(R4,1,T8+2,"|c00333333"+(KY4[GetPlayerId((M7[T8]))])+"|r")
endif
call l6(R4,4,(T8+2),Dj+"0|r")
call l6(R4,5,(T8+2),gj+"0|r")
call l6(R4,6,(T8+2),Gj+"0|r")
set T8=T8+1
endloop
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call s6(R4,1,T8+3+HA4,true,true)
call U6(R4,7,T8+3+HA4,$FF,$CC,0,0)
set N84[GetPlayerId(O7[T8])]=1-1
set N94[GetPlayerId(O7[T8])]=T8+3+HA4-1
call l6(R4,1,T8+3+HA4,(KY4[GetPlayerId((O7[T8]))]))
if WR7(O7[T8])then
call U6(R4,1,T8+3+HA4,(XV7(SubString(P[GetPlayerId((O7[T8]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((O7[T8]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((O7[T8]))],8,$A)))/ 255.*100,0)
call U6(R4,2,T8+3+HA4,(XV7(SubString(P[GetPlayerId((O7[T8]))],4,6)))/ 255.*100,(XV7(SubString(P[GetPlayerId((O7[T8]))],6,8)))/ 255.*100,(XV7(SubString(P[GetPlayerId((O7[T8]))],8,$A)))/ 255.*100,0)
else
call l6(R4,1,T8+3+HA4,"|c00333333"+(KY4[GetPlayerId((O7[T8]))])+"|r")
endif
call l6(R4,4,(T8+3+HA4),Dj+"0|r")
call l6(R4,5,(T8+3+HA4),gj+"0|r")
call l6(R4,6,(T8+3+HA4),Gj+"0|r")
set T8=T8+1
endloop
set oY=1
set rY=3+HB4+HA4-2
if R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4)and xY==1 then
call MultiboardDisplay(R4,false)
endif
call s6(R4,7,1,false,true)
call P6(R4,7,1,"UI\\Feedback\\Resources\\ResourceGold.blp")
call TC8()
if xY>1 then
call TriggerExecute(vA)
endif
endfunction
function T58 takes integer O5,boolean T28 returns string
if not IsPlayerInForce(Player(O5),QW4)then
return" "
elseif G7[O5]==null then
return "|c00a0a0a0"+"Select hero|r"
elseif not OA7(G7[O5])then
return "|c00a0a0a0"+"Dead|r"
elseif Bz<Q94-25. then
return "|c00a0a0a0"+"Stand by|r"
elseif Bz<Q94 then
return"Moving"
elseif eY[O5]==1 then
if O37(G7[O5])then
return"Retreating"
elseif G0[48+O5]then
return"Fleeing"
elseif h4[O5]!=null then
if T28 then
return">"+P[GetPlayerId(GetOwningPlayer(h4[O5]))]+Y67(h4[O5])+"|r"
else
return"vs "+P[GetPlayerId(GetOwningPlayer(h4[O5]))]+Y67(h4[O5])+"|r"
endif
elseif h9[64+O5]!=null then
return"Def Tower"+NG7(eY[80+O5],false)
elseif eY[80+O5]<=2 then
return"Push"+NG7(eY[80+O5],false)
else
return"Push"
endif
elseif eY[O5]==2 then
return"Healing"
elseif eY[O5]==3 then
return"Def"+NG7(LS4[64+O5],true)
elseif eY[O5]==4 then
return"S-Def"+NG7(LS4[64+O5],true)
elseif eY[O5]==9 then
if eY[272+O5]==0 then
return"Change lane"
elseif h8[96+O5]!=null then
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(h8[96+O5]))
return"Ambush "+P[bj_forLoopAIndex]+I2S(bj_forLoopAIndex)+"|r"
else
return GetObjectName(1496330545)+NG7(eY[288+O5],false)
endif
elseif eY[O5]==$A then
return"Jungling"
elseif eY[O5]==$B then
if T28 then
return">|c00ffcc00Roshan|r"
else
return"vs |c00ffcc00Roshan|r"
endif
endif
return" "
endfunction
function T_8 takes nothing returns nothing
local integer T8
local integer U8
local string U48
set LP4="T_8"
call l6(R4,4,2,Dj+I2S(Q[GetPlayerId(Y7[0])])+"|r")
call l6(R4,5,2,gj+I2S(U[GetPlayerId(Y7[0])])+"|r")
call l6(R4,4,3+HA4,Dj+I2S(Q[GetPlayerId(Z7[0])])+"|r")
call l6(R4,5,3+HA4,gj+I2S(U[GetPlayerId(Z7[0])])+"|r")
set T8=1
set U8=HA4
loop
exitwhen T8>U8
call l6(R4,4,(T8+2),Dj+I2S(Q[GetPlayerId(M7[T8])])+"|r")
call l6(R4,5,(T8+2),gj+I2S(U[GetPlayerId(M7[T8])])+"|r")
call l6(R4,6,(T8+2),Gj+I2S(FU[GetPlayerId(M7[T8])])+"|r")
set U48=T58(GetPlayerId(M7[T8]),false)
if M7[T8]==QS4 then
set U48="|c00ffcc00- LEADER -|r"
endif
if(not B04[32+GetPlayerId(GetLocalPlayer())])then
set U48=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Y7[0])))then
set U48=" "
endif
call l6(R4,$F,T8+2,U48)
set U48=" "
if B04[80+GetPlayerId(GetLocalPlayer())]and WQ7(M7[T8])then
if LT then
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(M7[T8])-100.))+"%|r"
endif
if LT and EU then
set U48=U48+" - "
endif
if EU then
set U48=U48+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(M7[T8])])+"|r"
endif
endif
call l6(R4,$E,(T8+2),U48)
set T8=T8+1
endloop
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call l6(R4,4,(T8+3+HA4),Dj+I2S(Q[GetPlayerId(O7[T8])])+"|r")
call l6(R4,5,(T8+3+HA4),gj+I2S(U[GetPlayerId(O7[T8])])+"|r")
call l6(R4,6,(T8+3+HA4),Gj+I2S(FU[GetPlayerId(O7[T8])])+"|r")
set U48=T58(GetPlayerId(O7[T8]),false)
if O7[T8]==QT4 then
set U48="|c00ffcc00- LEADER -|r"
endif
if(not B04[32+GetPlayerId(GetLocalPlayer())])then
set U48=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Z7[0])))then
set U48=" "
endif
call l6(R4,$F,(T8+3+HA4),U48)
set U48=" "
if B04[80+GetPlayerId(GetLocalPlayer())]and WQ7(O7[T8])then
if LT then
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(O7[T8])-100.))+"%|r"
endif
if LT and EU then
set U48=U48+" - "
endif
if EU then
set U48=U48+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(O7[T8])])+"|r"
endif
endif
call l6(R4,$E,(T8+3+HA4),U48)
set T8=T8+1
endloop
endfunction
function U78 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1697656914)or(GetUnitTypeId(GetTriggerUnit())==1697657137)or(GetUnitTypeId(GetTriggerUnit())==1697656915)or(GetUnitTypeId(GetTriggerUnit())==1697657145)
endfunction
function U88 takes nothing returns nothing
set F[1]=(F[1]+1)
endfunction
function U98 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1966092365)or(GetUnitTypeId(GetTriggerUnit())==1966092356)or(GetUnitTypeId(GetTriggerUnit())==1966092366)or(GetUnitTypeId(GetTriggerUnit())==1966092372)
endfunction
function UD8 takes nothing returns nothing
set F[2]=(F[2]+1)
endfunction
function UE8 takes integer a returns integer
local integer i=0
local integer x=0
local string s=I2S(a)
set LP4="VOv"
loop
exitwhen i>StringLength(s)
if SubString(s,i,i+1)=="1" then
set x=x+1
endif
set i=i+1
endloop
return x
endfunction
function UF8 takes player UG8,integer UH8 returns string
if IsPlayerAlly(GetLocalPlayer(),UG8) then
return FY8(UnitItemInSlot(G7[GetPlayerId(UG8)],UH8-1))
else
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
endfunction
function UI8 takes nothing returns nothing
local integer T8
local integer U8
local string EO8
local real UJ8
local integer r
local integer i
local integer array time_1a
local string array color_1a
local integer index_1a=0
local integer array time_1b
local string array color_1b
local integer index_1b=0
local integer x=0
local integer id
local string UK8
local string UM8
local string UN8
local string UO8
local string UP8
local string s2=" "
local string s
local real UQ8
local string spacer
local integer UR8=0
local string US8=""
local string UT8=""
local integer UU8=0
local integer UV8=0
local string UW8=""
local string U48
set LP4="UI8"
if R4==null then
return
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(T[GetPlayerId(Y7[i])]))
if r>0 then
set UR8=UR8+UE8(r)
if UU8==0 then
if r<$A then
set US8=P[GetPlayerId(Y7[i])]+"0"+I2S(r)+" |r"
else
set US8=P[GetPlayerId(Y7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set US8=US8+Hj+"| |r"+P[GetPlayerId(Y7[i])]+"0"+I2S(r)+" |r"
else
set US8=US8+Hj+"| |r"+P[GetPlayerId(Y7[i])]+I2S(r)+" |r"
endif
endif
set UU8=UU8+1
endif
set i=i+1
endloop
if UU8>0 then
if IsPlayerAlly(GetLocalPlayer(),Y7[0]) then
set US8=Hj+"["+GetObjectName(1848658515)+" |r"+US8+Hj+"]|r"
else
set US8=fj+"["+GetObjectName(1848658514)+" |r"+US8+fj+"]|r"
endif
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(T[GetPlayerId(Z7[i])]))
if r>0 then
set UR8=UR8+UE8(r)
if UV8==0 then
if r<$A then
set UT8=P[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set UT8=P[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set UT8=UT8+Hj+"| |r"+P[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set UT8=UT8+Hj+"| |r"+P[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
endif
set UV8=UV8+1
endif
set i=i+1
endloop
if UV8>0 then
if IsPlayerAlly(GetLocalPlayer(),Z7[0]) then
set UT8=Hj+"["+GetObjectName(1848658515)+" |r"+UT8+Hj+"]|r"
else
set UT8=fj+"["+GetObjectName(1848658514)+" |r"+UT8+fj+"]|r"
endif
endif
if R4!=null then
set id=GetPlayerId(GetLocalPlayer())
if id>=0 and id<16 then
if AW[x]then
set UK8=I2S(Q[id])
set UM8=I2S(U[id])
set UN8=I2S(FU[id])
set UO8=I2S(S7[id])
set UP8=I2S(T7[id])
set s2=" |c00838B8B("+UK8+"/"+UM8+"/"+UN8+" - "+UO8+"/"+UP8+" - |r|c00FFDC00"+I2S(VF4[id])+"|r |c00838B8B)|r"
endif
endif
endif
if UV8==0 and UU8==0 then
call MultiboardSetTitleText(R4,s2)
else
if IsPlayerAlly(GetLocalPlayer(),Y7[0]) then
call MultiboardSetTitleText(R4,UT8+" "+US8+" "+s2)
else
call MultiboardSetTitleText(R4,US8+" "+UT8+" "+s2)
endif
endif
if(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))==false then
call MultiboardDisplay(R4,true)
endif
if Nb[GetPlayerId(GetLocalPlayer())]==false then
call SetWaterBaseColor(0,0,$FF,$FF)
endif
set U48=" "
if B04[32+GetPlayerId(GetLocalPlayer())]then
set U48=LL4
endif
call l6(R4,$F,1,U48)
set U48=" "
if B04[80+GetPlayerId(GetLocalPlayer())]then
set U48="   "
if LT then
set U48=U48+L14
endif
if LT and EU then
set U48=U48+" - "
endif
if EU then
set U48=U48+L04
endif
endif
call l6(R4,$E,1,U48)
set T8=1
set U8=HA4
loop
exitwhen T8>U8
call P6(R4,1,T8+2,Y07(G7[GetPlayerId(M7[T8])]))
call l6(R4,3,T8+2,"|c00838B8B"+I2S(GetHeroLevel(G7[GetPlayerId(M7[T8])]))+"|r")
if ab[GetPlayerId(GetLocalPlayer())]then
call x7(R4,7,1,3)
call x7(R4,8,1,2.8)
call x7(R4,9,1,.8)
call x7(R4,$A,1,.8)
call x7(R4,$B,1,.8)
call x7(R4,$C,1,.8)
call x7(R4,$D,1,N77(B04[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(R4,7,T8+2,3)
call x7(R4,8,T8+2,1.1)
call x7(R4,9,T8+2,1.1)
call x7(R4,$A,T8+2,1.1)
call x7(R4,$B,T8+2,1.1)
call x7(R4,$C,T8+2,1.1)
call x7(R4,$D,T8+2,N77(B04[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(R4,8,T8+2,false,true)
call s6(R4,9,T8+2,false,true)
call s6(R4,$A,T8+2,false,true)
call s6(R4,$B,T8+2,false,true)
call s6(R4,$C,T8+2,false,true)
call s6(R4,$D,T8+2,false,true)
call l6(R4,8,1,"Items")
else
call x7(R4,7,1,2)
call x7(R4,8,1,.1)
call x7(R4,9,1,.1)
call x7(R4,$A,1,.1)
call x7(R4,$B,1,.1)
call x7(R4,$C,1,.1)
call x7(R4,$D,1,.1)
call x7(R4,7,T8+2,2.5)
call x7(R4,8,T8+2,.1)
call x7(R4,9,T8+2,.1)
call x7(R4,$A,T8+2,.1)
call x7(R4,$B,T8+2,.1)
call x7(R4,$C,T8+2,.1)
call x7(R4,$D,T8+2,.1)
call s6(R4,8,T8+2,false,false)
call s6(R4,9,T8+2,false,false)
call s6(R4,$A,T8+2,false,false)
call s6(R4,$B,T8+2,false,false)
call s6(R4,$C,T8+2,false,false)
call s6(R4,$D,T8+2,false,false)
call l6(R4,8,1," ")
endif
call P6(R4,8,T8+2,UF8(M7[T8],1))
call P6(R4,9,T8+2,UF8(M7[T8],2))
call P6(R4,$A,T8+2,UF8(M7[T8],3))
call P6(R4,$B,T8+2,UF8(M7[T8],4))
call P6(R4,$C,T8+2,UF8(M7[T8],5))
call P6(R4,$D,T8+2,UF8(M7[T8],6))
if(Z87(G7[GetPlayerId(M7[T8])])and G7[GetPlayerId(M7[T8])]!=null and TimerGetRemaining(T[GetPlayerId(M7[T8])])>0)then
if IsPlayerAlly(GetLocalPlayer(),M7[T8])then
set UW8=Hj+" ("+(I2S(R2I(TimerGetRemaining(T[GetPlayerId(M7[T8])]))))+")|r"
else
set UW8=fj+" ("+(I2S(R2I(TimerGetRemaining(T[GetPlayerId(M7[T8])]))))+")|r"
endif
else
set UW8="  "
endif
if U2[GetPlayerId(M7[T8])]then
call l6(R4,1,T8+2,"|c00333333"+(KY4[GetPlayerId((M7[T8]))])+"|r"+UW8)
else
call l6(R4,1,T8+2,(KY4[GetPlayerId((M7[T8]))])+UW8)
endif
set UQ8=(TimerGetRemaining(N74[GetPlayerId((M7[T8]))]))
if UQ8>0 then
set s=I2S(R2I(UQ8))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),M7[T8])==false then
call l6(R4,7,T8+2," ")
set s=" "
else
call l6(R4,7,T8+2,"|cffffcc00"+I2S(R2I(GetPlayerState(M7[T8],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call l6(R4,2,T8+2,s)
set U48=T58(GetPlayerId(M7[T8]),false)
if M7[T8]==QS4 then
set U48="|c00ffcc00- LEADER -|r"
endif
if(not B04[32+GetPlayerId(GetLocalPlayer())])then
set U48=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Y7[0])))then
set U48=" "
endif
call l6(R4,$F,T8+2,U48)
set U48=" "
if B04[80+GetPlayerId(GetLocalPlayer())]and WQ7(M7[T8])then
if LT then
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(M7[T8])-100.))+"%|r"
endif
if LT and EU then
set U48=U48+" - "
endif
if EU then
set U48=U48+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(M7[T8])])+"|r"
endif
endif
call l6(R4,$E,T8+2,U48)
set T8=T8+1
endloop
set T8=1
set U8=HB4
loop
exitwhen T8>U8
call P6(R4,1,T8+3+HA4,Y07(G7[GetPlayerId(O7[T8])]))
call l6(R4,3,T8+3+HA4,"|c00838B8B"+I2S(GetHeroLevel(G7[GetPlayerId(O7[T8])]))+"|r")
if ab[GetPlayerId(GetLocalPlayer())]then
call x7(R4,7,1,3)
call x7(R4,8,1,2.8)
call x7(R4,9,1,.8)
call x7(R4,$A,1,.8)
call x7(R4,$B,1,.8)
call x7(R4,$C,1,.8)
call x7(R4,$D,1,N77(B04[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call x7(R4,7,T8+3+HA4,3)
call x7(R4,8,T8+3+HA4,1.1)
call x7(R4,9,T8+3+HA4,1.1)
call x7(R4,$A,T8+3+HA4,1.1)
call x7(R4,$B,T8+3+HA4,1.1)
call x7(R4,$C,T8+3+HA4,1.1)
call x7(R4,$D,T8+3+HA4,N77(B04[32+GetPlayerId(GetLocalPlayer())],1.5,.1))
call s6(R4,8,T8+3+HA4,false,true)
call s6(R4,9,T8+3+HA4,false,true)
call s6(R4,$A,T8+3+HA4,false,true)
call s6(R4,$B,T8+3+HA4,false,true)
call s6(R4,$C,T8+3+HA4,false,true)
call s6(R4,$D,T8+3+HA4,false,true)
call l6(R4,8,1,"Items")
else
call x7(R4,7,1,2)
call x7(R4,8,1,.1)
call x7(R4,9,1,.1)
call x7(R4,$A,1,.1)
call x7(R4,$B,1,.1)
call x7(R4,$C,1,.1)
call x7(R4,$D,1,.1)
call x7(R4,7,T8+3+HA4,2.5)
call x7(R4,8,T8+3+HA4,.1)
call x7(R4,9,T8+3+HA4,.1)
call x7(R4,$A,T8+3+HA4,.1)
call x7(R4,$B,T8+3+HA4,.1)
call x7(R4,$C,T8+3+HA4,.1)
call x7(R4,$D,T8+3+HA4,.1)
call s6(R4,8,T8+3+HA4,false,false)
call s6(R4,9,T8+3+HA4,false,false)
call s6(R4,$A,T8+3+HA4,false,false)
call s6(R4,$B,T8+3+HA4,false,false)
call s6(R4,$C,T8+3+HA4,false,false)
call s6(R4,$D,T8+3+HA4,false,false)
call l6(R4,8,1," ")
endif
call P6(R4,8,T8+3+HA4,UF8(O7[T8],1))
call P6(R4,9,T8+3+HA4,UF8(O7[T8],2))
call P6(R4,$A,T8+3+HA4,UF8(O7[T8],3))
call P6(R4,$B,T8+3+HA4,UF8(O7[T8],4))
call P6(R4,$C,T8+3+HA4,UF8(O7[T8],5))
call P6(R4,$D,T8+3+HA4,UF8(O7[T8],6))
if(Z87(G7[GetPlayerId(O7[T8])])and G7[GetPlayerId(O7[T8])]!=null and TimerGetRemaining(T[GetPlayerId(O7[T8])])>0)then
if IsPlayerAlly(GetLocalPlayer(),O7[T8])then
set UW8=Hj+" ("+(I2S(R2I(TimerGetRemaining(T[GetPlayerId(O7[T8])]))))+")|r"
else
set UW8=fj+" ("+(I2S(R2I(TimerGetRemaining(T[GetPlayerId(O7[T8])]))))+")|r"
endif
else
set UW8="  "
endif
if U2[GetPlayerId(O7[T8])]then
call l6(R4,1,T8+3+HA4,"|c00333333"+(KY4[GetPlayerId((O7[T8]))])+"|r"+UW8)
else
call l6(R4,1,T8+3+HA4,(KY4[GetPlayerId((O7[T8]))])+UW8)
endif
set UQ8=(TimerGetRemaining(N74[GetPlayerId((O7[T8]))]))
if UQ8>0 then
set s=I2S(R2I(UQ8))
else
set s=" "
endif
if IsPlayerAlly(GetLocalPlayer(),O7[T8])==false then
call l6(R4,7,T8+3+HA4," ")
set s=" "
else
call l6(R4,7,T8+3+HA4,"|cffffcc00"+I2S(R2I(GetPlayerState(O7[T8],PLAYER_STATE_RESOURCE_GOLD)))+"|r")
endif
call l6(R4,2,T8+3+HA4,s)
set U48=T58(GetPlayerId(O7[T8]),false)
if O7[T8]==QT4 then
set U48="|c00ffcc00- LEADER -|r"
endif
if(not B04[32+GetPlayerId(GetLocalPlayer())])then
set U48=" "
elseif(not(IsPlayerAlly(GetLocalPlayer(),Z7[0])))then
set U48=" "
endif
call l6(R4,$F,T8+3+HA4,U48)
set U48=" "
if B04[80+GetPlayerId(GetLocalPlayer())]and WQ7(O7[T8])then
if LT then
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(O7[T8])-100.))+"%|r"
endif
if LT and EU then
set U48=U48+" - "
endif
if EU then
set U48=U48+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(O7[T8])])+"|r"
endif
endif
call l6(R4,$E,T8+3+HA4,U48)
set T8=T8+1
endloop
endfunction
function UX8 takes nothing returns boolean
local real UY8
local real UZ8
local unit u
set LP4="UX8"
if Vz==false then
set u=JI4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-aY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if Ez==false then
set u=JJ4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-VY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if Xz==false then
set u=JK4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-EY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if nz==false then
set u=JM4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-XY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JN4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-OY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JO4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-IY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JP4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-AY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JQ4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-bY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JR4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-BY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JS4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-cY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JT4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-CY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JU4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-DY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JV4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-fY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=JW4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-FY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if oz==false then
set u=J14
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-JY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if rz==false then
set u=J04
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-kY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if az==false then
set u=J54
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-lY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
if xz==false then
set u=J24
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-mY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=J_4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-MY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=K44
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-PY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=K74
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-QY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=K84
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-sY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=K94
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-tY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=KD4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-TY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=KE4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-uY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=KF4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-wY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=KG4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-YY)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
set u=KH4
if u!=null then
set UY8=GetUnitState(u,UNIT_STATE_LIFE)
set UZ8=UY8+Q44
if UZ8<(GetUnitState(u,UNIT_STATE_MAX_LIFE)-vz)then
call SetUnitState(u,UNIT_STATE_LIFE,UZ8)
endif
endif
endif
set u=null
return false
endfunction
function UA8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if oz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set JY=JY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function UB8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if rz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set kY=kY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function UC8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if az or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set lY=lY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U38 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set mY=mY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U68 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set MY=MY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function UL8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set PY=PY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U18 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set QY=QY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U08 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set sY=sY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U58 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set tY=tY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U28 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set TY=TY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function U_8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set uY=uY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function V48 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set wY=wY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function V78 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set YY=YY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function V88 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set vz=vz+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function V98 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Vz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set aY=aY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VD8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Ez or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set VY=VY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VE8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if Xz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set EY=EY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VF8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set XY=XY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VG8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set OY=OY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VH8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set IY=IY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VI8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set AY=AY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VJ8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set bY=bY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VK8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set BY=BY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VM8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set cY=cY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VN8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set CY=CY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VO8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set DY=DY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VP8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set fY=fY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VQ8 takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if nz or IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) then
set FY=FY+GetEventDamage()
else
if IsUnitIllusion(GetEventDamageSource()) then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+.75*GetEventDamage())
endif
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function VR8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set nz=true
endif
return false
endfunction
function VS8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set Vz=true
endif
return false
endfunction
function VT8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set Ez=true
endif
return false
endfunction
function VU8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Z7[0]then
set Xz=true
endif
return false
endfunction
function VV8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Y7[0]then
set xz=true
endif
return false
endfunction
function VW8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Y7[0]then
set oz=true
endif
return false
endfunction
function VX8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Y7[0]then
set rz=true
endif
return false
endfunction
function VY8 takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==Y7[0]then
set az=true
endif
return false
endfunction
function VZ8 takes nothing returns boolean
local group g=ZI7()
set LP4="VZ8"
set xz=false
set oz=false
set rz=false
set az=false
set nz=false
set Vz=false
set Ez=false
set Xz=false
call GroupEnumUnitsInRect(g,TD,Condition(function VR8))
call GroupEnumUnitsInRect(g,WD,Condition(function VR8))
call GroupEnumUnitsInRect(g,XD,Condition(function VR8))
call GroupEnumUnitsInRect(g,lE,Condition(function VR8))
call GroupEnumUnitsInRect(g,LE,Condition(function VR8))
call GroupEnumUnitsInRect(g,ME,Condition(function VR8))
call GroupEnumUnitsInRect(g,GE,Condition(function VS8))
call GroupEnumUnitsInRect(g,QE,Condition(function VT8))
call GroupEnumUnitsInRect(g,JE,Condition(function VU8))
call GroupEnumUnitsInRect(g,YD,Condition(function VV8))
call GroupEnumUnitsInRect(g,ZD,Condition(function VV8))
call GroupEnumUnitsInRect(g,AD,Condition(function VV8))
call GroupEnumUnitsInRect(g,qE,Condition(function VV8))
call GroupEnumUnitsInRect(g,pE,Condition(function VV8))
call GroupEnumUnitsInRect(g,PE,Condition(function VV8))
call GroupEnumUnitsInRect(g,fE,Condition(function VW8))
call GroupEnumUnitsInRect(g,FE,Condition(function VX8))
call GroupEnumUnitsInRect(g,gE,Condition(function VY8))
call ZH7(g)
set g=null
return false
endfunction
function VA8 takes nothing returns boolean
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetAttacker()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and GetOwningPlayer(GetFilterUnit())!=A7 then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) then
set N54=GetFilterUnit()
else
set N24=GetFilterUnit()
endif
endif
return false
endfunction
function VB8 takes nothing returns nothing
local unit VC8=GetAttacker()
local unit m5=GetTriggerUnit()
local group g=ZI7()
set LP4="VB8"
call GroupEnumUnitsInRange(g,GetUnitX(VC8),GetUnitY(VC8),900,Condition(function VA8))
call ZH7(g)
call DisableTrigger(GetTriggeringTrigger())
if N54!=null then
call IssueTargetOrderById(VC8,$D000F,N54)
call GroupAddUnit(KU,VC8)
elseif IsUnitType(m5,UNIT_TYPE_HERO) and N24!=null then
call IssueTargetOrderById(VC8,$D000F,N24)
call GroupAddUnit(KU,VC8)
endif
call EnableTrigger(GetTriggeringTrigger())
set N54=null
set N24=null
set VC8=null
set m5=null
set g=null
endfunction
function V38 takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<1 then
call GroupRemoveUnit(KU,GetEnumUnit())
endif
if GetUnitCurrentOrder(GetEnumUnit())!=851983then
call GroupRemoveUnit(KU,GetEnumUnit())
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,N8[GetUnitAbilityLevel(GetEnumUnit(),G8)])
endif
endfunction
function V68 takes nothing returns boolean
call ForGroup(KU,function V38)
return false
endfunction
function VL8 takes string s returns nothing
set F3=F3+1
set j3[F3]=s
endfunction
function V18 takes nothing returns boolean
local integer i=1
set LP4="V18"
loop
exitwhen i>F3
call ExecuteFunc(j3[i])
set i=i+1
endloop
call ExecuteFunc("V08")
call ExecuteFunc("V58")
return false
endfunction
function V28 takes unit Z47 returns nothing
local trigger t=CreateTrigger()
set LP4="ENv"
call QF7(GetHandleId(GetTriggerUnit()),"DamageRegisterAlready",true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function V18))
set t=null
endfunction
function V_8 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and GetUnitTypeId(GetTriggerUnit())!=1211122232 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and R87(GetHandleId(GetTriggerUnit()),"DamageRegisterAlready")==false then
if N_4 and(GetUnitTypeId(GetTriggerUnit())!=1328558160 or(GetUnitTypeId(GetTriggerUnit())==1328558160 and O44))then
call V28(GetTriggerUnit())
endif
endif
return false
endfunction
function W48 takes nothing returns boolean
local unit u
local real W78
local boolean W88=AW7()
set LP4="W48"
set u=fP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=FP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=lP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=LP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=MP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=pP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=PP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=qP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=QP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=sP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=tP
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>1 then
set W78=GetUnitState(u,UNIT_STATE_MANA)
if W88 then
set W78=B97(W78-25,0)
else
set W78=B87(W78+5,300)
endif
endif
set u=null
return false
endfunction
function Ln takes nothing returns string
return OL4
endfunction
function LN takes nothing returns string
return A9
endfunction
function W98 takes player j8 returns string
return P[GetPlayerId(j8)]+YJ7(j8)+"|r"
endfunction
function WD8 takes player WE8 returns string
local string WF8=I2S(N34[GetPlayerId(WE8)])
local string WG8=WF8
set LP4="GetPlayerBonusGold"
if WE8==GetLocalPlayer()then
set WG8=Fx+WF8+"|r"
endif
return WG8
endfunction
function WH8 takes player WE8 returns string
local string WF8=I2S(NC4[GetPlayerId(WE8)])
local string WG8=WF8
set LP4="GetPlayerBonusXP"
if WE8==GetLocalPlayer()then
set WG8=Fx+WF8+"|r"
endif
return WG8
endfunction
function Lq takes player j8 returns string
return B9[GetPlayerId(j8)]
endfunction
function GM8 takes nothing returns nothing
local integer i=1
local multiboarditem GF8
set LP4="GM8"
loop
exitwhen i>NH4
if Lq(NG4[i])!="Here"then
set GF8=MultiboardGetItem(ND4,NE4[i],NF4[i])
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,"|c00555555"+Lq(NG4[i])+"|r")
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
endif
set i=i+1
endloop
endfunction
function WI8 takes player j8 returns string
local string GV=I2S(GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WJ8 takes player j8 returns string
local string GV=I2S(Zh[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WK8 takes player j8 returns string
local string GV=I2S(GetUnitLevel(G7[GetPlayerId(j8)]))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WM8 takes player j8 returns string
local string GV=I2S(H44[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WN8 takes player j8 returns string
local string GV=I2S(NU4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WO8 takes player j8 returns string
local string GV=I2S(NP4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WP8 takes player j8 returns string
local string GV=I2S(FU[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WQ8 takes player j8 returns string
local string GV=I2S(Q[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WR8 takes player j8 returns string
local string GV=I2S(U[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WS8 takes player j8 returns string
local string GV=I2S(S7[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WT8 takes player j8 returns string
local string GV=I2S(T7[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WU8 takes player j8 returns string
local string GV=I2S(R47(StringHash("Stats"+I2S(GetPlayerId(j8))),"NumOfNeutrals"))
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WV8 takes player j8 returns string
local string GV=I2S(NR4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WW8 takes player j8 returns string
local string GV=I2S(NS4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WX8 takes player j8 returns string
local string GV=I2S(NQ4[GetPlayerId(j8)])
local string Lr=GV
if j8==GetLocalPlayer()then
set Lr=Fx+GV+"|r"
endif
return Lr
endfunction
function WY8 takes player j8 returns string
local string LY
local string Lz
local string Lr
local integer k=gD[GetPlayerId(j8)]
local integer d=N14[GetPlayerId(j8)]
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set LY=I2S(k)
set Lz=I2S(d)
set Lr=LY+"/"+Lz
if j8==GetLocalPlayer()then
set Lr=Fx+LY+"|r/"+Fx+Lz+"|r"
endif
return Lr
endfunction
function WZ8 takes player j8 returns string
local integer L0=NT4[GetPlayerId(j8)]
local string GI8
local integer L1
local integer L2
set L1=(L0/60)-(1/2)
set L2=ModuloInteger(L0,60)
if(L2<$A)then
set GI8=I2S(L1)+":0"+I2S(L2)
else
set GI8=I2S(L1)+":"+I2S(L2)
endif
if j8==GetLocalPlayer()then
set GI8=Fx+GI8+"|r"
endif
return GI8
endfunction
function WA8 takes player p5,player m5 returns string
local string LY
local string Lz
local string Lr
local integer k=R47(StringHash("Stats"+I2S(GetPlayerId(p5))),"Killed "+I2S(GetPlayerId(m5)))
local integer d=R47(StringHash("Stats"+I2S(GetPlayerId(p5))),"Died To "+I2S(GetPlayerId(m5)))
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
set LY=I2S(k)
set Lz=I2S(d)
set Lr=LY+"/"+Lz
if p5==GetLocalPlayer()then
set Lr=Fx+LY+"|r/"+Fx+Lz+"|r"
endif
return Lr
endfunction
function WB8 takes boolean NK7 returns nothing
local integer O5=1
local integer i=0
local integer j=1
local item ON7=null
loop
exitwhen j>5
if NK7 then
set O5=GetPlayerId(Y7[j])
else
set O5=GetPlayerId(Z7[j])
endif
if G7[O5]!=null then
set i=0
loop
exitwhen i>5
set ON7=UnitItemInSlot(G7[O5],i)
if ON7!=null then
set GN7[O5*6+i]=OK7(ON7)
else
set GN7[O5*6+i]=-1
endif
set i=i+1
endloop
else
set i=0
loop
exitwhen i>5
set GN7[O5*6+i]=-1
set i=i+1
endloop
endif
set j=j+1
endloop
set ON7=null
endfunction
function WC8 takes nothing returns nothing
call WB8(true)
endfunction
function W38 takes nothing returns nothing
call WB8(false)
endfunction
function W68 takes integer O5,integer i returns string
if GN7[O5*6+i]<0 then
return"UI\\Widgets\\Console\\Undead\\undead-inventory-slotfiller.blp"
endif
return BU[GN7[O5*6+i]]
endfunction
function WL8 takes nothing returns nothing
local integer W18=HA4
local integer W08=HB4
local player array W58
local player array W28
local integer W_8
local integer X48
local integer X78=21+B47(W18,W08)+1
local integer X88=1+(W18+W08)*2
local multiboarditem X98
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer XD8
local integer XE8
set LP4=LP4+"(FinalScoreboardFunc)"
call ExecuteFunc("WC8")
call ExecuteFunc("W38")
call DisableTrigger(ES)
call DestroyMultiboard(R4)
call TriggerSleepAction(.0)
if W18>0 and W08>0 then
set X78=X78+2
endif
set ND4=CreateMultiboard()
call MultiboardSetItemsWidth(ND4,0)
call MultiboardSetRowCount(ND4,X78)
call MultiboardSetColumnCount(ND4,X88)
call MultiboardSetTitleText(ND4,(GetObjectName((1848657203)))+" "+" - "+(OL4))
call MultiboardMinimize(ND4,true)
call MultiboardSetItemsStyle(ND4,false,false)
call MultiboardDisplay(ND4,true)
call MultiboardMinimize(ND4,false)
call MultiboardSetTitleText(ND4,(GetObjectName((1848657203)))+" "+" - "+(OL4)+" - "+("|c00ff0303"+I2S(Q[GetPlayerId(Y7[0])])+"|r/|c0020c000"+I2S(U[GetPlayerId(Y7[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if WS7(Y7[i])or GetPlayerSlotState(Y7[i])==PLAYER_SLOT_STATE_LEFT then
set W58[x]=Y7[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if WS7(Z7[i])or GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_LEFT then
set W28[x]=Z7[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set X48=0
loop
exitwhen i>X78
set X98=MultiboardGetItem(ND4,i,X48)
call MultiboardSetItemWidth(X98,.075)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set W_8=0
set X48=0
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98," ")
call MultiboardReleaseItem(X98)
set X48=0
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,false)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,W98(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,W98(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set W_8=W_8+1
set X48=0
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,false)
call MultiboardReleaseItem(X98)
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,true)
call MultiboardSetItemValue(X98,WK8(W58[i]))
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W58[i]))])))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,true)
call MultiboardSetItemValue(X98,WK8(W28[i]))
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W28[i]))])))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set W_8=W_8+1
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848657218)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(1)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(2)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(1)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(2)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set W_8=W_8+1
set X48=0
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+" "+e)
call MultiboardReleaseItem(X98)
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(3)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(4)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(3)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(4)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set W_8=W_8+1
set X48=0
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+" "+e)
call MultiboardReleaseItem(X98)
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(5)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W58[i])),(6)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(5)-1)))
call MultiboardSetItemWidth(X98,.015)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(W68(GetPlayerId((W28[i])),(6)-1)))
call MultiboardSetItemWidth(X98,.054)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848657202)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WI8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WI8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848657201)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WQ8(W58[i])+"/"+WR8(W58[i])+"/"+WP8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WQ8(W28[i])+"/"+WR8(W28[i])+"/"+WP8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+GetObjectName(1848658517)+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WD8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WD8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+GetObjectName(1848658758)+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WH8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WH8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848657200)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WM8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WM8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656980)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WY8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WY8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656986)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WS8(W58[i])+"/"+WT8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WS8(W28[i])+"/"+WT8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656985)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WU8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WU8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656981)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WN8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WN8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656982)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WZ8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WZ8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656983)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WO8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WO8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656974)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WJ8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WJ8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656952)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WV8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WV8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656969)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WW8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WW8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656973)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WX8(W58[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,WX8(W28[i]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
if W18>0 and W08>0 then
set X48=0
set XD8=W_8
set XE8=X48
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656972)))+e)
call MultiboardReleaseItem(X98)
set W_8=XD8
set x=1
loop
exitwhen x>W18
set X48=0
set W_8=XD8
set i=1
loop
exitwhen i>W08
set X48=x+(x-1)
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W58[x]))])))
call MultiboardSetItemWidth(X98,.01)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,true)
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W28[i]))])))
call MultiboardSetItemValue(X98," "+WA8(W58[x],W28[i]))
call MultiboardSetItemWidth(X98,.059)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set x=x+1
endloop
set x=W18+1
loop
exitwhen x>(W08+W18)
set X48=0
set W_8=XD8
set i=1
loop
exitwhen i>W18
set X48=x+(x-1)
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,false,true)
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W28[x-W18]))])))
call MultiboardSetItemWidth(X98,.01)
call MultiboardReleaseItem(X98)
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,true)
call MultiboardSetItemIcon(X98,(Y07(G7[GetPlayerId((W58[i]))])))
call MultiboardSetItemValue(X98," "+WA8(W28[x-W18],W58[i]))
call MultiboardSetItemWidth(X98,.059)
call MultiboardReleaseItem(X98)
set i=i+1
endloop
set x=x+1
endloop
endif
set W_8=W_8+1
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656730)))+e)
call MultiboardReleaseItem(X98)
set X48=0
set i=1
loop
exitwhen i>W18
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,(B9[GetPlayerId((W58[i]))]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set NH4=NH4+1
set NE4[NH4]=W_8
set NF4[NH4]=X48
set NG4[NH4]=W58[i]
set i=i+1
endloop
set i=1
loop
exitwhen i>W08
set X48=X48+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,(B9[GetPlayerId((W28[i]))]))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
set NH4=NH4+1
set NE4[NH4]=W_8
set NF4[NH4]=X48
set NG4[NH4]=W28[i]
set i=i+1
endloop
set X48=0
set W_8=W_8+1
set X98=MultiboardGetItem(ND4,W_8,X48)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,c0+(GetObjectName((1848656953)))+e)
call MultiboardReleaseItem(X98)
set X98=MultiboardGetItem(ND4,W_8,X48+1)
call MultiboardSetItemStyle(X98,true,false)
call MultiboardSetItemValue(X98,(A9))
call MultiboardSetItemWidth(X98,.07)
call MultiboardReleaseItem(X98)
call MultiboardMinimize(ND4,true)
call MultiboardMinimize(ND4,false)
endfunction
function XF8 takes nothing returns string
return OL4
endfunction
function mD takes player j8 returns string
return Y07(G7[GetPlayerId(j8)])
endfunction
function me takes player j8,integer Lp returns string
return FY8(UnitItemInSlot(G7[GetPlayerId(j8)],Lp-1))
endfunction
function mE takes player j8 returns string
return P[GetPlayerId(j8)]+YJ7(j8)+"|r"
endfunction
function mf takes player j8 returns string
return I2S(GetPlayerState(j8,PLAYER_STATE_RESOURCE_GOLD))
endfunction
function mF takes player p returns string
return I2S(Zh[GetPlayerId(p)])
endfunction
function mg takes player p returns string
return I2S(GetUnitLevel(G7[GetPlayerId(p)]))
endfunction
function mG takes player p returns string
return I2S(R47(StringHash("Stats"+I2S(GetPlayerId(p))),"NumOfWards"))
endfunction
function mh takes player j8 returns string
return I2S(NU4[GetPlayerId(j8)])
endfunction
function mH takes player j8 returns string
return I2S(NP4[GetPlayerId(j8)])
endfunction
function mi takes player j8 returns string
return I2S(Q[GetPlayerId(j8)])
endfunction
function mI takes player j8 returns string
return I2S(U[GetPlayerId(j8)])
endfunction
function mj takes player j8 returns string
return I2S(S7[GetPlayerId(j8)])
endfunction
function mJ takes player j8 returns string
return I2S(T7[GetPlayerId(j8)])
endfunction
function mk takes player p returns string
return I2S(R47(StringHash("Stats"+I2S(GetPlayerId(p))),"NumOfNeutrals"))
endfunction
function mK takes player j8 returns string
return I2S(NR4[GetPlayerId(j8)])
endfunction
function ml takes player j8 returns string
return I2S(NS4[GetPlayerId(j8)])
endfunction
function mL takes player j8 returns string
return I2S(NQ4[GetPlayerId(j8)])
endfunction
function mm takes player j8 returns string
local integer k=gD[GetPlayerId(j8)]
local integer d=N14[GetPlayerId(j8)]
set LP4="mm"
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function mM takes player j8 returns string
local integer L0=NT4[GetPlayerId(j8)]
local string GI8
local integer L1
local integer L2
set LP4="mM"
set L1=(L0/60)-(1/2)
set L2=ModuloInteger(L0,60)
if(L2<$A)then
set GI8=I2S(L1)+":0"+I2S(L2)
else
set GI8=I2S(L1)+":"+I2S(L2)
endif
return GI8
endfunction
function mn takes player p5,player m5 returns string
local integer k=R47(StringHash("Stats"+I2S(GetPlayerId(p5))),"Killed "+I2S(GetPlayerId(m5)))
local integer d=R47(StringHash("Stats"+I2S(GetPlayerId(p5))),"Died To "+I2S(GetPlayerId(m5)))
set LP4="mn"
if k<1 then
set k=0
endif
if d<1 then
set d=0
endif
return I2S(k)+"/"+I2S(d)
endfunction
function mN takes player p5 returns string
local string mo
set LP4="mN"
if A47(G7[GetPlayerId(p5)])then
set mo=I2S(R2I(TimerGetRemaining(T[GetPlayerId(p5)])))
else
set mo=" "
endif
return mo
endfunction
function XG8 takes player p5 returns string
local real r=(TimerGetRemaining(N74[GetPlayerId((p5))]))
local string XH8
set LP4="Eyv"
if r>0 then
set XH8=I2S(R2I(r))
else
set XH8=" "
endif
return XH8
endfunction
function XI8 takes integer mp,integer mP returns nothing
set NI4=CreateMultiboard()
call MultiboardSetItemsWidth(NI4,0)
call MultiboardSetRowCount(NI4,mp)
call MultiboardSetColumnCount(NI4,mP)
call MultiboardSetTitleText(NI4,(GetObjectName((1848657203)))+" "+" - "+XF8())
call MultiboardMinimize(NI4,true)
call MultiboardSetItemsStyle(NI4,false,false)
if GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4 then
call MultiboardDisplay(NI4,true)
endif
endfunction
function mq takes nothing returns string
return"|c00ff0303"+I2S(Q[GetPlayerId(Y7[0])])+"|r/|c0020c000"+I2S(U[GetPlayerId(Y7[0])])+"|r"
endfunction
function XJ8 takes player XK8 returns string
return I2S(FU[GetPlayerId(XK8)])
endfunction
function XM8 takes nothing returns nothing
local integer FT8=HA4
local integer FS8=HB4
local player array XN8
local player array XO8
local integer XP8
local integer XQ8
local integer XR8=1+19+B47(FT8,FS8)+2
local integer XS8=1+(FT8+FS8)*2
local multiboarditem GF8
local integer i
local integer x
local integer curRow1
local integer curRow2
local string e="|r"
local string c0="|cff99ccff"
local integer XT8
local integer XU8
local integer XV8=$83
local integer XW8=$8B
local integer XX8=$8B
local integer XY8=$FF
local integer UR8=0
local string US8=""
local string UT8=""
local integer UU8=0
local integer UV8=0
local integer r
local string U48
set LP4="XM8"
if FT8>0 and FS8>0 then
set XR8=XR8+2
endif
if GetTriggerExecCount(GetTriggeringTrigger())==1 then
call XI8(XR8,XS8)
endif
if GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4 then
call MultiboardDisplay(NI4,true)
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(T[GetPlayerId(Y7[i])]))
if r>0 then
set UR8=UR8+UE8(r)
if UU8==0 then
if r<$A then
set US8=P[GetPlayerId(Y7[i])]+"0"+I2S(r)+" |r"
else
set US8=P[GetPlayerId(Y7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set US8=US8+Hj+"| |r"+P[GetPlayerId(Y7[i])]+"0"+I2S(r)+" |r"
else
set US8=US8+Hj+"| |r"+P[GetPlayerId(Y7[i])]+I2S(r)+" |r"
endif
endif
set UU8=UU8+1
endif
set i=i+1
endloop
if UU8>0 then
set US8=Hj+"[Sentinel: |r"+US8+Hj+"]|r"
endif
set i=1
loop
exitwhen i>5
set r=R2I(TimerGetRemaining(T[GetPlayerId(Z7[i])]))
if r>0 then
set UR8=UR8+UE8(r)
if UV8==0 then
if r<$A then
set UT8=P[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set UT8=P[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
else
if r<$A then
set UT8=UT8+Hj+"| |r"+P[GetPlayerId(Z7[i])]+"0"+I2S(r)+" |r"
else
set UT8=UT8+Hj+"| |r"+P[GetPlayerId(Z7[i])]+I2S(r)+" |r"
endif
endif
set UV8=UV8+1
endif
set i=i+1
endloop
if UV8>0 then
set UT8=Hj+"[Scourge: |r"+UT8+Hj+"]|r"
endif
call MultiboardSetTitleText(NI4,US8+" "+UT8+" "+GetObjectName(1848657203)+" "+" - "+(OL4)+" - "+("|c00ff0303"+I2S(Q[GetPlayerId(Y7[0])])+"|r/|c0020c000"+I2S(U[GetPlayerId(Y7[0])])+"|r"))
set x=1
set i=1
loop
exitwhen i>5
if WS7(Y7[i])or GetPlayerSlotState(Y7[i])==PLAYER_SLOT_STATE_LEFT then
set XN8[x]=Y7[i]
set x=x+1
endif
set i=i+1
endloop
set x=1
set i=1
loop
exitwhen i>5
if WS7(Z7[i])or GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_LEFT then
set XO8[x]=Z7[i]
set x=x+1
endif
set i=i+1
endloop
set i=0
set XQ8=0
loop
exitwhen i>XR8
set GF8=MultiboardGetItem(NI4,i,XQ8)
call MultiboardSetItemWidth(GF8,.075)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XP8=0
set XQ8=0
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8," ")
call MultiboardReleaseItem(GF8)
set XQ8=0
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,false)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mE(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mE(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XP8=XP8+1
set XQ8=0
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,false)
call MultiboardReleaseItem(GF8)
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemValue(GF8,"("+mg(XN8[i])+")")
call MultiboardSetItemIcon(GF8,mD(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemValue(GF8,"("+mg(XO8[i])+")")
call MultiboardSetItemIcon(GF8,mD(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XP8=XP8+1
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Items"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],1))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],2))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],1))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],2))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XP8=XP8+1
set XQ8=0
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+" "+e)
call MultiboardReleaseItem(GF8)
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],3))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],4))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],3))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],4))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XP8=XP8+1
set XQ8=0
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+" "+e)
call MultiboardReleaseItem(GF8)
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],5))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XN8[i],6))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],5))
call MultiboardSetItemWidth(GF8,.015)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,me(XO8[i],6))
call MultiboardSetItemWidth(GF8,.054)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Current Gold"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mf(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mf(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Hero K/D/A"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mi(XN8[i])+"/"+mI(XN8[i])+"/"+XJ8(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mi(XO8[i])+"/"+mI(XO8[i])+"/"+XJ8(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Wards"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mG(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mG(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Towers Kills"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mm(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mm(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Creep Stats"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mj(XN8[i])+"/"+mJ(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mj(XO8[i])+"/"+mJ(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Neutral Kills"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mk(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mk(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Hero Kill Gold"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mh(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mh(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Time Dead"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mM(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mM(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Gold Lost"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mH(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mH(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Consumables"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mF(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mF(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Double Kills"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mK(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mK(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Triple Kills"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,ml(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,ml(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Best Spree"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mL(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,mL(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
if FT8>0 and FS8>0 then
set XQ8=0
set XT8=XP8
set XU8=XQ8
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Kill Details"+e)
call MultiboardReleaseItem(GF8)
set XP8=XT8
set x=1
loop
exitwhen x>FT8
set XQ8=0
set XP8=XT8
set i=1
loop
exitwhen i>FS8
set XQ8=x+(x-1)
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,mD(XN8[x]))
call MultiboardSetItemWidth(GF8,.01)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemIcon(GF8,mD(XO8[i]))
call MultiboardSetItemValue(GF8," "+mn(XN8[x],XO8[i]))
call MultiboardSetItemWidth(GF8,.059)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set x=x+1
endloop
set x=FT8+1
loop
exitwhen x>(FS8+FT8)
set XQ8=0
set XP8=XT8
set i=1
loop
exitwhen i>FT8
set XQ8=x+(x-1)
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,false,true)
call MultiboardSetItemIcon(GF8,mD(XO8[x-FT8]))
call MultiboardSetItemWidth(GF8,.01)
call MultiboardReleaseItem(GF8)
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemIcon(GF8,mD(XN8[i]))
call MultiboardSetItemValue(GF8," "+mn(XO8[x-FT8],XN8[i]))
call MultiboardSetItemWidth(GF8,.059)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set x=x+1
endloop
endif
set XP8=XP8+1
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+GetObjectName(1848658003)+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemValueColor(GF8,XV8,XW8,XX8,XY8)
if mN(XN8[i])==" " then
call MultiboardSetItemStyle(GF8,true,false)
else
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemIcon(GF8,(Y07(G7[GetPlayerId((XN8[i]))])))
endif
call MultiboardSetItemValue(GF8,XG8(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemValueColor(GF8,XV8,XW8,XX8,XY8)
if mN(XO8[i])==" " then
call MultiboardSetItemStyle(GF8,true,false)
else
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemIcon(GF8,(Y07(G7[GetPlayerId((XO8[i]))])))
endif
call MultiboardSetItemValue(GF8,XG8(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,c0+"Respawn"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
if mN(XN8[i])==" "then
call MultiboardSetItemStyle(GF8,true,false)
else
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemIcon(GF8,mD(XN8[i]))
endif
call MultiboardSetItemValue(GF8,mN(XN8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
if mN(XO8[i])==" "then
call MultiboardSetItemStyle(GF8,true,false)
else
call MultiboardSetItemStyle(GF8,true,true)
call MultiboardSetItemIcon(GF8,mD(XO8[i]))
endif
call MultiboardSetItemValue(GF8,mN(XO8[i]))
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,"|c00dd8dff"+"AI Actions"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
set U48=T58(GetPlayerId(XN8[i]),true)
if XN8[i]==QS4 then
set U48="|c00ffcc00- LEADER -|r"
endif
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,U48)
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
set U48=T58(GetPlayerId(XO8[i]),true)
if XO8[i]==QT4 then
set U48="|c00ffcc00- LEADER -|r"
endif
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,U48)
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set XQ8=0
set XP8=XP8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,"|c0020c060"+"Exp.|r - "+"|c00ffcc60"+"Gold|r"+e)
call MultiboardReleaseItem(GF8)
set XQ8=0
set i=1
loop
exitwhen i>FT8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(XN8[i])-100.))+"%|r - "+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(XN8[i])])+"|r"
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,U48)
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
set i=1
loop
exitwhen i>FS8
set XQ8=XQ8+1
set GF8=MultiboardGetItem(NI4,XP8,XQ8)
set U48="|c0020c060"+"+"+I2S(R2I(GetPlayerHandicapXPBJ(XO8[i])-100.))+"%|r - "+"|c00ffcc60"+"+"+I2S(X_4[48+GetPlayerId(XO8[i])])+"|r"
call MultiboardSetItemStyle(GF8,true,false)
call MultiboardSetItemValue(GF8,U48)
call MultiboardSetItemWidth(GF8,.07)
call MultiboardReleaseItem(GF8)
set i=i+1
endloop
endfunction
function XZ8 takes integer p5,integer m5 returns boolean
local integer i=Tb-1
local real XA8=0
local real YN7=(TimerGetElapsed(V))
local integer XB8=0
set LP4="Xev"
loop
exitwhen i==Tb or XA8>wb or XB8>$C8
if i==0 then
set i=8000-1
endif
set XB8=XB8+1
set XA8=YN7-Mb[i]
if pb[i]==p5 and Qb[i]==m5 and XA8<wb then
set pb[i]=0
set Qb[i]=0
return true
endif
set i=i-1
endloop
return false
endfunction
function V08 takes nothing returns nothing
local integer p5=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
local integer m5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local real BD7=GetEventDamage()
set Mb[Tb]=(TimerGetElapsed(V))
set pb[Tb]=p5
set Qb[Tb]=m5
set Tb=Tb+1
if Tb==8000 then
set Tb=1
endif
endfunction
function XC8 takes unit S4,unit X38 returns string
local integer i=1
local integer X68=GetPlayerId(GetOwningPlayer(S4))
local integer XL8=GetPlayerId(GetOwningPlayer(X38))
local integer X18
local string X08=" "+GetObjectName(1848658521)+" "
local boolean X58=false
set LP4="Xrv"
loop
exitwhen i>5
if WM7(GetOwningPlayer(X38))then
set X18=GetPlayerId(Y7[i])
else
set X18=GetPlayerId(Z7[i])
endif
if XL8!=X18 and XZ8(X18,X68)then
set FU[X18]=FU[X18]+1
call E58("Assist"+I2S(X18),X68)
if X58 then
set X08=X08+"/"+P[X18]+(KY4[GetPlayerId((Player(X18)))])+"|r"
else
set X08=X08+P[X18]+(KY4[GetPlayerId((Player(X18)))])+"|r"
endif
set X58=true
endif
set i=i+1
endloop
if X58 then
return X08
endif
return" "
endfunction
function X28 takes integer p5,integer m5 returns boolean
local integer i=Tb-1
local real XA8=0
local real YN7=(TimerGetElapsed(V))
local integer XB8=0
set LP4="XOv"
loop
exitwhen i==Tb or XA8>wb or XB8>$C8
if i==0 then
set i=8000-1
endif
set XB8=XB8+1
set XA8=YN7-Mb[i]
if pb[i]==p5 and Qb[i]==m5 and XA8<wb then
return true
endif
set i=i-1
endloop
return false
endfunction
function X_8 takes unit S4,unit X38 returns boolean
local integer i=1
local integer X68=GetPlayerId(GetOwningPlayer(S4))
local integer XL8=GetPlayerId(GetOwningPlayer(X38))
local integer X18
local string X08=" Assists: "
local boolean X58=false
local integer x=1
set LP4="Assist_GetPlayers"
set IU[1]=null
set IU[2]=null
set IU[3]=null
set IU[4]=null
set IU[5]=null
loop
exitwhen i>5
if WM7(GetOwningPlayer(X38))then
set X18=GetPlayerId(Y7[i])
else
set X18=GetPlayerId(Z7[i])
endif
if XL8!=X18 and X28(X18,X68)then
set IU[x]=Player(X18)
set x=x+1
set X58=true
endif
set i=i+1
endloop
return X58
endfunction
function Y48 takes unit S4,unit X38 returns string
local integer i=1
local integer X68=GetPlayerId(GetOwningPlayer(S4))
local integer XL8=GetPlayerId(GetOwningPlayer(X38))
local integer X18
local string X08=""
local boolean X58=false
set LP4="Assist_GetString"
loop
exitwhen i>5
if WM7(GetOwningPlayer(X38))then
set X18=GetPlayerId(Y7[i])
else
set X18=GetPlayerId(Z7[i])
endif
if XL8!=X18 and X28(X18,X68)then
if X58 then
set X08=X08+"/"+P[X18]+(KY4[GetPlayerId((Player(X18)))])+"|r"
else
set X08=X08+P[X18]+(KY4[GetPlayerId((Player(X18)))])+"|r"
endif
set X58=true
endif
set i=i+1
endloop
if X58 then
return X08
endif
return" "
endfunction
function Y78 takes unit S4,unit X38 returns integer
local integer i=1
local integer X68=GetPlayerId(GetOwningPlayer(S4))
local integer XL8=GetPlayerId(GetOwningPlayer(X38))
local integer X18
local integer XB8=0
set LP4="Assist_GetCount"
loop
exitwhen i>5
if WM7(GetOwningPlayer(X38))then
set X18=GetPlayerId(Y7[i])
else
set X18=GetPlayerId(Z7[i])
endif
if XL8!=X18 and X28(X18,X68)then
set XB8=XB8+1
endif
set i=i+1
endloop
return XB8
endfunction
function Y88 takes unit Y98 returns boolean
return GetUnitTypeId(Y98)==1211117641 or GetUnitTypeId(Y98)==1211117642
endfunction
function YD8 takes unit Y98 returns boolean
local integer RP7=GetHandleId(GetOwningPlayer(Y98))
local unit GX8=QA7(RP7,"Kobold0")
local unit GY8=QA7(RP7,"Kobold1")
local unit GZ8=QA7(RP7,"Kobold2")
local unit GA8=QA7(RP7,"Kobold3")
local unit GB8=QA7(RP7,"Kobold4")
set LP4="AnyKoboldQuickRevive"
if GetUnitAbilityLevel(GX8,1093685078)!=0 or GetUnitAbilityLevel(GY8,1093685078)!=0 or GetUnitAbilityLevel(GZ8,1093685078)!=0 or GetUnitAbilityLevel(GA8,1093685078)!=0 or GetUnitAbilityLevel(GB8,1093685078)!=0 then
return true
endif
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
return false
endfunction
function YE8 takes unit Y98 returns boolean
local integer i=0
local integer RP7=GetHandleId(GetOwningPlayer(Y98))
local unit YF8=QA7(RP7,"Kobold0")
set LP4="Deathtrigger_KoboldHasAegis"
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(YF8,i))==SU[T0]and GetItemCharges(UnitItemInSlot(YF8,i))>0 then
set YF8=null
return true
endif
set i=i+1
endloop
set YF8=null
return false
endfunction
function YG8 takes unit Y98,location YH8 returns nothing
//local integer tPlayerID = GetPlayerId(GetOwningPlayer(Y98))
local integer RP7=GetHandleId(GetOwningPlayer(Y98))
local unit GX8=QA7(RP7,"Kobold0")
local unit GY8=QA7(RP7,"Kobold1")
local unit GZ8=QA7(RP7,"Kobold2")
local unit GA8=QA7(RP7,"Kobold3")
local unit GB8=QA7(RP7,"Kobold4")
set LP4="Deathtrigger_ReviveKobold"
//call DisplayTimedTextToPlayer( Player(SelfIndex),0,0,5, "|cff0042ffcurrent  |r" + I2S(tPlayerID) )
//call BJDebugMsg(I2S(tPlayerID)+"AAAAA")
if GX8!=null then
call ReviveHeroLoc(GX8,YH8,true)
call GN8(GX8)
endif
if GY8!=null then
call ReviveHeroLoc(GY8,YH8,true)
call GN8(GY8)
endif
if GZ8!=null then
call ReviveHeroLoc(GZ8,YH8,true)
call GN8(GZ8)
endif
if GA8!=null then
call ReviveHeroLoc(GA8,YH8,true)
call GN8(GA8)
endif
if GB8!=null then
call ReviveHeroLoc(GB8,YH8,true)
call GN8(GB8)
endif
set GB8=null
set GA8=null
set GZ8=null
set GY8=null
set GX8=null
endfunction
function YI8 takes unit ZO7,real YJ8,boolean YK8 returns nothing
set NO4=NO4+1
set NK4[NO4]=ZO7
set NM4[NO4]=O97()+YJ8
set NN4[NO4]=YK8
endfunction
function YM8 takes integer i returns nothing
local unit Y98=NK4[i]
local player p4=GetOwningPlayer(Y98)
local location YH8
set LP4="Xgv"
if WN7(p4)then
set YH8=GetRectCenter(C9)
else
set YH8=GetRectCenter(L9)
endif
if L8==false and A47(Y98)then
call GQ8(Y98,p4,GetLocationX(YH8),GetLocationY(YH8),true)
if GS8(Y98)==false or GetUnitAbilityLevel(Y98,1093684567)==0 then
call ReviveHeroLoc(Y98,YH8,true)
else
call YG8(Y98,YH8)
endif
call SetUnitState(Y98,UNIT_STATE_MANA,GetUnitState(Y98,UNIT_STATE_MAX_MANA))
endif
call RemoveLocation(YH8)
call T68(i)
set Y98=null
set p4=null
set YH8=null
endfunction
function YN8 takes nothing returns boolean
local real YN7=O97()
local integer i
set LP4="YN8"
set i=1
loop
exitwhen i>NO4
if NM4[i]<YN7 and NM4[i]!=0 then
call YM8(i)
endif
if NM4[i]!=0 and A47(NK4[i])==false then
set NK4[i]=null
set NM4[i]=0
set NN4[i]=false
endif
set i=i+1
endloop
return false
endfunction
function YO8 takes unit u returns string
local string s=GetObjectName(1848657487)
set LP4="GetString_BuyBack"
set s=F78(s,"$hero",P[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r")
return s
endfunction
function YP8 takes unit CP7 returns boolean
if GetOwningPlayer(CP7)!=GetLocalPlayer()then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$F,YO8(G7[GetPlayerId(GetOwningPlayer(CP7))]))
endif
return false
endfunction
function YQ8 takes nothing returns nothing
if PH7(GetEnumUnit(),SU[DH4])!=null then
call SetItemCharges(PH7(GetEnumUnit(),SU[DH4]),GetItemCharges(PH7(GetEnumUnit(),SU[DH4]))+1)
endif
endfunction
function YR8 takes nothing returns boolean
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false then
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(SP4))and PH7(GetFilterUnit(),SU[DH4])!=null then
return true
endif
endif
return false
endfunction
function YS8 takes nothing returns boolean
local item i
local integer YT8
if S04==0 and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(S14))then
if PH7(GetFilterUnit(),SU[DX4])!=null then
set S04=S04+1
set YT8=GetItemCharges(PH7(GetFilterUnit(),SU[DX4]))
if YT8==0 then
set YT8=2
else
set YT8=YT8+1
endif
call SetItemCharges(PH7(GetFilterUnit(),SU[DX4]),YT8)
endif
endif
set i=null
return false
endfunction
function YU8 takes unit u,unit YV8 returns nothing
local group g=ZI7()
set SP4=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$659,Condition(function YR8))
if IsUnitAlly(u,GetOwningPlayer(YV8))==false then
call GroupAddUnit(g,YV8)
endif
call ForGroup(g,function YQ8)
call ZH7(g)
set g=null
endfunction
function YW8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit YX8=(LoadUnitHandle(C7,(JZ7),(335)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real x
local real y
local real a
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerUnit()!=YX8 then
call KillUnit(YX8)
endif
else
set a=GetUnitFacing(J67)*bj_RADTODEG
set x=GetUnitX(J67)+75
set y=GetUnitY(J67)+75
call SetUnitX(YX8,x)
call SetUnitY(YX8,y)
call IssueTargetOrderById(YX8,$D000F,J67)
endif
set t=null
set YX8=null
set J67=null
return false
endfunction
function YY8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit YX8
if GetSummoningUnit()==DA8 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set YX8=GetSummonedUnit()
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterDeathEvent(t,YX8)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function YW8))
call SaveUnitHandle(C7,(JZ7),(335),(YX8))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call UnitAddAbility(YX8,1097625443)
call SetUnitPosition(YX8,GetUnitX(J67)+100,GetUnitY(J67)+100)
call IssueTargetOrderById(YX8,$D000F,J67)
call SetUnitMoveSpeed(YX8,522)
endif
set t=null
set J67=null
set CP7=null
set DA8=null
return false
endfunction
function YZ8 takes unit CP7,unit YV8 returns nothing
local unit J67=YV8
local unit DA8
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
if EC8(J67)then
set J67=(G7[GetPlayerId(GetOwningPlayer((J67)))])
endif
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function YY8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call Z27(DA8,1093813559)
call IssueTargetOrderById(DA8,$D0132,J67)
set t=null
set J67=null
set DA8=null
endfunction
function YA8 takes nothing returns boolean
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetFilterUnit())==false then
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(SP4))==false and PH7(GetFilterUnit(),SU[WB])!=null then
endif
endif
return false
endfunction
function YB8 takes unit u returns nothing
local group g=ZI7()
set SP4=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$659,Condition(function YA8))
call ZH7(g)
set g=null
endfunction
function YC8 takes unit u returns nothing
local group g=ZI7()
set LP4="StaffOfHealing_HeroDied"
set S04=0
set S14=u
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$591,Condition(function YS8))
call ZH7(g)
set S04=0
set g=null
endfunction
function Y38 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer Y68=R47(RP7,"side")
local integer i=1
local player p
local string M6
set LP4="Y38"
loop
exitwhen i>5
if Y68==0 then
set p=Y7[i]
set M6=P[GetPlayerId(Y7[0])]+(GetObjectName((1848652622)))+"|r "+(GetObjectName((1848652624)))+" "+P[GetPlayerId(Y7[0])]+(GetObjectName((1848652625)))+"|r"
else
set p=Z7[i]
set M6=P[GetPlayerId(Z7[0])]+(GetObjectName((1848652623)))+"|r "+(GetObjectName((1848652624)))+" "+P[GetPlayerId(Z7[0])]+(GetObjectName((1848652625)))+"|r"
endif
call DisplayTimedTextToPlayer(p,0,0,$A,M6)
call CK7(XO,p)
set i=i+1
endloop
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function YL8 takes integer Y68 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="XMv"
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function Y38))
call Q97(RP7,"side",Y68)
set t=null
endfunction
function Y18 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer Y08=R47(RP7,"soundIndex")
local string M6=R97(RP7,"msg")
set LP4="Y18"
if Y08==1 then
call CJ7(nX)
elseif Y08==2 then
call CJ7(CR)
elseif Y08==3 then
call CJ7(EP)
elseif Y08==4 then
call CJ7(GP)
endif
call YM7(C8,10.,M6)
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function Y58 takes string M6,integer Y08 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="Deathtrigger_ExtraKillMsg"
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function Y18))
call QE7(RP7,"msg",M6)
call Q97(RP7,"soundIndex",Y08)
set t=null
endfunction
function Y28 takes player Y_8,integer Z48,unit Y98 returns nothing
local texttag t=CreateTextTag()
local string s
set LP4="GiveGoldWithAnimation"
call SetPlayerState(Y_8,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Y_8,PLAYER_STATE_RESOURCE_GOLD)+Z48)
call SetTextTagText(t,"+"+I2S(Z48),.025)
call SetTextTagPosUnit(t,Y98,0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==Y_8 then
call SetTextTagVisibility(t,true)
set s="UI\\Feedback\\GoldCredit\\GoldCredit.mdl"
else
call SetTextTagVisibility(t,false)
set s=""
endif
if GetUnitState(Y98,UNIT_STATE_LIFE)>.5 then
call DestroyEffect(AddSpecialEffectTarget(s,Y98,"overhead"))
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endfunction
function Z78 takes unit Y98,unit Z88,real Z98 returns nothing
local integer i=1
local integer ZD8=0
set LP4="Assist_SplitGold"
call X_8(Y98,Z88)
loop
exitwhen i>5
if IU[i]!=null then
set ZD8=ZD8+1
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
if IU[i]!=null then
set VF4[GetPlayerId(IU[i])]=VF4[GetPlayerId(IU[i])]+R2I(Z98/ZD8)
call Y28(IU[i],R2I(Z98/ZD8),G7[GetPlayerId(IU[i])])
endif
set i=i+1
endloop
endfunction
function ZE8 takes player ZF8,integer Z48 returns nothing
local integer T8=1
local integer Jg
set LP4="Xuv"
if WM7(ZF8)then
set Jg=P8(W7)
else
set Jg=P8(X7)
endif
if WM7(ZF8)then
loop
exitwhen T8>5
if WR7(Y7[T8])then
set VF4[GetPlayerId(Y7[T8])]=VF4[GetPlayerId(Y7[T8])]+Z48/Jg
call Y28(Y7[T8],Z48/Jg,G7[GetPlayerId(Y7[T8])])
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>5
if WR7(Z7[T8])then
set VF4[GetPlayerId(Z7[T8])]=VF4[GetPlayerId(Z7[T8])]+Z48/Jg
call Y28(Z7[T8],Z48/Jg,G7[GetPlayerId(Z7[T8])])
endif
set T8=T8+1
endloop
endif
endfunction
function ZG8 takes unit Y98,integer ZH8 returns nothing
local player p4=GetOwningPlayer(Y98)
set LP4="TakeGoldWithAnimation"
call SetPlayerState(p4,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p4,PLAYER_STATE_RESOURCE_GOLD)-ZH8)
endfunction
function m4 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429043 then
call KillUnit(GetFilterUnit())
return true
endif
return false
endfunction
function ZI8 takes nothing returns nothing
local boolexpr hP=Condition(function m4)
local group FP8=ZI7()
set LP4="ZI8"
call GroupEnumUnitsInRect(FP8,bj_mapInitialPlayableArea,hP)
call ZH7(FP8)
set FP8=null
endfunction
function ZJ8 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and GetUnitTypeId(GetTriggerUnit())!=1311788365 then
if GetUnitTypeId(GetTriggerUnit())==1211117642 and YE8(GetTriggerUnit())then
return false
endif
return true
endif
return false
endfunction
function ZK8 takes player ZM8,player Y_8,unit Z88 returns boolean
return Z88==null or GetKillingUnit()==null or(WM7(ZM8)and WM7(Y_8))or(WN7(ZM8)and WN7(Y_8))
endfunction
function ZN8 takes nothing returns nothing
if FA8(GetUnitTypeId(GetEnumUnit()))==false then
set N64=N64+1
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set NL4=NL4+1
endif
endif
endfunction
function ZO8 takes nothing returns nothing
if(GetUnitTypeId((GetEnumUnit()))==1211117642)==false and FA8(GetUnitTypeId(GetFilterUnit()))==false then
call AddHeroXP(GetEnumUnit(),NB4,true)
set NC4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=NC4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NB4
if GetOwningPlayer(GetKillingUnit())!=GetOwningPlayer(GetEnumUnit())then
set N34[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=N34[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NA4
set VF4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=VF4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]+NA4
call Y28(GetOwningPlayer(GetEnumUnit()),NA4,GetEnumUnit())
endif
endif
endfunction
function ZP8 takes nothing returns boolean
local integer DB8
local integer ZQ8=0
local integer ZR8=0
local group g
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitTypeId((GetTriggerUnit()))==1211117642)==false and FA8(GetUnitTypeId(GetTriggerUnit()))==false then
set DB8=GetHeroLevel(GetTriggerUnit())
set NB4=0
set NA4=0
set g=ZI7()
set N64=0
set NL4=0
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$401,Condition(function L07))
call ForGroup(g,function ZN8)
if N64==1 then
set ZQ8=20*DB8+120
elseif N64==2 then
set ZQ8=$F*DB8+90
elseif N64==3 then
set ZQ8=7*DB8+30
elseif N64==4 then
set ZQ8=6*DB8+$F
elseif N64==5 then
set ZQ8=5*DB8+$A
endif
if NL4==1 then
set ZR8=$C*DB8+125
elseif NL4==2 then
set ZR8=$A*DB8+40
elseif NL4==3 then
set ZR8=6*DB8
elseif NL4==4 then
set ZR8=6*DB8
elseif NL4==5 then
set ZR8=6*DB8
endif
if X4 then
endif
set NB4=ZQ8
set NA4=ZR8
call ForGroup(g,function ZO8)
call ZH7(g)
set g=null
endif
return false
endfunction
function ZS8 takes nothing returns nothing
local boolean ZT8=false
local unit Y98=GetDyingUnit()
local unit Z88=GetKillingUnit()
local player Y_8=GetOwningPlayer(Z88)
local player ZM8=GetOwningPlayer(Y98)
local integer Z48=0
local integer ZU8=0
local boolean ZV8=false
local string ZW8=""
local string ZX8=""
local string ZY8=""
local string MidText
local integer x
local string ZZ8
local string ZA8
local string ZB8
local string ZC8
local boolean YK8=false
local real Z38=1
local real Z68=1
local real ZL8=1
local real Z18=1
local real Z08=0
local trigger t
local integer Z58
local integer Z28
local item Z_8
local integer id
local integer A48=GetPlayerState(ZM8,PLAYER_STATE_RESOURCE_GOLD)
local integer A78=A48-VF4[GetPlayerId(ZM8)]
local unit A88
local unit A98
local boolean PreventBuyback=FP7
call ZP8()
if Z88==null and GetUnitTypeId(Y98)==1315988077 then
set Z88=YJ4
set Y_8=GetOwningPlayer(Z88)
endif
if IsPlayerAlly(Y_8,ZM8) and RG7(Z88,"4328") and FL7!=null then
set Z88=FL7
set Y_8=GetOwningPlayer(Z88)
endif
set Z28=Y78(Y98,Z88)
if Z88!=null then
set id=GetUnitTypeId(Z88)
call A77(G7[GetPlayerId(GetOwningPlayer(Z88))],Y98)
endif
if ZK8(ZM8,Y_8,Z88)==false and Z28==1 and WO7(Y_8)==false and Y_8!=A7 then
call X_8(Y98,Z88)
set Y_8=IU[1]
set Z88=G7[GetPlayerId(Y_8)]
endif
set IF4[GetPlayerId(GetOwningPlayer((Y98)))]=true
if GetUnitAbilityLevel(Y98,1093685078)!=0 or(Y88(Y98)and YD8(Y98))then
set YK8=true
call UnitRemoveAbility(Y98,1093685078)
set L7=Y98
set ox=Z88
if IsUnitType(Z88,UNIT_TYPE_STRUCTURE)==false then
endif
endif
if Y_8==null then
set Y_8=ZM8
endif
if P4 and GetUnitTypeId(Y98)!=1211117642 then
if(GetPlayerController(GetOwningPlayer(GetDyingUnit()))==MAP_CONTROL_USER)then
set jx=UnitRemoveItemFromSlot(Y98,GetRandomInt(0,5))
if GetItemTypeId(jx)==1227894859 then
call CreateItem(1227894855,GetItemX(jx),GetItemY(jx))
call RemoveItem(jx)
endif
elseif(IsUnitInForce(GetDyingUnit(),QW4))then
set jx=UnitItemInSlot(GetDyingUnit(),GetRandomInt(0,5))
if(jx==null)then
elseif(GetItemType(jx)==ITEM_TYPE_PURCHASABLE)then
call UnitRemoveItem(GetDyingUnit(),jx)
else
set Z_8=CreateItem(GetItemTypeId(jx),GetUnitX(GetDyingUnit()),GetUnitY(GetDyingUnit()))
call SetItemPlayer(Z_8,GetOwningPlayer(GetDyingUnit()),false)
set hG[$80+GetPlayerId(GetOwningPlayer(GetDyingUnit()))]=hG[$80+GetPlayerId(GetOwningPlayer(GetDyingUnit()))]+T77(GetItemTypeId(jx))
if((GetItemTypeId(jx)==SU[P1])or(GetItemTypeId(jx)==SU[LL]))then
call SetItemCharges(Z_8,GetItemCharges(jx))
endif
endif
endif
endif
if WM7(ZM8)then
if WM7(Y_8)then
set ZT8=true
if(Y_8==ZM8)then
call YM7(C8,10.,(P[GetPlayerId(ZM8)]+(KY4[GetPlayerId((ZM8))])+"|r "+(GetObjectName((1848652626)))))
else
call YM7(C8,10.,FI8(ZM8,Y_8))
endif
elseif WN7(Y_8)then
set ZV8=true
set U[GetPlayerId(Y7[0])]=U[GetPlayerId(Y7[0])]+1
set Q[GetPlayerId(Z7[0])]=Q[GetPlayerId(Z7[0])]+1
set M[2]=M[2]+1
set M[1]=0
if Y_8!=Z7[0]then
set Q[GetPlayerId(Y_8)]=Q[GetPlayerId(Y_8)]+1
set J[GetPlayerId(Y_8)]=J[GetPlayerId(Y_8)]+1
endif
endif
endif
if WN7(ZM8)then
if WN7(Y_8)then
set ZT8=true
if(Y_8==ZM8)then
call YM7(C8,10.,(P[GetPlayerId(ZM8)]+(KY4[GetPlayerId((ZM8))])+"|r "+(GetObjectName((1848652626)))))
else
call YM7(C8,10.,FI8(ZM8,Y_8))
endif
elseif WM7(Y_8)then
set ZV8=true
set U[GetPlayerId(Z7[0])]=U[GetPlayerId(Z7[0])]+1
set Q[GetPlayerId(Y7[0])]=Q[GetPlayerId(Y7[0])]+1
set M[1]=M[1]+1
set M[2]=0
if Y_8!=Y7[0]then
set Q[GetPlayerId(Y_8)]=Q[GetPlayerId(Y_8)]+1
set J[GetPlayerId(Y_8)]=J[GetPlayerId(Y_8)]+1
endif
endif
endif
if Y_8==A7 then
set ZV8=false
if GetUnitTypeId(Z88)==1848651852 then
call YM7(C8,10.,(P[GetPlayerId(ZM8)]+(KY4[GetPlayerId((ZM8))])+"|r "+(GetObjectName((1848652628)))))
else
call YM7(C8,10.,(P[GetPlayerId(ZM8)]+(KY4[GetPlayerId((ZM8))])+"|r "+(GetObjectName((1848652629)))))
endif
set ZT8=true
endif
if RZ4 then
call BY7(ZN,GetUnitX(Y98),GetUnitY(Y98))
endif
call E58("Hero"+I2S(GetPlayerId(ZM8)),GetPlayerId(Y_8))
set x=J[GetPlayerId(ZM8)]
if x>2 and ZT8==false then
if x==3 then
set Z48=50
set ZW8="|c0000ff40"+(GetObjectName((1848652876)))+"|r"
elseif x==4 then
set Z48=100
set ZW8="|c00400080"+(GetObjectName((1848652878)))+"|r"
elseif x==5 then
set Z48=$96
set ZW8="|c00ff0080"+(GetObjectName((1848652877)))+"|r"
elseif x==6 then
set Z48=$C8
set ZW8="|c00ff8000"+(GetObjectName((1848652874)))+"|r"
elseif x==7 then
set Z48=$FA
set ZW8="|c00808000"+(GetObjectName((1848652873)))+"|r"
elseif x==8 then
set Z48=300
set ZW8="|c00ff80ff"+(GetObjectName((1848652630)))+"|r"
elseif x==9 then
set Z48=350
set ZW8="|c00ff0000"+(GetObjectName((1848652631)))+"|r"
else
set Z48=400
set ZW8="|c00ff8000"+(GetObjectName((1848652632)))+"|r"
endif
endif
set x=J[GetPlayerId(Y_8)]
if x>NQ4[GetPlayerId(Y_8)]then
set NQ4[GetPlayerId(Y_8)]=x
endif
set A88=Z88
if IsUnitType(A88,UNIT_TYPE_HERO)==false then
set A88=G7[GetPlayerId(GetOwningPlayer(A88))]
endif
if x>2 and GetUnitTypeId(A88)!=1429221446 and O54[GetPlayerId(GetOwningPlayer(A88))]==0 then
endif
set A98=Y98
if IsUnitType(A98,UNIT_TYPE_HERO)==false then
set A98=G7[GetPlayerId(GetOwningPlayer(A98))]
endif
if ZT8==false and ZV8 then
endif
if x>2 and ZT8==false then
if x==3 then
call CJ7(JO)
set ZX8=" "+(GetObjectName((1848652875)))+" |c0000ff40"+(GetObjectName((1848652876)))+"|r"+(GetObjectName((1848652857)))
elseif x==4 then
call CJ7(YN)
set ZX8=" "+(GetObjectName((1848652872)))+" |c00400080"+(GetObjectName((1848652878)))+"|r"+(GetObjectName((1848652857)))
elseif x==5 then
call CJ7(TO)
set ZX8=" "+(GetObjectName((1848652871)))+" |c00ff0080"+(GetObjectName((1848652877)))+"|r"+(GetObjectName((1848652857)))
elseif x==6 then
call CJ7(ZO)
set ZX8=" "+(GetObjectName((1848652872)))+" |c00ff8000"+(GetObjectName((1848652874)))+"|r"+(GetObjectName((1848652865)))
elseif x==7 then
call CJ7(DP)
set ZX8=" "+(GetObjectName((1848652872)))+" |c00808000"+(GetObjectName((1848652873)))+"|r"+(GetObjectName((1848652865)))
elseif x==8 then
call CJ7(VO)
set ZX8=" "+(GetObjectName((1848652871)))+" |c00ff80ff"+(GetObjectName((1848652630)))+"|r"+(GetObjectName((1848652865)))
elseif x==9 then
call CJ7(AN)
set ZX8=" "+(GetObjectName((1848652872)))+" |c00ff0000"+(GetObjectName((1848652631)))+"|r"+(GetObjectName((1848652866)))
else
call CJ7(BN)
set ZX8=" "+(GetObjectName((1848652872)))+" |c00ff8000"+(GetObjectName((1848652632)))+"|r. "+(GetObjectName((1848652870)))+(GetObjectName((1848652866)))
endif
endif
if ZT8==false then
set Z48=Z48+100+GetHeroLevel(Y98)*9+100
set ZZ8=P[GetPlayerId(ZM8)]+(KY4[GetPlayerId((ZM8))])+"|r"
set ZA8=P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r"
set ZC8="|c00FFDC00"+I2S(Z48)+"|r"
if Y_8==Y7[0]or Y_8==Z7[0]then
if Z28==0 then
if Y_8==Y7[0]then
set ZB8=ZA8+" "+(GetObjectName((1848652850)))+" "+ZZ8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+ZC8+" "+(GetObjectName((1848652852)))+"."
call ZE8(Y_8,Z48)
elseif Y_8==Z7[0]then
set ZB8=ZA8+" "+(GetObjectName((1848652850)))+" "+ZZ8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+ZC8+" "+(GetObjectName((1848652852)))+"."
call ZE8(Y_8,Z48)
endif
elseif Z28>1 then
set ZB8=ZA8+" "+(GetObjectName((1848652850)))+" "+ZZ8+(GetObjectName((1848652851)))+(GetObjectName((1848652857)))+" "+ZC8+" "+(GetObjectName((1848652852)))+"."
call Z78(Y98,Z88,Z48)
endif
elseif ZW8=="" and ZX8=="" then
set ZB8=ZA8+" "+(GetObjectName((1848652850)))+" "+ZZ8+(GetObjectName((1848652851)))+" "+(GetObjectName((1848652867)))+" "+ZC8+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif ZW8=="" and ZX8!="" then
set ZB8=ZA8+" "+(GetObjectName((1848652850)))+" "+ZZ8+(GetObjectName((1848652851)))+" "+(GetObjectName((1848652867)))+" "+ZC8+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif ZW8!="" and ZX8=="" then
set ZB8=ZA8+" "+(GetObjectName((1848652856)))+" "+ZZ8+(GetObjectName((1848652855)))+" "+ZW8+" "+(GetObjectName((1848652854)))+" "+ZC8+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
elseif ZW8!="" and ZX8!="" then
set ZB8=ZA8+" "+(GetObjectName((1848652856)))+" "+ZZ8+(GetObjectName((1848652855)))+" "+ZW8+" "+(GetObjectName((1848652854)))+" "+ZC8+" "+(GetObjectName((1848652853)))+(GetObjectName((1848652857)))
endif
if ZV8 then
set ZY8=XC8(Y98,Z88)
endif
call YM7(C8,$A,ZB8+ZY8)
if ZX8!="" then
call YM7(C8,$A,ZA8+ZX8)
endif
set VF4[GetPlayerId(Y_8)]=VF4[GetPlayerId(Y_8)]+Z48
call Y28(Y_8,Z48,Y98)
set NU4[GetPlayerId(Y_8)]=NU4[GetPlayerId(Y_8)]+Z48
if M[1]>4 then
call YL8(0)
endif
if M[2]>4 then
call YL8(1)
endif
endif
set ZU8=GetHeroLevel(Y98)*30
if PH7(Y98,SU[DH4])!=null then
if GetItemCharges(PH7(Y98,SU[DH4]))>0 then
set Z08=-1*(4*GetItemCharges(PH7(Y98,SU[DH4])))
set ZU8=IMaxBJ(R2I(ZU8-25*GetItemCharges(PH7(Y98,SU[DH4]))),0)
endif
endif
if ZU8>A78 then
set ZU8=A78
endif
call YU8(Y98,A88)
call YC8(Y98)
call YB8(Y98)
if YK8==false then
set NP4[GetPlayerId(ZM8)]=NP4[GetPlayerId(ZM8)]+ZU8
call ZG8(Y98,ZU8)
endif
call SaveInteger(C7,StringHash("Stats"+I2S(GetPlayerId(Y_8))),StringHash("Killed "+I2S(GetPlayerId(ZM8))),((LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId(Y_8))),StringHash("Killed "+I2S(GetPlayerId(ZM8)))))+1))
call SaveInteger(C7,StringHash("Stats"+I2S(GetPlayerId(ZM8))),StringHash("Died To "+I2S(GetPlayerId(Y_8))),((LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId(ZM8))),StringHash("Died To "+I2S(GetPlayerId(Y_8)))))+1))
call StartTimerBJ(A[GetPlayerId(Y_8)],false,18)
if ZT8==false and Y_8!=Y7[0]and Y_8!=Z7[0]and Y_8!=A7 then
set K[GetPlayerId(Y_8)]=K[GetPlayerId(Y_8)]+1
if K[GetPlayerId(Y_8)]==2 then
set NR4[GetPlayerId(Y_8)]=NR4[GetPlayerId(Y_8)]+1
call Y58(P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r "+(GetObjectName((1848652868)))+" |c000000ff"+(GetObjectName((1848652883)))+"|r"+(GetObjectName((1848652857))),1)
endif
if K[GetPlayerId(Y_8)]==3 then
set NS4[GetPlayerId(Y_8)]=NS4[GetPlayerId(Y_8)]+1
call Y58(P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r "+(GetObjectName((1848652868)))+" |c0000ff40"+(GetObjectName((1848652869)))+"|r"+(GetObjectName((1848652866))),2)
endif
if K[GetPlayerId(Y_8)]==4 then
set NS4[GetPlayerId(Y_8)]=NS4[GetPlayerId(Y_8)]+1
call Y58(P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r "+(GetObjectName((1848652868)))+" |c0000FFFF"+(GetObjectName((1848657994)))+"|r"+(GetObjectName((1848652866))),3)
endif
if K[GetPlayerId(Y_8)]>4 then
set NS4[GetPlayerId(Y_8)]=NS4[GetPlayerId(Y_8)]+1
call Y58(P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r "+(GetObjectName((1848652875)))+" |c0000AAFF"+(GetObjectName((1848657995)))+"|r"+(GetObjectName((1848652866))),4)
endif
endif
if(ZT8==false)then
set J[GetPlayerId(ZM8)]=0
endif
set J[0]=0
set J[6]=0
set U[GetPlayerId(ZM8)]=U[GetPlayerId(ZM8)]+1
if YK8 then
set Z38=.4
endif
if ZT8 and GetUnitTypeId(Y98)==1211117643 then
set Z18=.5
endif
set Z58=R2I(GetHeroLevel(Y98)*4*Z38*Z68*ZL8*Z18)+R2I(Z08)
if CS then
set Z58=R2I(Z58*.5)
endif
if P84 then
set NT4[GetPlayerId(ZM8)]=0
if GetPlayerController(ZM8)==MAP_CONTROL_COMPUTER then
call TimerStart(T[GetPlayerId(ZM8)],2.,false,null)
else
call TimerStart(T[GetPlayerId(ZM8)],1.,false,null)
endif
else
set NT4[GetPlayerId(ZM8)]=NT4[GetPlayerId(ZM8)]+Z58
call TimerStart(T[GetPlayerId(ZM8)],Z58,false,null)
endif
call TriggerExecute(vA)
if L==false and RY4==false then
call YI8(Y98,Z58,YK8)
elseif RY4 and GetPlayerController(ZM8)==MAP_CONTROL_USER then
call YI8(Y98,1,false)
else
if(WM7(ZM8))then
set C[0]=C[0]+1
endif
if WN7(ZM8)then
set C[1]=C[1]+1
endif
set U7[GetPlayerId(ZM8)]=Y98
if GetUnitTypeId(Y98)==1211117642 then
set U7[GetPlayerId(ZM8)]=QA7(GetHandleId(GetOwningPlayer(Y98)),"Kobold0")
endif
if C[0]==P94 then
call TriggerExecute(OE4)
endif
if C[1]==P94 then
call TriggerExecute(OD4)
endif
if(GetUnitTypeId(Y98)==1429221430)then
call ExecuteFunc("ZI8")
elseif GetUnitTypeId(Y98)==1429221432 or GetUnitTypeId(Y98)==1160786229 then
set IS4=Y98
call ExecuteFunc("AD8")
elseif GetUnitTypeId(Y98)==1432580716 then
set IS4=Y98
call ExecuteFunc("AE8")
endif
endif
set Z_8=null
set t=null
set Z88=null
set Y98=null
endfunction
function AF8 takes nothing returns boolean
local unit YX8=GetSummonedUnit()
local integer x
if IsUnitIllusion(YX8) then
set x=J[GetPlayerId(GetOwningPlayer(YX8))]
if x>2 and O54[GetPlayerId(GetOwningPlayer(YX8))]==0 then
call Z27(YX8,1093815114)
else
call UnitRemoveAbility(YX8,1093815114)
endif
endif
set YX8=null
return false
endfunction
function InitTrig_Image_Enters takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function AF8))
set t=null
endfunction
function AG8 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local player Y_8=GetOwningPlayer(GetKillingUnit())
local player ZM8=GetOwningPlayer(GetTriggerUnit())
local string K07
local integer Z28=Y78(GetTriggerUnit(),GetKillingUnit())
set LP4="AG8"
if Y_8==Y7[0]or Y_8==Z7[0]then
call Z78(GetTriggerUnit(),GetKillingUnit(),$C8)
set K07=Y48(GetTriggerUnit(),GetKillingUnit())+" "+(GetObjectName((1848652887)))+" |c00ff0303"+(GetObjectName((1848652889)))+(GetObjectName((1848652857)))+"|r "
if Z28>1 then
set K07=K07+"(+200 "+(GetObjectName((1848652852)))+")"
else
set K07=K07+"(+200 "+(GetObjectName((1848652853)))+")"
endif
else
set K07=P[GetPlayerId(Y_8)]+(KY4[GetPlayerId((Y_8))])+"|r "+(GetObjectName((1848652887)))+" |c00ff0303"+(GetObjectName((1848652889)))+(GetObjectName((1848652857)))+"|r "
set K07=K07+"(+200 "+(GetObjectName((1848652853)))+")"
call Y28(Y_8,$C8,G7[GetPlayerId(Y_8)])
set VF4[GetPlayerId(Y_8)]=VF4[GetPlayerId(Y_8)]+$C8
endif
call YM7(C8,$A,K07)
call CJ7(EX)
call RN7(t)
set t=null
endfunction
function AH8 takes nothing returns boolean
if GetOwningPlayer(GetKillingUnit())!=A7 and GetKillingUnit()!=null and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsPlayerEnemy(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())) then
if GetOwningPlayer(GetKillingUnit())==Y7[0]or GetOwningPlayer(GetKillingUnit())==Z7[0]then
if Y78(GetTriggerUnit(),GetKillingUnit())>0 then
call AG8()
endif
else
call AG8()
endif
endif
return false
endfunction
function AI8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u
local region r
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(RP7)
call RN7(t)
else
set u=QA7(RP7,"u")
set r=CreateRegion()
call RegionAddRect(r,CE)
call RegionAddRect(r,dE)
if IsUnitInRegion(r,u)==false then
if R87(RP7,"safe") then
call QF7(RP7,"safe",false)
else
call SetUnitX(u,GetRectCenterX(MD))
call SetUnitY(u,GetRectCenterY(MD))
call QF7(RP7,"safe",true)
endif
endif
call RemoveRegion(r)
set u=null
set r=null
endif
set t=null
return false
endfunction
function AJ8 takes unit u returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,10.,true)
call TriggerAddCondition(t,Condition(function AI8))
call QG7(RP7,"u",u)
call QF7(RP7,"safe",true)
set t=null
endfunction
function AK8 takes nothing returns boolean
local item TS8
local integer ZD8=GetTriggerEvalCount(GetTriggeringTrigger())
if ZD8==E07 then
call RN7(GetTriggeringTrigger())
endif
if ZD8==E07-$B4 or ZD8==E07-60 then
if NV4!=null then
set TS8=PH7(NV4,SU[T0])
if TS8!=null then
if ZD8==E07-$B4 then
if WM7(GetOwningPlayer(NV4))then
call YM7(W7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848657207)))+"|r")
else
call YM7(X7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848657207)))+"|r")
endif
else
if WM7(GetOwningPlayer(NV4))then
call YM7(W7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848656984)))+"|r")
else
call YM7(X7,$F,(GetObjectName((1848657209)))+" |c00ff0303"+(GetObjectName((1848656984)))+"|r")
endif
endif
endif
endif
endif
set TS8=null
return false
endfunction
function AM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="AM8"
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function AK8))
call TriggerEvaluate(t)
set t=null
endfunction
function AN8 takes nothing returns boolean
set NX4=GetTriggerEvalCount(GetTriggeringTrigger())
if T4!=null and GetUnitState(T4,UNIT_STATE_LIFE)>1 then
call SetPlayerTechResearched(GetOwningPlayer(T4),1378889798,NX4)
if GetUnitAbilityLevel(T4,1093743666)==0 then
call UnitAddAbility(T4,1093743666)
endif
call SetUnitAbilityLevel(T4,1093743666,NX4+1)
endif
return false
endfunction
function AO8 takes nothing returns nothing
local integer i=1
local unit Z47
set NV4=null
loop
exitwhen i>5
set Z47=G7[GetPlayerId(Y7[i])]
if Z47!=null and PH7(Z47,SU[T0])!=null then
call DisableTrigger(H84)
call E58("AegisOff",GetPlayerId(GetOwningPlayer(Z47)))
call RemoveItem(PH7(Z47,SU[T0]))
call EnableTrigger(H84)
endif
set Z47=G7[GetPlayerId(Z7[i])]
if Z47!=null and PH7(Z47,SU[T0])!=null then
call DisableTrigger(H84)
call E58("AegisOff",GetPlayerId(GetOwningPlayer(Z47)))
call RemoveItem(PH7(Z47,SU[T0]))
call EnableTrigger(H84)
endif
set i=i+1
endloop
set Z47=null
endfunction
function AP8 takes string AQ8,string AR8 returns string
local string s=(GetObjectName((1848656705)))
set LP4="GetString_RoshanKilled"
set s=F78(s,"$team",AQ8)
set s=F78(s,"$team",AR8)
return s
endfunction
function AS8 takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())==1848651852
endfunction
function IsHero takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function AT8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local location AU8
local real AN7
if GetTriggerEvalCount(t)==E17 or X04 then
set X04=false
set AU8=GetRectCenter(MD)
call AO8()
set NZ4=NZ4+1
set T4=CreateUnitAtLoc(Player($C),1848651852,AU8,bj_UNIT_FACING)
call SetUnitAcquireRange(T4,$96)
call AJ8(T4)
call UnitAddAbility(T4,1093743666)
call SetPlayerTechResearched(GetOwningPlayer(T4),1378889798,NX4)
call SetUnitAbilityLevel(T4,1093743666,NX4+1)
call RemoveLocation(AU8)
if NZ4>1 then
call UnitRemoveAbility(T4,1093684018)
call UnitAddAbility(T4,1093685558)
call UnitAddItem(T4,CreateItem(SU[ZC],0,0))
endif
call UnitAddItem(T4,CreateItem(SU[T0],0,0))
call RN7(t)
set DN7=99999999.
elseif GetTriggerEvalCount(t)==E07 then
call AO8()
set DN7=99999999.
endif
set t=null
set AU8=null
return false
endfunction
function AV8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function AT8))
set X04=false
call AM8()
set NW4=false
if(WM7(GetOwningPlayer(GetKillingUnit())))then
call E58("Roshan",0)
call YM7(bj_FORCE_ALL_PLAYERS,10.,AP8("|c00ff0000"+(GetObjectName((1848653365)))+"|r",(GetObjectName((1848653365)))))
call AdjustPlayerStateBJ($C8,Y7[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Y7[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Y7[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Y7[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Y7[5],PLAYER_STATE_RESOURCE_GOLD)
endif
if(WN7(GetOwningPlayer(GetKillingUnit())))then
call E58("Roshan",1)
call YM7(bj_FORCE_ALL_PLAYERS,10.,AP8("|c00004000"+(GetObjectName((1848653379)))+"|r",(GetObjectName((1848653379)))))
call AdjustPlayerStateBJ($C8,Z7[1],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[2],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[3],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[4],PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ($C8,Z7[5],PLAYER_STATE_RESOURCE_GOLD)
endif
set t=null
endfunction
function AW8 takes nothing returns nothing
local texttag t=CreateTextTag()
local unit u=GetTriggerUnit()
local player p=GetOwningPlayer(GetKillingUnit())
set LP4="AW8"
call SetTextTagText(t,"$",.027)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,KZ4[GetPlayerId(p)],KA4[GetPlayerId(p)],KB4[GetPlayerId(p)],$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4 then
call SetTextTagVisibility(t,true)
endif
set t=null
set u=null
set p=null
endfunction
function AX8 takes unit u,player p returns nothing
local texttag t=CreateTextTag()
set LP4="Ojv"
call SetTextTagText(t,"!",.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,KZ4[GetPlayerId(p)],KA4[GetPlayerId(p)],KB4[GetPlayerId(p)],$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,1.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
if ob[GetPlayerId(GetLocalPlayer())] or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
call SetTextTagVisibility(t,true)
endif
set t=null
endfunction
function AY8 takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_MELEE_ATTACKER) then
call AddHeroXP(GetEnumUnit(),Tl/ IG4,true)
else
call AddHeroXP(GetEnumUnit(),tl/ IG4,true)
endif
endfunction
function AZ8 takes nothing returns nothing
local group g=ZI7()
local integer XP7
local integer AA8=18
local integer AB8=AA8*2
set LP4="AZ8"
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$3E8,Condition(function L07))
set XP7=C77(g)
set IG4=XP7
set tl=AA8
set Tl=AB8
call ForGroup(g,function AY8)
call ZH7(g)
call AX8(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))
set g=null
endfunction
function AC8 takes nothing returns boolean
if IsUnitAlly(GetKillingUnit(),GetOwningPlayer(GetTriggerUnit())) then
call AZ8()
else
if R8 and WO7(GetOwningPlayer(GetKillingUnit()))then
call AW8()
endif
endif
return false
endfunction
function A38 takes player FJ8,player FK8 returns string
local string s=(GetObjectName((1848656208)))
set LP4="GetString_ChickenKilled"
set s=F78(s,"$dead",(KY4[GetPlayerId((FJ8))]))
return s
endfunction
function A68 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
return false
endfunction
function AL8 takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function A68))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
set CP7=null
set t=null
endfunction
function A18 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit A08=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=GetTriggerEvalCount(t)
local integer A58=$B4-ZD8
local integer i=1
local integer id
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
loop
exitwhen i>5
if IsPlayerAlly(GetOwningPlayer(A08),Y7[0])then
set id=GetPlayerId(Y7[i])
else
set id=GetPlayerId(Z7[i])
endif
set i=i+1
if A58==0 then
call LeaderboardDisplay(EU7[id],false)
if IsPlayerAlly(Y7[0],Player(id))then
set EL7[GetPlayerId(Y7[0])]=false
endif
if IsPlayerAlly(Z7[0],Player(id))then
set EL7[GetPlayerId(Z7[0])]=false
endif
else
if A47(G7[id])==false then
call PlayerSetLeaderboard(Player(id),EU7[id])
call LeaderboardDisplay(EU7[id],true)
call LeaderboardSetLabel(EU7[id],"    "+GetObjectName(1848659034)+" "+I2S(A58))
endif
endif
endloop
if A58==2 then
call SetUnitPosition(A08,x,y)
endif
if A58==0 then
call QF7(GetHandleId(A08),"aiCrow|Alive",true)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set A08=null
return false
endfunction
function A28 takes player JI7,integer Z98 returns nothing
local texttag t
if Z98>0 then
set t=CreateTextTag()
call SetPlayerState(JI7,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(JI7,PLAYER_STATE_RESOURCE_GOLD)+Z98)
call SetTextTagText(t,"+"+I2S(Z98),.025)
call SetTextTagPosUnit(t,G7[GetPlayerId(JI7)],0)
call SetTextTagColor(t,$FF,$DC,0,$FF)
call SetTextTagVelocity(t,0,.03)
if GetLocalPlayer()==JI7 then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
call SetTextTagFadepoint(t,2)
call SetTextTagLifespan(t,3)
call SetTextTagPermanent(t,false)
endif
endfunction
function A_8 takes nothing returns boolean
local real x
local real y
local unit A08=GetTriggerUnit()
local integer i=1
local integer B48=$AF
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call QF7(GetHandleId(A08),"aiCrow|Alive",false)
call E58("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YM7(C8,10.,A38(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))
call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,$FF,0,0,false)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function A18))
call SaveUnitHandle(C7,(JZ7),(2),(A08))
if IsPlayerAlly(GetOwningPlayer(A08),Y7[0])and EL7[GetPlayerId(Y7[0])]==false then
set EL7[GetPlayerId(Y7[0])]=true
loop
exitwhen i>5
call A28(Z7[i],B48)
set i=i+1
endloop
endif
set i=1
if IsPlayerAlly(GetOwningPlayer(A08),Z7[0])and EL7[GetPlayerId(Z7[0])]==false then
set EL7[GetPlayerId(Z7[0])]=true
loop
exitwhen i>5
call A28(Y7[i],B48)
set i=i+1
endloop
endif
if WM7(GetOwningPlayer(A08))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
if IsTerrainPathable(GetUnitX(A08),GetUnitY(A08),PATHING_TYPE_WALKABILITY)then
call AL8(A08)
endif
set t=null
return false
endfunction
function B78 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=IW4
local real y=IX4
if WN7(GetOwningPlayer(CP7))then
set x=JX4
set y=JY4
endif
if A47(CP7)==false then
if N67(GetUnitX(CP7),GetUnitY(CP7),x,y)<800 then
call Z27(CP7,1098282348)
else
call UnitRemoveAbility(CP7,1098282348)
endif
endif
set t=null
set CP7=null
return false
endfunction
function B88 takes unit A08 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(A08),1093810510,false)
call UnitMakeAbilityPermanent(A08,true,1093810509)
call TriggerRegisterDeathEvent(t,A08)
call TriggerAddCondition(t,Condition(function A_8))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function B78))
call SaveUnitHandle(C7,(JZ7),(2),(A08))
set t=null
endfunction
function B98 takes nothing returns nothing
if OI7(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call E58("Courier"+I2S(GetPlayerId(GetOwningPlayer(GetTriggerUnit()))),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call YM7(C8,10.,A38(GetOwningPlayer(GetTriggerUnit()),GetOwningPlayer(GetKillingUnit())))
call PingMinimapEx(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),6,$FF,0,0,false)
endif
endfunction
function BD8 takes nothing returns boolean
call RN7(GetTriggeringTrigger())
set EL7[GetPlayerId(Y7[0])]=false
set EL7[GetPlayerId(Z7[0])]=false
set EU7[GetPlayerId(Y7[1])]=CreateLeaderboard()
set EU7[GetPlayerId(Y7[2])]=CreateLeaderboard()
set EU7[GetPlayerId(Y7[3])]=CreateLeaderboard()
set EU7[GetPlayerId(Y7[4])]=CreateLeaderboard()
set EU7[GetPlayerId(Y7[5])]=CreateLeaderboard()
set EU7[GetPlayerId(Z7[1])]=CreateLeaderboard()
set EU7[GetPlayerId(Z7[2])]=CreateLeaderboard()
set EU7[GetPlayerId(Z7[3])]=CreateLeaderboard()
set EU7[GetPlayerId(Z7[4])]=CreateLeaderboard()
set EU7[GetPlayerId(Z7[5])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[1],EU7[GetPlayerId(Y7[1])])
call PlayerSetLeaderboard(Y7[2],EU7[GetPlayerId(Y7[2])])
call PlayerSetLeaderboard(Y7[3],EU7[GetPlayerId(Y7[3])])
call PlayerSetLeaderboard(Y7[4],EU7[GetPlayerId(Y7[4])])
call PlayerSetLeaderboard(Y7[5],EU7[GetPlayerId(Y7[5])])
call PlayerSetLeaderboard(Z7[1],EU7[GetPlayerId(Z7[1])])
call PlayerSetLeaderboard(Z7[2],EU7[GetPlayerId(Z7[2])])
call PlayerSetLeaderboard(Z7[3],EU7[GetPlayerId(Z7[3])])
call PlayerSetLeaderboard(Z7[4],EU7[GetPlayerId(Z7[4])])
call PlayerSetLeaderboard(Z7[5],EU7[GetPlayerId(Z7[5])])
call LeaderboardDisplay(EU7[GetPlayerId(Y7[1])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Y7[2])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Y7[3])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Y7[4])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Y7[5])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Z7[1])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Z7[2])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Z7[3])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Z7[4])],false)
call LeaderboardDisplay(EU7[GetPlayerId(Z7[5])],false)
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Y7[1])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Y7[2])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Y7[3])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Y7[4])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Y7[5])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Z7[1])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Z7[2])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Z7[3])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Z7[4])]," ")
call LeaderboardSetLabelBJ(EU7[GetPlayerId(Z7[5])]," ")
return false
endfunction
function BE8 takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
set LP4="BE8"
if id==1697656914 or id==1697657137 or id==1697656915 or id==1697657145 or id==1966092365 or id==1966092356 or id==1966092366 or id==1966092372 then
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set N14[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=N14[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
call YM7(C8,$A,P[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+(GetObjectName((1848652880)))+".")
else
call YM7(C8,$A,P[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetKillingUnit())))])+"|r "+(GetObjectName((1848657230)))+".")
endif
endif
endfunction
function BF8 takes nothing returns nothing
if OI7(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),Y7[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call D38(IY4,GetEnumUnit(),2,500)
endif
endfunction
function BG8 takes nothing returns nothing
if OI7(GetEnumUnit())and IsUnitAlly(GetEnumUnit(),Z7[0])==false and GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>.5 then
call UnitRemoveAbility(GetEnumUnit(),1110456392)
call D38(JZ4,GetEnumUnit(),2,500)
endif
endfunction
function BH8 takes nothing returns boolean
local group g=ZI7()
set LP4="BH8"
call GroupEnumUnitsInRect(g,ND,Condition(function WE7))
call ForGroup(g,function BF8)
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsInRect(g,OD,Condition(function WE7))
call ForGroup(g,function BG8)
call ZH7(g)
set g=null
return false
endfunction
function BI8 takes unit u returns boolean
return(GetUnitAbilityLevel((u),(1110454344))>0)or(GetUnitAbilityLevel((u),(1112500344))>0)or(GetUnitAbilityLevel((u),(1112560453))>0)or(GetUnitAbilityLevel((u),(1110456633))>0)or(GetUnitAbilityLevel((u),(1112757326))>0)or(GetUnitAbilityLevel((u),(1110459206))>0)or(GetUnitAbilityLevel((u),(1110458957))>0)or(GetUnitAbilityLevel((u),(1110455885))>0)or(GetUnitAbilityLevel((u),(1110456142))>0)or(GetUnitAbilityLevel((u),(1110456403))>0)or(GetUnitAbilityLevel((u),(1110454353))>0)or(GetUnitAbilityLevel((u),(1110455382))>0)or(GetUnitAbilityLevel((u),(1110456114))>0)or(GetUnitAbilityLevel((u),(1112891758))>0)or(GetUnitAbilityLevel((u),(1110456629))>0)or(GetUnitAbilityLevel((u),(1110455113))>0)or(GetUnitAbilityLevel((u),(1110458692))>0)or(GetUnitAbilityLevel((u),(1110458693))>0)or(GetUnitAbilityLevel((u),(1110458949))>0)or(GetUnitAbilityLevel((u),(1110458950))>0)or(GetUnitAbilityLevel((u),(1110454328))>0)or(GetUnitAbilityLevel((u),(1110455362))>0)or(GetUnitAbilityLevel((u),(1110454854))>0)or(GetUnitAbilityLevel((u),(1112896368))>0)or(GetUnitAbilityLevel((u),(1112896372))>0)or(GetUnitAbilityLevel((u),(1110459460))>0)or(RG7(u,"DisruptionState"))or(RG7(u,"AstralImprisonmentState"))or(GetUnitAbilityLevel((u),(1110459186))>0)or(GetUnitAbilityLevel((u),(1110455891))>0)or(GetUnitAbilityLevel((u),(1110454867))>0)or(GetUnitAbilityLevel((u),(1110456133))>0)
endfunction
function BJ8 takes unit u returns boolean
return BI8(u)or C27(u)or IsUnitPaused(u)or YF7(u)
endfunction
function BK8 takes unit MQ7 returns boolean
return(IsUnitType(MQ7,UNIT_TYPE_STUNNED)or IsUnitType(MQ7,UNIT_TYPE_SNARED)or IsUnitType(MQ7,UNIT_TYPE_POLYMORPHED)or GetUnitMoveSpeed(MQ7)<290 or IsUnitPaused(MQ7))or BI8(MQ7)or C27(MQ7)
endfunction
function BM8 takes integer BN8,integer BO8,boolean extraColor returns nothing
local integer x=0
loop
exitwhen x>$F
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_LUMBER,BN8)
call SetPlayerState(Player(x),PLAYER_STATE_RESOURCE_FOOD_USED,BO8)
set x=x+1
endloop
endfunction
function BP8 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
set LP4="IsRealSummoned"
return id==1848652343 or id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092599 or id==1966092601 or id==1966092600 or id==1966092609 or id==1966092610 or id==1966092611
endfunction
function BQ8 takes unit u,boolean b returns nothing
call SetUnitInvulnerable(u,b)
call SaveBoolean(C7,(GetHandleId(u)),(509),(b))
endfunction
function BR8 takes unit u returns boolean
return(LoadBoolean(C7,(GetHandleId(u)),(509)))or GetUnitAbilityLevel(u,1098282348)>0
endfunction
function BS8 takes real x,real y returns location
local real B17
local real B07
local integer i=0
set LP4="FindClearLocation"
loop
exitwhen i>40
set B17=x+i*20
set B07=y+i*20
if IsPointInRegion(IT4,B17,B07)==false then
return Location(B17,B07)
endif
set B17=x+i*20
set B07=y-i*20
if IsPointInRegion(IT4,B17,B07)==false then
return Location(B17,B07)
endif
set B17=x-i*20
set B07=y+i*20
if IsPointInRegion(IT4,B17,B07)==false then
return Location(B17,B07)
endif
set B17=x-i*20
set B07=y-i*20
if IsPointInRegion(IT4,B17,B07)==false then
return Location(B17,B07)
endif
set i=i+1
endloop
return Location(x,y)
endfunction
function BT8 takes unit CP7,integer DB8,integer BU8 returns nothing
local integer i
set LP4="StickyNapalm_SetSlow"
if WG4[1]==0 then
return
endif
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(CP7,WG4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(CP7,WH4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(CP7,WI4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call UnitRemoveAbility(CP7,WJ4[i])
set i=i+1
endloop
call UnitRemoveAbility(CP7,1110458963)
if DB8==1 then
call UnitAddAbility(CP7,WG4[BU8])
elseif DB8==2 then
call UnitAddAbility(CP7,WH4[BU8])
elseif DB8==3 then
call UnitAddAbility(CP7,WI4[BU8])
elseif DB8==4 then
call UnitAddAbility(CP7,WJ4[BU8])
endif
endfunction
function BV8 takes integer CY7 returns nothing
set TD4=TD4+1
set T94[TD4]=CY7
endfunction
function BW8 takes unit u returns nothing
local integer i=1
set LP4="RemoveNegativeBuffs"
loop
exitwhen i>TD4
call UnitRemoveAbility(u,T94[i])
set i=i+1
endloop
endfunction
function BX8 takes integer o6 returns boolean
return o6==1095331943 or o6==1093677654 or o6==1094938741 or o6==1093744708 or o6==1093750613 or o6==1095328633 or o6==1093751617
endfunction
function BY8 takes unit m5 returns nothing
call UnitRemoveAbility(m5,1093749313)
call UnitRemoveAbility(m5,1110459204)
call UnitRemoveAbility(m5,1093749828)
call UnitRemoveAbility(m5,1097167980)
call BT8(m5,0,0)
endfunction
function BZ8 takes nothing returns boolean
if BX8(GetSpellAbilityId())then
call BY8(GetSpellTargetUnit())
endif
return false
endfunction
function BA8 takes integer BB8 returns integer
if LU[BB8]==0 then
return BB8
else
return LU[BB8]
endif
endfunction
function BC8 takes nothing returns nothing
local integer B38=R2I(TimerGetElapsed(V)-M24)
local integer BN8=B38/60-1/2
local integer BO8=ModuloInteger(B38,60)
set LP4="BC8"
if X64 then
call BM8(BN8,BO8,false)
elseif Q84==false then
set B38=R2I(16-TimerGetElapsed(V))
set BN8=B38/ 60-1/ 2
set BO8=ModuloInteger(B38,60)
call BM8(BN8,BO8,true)
endif
set Bz=R2I(TimerGetElapsed(V)-M_4)
set W=BN8
set B=BO8
endfunction
function B68 takes unit BL8,integer B18 returns integer
local integer i
set LP4="WhichHeroSkill"
if B18==1 then
if GetUnitAbilityLevel(BL8,1094004784)>0 then
return 500
endif
set i=K64
loop
exitwhen i>K04
if GetUnitAbilityLevel(BL8,HK4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif B18==2 then
if GetUnitAbilityLevel(BL8,1094004785)>0 then
return 500
endif
set i=K64
loop
exitwhen i>K04
if GetUnitAbilityLevel(BL8,HM4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif B18==3 then
if GetUnitAbilityLevel(BL8,1094004786)>0 then
return 500
endif
set i=K64
loop
exitwhen i>K04
if GetUnitAbilityLevel(BL8,HN4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
elseif B18==4 then
if GetUnitAbilityLevel(BL8,1094004787)>0 then
return 500
endif
set i=K64
loop
exitwhen i>K04
if GetUnitAbilityLevel(BL8,HO4[i])>0 or GetUnitAbilityLevel(BL8,HP4[i])>0 then
return i
endif
set i=i+1
endloop
return 0
endif
return 0
endfunction
function B08 takes item ON7 returns boolean
local integer B58=OK7(ON7)
set LP4="IsItemScepter"
return B58==FQ4 or B58==FR4 or B58==FS4 or B58==FT4 or B58==FU4 or B58==FV4 or B58==FW4 or B58==FX4 or B58==FY4 or B58==FZ4 or B58==FA4 or B58==FC4 or B58==F34 or B58==F64 or B58==FL4 or B58==F14 or B58==F04 or B58==F54 or B58==F_4 or B58==G44 or B58==G74 or B58==G94 or B58==GD4 or B58==GE4 or B58==GG4 or B58==GH4 or B58==GI4 or B58==GK4 or B58==GM4 or B58==GN4 or B58==GO4 or B58==GP4 or B58==GQ4 or B58==GR4 or B58==GS4 or B58==GJ4 or B58==GT4 or B58==FB4 or B58==GU4 or B58==GV4 or B58==GX4 or B58==GY4 or B58==GZ4 or B58==GB4 or B58==GA4 or B58==G34 or B58==GW4 or B58==G64 or B58==GL4 or B58==G14 or B58==G04 or B58==G54
endfunction
function B28 takes integer B58 returns boolean
return B58==DE4 or B58==ZC or B58==NC or B58==PC or B58==QC or B58==TC or B58==VC or B58==WC or B58==XC or B58==OC or B58==CC or B58==LC
endfunction
function B_8 takes integer B58 returns boolean
return B58==DX4 or B58==RB or B58==LL or B58==D1 or B58==DH4 or B58==T0 or B58==BC or B58==YA or B58==DS4 or B58==WB
endfunction
function C48 takes integer BB8 returns integer
if QC==BB8 then
return 3
endif
if TC==BB8 or VC==BB8 or AC==BB8 or OC==BB8 or CC==BB8 then
return 2
endif
return 1
endfunction
function C78 takes string winner returns nothing
local integer i
local player p
local string id
local integer D5=R2I(TimerGetElapsed(V)-M24)
local integer C88=D5/ 60-1/ 2
local integer BO8=ModuloInteger(D5,60)
set LP4="UpdateReplayCache"
call E68()
set i=1
loop
exitwhen i>5
set p=Y7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IU4,id,"1",(Q[GetPlayerId((p))]))
call StoreInteger(IU4,id,"2",(U[GetPlayerId((p))]))
call StoreInteger(IU4,id,"3",(S7[GetPlayerId((p))]))
call StoreInteger(IU4,id,"4",(T7[GetPlayerId((p))]))
call StoreInteger(IU4,id,"5",(FU[GetPlayerId((p))]))
call StoreInteger(IU4,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(IU4,id,"7",(LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId((p)))),StringHash("NumOfNeutrals"))))
call StoreInteger(IU4,id,"8_0",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(0)))))
call StoreInteger(IU4,id,"8_1",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(1)))))
call StoreInteger(IU4,id,"8_2",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(2)))))
call StoreInteger(IU4,id,"8_3",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(3)))))
call StoreInteger(IU4,id,"8_4",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(4)))))
call StoreInteger(IU4,id,"8_5",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(5)))))
call StoreInteger(IU4,id,"9",(GetUnitTypeId(G7[GetPlayerId((p))])))
call StoreInteger(IU4,id,"id",i)
set p=Z7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IU4,id,"1",(Q[GetPlayerId((p))]))
call StoreInteger(IU4,id,"2",(U[GetPlayerId((p))]))
call StoreInteger(IU4,id,"3",(S7[GetPlayerId((p))]))
call StoreInteger(IU4,id,"4",(T7[GetPlayerId((p))]))
call StoreInteger(IU4,id,"5",(FU[GetPlayerId((p))]))
call StoreInteger(IU4,id,"6",(GetPlayerState((p),PLAYER_STATE_RESOURCE_GOLD)))
call StoreInteger(IU4,id,"7",(LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId((p)))),StringHash("NumOfNeutrals"))))
call StoreInteger(IU4,id,"8_0",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(0)))))
call StoreInteger(IU4,id,"8_1",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(1)))))
call StoreInteger(IU4,id,"8_2",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(2)))))
call StoreInteger(IU4,id,"8_3",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(3)))))
call StoreInteger(IU4,id,"8_4",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(4)))))
call StoreInteger(IU4,id,"8_5",(GetItemTypeId(UnitItemInSlot(G7[GetPlayerId((p))],(5)))))
call StoreInteger(IU4,id,"9",(GetUnitTypeId(G7[GetPlayerId((p))])))
call StoreInteger(IU4,id,"id",i+5)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"1")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"2")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"3")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"4")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"5")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"6")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"7")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_0")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_1")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_2")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_3")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_4")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"8_5")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"9")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"id")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"1")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"2")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"3")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"4")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"5")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"6")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"7")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_0")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_1")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_2")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_3")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_4")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"8_5")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"9")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"id")
endif
set i=i+1
endloop
if O74==false then
call StoreInteger(IU4,"Global","Winner",O84)
call StoreInteger(IU4,"Global","m",C88)
call StoreInteger(IU4,"Global","s",BO8)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,"Global","Winner")
call SyncStoredInteger(IU4,"Global","m")
call SyncStoredInteger(IU4,"Global","s")
endif
endif
endfunction
function GK8 takes nothing returns nothing
call C78("1")
endfunction
function C98 takes nothing returns boolean
call ExecuteFunc("WL8")
return false
endfunction
function CD8 takes nothing returns nothing
call AT7(GetEnumUnit())
endfunction
function CE8 takes nothing returns nothing
local group g=ZI7()
set LP4="CE8"
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function LV7))
call ForGroup(g,function CD8)
call ZH7(g)
set g=null
endfunction
function CF8 takes nothing returns nothing
call DisableTrigger(QC4)
call DisableTrigger(Q34)
call DisableTrigger(Q64)
call DisableTrigger(QL4)
call DisableTrigger(QY4)
call DisableTrigger(DO7)
call DisableTrigger(QA4)
call DisableTrigger(LO4)
call DisableTrigger(Hn)
endfunction
function CG8 takes nothing returns nothing
set bj_changeLevelShowScores=true
call DisableTrigger(OD4)
call DisableTrigger(OE4)
call ExecuteFunc("CH8")
if R8 then
call DisableTrigger(NJ4)
endif
call DisableTrigger(M54)
call ClearTextMessages()
// 获得了胜利，汉化作者……
call YM7(bj_FORCE_ALL_PLAYERS,60,A9+" "+(GetObjectName((1848653108)))+" www.getdota.com.")
set L8=true
call Z57()
call DisableTrigger(HS)
call DisableTrigger(ES)
call DisableTrigger(M04)
call Z67()
call CF8()
endfunction

function CI8 takes nothing returns nothing
	//天灾军团获得胜利
	local trigger t=CreateTrigger()
	set LP4="CI8"
	call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
	call TriggerRegisterTimerEvent(t,6.5,false)
	call TriggerAddCondition(t,Condition(function C98))
	set O84=2
	set A9="|c0020c000"+(GetObjectName((1848652623)))+"|r"
	call CG8()
	call CE8()
	call C78("2")
	set t=null
endfunction

function CJ8 takes nothing returns boolean
call SetUnitVertexColorBJ(JC4,100,100,100,GetTriggerEvalCount(GetTriggeringTrigger()))
if GetTriggerEvalCount(GetTriggeringTrigger())==100 then
call ShowUnit(JC4,false)
call RN7(GetTriggeringTrigger())
endif
return false
endfunction

function CK8 takes nothing returns nothing
	//近卫军团获得胜利
	local trigger t=CreateTrigger()
	set LP4="CK8"
	call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
	call TriggerRegisterTimerEvent(t,3.5,false)
	call TriggerAddCondition(t,Condition(function C98))
	set O84=1
	set A9="|c00ff0303"+(GetObjectName((1848652622)))+"|r"	//近卫军团
	call CG8()
	call CE8()
	call C78("1")
	call AddSpecialEffect("war3mapImported\\FrozenThronesDeath2.mdx",GetUnitX(JC4)+$96,GetUnitY(JC4)+100)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.02,true)
	call TriggerAddCondition(t,Condition(function CJ8))
	set t=null
endfunction

function CM8 takes unit CN8 returns boolean
local unit CO8=G7[GetPlayerId(GetOwningPlayer(CN8))]
set LP4="IsMyBearTooFar"
if((GetUnitX(CO8)-GetUnitX(CN8))*(GetUnitX(CO8)-GetUnitX(CN8))+(GetUnitY(CO8)-GetUnitY(CN8))*(GetUnitY(CO8)-GetUnitY(CN8))>=$D0E49)then
set CO8=null
return true
endif
set CO8=null
return false
endfunction
function CP8 takes nothing returns nothing
local unit VC8=GetAttacker()
local integer CQ8=UnitInventorySize(VC8)
local integer x=0
local item i
set LP4="CP8"
loop
exitwhen x>CQ8
set i=UnitItemInSlot(VC8,x)
if OM7(i)==RZ and GetRandomReal(0,1)<=.2 and LG7(VC8)==false then
if LR7(VC8)then
if CM8(VC8)==false then
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call D38(VC8,GetTriggerUnit(),2,40)
endif
endif
else
if GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
call D38(VC8,GetTriggerUnit(),2,40)
endif
endif
endif
set x=x+1
endloop
set i=null
set VC8=null
endfunction
function CR8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real CS8=(LoadReal(C7,(GetHandleId(CP7)),(692)))
set LP4="CR8"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or CS8<(TimerGetElapsed(V))then
call UnitRemoveAbility(CP7,1093809717)
call UnitRemoveAbility(CP7,1110456398)
call UnitRemoveAbility(CP7,1093809731)
call SaveReal(C7,(GetHandleId(CP7)),(692),((0)*1.))
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function CT8 takes unit CP7 returns nothing
local trigger t
local integer JZ7
local real CS8=(LoadReal(C7,(GetHandleId(CP7)),(692)))
set LP4="SangeAndYasha_SuccessfulHit"
call SaveReal(C7,(GetHandleId(CP7)),(692),(((TimerGetElapsed(V))+BE4)*1.))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,BE4+.01,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function CR8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call Z27(CP7,1093809717)
call Z27(CP7,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809717,false)
set t=null
endfunction
function CU8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="CU8"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if GetEventDamageSource()==CP7 and GetEventDamage()>0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if BP8(J67)==false then
call CT8(J67)
endif
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CV8 takes nothing returns nothing
local unit CP7=GetAttacker()
local unit J67=GetTriggerUnit()
local trigger t
local integer JZ7
set LP4="CV8"
if RG7(CP7,"4309")==false then
call RR7(CP7,"4309",.2)
if GetRandomReal(0,100)<BD4 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function CU8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
endif
set CP7=null
set J67=null
endfunction
function CW8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real CS8=(LoadReal(C7,(GetHandleId(CP7)),(693)))
set LP4="CW8"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or CS8<(TimerGetElapsed(V))then
call UnitRemoveAbility(CP7,1093809718)
call UnitRemoveAbility(CP7,1110454857)
call UnitRemoveAbility(CP7,1093809731)
call SaveReal(C7,(GetHandleId(CP7)),(693),((0)*1.))
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function CX8 takes unit CP7 returns nothing
local trigger t
local integer JZ7
local real CS8=(LoadReal(C7,(GetHandleId(CP7)),(693)))
set LP4="Sange_SuccessfulHit"
call SaveReal(C7,(GetHandleId(CP7)),(693),(((TimerGetElapsed(V))+BG4)*1.))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,BG4+.01,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function CW8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call Z27(CP7,1093809718)
call Z27(CP7,1093809731)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809718,false)
set t=null
endfunction
function CY8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="CY8"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if GetEventDamageSource()==CP7 and GetEventDamage()>0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if BP8(J67)==false then
call CX8(J67)
endif
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CZ8 takes nothing returns nothing
local unit CP7=GetAttacker()
local unit J67=GetTriggerUnit()
local trigger t
local integer JZ7
set LP4="CZ8"
if RG7(CP7,"4309")==false then
call RR7(CP7,"4309",.2)
if GetRandomReal(0,100)<BF4 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function CY8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
endif
set CP7=null
set J67=null
endfunction
function CA8 takes nothing returns nothing
local unit VC8=GetAttacker()
local integer CB8=25
local integer id=GetPlayerId(GetOwningPlayer(GetAttacker()))
local integer RP7=GetHandleId(VC8)
local real YN7=TimerGetElapsed(V)
local real CC8=R77(RP7,"bashertime")
local boolean C38=R87(RP7,"basheractive")
local boolean C68=R87(RP7,"basherremove")
local boolean CL8=YN7<CC8
local boolean C18=false
set LP4="CA8"
if IsUnitType(VC8,UNIT_TYPE_MELEE_ATTACKER)==false then
set CB8=$A
endif
if GetRandomInt(0,100)<CB8 then
set C18=true
endif
if GetUnitAbilityLevel(VC8,1093683786)>0 or GetUnitAbilityLevel(VC8,1093679153)>0 or GetUnitAbilityLevel(VC8,1093682997)>0 or GetUnitAbilityLevel(VC8,1093679429)>0 then
call UnitRemoveAbility(VC8,1093744436)
set VC8=null
return
endif
if C38 and CL8==false and C68==false then
call QD7(RP7,"bashertime",(YN7+2)*1.)
if C18==false then
call QF7(RP7,"basherremove",true)
endif
elseif CL8 or C68 then
call UnitRemoveAbility(VC8,1093744436)
call QF7(RP7,"basheractive",false)
call QF7(RP7,"basherremove",false)
endif
if C18 then
call Z27(VC8,1093744436)
call UnitMakeAbilityPermanent(VC8,true,1093744437)
call QF7(RP7,"basheractive",true)
endif
set VC8=null
endfunction
function C08 takes real E08 returns boolean
return(100*GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE))<E08
endfunction
function AntiTK_Building takes nothing returns boolean
return(C08($A)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE) and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)!=null
endfunction
function AntiTK_Hero takes nothing returns boolean
return C08(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0)
endfunction
function AntiTK_Creep takes nothing returns boolean
return(C08(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))!=null
endfunction
function AntiTK_Exception takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or RG7(GetAttacker(),"4328")
endfunction
function C58 takes nothing returns nothing
if not((C08($A)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE) and GetUnitTypeId(GetTriggerUnit())!=1702129516 and GetUnitTypeId(GetTriggerUnit())!=1970172012)or(C08(25)and(GetUnitAbilityLevel(GetTriggerUnit(),1112433775)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1111847784)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110454321)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458705)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110458704)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455620)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455629)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455630)>0 or GetUnitAbilityLevel(GetTriggerUnit(),1110455631)>0))or(C08(50)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false or GetUnitTypeId(GetTriggerUnit())==1700946284 or GetUnitTypeId(GetTriggerUnit())==1697657398 or GetUnitTypeId(GetTriggerUnit())==1970107511 or GetUnitTypeId(GetTriggerUnit())==1966092370))or(GetUnitTypeId(GetTriggerUnit())==1966092371 or GetUnitTypeId(GetTriggerUnit())==1865429334 or RG7(GetAttacker(),"4328")))then
call IssueImmediateOrderById(GetAttacker(),$D0004)
endif
endfunction
function C28 takes nothing returns boolean
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call C58()
elseif IsUnitType(GetAttacker(),UNIT_TYPE_HERO) or LR7(GetAttacker())then
set OF4=GetPlayerId(GetOwningPlayer(GetAttacker()))
if RJ4[OF4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitIllusion(GetAttacker())==false and PD7(GetAttacker(),SU[RZ]) then
call CP8()
endif
if RN4[OF4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(PD7(GetAttacker(),SU[RL]) or PD7(GetAttacker(),SU[R3]))then
call CA8()
endif
if RQ4[OF4]>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and PD7(GetAttacker(),SU[T1]) then
call CV8()
elseif(RR4[OF4]>0 or EY7[OF4]>0)and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetAttacker())==false and(PD7(GetAttacker(),SU[OL]) or PD7(GetAttacker(),SU[N3]))then
call CZ8()
endif
elseif GetUnitAbilityLevel(GetAttacker(),1093744467)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false then
call VB8()
endif
return false
endfunction
function C_8 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
set LP4="C_8"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT or R87(GetHandleId(Z47),"PendingUnfreeze") then
if R87(GetHandleId(Z47),"PendingUnfreeze") then
call QF7(GetHandleId(Z47),"PendingUnfreeze",false)
call RK7(Z47,"Frozen")
call UnitRemoveAbility(Z47,1093678162)
call BQ8(Z47,false)
call PauseUnit(Z47,false)
call Q47(RP7)
call RN7(t)
elseif GetSpellTargetUnit()==Z47 and GetSpellAbilityId()==vw and(GetPlayerSlotState(GetOwningPlayer((Z47)))==PLAYER_SLOT_STATE_LEFT)and RG7(Z47,"Frozen") then
call RK7(Z47,"Frozen")
call UnitRemoveAbility(Z47,1093678162)
call BQ8(Z47,false)
call PauseUnit(Z47,false)
call Q47(RP7)
call RN7(t)
endif
elseif A47(Z47)==false then
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
call RI7(Z47,"Frozen")
call UnitAddAbility(Z47,1093678162)
call BQ8(Z47,true)
call PauseUnit(Z47,true)
endif
set Z47=null
set t=null
return false
endfunction
function L48 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetSpellTargetUnit()
call QF7(GetHandleId(Z47),"PendingUnfreeze",false)
call RI7(Z47,"Frozen")
call UnitAddAbility(Z47,1093678162)
call BQ8(Z47,true)
call PauseUnit(Z47,true)
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"x",GetUnitX(Z47)*1.)
call QD7(RP7,"y",GetUnitY(Z47)*1.)
call TriggerRegisterTimerEvent(t,1.,true)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C_8))
set t=null
set Z47=null
endfunction
function L78 takes nothing returns boolean
if GetSpellAbilityId()==TU and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)and RG7(GetSpellTargetUnit(),"Frozen")==false then
call L48()
elseif(GetSpellAbilityId()==vw or GetSpellAbilityId()==TU)and(GetPlayerSlotState(GetOwningPlayer((GetSpellTargetUnit())))==PLAYER_SLOT_STATE_LEFT)==false then
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652366))))
endif
return false
endfunction
function L88 takes destructable d returns boolean
local real x=GetDestructableX(d)
local real y=GetDestructableY(d)
local group g=ZI7()
local boolean L98
call GroupEnumUnitsInRange(g,x,y,$FA,Condition(function D98))
set L98=FirstOfGroup(g)!=null
call ZH7(g)
set g=null
return L98
endfunction
function LD8 takes nothing returns nothing
if YE7(GetEnumDestructable())and GetDestructableLife(GetEnumDestructable())<1 and GetDestructableTypeId(GetEnumDestructable())!=1110454322 and GetDestructableTypeId(GetEnumDestructable())!=1110454323 then
if L88(GetEnumDestructable())==false then
call DestructableRestoreLife(GetEnumDestructable(),GetDestructableMaxLife(GetEnumDestructable()),false)
if PW[GetPlayerId(GetLocalPlayer())]==1 and GetDestructableTypeId(GetEnumDestructable())==1096053874 then
call SetDestructableAnimation(GetEnumDestructable(),"stand alternate")
endif
endif
endif
endfunction
function LE8 takes nothing returns nothing
call EnumDestructablesInRectAll(bj_mapInitialPlayableArea,function LD8)
endfunction
function LF8 takes unit it,unit m5 returns boolean
local integer i=GetUnitAbilityLevel(it,1093742674)
local integer j=GetUnitLevel(m5)
return(i>0)and((j<=2)or(i>1 and j<=i+2))
endfunction
function LG8 takes nothing returns boolean
local unit LH8=GetAttacker()
local unit LI8=GetTriggerUnit()
local integer i1=GetUnitTypeId(LH8)
local integer O5=GetPlayerId(GetOwningPlayer(LH8))
set LP4="LG8"
if GetUnitTypeId(LI8)==1848651852 then
if IsUnitIllusion(LH8) then
call KillUnit(LH8)
elseif IsUnitInRegion(ow,LH8)==false then
call AV7(GetOwningPlayer(LH8),(GetObjectName((1848652597))))
call IssueImmediateOrderById(LH8,$D0004)
endif
elseif((i1==1430467634)and(Bz>TB4[16+O5])and((GetUnitTypeId(LI8)==1852010091)or(GetUnitTypeId(LI8)==1852534636))and WQ7(GetOwningPlayer(LH8)))then
if LF8(LH8,LI8)then
call PW7(LH8,$D0278,1093742674,LI8)
endif
elseif((i1==1430467634)and(Bz>TB4[16+O5])and WQ7(GetOwningPlayer(LH8))and(GetRandomInt(1,4)==1)and(not IsUnitType(LI8,UNIT_TYPE_MECHANICAL))and(not IsUnitType(LI8,UNIT_TYPE_ANCIENT))and GetUnitTypeId(LI8)!=1848658008 and GetUnitTypeId(LI8)!=1852796263 and GetUnitTypeId(LI8)!=1852207221 and GetUnitTypeId(LI8)!=1853060204 and GetUnitTypeId(LI8)!=1853055348 and GetUnitTypeId(LI8)!=1853060200 and GetUnitTypeId(LI8)!=1848651859 and GetUnitTypeId(LI8)!=1852207976 and GetUnitTypeId(LI8)!=1852272243 and GetUnitTypeId(LI8)!=1852270641 and GetUnitTypeId(LI8)!=1852798821 and GetUnitTypeId(LI8)!=1852077175 and GetUnitTypeId(LI8)!=1853320295)then
if LF8(LH8,LI8)then
call PW7(LH8,$D0278,1093742674,LI8)
endif
elseif((i1==1429221443)and WQ7(GetOwningPlayer(LH8))and(not IsUnitType(LI8,UNIT_TYPE_MECHANICAL))and(not IsUnitType(LI8,UNIT_TYPE_ANCIENT))and(GetUnitTypeId(LI8)==1852010091)or(GetUnitTypeId(LI8)==1852534636)or GetUnitTypeId(LI8)==1848658008 or GetUnitTypeId(LI8)==1852796263 or GetUnitTypeId(LI8)==1852207221 or GetUnitTypeId(LI8)==1853060204 or GetUnitTypeId(LI8)==1853055348 or GetUnitTypeId(LI8)==1853060200 or GetUnitTypeId(LI8)==1848651859 or GetUnitTypeId(LI8)==1852207976 or GetUnitTypeId(LI8)==1852272243 or GetUnitTypeId(LI8)==1852270641 or GetUnitTypeId(LI8)==1852798821 or GetUnitTypeId(LI8)==1852077175 or GetUnitTypeId(LI8)==1853320295)then
if(GetUnitAbilityLevel(LH8,1093686103)>1)then
call PW7(LH8,$D0278,1093686103,LI8)
endif
elseif((i1==1211117653)and WQ7(GetOwningPlayer(LH8)))then
if((Bz>TB4[$80+O5])and(W27(LH8,A04,A04,A54,1093686865)))then
call PW7(LH8,$D020A,1093686865,LH8)
elseif(Bz>TB4[64+O5])and(W27(LH8,A54,A54,A14,1093686863))then
call IssueImmediateOrderById(LH8,$D00A4)
endif
endif
set LH8=null
set LI8=null
return false
endfunction
function LJ8 takes nothing returns nothing
local unit LK8=GetSummonedUnit()
local unit CP7=GetSummoningUnit()
local string fx=""
set LP4="LJ8"
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(CP7))and Y27(GetLocalPlayer())==false then
set fx="war3mapImported\\WardMark_T2.mdx"
endif
call AddSpecialEffectTarget(fx,LK8,"origin")
set LK8=null
set CP7=null
endfunction
function LM8 takes nothing returns boolean
return true
endfunction
function LN8 takes unit Z47,unit LO8 returns nothing
local integer LP8
local item LQ8
set LP4="Rfv"
if GetUnitTypeId(GetSummonedUnit())==1865429044 then
set LP8=SU[TC]
else
set LP8=SU[VC]
endif
call DisableTrigger(H84)
set LQ8=PH7(Z47,LP8)
if LQ8==null then
set IQ4=GetOwningPlayer(Z47)
set HZ4=CreateItem(LP8,0,0)
call UnitAddItem(Z47,HZ4)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
else
call SetItemCharges(LQ8,GetItemCharges(LQ8)+1)
endif
call EnableTrigger(H84)
set LQ8=null
endfunction
function LR8 takes nothing returns nothing
local unit LO8=GetSummonedUnit()
local unit Z47=GetSummoningUnit()
set LP4="LR8"
if GetUnitTypeId(GetSummonedUnit())==1865429044 or GetUnitTypeId(GetSummonedUnit())==1868921189 then
if IsUnitInRegion(ow,LO8)then
call LN8(Z47,LO8)
call RemoveUnit(LO8)
elseif OI7(Z47)then
call LN8(Z47,LO8)
call AV7(GetOwningPlayer(LO8),"Couriers cannot place wards")
call RemoveUnit(LO8)
else
call LJ8()
endif
elseif GetUnitTypeId(LO8)==1869836340 or GetUnitTypeId(LO8)==1865429048 or GetUnitTypeId(LO8)==1865429049 or GetUnitTypeId(LO8)==1865429315 or GetUnitTypeId(LO8)==1865429316 or GetUnitTypeId(LO8)==1865429317 then
call SelectUnitAddForPlayer(LO8,GetOwningPlayer(LO8))
elseif GetUnitTypeId(LO8)==1865429040 or GetUnitTypeId(LO8)==1865429041 or GetUnitTypeId(LO8)==1865429057 or GetUnitTypeId(LO8)==1865429080 then
call SelectUnitAddForPlayer(LO8,GetOwningPlayer(LO8))
endif
set Z47=null
set LO8=null
endfunction
function LS8 takes unit Z47 returns real
local real LT8
set LP4="RHv"
if WM7(GetOwningPlayer(Z47))then
set LT8=GetRectCenterX(L9)
else
set LT8=GetRectCenterX(C9)
endif
return LT8
endfunction
function LU8 takes unit Z47 returns real
local real LT8
set LP4="RJv"
if WM7(GetOwningPlayer(Z47))then
set LT8=GetRectCenterY(L9)
else
set LT8=GetRectCenterY(C9)
endif
return LT8
endfunction
function LV8 takes unit Z47,integer n5,integer LW8 returns item
local real x=LS8(Z47)
local real y=LU8(Z47)
local item TS8=CreateItem(n5,x,y)
local integer i=0
local boolean array LX8
local item Z4
set LP4="SafeUnitAddItemToSlotById"
set GD7=IQ4
call DisableTrigger(H84)
if n5>0 then
loop
exitwhen i>(UnitInventorySize(Z47)-1)
if UnitItemInSlot(Z47,i)==null and i!=LW8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(Z47,Z4)
set LX8[i]=true
else
set LX8[i]=false
endif
if i==LW8 then
call EnableTrigger(H84)
call UnitAddItem(Z47,TS8)
call DisableTrigger(H84)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if LX8[i] then
call RemoveItem(UnitItemInSlot(Z47,i))
endif
set i=i+1
endloop
endif
call EnableTrigger(H84)
set HZ4=TS8
set TS8=null
set Z4=null
return HZ4
endfunction
function LY8 takes unit CP7 returns boolean
local integer JZ7=GetHandleId(CP7)
local integer i=0
local real YJ8=(TimerGetElapsed(V))
local real LZ8=$A
loop
exitwhen i>2
if(LoadReal(C7,(JZ7),(730+i)))<YJ8-LZ8 then
return false
endif
set i=i+1
endloop
return true
endfunction
function LA8 takes unit CP7 returns nothing
local integer JZ7=GetHandleId(CP7)
local integer LB8=(LoadInteger(C7,(JZ7),(729)))
call SaveReal(C7,(JZ7),(730+LB8),(((TimerGetElapsed(V)))*1.))
set LB8=LB8+1
if LB8==3 then
set LB8=0
endif
call SaveInteger(C7,(JZ7),(729),(LB8))
endfunction
function LC8 takes unit ZO7 returns nothing
local integer i=0
local item L38
local integer B58
local boolean L68=false
if LY8(ZO7)then
set L68=true
endif
loop
exitwhen i>5
set L38=UnitItemInSlot(ZO7,i)
set B58=OM7(L38)
if B58==YB and L68 then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L38)
call RemoveItem(L38)
set HZ4=LV8(ZO7,SU[LB],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
if B58==LB and L68==false then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L38)
call RemoveItem(L38)
set HZ4=LV8(ZO7,SU[YB],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
set i=i+1
endloop
set ZO7=null
set L38=null
endfunction
function V58 takes nothing returns nothing
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(WO7(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
if VL4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
call SaveReal(C7,(GetHandleId(GetTriggerUnit())),(785),(((TimerGetElapsed(V)))*1.))
if GetEventDamage()>20 then
call LA8(GetTriggerUnit())
endif
endif
endif
endfunction
function LL8 takes unit Z47 returns nothing
local integer i=0
local item L18
local integer BB8
local boolean L08=false
if(LoadReal(C7,(GetHandleId(Z47)),(785)))+3>(TimerGetElapsed(V))then
set L08=true
endif
loop
exitwhen i>5
set L18=UnitItemInSlot(Z47,i)
set BB8=OM7(L18)
if BB8==QW and L08 then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L18)
call RemoveItem(L18)
set HZ4=LV8(Z47,SU[RW],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
if BB8==RW and L08==false then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L18)
call RemoveItem(L18)
set HZ4=LV8(Z47,SU[QW],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
set i=i+1
endloop
set Z47=null
set L18=null
endfunction
function L58 takes unit Z47 returns nothing
local integer i=0
local item L28
local integer BB8
local boolean L_8=false
local real D49=4
if IsUnitType(Z47,UNIT_TYPE_MELEE_ATTACKER)==false then
set D49=6
endif
if(LoadReal(C7,(GetHandleId(Z47)),(785)))+D49>(TimerGetElapsed(V))then
set L_8=true
endif
loop
exitwhen i>5
set L28=UnitItemInSlot(Z47,i)
set BB8=OM7(L28)
if BB8==P2 and L_8 then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L28)
call RemoveItem(L28)
set HZ4=LV8(Z47,SU[R2],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
if BB8==R2 and L_8==false then
call DisableTrigger(H84)
set IQ4=GetItemPlayer(L28)
call RemoveItem(L28)
set HZ4=LV8(Z47,SU[P2],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call EnableTrigger(H84)
endif
set i=i+1
endloop
set Z47=null
set L28=null
endfunction
function D79 takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local integer id=GetPlayerId(GetOwningPlayer(ZO7))
if RK4[id]>0 and ZO7!=null and GetUnitTypeId(ZO7)>1 and IsUnitType(ZO7,UNIT_TYPE_DEAD)==false then
call LL8(ZO7)
endif
if RP4[id]>0 and ZO7!=null and GetUnitTypeId(ZO7)>1 and IsUnitType(ZO7,UNIT_TYPE_DEAD)==false then
call L58(ZO7)
endif
if EB7[id]>0 and ZO7!=null and GetUnitTypeId(ZO7)>1 and IsUnitType(ZO7,UNIT_TYPE_DEAD)==false then
call LC8(ZO7)
endif
set ZO7=null
endfunction
function D89 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and GetUnitTypeId(GetFilterUnit())!=1211117642 and GetUnitTypeId(GetFilterUnit())!=1211122232)!=null
endfunction
function D99 takes nothing returns boolean
local integer i=1
local unit ZO7
local integer id
local group g
if HE4>0 or HH4>0 or EX7>0 then
set g=ZI7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function D89))
loop
exitwhen i>5
set id=GetPlayerId(Y7[i])
set ZO7=G7[id]
call GroupAddUnit(g,ZO7)
set id=GetPlayerId(Z7[i])
set ZO7=G7[id]
call GroupAddUnit(g,ZO7)
set i=i+1
endloop
call ForGroup(g,function D79)
call ZH7(g)
set g=null
endif
set ZO7=null
return false
endfunction
function DD9 takes nothing returns nothing
local unit Z47=GetFilterUnit()
local integer i=0
local item TS8
local integer BB8
loop
exitwhen i>5
set TS8=UnitItemInSlot(Z47,i)
set BB8=OK7(TS8)
if(BB8==XZ or BB8==AZ or BB8==BZ)and GetItemUserData(TS8)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",Z47,"overhead"))
call AU7(GetOwningPlayer(Z47),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(Z47,SU[CZ],i)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
set i=i+1
endloop
set Z47=null
set TS8=null
endfunction
function DE9 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and WM7(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and A47(GetFilterUnit())==false then
call DD9()
endif
return false
endfunction
function DF9 takes nothing returns boolean
if UnitInventorySize(GetFilterUnit())>0 and WN7(GetOwningPlayer(GetFilterUnit()))and IsUnitIllusion(GetFilterUnit())==false and A47(GetFilterUnit())==false then
call DD9()
endif
return false
endfunction
function DG9 takes nothing returns boolean
local group g=ZI7()
set LP4="DG9"
call GroupEnumUnitsInRange(g,IW4,IX4,750,Condition(function DE9))
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsInRange(g,JX4,JY4,750,Condition(function DF9))
call ZH7(g)
set g=null
return false
endfunction
function DH9 takes unit u returns unit
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)==0 then
return u
else
return G7[GetPlayerId(GetOwningPlayer(u))]
endif
endfunction
function DI9 takes nothing returns boolean
if IsUnitType(GetKillingUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetDyingUnit(),GetOwningPlayer(GetKillingUnit()))==false then
if GetUnitTypeId(GetTriggerUnit())==1848651850 then
call D38(GetDyingUnit(),DH9(GetKillingUnit()),3,400)
elseif GetUnitTypeId(GetTriggerUnit())==1848651841 then
call D38(GetDyingUnit(),DH9(GetKillingUnit()),3,500)
elseif GetUnitTypeId(GetTriggerUnit())==1848651830 then
call D38(GetDyingUnit(),DH9(GetKillingUnit()),3,600)
endif
endif
return false
endfunction
function DJ9 takes nothing returns boolean
return GetUnitTypeId(GetEnteringUnit())==1697656901 or GetUnitTypeId(GetEnteringUnit())==1697657394
endfunction
function DK9 takes nothing returns nothing
call ShowUnitHide(GetEnteringUnit())
call SetUnitPathing(GetEnteringUnit(),false)
call SetUnitInvulnerable(GetEnteringUnit(),true)
if(GetPlayerController(GetOwningPlayer(GetEnteringUnit()))==MAP_CONTROL_USER)then
call UnitApplyTimedLifeBJ(20.,1112820806,GetEnteringUnit())
else
call TriggerSleepAction(10.)
if((GetUnitTypeId(GetEnteringUnit())==1697656901)or(GetUnitTypeId(GetEnteringUnit())==1697657394))then
call UnitApplyTimedLifeBJ(10.,1112820806,GetEnteringUnit())
endif
endif
endfunction
function DM9 takes nothing returns boolean
return((GetUnitTypeId(GetDyingUnit())==1697656914)or(GetUnitTypeId(GetDyingUnit())==1697657137)or(GetUnitTypeId(GetDyingUnit())==1697656915)or(GetUnitTypeId(GetDyingUnit())==1697657145))
endfunction
function DN9 takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==JF4)then
call E58("Tower"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JI4,false)
call XC7(GetKillingUnit(),1)
set P34=1
elseif(GetDyingUnit()==JG4)then
call E58("Tower"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JJ4,false)
call XC7(GetKillingUnit(),1)
set PC4=1
elseif(GetDyingUnit()==JH4)then
call E58("Tower"+I2S(0)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JK4,false)
call XC7(GetKillingUnit(),1)
set P64=1
elseif(GetDyingUnit()==JI4)then
call E58("Tower"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JM4,false)
call XC7(GetKillingUnit(),2)
set P34=2
elseif(GetDyingUnit()==JJ4)then
call E58("Tower"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JN4,false)
call XC7(GetKillingUnit(),2)
set PC4=2
elseif(GetDyingUnit()==JK4)then
call E58("Tower"+I2S(0)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(JO4,false)
call XC7(GetKillingUnit(),2)
set P64=2
elseif(GetDyingUnit()==JM4)then
call E58("Tower"+I2S(0)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(JR4,false)
call BQ8(JU4,false)
call BQ8(JP4,false)
call BQ8(JQ4,false)
call BQ8(WP,false)
call BQ8(zP,false)
call BQ8(vq,false)
call BQ8(eq,false)
call BQ8(fP,false)
call BQ8(FP,false)
call BQ8(lP,false)
call BQ8(LP,false)
call BQ8(MP,false)
call BQ8(pP,false)
call BQ8(PP,false)
call BQ8(qP,false)
call BQ8(QP,false)
call BQ8(sP,false)
call BQ8(tP,false)
set P34=3
elseif(GetDyingUnit()==JN4)then
call E58("Tower"+I2S(0)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(JS4,false)
call BQ8(JV4,false)
call BQ8(JP4,false)
call BQ8(JQ4,false)
call BQ8(WP,false)
call BQ8(zP,false)
call BQ8(vq,false)
call BQ8(eq,false)
call BQ8(fP,false)
call BQ8(FP,false)
call BQ8(lP,false)
call BQ8(LP,false)
call BQ8(MP,false)
call BQ8(pP,false)
call BQ8(PP,false)
call BQ8(qP,false)
call BQ8(QP,false)
call BQ8(sP,false)
call BQ8(tP,false)
set PC4=3
elseif(GetDyingUnit()==JO4)then
call E58("Tower"+I2S(0)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(JT4,false)
call BQ8(JW4,false)
call BQ8(JP4,false)
call BQ8(JQ4,false)
call BQ8(WP,false)
call BQ8(zP,false)
call BQ8(vq,false)
call BQ8(eq,false)
call BQ8(fP,false)
call BQ8(FP,false)
call BQ8(lP,false)
call BQ8(LP,false)
call BQ8(MP,false)
call BQ8(pP,false)
call BQ8(PP,false)
call BQ8(qP,false)
call BQ8(QP,false)
call BQ8(sP,false)
call BQ8(tP,false)
set P64=3
endif
if GetDyingUnit()==JP4 or GetDyingUnit()==JQ4 then
call E58("Tower"+I2S(0)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),4)
endif
if(((GetDyingUnit()==JP4)and(IsUnitDeadBJ(JQ4)))or((GetDyingUnit()==JQ4)and(IsUnitDeadBJ(JP4))))then
call BQ8(JE4,false)
set PV4=false
endif
endfunction
function DO9 takes nothing returns boolean
return((GetUnitTypeId(GetDyingUnit())==1966092365)or(GetUnitTypeId(GetDyingUnit())==1966092356)or(GetUnitTypeId(GetDyingUnit())==1966092366)or(GetUnitTypeId(GetDyingUnit())==1966092372))
endfunction
function DP9 takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))then
set gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]=gD[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]+1
endif
if(GetDyingUnit()==J34)then
call E58("Tower"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(J14,false)
call XC7(GetKillingUnit(),1)
set P14=1
elseif(GetDyingUnit()==J64)then
call E58("Tower"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(J04,false)
call XC7(GetKillingUnit(),1)
set PL4=1
elseif(GetDyingUnit()==JL4)then
call E58("Tower"+I2S(1)+I2S(1)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(J54,false)
call XC7(GetKillingUnit(),1)
set P04=1
elseif(GetDyingUnit()==J14)then
call E58("Tower"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(J24,false)
call XC7(GetKillingUnit(),2)
set P14=2
elseif(GetDyingUnit()==J04)then
call E58("Tower"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(J_4,false)
call XC7(GetKillingUnit(),2)
set PL4=2
elseif(GetDyingUnit()==J54)then
call E58("Tower"+I2S(1)+I2S(2)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call BQ8(K44,false)
call XC7(GetKillingUnit(),2)
set P04=2
elseif(GetDyingUnit()==J24)then
call E58("Tower"+I2S(1)+I2S(3)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(K94,false)
call BQ8(KF4,false)
call BQ8(K74,false)
call BQ8(K84,false)
call BQ8(ot,false)
call BQ8(rt,false)
call BQ8(at,false)
call BQ8(Vt,false)
call BQ8(PS,false)
call BQ8(QS,false)
call BQ8(SS,false)
call BQ8(tS,false)
call BQ8(TS,false)
call BQ8(US,false)
call BQ8(WS,false)
call BQ8(ZS,false)
call BQ8(vt,false)
call BQ8(et,false)
call BQ8(xt,false)
set P14=3
elseif(GetDyingUnit()==J_4)then
call E58("Tower"+I2S(1)+I2S(3)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(KD4,false)
call BQ8(KG4,false)
call BQ8(K74,false)
call BQ8(K84,false)
call BQ8(ot,false)
call BQ8(rt,false)
call BQ8(at,false)
call BQ8(Vt,false)
call BQ8(PS,false)
call BQ8(QS,false)
call BQ8(SS,false)
call BQ8(tS,false)
call BQ8(TS,false)
call BQ8(US,false)
call BQ8(WS,false)
call BQ8(ZS,false)
call BQ8(vt,false)
call BQ8(et,false)
call BQ8(xt,false)
set PL4=3
elseif(GetDyingUnit()==K44)then
call E58("Tower"+I2S(1)+I2S(3)+I2S(2),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),3)
call BQ8(KE4,false)
call BQ8(KH4,false)
call BQ8(K74,false)
call BQ8(K84,false)
call BQ8(ot,false)
call BQ8(rt,false)
call BQ8(at,false)
call BQ8(Vt,false)
call BQ8(PS,false)
call BQ8(QS,false)
call BQ8(SS,false)
call BQ8(tS,false)
call BQ8(TS,false)
call BQ8(US,false)
call BQ8(WS,false)
call BQ8(ZS,false)
call BQ8(vt,false)
call BQ8(et,false)
call BQ8(xt,false)
set P04=3
endif
if GetDyingUnit()==K74 or GetDyingUnit()==K84 then
call E58("Tower"+I2S(1)+I2S(4)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
call XC7(GetKillingUnit(),4)
endif
if(((GetDyingUnit()==K84)and(IsUnitDeadBJ(K74)))or((GetDyingUnit()==K74)and(IsUnitDeadBJ(K84))))then
call BQ8(JC4,false)
set PW4=false
endif
endfunction
function DQ9 takes nothing returns boolean
local integer x=0
set LP4="DQ9"
if GetPlayerSlotState(Y7[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Y7[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Y7[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Y7[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Y7[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[1])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[2])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[3])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[4])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
if GetPlayerSlotState(Z7[5])==PLAYER_SLOT_STATE_EMPTY then
set x=x+1
endif
return x==9
endfunction
function Ve takes nothing returns boolean
return bj_isSinglePlayer and DQ9()
endfunction
function DR9 takes nothing returns nothing
set X04=true
endfunction
function DS9 takes nothing returns nothing
set H74=false
endfunction
function DT9 takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function DU9 takes nothing returns nothing
local group g=ZI7()
set LP4="DU9"
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function DT9))
call ZH7(g)
set g=null
set X9=true
endfunction
function DV9 takes nothing returns nothing
local group g=ZI7()
set LP4="DV9"
call GroupEnumUnitsOfPlayer(g,Y7[0],Condition(function DT9))
call ZH7(g)
set g=null
set X9=true
endfunction
function DW9 takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1865429044 or GetUnitTypeId(GetFilterUnit())==1868921189 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function DX9 takes nothing returns nothing
local group g=ZI7()
set LP4="DX9"
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function DW9))
call ZH7(g)
set g=null
set X9=true
endfunction
function DY9 takes nothing returns nothing
set B4=false
endfunction
function DZ9 takes nothing returns nothing
set B4=true
endfunction
function DA9 takes nothing returns nothing
call DV9()
call DU9()
set X9=true
endfunction
function DB9 takes nothing returns nothing
local string DC9=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer D39=S2I(DC9)
set LP4="DB9"
if D39<0 or D39>24 then
set D39=0
endif
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,D39)
set X9=true
endfunction
function D69 takes nothing returns boolean
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
call SetHeroLevel(GetFilterUnit(),GetHeroLevel(GetFilterUnit())+B47(IG4,1),true)
endif
return false
endfunction
function DL9 takes nothing returns nothing
local string D19=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))
local integer D09=S2I(D19)
local group g=ZI7()
set LP4="DL9"
if SubString(GetEventPlayerChatString(),0,9)!="-lvlupall" and SubString(GetEventPlayerChatString(),0,9)!="-lvlupfor" then
if D09<1 then
set D09=1
endif
set IG4=D09
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function D69))
endif
call ZH7(g)
set g=null
set X9=true
endfunction
function D59 takes nothing returns nothing
call TriggerExecute(HS)
set X9=true
endfunction
function D29 takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetFilterUnit()))
set LP4="D29"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
set TB4[O5]=.0
set TB4[16+O5]=.0
set TB4[32+O5]=.0
set TB4[48+O5]=.0
call UnitResetCooldown(GetFilterUnit())
call TimerStart(N74[GetPlayerId((GetOwningPlayer(GetFilterUnit())))],0,false,null)
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE))
call SetUnitState(GetFilterUnit(),UNIT_STATE_MANA,GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_MANA))
endif
return false
endfunction
function D_9 takes nothing returns nothing
local group g=ZI7()
set LP4="D_9"
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function D29))
call ZH7(g)
set g=null
set X9=true
endfunction
function E49 takes nothing returns nothing
if XL4 then
return
endif
call KillUnit(G7[GetPlayerId(GetTriggerPlayer())])
set X9=true
endfunction

// 自定义触发源代码区
//===========================================================================
// function: Convert Player in Game
//===========================================================================
function ConvertToPlayer takes integer playerNum returns player

    local player whichPlayer
    if ( playerNum < 1 or playerNum > 10 ) then
        // 不在返回范围
        return whichPlayer
    endif

    if ( playerNum > 0 and playerNum < 6 ) then
        set whichPlayer = Player(playerNum)
    elseif ( playerNum >= 6 and playerNum < 11 ) then
        set whichPlayer = Player(playerNum+1)
    endif
    return whichPlayer
endfunction

//===========================================================================
// function: Convert PlayerID in Game
//===========================================================================
function ConvertPlayerGameID takes player whichPlayer returns integer
    local integer loc_PlayerId = GetPlayerId(whichPlayer)
    //local integer TempValue = GetPlayerId(whichPlayer)

    if ( loc_PlayerId > 0 and loc_PlayerId < 6 ) then
        //什么都不做
        call DoNothing()
    elseif ( loc_PlayerId > 6 and loc_PlayerId < 12 ) then
        set loc_PlayerId = loc_PlayerId - 1
    else
        set loc_PlayerId = 0
    endif

    return loc_PlayerId
endfunction



function SplitString takes nothing returns nothing
    local string ChatString = GetEventPlayerChatString()
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
    call SplitStringWith( ChatString, " " )
endfunction

//===========================================================================
// Trigger: FunMode
//===========================================================================
function Trig_FunMode_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "funmode" ) ) then
        return false
    endif
    return true
endfunction

function AddAbilityA takes unit tUnit returns nothing
	//60%闪避
    call UnitAddAbilityBJ( 'A2OT', tUnit )
    //增加2%生命恢复速度
    call UnitAddAbilityBJ( 'A2P4', tUnit )
    //多重攻击
    call UnitAddAbilityBJ( 'A1TW', tUnit )

endfunction

function AddAbilityB takes unit tUnit returns nothing
	//60%闪避
    //call UnitAddAbilityBJ( 'A2OT', tUnit )
    //增加2%生命恢复速度
    call UnitAddAbilityBJ( 'A2P4', tUnit )
    //多重攻击
    call UnitAddAbilityBJ( 'A1TW', tUnit )

endfunction

function Trig_FunMode_Actions takes nothing returns nothing
	local unit tUnit

	call ExecuteFunc("EM9")	//-test模式
	call CreateNUnitsAtLoc( 1, 'uC74', Player(PLAYER_NEUTRAL_PASSIVE), Location(-6565, -6592), bj_UNIT_FACING )	//黑市商人
	call CreateNUnitsAtLoc( 1, 'u00Z', Player(PLAYER_NEUTRAL_PASSIVE), Location(-5860, -6866), bj_UNIT_FACING )	//地精实验室
	set CoordUnit = CreateUnitAtLoc( Player(SelfIndex), 'halt', Location(-6928, -7632), bj_UNIT_FACING)	//国王祭坛
	call UnitAddAbility(CoordUnit, 'A0H5')	//增加500魔法上限
	call UnitAddAbility(CoordUnit, 'A141')	//防御符文
	//call CreateNUnitsAtLoc( 1, 'Hamg', Player(PLAYER_NEUTRAL_AGGRESSIVE), Location(0, 0), bj_UNIT_FACING )
	call CreateNUnitsAtLoc( 1, 'ncp2', Player(neutralIndex1), Location(-7040.00, 6784.00), bj_UNIT_FACING)	//能量圈(较大)
	
	// 添加技能,世界之树JE4，冰封王座JC4
	call UnitAddAbilityBJ( 'A2OT', JE4 )
	call UnitAddAbilityBJ( 'A2P4', JE4 )
	call UnitAddAbilityBJ( 'A164', JE4 )
	call UnitAddAbilityBJ( 'A2OT', JC4 )	//60%闪避
	call UnitAddAbilityBJ( 'A2P4', JC4 )	//2%生命恢复
	call UnitAddAbilityBJ( 'A164', JC4 )	//增加1000生命上限

	call UnitAddAbilityBJ( 'A2P4', IY4 )	//生命之泉
	call UnitAddAbilityBJ( 'A2P6', IY4 )

	set tUnit = GroupPickRandomUnit(GetUnitsOfPlayerAndTypeId(Player(SelfIndex), 'ncop'))	//能量圈
	call UnitAddAbility(KI4, 'A2OU')	//3%回蓝
	call UnitAddAbility(KI4, 'A2P4')	//2%生命恢复
	call UnitAddAbility(CoordUnit, 'A2P8')	//森林之眼
	call UnitAddAbility(CoordUnit, 'A2PC')	//驱逐魔法
	call UnitAddAbility(CoordUnit, 'A2PD')	//沉默魔法
	call UnitAddAbility(CoordUnit, 'A2PE')	//闪光弹
	call UnitAddAbility(CoordUnit, 'A2PF')	//焦土
	call UnitAddAbility(CoordUnit, 'Avul')	//无敌

	call AddAbilityB(JM4)	//e00S,远古守护者 - 等级3
	call AddAbilityB(JN4)	//e00S,远古守护者 - 等级3
	call AddAbilityB(JO4)	//e00S,远古守护者 - 等级3
	call AddAbilityA(JP4)	//e019,远古守护者 - 等级4
	call AddAbilityA(JQ4)	//e019,远古守护者 - 等级4

	call AddAbilityB(J24)	//u00N,幽魂塔 - 等级3
	call AddAbilityB(J_4)	//u00N,幽魂塔 - 等级3
	call AddAbilityB(K44)	//u00N,幽魂塔 - 等级3
	call AddAbilityB(K74)	//u00T,幽魂塔 - 等级4
	call AddAbilityB(K84)	//u00T,幽魂塔 - 等级4
endfunction

//===========================================================================
// Trigger: ClearChat
//===========================================================================
function Trig_ClearChat_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "clearchat" ) ) then
        return false
    endif
    return true
endfunction

function Trig_ClearChat_Actions takes nothing returns nothing
	//清理聊天信息
	//call DisplayTimedTextToPlayer(Player(SelfIndex),0,0,1,"|cffff0000清理聊天信息|r")
    call ClearTextMessagesBJ( GetPlayersAll() )
endfunction

//===========================================================================
// Trigger: TestData
//===========================================================================
function Trig_TestData_Conditions takes nothing returns boolean
    local integer length = StringLength("testdata")
    local string ChatString = GetEventPlayerChatString()
    if ( not ( StringCase(SubString(ChatString, 0, length), false) == "testdata" ) ) then
        return false
    elseif StringLength(ChatString) > length and SubString(ChatString, length, length+1) != " " then
    	return false
    endif
    return true
endfunction

function Trig_TestData_Actions takes nothing returns nothing
	//清理聊天信息
	local string tString
	call SplitString()

	set tString = LoadStringBJ( 2, StringHashBJ("TDS"), HashTable )
	if StringLength(tString) > 0 then
	    set TestReal = S2R(tString)
	    call BJDebugMsg(R2S(TestReal))
	endif

	call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: Fog
//===========================================================================
function Trig_Fog_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "fog" ) ) then
        return false
    endif
    return true
endfunction
function Trig_Fog_Actions takes nothing returns nothing
    if ( IsFogEnabled() == true ) then
        //禁用战争迷雾
        call FogEnableOff()
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff禁用战争迷雾|r" ))
    else
        //启用战争迷雾
        call FogEnableOn()
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff启用战争迷雾|r" ))
    endif
endfunction

//===========================================================================
// Trigger: IsCheck
//===========================================================================
function Trig_IsCheck_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "ischeck" ) ) then
        return false
    endif
    return true
endfunction

function Trig_IsCheck_Actions takes nothing returns nothing
    if ( isCheck ) then
        //禁用检查
        set isCheck = false
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff禁用检查|r" ))
    else
        //启用检查
        set isCheck = true
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff启用检查|r" ))
    endif
    //call QN9("-apnengstsc",1)
    //call AX7("R89",AP)
endfunction

//===========================================================================
// Trigger: ShowUnitPoint
//===========================================================================
function Trig_ShowPoint_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "showpoint" ) ) then
        return false
    endif
    return true
endfunction

function Trig_ShowPoint_Actions takes nothing returns nothing
    //分别显示坐标、移动速度、单位类型ID、属于哪个玩家
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local integer unitId = GetUnitTypeId(TempUnit)
    //local real RealValue = GetUnitStateSwap(ConvertUnitState(0x51), TempUnit)
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff单位|r" + ( GetUnitName(TempUnit) + "|cff0042ff的坐标|r" ) ) + ( ( "(" + ( R2S(GetLocationX(GetUnitLoc(TempUnit))) + "," ) ) + ( R2S(GetLocationY(GetUnitLoc(TempUnit))) + ")" ) ) ) )
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff单位|r" + ( GetUnitName(TempUnit) + "|cff0042ff的移动速度|r" ) ) + R2S(GetUnitMoveSpeed(TempUnit)) ) )
    //call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ffAAAAA|r" + R2S(RealValue)))
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff单位类型字符串：|r" + UnitId2StringBJ(unitId) + "|cff0042ff ID |r" + IntegerToASCIIString(unitId) ) )
    set PlayerIndex = GetConvertedPlayerId(GetOwningPlayer(TempUnit))
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff属于玩家|r" + I2S(PlayerIndex)))
endfunction

//===========================================================================
// Trigger: EndGame
//===========================================================================
function Trig_EndGame_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "endgame" ) ) then
        return false
    endif
    return true
endfunction

function Trig_EndGame_Actions takes nothing returns nothing
    //结束游戏，不显示对话框，不显示排行榜
    call CustomVictoryBJ( Player(SelfIndex), false, false )
endfunction

//===========================================================================
// Actions: ContinueGame
//===========================================================================
function Trig_ContinueGame_Actions takes nothing returns nothing
    //继续游戏
    if DeathBaseIndex == 1 then
        // 世界之树被催毁
        set BaseCustomValue[1] = 1
    elseif DeathBaseIndex == 2 then
    	// 冰封王座被催毁
    	set BaseCustomValue[2] = 1
    endif
endfunction

function Trig_StopGame_Actions takes nothing returns nothing
    //停止游戏
    if DeathBaseIndex == 1 then
        // 世界之树被催毁
        call CI8()
    elseif DeathBaseIndex == 2 then
    	// 冰封王座被催毁
    	call CK8()
    endif
endfunction

//===========================================================================
// Trigger: CreateUnit
//===========================================================================
function Trig_CreateUnit_Conditions takes nothing returns boolean
    local integer length = StringLength("createunit")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "createunit" ) ) then
        return false
    endif
    return true
endfunction

function Trig_CreateUnit_Actions takes nothing returns nothing

    local integer tUnitID
    local unit TempUnit
    local item TempItem
    local string TempText
    local group tGroup
    local location tPoint = null

    call SplitString()
    set PlayerIndex = 0
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) < 4 ) then
        //请输入单位ID
        call DisplayTextToForce( GetPlayersAll(), ( "|c00ff0000请输入单位ID|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //单位ID字符串ASCII转整数
        set tUnitID = ASCIIStringToInteger(TempText)
    else
        //单位名字转ID整数
        set tUnitID = String2UnitIdBJ(TempText)
    endif

    //set AbilityID = 808464432
    if ( tUnitID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( LoadStringBJ(3, StringHashBJ("TDS"), HashTable) == "for" and S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable)) > 0 and S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable)) <= 16 ) then
        //若指定了玩家，则设置指定玩家
        set PlayerIndex = S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable))
    endif

    if CoordUnit != null then
	    set tPoint = GetUnitRallyPoint(CoordUnit)
	else
		//选取在当前镜头中心点
	    set tPoint = GetCameraTargetPositionLoc()
	endif

    if ( IsUnitIdType(tUnitID, UNIT_TYPE_HERO) ) then
        if PlayerIndex == neutralIndex4+1 then
            // 中立被动
            set TempUnit = CreateUnitAtLoc(ConvertedPlayer(PlayerIndex), tUnitID, tPoint, bj_UNIT_FACING)
            //显示创建单位的名字以及所属玩家，小地图闪烁显示
        	call DisplayTextToForce( GetPlayersAll(), ( ( "|cff0042ff创建单位|r" + GetUnitName(TempUnit) ) + ( "|cff0042ff给玩家|r" + I2S(PlayerIndex) ) ) )
        	call PingMinimapLocForForceEx( GetPlayersAll(), tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
        	set TempUnit = null
        else
        	//不允许创建英雄类单位
        	call DisplayTextToForce( GetPlayersAll(), "|cff0042ff不允许创建英雄类单位|r" )
        endif
    elseif ( IsUnitIdType(tUnitID, UNIT_TYPE_STRUCTURE) == false ) then
        //非建筑类单位
        if (PlayerIndex == 0) then
	        // 中立敌对
            set PlayerIndex = neutralIndex1+1
        endif
        
        set tGroup = CreateNUnitsAtLoc( 1, tUnitID, ConvertedPlayer(PlayerIndex), tPoint, bj_UNIT_FACING )
        if ( CountUnitsInGroup(tGroup) <= 0 ) then
            //创建单位失败
            call DisplayTextToForce( GetPlayersAll(), "|cffff0000创建单位失败|r" )
            return
        endif
        set TempUnit = GetLastCreatedUnit()
        //显示创建单位的名字以及所属玩家，小地图闪烁显示
        call DisplayTextToForce( GetPlayersAll(), ( ( "|cff0042ff创建单位|r" + GetUnitName(TempUnit) ) + ( "|cff0042ff给玩家|r" + I2S(PlayerIndex) ) ) )
        call PingMinimapLocForForceEx( GetPlayersAll(), tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
        set TempUnit = null
    else
        //建筑类单位
        if (PlayerIndex == 0) then
            set PlayerIndex = 16
        endif
        
        call CreateNUnitsAtLoc( 1, tUnitID, ConvertedPlayer(PlayerIndex), tPoint, bj_UNIT_FACING )
        set TempUnit = GetLastCreatedUnit()
        call DisplayTextToForce( GetPlayersAll(), ( ( "|cff0042ff创建建筑|r" + GetUnitName(TempUnit) ) + ( "|cff0042ff给玩家|r" + I2S(PlayerIndex) ) ) )
        call PingMinimapLocForForceEx( GetPlayersAll(), tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )

        if tUnitID == 'e019' then
            //给远古守护者添加修理技能
            call UnitAddAbilityBJ( 'Ahrp', TempUnit )
        endif

        call AddItemToStockBJ( GetItemTypeId(TempItem), TempUnit, 1, 3 )
        // 添加选择英雄技能
        call UnitAddAbilityBJ( 'Aneu', TempUnit )
        // 添加商店购买物品技能
        call UnitAddAbilityBJ( 'Apit', TempUnit )
        // 添加物品重生十字章，当前1个，最大3个
        call AddItemToStockBJ( 'moon', TempUnit, 1, 3 )
        //call UnitAddItem( TempUnit, 'moon' )
        set TempUnit = null
    endif
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: CopyUnit
//===========================================================================
function Trig_CopyUnit_Conditions takes nothing returns boolean
    local integer length = StringLength("copyunit")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "copyunit" ) ) then
        return false
    endif
    return true
endfunction

function Trig_CopyUnit_Actions takes nothing returns nothing
    local integer TempValue = IMaxBJ(S2I(SubString(GetEventPlayerChatString(), 9, 0)), 1)
    local unit TempUnit
    if ( CountUnitsInGroup(GetUnitsSelectedAll(Player(SelfIndex))) == 1 ) then
        set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
        if ( IsUnitType(TempUnit, UNIT_TYPE_HERO) == false and IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == false and IsUnitType(TempUnit, UNIT_TYPE_SUMMONED) == false ) then
            call CreateNUnitsAtLocFacingLocBJ( TempValue, GetUnitTypeId(TempUnit), GetOwningPlayer(TempUnit), GetUnitLoc(TempUnit), GetRectCenter(GetPlayableMapRect()) )
            call DisplayTextToForce( GetPlayersAll(), ( ( "|cff0042ff复制单位|r" + GetUnitName(TempUnit) ) + ( ( "|cff0042ff数量|r" + I2S(TempValue) ) + "|cff0042ff个|r" ) ) )
        else
            //该单位不能复制
            call DisplayTextToForce( GetPlayersAll(), "|cffff0000该单位不能复制|r" )
        endif
    else
    endif
endfunction

//===========================================================================
// Trigger: RemoveUnit
//===========================================================================
function Trig_RemoveUnit_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "removeunit" ) ) then
        return false
    endif
    return true
endfunction

function Trig_RemoveUnit_Actions takes nothing returns nothing
    local group udg_group = GetUnitsSelectedAll(Player(SelfIndex))
    local unit TempUnit
    if ( CountUnitsInGroup(udg_group) == 1 ) then
        set TempUnit = GroupPickRandomUnit(udg_group)
        if ( IsUnitType(TempUnit, UNIT_TYPE_HERO) == false ) then
            call RemoveUnit( TempUnit )
        else
            //不允许删除英雄单位
            call DisplayTextToForce( GetPlayersAll(), "|cffff0000不允许删除英雄单位|r" )
        endif
    else
    endif
endfunction

//===========================================================================
// Trigger: AddUnitToStructure
//===========================================================================
function Trig_AddUnitToStructure_Conditions takes nothing returns boolean
    local integer length = StringLength("addunitfor")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "addunitfor" ) ) then
        return false
    endif
    return true
endfunction

function Trig_AddUnitToStructure_Actions takes nothing returns nothing
    local integer TempValue = 0
    local unit TempUnit
    local string TempText
    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if (StringLength(TempText) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //单位ID字符串
        set TempValue = ASCIIStringToInteger(TempText)
    else
        //单位ID(整数)
        set TempValue = S2I(TempText)
    endif

    //set TempValue = 808464432
    if ( TempValue < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == true ) then

        // 添加可出售单位到商店，当前数量1，最大存储3
        call AddUnitToStockBJ( TempValue, TempUnit, 1, 3 )
    else
        // 操作失败
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000操作失败|r" ) )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: RemoveUnitFromStructure
//===========================================================================
function Trig_RemoveUnitFromStructure_Conditions takes nothing returns boolean
    local integer length = StringLength("removeunitfor")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length ), false) == "removeunitfor" ) ) then
        return false
    endif
    return true
endfunction

function Trig_RemoveUnitFromStructure_Actions takes nothing returns nothing
    local integer TempValue = 0
    local unit TempUnit
    local string TempText
    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if (StringLength(TempText) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //单位ID字符串
        set TempValue = ASCIIStringToInteger(TempText)
    else
        //单位ID(整数)
        set TempValue = S2I(TempText)
    endif

    //set TempValue = 808464432
    if ( TempValue < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == true ) then

        // 移除单位从商店中
        call RemoveUnitFromStockBJ( TempValue, TempUnit )
    else
        // 操作失败
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000操作失败|r" ) )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: ShowItem
//===========================================================================
function Trig_ShowItem_Conditions takes nothing returns boolean
    local integer length = StringLength("showitem")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "showitem" ) ) then
        return false
    endif
    return true
endfunction

function Trig_ShowItem_Actions takes nothing returns nothing
    local integer TempValue = 0
    local item TempItem
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local string TempText = SubString(GetEventPlayerChatString(), 9, StringLength(GetEventPlayerChatString()))
    if ( IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == false ) then
        //选中单位不是建筑
        set TempValue = S2I(TempText)
        set TempValue = IMaxBJ(1, TempValue)
        set TempValue = IMinBJ(TempValue, 6)
        set TempItem = UnitItemInSlotBJ(TempUnit, TempValue)
        if ( not(TempItem == null) ) then
            set TempValue = GetItemTypeId(TempItem)
            set TempText = IntegerToASCIIString(TempValue)
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff物品的名字|r" + GetItemName(TempItem) ) )
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff物品ID|r" + TempText ) )
        else
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( I2S(TempValue) + "|cff0042ff号物品栏为空|r" ) )
        endif
    else
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0042选中的不是英雄单位|r" ) )
    endif
    set TempUnit = null
    set TempItem = null
endfunction

//===========================================================================
// Trigger: AddItemForStructure
//===========================================================================
function Trig_AddItem_Conditions takes nothing returns boolean
    local integer length = StringLength("additem")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "additem" ) ) then
        return false
    endif
    return true
endfunction

function Trig_AddItem_Actions takes nothing returns nothing
    local integer TempValue = 0
    local unit TempUnit
    local string TempText
    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if (StringLength(TempText) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //技能ID字符串
        set TempValue = ASCIIStringToInteger(TempText)
    else
        //技能ID(整数)
        set TempValue = S2I(TempText)
    endif

    //set TempValue = 808464432
    if ( TempValue < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == true ) then

        // 添加物品，当前1个，最大3个
        call AddItemToStockBJ( TempValue, TempUnit, 1, 3 )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: RemoveItemForStructure
//===========================================================================
function Trig_RemoveItem_Conditions takes nothing returns boolean
    local integer length = StringLength("removeitem")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length ), false) == "removeitem" ) ) then
        return false
    endif
    return true
endfunction

function Trig_RemoveItem_Actions takes nothing returns nothing
    local integer TempValue = 0
    local unit TempUnit
    local string TempText
    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if (StringLength(TempText) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //技能ID字符串
        set TempValue = ASCIIStringToInteger(TempText)
    else
        //技能ID(整数)
        set TempValue = S2I(TempText)
    endif

    //set TempValue = 808464432
    if ( TempValue < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( IsUnitType(TempUnit, UNIT_TYPE_STRUCTURE) == true ) then

        // 移除物品
        call RemoveItemFromStockBJ( TempValue, TempUnit )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: CreateItem
//===========================================================================
function Trig_CreateItem_Conditions takes nothing returns boolean
    local integer length = StringLength("createitem")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "createitem" ) ) then
        return false
    endif
    return true
endfunction

function Trig_CreateItem_Actions takes nothing returns nothing

    local integer tItemID
    local string TempText
    local item TempItem
    local location tPoint = GetCameraTargetPositionLoc()

    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) < 4 ) then
        //请输入物品ID
        call DisplayTextToForce( GetPlayersAll(), ( "|c00ff0000请输入物品ID|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //物品ID字符串ASCII转整数
        set tItemID = ASCIIStringToInteger(TempText)
    else
        //物品ID整数字符串转整数
        set tItemID = S2I(TempText)
    endif

    //set tItemID = 808464432
    if ( tItemID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if CoordUnit != null then
	    set tPoint = GetUnitRallyPoint(CoordUnit)
 	endif

    set TempItem = CreateItemLoc( tItemID, tPoint )
    if ( TempItem != null ) then
        //创建物品+物品名字
        call DisplayTextToForce( GetPlayersAll(), ( "|cff0042ff创建物品|r" + GetItemName(TempItem) ) )
    else
        //创建物品失败
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000创建物品失败|r" ) )
    endif
    set TempItem = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: AddAbility
//===========================================================================
function Trig_AddAbility_Conditions takes nothing returns boolean
    local integer length = StringLength("addability")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "addability" ) ) then
        return false
    endif
    return true
endfunction

function Trig_AddAbility_Function takes string message, unit whichUnit returns nothing

    local integer tAbilityID

    if (StringLength(message) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(message) == 4) then
        //技能ID字符串ASCII转整数
        set tAbilityID = ASCIIStringToInteger(message)
    else
        //技能ID整数字符串转整数
        set tAbilityID = S2I(message)
    endif

    //set AbilityID = 808464432
    if ( tAbilityID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( GetUnitAbilityLevelSwapped(tAbilityID, whichUnit) <= 0 ) then

        if ( IsUnitType(whichUnit, UNIT_TYPE_STRUCTURE) == false ) then
            //非建筑类单位
            set isOK = UnitAddAbilityBJ( tAbilityID, whichUnit )
            if ( isOK == false ) then
                //技能添加失败
                call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000技能添加失败|r" )
            endif
        else
            //给建筑物添加技能
            set isOK = UnitAddAbilityBJ( tAbilityID, whichUnit )
            if ( isOK == true ) then
                call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff给建筑物添加技能|r" )
            else
                //技能添加失败
                call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000技能添加失败|r" )
            endif
        endif

        if ( isOK == true ) then
            //显示添加技能的单位名字和技能名字
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff给单位|r" + GetUnitName(whichUnit) ) + ( "|cff0042ff添加技能|r" + GetAbilityName(tAbilityID) ) ) )
        endif
    else
        //已经拥有该技能，不能重复添加
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000已经拥有该技能，不能重复添加|r" ) )
    endif

endfunction

function Trig_AddAbility_Actions takes nothing returns nothing
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local string TempText
    local integer TempValue

    if ( TempUnit == null ) then
        //没有选中单位，操作失败
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000没有选中单位，操作失败|r" ) )
        return
    endif


    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)
    set TempValue = SplitStringWith( TempText, "," )

    if ( TempValue > 0 ) then
        set bj_forLoopAIndex = 0
        set bj_forLoopAIndexEnd = TempValue
        loop
            exitwhen bj_forLoopAIndex >= bj_forLoopAIndexEnd
            //遍历每一个字符串
            set TempText = LoadStringBJ(bj_forLoopAIndex+1, StringHashBJ("TDS"), HashTable)
            call Trig_AddAbility_Function( TempText, TempUnit )
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
    else
        call Trig_AddAbility_Function( TempText, TempUnit )
    endif

    set TempUnit = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: SetAbilityLevel
//===========================================================================
function Trig_SetAbilityLevel_Conditions takes nothing returns boolean
    local integer length = StringLength("setabilitylevel")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "setabilitylevel" ) ) then
        return false
    endif
    return true
endfunction

function Trig_SetAbilityLevel_Actions takes nothing returns nothing
    local unit TempUnit
    local string TempText
    local integer AbilityID
    local integer TempValue

    if ( CountUnitsInGroup(GetUnitsSelectedAll(Player(SelfIndex))) != 1 ) then
        // 只能选择一个单位操作
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000只能选择一个单位操作|r" ) )
        return
    endif

    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)
    set TempValue = S2I(LoadStringBJ(3, StringHashBJ("TDS"), HashTable))

    if (StringLength(TempText) < 4 or TempValue < 1 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //技能ID字符串ASCII转整数
        set AbilityID = ASCIIStringToInteger(TempText)
    else
        //技能ID整数字符串转整数
        set AbilityID = S2I(TempText)
    endif

    //set AbilityID = 808464432
    if ( AbilityID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( GetUnitAbilityLevelSwapped(AbilityID, TempUnit) > 0 ) then

        set TempValue = SetUnitAbilityLevel( TempUnit, AbilityID, TempValue )
        //设置单位技能等级
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff设置单位|r" + GetUnitName(TempUnit) + "|cff0042ff技能|r" + GetAbilityName(AbilityID) + "|cff0042ff等级|r" + I2S(TempValue) ) )
    else
        //该单位没有这个技能，操作失败
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000该单位没有这个技能，操作失败|r" ) )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: RemoveAbility
//===========================================================================
function Trig_RemoveAbility_Conditions takes nothing returns boolean
    local integer length = StringLength("removeability")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "removeability" ) ) then
        return false
    endif
    return true
endfunction

function Trig_RemoveAbility_Actions takes nothing returns nothing
    local unit TempUnit
    local string TempText
    local integer AbilityID
    call SplitString()
    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if (StringLength(TempText) < 4) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //技能ID字符串
        set AbilityID = ASCIIStringToInteger(TempText)
    else
        //技能ID(整数)
        set AbilityID = S2I(TempText)
    endif

    //set AbilityID = 808464432
    if ( AbilityID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( GetUnitAbilityLevelSwapped(AbilityID, TempUnit) > 0 ) then

        call UnitRemoveAbilityBJ( AbilityID, TempUnit )
        //显示移除技能的单位名字和技能名字
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff单位|r" + GetUnitName(TempUnit) ) + ( "|cff0042ff移除技能|r" + GetAbilityName(AbilityID) ) ) )
    else
        //该单位没有该技能，操作失败
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000该单位没有该技能，操作失败|r" ) )
    endif
    set TempUnit = null
endfunction

//===========================================================================
// Trigger: SetTeleportUnit
//===========================================================================
function Trig_SetTeleportUnit_Conditions takes nothing returns boolean
    local integer length = StringLength("setteleportunit")
    if ( not ( StringLength(GetEventPlayerChatString()) >= length ) ) then
        return false
    endif
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "setteleportunit" ) ) then
        return false
    endif
    return true
endfunction

function Trig_SetTeleportUnit_Actions takes nothing returns nothing
	local group tGroup = GetUnitsSelectedAll(Player(SelfIndex))
    local unit tUnit = GroupPickRandomUnit(tGroup)
    local location tPoint = GetRectCenter(GetCurrentCameraBoundsMapRectBJ())

    
    if ((CountUnitsInGroup(tGroup) == 1) and (tUnit != null)) then
        if ((GetUnitAbilityLevelSwapped('Awrp', tUnit) == 0)) then
            call UnitAddAbilityBJ( 'Awrp', tUnit )
        else
        endif
        if ((CoordUnit != null)) then
            set tPoint = GetUnitRallyPoint(CoordUnit)
        else
        endif
        call WaygateSetDestinationLocBJ( tUnit, tPoint )
        call WaygateActivateBJ( true, tUnit )
        call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 5.00, ( "|cff0042ff传送到坐标|r " + ( R2S(GetLocationX(tPoint)) + ( "，" + R2S(GetLocationY(tPoint)) ) ) ) )
        call PingMinimapLocForForceEx( bj_FORCE_PLAYER[SelfIndex], tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    else
    endif
    set tGroup = null
    set tUnit = null
endfunction

//===========================================================================
// Trigger: RemoveTeleport
//===========================================================================
function Trig_RemoveTeleport_Conditions takes nothing returns boolean
    return ((StringCase(GetEventPlayerChatString(), false) == "removeteleport"))
endfunction

function Trig_RemoveTeleport_Actions takes nothing returns nothing
    local group tGroup = GetUnitsSelectedAll(Player(SelfIndex))
    local unit tUnit = GroupPickRandomUnit(tGroup)
    local location tPoint = GetRectCenter(GetCurrentCameraBoundsMapRectBJ())
    
    if ((CountUnitsInGroup(tGroup) == 1) and (tUnit != null)) then
        if ((GetUnitAbilityLevelSwapped('Awrp', tUnit) > 0)) then
            set tPoint = WaygateGetDestinationLocBJ(tUnit)
            call UnitRemoveAbilityBJ( 'Awrp', tUnit )
            call WaygateActivateBJ( false, tUnit )
            call PingMinimapLocForForceEx( bj_FORCE_PLAYER[SelfIndex], tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
        else
            call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1.00, GetUnitName(tUnit) + "|cff0042ff没有传送技能|r" )
        endif
    else
    endif
    set tUnit = null
    
endfunction

//===========================================================================
// Trigger: AutoSkill
//===========================================================================
function Trig_AutoSkill_Conditions takes nothing returns boolean
    return ((StringCase(GetEventPlayerChatString(), false) == "autoskill"))
endfunction

function Trig_AutoSkill_Actions takes nothing returns nothing
    local group tGroup = GetUnitsSelectedAll(Player(SelfIndex))
    local unit tUnit = GroupPickRandomUnit(tGroup)
    local integer HeroLevel = GetUnitLevel(tUnit)
    local integer AbilityID
    local integer AbilityLevel
    local integer sIndex = 0
    local integer eIndex = 'zzzz'
    
    if CountUnitsInGroup(tGroup) == 1 and HeroLevel <= 30 then
	    //call SelectHeroSkill( tUnit, 'A0AR' )
	    if HeroLevel > 16 then
		    set sIndex = 1
		    set eIndex = 10
		    loop
		        exitwhen sIndex > eIndex
		        // 加属性点
		        call SelectHeroSkill( tUnit, 'Aamk' )
		        
		        set sIndex = sIndex + 1
		    endloop
	    endif
    
        if (GetHeroSkillPoints(tUnit) > 0) then
	        set sIndex = 1
		    loop
		        exitwhen sIndex > 4

				set AbilityID = 'A000'
				set eIndex = 'Azzz'
				loop
			        exitwhen AbilityID > eIndex

					set AbilityLevel = GetUnitAbilityLevel(tUnit, AbilityID)
			        if GetUnitAbilityLevel(tUnit, AbilityID) < 4 and AbilityID != 'Aamk' then
				        // 升级非属性点技能
			            call SelectHeroSkill( tUnit, AbilityID )
			        endif

			        if GetUnitAbilityLevel(tUnit, AbilityID) > AbilityLevel then
				        // 升级成功
				        call SelectHeroSkill( tUnit, AbilityID )
				        call SelectHeroSkill( tUnit, AbilityID )
				        call SelectHeroSkill( tUnit, AbilityID )
				        set AbilityLevel = GetUnitAbilityLevel(tUnit, AbilityID)
				        //call ShowTimedTextToPlayer(SelfIndex, 2, "|cff0042ff当前|r" + I2S(AbilityID))
				        //call ShowTimedTextToPlayer(SelfIndex, 2, "|cff0042ff学习技能|r" + GetAbilityName(AbilityID))
			            call TriggerSleepAction(0.1)
			        endif

			        if GetHeroSkillPoints(tUnit) == 0 then
				        // 无加成点则结束
			            set AbilityID = eIndex
			        endif
					
			        set AbilityID = AbilityID + 1
			    endloop
			    
		        set sIndex = sIndex + 1
		    endloop
        endif
    elseif CountUnitsInGroup(tGroup) > 1 then
    	call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1.00, "|cff0042ff不允许这样操作|r" )
    endif
    
    set tUnit = null
    set tGroup = null
endfunction

//===========================================================================
// Trigger: UnitAttack
//===========================================================================
function Trig_UnitAttack_Actions takes nothing returns nothing
	local unit tUnit = GetTriggerUnit()
	local unit aUnit = GroupPickRandomUnit(GetUnitsOfPlayerAndTypeId(Player(SelfIndex), 'halt'))
	local integer TempValue = LoadIntegerBJ(StringHashBJ("Attack"), GetHandleIdBJ(tUnit), HashTable)
	local real minLife = I2R(GetUnitLevel(GetTriggerUnit())) * 30.00 + 50
	local dialog tDialog
	local trigger tTrigger
	local button tButton1
	local button tButton2

	if IsUnitType( tUnit, UNIT_TYPE_HERO) and IsUnitEnemy(tUnit, Player(TeamIndex1)) and GetOwningPlayer(GetAttacker()) != Player(SelfIndex) then
		if (GetUnitLifePercent(tUnit) < 10.00) or (GetUnitStateSwap(UNIT_STATE_LIFE, tUnit) < minLife) and TempValue == 0 then
		    //dispel
	    	call IssueTargetOrder( aUnit, "dispel", tUnit )
	    	call SaveIntegerBJ( 1, StringHashBJ("Attack"), GetHandleIdBJ(tUnit), HashTable )
	    	call TriggerSleepAction( 2.50 )	//避免频繁操作
	    	call SaveIntegerBJ( 0, StringHashBJ("Attack"), GetHandleIdBJ(tUnit), HashTable )
		endif
	elseif IsUnitType( tUnit, UNIT_TYPE_STRUCTURE) and GetUnitTypeId(tUnit) == 'unpl' and GetUnitLifePercent(tUnit) < 10.00 then
		// 新建对话框
	endif
	//call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1.00, "攻击单位" + GetUnitName(GetAttacker()) )
	//call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1.00, "被攻击单位" + GetUnitName(GetAttackedUnitBJ()) )
endfunction

//===========================================================================
// Trigger: EnableGetTech
//===========================================================================
function Trig_EnableGetTech_Conditions takes nothing returns boolean
    if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_EnableGetTech_Actions takes nothing returns nothing
    local unit tUnit = GetTriggerUnit()
    local string TempText
    local integer HeroLevel
    local integer AbilityID
    local integer AbilityLevel1
    local integer AbilityLevel2
    local integer sIndex = 0
    local integer eIndex = 'zzzz'

    //call ShowTimedTextToPlayer( SelfIndex, 1, "测试升级技能" + I2S(GetPlayerId(GetOwningPlayer(tUnit))))
    set HeroLevel = GetUnitLevel(tUnit)
    if HeroLevel > 30 or GetPlayerId(GetOwningPlayer(tUnit)) < neutralIndex1 then
        return
    elseif HeroLevel > 16 then
    	// 加属性点
    	call SelectHeroSkill( tUnit, 'Aamk' )
    	return
    endif

	set sIndex = 'A000'
	set eIndex = 'Azzz'
    loop
        exitwhen sIndex > eIndex

		set AbilityID = sIndex
		set AbilityLevel1 = GetUnitAbilityLevel(tUnit, AbilityID)
        if AbilityLevel1 < 4 then
            call SelectHeroSkill( tUnit, AbilityID )
        endif
        set AbilityLevel2 = GetUnitAbilityLevel(tUnit, AbilityID)

        if AbilityID == 'A0AR' then
            call ShowTimedTextToPlayer(SelfIndex,3,"|cff0042ff是存在的|r" + I2S(AbilityLevel1) + "|cff0042ffcurrent|r" + I2S(AbilityLevel2))
            call SelectHeroSkill( tUnit, AbilityID )
        endif

        if AbilityLevel2 > AbilityLevel1 and  GetHeroSkillPoints(tUnit) == 0 then
	        // 升级成功则结束
            set sIndex = eIndex
        endif

        set sIndex = sIndex + 1
    endloop
    
	//set AbilityID = GetHeroSkillPoints(tUnit)
	//call ShowTimedTextToPlayer(SelfIndex,3,"|cff0042ff剩余点数|r" + I2S(AbilityID))
    //set TempText = IntegerToASCIIString(AbilityID)

    set tUnit = null
endfunction

//===========================================================================
// Trigger: UseAbility
//===========================================================================
function tFilterStructureUnit takes nothing returns boolean
	// 建筑类单位
	if IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == true then
		return true
	endif
	return false
endfunction

function tFilterAllyUnit takes nothing returns boolean
	// 建筑类单位
	local unit tUnit = GetFilterUnit()
	if IsUnitType(tUnit, UNIT_TYPE_STRUCTURE) then
		return false
	endif
	if IsUnitType(tUnit, UNIT_TYPE_HERO) then
		return false
	endif
	if targetUnit != null and IsUnitAlly(tUnit, GetOwningPlayer(targetUnit)) then
		//锁定目标必须是选取目标的敌对单位
		return false
	endif
	return true
endfunction

function Trig_FilterUseAbilityEvent takes nothing returns nothing
	local integer AbilityID = GetSpellAbilityId()
	local destructable tTree = GetEnumDestructable()

    if AbilityID == 'A2PF' then
        if ((GetDestructableMaxLife(tTree) >= 10000.00)) then
        	call SetDestructableLife( tTree, ( GetDestructableLife(GetFilterDestructable()) - 10000.00 ) )
    	else
    	endif
    	if ((GetDestructableLife(tTree) < 5000.00)) then
        	call SetDestructableLife( tTree, 0.00 )
    	else
    	endif
    elseif ( AbilityID == 'A2PD' ) then
    	if ((GetDestructableLife(tTree) <= 0.00)) then
        	call RemoveDestructable(tTree)
    	else
    	endif
    endif
endfunction

function Trig_UseAbility_Actions takes nothing returns nothing
	local unit tUnit = GetTriggerUnit()
    local integer AbilityID = GetSpellAbilityId()
    local location tPoint = GetSpellTargetLoc()	//技能释放点
    local rect tArea = RectFromCenterSizeBJ(tPoint, 200.00, 200.00)
    local group tGroup = GetUnitsInRectMatching(tArea, Condition(function tFilterStructureUnit))
    local real lifeR = 0
    local destructable tTree
    local destructable rTree
    local location rPoint
    local integer TempValue
    local integer sIndex
    local integer eIndex
    
    if ( AbilityID == 'A2PC' and GetOwningPlayer(tUnit) == Player(SelfIndex) ) then
	    //驱逐魔法
        set tUnit = GroupPickRandomUnit(tGroup)
        if RectContainsLoc( RectFromCenterSizeBJ(tPoint, 300.00, 300.00), GetUnitRallyPoint(CoordUnit) ) then
	        // 集结点在技能释放点周围300范围内时
        	set tArea = RectFromCenterSizeBJ(tPoint, 200.00, 200.00)
        	set TempValue = 0
        	set sIndex = 1
        	set eIndex = 1000
        	loop
            	exitwhen sIndex > eIndex or TempValue == 8
            	set rPoint = GetRandomLocInRect(tArea)
            	set rTree = RandomDestructableInRectSimpleBJ(RectFromCenterSizeBJ(rPoint, 30.00, 30.00))
            	call DestructableRestoreLife( rTree, GetDestructableMaxLife(rTree), true )	//先复活试试
            	//call ShowTimedTextToPlayer( SelfIndex, 2, "|cff0042ff最大|r" + R2S(GetDestructableMaxLife(rTree)) + "|cff0042ff当前|r" + R2S(GetDestructableLife(rTree)))
            	if (IsDestructableAliveBJ(rTree) == false) then
	            	//call DestructableRestoreLife( rTree, GetDestructableMaxLife(rTree), true )
	            	set TempValue = TempValue + 1
                	call CreateDestructableLoc( 'ATtr', rPoint, GetRandomDirectionDeg(), 1.00, 2 )
            	else
            	endif
            	call SetDestructableAnimation( GetLastCreatedDestructable(), "birth" )
            	set sIndex = sIndex + 1
        	endloop
		endif
		if targetUnit != null and tUnit == targetUnit then
			// 选择的单位必须是锁定的单位
            if GetUnitAbilityLevelSwapped('Avul', tUnit) > 0 then
            	call UnitRemoveAbility( tUnit, 'Avul' )
        	else
        		set lifeR = GetUnitStateSwap(UNIT_STATE_MAX_LIFE, tUnit ) * 0.2
        		set lifeR = RMaxBJ(200.00, lifeR)
        		call SetUnitState( tUnit, UNIT_STATE_LIFE, GetUnitStateSwap(UNIT_STATE_LIFE, tUnit) - lifeR )
        		//call RemoveUnit(tUnit)
        		//call SetUnitLifeBJ( tUnit, 0.00 )
        	endif
        endif
		//call ShowTimedTextToPlayer( SelfIndex, 3, "驱逐魔法" )
        
    elseif ( AbilityID == 'A2PD' ) then
    	//沉默
    	set tArea = RectFromCenterSizeBJ(tPoint, 900.00, 900.00)
    	set tGroup = GetUnitsInRectMatching(tArea, Condition(function tFilterAllyUnit))
    	if CountUnitsInGroup(tGroup) > 0 then
    	    call GroupTargetOrder( tGroup, "attack", targetUnit )	//攻击到目标
    	    call GroupTargetOrder( tGroup, "patrol", targetUnit )	//巡逻到目标
    	    call PingMinimapLocForForceEx( GetPlayersAllies(Player(TeamIndex1)), GetUnitLoc(targetUnit), 1.0, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    	endif
    	//call SetTerrainTypeBJ( tPoint, 'Agrs', -1, 16, 0 )
    	call EnumDestructablesInRectAll( RectFromCenterSizeBJ(tPoint, 300.00, 300.00), function Trig_FilterUseAbilityEvent )

    elseif ( AbilityID == 'A2PE' ) then
    	//闪光弹
    	set tGroup = GetUnitsInRangeOfLocAll(64.00, tPoint)
    	if CountUnitsInGroup(tGroup) == 1 then
	    	set tUnit = GroupPickRandomUnit(tGroup)
	    	set targetUnit = tUnit
    	    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff锁定目标|r" + GetUnitName(targetUnit) )
    	elseif CountUnitsInGroup(tGroup) == 0 and targetUnit != null then
    		set targetUnit = null
    		call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff解除目标锁定|r" )
    	endif
    elseif ( AbilityID == 'A2PF' ) then
    	//焦土
    	set tUnit = GroupPickRandomUnit(tGroup)
        if tUnit != null and tUnit != GetTriggerUnit() then
	        call SetUnitState( tUnit, UNIT_STATE_LIFE, 0 )
            //call RemoveUnit(tUnit)
        endif
        
        call EnumDestructablesInRectAll( RectFromCenterSizeBJ(tPoint, 300.00, 300.00), function Trig_FilterUseAbilityEvent )
    endif

    if isCheck then
	    set tUnit = GetTriggerUnit()
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff当前单位|r" + GetUnitName(tUnit) ) + ( "|cff0042ff使用的技能|r" + GetAbilityName(AbilityID) ) ) )
    	call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff技能ID|r" + IntegerToASCIIString(AbilityID) ) )
    endif

    set tUnit = null
    set tGroup = null
endfunction

//===========================================================================
// function: BaseDeathEvent
//===========================================================================
function BaseDeathEvent takes nothing returns nothing
	local unit tUnit = GetTriggerUnit()
	local dialog tDialog
	local trigger tTrigger
	local button tButton1
	local button tButton2
	local string btnText = "胜利！"
	
	if tUnit == JE4 then
		//CI8,JE4,世界之树
		set DeathBaseIndex = 1
		set GameState[1] = GameState[1] + 1
		set btnText = "失败！"
	elseif tUnit == JC4 then
		//CK8,JC4,冰封王座
		set DeathBaseIndex = 2
		set GameState[2] = GameState[2] + 1
	endif

	call ShowTimedTextToPlayer( SelfIndex, 3.0, GetUnitName(tUnit) + "|cffff0000被催毁|r")

	//禁用战争迷雾
    call FogEnableOff()

	// 新建对话框
	set tDialog = DialogCreate()
    call DialogAddButtonWithHotkeyBJ( GetClickedDialogBJ(), "AAAAA", 'K' )
    if GameState[1] == 2 or GameState[2] == 2 then
	    call DialogSetMessage( tDialog, "战役" )

		set tButton1 = DialogAddButtonBJ( tDialog, btnText )
        set tButton2 = DialogAddButtonBJ( tDialog, "结束游戏" )
    	call DialogDisplayBJ( true, tDialog, Player(SelfIndex) )

    	set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton1 )
	    call TriggerAddAction( tTrigger, function Trig_StopGame_Actions )
	    set tTrigger = null
		set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton2 )
	    call TriggerAddAction( tTrigger, function Trig_EndGame_Actions )
	    set tTrigger = null
    else
    	call DialogSetMessage( tDialog, "战役" )
    	set tButton1 = DialogAddButtonBJ( tDialog, "继续游戏" )

    	set tButton2 = DialogAddButtonBJ( tDialog, btnText )
    	call DialogDisplayBJ( true, tDialog, Player(SelfIndex) )

    	set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton1 )
	    call TriggerAddAction( tTrigger, function Trig_ContinueGame_Actions )
	    set tTrigger = null
		set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton2 )
	    call TriggerAddAction( tTrigger, function Trig_StopGame_Actions )
	    set tTrigger = null
    endif
    
    //call DialogClear( tDialog )
    //call DialogDestroy( tDialog )
    
endfunction

//===========================================================================
// Trigger: UnitDeadEvent
//===========================================================================
function UnitDeadEvent takes nothing returns nothing
    local unit tUnit = GetTriggerUnit()
    local real tReal = 0.00
    local location tPoint
    local timer tTimer
    local timerdialog tTimerDialog

    local dialog tDialog
	local trigger tTrigger
	local button tButton1
	local button tButton2
	local string btnText
    
    if (IsUnitIllusionBJ(tUnit) == false) and (IsUnitType(tUnit, UNIT_TYPE_STRUCTURE) == true) and IsUnitEnemy(tUnit, Player(TeamIndex1)) then
    	// 贴上地皮
    	call SetBlightRectBJ( false, GetTriggerPlayer(), RectFromCenterSizeBJ(GetUnitLoc(tUnit), 2000.00, 2000.00) )
        call SetTerrainTypeBJ( GetUnitLoc(tUnit), 'Agrs', -1, 16, 0 )
    endif
    if tUnit == JZ4 or tUnit == IY4 then
	   	// 根据基地情况判断是否获得了胜利
    	call ShowTimedTextToPlayer( SelfIndex, 3.0, GetUnitName(tUnit) + "|cffff0000被催毁|r")
    	set btnText = "胜利！"
    	if tUnit == JZ4 then
	    	// 被污染的生命之泉
	    	set GameState[2] = GameState[2] + 1
	    	set DeathBaseIndex = 2
    	    if IsUnitAliveBJ(JC4) then
    	    	return
    		endif
    	elseif tUnit == IY4 then
    		// 生命之泉
    		set GameState[1] = GameState[1] + 1
    		set DeathBaseIndex = 1
    		if IsUnitAliveBJ(JE4) then
    	    	return
    		endif

    		set btnText = "失败！"
    	endif

    	// 新建对话框
		set tDialog = DialogCreate()
	    call DialogAddButtonWithHotkeyBJ( GetClickedDialogBJ(), "AAAAA", 'K' )
	    call DialogSetMessage( tDialog, "战役" )
	    set tButton1 = DialogAddButtonBJ( tDialog, btnText )
	    set tButton2 = DialogAddButtonBJ( tDialog, "退出战役" )
	    call DialogDisplayBJ( true, tDialog, Player(SelfIndex) )
	    //call DialogClear( tDialog )
	    //call DialogDestroy( tDialog )

	    set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton1 )
	    call TriggerAddAction( tTrigger, function Trig_StopGame_Actions )
	    set tTrigger = null
		set tTrigger = CreateTrigger()
	    //call TriggerRegisterTrackableTrackEvent( tTrigger, GetTriggeringTrackable() )
	    call TriggerRegisterDialogButtonEvent( tTrigger, tButton2 )
	    call TriggerAddAction( tTrigger, function Trig_EndGame_Actions )
	    set tTrigger = null
	endif
	if IsUnitIllusionBJ(tUnit) == false and IsUnitType(tUnit, UNIT_TYPE_HERO) and GetOwningPlayer(tUnit) == Player(neutralIndex1) then
	    // 中立敌对的英雄死亡时
	    set tReal = I2R(GetHeroLevel(tUnit)) * 4.0 - 1.0
	    //set tReal = (tReal - 1.0) * 4.0 + TestReal
        set tReal = RMinBJ(300.00, tReal)

		set tTimer = CreateTimer()
    	set tTimerDialog = CreateTimerDialogBJ( tTimer, ( GetUnitName(tUnit) + "复活" ) )
    	call TimerDialogDisplayForPlayerBJ( true, tTimerDialog, Player(SelfIndex) )
    	call StartTimerBJ( tTimer, false, tReal )
        
        call TriggerSleepAction(tReal)
        set tPoint = LoadLocationHandleBJ(StringHashBJ("StartPoint"), StringHashBJ(GetHeroProperName(tUnit)), HashTable)
        call ReviveHeroLoc( tUnit, tPoint, true )
        call PingMinimapLocForForceEx( bj_FORCE_PLAYER[SelfIndex], tPoint, 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
        call SetUnitPositionLoc( tUnit, tPoint )

		call DestroyTimer(tTimer)
    	call DestroyTimerDialog( tTimerDialog )
    	set tTimer = null
    	set tTimerDialog = null
        //if IsUnitDeadBJ(tUnit) then
        //endif
        //call YM8()默认复活器
	endif
endfunction

//===========================================================================
// Trigger: Convert
//===========================================================================
function Trig_Convert_Conditions takes nothing returns boolean
    local integer length = StringLength("convert")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "convert" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Convert_Actions takes nothing returns nothing

    local integer typeID
    local integer sID
    local string TempText
    local string unitString
    local unit tUnit
    local item tItem

    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)
    set typeID = S2I(LoadStringBJ(3, StringHashBJ("TDS"), HashTable))

	
    if ( StringLength(TempText) < 4 ) then
        //输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if (StringLength(TempText) == 4) then
        //ID字符串ASCII转整数
        set sID = ASCIIStringToInteger(TempText)
    else
        //ID整数字符串转整数
        set sID = S2I(TempText)
    endif

    //set sID = 808464432
    if ( sID < 808464432 ) then
        // 输入不合法
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        return
    endif


    set TempText = GetObjectName(sID)
    if ( typeID == 1 ) then
        //单位
        set unitString = UnitId2String(sID)

        if IsUnitIdType(sID, UNIT_TYPE_HERO) then
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff英雄单位|r" + TempText + "|cff0042ff unitString |r" + unitString ) )
        elseif ( unitString != null ) then
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff该单位是|r" + TempText + "|cff0042ff unitString |r" + unitString ) )
        else
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000unit输入不合法|r" ) )
        endif
    elseif ( typeID == 2 ) then
        //物品
        set tItem = CreateItem( sID, 0, 0 )
        if ( tItem == null ) then
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000item输入不合法|r" ) )
            return
        endif
        set TempText = GetItemName(tItem)
        call RemoveItem(tItem)
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff该物品是|r" + TempText ) )
    elseif ( typeID == 3 ) then
        //技能
        set tUnit = CreateUnit( Player(13), 'opeo', -7000, 6500, 0 )
        if ( UnitAddAbility(tUnit, sID) ) then
            set TempText = GetAbilityName(sID)
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff该技能是|r" + TempText ) )
        else
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000ability输入不合法|r" ) )
        endif
        call RemoveUnit(tUnit)
    else
        if ( StringLength(TempText) > 0 ) then
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff对象名字|r" + TempText ) )
        else
            call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cffff0000输入不合法|r" ) )
        endif
    endif

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: ShowGold
//===========================================================================
function Trig_ShowGold_Conditions takes nothing returns boolean
    local integer length = StringLength("showgold")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "showgold" ) ) then
        return false
    endif
    return true
endfunction

function FilterHeroUnit takes nothing returns boolean
	return ((IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true))
endfunction

function Trig_ShowGold_Actions takes nothing returns nothing
	local unit tUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local player tPlayer = GetOwningPlayer(tUnit)
    local string playerName
    local integer TempValue
    local string TempText
    call SplitString()
    set PlayerIndex = -1
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) > 0 ) then
	    // 若指定了玩家编号
        if ( S2I(TempText) >= 0 and S2I(TempText) <= neutralIndex4 ) then
            //若指定了玩家，则设置指定玩家
            set PlayerIndex = S2I(TempText)
        else
            //输入不合法
            call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000输入不合法|r" ) )
        endif
    elseif tUnit != null then
        //选中的单位所属玩家
        set PlayerIndex = GetPlayerId(tPlayer)
    endif

    if PlayerIndex >= 0 then
        //获取玩家黄金数
        set tPlayer = Player(PlayerIndex)
        set TempValue = GetPlayerState(tPlayer, PLAYER_STATE_RESOURCE_GOLD)
        set playerName = GetPlayerName(tPlayer)

	    call DisplayTextToForce( GetPlayersAll(), ("|cff0042ff玩家|r" + playerName + "|cff0042ff拥有黄金|r" + I2S(TempValue) ) )
    endif

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: Gold
//===========================================================================
function Trig_Gold_Conditions takes nothing returns boolean
    local integer length = StringLength("gold")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "gold" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Gold_Actions takes nothing returns nothing
	local unit tUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local player tPlayer = GetOwningPlayer(tUnit)
    local string playerName
    local integer TempValue
    local string TempText
    call SplitString()
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) <= 0 ) then
        //请输入黄金数量
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000请输入黄金数量|r" ) )
        return
    endif

    set TempValue = S2I(TempText)
    if ( TempValue <= 0 ) then
        //请输入合法的数字
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( tUnit == null ) then
        //输入不合法
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000请选择一个玩家单位再操作|r" ) )
        return
    endif

    //添加黄金给玩家
    set playerName = GetPlayerName(tPlayer)
    call AdjustPlayerStateBJ( TempValue, tPlayer, PLAYER_STATE_RESOURCE_GOLD )
    call DisplayTextToForce( GetPlayersAll(), ("|cff0042ff玩家|r" + playerName + "|cff0042ff获得黄金|r" + I2S(TempValue) ) )

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: Level
//===========================================================================
function Trig_Level_Conditions takes nothing returns boolean
    local integer length = StringLength("level")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "level" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Level_Actions takes nothing returns nothing

    local integer TempValue
    local unit TempUnit
    local string TempText
    call SplitString()
    set PlayerIndex = 2
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) <= 0 ) then
        //请输入等级
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000请输入等级|r" ) )
        return
    endif

    set TempValue = S2I(TempText)
    if ( TempValue <= 0 ) then
        //输入不合法
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000输入不合法|r" ) )
        return
    endif

    if ( LoadStringBJ(3, StringHashBJ("TDS"), HashTable) == "for" and S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable)) > 0 and S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable)) <= 16 ) then
        //若指定了玩家，则设置指定玩家
        set PlayerIndex = S2I(LoadStringBJ(4, StringHashBJ("TDS"), HashTable))
    endif

    set TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    if ( TempValue < GetHeroLevel(TempUnit) ) then
        //不能降级
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000输入不合法|r" ) )
        return
    endif

    //设置英雄等级
    call SetHeroLevelBJ( TempUnit, TempValue, true )

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: Time
//===========================================================================
function Trig_Time_Conditions takes nothing returns boolean
    local integer length = StringLength("time")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "time" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Time_Actions takes nothing returns nothing

    //local real time = 0
    local integer TempValue
    local string TempText
    call SplitString()
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    if ( StringLength(TempText) <= 0 ) then
        //请输入时间整数
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000请输入时间整数|r" ) )
        return
    endif

    //字符串数字限制
    set TempValue = S2I(TempText)
    if ( TempText == "0" or TempText == "00" ) then
        set TempValue = 0
    elseif ( TempValue <= 0 or TempValue > 24 ) then
        set TempValue = -1
    endif

    if ( TempValue < 0 ) then
        //输入不合法
        call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000输入不合法|r" ) )
        return
    endif

    //设置时间
    set TempValue = S2I(SubString(GetEventPlayerChatString(), 5, 0))
    call SetTimeOfDay( I2R(TempValue) )
    //set time = S2R( TempText )
    //call SetTimeOfDay( real )

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: ChangeOwner
//===========================================================================
function Trig_ChangeOwner_Conditions takes nothing returns boolean
    local integer length = StringLength("ChangeOwner")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "changeowner" ) ) then
        return false
    endif
    if ( not ( StringLength(GetEventPlayerChatString()) > length and SubString(GetEventPlayerChatString(), 0, length) != " " ) ) then
        return false
    endif
    return true
endfunction

function Trig_ChangeOwner_Actions takes nothing returns nothing

    //local real time = 0
    local group tGroup = GetUnitsSelectedAll(Player(SelfIndex))
    local unit tUnit = GroupPickRandomUnit(tGroup)
    local string tString
    local integer tPlayerIndex

	call SplitString()
    if CountUnitsInGroup(tGroup) == 1 then
        //清空集结点坐标
        set tString = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)
        set tPlayerIndex = IMaxBJ(1, S2I(tString))

        if StringCase(GetEventPlayerChatString(), false) == "changeowner" then
	        // 否则默认为当前输入操作的玩家
            set tPlayerIndex = 2
        endif

        if tPlayerIndex <= neutralIndex4 then
	        	
            if ((IsUnitType(tUnit, UNIT_TYPE_HERO) == false)) then
	            // 非英雄
	            call SetUnitOwner( tUnit, ConvertedPlayer(tPlayerIndex), true )
	        else
	        	// 英雄
	        	if ((GetOwningPlayer(tUnit) == Player(neutralIndex4))) then
            		// 中立英雄改变玩家属性
            		call SetUnitOwner( tUnit, ConvertedPlayer(tPlayerIndex), true )
            		if ( GetOwningPlayer(tUnit) == Player(neutralIndex1) ) then
	            		// 保存中立敌对的英雄的创建点
                		call SaveLocationHandleBJ( GetUnitLoc(tUnit), StringHashBJ("StartPoint"), StringHashBJ(GetHeroProperName(tUnit)), HashTable )
                	endif
            	else
            		call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000不允许这样操作|r" )
            	endif
            endif
        else
            call DisplayTimedTextToForce( bj_FORCE_PLAYER[0], 3.00, "|cffff0000输入不合法|r" )
        endif
        
    elseif ( CountUnitsInGroup(tGroup) > 1 ) then
    	call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000只能选取一个单位操作|r" )
    elseif CountUnitsInGroup(tGroup) == 0 then
    	call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 3, "|cffff0000需要选取一个单位操作|r" )
    endif

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
    set tGroup = null
endfunction

//===========================================================================
// Trigger: SetCoordUnit
//===========================================================================
function Trig_SetCoordUnit_Conditions takes nothing returns boolean
    local integer length = StringLength("SetCoordUnit")
    if ( not ( StringCase(SubString(GetEventPlayerChatString(), 0, length), false) == "setcoordunit" ) ) then
        return false
    endif
    if ( not ( StringLength(GetEventPlayerChatString()) == length ) ) then
        return false
    endif
    return true
endfunction

function Trig_SetCoordUnit_Actions takes nothing returns nothing

    //local real time = 0
    local group tGroup = GetUnitsSelectedAll(Player(SelfIndex))

    if CountUnitsInGroup(tGroup) == 0 then
        //清空集结点坐标
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff清空集结点坐标|r" )
        set CoordUnit = null
        return
    elseif ( CountUnitsInGroup(tGroup) > 1 ) then
    	call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000只能选取一个单位操作|r" )
    	return
    endif

    //设置集结点坐标
    set CoordUnit = GroupPickRandomUnit(tGroup)
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff设置集结点坐标|r" )

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
    set tGroup = null
endfunction

//===========================================================================
// Trigger: ReplaceShopItems
//===========================================================================
function Trig_ReplaceShopItems_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "replaceshopitems" ) ) then
        return false
    endif
    return true
endfunction

function Trig_ReplaceShopItems_Func007A takes nothing returns nothing
    local unit TempUnit = GetEnumUnit()
    local string TempText
    // 移除单位从商店中
    call RemoveUnitFromStockBJ( 'h08O', TempUnit )
    call RemoveUnitFromStockBJ( 'h08K', TempUnit )
    call RemoveUnitFromStockBJ( 'h08J', TempUnit )
    call RemoveUnitFromStockBJ( 'h08L', TempUnit )
    call RemoveUnitFromStockBJ( 'h08G', TempUnit )
    call RemoveUnitFromStockBJ( 'h08H', TempUnit )
    call RemoveUnitFromStockBJ( 'h08M', TempUnit )
    call RemoveUnitFromStockBJ( 'h08N', TempUnit )
    call RemoveUnitFromStockBJ( 'h08I', TempUnit )
    call RemoveUnitFromStockBJ( 'h093', TempUnit )
    call RemoveUnitFromStockBJ( 'h0BO', TempUnit )
    call RemoveUnitFromStockBJ( 'h0CN', TempUnit )

    // 添加物品，当前1个，最大3个
    call AddItemToStockBJ( 'I0PG', TempUnit, 1, 3 )

    set TempText = IntegerToASCIIString(GetUnitTypeId(TempUnit))
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( ( "|cff0042ff单位|r" + GetUnitName(TempUnit) ) + ( "|cff0042ff ID |r" + TempText ) ) )

    set TempUnit = null
endfunction

function Trig_ReplaceShopItems_Actions takes nothing returns nothing

    //replaceshopitems
    //local real time = 0
    local group tGroup

    set tGroup = GetUnitsOfTypeIdAll('u00Z')

    call ForGroupBJ( tGroup, function Trig_ReplaceShopItems_Func007A )

    set tGroup = null

    //替换商店物品
    call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( "|cff0042ff替换商店物品|r" ) )

    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
    call DisableTrigger( GetTriggeringTrigger() )
endfunction

//===========================================================================
// Trigger: IssueOrder
//===========================================================================
function Trig_IssueOrder_Conditions takes nothing returns boolean
    local integer length = StringLength("issueorder " )
    local string ChatString = GetEventPlayerChatString()
    if ( not ( StringCase(SubString(ChatString, 0, length), false) == "issueorder " ) ) then
        return false
    endif
    return true
endfunction

function Trig_IssueOrder_Actions takes nothing returns nothing
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local string TempText
    local integer orderId

    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    set orderId = OrderId(TempText)
    if (orderId == 0) then
        //请输入正确的命令
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请输入正确的命令|r" )
        return
    endif

    if ( TempUnit != null and StringLength(TempText) > 0 ) then
        //禁用检查
        //call IssuePointOrderLocBJ( TempUnit, "move", GetUnitLoc(TempUnit) )
        call GroupPointOrderLocBJ( GetUnitsOfTypeIdAll('esen'), TempText, GetUnitLoc(TempUnit) )
        call GroupPointOrderLocBJ( GetUnitsOfTypeIdAll('edry'), TempText, GetUnitLoc(TempUnit) )
        call GroupPointOrderLocBJ( GetUnitsOfTypeIdAll('e00W'), TempText, GetUnitLoc(TempUnit) )
        call GroupPointOrderLocBJ( GetUnitsOfTypeIdAll('e00V'), TempText, GetUnitLoc(TempUnit) )
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff发布|r" + TempText + "|cff0042ff命令|r" )
        call PingMinimapLocForForceEx( bj_FORCE_PLAYER[SelfIndex], GetUnitLoc(TempUnit), 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    else
        //请选择一个单位来确定命令点
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff请选择一个单位来确定命令点|r" )
    endif

    set TempText = null
    set TempUnit = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: IssueAreaOrder
//===========================================================================
function Trig_IssueAreaOrder_Conditions takes nothing returns boolean
    local integer length = StringLength("issueareaorder " )
    local string ChatString = GetEventPlayerChatString()
    if ( not ( StringCase(SubString(ChatString, 0, length), false) == "issueareaorder " ) ) then
        return false
    endif
    return true
endfunction

function Trig_IssueAreaOrder_Actions takes nothing returns nothing
	local location tPoint = GetUnitRallyPoint(CoordUnit)
    local group tGroup = GetUnitsInRectOfPlayer(RectFromCenterSizeBJ( tPoint, 1000.00, 1000.00), Player(TeamIndex1) )
    local string TempText
    local integer tOrderID

    if CoordUnit == null then
	    //无有效单位
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请设定一个有效单位，以其集结点作为目标点|r" )
        return
    elseif targetUnit == null then
    	//请锁定一个目标
    	call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请锁定一个目标|r" )
        return
    endif

	call SplitString()
    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    set tOrderID = OrderId(TempText)
    if ( tOrderID == 0 and StringLength(TempText) > 0 ) then
        //请输入正确的命令
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请输入正确的命令|r" )
        return
    elseif tOrderID == 0 then
    	// 巡逻(patrol),攻击(attack)
    	set TempText = "attack"
    	set tOrderID = OrderId(TempText)
    endif

    if CountUnitsInGroup(tGroup) > 0 then
		//选取集结点周围900范围内的友军单位移动攻击到指定目标
	    //call GroupPointOrderLoc( tGroup, TempText, GetUnitLoc(targetUnit) )	//锁定的目标点
	    call GroupTargetOrder( tGroup, TempText, targetUnit )	//巡逻到目标
	    //call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, "攻击移动到污染的生命之泉" )
	    call PingMinimapLocForForceEx( GetPlayersAllies(Player(TeamIndex1)), tPoint, 2.0, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
	else
		//call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, GetUnitName(tUnit)  + "-->" )
	endif

    set TempText = null
    set tGroup = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: IssueTargetOrder
//===========================================================================
function Trig_IssueTargetOrder_Conditions takes nothing returns boolean
    local integer length = StringLength("issuetargetorder " )
    local string ChatString = GetEventPlayerChatString()
    if ( not ( StringCase(SubString(ChatString, 0, length), false) == "issuetargetorder " ) ) then
        return false
    endif
    return true
endfunction

function Trig_IssueTargetOrder_Actions takes nothing returns nothing
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local string TempText
    local integer orderId

    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    set orderId = OrderId(TempText)
    if (orderId == 0) then
        //请输入正确的命令
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请输入正确的命令|r" )
        return
    endif

    if ( TempUnit != null and StringLength(TempText) > 0 ) then
        //禁用检查
        //call IssuePointOrderLocBJ( TempUnit, "move", GetUnitLoc(TempUnit) )
        call GroupTargetOrder( GetUnitsOfTypeIdAll('esen'), TempText, TempUnit )
        call GroupTargetOrder( GetUnitsOfTypeIdAll('edry'), TempText, TempUnit )
        call GroupTargetOrder( GetUnitsOfTypeIdAll('e00W'), TempText, TempUnit )
        call GroupTargetOrder( GetUnitsOfTypeIdAll('e00V'), TempText, TempUnit )
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff发布|r" + TempText + "|cff0042ff命令|r" )
    else
        //请选择一个单位来确定命令点
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff请选择一个单位来确定命令点|r" )
    endif

    set TempText = null
    set TempUnit = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: SetTargetUnit
//===========================================================================
function Trig_SetTargetUnit_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "settargetunit" ) ) then
        return false
    endif
    return true
endfunction

function Trig_SetTargetUnit_Actions takes nothing returns nothing
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))

    if TempUnit != null then
        //锁定目标
        //set Point = GetUnitLoc(TempUnit)
        set targetUnit = TempUnit
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff锁定目标|r" + GetUnitName(targetUnit) )
    else
        //解除目标锁定
        set targetUnit = null
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "解除目标锁定" )
    endif

    set TempUnit = null

endfunction

//===========================================================================
// Trigger: SetTargetOrder
//===========================================================================
function Trig_SetTargetOrder_Conditions takes nothing returns boolean

    local string tString = "settargetorder "
    local string ChatString = GetEventPlayerChatString()
    if ( not ( StringCase(SubString(ChatString, 0, StringLength(tString)), false) == tString ) ) then
        return false
    endif
    return true
endfunction

function Trig_SetTargetOrder_Actions takes nothing returns nothing
    local unit TempUnit = GroupPickRandomUnit(GetUnitsSelectedAll(Player(SelfIndex)))
    local string TempText
    local integer orderId

    call SplitString()

    set TempText = LoadStringBJ(2, StringHashBJ("TDS"), HashTable)

    set orderId = OrderId(TempText)
    if (orderId == 0) then
        //请输入正确的命令
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请输入正确的命令|r" )
    elseif ( targetUnit == null ) then
        //请设定一个目标单位
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cffff0000请设定一个目标单位|r" )
    elseif ( TempUnit == null ) then
        //请选择一个发布命令的单位
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff请选择一个发布命令的单位|r" )
    else
        //发布 TempText 命令
        //call IssuePointOrderLocBJ( TempUnit, TempText, Point )
        call IssueTargetOrder( TempUnit, TempText, targetUnit )
        call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], "|cff0042ff发布|r" + TempText + "|cff0042ff命令|r" )
        call PingMinimapLocForForceEx( bj_FORCE_PLAYER[SelfIndex], GetUnitLoc(targetUnit), 3.00, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    endif

    set TempText = null
    set TempUnit = null
    call FlushChildHashtableBJ( StringHashBJ("TDS"), HashTable )
endfunction

//===========================================================================
// Trigger: Salvation
//===========================================================================
function Trig_Salvation_Conditions takes nothing returns boolean
	// 亡灵法师
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'unec' ) ) then
        return false
    endif
    return true
endfunction

function Trig_save_Func001B takes nothing returns nothing
    local unit TempUnit = GetEnumUnit()
    if ( GetUnitAbilityLevelSwapped('A2OT', TempUnit) == 0 ) then
        //60%闪避
        call UnitAddAbilityBJ( 'A2OT', TempUnit )
    endif
    if ( GetUnitAbilityLevelSwapped('A2P4', TempUnit) == 0 ) then
        //增加2%生命恢复速度
        call UnitAddAbilityBJ( 'A2P4', TempUnit )
    endif
    if ( GetUnitAbilityLevelSwapped('A1TW', TempUnit) == 0 ) then
        //多重攻击
        call UnitAddAbilityBJ( 'A1TW', TempUnit )
    endif
endfunction

function Trig_save_Func001A takes nothing returns nothing
    local unit TempUnit = GetEnumUnit()
    if ( GetUnitAbilityLevelSwapped('A2OT', TempUnit) == 0 ) then
        //60%闪避
        //call UnitAddAbilityBJ( 'A2OT', TempUnit )
    endif
    if ( GetUnitAbilityLevelSwapped('A2P4', TempUnit) == 0 ) then
        //增加2%生命恢复速度
        call UnitAddAbilityBJ( 'A2P4', TempUnit )
    endif
    if ( GetUnitAbilityLevelSwapped('AId0', TempUnit) == 0 ) then
        //增加护甲10点
        call UnitAddAbilityBJ( 'AId0', TempUnit )
    endif
    if ( GetUnitAbilityLevelSwapped('A09L', TempUnit) == 0 ) then
        //增加攻速55%
        //call UnitAddAbilityBJ( 'A09L', TempUnit )
    endif
endfunction

function Trig_GetEnumUnit_Func takes nothing returns nothing
    local unit TempUnit = GetEnumUnit()
    local integer tUnitID = GetUnitTypeId(TempUnit)
    if tUnitID == 'ugho' then
        //ʳ尸鬼(增加护甲10点，生命值300点)
        call UnitAddAbilityBJ( 'AId0', TempUnit )
        call UnitAddAbilityBJ( 'AIl2', TempUnit )
    elseif tUnitID == 'unec' then
        //亡灵法师
    endif

endfunction

function Trig_Salvation_Actions takes nothing returns nothing
    local unit tUnit = GetTriggerUnit()
    local integer TempValue = CountUnitsInGroup(GetUnitsOfTypeIdAll('usep')) + CountUnitsInGroup(GetUnitsOfTypeIdAll('utod'))

	// 亡灵法师
	if GetUnitTypeId(GetTriggerUnit()) == 'unec' and IsUnitAliveBJ(JC4) then
		if ( TempValue < 5 ) then
	        //护甲，生命上限
	        call UnitAddAbilityBJ( 'AId0', tUnit )
	        call UnitAddAbilityBJ( 'AIl2', tUnit )
	    endif

	    if ( TempValue < 3 ) then
	        //多重攻击，攻速
	        //call UnitAddAbilityBJ( 'A1TW', tUnit )
	        call UnitAddAbilityBJ( 'A09L', tUnit )
	    endif

	    if ( TempValue < 1 ) then
	        //生命恢复，闪避
	        call UnitAddAbilityBJ( 'A2P4', tUnit )
	        call UnitAddAbilityBJ( 'A2OT', tUnit )
	        call ForGroupBJ( GetUnitsOfTypeIdAll('ugho'), function Trig_GetEnumUnit_Func )	//食尸鬼
	    endif
	elseif GetUnitTypeId(GetTriggerUnit()) == 'e019' then
		//60%闪避
        call UnitAddAbilityBJ( 'A2OT', tUnit )
        //增加2%生命恢复速度
        call UnitAddAbilityBJ( 'A2P4', tUnit )
        //多重攻击
        call UnitAddAbilityBJ( 'A1TW', tUnit )
	endif

    if CountUnitsInGroup(GetUnitsOfTypeIdAll('u00N')) == 0 then	//幽魂塔 - 等级3
        call ForGroupBJ( GetUnitsOfTypeIdAll('u00T'), function Trig_save_Func001A )	//幽魂塔 - 等级4
        call ForGroupBJ( GetUnitsOfTypeIdAll('e00S'), function Trig_save_Func001B )	//远古守护者 - 等级3
        call ForGroupBJ( GetUnitsOfTypeIdAll('e019'), function Trig_save_Func001B )	//远古守护者 - 等级4
    endif

endfunction

//===========================================================================
// Trigger: IntensifyStructure
//===========================================================================
function Trig_IntensifyStructure_Actions takes nothing returns nothing

    local unit tUnit = GetTriggerUnit()
    local integer tUnitID = GetUnitTypeId(tUnit)
    local group tGroup

    if IsUnitType(tUnit, UNIT_TYPE_STRUCTURE) == false then
        return
    endif

    //等待0.3秒
    call PolledWait(0.3)
    if tUnitID == 'u00N' then
        //幽魂塔添加技能
        set tGroup = GetUnitsOfTypeIdAll('u00T')
        if ( GetUnitAbilityLevelSwapped('Avul', GroupPickRandomUnit(tGroup)) == 0 ) then
            call ForGroupBJ( tGroup, function Trig_save_Func001A )
            call ForGroupBJ( tGroup, function Trig_save_Func001B )
        endif
    elseif tUnitID == 'e011' then
        //守护者3
        set tGroup = GetUnitsOfTypeIdAll('e00S')
        if ( GetUnitAbilityLevelSwapped('Avul', GroupPickRandomUnit(tGroup)) == 0 ) then
            call ForGroupBJ( tGroup, function Trig_save_Func001A )
        endif
    elseif tUnitID == 'u00T' then
        //冰封王座
        set tGroup = GetUnitsOfTypeIdAll('unpl')
        if ( GetUnitAbilityLevelSwapped('Avul', GroupPickRandomUnit(tGroup)) == 0 ) then
            //call ForGroupBJ( tGroup, function Trig_save_Func001A )
        endif
    elseif tUnitID == 'e00S' then
        //守护者4
        set tGroup = GetUnitsOfTypeIdAll('e019')
        if ( GetUnitAbilityLevelSwapped('Avul', GroupPickRandomUnit(tGroup)) == 0 ) then
            call ForGroupBJ( tGroup, function Trig_save_Func001A )
        endif
    elseif tUnitID == 'e019' then
        //世界之树
        set tGroup = GetUnitsOfTypeIdAll('etol')
        if ( GetUnitAbilityLevelSwapped('Avul', GroupPickRandomUnit(tGroup)) == 0 ) then
            call ForGroupBJ( tGroup, function Trig_save_Func001A )
        endif
    endif

endfunction

//===========================================================================
// Trigger: GetHero
//===========================================================================
function Trig_GetHero_Conditions takes nothing returns boolean
    if ( not ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_GetHero_Actions takes nothing returns nothing

    local integer tPlayerId = GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
    local integer tUnitId

    if tPlayerId == 15 then
        return
    endif


    set tUnitId = GetUnitTypeId(GetTriggerUnit())
    //set isPickHero = true
    //call BJDebugMsg( "|cff0042ff玩家|r" + I2S(tPlayerId) + "|cff0042ff选择单位事件|r" + GetUnitName(GetTriggerUnit()) )
    //call DisableTrigger( GetTriggeringTrigger() )
    //call SetUnitOwner( GetTriggerUnit(), Player(0), true )

    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 11
    loop
        if bj_forLoopAIndex != 6 then
            if HeroID[bj_forLoopAIndex] == tUnitId then
                set HeroID[bj_forLoopAIndex] = 0
                //call DisplayTimedTextToPlayer( Player(SelfIndex),0,0,5, I2S(bj_forLoopAIndex) )
            endif

        endif

        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd

        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop


endfunction

//===========================================================================
// Trigger: AutoHero
//===========================================================================
function Trig_AutoHero_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "autohero" ) ) then
        return false
    endif
    return true
endfunction

function Trig_attack_Func009002001002 takes nothing returns boolean
    return ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true )
endfunction

//function Pre_SaveStr_Get takes nothing returns nothing
//    //call SaveStr(HashTable, Key, GetPlayerTechMaxAllowed(Player(13),Key), GetPlayerName(Player(15)))
//    call SaveStringBJ( GetPlayerName(Player(15)), GetPlayerTechMaxAllowed(Player(13),Key), Key, HashTable )
//endfunction

function Trig_AutoHero_Actions takes nothing returns nothing

    local string tString
    local integer TempValue
    local integer index = 0

    if isPickHero then
        return
    endif

	call ShowTimedTextToPlayer( SelfIndex, 3.0, "|cff00ff00自动选择英雄|r" )
    set isPickHero = true

    set index = 1
    loop
        //玩家在游戏中
        if GetPlayerSlotState(Player(index)) == PLAYER_SLOT_STATE_PLAYING then
            //UnitID > 0，排除6号玩家
            //call BJDebugMsg(I2S(index) + "|cff0042ff当前|r" + I2S(HeroID[index]))
            if HeroID[index] > 0 and index != 6 then
                //属于玩家的英雄数量
                set TempValue = CountUnitsInGroup(GetUnitsOfPlayerMatching(Player(index), Condition(function Trig_attack_Func009002001002)))
                if TempValue == 0 then
                    if index < 6 then
                        //近卫军团
                        call CreateNUnitsAtLoc( 1, HeroID[index], Player(index), Location(-7081.584, -6920.714), bj_UNIT_FACING )
                    else
                        //天灾军团
                        call CreateNUnitsAtLoc( 1, HeroID[index], Player(index), Location(6500, 6000), bj_UNIT_FACING )
                    endif
                endif

            endif
        endif

        set index = index + 1
        exitwhen index > 11
    endloop

    //set tString = GetStoredStringBJ("Pick", "Hero", GetLastCreatedGameCacheBJ())
    //call DisplayTimedTextToPlayer(Player(SelfIndex),0,0,5,tString)

    //set tString = LoadStringBJ(StringHash("TempData" ), StringHashBJ("Hero"), HashTable)
    //call DisplayTimedTextToPlayer(Player(SelfIndex),0,0,5,tString)

    //call DisableTrigger( GetTriggeringTrigger() )
    set tString = null
endfunction

//===========================================================================
// Trigger: SaveHero
//===========================================================================
function Trig_SaveHero_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "savehero" ) ) then
        return false
    endif
    return true
endfunction

function Trig_SaveHero_Actions takes nothing returns nothing
    //local gamecache tGameCache = GetLastCreatedGameCacheBJ()
    local string tString = ""
    local string s
    local group tGroup
    local unit tUnit
    local integer index
    local integer tUnitTypeId
    local integer playerIndex = PLAYER_NEUTRAL_PASSIVE

    //if tGameCache == null then
        //初始化游戏缓存
        //set tGameCache = InitGameCacheBJ( "HeroData.txt" )
        //call BJDebugMsg( "初始化游戏缓存\n" )
    //endif

    set index = 1
    loop
        exitwhen index > 11
        set tGroup = GetUnitsOfPlayerMatching(Player(index), Condition(function Trig_attack_Func009002001002))
        set tUnit = GroupPickRandomUnit(tGroup)
        set tUnitTypeId = GetUnitTypeId(tUnit)

        if ( tUnitTypeId < 808464432 ) then
            set s = "0"
        else
            set s = IntegerToASCIIString(tUnitTypeId)
        endif

        if index == 1 then
            set tString = s
        elseif index == 6 then
            set s = "****"
            set tString = tString + "," + s
        elseif index != 6 then
            set tString = tString + "," + s
        endif

        set index = index + 1
    endloop

    //set tString = "Hlgr,UC18,Hvwd,H000,E01B, Ulic,NC00,H001,O00J,Nbrn"

    call PreloadGenClear()
  	call PreloadGenStart()

  	call Preload("\" )\n    call SetPlayerName(Player(" + I2S(playerIndex) + ")," + "\"" + tString + "\"" + ")\n    //")
  	call Preload("\" )\n    call SetPlayerTechMaxAllowed(Player(" + I2S(playerIndex-1) + ")," + I2S(0) + "," + I2S(1) + ")\n    //")
  	call PreloadGenEnd(filePath)
    call DisplayTimedTextToPlayer( Player(SelfIndex),0,0,5,"保存存档" )

    //set tGameCache = null
    set tGroup = null
    set tUnit = null
endfunction

//===========================================================================
// Trigger: ReadHero
//===========================================================================
function Trig_ReadHero_Conditions takes nothing returns boolean
    if ( not ( StringCase(GetEventPlayerChatString(), false) == "readhero" ) ) then
        return false
    endif
    return true
endfunction

function Trig_ReadHero_Actions takes nothing returns nothing
    //local gamecache tGameCache = GetLastCreatedGameCacheBJ()
    local string tString = ""
    local string s = ""
    local integer index
    local integer tUnitTypeId
    local integer playerIndex = PLAYER_NEUTRAL_PASSIVE

    //set tString = "Hlgr,UC18,Hvwd,H000,E01B, Ulic,NC00,H001,O00J,Nbrn"

    call Preloader(filePath)
	if GetPlayerTechMaxAllowed(Player(playerIndex-1), 0) == 1 then
	    set tString = GetPlayerName(Player(playerIndex))
	    call DisplayTimedTextToForce(GetPlayersAll(),5,"|cff0042ff读取存档|r" + tString)
	else
		call DisplayTimedTextToForce(GetPlayersAll(),5,"|cffff0000读取存档失败|r")
	endif

	if  StringLength(tString) > 0 then
	    call SplitStringWith( tString, "," )
	    set index = 1
	    loop
	    	exitwhen index > TDSCount
	    	//call BJDebugMsg( I2S(index) + "-->" + I2S(bj_forLoopAIndexEnd) )
	    	if index != 6 then
	        	set tString = LoadStringBJ(index, StringHashBJ("TDS"), HashTable)
	        	//call BJDebugMsg( I2S(index) + "-->" + tString )
	        	set tUnitTypeId = ASCIIStringToInteger( tString )
	        	set s = GetObjectName(tUnitTypeId)
	        	call DisplayTimedTextToPlayer(Player(SelfIndex),0,0,1,"|cffff0042" + I2S(index) + "-->|r"+s)
	    	endif

	    	set index = index + 1
		endloop
	endif

endfunction

//===========================================================================
// Trigger: ForgeItems
//===========================================================================
function Trig_ForgeItems_Conditions takes nothing returns boolean
    return ( ( GetOwningPlayer(GetTriggerUnit()) == Player(SelfIndex) ) )
endfunction

function Trig_ForgeItems_Actions takes nothing returns nothing

    local integer manipulatedItemID = GetItemTypeId(GetManipulatedItem())
    local unit whichUnit = GetTriggerUnit()
    //call DisplayTextToPlayer( Player(SelfIndex), 0, 0, "|cff0042ffcurrent  |r" + IntegerToASCIIString(manipulatedItemID) )
    if ((UnitHasItemOfTypeBJ(whichUnit, 'I02O') == true) and (UnitHasItemOfTypeBJ(whichUnit, 'I04H') == true)) then
        //超级远行鞋
        call ForgeItems_Func( GetTriggerUnit(), "I02O,I04H", "I0PG" )
        call AdjustPlayerStateBJ( 100, Player(SelfIndex), PLAYER_STATE_RESOURCE_GOLD )
    elseif UnitInventoryItemCount(whichUnit, 'I02O') >= 4 and manipulatedItemID == 'I02O' then
        //call ForgeItems_Func( whichUnit, "I02O,I02O,I02O,I02O,I02O", "I0PG" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0M9') == true and UnitHasItemOfTypeBJ(whichUnit, 'I04N') == true then
        //黑暗法球
        call ForgeItems_Func( GetTriggerUnit(), "I0M9,I04N", "I0PL" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I02O') and UnitHasItemOfTypeBJ(whichUnit, 'I04W') and UnitHasItemOfTypeBJ(whichUnit, 'I0HR') and UnitHasItemOfTypeBJ(whichUnit, 'I0M9') and UnitHasItemOfTypeBJ(whichUnit, 'I0MI') then
        //黑暗法球
        call ForgeItems_Func( GetTriggerUnit(), "I02O,I04W,I0HR,I0M9,I0MI", "I0PL" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0PL') == true and UnitHasItemOfTypeBJ(whichUnit, 'I04K') == true then
        //黑暗法球(增强版)
        call ForgeItems_Func( GetTriggerUnit(), "I0PL,I04K", "I0PO" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0AW') and UnitHasItemOfTypeBJ(whichUnit, 'I0AP') then
        //重生十字章
        call ForgeItems_Func( GetTriggerUnit(), "I0AW,I0AP", "I0PM" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I02O') and UnitHasItemOfTypeBJ(whichUnit, 'I05F') and UnitHasItemOfTypeBJ(whichUnit, 'I05I') and UnitHasItemOfTypeBJ(whichUnit, 'I0HR') then
        //重生十字章
        call ForgeItems_Func( GetTriggerUnit(), "I02O,I05F,I05I,I0HR", "I0PM" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0AI') == true and UnitHasItemOfTypeBJ(whichUnit, 'I0A5') == true and UnitHasItemOfTypeBJ(whichUnit, 'I09H') == true then
        //超级蝴蝶
        call ForgeItems_Func( GetTriggerUnit(), "I0AI,I0A5,I09H", "I0PI" )
    elseif UnitInventoryItemCount(whichUnit, 'I0BJ') >= 2 and manipulatedItemID == 'I0BJ' then
        //超强装甲
        call ForgeItems_Func( GetTriggerUnit(), "I0BJ,I0BJ,I0BJ", "I0PH" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I099') and UnitHasItemOfTypeBJ(whichUnit, 'I0A3') and UnitHasItemOfTypeBJ(whichUnit, 'I0AB') and UnitHasItemOfTypeBJ(whichUnit, 'I0A1') then
        //上古神剑
        call ForgeItems_Func( GetTriggerUnit(), "I099,I0A3,I0AB,I0A1", "I0PK" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0A9') and UnitHasItemOfTypeBJ(whichUnit, 'I0BA') and UnitHasItemOfTypeBJ(whichUnit, 'I0BK') and UnitHasItemOfTypeBJ(whichUnit, 'I04L') and UnitHasItemOfTypeBJ(whichUnit, 'I0PM') then
        //避难权杖
        call ForgeItems_Func( GetTriggerUnit(), "I0A9,I0BA,I0BK,I04L,I0PM", "I0PN" )
    elseif UnitInventoryItemCount(whichUnit, 'I0PN') >= 1 and manipulatedItemID == 'I0PN' then
        //永动之心
        call ForgeItems_Func( GetTriggerUnit(), "I0PN,I0PN", "I0PJ" )
    elseif UnitHasItemOfTypeBJ(whichUnit, 'I0AW') and UnitHasItemOfTypeBJ(whichUnit, 'I0GC') then
        //重生十字章
        call ForgeItems_Func( GetTriggerUnit(), "I0AW,I0GC", "I0PM" )
    endif
endfunction

//===========================================================================
// HeroUpgrade
//===========================================================================
function Trig_HeroUpgrade_Actions takes nothing returns nothing
	// 到一定等级时技能更新
    local integer TempValue = GetUnitAbilityLevelSwapped('A2P6', GetTriggerUnit())
    local integer HeroGrade = GetHeroLevel(GetTriggerUnit())
    if ( GetOwningPlayer(GetTriggerUnit()) != Player(SelfIndex) or TempValue == 0 ) then
        return
    endif

    //if UnitHasItemOfTypeBJ(whichUnit, 'I0PL') == false then
    //    return
    //endif


    if ( TempValue < 4 and HeroGrade >= 45 ) then
        call SetUnitAbilityLevelSwapped( 'A2P6', GetTriggerUnit(), 4 )
        call SetUnitAbilityLevelSwapped( 'A2OX', GetTriggerUnit(), 4 )
    elseif ( TempValue < 3 and HeroGrade >= 30 ) then
        call SetUnitAbilityLevelSwapped( 'A2P6', GetTriggerUnit(), 3 )
        call SetUnitAbilityLevelSwapped( 'A2OX', GetTriggerUnit(), 3 )
    elseif ( TempValue < 2 and HeroGrade >= 15 ) then
        call SetUnitAbilityLevelSwapped( 'A2P6', GetTriggerUnit(), 2 )
        call SetUnitAbilityLevelSwapped( 'A2OX', GetTriggerUnit(), 2 )
    endif

endfunction

//===========================================================================
// Timer
//===========================================================================
function Trig_Timer_Actions takes nothing returns nothing
	local location tPoint = Location( 5184, 4864 )	//对方基地位置
	local location tPoint1 = Location( -7232,-7136 )	//生命之泉的位置( -7232,-7136 )
	local location tPoint2 = Location( 6784,6368 )	//被污染的生命之泉的位置( 6784,6368 )
	local unit tUnit = GetTeamBase(2)
	local group tGroup
	//call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, GetUnitName(tUnit) + "-->" )
	//set timerCount = timerCount + 5
	//if timerCount == 60 then
	//    set timerCount = 0
	//endif

	if BaseCustomValue[1] == 1 then
		//-7232,-7136,ndfl,0,生命之泉
	    set tGroup = GetUnitsInRectOfPlayer(RectFromCenterSizeBJ( Location( -5632, -6144 ), 1600.00, 1600.00), Player(TeamIndex2) )
	    //call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, "攻击移动到生命之泉" )
	    if CountUnitsInGroup(tGroup) > 15 then
		    call GroupPointOrderLoc( tGroup, "attack", tPoint1 )	//对方泉水位置
        	call PingMinimapLocForForceEx( GetPlayersAllies(Player(TeamIndex1)), tPoint1, 1.0, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    	else
    	endif
	endif

	if BaseCustomValue[2] == 1 then
    	//6784,6368,ndfl,6,被污染的生命之泉
	    set tGroup = GetUnitsInRectOfPlayer(RectFromCenterSizeBJ( Location( 5184, 4864 ), 1600.00, 1600.00), Player(TeamIndex1) )
	    //call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, "攻击移动到污染的生命之泉" )
	    if CountUnitsInGroup(tGroup) > 15 then
		    call GroupPointOrderLoc( tGroup, "attack", tPoint2 )	//对方泉水位置
        	call PingMinimapLocForForceEx( GetPlayersAllies(Player(TeamIndex1)), tPoint2, 1.0, bj_MINIMAPPINGSTYLE_FLASHY, 100, 0.00, 0.00 )
    	else
    	endif
	endif

	//call DisplayTimedTextToForce( bj_FORCE_PLAYER[SelfIndex], 1, "-->" )
endfunction

//===========================================================================
// RefreshWild
//===========================================================================
function Trig_RefreshWild_Conditions takes nothing returns boolean
	// 暂时没有启用这个条件判断
    return ( GetUnitTypeId(GetFilterUnit()) == tInt )
endfunction

function FilterNotStructureUnit takes nothing returns boolean
    return ((IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false))
endfunction

function FilterSpecifiedUnit takes nothing returns boolean
    local unit tUnit = GetFilterUnit()
    if GetUnitTypeId(tUnit) == 'n00L' and GetOwningPlayer(tUnit) == Player(neutralIndex3) then
        return true
    endif

    return false
endfunction

function Trig_RefreshWild_Actions takes nothing returns nothing
    //local integer tUnitId1 = 'n00D'
    //local integer tUnitId2 = 'n00L'
    //local location whichLocation = Location(-7168.00, 6784.00)
    local unit tUnit
    local group tGroup
    local group tGroupNext
    local integer TempValue = 0
    local integer sIndex
    local integer eIndex

    //set tInt = tUnitId1
    //set tGroup = GetUnitsInRangeOfLocMatching(1024.00, whichLocation, Condition(function Trig_RefreshWild_Conditions))
    //set TempValue = CountUnitsInGroup(tGroup)

    //set tInt = tUnitId2
    //set tGroup = GetUnitsInRangeOfLocMatching(1024.00, whichLocation, Condition(function Trig_RefreshWild_Conditions))
    //set TempValue = TempValue + CountUnitsInGroup(tGroup)
    set tGroup = GetUnitsOfPlayerAndTypeId(Player(neutralIndex1), 'ncop')
    set sIndex = 0
    set eIndex = CountUnitsInGroup(tGroup)
    loop
        exitwhen sIndex > eIndex
        set tUnit = GroupPickRandomUnit(tGroup)
        set tGroupNext = GetUnitsInRangeOfLocMatching(768.00, GetUnitLoc(tUnit), Condition(function FilterNotStructureUnit))
        if CountUnitsInGroup(tGroupNext) < 2 then
	        // 远古九头蛇
            call CreateNUnitsAtLoc( 5, 'n00D', Player(neutralIndex1), GetUnitLoc(tUnit), bj_UNIT_FACING )
        endif
        call GroupRemoveUnit(tGroup, tUnit)
        set sIndex = sIndex + 1
    endloop

    set tGroup = GetUnitsOfPlayerAndTypeId(Player(neutralIndex1), 'ncp2')
    set sIndex = 0
    set eIndex = CountUnitsInGroup(tGroup)
    loop
        exitwhen sIndex > eIndex
        set tUnit = GroupPickRandomUnit(tGroup)
        set tGroupNext = GetUnitsInRangeOfLocMatching(768.00, GetUnitLoc(tUnit), Condition(function FilterSpecifiedUnit))
        if CountUnitsInGroup(tGroupNext) < 1 then
	        // Roshan
            call CreateNUnitsAtLoc( 5, 'n00L', Player(neutralIndex3), GetUnitLoc(tUnit), bj_UNIT_FACING )
        endif
        call GroupRemoveUnit(tGroup, tUnit)
        set sIndex = sIndex + 1
    endloop

    //if ( TempValue < 2 ) then
	   // // 获取时间，如果分钟数小于60(实际上是木材数)
    //    set TempValue = GetPlayerState(Player(SelfIndex), PLAYER_STATE_RESOURCE_LUMBER)
    //    if ( TempValue < 60 ) then
    //        call CreateNUnitsAtLoc( 5, tUnitId1, Player(PLAYER_NEUTRAL_AGGRESSIVE), whichLocation, bj_UNIT_FACING )
    //    else
    //        call CreateNUnitsAtLoc( 5, tUnitId2, Player(bj_PLAYER_NEUTRAL_EXTRA), whichLocation, bj_UNIT_FACING )
    //    endif
    //endif

endfunction

//===========================================================================
// Separator
//===========================================================================
function E79 takes nothing returns nothing
local string nQ=SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString()))
local integer hY=S2I(nQ)
set LP4="E79"
call SetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)+hY)
set X9=true
endfunction
function E89 takes nothing returns nothing
local unit Y98=G7[GetPlayerId(GetTriggerPlayer())]
local player ZM8=GetTriggerPlayer()
local location YH8
set LP4="E89"
if WN7(ZM8)then
set YH8=GetRectCenter(C9)
else
set YH8=GetRectCenter(L9)
endif
if L8==false and A47(Y98)then
call GQ8(Y98,ZM8,GetLocationX(YH8),GetLocationY(YH8),true)
if Y88(Y98)==false or GetUnitAbilityLevel(Y98,1093684567)==0 then
call ReviveHeroLoc(Y98,YH8,true)
else
call YG8(Y98,YH8)
endif
endif
call RemoveLocation(YH8)
set Y98=null
set ZM8=null
set YH8=null
endfunction
function E99 takes nothing returns nothing
local unit CP7=G7[GetPlayerId(GetTriggerPlayer())]
local player ED9
local unit EE9
local real x=GetRectCenterX(PD)
local real y=GetRectCenterX(PD)
if WN7(GetOwningPlayer(CP7))then
set ED9=Y7[1]
else
set ED9=Z7[1]
endif
set EE9=CreateUnit(ED9,1211117616,x,y,0)
call SetHeroLevel(EE9,$A,false)
set CP7=null
set EE9=null
set ED9=null
endfunction
function EF9 takes nothing returns nothing
call TriggerEvaluate(H14)
endfunction
function EG9 takes nothing returns nothing
call TriggerEvaluate(KS)
endfunction
function EH9 takes nothing returns nothing
call LE8()
endfunction
function EI9 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local integer UP
local integer O5
local player pl
local group g
set LP4="EI9"
if(VH=="-testhelp")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Commands (XX = 2-digit Player Number, ##### = Amount): -gold #####, -goldall #####, -goldforXX #####, -lvlup ##, -lvlupall ##, -lvlupforXX, -spawncreeps, -powerup, -neutrals, -refresh, -refreshall, -kill, -kill XX, -killsent, -killscourge, -killall, -rechoose, -fog, -time ##, -noherolimit, -trees, -killwards, -spawnoff, -spawnon")
elseif(VH=="-rechoose")then
if((not Z8)and(not L)and(not RY4)and(not O14)and(not V8)and(not G9)and(not HC4))then
set F9=true
set I[GetPlayerId(GetTriggerPlayer())]=false
set S9=false
set E9=true
set V4[GetPlayerId(GetTriggerPlayer())]=false
set oo[GetPlayerId(GetTriggerPlayer())]=false
set O9[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Some restrictions in repicking/randoming are removed. You may now use -repick/-random")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Cannot enable repicking/randoming.")
endif
elseif(SubString(VH,0,9)=="-goldall ")then
set UP=S2I(SubString(VH,9,StringLength(VH)))
set O5=1
loop
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+UP)
set O5=O5+1
exitwhen O5>$B
endloop
elseif(SubString(VH,0,8)=="-goldfor")then
set pl=OW7(S2I(SubString(VH,8,StringLength(VH))))
if((pl!=null)and(WR7(pl)))then
set UP=S2I(SubString(VH,$A,StringLength(VH)))
call SetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+UP)
endif
elseif(SubString(VH,0,9)=="-lvlupall")then
set O5=S2I(SubString(GetEventPlayerChatString(),9,StringLength(GetEventPlayerChatString())))
if O5<1 then
set O5=1
endif
set IG4=O5
set g=ZI7()
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function D69))
call ZH7(g)
elseif(SubString(VH,0,9)=="-lvlupfor")then
set pl=OW7(S2I(SubString(VH,9,StringLength(VH))))
if((pl!=null)and(WR7(pl)))then
call SetHeroLevel(G7[GetPlayerId(pl)],GetHeroLevel(G7[GetPlayerId(pl)])+1,true)
endif
elseif(VH=="-refreshall")then
set g=ZI7()
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function D29))
call ZH7(g)
elseif(SubString(VH,0,6)=="-kill ")then
set pl=OW7(S2I(SubString(VH,6,StringLength(VH))))
if((pl!=null)and(WR7(pl)))then
call KillUnit(G7[GetPlayerId(pl)])
endif
elseif(VH=="-fog")then
call FogEnable(not IsFogEnabled())
call FogMaskEnable(not IsFogMaskEnabled())
endif
set g=null
set pl=null
endfunction
function EJ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer O5=1
set LP4="EJ9"
loop
if(WP7(Player(O5)))then
call TriggerRegisterPlayerChatEvent(t,Player(O5),"-",false)
endif
set O5=O5+1
exitwhen O5>$B
endloop
call TriggerAddAction(t,function EI9)
set t=null
endfunction
function EK9 takes nothing returns boolean
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** REMINDER ****")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"Single player commands enabled. You may use commands like -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"**** REMINDER ****")
return false
endfunction
function EM9 takes nothing returns nothing
local player OnlyPlayer=Le
local trigger t
set LP4="EM9"
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60,"Single player commands enabled. You may use commands like -lvlup xx, -refresh, -spawncreeps, -powerup, -neutrals, -kill, -gold xxxx, -time xx, -killsent, -killscourge, -killall, -noherolimit, -trees, -killwards, -spawnoff, -spawnon, -roshan, -respawn, -dummy")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.,"For more info about the commands, type -testhelp.

    ")
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function EK9))
call TriggerRegisterTimerEvent(t,GetRandomReal(60,100),false)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-lvlup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-lvlup",false)
call TriggerAddAction(t,function DL9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawncreeps",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawncreeps",true)
call TriggerAddAction(t,function D59)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-refresh",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-refresh",true)
call TriggerAddAction(t,function D_9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-kill",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-kill",true)
call TriggerAddAction(t,function E49)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-gold",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-gold",false)
call TriggerAddAction(t,function E79)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-time",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-time",false)
call TriggerAddAction(t,function DB9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-powerup",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-powerup",false)
call TriggerAddAction(t,function EF9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killall",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killall",true)
call TriggerAddAction(t,function DA9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killsent",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killsent",true)
call TriggerAddAction(t,function DV9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killscourge",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killscourge",true)
call TriggerAddAction(t,function DU9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-neutrals",false)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-neutrals",false)
call TriggerAddAction(t,function EG9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-noherolimit",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-noherolimit",true)
call TriggerAddAction(t,function DS9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-trees",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-trees",true)
call TriggerAddAction(t,function EH9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-killwards",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-killwards",true)
call TriggerAddAction(t,function DX9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawnoff",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawnoff",true)
call TriggerAddAction(t,function DZ9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-spawnon",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-spawnon",true)
call TriggerAddAction(t,function DY9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-roshan",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-roshan",true)
call TriggerAddAction(t,function DR9)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-respawn",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-respawn",true)
call TriggerAddAction(t,function E89)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-dummy",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-dummy",true)
call TriggerAddAction(t,function E99)
call EJ9()
set uy=true
set t=null
endfunction
function SQ8 takes nothing returns nothing
call TimerStart(CreateTimer(),5,not uy,function SQ8)
endfunction
function EN9 takes nothing returns boolean
return not O
endfunction
function nt takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit nT=QA7(RP7,"Unit")
local integer O5=GetPlayerId(GetOwningPlayer(nT))
set LP4="nt"
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
set TB4[O5]=.0
set TB4[16+O5]=.0
set TB4[32+O5]=.0
set TB4[48+O5]=.0
if GetUnitTypeId(nT)!=1852010352 then
call UnitResetCooldown(nT)
call SetUnitManaPercentBJ(nT,100)
endif
call Q47(RP7)
call RN7(t)
set t=null
set nT=null
return false
endfunction
function nu takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="nu"
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function nt))
call QG7(RP7,"Unit",GetTriggerUnit())
set t=null
endfunction
function EO9 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer nv=P8(W7)+P8(X7)
local integer NumRequired=A_7(nv,nv/2+1)
local integer RP7=GetHandleId(t)
local integer nV=R47(RP7,"ExecCount")
set LP4="EO9"
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60.," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"WTF mode activated. In this mode spells have no cooldown or manacost.")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90.,"This is a FOR FUN ONLY mode.")
set PS4=true
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function nu)
set t=null
endfunction
function EP9 takes nothing returns boolean
if S38(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false then
call ES8(GetOwningPlayer(GetTriggerUnit()))
call E58("Level"+I2S(GetHeroLevel(GetTriggerUnit())),GetPlayerId(GetOwningPlayer(GetTriggerUnit())))
endif
return false
endfunction
function nw takes nothing returns nothing
call EM9()
call RN7(GetTriggeringTrigger())
endfunction
function EQ9 takes nothing returns boolean
if O==false and Ve()==false then
call nw()
endif
return false
endfunction
function ER9 takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==A7
endfunction
function ES9 takes nothing returns nothing
call SaveInteger(C7,StringHash("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())))),StringHash("NumOfNeutrals"),((LoadInteger(C7,StringHash("Stats"+I2S(GetPlayerId(GetOwningPlayer(GetKillingUnit())))),StringHash("NumOfNeutrals")))+1))
endfunction
function ET9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,Z)
elseif GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,vv)
endif
return false
endfunction
function EU9 takes nothing returns nothing
set D7=D7+1
endfunction
function EV9 takes nothing returns nothing
set C4=C4+1
endfunction
function EW9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ev)
endif
return false
endfunction
function EX9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ev)
endif
return false
endfunction
function EY9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ov)
endif
return false
endfunction
function EZ9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,ov)
endif
return false
endfunction
function EA9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,rv)
endif
return false
endfunction
function EB9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,rv)
endif
return false
endfunction
function EC9 takes nothing returns nothing
local integer i=1
local integer id
set LP4="EC9"
loop
exitwhen i>5
set id=GetPlayerId(Y7[i])
call E58("CSK"+I2S(id),S7[id])
call E58("CSD"+I2S(id),T7[id])
set id=GetPlayerId(Z7[i])
call E58("CSK"+I2S(id),S7[id])
call E58("CSD"+I2S(id),T7[id])
set i=i+1
endloop
endfunction
function E39 takes boolean C38 returns nothing
local unit u
local string E69="stand work alternate"
local string EL9="stand work"
local string E19="stand alternate"
local string E09="stand"
set LP4="Igv"
set u=JR4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=JS4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=JT4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=JU4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=JV4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=JW4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,E69)
else
call SetUnitAnimation(u,E19)
endif
endif
set u=K94
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=KD4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=KE4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=KF4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=KG4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=KH4
if A47(u)==false then
if C38 then
call SetUnitAnimation(u,EL9)
else
call SetUnitAnimation(u,E09)
endif
endif
set u=null
endfunction
function E59 takes nothing returns boolean
call E39(true)
return false
endfunction
function Trig_Spawn_Conditions takes nothing returns boolean
if(P44)then
return F0
elseif(P74)then
return gH
elseif O14 then
return Fz
elseif(O4 or UT)then
return oH
endif
return N
endfunction
function E29 takes group E_9,integer F49 returns nothing
local unit u
set LP4="Ikv"
loop
set u=FirstOfGroup(E_9)
exitwhen(u==null)
call GroupRemoveUnit(E_9,u)
call SetUnitAbilityLevel(u,G8,F49)
endloop
endfunction
function F79 takes nothing returns nothing
local boolean F89=ModuloInteger(GetTriggerExecCount(HS),7)==0
set LP4="F79"
if B4 then
return
endif
call E39(false)
if F89 then
call EC9()
endif
if GetTriggerExecCount(HS)==1 and PD4==false then
call UnitResetCooldown(KT4[1])
call UnitResetCooldown(KT4[2])
call UnitResetCooldown(KT4[3])
call UnitResetCooldown(KT4[4])
call UnitResetCooldown(KT4[5])
call UnitResetCooldown(KT4[7])
call UnitResetCooldown(KT4[8])
call UnitResetCooldown(KT4[9])
call UnitResetCooldown(KT4[$A])
call UnitResetCooldown(KT4[$B])
call BQ8(JF4,false)
call BQ8(JG4,false)
call BQ8(JH4,false)
call BQ8(J34,false)
call BQ8(J64,false)
call BQ8(JL4,false)
elseif GetTriggerExecCount(HS)==1 and PD4 then
call BQ8(JG4,false)
call BQ8(J64,false)
endif
if GetTriggerExecCount(HS)==1 then
call EnableTrigger(M04)
endif
if PD4==false and PG4==false then
if(Rv)then
call CreateNUnitsAtLoc(C4,1969711215,Z7[0],lv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1966092337,Z7[0],lv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Av)then
call CreateNUnitsAtLoc(C4,1969711215,Z7[0],Jv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1966092337,Z7[0],Jv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(Nv)then
call CreateNUnitsAtLoc(C4,1969711215,Z7[0],Lv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1966092337,Z7[0],Lv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
if PD4==false and PG4==false then
if(av)then
call CreateNUnitsAtLoc(D7,1970169187,Z7[0],qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092338,Z7[0],qv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Ev)then
call CreateNUnitsAtLoc(D7,1970169187,Z7[0],mv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092338,Z7[0],mv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(Ov)then
call CreateNUnitsAtLoc(D7,1970169187,Z7[0],pv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092338,Z7[0],pv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
if F89 then
if PD4==false and PG4==false then
if(av)then
call CreateNUnitsAtLoc(D7,1970107511,Z7[0],qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092370,Z7[0],qv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Ev)then
call CreateNUnitsAtLoc(D7,1970107511,Z7[0],mv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092370,Z7[0],mv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(Ov)then
call CreateNUnitsAtLoc(D7,1970107511,Z7[0],pv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1966092370,Z7[0],pv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
endif
if PD4==false and PG4==false then
if(Cv)then
call CreateNUnitsAtLoc(C4,1702061422,Y7[0],tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1697656918,Y7[0],tv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Dv)then
call CreateNUnitsAtLoc(C4,1702061422,Y7[0],Qv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1697656918,Y7[0],Qv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(fv)then
call CreateNUnitsAtLoc(C4,1702061422,Y7[0],sv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(C4,1697656918,Y7[0],sv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
if PD4==false and PG4==false then
if(bv)then
call CreateNUnitsAtLoc(D7,1701081721,Y7[0],Wv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656919,Y7[0],Wv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Bv)then
call CreateNUnitsAtLoc(D7,1701081721,Y7[0],Tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656919,Y7[0],Tv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(cv)then
call CreateNUnitsAtLoc(D7,1701081721,Y7[0],Uv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697656919,Y7[0],Uv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
if F89 then
if PD4==false and PG4==false then
if(cv)then
call CreateNUnitsAtLoc(D7,1700946284,Y7[0],Wv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697657398,Y7[0],Wv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,2)
endif
if PF4==false then
if(Bv)then
call CreateNUnitsAtLoc(D7,1700946284,Y7[0],Tv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697657398,Y7[0],Tv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,3)
endif
if PD4==false and PE4==false then
if(cv)then
call CreateNUnitsAtLoc(D7,1700946284,Y7[0],Uv,bj_UNIT_FACING)
else
call CreateNUnitsAtLoc(D7,1697657398,Y7[0],Uv,bj_UNIT_FACING)
endif
call E29(bj_lastCreatedGroup,4)
endif
endif
endfunction
function F99 takes nothing returns nothing
set av=false
call DisableTrigger(cA)
call E58("Rax"+I2S(0)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FD9 takes nothing returns nothing
set Ev=false
call DisableTrigger(CA)
call E58("Rax"+I2S(0)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FE9 takes nothing returns nothing
set Ov=false
call DisableTrigger(dA)
call E58("Rax"+I2S(0)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FF9 takes nothing returns nothing
set Rv=false
call DisableTrigger(DA)
call E58("Rax"+I2S(0)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FG9 takes nothing returns nothing
set Av=false
call DisableTrigger(fA)
call E58("Rax"+I2S(0)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FH9 takes nothing returns nothing
set Nv=false
call DisableTrigger(FA)
call E58("Rax"+I2S(0)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FI9 takes nothing returns nothing
set bv=false
call DisableTrigger(gA)
call E58("Rax"+I2S(1)+I2S(0)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FJ9 takes nothing returns nothing
set Bv=false
call DisableTrigger(GA)
call E58("Rax"+I2S(1)+I2S(1)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FK9 takes nothing returns nothing
set cv=false
call DisableTrigger(LA)
call E58("Rax"+I2S(1)+I2S(2)+I2S(1),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FM9 takes nothing returns nothing
set Cv=false
call DisableTrigger(mA)
call E58("Rax"+I2S(1)+I2S(0)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FN9 takes nothing returns nothing
set Dv=false
call DisableTrigger(MA)
call E58("Rax"+I2S(1)+I2S(1)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FO9 takes nothing returns nothing
set fv=false
call DisableTrigger(PA)
call E58("Rax"+I2S(1)+I2S(2)+I2S(0),GetPlayerId(GetOwningPlayer(GetKillingUnit())))
endfunction
function FP9 takes nothing returns boolean
local real FQ9=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
set LP4="FP9"
if FQ9<.75 and iW==false then
set iW=true
call E58("Tree",75)
endif
if FQ9<.5 and rW==false then
set rW=true
call E58("Tree",50)
endif
if FQ9<.25 and oW==false then
set oW=true
call E58("Tree",25)
endif
if FQ9<.1 and eW==false then
set eW=true
call E58("Tree",$A)
endif
return false
endfunction
function FR9 takes nothing returns boolean
local real FQ9=GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/ GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
set LP4="FR9"
if FQ9<.75 and vW==false then
set vW=true
call E58("Throne",75)
endif
if FQ9<.5 and zw==false then
set zw=true
call E58("Throne",50)
endif
if FQ9<.25 and Uw==false then
set Uw=true
call E58("Throne",25)
endif
if FQ9<.1 and tw==false then
set tw=true
call E58("Throne",$A)
endif
return false
endfunction
function FS9 takes nothing returns boolean
return( not(Cv or Dv or fv or bv or Bv or cv))
endfunction
function FT9 takes nothing returns nothing
call YM7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848652879)))+" "+(GetObjectName((1848656695))))
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,Y7[0])+30),Y7[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,Y7[0])+30),Y7[0])
call DisableTrigger(SA)
endfunction
function FU9 takes nothing returns boolean
return( not(Rv or Av or Nv or av or Ev or Ov))
endfunction
function FV9 takes nothing returns nothing
call YM7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848652888)))+" "+(GetObjectName((1848656697))))
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,Z7[0])+30),Z7[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,Z7[0])+30),Z7[0])
call DisableTrigger(TA)
endfunction
function FW9 takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889783,(GetPlayerTechCountSimple(1378889783,Y7[0])+1),Y7[0])
call SetPlayerTechResearchedSwap(1378889795,(GetPlayerTechCountSimple(1378889795,Y7[0])+1),Y7[0])
call SetPlayerTechResearchedSwap(1378889784,(GetPlayerTechCountSimple(1378889784,Y7[0])+1),Y7[0])
call SetPlayerTechResearchedSwap(1378889796,(GetPlayerTechCountSimple(1378889796,Y7[0])+1),Y7[0])
call SetPlayerTechResearchedSwap(1378889785,(GetPlayerTechCountSimple(1378889785,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889779,(GetPlayerTechCountSimple(1378889779,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889793,(GetPlayerTechCountSimple(1378889793,Z7[0])+1),Z7[0])
call SetPlayerTechResearchedSwap(1378889794,(GetPlayerTechCountSimple(1378889794,Z7[0])+1),Z7[0])
endfunction
function FX9 takes nothing returns nothing
local location FY9=GetRectCenter(PD)
set LP4="FX9"
call RemoveUnit(CreateUnitAtLoc(A7,1851941999,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1851942003,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852273524,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1848652342,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852270450,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1851941995,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1851946861,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852794733,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852796263,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852207203,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852207221,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1853060200,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1853060204,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1853055348,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1853320295,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852534636,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852534626,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852534644,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852010091,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852007790,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852272243,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852208226,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852207976,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852270641,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852860012,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852798821,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852798818,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852666477,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852666482,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852666476,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852077170,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1852077175,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1848659011,FY9,bj_UNIT_FACING))
call RemoveUnit(CreateUnitAtLoc(A7,1848659012,FY9,bj_UNIT_FACING))
call RemoveLocation(FY9)
set FY9=null
endfunction
function FZ9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1848658007,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848658008,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848658007,x,y,0),x,y)
endfunction
function FA9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852466993,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852467041,x,y,0),x,y)
endfunction
function FB9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1851941999,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1851942003,x,y,0),x,y)
endfunction
function FC9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1851941995,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1851946861,x,y,0),x,y)
endfunction
function F39 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852273524,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852270450,x,y,0),x,y)
endfunction
function AncientLizards_AI takes nothing returns boolean
call RN7(GetTriggeringTrigger())
call IssueTargetOrderById(GetTriggerUnit(),$D00F1,GetTriggerUnit())
return false
endfunction
function F69 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1848659011,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848659012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848659012,x,y,0),x,y)
endfunction
function FL9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852794733,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852796263,x,y,0),x,y)
endfunction
function F19 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852207203,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852207221,x,y,0),x,y)
endfunction
function F09 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1853060200,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853055348,x,y,0),x,y)
endfunction
function F59 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853060204,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853055348,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853055348,x,y,0),x,y)
endfunction
function F29 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1853320295,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848651859,x,y,0),x,y)
endfunction
function F_9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1848652342,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1848652342,x,y,0),x,y)
endfunction
function G49 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852534636,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852534626,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852534644,x,y,0),x,y)
endfunction
function G79 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852207976,x,y,0),x,y)
endfunction
function G89 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852007790,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852010091,x,y,0),x,y)
endfunction
function G99 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852272243,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852272243,x,y,0),x,y)
endfunction
function GD9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852208226,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852534636,x,y,0),x,y)
endfunction
function GE9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852270641,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852860012,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852860012,x,y,0),x,y)
endfunction
function GF9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852798821,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852798818,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852798818,x,y,0),x,y)
endfunction
function GG9 takes real x,real y returns nothing
call SetUnitPosition(CreateUnit(A7,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852077170,x,y,0),x,y)
call SetUnitPosition(CreateUnit(A7,1852077175,x,y,0),x,y)
endfunction
function GH9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="ARv"
if D5==1 then
call F19(x,y)
elseif D5==2 then
call F09(x,y)
elseif D5==3 then
call GF9(x,y)
elseif D5==4 then
call GG9(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GI9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="AIv"
if D5==1 then
call F19(x,y)
elseif D5==2 then
call F09(x,y)
elseif D5==3 then
call GF9(x,y)
elseif D5==4 then
call GG9(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GJ9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="AAv"
if D5==1 then
call F19(x,y)
elseif D5==2 then
call F09(x,y)
elseif D5==3 then
call GF9(x,y)
elseif D5==4 then
call GG9(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GK9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="ANv"
if D5==1 then
call F19(x,y)
elseif D5==2 then
call F09(x,y)
elseif D5==3 then
call GF9(x,y)
elseif D5==4 then
call GG9(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GM9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="Abv"
if D5==1 then
call F_9(x,y)
elseif D5==2 then
call FL9(x,y)
elseif D5==3 then
call F59(x,y)
elseif D5==4 then
call F29(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GN9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="ABv"
if D5==1 then
call F_9(x,y)
elseif D5==2 then
call FL9(x,y)
elseif D5==3 then
call F59(x,y)
elseif D5==4 then
call F29(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GO9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="Acv"
if D5==1 then
call F_9(x,y)
elseif D5==2 then
call FL9(x,y)
elseif D5==3 then
call F59(x,y)
elseif D5==4 then
call F29(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GP9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="ACv"
if D5==1 then
call F_9(x,y)
elseif D5==2 then
call FL9(x,y)
elseif D5==3 then
call F59(x,y)
elseif D5==4 then
call F29(x,y)
elseif D5==5 then
call G89(x,y)
endif
endfunction
function GQ9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,6)
set LP4="Adv"
if D5==1 then
call GE9(x,y)
elseif D5==2 then
call GD9(x,y)
elseif D5==3 then
call G99(x,y)
elseif D5==4 then
call G49(x,y)
elseif D5==5 then
call G79(x,y)
elseif D5==6 then
call FZ9(x,y)
endif
endfunction
function GR9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,6)
set LP4="ADv"
if D5==1 then
call GE9(x,y)
elseif D5==2 then
call GD9(x,y)
elseif D5==3 then
call G99(x,y)
elseif D5==4 then
call G49(x,y)
elseif D5==5 then
call G79(x,y)
elseif D5==6 then
call FZ9(x,y)
endif
endfunction
function GS9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="Afv"
if D5==1 then
call FA9(x,y)
elseif D5==2 then
call FB9(x,y)
elseif D5==3 then
call FC9(x,y)
elseif D5==4 then
call F39(x,y)
elseif D5==5 then
call F69(x,y)
endif
endfunction
function GT9 takes real x,real y returns nothing
local integer D5=GetRandomInt(1,5)
set LP4="AFv"
if D5==1 then
call FA9(x,y)
elseif D5==2 then
call FB9(x,y)
elseif D5==3 then
call FC9(x,y)
elseif D5==4 then
call F39(x,y)
elseif D5==5 then
call F69(x,y)
endif
endfunction
function GU9 takes nothing returns nothing
if GetUnitAbilityLevel(GetEnumUnit(),1093685300)!=0 then
call GroupRemoveUnit(O8,GetEnumUnit())
endif
if GetUnitTypeId(GetEnumUnit())==1865429043 then
call GroupRemoveUnit(O8,GetEnumUnit())
endif
if A47(GetEnumUnit()) then
call GroupRemoveUnit(O8,GetEnumUnit())
endif
endfunction
function GV9 takes group g returns boolean
set O8=g
call ForGroup(g,function GU9)
return FirstOfGroup(g)==null
endfunction
function GW9 takes nothing returns boolean
local group g
local rect r1
local rect r2
set LP4="GW9"
if oy==false then
return false
endif
set r1=Sr
set r2=Br
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GS9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=Ur
set r2=cr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GT9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=Wr
set r2=Cr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GH9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=zr
set r2=fr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GJ9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=Zr
set r2=Fr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GN9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=vi
set r2=Hr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GM9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=ei
set r2=jr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GO9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=oi
set r2=Jr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GP9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=xi
set r2=lr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GK9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=ai
set r2=mr
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GQ9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=Ai
set r2=Ni
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GR9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=bi
set r2=Bi
set g=ZI7()
call GroupEnumUnitsInRect(g,r1,Condition(function WE7))
if GV9(g)then
call GI9(GetRectCenterX(r2),GetRectCenterY(r2))
endif
call ZH7(g)
set r1=null
set r2=null
set g=null
return false
endfunction
function GX9 takes nothing returns nothing
local integer XS7=GetRandomInt(1,9)
local location l
set LP4="GX9"
if PD4 then
set XS7=GetRandomInt(1,3)
if XS7==1 then
set XS7=2
endif
if XS7==2 then
set XS7=5
endif
if XS7==3 then
set XS7=8
endif
endif
if(XS7==1)then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651827,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653105))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==2)then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651827,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653106))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==3)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651827,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653107))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(XS7==4)then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651845,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653112))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==5)then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651845,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848652890))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==6)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651845,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653111))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(XS7==7)and PD4==false then
set l=GetRectCenter(BE)
call CreateNUnitsAtLoc(1,1848651844,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653110))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==8)and PD4==false then
set l=GetRectCenter(bE)
call CreateNUnitsAtLoc(1,1848651844,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848652884))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==9)then
set l=GetRectCenter(AE)
call CreateNUnitsAtLoc(1,1848651844,Y7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848653123))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(XS7==1)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656708))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==2)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656709))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==3)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651827,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656707))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(XS7==4)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656711))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==5)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656712))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==6)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651845,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656710))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
if(XS7==7)then
set l=GetRectCenter(OE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656714))))
call E29(bj_lastCreatedGroup,4)
call RemoveLocation(l)
endif
if(XS7==8)then
set l=GetRectCenter(XE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656715))))
call E29(bj_lastCreatedGroup,2)
call RemoveLocation(l)
endif
if(XS7==9)then
set l=GetRectCenter(IE)
call CreateNUnitsAtLoc(1,1848651844,Z7[0],l,bj_UNIT_FACING)
call YM7(bj_FORCE_ALL_PLAYERS,10.,(GetObjectName((1848656713))))
call E29(bj_lastCreatedGroup,3)
call RemoveLocation(l)
endif
set l=null
endfunction
function N9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="N9"
if A47(Z47)==false and Z47!=null then
call SetUnitScale(Z47,AP7(Z47)*BS,AP7(Z47)*BS,AP7(Z47)*BS)
endif
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function CH8 takes nothing returns nothing
local integer x=1
local player p
set LP4="CH8"
loop
exitwhen x>16
if PH7(G7[x],SU[DH4])!=null then
call RemoveUnit(OZ4[GetPlayerId(GetOwningPlayer(G7[x]))])
endif
set x=x+1
endloop
endfunction
function GY9 takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and FA8(GetUnitTypeId(GetFilterUnit()))==false and PH7(GetTriggerUnit(),SU[DH4])!=null)!=null
endfunction
function GZ9 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function GA9 takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+E8)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BloodstoneHealTarget.mdx",GetEnumUnit(),"origin"))
endfunction
function GB9 takes nothing returns nothing
local group g=ZI7()
set LP4="GB9"
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$6A4,Condition(function GZ9))
set E8=400+30*GetItemCharges(PH7(GetTriggerUnit(),SU[DH4]))
call ForGroup(g,function GA9)
call ZH7(g)
set g=null
endfunction
function GC9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1211117645,GetUnitX(Z47),GetUnitY(Z47),GetUnitFacing(Z47))
set LP4="GC9"
set OZ4[GetPlayerId(GetOwningPlayer(Z47))]=DA8
call GB9()
set DA8=null
set Z47=null
endfunction
function G39 takes unit u returns nothing
local integer G69=GetItemCharges(PH7(u,SU[DH4]))
set LP4="Bloodstone_Act"
if G69>0 then
call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+G69)
endif
endfunction
function GL9 takes nothing returns boolean
local integer i=1
local unit Z47
local integer id
set LP4="GL9"
if HF4>0 then
loop
exitwhen i>5
set id=GetPlayerId(Y7[i])
set Z47=G7[id]
if RM4[id]>0 and Z47!=null and GetUnitTypeId(Z47)>1 and IsUnitType(Z47,UNIT_TYPE_DEAD)==false then
call G39(Z47)
endif
set id=GetPlayerId(Z7[i])
set Z47=G7[id]
if RM4[id]>0 and Z47!=null and GetUnitTypeId(Z47)>1 and IsUnitType(Z47,UNIT_TYPE_DEAD)==false then
call G39(Z47)
endif
set i=i+1
endloop
endif
set Z47=null
return false
endfunction
function oK takes nothing returns nothing
set gg[0]=CreateTimer()
set gg[1]=CreateTimer()
set gg[2]=CreateTimer()
set gg[3]=CreateTimer()
set gg[4]=CreateTimer()
set gg[5]=CreateTimer()
set gg[6]=CreateTimer()
set gg[7]=CreateTimer()
set gg[8]=CreateTimer()
set gg[9]=CreateTimer()
set gg[$A]=CreateTimer()
set gg[$B]=CreateTimer()
set gg[$C]=CreateTimer()
set gg[$D]=CreateTimer()
set gg[$E]=CreateTimer()
set gg[$F]=CreateTimer()
endfunction
function G19 takes unit u,real d returns boolean
if IsUnitType(u,UNIT_TYPE_HERO)or GetUnitAbilityLevel(u,1093678162)>0 then
return d>5
endif
return true
endfunction
function G09 takes unit u returns unit
local group g
set LP4="FindViableDamageSource"
if GetUnitAbilityLevel(u,1093678162)==0 then
return u
endif
set IM4=VS4
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),900,Condition(function LF7))
set VR4=FirstOfGroup(g)
call ZH7(g)
return VR4
endfunction
function G59 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DA8
local unit p5
set LP4="G59"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
else
set p5=QA7(RP7,"Source")
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call UnitAddAbility(DA8,1093684022)
set VS4=p5
if IssueTargetOrderById(DA8,$D026B,G09(GetEventDamageSource()))then
call RR7(GetTriggerUnit(),"G29",1)
endif
endif
set t=null
set DA8=null
set p5=null
endfunction
function G_9 takes nothing returns boolean
if(GetTriggerEventId()==EVENT_UNIT_DAMAGED and G19(GetEventDamageSource(),GetEventDamage())and GetRandomInt(1,100)<21 and RG7(GetTriggerUnit(),"G29")==false)or GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call G59()
endif
return false
endfunction
function G29 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="G29"
if m5==null then
set m5=p5
endif
call RR7(m5,"StaticChargeActive",20)
call TriggerRegisterTimerEvent(t,20.,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function G_9))
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",m5,"origin"))
call QG7(RP7,"Source",p5)
set t=null
set p5=null
set m5=null
endfunction
function H49 takes nothing returns nothing
if GetSpellAbilityId()==1093683788 and(R47(GetHandleId(GetSpellTargetUnit()),"StaticChargeActive")==1)==false then
call G29()
endif
endfunction
function H79 takes integer i returns boolean
return i==1227894838 or i==1227894840 or i==1227894858 or i==1227894859 or i==1227894839
endfunction
function H89 takes nothing returns boolean
if GetIssuedOrderId()==$D0003 then
if GetOrderTargetItem()!=null and H79(GetItemTypeId(GetOrderTargetItem()))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659029))
endif
endif
return false
endfunction
function H99 takes unit HD9 returns nothing
local trigger t=CreateTrigger()
set LP4="RegisterFlyingCourier"
call TriggerRegisterUnitEvent(t,HD9,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function H89))
set t=null
endfunction
function HE9 takes player p returns integer
local integer r=GetRandomInt(1,6)
set LP4="SummonCourier_GetCourier"
if WM7(p)then
if r==1 then
return 1848651849
elseif r==2 then
return 1848652338
elseif r==3 then
return 1848652337
elseif r==4 then
return 1848658777
elseif r==5 then
return 1848658778
else
return 1848659013
endif
else
if r==1 then
return 1848652339
elseif r==2 then
return 1848652340
elseif r==3 then
return 1848652341
elseif r==4 then
return 1848658992
elseif r==5 then
return 1848658993
else
return 1848659252
endif
endif
return 0
endfunction
function HF9 takes player p returns integer
if GetRandomInt(1,3)==1 then
return 1697657426
elseif WM7(p)then
return 1697657160
else
return 1697657178
endif
return 0
endfunction
function HG9 takes nothing returns nothing
local unit HH9=CreateUnit(GetOwningPlayer(GetTriggerUnit()),HE9(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local real a=GetUnitFacing(GetTriggerUnit())
set LP4="HG9"
call B88(HH9)
call SetUnitPosition(HH9,x+25*Cos(a*bj_DEGTORAD),y+25*Sin(a*bj_DEGTORAD))
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
set HH9=null
endfunction
function HI9 takes unit A08 returns nothing
local integer i=0
local integer JZ7=GetHandleId(A08)
local integer O5=R47(JZ7,"aiCrow|CurrentOwner")
set LH4=null
call DisableTrigger(H84)
loop
exitwhen i>5
set LH4=UnitItemInSlot(A08,i)
if LH4!=null then
call UnitAddItem(KT4[O5],LH4)
endif
set i=i+1
endloop
call EnableTrigger(H84)
set G97[$E0+O5]=false
call Q97(JZ7,"aiCrow|CurrentOwner",R47(JZ7,"aiCrow|TrueOwner"))
call QF7(JZ7,"aiCrow|Active",false)
call QI7(JZ7,"aiCrow|DeliverTrigger",null)
call Q97(JZ7,"aiCrow|GoHomeWpt",0)
set hq[896+O5]=Bz+$F
if(true)then
call SetUnitOwner(KT4[16+O5],Player(R47(JZ7,"aiCrow|TrueOwner")),false)
endif
endfunction
function HJ9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit CP7=(LoadUnitHandle(C7,GetHandleId(t),(2)))
local integer JZ7=GetHandleId(CP7)
local real x=0
local real y=0
local effect HK9=null
local integer i=0
local integer j=0
if A47(CP7)==false then
if(not R87(JZ7,"aiCrow|Alive"))then
call QF7(JZ7,"aiCrow|Alive",true)
endif
if WN7(GetOwningPlayer(CP7))then
set x=JX4
set y=JY4
else
set x=IW4
set y=IX4
endif
if N67(GetUnitX(CP7),GetUnitY(CP7),x,y)<825 then
if not false then
call Z27(CP7,1098282348)
endif
set HK9=Q17(JZ7,"aiCrow|EffHealHP")
if GetUnitLifePercent(CP7)<100 then
call SetWidgetLife(CP7,GetWidgetLife(CP7)+.035*GetUnitState(CP7,UNIT_STATE_MAX_LIFE))
if HK9==null then
set HK9=AddSpecialEffectTarget("Abilities\\Spells\\Other\\ANrm\\ANrmTarget.mdl",CP7,"origin")
call QH7(JZ7,"aiCrow|EffHealHP",HK9)
endif
elseif HK9!=null then
call DestroyEffect(HK9)
endif
if GetUnitState(CP7,UNIT_STATE_MAX_MANA)>0 then
set HK9=Q17(JZ7,"aiCrow|EffHealMP")
if GetUnitManaPercent(CP7)<100 then
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)+.035*GetUnitState(CP7,UNIT_STATE_MAX_MANA))
if HK9==null then
set HK9=AddSpecialEffectTarget("Abilities\\Spells\\Other\\ANrl\\ANrlTarget.mdl",CP7,"origin")
call QH7(JZ7,"aiCrow|EffHealMP",HK9)
endif
elseif HK9!=null then
call DestroyEffect(HK9)
endif
endif
if R87(JZ7,"aiCrow|Active")then
if IF4[R47(JZ7,"aiCrow|CurrentOwner")]or R87(JZ7,"aiCrow|Away")==false then
call HI9(CP7)
if WN7(GetOwningPlayer(CP7))then
call IssuePointOrderById(CP7,$D0012,x+200.,y+200.)
else
call IssuePointOrderById(CP7,$D0012,x-200.,y-200.)
endif
else
if GetUnitCurrentOrder(CP7)!=$D0012 then
call IssueNeutralImmediateOrderById(Player(R47(JZ7,"aiCrow|CurrentOwner")),CP7,1747990581)
endif
endif
endif
else
if not false then
call UnitRemoveAbility(CP7,1098282348)
endif
set HK9=Q17(JZ7,"aiCrow|EffHealHP")
if HK9!=null then
call DestroyEffect(HK9)
call QH7(JZ7,"aiCrow|EffHealHP",null)
endif
if GetUnitState(CP7,UNIT_STATE_MAX_MANA)>0 then
set HK9=Q17(JZ7,"aiCrow|EffHealMP")
if HK9!=null then
call DestroyEffect(HK9)
call QH7(JZ7,"aiCrow|EffHealMP",null)
endif
endif
if R87(JZ7,"aiCrow|Active")then
if R87(JZ7,"aiCrow|Away")then
if GetUnitCurrentOrder(CP7)!=$D0012 then
call IssueNeutralImmediateOrderById(Player(R47(JZ7,"aiCrow|CurrentOwner")),CP7,1747990581)
endif
else
set i=R47(JZ7,"aiCrow|GoHomeWpt")
if i==0 then
set j=328
set L84=99999
set L94=0
loop
exitwhen j>342
if WN7(GetOwningPlayer(CP7))then
set L94=N37(h7[i],h7[100])+N37(CP7,h7[i])
else
set L94=N37(h7[i],h7[0])+N37(CP7,h7[i])
endif
if i==0 or L94<L84 then
set i=j
set L84=L94
endif
set j=j+1
endloop
call Q97(JZ7,"aiCrow|GoHomeWpt",i)
call IssuePointOrderByIdLoc(CP7,$D0012,PU7(h7[i]))
elseif i==999 then
if GetUnitCurrentOrder(CP7)!=$D0012 then
call IssueImmediateOrderById(CP7,$D0117)
endif
else
set IM4=CP7
if N37(CP7,h7[i])<400 or(P87(1000.,IM4,Condition(function DP8))>0)then
call Q97(JZ7,"aiCrow|GoHomeWpt",999)
call IssueImmediateOrderById(CP7,$D0117)
elseif GetUnitCurrentOrder(CP7)!=$D0012 then
call IssuePointOrderByIdLoc(CP7,$D0012,PU7(h7[i]))
endif
endif
endif
endif
endif
else
if(R87(JZ7,"aiCrow|Alive"))then
call QF7(JZ7,"aiCrow|Alive",false)
endif
endif
set t=null
set CP7=null
set HK9=null
return false
endfunction
function HM9 takes integer O5,unit HH9 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer i=GetHandleId(HH9)
call Q97(i,"aiCrow|TrueOwner",O5)
call Q97(i,"aiCrow|CurrentOwner",O5)
call QF7(i,"aiCrow|Alive",true)
call QF7(i,"aiCrow|Active",false)
set LP4="aiSummonCourier_MainCrow"
call SetPlayerAbilityAvailable(Player(O5),1093810510,false)
call UnitMakeAbilityPermanent(HH9,true,1093810509)
call TriggerRegisterDeathEvent(t,HH9)
call TriggerAddCondition(t,Condition(function A_8))
if false then
call Z27(HH9,1098282348)
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function HJ9))
call SaveUnitHandle(C7,(JZ7),(2),(HH9))
set t=null
endfunction
function HN9 takes nothing returns nothing
local unit HH9=CreateUnit(GetOwningPlayer(GetTriggerUnit()),HF9(GetOwningPlayer(GetTriggerUnit())),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit()))
set LP4="HN9"
call B88(HH9)
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
call H99(HH9)
set HH9=null
endfunction
function HO9 takes nothing returns boolean
if GetSpellAbilityId()==1093681718 then
call HG9()
endif
if GetSpellAbilityId()==1093683796 then
call HN9()
endif
return false
endfunction
function HP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit HH9=QA7(RP7,"chicken")
local integer HQ9=R47(RP7,"newability")
local integer HR9=R47(RP7,"itemId0")
local integer HS9=R47(RP7,"itemId1")
local integer HT9=R47(RP7,"itemId2")
local integer HU9=R47(RP7,"itemId3")
local integer HV9=R47(RP7,"itemId4")
local integer HW9=R47(RP7,"itemId5")
local player HX9=QC7(RP7,"pPlayer0")
local player HY9=QC7(RP7,"pPlayer1")
local player HZ9=QC7(RP7,"pPlayer2")
local player HA9=QC7(RP7,"pPlayer3")
local player HB9=QC7(RP7,"pPlayer4")
local player HC9=QC7(RP7,"pPlayer5")
local integer H39=R47(RP7,"charges0")
local integer H69=R47(RP7,"charges1")
local integer HL9=R47(RP7,"charges2")
local integer H19=R47(RP7,"charges3")
local integer H09=R47(RP7,"charges4")
local integer H59=R47(RP7,"charges5")
set LP4="HP9"
call DisableTrigger(H84)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(HH9,HQ9)
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
else
if HR9>0 then
set HZ4=CreateItem(HR9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HX9,false)
call SetItemUserData(HZ4,1)
endif
if H39>0 then
call SetItemCharges(HZ4,H39)
endif
if HS9>0 then
set HZ4=CreateItem(HS9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HY9,false)
call SetItemUserData(HZ4,1)
endif
if H69>0 then
call SetItemCharges(HZ4,H69)
endif
if HT9>0 then
set HZ4=CreateItem(HT9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HZ9,false)
call SetItemUserData(HZ4,1)
endif
if HL9>0 then
call SetItemCharges(HZ4,HL9)
endif
if HU9>0 then
set HZ4=CreateItem(HU9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HA9,false)
call SetItemUserData(HZ4,1)
endif
if H19>0 then
call SetItemCharges(HZ4,H19)
endif
if HV9>0 then
set HZ4=CreateItem(HV9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HB9,false)
call SetItemUserData(HZ4,1)
endif
if H09>0 then
call SetItemCharges(HZ4,H09)
endif
if HW9>0 then
set HZ4=CreateItem(HW9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HC9,false)
call SetItemUserData(HZ4,1)
endif
if H59>0 then
call SetItemCharges(HZ4,H59)
endif
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
call Q47(RP7)
call RN7(t)
endif
call EnableTrigger(H84)
set t=null
set HH9=null
set HX9=null
set HY9=null
set HZ9=null
set HA9=null
set HB9=null
set HC9=null
return false
endfunction
function H29 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit HH9=(LoadUnitHandle(C7,(RP7),(2)))
local integer H_9=GetUnitTypeId(HH9)
local real x=GetUnitX(HH9)
local real y=GetUnitY(HH9)
local item I49
local item I79
local item I89
local item I99
local item ID9
local item IE9
local player HX9
local player HY9
local player HZ9
local player HA9
local player HB9
local player HC9
local integer HR9
local integer HS9
local integer HT9
local integer HU9
local integer HV9
local integer HW9
local integer H39=-1
local integer H69=-1
local integer HL9=-1
local integer H19=-1
local integer H09=-1
local integer H59=-1
local integer HQ9
local item TS8
set LP4="H29"
call FlushChildHashtable(C7,(RP7))
call RN7(t)
if HH9==null or A47(HH9)then
return false
endif
set t=CreateTrigger()
set RP7=GetHandleId(t)
set I49=UnitItemInSlot(HH9,0)
set I79=UnitItemInSlot(HH9,1)
set I89=UnitItemInSlot(HH9,2)
set I99=UnitItemInSlot(HH9,3)
set ID9=UnitItemInSlot(HH9,4)
set IE9=UnitItemInSlot(HH9,5)
set HR9=GetItemTypeId(I49)
set HS9=GetItemTypeId(I79)
set HT9=GetItemTypeId(I89)
set HU9=GetItemTypeId(I99)
set HV9=GetItemTypeId(ID9)
set HW9=GetItemTypeId(IE9)
set HX9=GetItemPlayer(I49)
set HY9=GetItemPlayer(I79)
set HZ9=GetItemPlayer(I89)
set HA9=GetItemPlayer(I99)
set HB9=GetItemPlayer(ID9)
set HC9=GetItemPlayer(IE9)
set TS8=I49
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H39=GetItemCharges(TS8)
endif
set TS8=I79
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H69=GetItemCharges(TS8)
endif
set TS8=I89
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set HL9=GetItemCharges(TS8)
endif
set TS8=I99
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H19=GetItemCharges(TS8)
endif
set TS8=ID9
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H09=GetItemCharges(TS8)
endif
set TS8=IE9
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H59=GetItemCharges(TS8)
endif
call OJ7(I49)
call OJ7(I79)
call OJ7(I89)
call OJ7(I99)
call OJ7(ID9)
call OJ7(IE9)
if H_9==1848651849 then
set HQ9=1395667001
elseif H_9==1848652338 then
set HQ9=1395667012
elseif H_9==1848652337 then
set HQ9=1395667011
elseif H_9==1848652339 then
set HQ9=1395667013
elseif H_9==1848652340 then
set HQ9=1395667010
elseif H_9==1848652341 then
set HQ9=1395667014
elseif H_9==1848658777 then
set HQ9=1395667031
elseif H_9==1848658778 then
set HQ9=1395667033
elseif H_9==1848658992 then
set HQ9=1395667032
elseif H_9==1848658993 then
set HQ9=1395667012
elseif H_9==1848659013 then
set HQ9=1395667270
elseif H_9==1848659252 then
set HQ9=1395667253
endif
if GetRandomInt(1,$A)==1 then
set HQ9=1395667015
endif
if GetRandomInt(1,$A)<3 then
set HQ9=1395667254
endif
if H_9==1848651853 then
set HQ9=1395667020
elseif H_9==1848659027 then
set HQ9=1395667020
elseif H_9==1848658006 then
set HQ9=1395667014
endif
if H_9==1697657160 then
set HQ9=1395667250
elseif H_9==1697657178 then
set HQ9=1395667248
elseif H_9==1697657426 then
set HQ9=1395667252
elseif H_9==1697657428 then
set HQ9=1395667249
elseif H_9==1697657427 then
set HQ9=1395667255
elseif H_9==1697657648 then
set HQ9=1395667251
endif
call QN7(RP7,"pPlayer0",HX9)
call QN7(RP7,"pPlayer1",HY9)
call QN7(RP7,"pPlayer2",HZ9)
call QN7(RP7,"pPlayer3",HA9)
call QN7(RP7,"pPlayer4",HB9)
call QN7(RP7,"pPlayer5",HC9)
call Q97(RP7,"itemId0",HR9)
call Q97(RP7,"itemId1",HS9)
call Q97(RP7,"itemId2",HT9)
call Q97(RP7,"itemId3",HU9)
call Q97(RP7,"itemId4",HV9)
call Q97(RP7,"itemId5",HW9)
call Q97(RP7,"charges0",H39)
call Q97(RP7,"charges1",H69)
call Q97(RP7,"charges2",HL9)
call Q97(RP7,"charges3",H19)
call Q97(RP7,"charges4",H09)
call Q97(RP7,"charges5",H59)
call QG7(RP7,"chicken",HH9)
call Q97(RP7,"newability",HQ9)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function HP9))
set TS8=null
set t=null
set HH9=null
set I49=null
set I79=null
set I89=null
set I99=null
set ID9=null
set IE9=null
set HX9=null
set HY9=null
set HZ9=null
set HA9=null
set HB9=null
set HC9=null
return false
endfunction
function IF9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="IF9"
call TriggerRegisterTimerEvent(t,.05,false)
call TriggerAddCondition(t,Condition(function H29))
call SaveUnitHandle(C7,(JZ7),(2),(GetTriggerUnit()))
set t=null
endfunction
function IG9 takes nothing returns boolean
if GetSpellAbilityId()==1093685076 then
call IF9()
endif
return false
endfunction
function V7 takes nothing returns boolean
local integer x=0
set LP4="V7"
loop
exitwhen x>5
if UnitItemInSlot(GetTriggerUnit(),x)==null then
return true
endif
set x=x+1
endloop
return false
endfunction
function wD takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==SU[B3]then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem(SU[C3],0,0))
endif
if GetItemTypeId(GetManipulatedItem())==SU[C3]then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem(SU[B3],0,0))
endif
endfunction
function IH9 takes nothing returns nothing
if RG7(GetEnumUnit(),"II9") then
call AV7(GetOwningPlayer(GetEnumUnit()),(GetObjectName((1848652365)))+" "+GetUnitName(GetEnumUnit())+" "+(GetObjectName((1848652371))))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call RR7(GetEnumUnit(),"II9",25)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+$FA)
endif
endfunction
function II9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=ZI7()
set LP4="II9"
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),775,Condition(function L17))
call ForGroup(g,function IH9)
call ZH7(g)
set p5=null
set g=null
endfunction
function IJ9 takes nothing returns nothing
if GetSpellAbilityId()==1093681995 then
call II9()
endif
endfunction
function IK9 takes unit Z47,integer IM9,boolean IN9 returns nothing
local string IO9
local string s
local player p=GetOwningPlayer(Z47)
local real d=2
local string IP9="Use"
set LP4="Runes_Report"
if IN9 then
set IP9="Store"
endif
if IM9==1227894838 then
set IO9="|c00ff0000"+GetObjectName(1848658513)+"|r"
call E58("Rune"+IP9+"1",GetPlayerId(p))
elseif IM9==1227894840 then
set IO9="|c0000ff00"+GetObjectName(1848658510)+"|r"
call E58("Rune"+IP9+"2",GetPlayerId(p))
elseif IM9==1227894859 then
set IO9="|c000000ff"+GetObjectName(1848658739)+"|r"
call E58("Rune"+IP9+"3",GetPlayerId(p))
elseif IM9==1227894839 then
set IO9="|c00afaf00"+GetObjectName(1848658738)+"|r"
call E58("Rune"+IP9+"4",GetPlayerId(p))
elseif IM9==1227894858 then
set IO9="|c00652DC1"+GetObjectName(1848658740)+"|r"
call E58("Rune"+IP9+"5",GetPlayerId(p))
endif
if IN9 then
set s=P[GetPlayerId(p)]+GetUnitName(Z47)+"|r "+GetObjectName(1848657749)+"|r "+IO9+" "+GetObjectName(1848657751)
set d=1
else
if NH then
set s=P[GetPlayerId(p)]+GetUnitName(Z47)+"|r "+GetObjectName(1848657750)+"|r "+IO9+" "+GetObjectName(1848657751)
else
set s=P[GetPlayerId(p)]+GetUnitName(Z47)+"|r "+GetObjectName(1848657748)+"|r "+IO9+" "+GetObjectName(1848657751)
endif
endif
if(IsPlayerAlly(GetLocalPlayer(),p)and GetLocalPlayer()!=p)or Y27(GetLocalPlayer())then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,d,s)
endif
endfunction
function IQ9 takes nothing returns boolean
if GetSpellAbilityId()==1093683254 then
call QG7(GetHandleId(GetTriggerUnit()),"BottleTargetUnit",null)
call Q97(GetHandleId(GetTriggerUnit()),"BottleTargetItemId",0)
if(PH7(GetTriggerUnit(),SU[XZ])!=null or PH7(GetTriggerUnit(),AU[XZ])!=null)and(GetUnitTypeId(GetSpellTargetUnit())==1852206952 or GetUnitTypeId(GetSpellTargetUnit())==1852073580)then
call QG7(GetHandleId(GetTriggerUnit()),"BottleTargetUnit",GetSpellTargetUnit())
elseif H79(GetItemTypeId(GetSpellTargetItem()))then
call IK9(GetTriggerUnit(),GetItemTypeId(GetSpellTargetItem()),true)
call Q97(GetHandleId(GetTriggerUnit()),"BottleTargetItemId",GetItemTypeId(GetSpellTargetItem()))
call OJ7(GetSpellTargetItem())
endif
endif
return false
endfunction
function IR9 takes unit ZO7 returns nothing
call SetUnitState(ZO7,UNIT_STATE_LIFE,GetUnitState(ZO7,UNIT_STATE_MAX_LIFE))
call SetUnitState(ZO7,UNIT_STATE_MANA,GetUnitState(ZO7,UNIT_STATE_MAX_MANA))
endfunction
function IS9 takes unit ZO7,real x,real y returns nothing
local integer JZ7=GetHandleId(GetOwningPlayer(ZO7))
local unit GY8=QA7(JZ7,"Kobold1")
local unit GZ8=QA7(JZ7,"Kobold2")
local unit GA8=QA7(JZ7,"Kobold3")
local unit GB8=QA7(JZ7,"Kobold4")
set LP4="Aegis_Revive_Kobold"
set OA4=true
if GY8!=null then
call ReviveHero(GY8,x,y,true)
call IR9(GY8)
call GN8(GY8)
call SetUnitX(GY8,x)
call SetUnitY(GY8,y)
endif
if GZ8!=null then
call ReviveHero(GZ8,x,y,true)
call IR9(GZ8)
call GN8(GZ8)
call SetUnitX(GZ8,x)
call SetUnitY(GZ8,y)
endif
if GA8!=null then
call ReviveHero(GA8,x,y,true)
call IR9(GA8)
call GN8(GA8)
call SetUnitX(GA8,x)
call SetUnitY(GA8,y)
endif
if GB8!=null then
call ReviveHero(GB8,x,y,true)
call IR9(GB8)
call GN8(GB8)
call SetUnitX(GB8,x)
call SetUnitY(GB8,y)
endif
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
endfunction
function IT9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=QA7(JZ7,"Hero")
set LP4="IT9"
call IR9(ZO7)
call GN8(ZO7)
call ClearSelectionForPlayer(GetOwningPlayer(ZO7))
call SelectUnitAddForPlayer(ZO7,GetOwningPlayer(ZO7))
if GetUnitTypeId(ZO7)==1211117641 then
call IS9(ZO7,GetUnitX(ZO7),GetUnitY(ZO7))
endif
call Q47(JZ7)
call RN7(t)
set t=null
set ZO7=null
return false
endfunction
function IU9 takes unit ZO7,real x,real y returns nothing
local integer JZ7=GetHandleId(GetOwningPlayer(ZO7))
local unit GY8=QA7(JZ7,"Kobold1")
local unit GZ8=QA7(JZ7,"Kobold2")
local unit GA8=QA7(JZ7,"Kobold3")
local unit GB8=QA7(JZ7,"Kobold4")
set LP4="Aegis_Kobold_Move"
call DisableTrigger(DS)
if GY8!=null then
call SetUnitX(GY8,x)
call SetUnitY(GY8,y)
call KillUnit(GY8)
endif
if GZ8!=null then
call SetUnitX(GZ8,x)
call SetUnitY(GZ8,y)
call KillUnit(GZ8)
endif
if GA8!=null then
call SetUnitX(GA8,x)
call SetUnitY(GA8,y)
call KillUnit(GA8)
endif
if GB8!=null then
call SetUnitX(GB8,x)
call SetUnitY(GB8,y)
call KillUnit(GB8)
endif
call EnableTrigger(DS)
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
endfunction
function IV9 takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local real x
local real y
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="IV9"
call E58("AegisOff",GetPlayerId(GetOwningPlayer(ZO7)))
if GetUnitTypeId(ZO7)==1211117641 then
call IU9(ZO7,GetUnitX(ZO7),GetUnitY(ZO7))
endif
set NV4=null
call TriggerRegisterTimerEvent(t,5.,false)
call TriggerAddCondition(t,Condition(function IT9))
call QG7(JZ7,"Hero",ZO7)
call RR7(ZO7,"JustUseAegis",5)
set t=null
set ZO7=null
endfunction
function IW9 takes nothing returns nothing
if OM7(GetManipulatedItem())==T0 then
call IV9()
endif
endfunction
function Trig_MultipleNecro_Func001002001 takes nothing returns boolean
return(GetUnitTypeId(GetEnumUnit())==1848651848)
endfunction
function IX9 takes nothing returns nothing
if GetWidgetLife(GetEnumItem())>0 and H79(GetItemTypeId(GetEnumItem()))then
set HZ4=GetEnumItem()
endif
endfunction
function IY9 takes nothing returns integer
local integer i=GetRandomInt(1,5)
loop
exitwhen i!=FH4
set i=GetRandomInt(1,5)
endloop
set FH4=i
return i
endfunction
function IZ9 takes nothing returns boolean
local boolean IA9=false
local boolean IB9=false
local real x
local real y
local real x1
local real y1
local real x2
local real y2
local integer IC9
set LP4="IZ9"
if GetRandomInt(1,2)==1 then
set x=GetLocationX(E7)
set y=GetLocationY(E7)
else
set x=GetLocationX(F7)
set y=GetLocationY(F7)
endif
set x1=GetLocationX(E7)
set y1=GetLocationY(E7)
set x2=GetLocationX(F7)
set y2=GetLocationY(F7)
set HZ4=null
call EnumItemsInRect(HD,Condition(function WE7),function IX9)
if HZ4==null then
set IA9=true
endif
set HZ4=null
call EnumItemsInRect(ED,Condition(function WE7),function IX9)
if HZ4==null then
set IB9=true
endif
if LS==false or GetTriggerEvalCount(GetTriggeringTrigger())<20 then
if IA9 and IB9 then
set IC9=IY9()
if IC9==1 then
call CreateItem(1227894839,x,y)
elseif IC9==2 then
call CreateItem(1227894838,x,y)
elseif IC9==3 then
call CreateItem(1227894859,x,y)
elseif IC9==4 then
call CreateItem(1227894840,x,y)
elseif IC9==5 then
call CreateItem(1227894858,x,y)
endif
endif
else
if IA9 then
set IC9=IY9()
if IC9==1 then
call CreateItem(1227894839,x1,y1)
elseif IC9==2 then
call CreateItem(1227894838,x1,y1)
elseif IC9==3 then
call CreateItem(1227894859,x1,y1)
elseif IC9==4 then
call CreateItem(1227894840,x1,y1)
elseif IC9==5 then
call CreateItem(1227894858,x1,y1)
endif
endif
if IB9 then
set IC9=IY9()
if IC9==1 then
call CreateItem(1227894839,x2,y2)
elseif IC9==2 then
call CreateItem(1227894838,x2,y2)
elseif IC9==3 then
call CreateItem(1227894859,x2,y2)
elseif IC9==4 then
call CreateItem(1227894840,x2,y2)
elseif IC9==5 then
call CreateItem(1227894858,x2,y2)
endif
endif
endif
return false
endfunction
function O2 takes integer Ou,real O3 returns nothing
set FI[gi]=Ou
set Fj[gi]=O3
set gi=gi+1
endfunction
function Wq takes nothing returns nothing
call O2(1752134252,30)
call O2(1870030190,$D2)
call O2(1835955060,45)
call O2(1227894834,60)
call O2(1667786099,60)
call O2(1885628790,100)
call O2(1227894833,60)
call O2(1650878578,50)
call O2(2004055908,$C)
call O2(1919248946,30)
call O2(1819177582,36)
call O2(1936749157,20)
call O2(1919906931,300)
call O2(1953265005,60)
call O2(1936093031,$F)
call O2(1835955046,28)
call O2(1937012592,65)
call O2(1935894636,70)
call O2(1919248945,28)
call O2(1803117164,20)
call O2(1919248949,40)
call O2(1667460452,26)
call O2(1835823988,32)
call O2(1684370275,30)
call O2(1227894851,25)
call O2(1227894865,45)
call O2(1227894868,30)
call O2(1868984943,85)
call O2(1227895120,$A)
call O2(1227895125,30)
call O2(1227960368,45)
call O2(1227960369,90)
endfunction
function I39 takes nothing returns boolean
local integer i
set LP4="I39"
if O34>0 and OB4[1]<1 then
set i=2
loop
exitwhen i>O34
set OB4[i-1]=OB4[i]
set OC4[i-1]=OC4[i]
set i=i+1
endloop
set O34=O34-1
endif
set i=1
loop
exitwhen i>O34
if OB4[i]>=1 then
set OB4[i]=OB4[i]-1
if OB4[i]<1 then
call SetItemDroppable(OC4[i],true)
endif
endif
set i=i+1
endloop
return false
endfunction
function I69 takes item TS8 returns nothing
set O34=O34+1
set OC4[O34]=TS8
set OB4[O34]=(CU[(OM7(TS8))])
call SetItemDroppable(TS8,false)
endfunction
function IL9 takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())!=1697656901 and(CU[(OM7(GetManipulatedItem()))])>0 then
call I69(GetManipulatedItem())
endif
return false
endfunction
function I19 takes unit MQ7 returns integer
local integer EM8
set LP4="GetScepterIndexId"
if MQ7==null then
return-2
endif
set EM8=GetUnitTypeId(MQ7)
if EM8==1211117620 then
return FV4
elseif EM8==1430466872 then
return FW4
elseif EM8==1215130471 then
return FA4
elseif EM8==1432580716 or EM8==1429221720 then
return GA4
elseif EM8==1211117640 then
return FC4
elseif EM8==1430466609 then
return F34
elseif EM8==1332898670 then
return F64
elseif EM8==1215128178 then
return F54
elseif EM8==1214931305 then
return FL4
elseif EM8==1433168227 then
return FU4
elseif EM8==1164666213 then
return FT4
elseif EM8==1164799603 then
return FR4
elseif EM8==1162032439 then
return F14
elseif EM8==1429221445 then
return FZ4
elseif EM8==1160785973 then
return FY4
elseif EM8==1160786241 then
return F04
elseif EM8==1430467634 then
return FX4
elseif EM8==1315988077 then
return GJ4
elseif EM8==1211117652 then
return F_4
elseif EM8==1215723364 then
return G44
elseif EM8==1315070563 then
return G74
elseif EM8==1211117633 then
return G94
elseif EM8==1432646245 then
return GD4
elseif EM8==1160786000 then
return GE4
elseif EM8==1429221451 then
return GG4
elseif EM8==1211117649 then
return GH4
elseif EM8==1211117653 then
return GI4
elseif EM8==1429221446 then
return GK4
elseif EM8==1311786311 then
return GM4
elseif EM8==1162032181 then
return GN4
elseif EM8==1328558154 then
return GO4
elseif EM8==1332963428 then
return GP4
elseif EM8==1432642913 then
return GQ4
elseif EM8==1311781207 then
return GR4
elseif EM8==1211117643 then
return GS4
elseif EM8==1332766568 then
return GT4
elseif EM8==1333027688 then
return GU4
elseif EM8==1211117650 then
return FB4
elseif EM8==1211119433 then
return FB4
elseif EM8==1311780930 then
return GV4
elseif EM8==1160786243 then
return GX4
elseif EM8==1160785970 then
return GY4
elseif EM8==1162032951 then
return GZ4
elseif EM8==1429221456 then
return GB4
elseif EM8==1164799855 then
return G34
elseif EM8==1211117646 then
return G64
elseif EM8==1160786510 or EM8==1160786511 then
return GL4
elseif EM8==1211117641 then
return G14
elseif EM8==1211117636 then
return G04
elseif EM8==1430468144 then
return G54
elseif GetUnitPointValue(MQ7)==500 then
return GW4
endif
return FQ4
endfunction
function I09 takes unit MQ7 returns integer
local integer EM8
set LP4="GetScepterAbilityId"
if MQ7==null then
return-2
endif
set EM8=GetUnitTypeId(MQ7)
if EM8==1211117620 then
return 1093686352
elseif EM8==1430466872 then
return 1093686354
elseif EM8==1215130471 then
return 1093815124
elseif EM8==1432580716 or EM8==1429221720 then
return 0
elseif EM8==1211117640 then
return 1093686358
elseif EM8==1430466609 then
return 1093686360
elseif EM8==1332898670 then
return 1093686362
elseif EM8==1215128178 then
return 1093686577
elseif EM8==1214931305 then
return 1093686579
elseif EM8==1433168227 then
return 1093686581
elseif EM8==1164666213 then
return 1093686583
elseif EM8==1164799603 then
return 1093686585
elseif EM8==1162032439 then
return 1093686594
elseif EM8==1429221445 then
return 1093686596
elseif EM8==1160785973 then
return 1093686598
elseif EM8==1160786241 then
return 1093686600
elseif EM8==1430467634 then
return 1093686602
elseif EM8==1315988077 then
return 1093747269
elseif EM8==1211117652 then
return 1093747257
elseif EM8==1215723364 then
return 1093747265
elseif EM8==1315070563 then
return 1093747266
elseif EM8==1211117633 then
return 1093747541
elseif EM8==1432646245 then
return 1093747271
elseif EM8==1160786000 then
return 1093747274
elseif EM8==1429221451 then
return 1093747267
elseif EM8==1211117649 then
return 1093747273
elseif EM8==1211117653 then
return 1093747268
elseif EM8==1429221446 then
return 1093747545
elseif EM8==1311786311 then
return 1093747762
elseif EM8==1162032181 then
return 1093747761
elseif EM8==1328558154 then
return 1093747546
elseif EM8==1332963428 then
return 1093747760
elseif EM8==1432642913 then
return 1093747763
elseif EM8==1311781207 then
return 1093747764
elseif EM8==1211117643 then
return 1093748529
elseif EM8==1332766568 then
return 1093750100
elseif EM8==1333027688 then
return 1093750320
elseif EM8==1311780930 then
return 1093751123
elseif EM8==1160786243 then
return 1093752148
elseif EM8==1160785970 then
return 1093752149
elseif EM8==1162032951 then
return 1093752369
elseif EM8==1429221456 then
return 1093752409
elseif EM8==1164799855 then
return 1093752644
elseif EM8==1211117646 then
return 1093808467
elseif EM8==1160786510 or EM8==1160786511 then
return 1093808951
elseif EM8==1211117641 then
return 1093809989
elseif EM8==1211117636 then
return 1093810241
elseif EM8==1430468144 then
return 1093814600
endif
return 0
endfunction
function I59 takes item M47 returns boolean
local integer i=1
set LP4="IsItemInCooldown"
loop
exitwhen i>O34
if M47==OC4[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function I29 takes unit MQ7 returns location
return N8[GetUnitAbilityLevel(MQ7,G8)]
endfunction
function I_9 takes unit MQ7 returns boolean
return(GetOwningPlayer(MQ7)==Y7[0])or(GetOwningPlayer(MQ7)==Z7[0])
endfunction
function J49 takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,I29(GetEnumUnit()))
endfunction
function J79 takes nothing returns nothing
call IssueTargetOrderById(GetEnumUnit(),$D000F,L7)
call GroupAddUnit(O8,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),SS4)
endfunction
function J89 takes nothing returns boolean
local integer id=GetUnitTypeId(GetFilterUnit())
set LP4="J89"
if id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370 then
return false
endif
if IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and(GetOwningPlayer(GetFilterUnit())==Y7[0]or GetOwningPlayer(GetFilterUnit())==Z7[0])and GetUnitUserData(GetFilterUnit())==0 then
return true
endif
return false
endfunction
function J99 takes nothing returns nothing
if GetUnitCurrentOrder(GetEnumUnit())==0 and IsUnitInRange(GetEnumUnit(),L7,GetUnitAcquireRange(GetEnumUnit()))==false then
call GroupRemoveUnit(O8,GetEnumUnit())
call SetUnitUserData(GetEnumUnit(),0)
call IssuePointOrderByIdLoc(GetEnumUnit(),$D000F,I29(GetEnumUnit()))
endif
endfunction
function JD9 takes nothing returns nothing
local integer RP7=GetHandleId(QA7(GetHandleId(GetExpiredTimer()),"Source"))
local integer JE9=R47(RP7,"Attacker")
local group JF9=QL7(RP7,"Defenders")
set LP4="JD9"
set SR4[JE9]=null
call ForGroup(JF9,function J49)
call GroupClear(JF9)
set JF9=null
endfunction
function JG9 takes unit Z47,unit VC8 returns nothing
local integer RP7=GetHandleId(Z47)
local group JF9=QL7(RP7,"Defenders")
local integer JE9=R47(RP7,"Attacker")
local unit JH9=SR4[JE9]
local group g
set LP4="HeroAI_Defend"
if JH9!=null and JH9!=VC8 then
call ForGroup(JF9,function J49)
call GroupClear(JF9)
endif
set SR4[JE9]=VC8
set O8=JF9
set L7=VC8
set SS4=JE9
call ForGroup(JF9,function J99)
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(VC8),GetUnitY(VC8),500,Condition(function J89))
call ForGroup(g,function J79)
call ZH7(g)
call TimerStart(Q37(RP7,"DefendTimer"),2,false,function JD9)
set g=null
set JH9=null
set JF9=null
endfunction
function JI9 takes integer XZ7 returns boolean
return XZ7==1162032951 or XZ7==1160785972 or XZ7==1315074670 or XZ7==1429221456 or XZ7==1164799855 or XZ7==1311781185 or XZ7==1211117649
endfunction
function JJ9 takes nothing returns boolean
local unit Z47=GetAttacker()
local unit m5=GetTriggerUnit()
local integer X5=GetIssuedOrderId()
local integer JK9
local integer i1
set LP4="JJ9"
call JW7(m5,Z47)
call JB7(Z47,m5)
if I_9(Z47)==false then
set JK9=R47(GetHandleId(m5),"Attacker")
if SR4[JK9]==null or SR4[JK9]==m5 or A47(SR4[JK9])then
if JK9!=0 then
if((GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)or(not IsUnitType(GetAttacker(),UNIT_TYPE_HERO)))then
call JG9(GetTriggerUnit(),GetAttacker())
else
set i1=GetUnitTypeId(GetAttacker())
if((i1!=1162032951)and(i1!=1160785972)and(i1!=1430468144)and(i1!=1315074670)and(i1!=1429221456)and(i1!=1164799855)and(i1!=1311781185)and(i1!=1211117649))then
call JG9(GetTriggerUnit(),GetAttacker())
else
call TriggerSleepAction(.01)
if(not GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))])then
call JG9(GetTriggerUnit(),GetAttacker())
endif
endif
endif
if(not IsUnitType(Z47,UNIT_TYPE_HERO))or(GetPlayerController(GetOwningPlayer(Z47))!=MAP_CONTROL_COMPUTER)or(not JI9(GetUnitTypeId(Z47)))or(not GZ[304+GetPlayerId(GetOwningPlayer(Z47))])then
call JG9(GetTriggerUnit(),GetAttacker())
endif
endif
endif
endif
set Z47=null
set m5=null
return false
endfunction
function JM9 takes nothing returns boolean
local unit Z47=GetTriggerUnit()
local unit m5=GetOrderTargetUnit()
local integer X5=GetIssuedOrderId()
local integer JN9
if IsUnitType(m5,UNIT_TYPE_HERO) and IsUnitIllusion(m5)==false and(X5==$D000F or X5==$D0003)and IsUnitEnemy(m5,GetOwningPlayer(Z47))and IsUnitVisible(Z47,GetOwningPlayer(m5))then
set JN9=R47(GetHandleId(m5),"Attacker")
if SR4[JN9]==null or SR4[JN9]==m5 or A47(SR4[JN9])then
if JN9!=0 then
call JG9(m5,Z47)
endif
endif
endif
set Z47=null
set m5=null
return false
endfunction
function Wy takes unit Z47 returns boolean
return R87(GetHandleId(Z47),"HeroAIManager")
endfunction
function JO9 takes unit Z47 returns nothing
local group g
local trigger t
local timer tm
local integer RP7=GetHandleId(Z47)
set LP4="EnableBasicAI"
set l2=l2+1
call QF7(RP7,"HeroAIManager",true)
call Q97(RP7,"Attacker",l2)
set g=ZI7()
call QP7(RP7,"Defenders",g)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function JM9))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JJ9))
set tm=CreateTimer()
call QQ7(GetHandleId(Z47),"DefendTimer",tm)
call QG7(GetHandleId(tm),"Source",Z47)
set g=null
set t=null
set tm=null
endfunction
function JP9 takes nothing returns nothing
local unit S4=GetTriggerUnit()
local unit m5=rw[GetUnitUserData(S4)]
set LP4="JP9"
call SetUnitPosition(S4,GetUnitX(S4),GetUnitY(S4))
if m5!=null and A47(m5)==false and IsUnitVisible(m5,GetOwningPlayer(m5))then
call IssueTargetOrderById(S4,$D000F,m5)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderByIdLoc(S4,$D000F,(N8[GetUnitAbilityLevel((S4),G8)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set S4=null
set m5=null
endfunction
function JQ9 takes nothing returns boolean
if I_9(GetTriggerUnit())then
call JP9()
endif
return false
endfunction
function JR9 takes nothing returns nothing
local unit S4=GetTriggerUnit()
local unit m5=rw[GetUnitUserData(S4)]
set LP4="JR9"
call SetUnitPosition(S4,GetUnitX(S4),GetUnitY(S4))
if m5!=null and A47(m5)==false and IsUnitVisible(m5,GetOwningPlayer(m5))then
call IssueTargetOrderById(S4,$D000F,m5)
else
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrderByIdLoc(S4,$D000F,(N8[GetUnitAbilityLevel((S4),G8)]))
call EnableTrigger(GetTriggeringTrigger())
endif
set S4=null
set m5=null
endfunction
function JS9 takes nothing returns boolean
if GetIssuedOrderId()==$D0012 then
call JR9()
endif
return false
endfunction
function JT9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
if IsUnitFogged(GetAttacker(),Y7[1])or IsUnitFogged(GetAttacker(),Z7[1])then
call C87(CreateFogModifierRadius(Y7[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),$80,true,false),1)
endif
elseif GetOwningPlayer(GetTriggerUnit())==Z7[0]then
if IsUnitFogged(GetAttacker(),Y7[1])or IsUnitFogged(GetAttacker(),Z7[1])then
call C87(CreateFogModifierRadius(Z7[1],FOG_OF_WAR_VISIBLE,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()),$80,true,false),1)
endif
endif
return false
endfunction
function JU9 takes nothing returns boolean
local trigger t
local group g
local unit u
set LP4="JU9"
set Ew=CreateRegion()
call RegionAddRect(Ew,GD)
call RegionAddRect(Ew,FD)
if R8 then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function WE7))
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Condition(function WE7))
call TriggerAddCondition(t,Condition(function JS9))
set t=CreateTrigger()
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Y7[0],Condition(function WE7))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 then
call TriggerRegisterUnitInRange(t,u,600,Condition(function WE7))
endif
endloop
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function WE7))
loop
set u=FirstOfGroup(g)
exitwhen u==null
call GroupRemoveUnit(g,u)
if GetUnitAcquireRange(u)!=0 and IsUnitType(u,UNIT_TYPE_STRUCTURE)then
call TriggerRegisterUnitInRange(t,u,600,Condition(function WE7))
endif
endloop
call ZH7(g)
call TriggerAddCondition(t,Condition(function JQ9))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JT9))
endif
call RN7(GetTriggeringTrigger())
set u=null
set g=null
set t=null
return false
endfunction
function JV9 takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit()))and(not Wy(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1211117645 and GetUnitTypeId(GetTriggerUnit())!=1311788365 and GetUnitTypeId(GetTriggerUnit())!=1211117657 and GetUnitTypeId(GetTriggerUnit())!=1211119431 and GetUnitTypeId(GetTriggerUnit())!=1211122232 and(not AL4))!=null
endfunction
function JW9 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())==Y7[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),G8,5)
if rw[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,(N8[GetUnitAbilityLevel((GetTriggerUnit()),G8)]))
endif
elseif GetOwningPlayer(GetTriggerUnit())==Z7[0]then
call SetUnitAbilityLevel(GetTriggerUnit(),G8,1)
if rw[GetUnitUserData(GetTriggerUnit())]==null then
call SetUnitUserData(GetTriggerUnit(),0)
call IssuePointOrderByIdLoc(GetTriggerUnit(),$D000F,(N8[GetUnitAbilityLevel((GetTriggerUnit()),G8)]))
endif
endif
return false
endfunction
function JX9 takes unit S4 returns nothing
local integer i=0
set LP4="N8v"
loop
exitwhen(i==16)
if IsUnitAlly(S4,Player(i))then
call UnitShareVision(S4,Player(i),true)
endif
set i=i+1
endloop
endfunction
function JY9 takes nothing returns nothing
call JX9(GetEnumUnit())
endfunction
function JZ9 takes nothing returns nothing
local integer x
local group g
set LP4="JZ9"
set x=1
loop
exitwhen x>5
call SetPlayerAlliance(Y7[0],Y7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(Z7[0],Z7[x],ConvertAllianceType(5),false)
set x=x+1
endloop
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Y7[0],Condition(function WE7))
call ForGroup(g,function JY9)
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function WE7))
call ForGroup(g,function JY9)
call ZH7(g)
set g=null
endfunction
function JA9 takes nothing returns nothing
local integer x
set LP4="JA9"
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(0),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(1),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(2),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(3),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(4),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(5),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(6),false)
call SetPlayerAlliance(Y7[x],A7,ConvertAllianceType(7),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(0),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(1),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(2),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(3),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(4),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(5),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(6),false)
call SetPlayerAlliance(Z7[x],A7,ConvertAllianceType(7),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(A7,Y7[x],ConvertAllianceType(7),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(1),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(2),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(3),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(4),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(5),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(6),false)
call SetPlayerAlliance(A7,Z7[x],ConvertAllianceType(7),false)
set x=x+1
endloop
endfunction
function JB9 takes nothing returns boolean
return I_9(GetTriggerUnit())
endfunction
function JC9 takes nothing returns nothing
call JX9(GetTriggerUnit())
endfunction
function J39 takes nothing returns nothing
local trigger t
set LP4="J39"
if not R8 then
return
endif
call JZ9()
call JA9()
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function JB9))
call TriggerAddAction(t,function JC9)
set t=null
endfunction
function J69 takes nothing returns nothing
call RemoveUnit(QA7(GetHandleId(GetTriggerUnit()),"Locust"))
endfunction
function JL9 takes nothing returns nothing
local group g
local unit S4
local unit J19
local trigger t
local integer i
set LP4="JL9"
set t=CreateTrigger()
call TriggerAddAction(t,function J69)
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Y7[0],Condition(function WE7))
loop
set S4=FirstOfGroup(g)
exitwhen S4==null
call GroupRemoveUnit(g,S4)
if GetUnitAbilityLevel(S4,1097102451)>0 or GetUnitAbilityLevel(S4,1098150517)>0 then
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
set J19=CreateUnit(Y7[1],(1966092354),-5000,-5100,0)
call SetUnitScale(J19,0,0,0)
call SetUnitPathing(J19,false)
call SetUnitInvulnerable(J19,true)
call SetUnitX(J19,GetUnitX(S4))
call SetUnitY(J19,GetUnitY(S4))
call QG7(GetHandleId(S4),"Locust",J19)
endif
endloop
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,Z7[0],Condition(function WE7))
loop
set S4=FirstOfGroup(g)
exitwhen S4==null
call GroupRemoveUnit(g,S4)
if GetUnitAbilityLevel(S4,1097102451)>0 or GetUnitAbilityLevel(S4,1098150517)>0 then
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
set J19=CreateUnit(Z7[1],(1966092354),$D48,4400,0)
call SetUnitScale(J19,0,0,0)
call SetUnitPathing(J19,false)
call SetUnitInvulnerable(J19,true)
call SetUnitX(J19,GetUnitX(S4))
call SetUnitY(J19,GetUnitY(S4))
call QG7(GetHandleId(S4),"Locust",J19)
endif
endloop
call ZH7(g)
set t=null
set J19=null
set S4=null
set g=null
endfunction
function J09 takes nothing returns nothing
if R8 then
set NJ4=CreateTrigger()
call TriggerRegisterTimerEvent(NJ4,1.,true)
call TriggerAddAction(NJ4,function XM8)
endif
endfunction
function J59 takes nothing returns boolean
call RN7(GetTriggeringTrigger())
call TriggerEvaluate(KS)
return false
endfunction
function J29 takes nothing returns boolean
local real r=TimerGetRemaining(Q74)
local real A58=r
local integer D5=R2I(A58)
local integer BN8=D5/ 60-1/ 2
local integer BO8=ModuloInteger(D5,60)
local trigger t
if r==0 then
set X64=true
call E58("GameStart",1)
call BM8(BN8,BO8,true)
set N04=true
set M24=TimerGetElapsed(V)
call RN7(GetTriggeringTrigger())
set IV4=Rect(-7040,-7680,7040,7168)
call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.)
call SuspendTimeOfDay(false)
call SetTimeOfDayScale(.625)
if Y4==false then
if LS then
call TriggerRegisterTimerEvent(H14,120.,true)
else
call TriggerRegisterTimerEvent(H14,120.,true)
endif
call TriggerEvaluate(H14)
endif
call TriggerRegisterTimerEvent(KS,60.,true)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30.,false)
call TriggerAddCondition(t,Condition(function J59))
set t=null
call TriggerRegisterTimerEventPeriodic(HS,30.)
call TriggerExecute(HS)
call TriggerRegisterTimerEventPeriodic(JS,450.)
call TriggerRegisterTimerEventSingle(FS,2699.)
call TriggerRegisterTimerEventSingle(GS,999.)
call TriggerRegisterTimerEventSingle(GS,1999.)
call TriggerRegisterTimerEventSingle(GS,2999.)
call TriggerRegisterTimerEvent(NY4,300.,true)
call TriggerRegisterTimerEvent(OG4,300.,true)
call TriggerRegisterTimerEvent(T9,30.,true)
call TriggerEvaluate(T9)
if A4 then
call TriggerRegisterTimerEvent(MS,600.,true)
endif
elseif r==7 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30.,true)
call TriggerAddCondition(t,Condition(function E59))
elseif A58<$C and QD4==false then
set QD4=true
call PlaySoundBJ(YO)
call BM8(BN8,BO8,true)
elseif A58==20 then
if GetRandomInt(0,$A)<6 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,6,"|c006699CC"+GetObjectName(1848659015)+"|r")
endif
elseif A58==30 then
else
call BM8(BN8,BO8,true)
endif
return false
endfunction
function J_9 takes nothing returns nothing
local trigger t
set LP4="J_9"
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function J29))
set Q74=CreateTimer()
call TimerStart(Q74,Q94+1,false,null)
set t=null
set M_4=TimerGetElapsed(V)+1
endfunction
function K49 takes nothing returns boolean
if GetOwningPlayer(GetTriggerUnit())!=Y7[0]and GetOwningPlayer(GetTriggerUnit())!=Z7[0]then
set OT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=OT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
if GetIssuedOrderId()!=851983then
set nb[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=(TimerGetElapsed(V))
set PT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
endif
if(GetIssuedOrderId()==851983or GetIssuedOrderId()==$D0003)and GetOrderTargetItem()!=null then
if GetIssuedOrderId()==851983or(GetIssuedOrderId()==$D0003 and R87(GetHandleId(GetItemPlayer(GetOrderTargetItem())),"DisableHelp"))then
if GetItemPlayer(GetOrderTargetItem())!=GetOwningPlayer(GetTriggerUnit())and IsPointInRegion(Ew,GetItemX(GetOrderTargetItem()),GetItemY(GetOrderTargetItem())) then
call DisableTrigger(GetTriggeringTrigger())
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848657719))))
call EnableTrigger(GetTriggeringTrigger())
endif
endif
endif
endif
return false
endfunction
function K79 takes nothing returns nothing
local string K89=StringCase(GetEventPlayerChatString(),false)
local boolean K99=K89=="-random" or K89=="-random int" or K89=="-random agi" or K89=="-random str"
local boolean KD9=K89=="-repick"
local boolean KE9=K89=="-gameinfo"
local boolean KF9=SubString(K89,0,5)=="-swap"
local boolean KG9=K89=="-recreate"
local boolean KH9=K89=="-unstuck"
local boolean KI9=K89=="-matchup" or K89=="-ma"
local boolean KJ9=K89=="-movespeed" or K89=="-ms"
local boolean KK9=K89=="-msa"
local boolean KM9=K89=="-disablehelp"
local boolean KN9=K89=="-enablehelp"
local boolean KO9=K89=="-creepstats" or K89=="-cs"
local boolean KP9=K89=="-cson" or K89=="-csoff"
local boolean KQ9=K89=="-hidemsg"
local boolean KR9=K89=="-showmsg"
local boolean KS9=K89=="-weather snow" or K89=="-weather rain" or K89=="-weather off" or K89=="-weather random" or K89=="-weather wind" or K89=="-weather moonlight"
local boolean KT9=K89=="-showdeny" or K89=="-hidedeny"
local boolean KU9=K89=="-denyinfo" or K89=="-di"
local boolean KV9=K89=="-don" or K89=="-deathon" or K89=="-doff" or K89=="-deathoff"
local boolean KW9=SubString(K89,0,5)=="-roll" and K89!="-rollhero"
local boolean KX9=K89=="-hhn" or K89=="-hideheronames"
local boolean KY9=K89=="-mute"
local boolean KZ9=K89=="-apm"
local boolean KA9=K89=="-clear"
local boolean KB9=K89=="-courier"
local boolean KC9=K89=="-invokelist" or K89=="-il"
local boolean bListCommand=K89=="-list"
local boolean K39=K89=="-rolloff"
local boolean K69=K89=="-rollon"
local boolean KL9=SubString(K89,0,6)=="-music"
local boolean K19=SubString(K89,0,6)=="-water"
local boolean K09=SubString(K89,0,6)=="-quote"
local boolean K59=SubString(K89,0,3)=="-cm"
local boolean K29=SubString(K89,0,9)=="-itemswap"
local boolean K_9=K89=="-bonus"
local boolean M49=K89=="-rollhero" or K89=="-rh"
local boolean M79=SubString(K89,0,9)=="-rickroll"
local boolean NoSwitch=K89=="-noswitch"
local boolean Switch=SubString(K89,0,7)=="-switch"or K89=="-ok"or K89=="-no"
local boolean Terrain=K89=="-terrain" or K89=="-terrain default" or K89=="-terrain snow"
local boolean M89=K89=="-tips"
local boolean M99=K89=="-ii" or K89=="-iteminfo"
local boolean MD9=K89=="-center" or K89=="-centeroff" or K89=="-c" or K89=="-co"
local boolean Unlock=K89=="-unlock"
local boolean ME9=K89=="-disableselection"or K89=="-ds"
local boolean MF9=K89=="-enableselection"or K89=="-es"
local boolean MG9=K89=="-sleep"
local boolean MH9=K89=="-calm"
local boolean B48=K89=="-st"
local boolean NoHat=K89=="-nosanta"
local boolean MI9=SubString(K89,0,$A)=="-aiunstuck"
local boolean MJ9=StringLength(K89)>3 and SubString(K89,0,3)=="-cs"
local boolean MK9=StringLength(K89)>3 and SubString(K89,0,3)=="-ms"
local boolean MM9=K89=="-aid"
local boolean MN9=K89=="-override"
local boolean MO9=K89=="-formless"
local boolean MP9=K89=="-bastion"
local boolean MQ9=K89=="-aimsg"
local boolean MR9=K89=="-aimsgmiss"
local boolean MS9=(K89=="-aiboard")
local boolean MT9=K89=="-aiglyph"
local boolean MU9=((K89=="-aishowde")or(K89=="-aishowdg")or(K89=="-aishowdedg")or(K89=="-aishowdynamic"))
set LP4="K79"
call AX7("MV9",K99)
call AX7("MW9",KD9)
call AX7("MX9",KE9)
call AX7("MY9",KF9)
call AX7("MZ9",KG9)
call AX7("MA9",KH9)
call AX7("MB9",KI9)
call AX7("MC9",KJ9)
call AX7("M39",KK9)
call AX7("M69",KM9)
call AX7("ML9",KN9)
call AX7("M19",KO9)
call AX7("M09",KP9)
call AX7("M59",KQ9)
call AX7("M29",KR9)
call AX7("M_9",KS9)
call AX7("N49",KT9)
call AX7("N79",KU9)
call AX7("N89",KV9)
call AX7("N99",KW9)
call AX7("ND9",KX9)
call AX7("NE9",KY9)
call AX7("NF9",KZ9)
call AX7("NG9",KA9)
call AX7("NH9",KB9)
call AX7("NI9",KC9)
call AX7("NJ9",K39)
call AX7("NK9",K69)
call AX7("NM9",KL9)
call AX7("NN9",K19)
call AX7("NO9",K09)
call AX7("NP9",K59)
call AX7("NQ9",K29)
call AX7("NR9",K_9)
call AX7("NS9",M49)
call AX7("NT9",M79)
call AX7("NU9",M99)
call AX7("NV9",M89)
call AX7("NW9",MD9)
call AX7("NX9",ME9)
call AX7("NY9",MF9)
call AX7("NZ9",MG9)
call AX7("NA9",B48)
call AX7("NB9",MH9)
call AX7("NC9",MJ9)
call AX7("N39",MK9)
call AX7("N69",MM9)
call AX7("NL9",MI9)
call AX7("N19",MN9)
call AX7("N09",MO9)
call AX7("N59",MP9)
call AX7("N29",MQ9)
call AX7("N_9",MR9)
call AX7("O49",MS9)
call AX7("O79",MT9)
call AX7("O89",MU9)
endfunction
function N29 takes nothing returns nothing
local integer O5=GetPlayerId(GetTriggerPlayer())
set B04[O5]=(not B04[O5])
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332599)+M27(B04[O5],GetObjectName(1496403790),GetObjectName(1498369862)))
endfunction
function N_9 takes nothing returns nothing
local integer O5=GetPlayerId(GetTriggerPlayer())
set B04[16+O5]=(not B04[16+O5])
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332598)+M27(B04[16+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if(B04[16+O5])and(not B04[O5])then
call N29()
endif
endfunction
function O99 takes player p returns nothing
local integer O5=GetPlayerId(p)
if p==QS4 then
set LA4=not LA4
call DisplayTimedTextToForce(W7,10.,GetObjectName(1496332597)+M27(LA4,GetObjectName(1496403790),GetObjectName(1498369862)))
if not LA4 then
call DisplayTimedTextToForce(W7,10.,GetObjectName(1496332080))
endif
call DisplayTimedTextToForce(W7,10.," ")
elseif p==QT4 then
set LB4=not LB4
call DisplayTimedTextToForce(X7,10.,GetObjectName(1496332597)+M27(LB4,GetObjectName(1496403790),GetObjectName(1498369862)))
if not LB4 then
call DisplayTimedTextToForce(X7,10.,GetObjectName(1496332080))
endif
call DisplayTimedTextToForce(X7,10.," ")
endif
set p=null
endfunction
function O79 takes nothing returns nothing
call O99(GetTriggerPlayer())
endfunction
function NT9 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),$A,StringLength(GetEventPlayerChatString())))
local integer D5=GetPlayerId(GetTriggerPlayer())
set LP4="NT9"
set Rw[D5]=Rw[D5]+1
if Rw[D5]>$A then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848656977))))
return
endif
if a<1 or a>8 then
set a=GetRandomInt(1,8)
endif
if a==1 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna give you up")
elseif a==2 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna let you down")
elseif a==3 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna run around")
elseif a==4 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna desert you")
elseif a==5 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna make you cry")
elseif a==6 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna say goodbye")
elseif a==7 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna tell a lie")
elseif a==8 then
call YM7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r's never gonna hurt you")
endif
endfunction
function OD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
set t=null
return false
endfunction
function NZ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=G7[GetPlayerId(GetTriggerPlayer())]
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Sleep\\SleepTarget.mdl",CP7,"overhead")))
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function OD9))
call SetUnitAnimation(CP7,"sleep")
set t=null
set CP7=null
endfunction
function NB9 takes nothing returns nothing
call SetUnitAnimationByIndex(G7[GetPlayerId(GetTriggerPlayer())],23)
endfunction
function Command_NoHat takes nothing returns nothing
endfunction
function NV9 takes nothing returns nothing
if QT[GetPlayerId(GetTriggerPlayer())]==false then
set QT[GetPlayerId(GetTriggerPlayer())]=true
if(GetObjectName((1848657992)))=="Language: English" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"You have activated the -tips system.")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"Please remember that these are just introductory recommendations and are not the only way to play heroes.")
endif
if G7[GetPlayerId(GetTriggerPlayer())]!=null then
call EF8(GetTriggerPlayer(),GetUnitPointValue(G7[GetPlayerId(GetTriggerPlayer())]))
endif
endif
endfunction
function OE9 takes nothing returns boolean
if E9==false then
return false
endif
if V4[GetPlayerId(lx)] then
return false
endif
if O==false then
return false
endif
if G7[GetPlayerId(lx)]!=null and G9==false then
return false
endif
if I[GetPlayerId(lx)] then
return false
endif
if O9[GetPlayerId(lx)]and G9==false then
return false
endif
if G9 and eo[GetPlayerId(lx)]then
return false
endif
if(lx==QS4 and QU4!=null)or(lx==QT4 and QV4!=null)then
call DisplayTimedTextToPlayer(lx,0,D9,$A,"Cannot random when manual picking.")
return false
endif
return true
endfunction
function OF9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local string OG9=R97(RP7,"string")
set LP4="OF9"
set lx=p
if OE9()then
set V4[GetPlayerId(p)]=true
if OG9=="-random int" then
call X27(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif OG9=="-random str" then
call Y87(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
elseif OG9=="-random agi" then
call Y97(p)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-100)
else
call YD7(p)
endif
else
call DisplayTimedTextToPlayer(p,0,D9,$A,(GetObjectName((1848653625))))
endif
set t=null
set p=null
return false
endfunction
function MV9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local trigger t
set LP4="MV9"
set lx=j8
if OE9()and oo[GetPlayerId(j8)]==false then
set oo[GetPlayerId(j8)]=true
call XI7(j8)
call DisplayTimedTextToPlayer(j8,0,D9,$A,(GetObjectName((1848653633))))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function OF9))
call QN7(GetHandleId(t),"p",j8)
call QE7(GetHandleId(t),"string",StringCase(GetEventPlayerChatString(),false))
endif
set t=null
endfunction
function OH9 takes nothing returns boolean
local unit Z47=G7[GetPlayerId(GetTriggerPlayer())]
set LP4="OH9"
if PI4 then
call AV7(GetTriggerPlayer(),(GetObjectName((1848652592))))
return false
endif
if F9==false then
if UT==false and Z8==false and O14==false and O04==false and P44==false and P74==false and G9==false and V8==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,"-repick "+(GetObjectName((1848653122))))
endif
return false
endif
if(I[GetPlayerId(GetTriggerPlayer())])then
return false
endif
if(G7[GetPlayerId(GetTriggerPlayer())]==null)then
return false
endif
if L or Z8 or G9 or RY4 then
return false
endif
if(S9)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653104))))
return false
endif
if(GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<W4)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653113))))
return false
endif
if GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)<350 and O4 or X8 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653141))))
return false
endif
if GetUnitState(Z47,UNIT_STATE_MANA)!=GetUnitState(Z47,UNIT_STATE_MAX_MANA)or GetUnitState(Z47,UNIT_STATE_LIFE)!=GetUnitState(Z47,UNIT_STATE_MAX_LIFE)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653130))))
return false
endif
return true
endfunction
function OI9 takes nothing returns nothing
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))then
if(GetUnitTypeId(GetEnumUnit())==1429221430)then
call ExecuteFunc("ZI8")
elseif GetUnitTypeId(GetEnumUnit())==1429221432 or GetUnitTypeId(GetEnumUnit())==1160786229 then
set IS4=GetEnumUnit()
call ExecuteFunc("AD8")
endif
call YM7(M4(GetTriggerPlayer()),10.,(GetObjectName((1848653132)))+" "+Y37(GetEnumUnit())+".")
endif
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652088)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652099)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1848652103)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function OJ9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local group FP8=ZI7()
local integer X_7
local integer Y47
local location Y77
local integer XS7
local integer T8
local integer U8
local unit OK9
local location FU8=GetRectCenter(pr)
local location FV8=GetRectCenter(qr)
set LP4="OJ9"
set bj_groupEnumOwningPlayer=j8
call GroupEnumUnitsInRect(FP8,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
if(WM7(j8))then
set X_7=K64
set Y47=KL4
set Y77=GetRectCenter(GD)
else
set X_7=K14
set Y47=K04
set Y77=GetRectCenter(FD)
endif
if D4 then
if(GetRandomInt(1,2)==1)then
set X_7=K64
set Y47=KL4
else
set X_7=K14
set Y47=K04
endif
endif
if O4 or X8 then
set W4=100
endif
set OK9=QA7(GetHandleId(GetTriggerPlayer()),"ChargeUnit")
if OK9!=null and GetUnitTypeId(OK9)==1697656899 then
call RemoveUnit(OK9)
set OK9=null
endif
call AdjustPlayerStateBJ(-1*W4,j8,PLAYER_STATE_RESOURCE_GOLD)
set I[GetPlayerId(j8)]=true
call ForGroup(FP8,function OI9)
call A57(G7[GetPlayerId(j8)])
set G7[GetPlayerId(GetTriggerPlayer())]=null
if O4 or X8 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,(GetObjectName((1311782233))))
if O4 then
set T8=K64
set U8=K04
endif
if WM7(j8)then
if X8 then
set T8=K64
set U8=KL4
call CreateUnitAtLoc(j8,1848651843,FU8,bj_UNIT_FACING)
else
call CreateUnitAtLoc(j8,1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(j8,1848651843,FV8,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(j8,FU8,0)
else
if X8 then
set T8=K14
set U8=K04
call CreateUnitAtLoc(j8,1848651843,FV8,bj_UNIT_FACING)
else
call CreateUnitAtLoc(j8,1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(j8,1848651843,FV8,bj_UNIT_FACING)
endif
call PanCameraToTimedLocForPlayer(j8,FV8,0)
endif
loop
exitwhen T8>U8
if G[T8]==false then
call SetPlayerTechMaxAllowed(j8,KC4[T8],1)
endif
set T8=T8+1
endloop
call ZH7(FP8)
set FP8=null
call RemoveLocation(Y77)
set Y77=null
call RemoveLocation(FU8)
set FU8=null
call RemoveLocation(FV8)
set FV8=null
return
endif
loop
set XS7=GetRandomInt(X_7,Y47)
if(G[XS7]==false)then
set G[XS7]=true
set G7[GetPlayerId(j8)]=CreateUnitAtLoc(j8,KC4[XS7],Y77,bj_UNIT_FACING)
call XH7(KC4[XS7])
endif
exitwhen G7[GetPlayerId(GetTriggerPlayer())]!=null
endloop
call ZH7(FP8)
set FP8=null
call RemoveLocation(Y77)
set Y77=null
call RemoveLocation(FU8)
set FU8=null
call RemoveLocation(FV8)
set FV8=null
endfunction
function MW9 takes nothing returns nothing
if OH9()then
call OJ9()
endif
endfunction
function MX9 takes nothing returns nothing
local player j8=GetTriggerPlayer()
local string OM9="|c006699CC"
set LP4="MX9"
if P44 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"League Mode"+"|r:      "+(GetObjectName((1848653621))))
endif
if P74 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Extended League"+"|r:      "+(GetObjectName((1848653634))))
call DisplayTimedTextToPlayer(j8,0,D9,20,"                                 "+(GetObjectName((1848653616))))
endif
if L then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Death Match"+"|r:        "+(GetObjectName((1848653402))))
call DisplayTimedTextToPlayer(j8,0,D9,20,"                              "+(GetObjectName((1848653401)))+" "+I2S(A_7(KL4,K04-K14+1))+" "+(GetObjectName((1848653635))))
endif
if V8 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Mirror Match"+"|r:       "+(GetObjectName((1848653399))))
endif
if O4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"All Pick"+"|r:                 "+(GetObjectName((1848653398))))
endif
if O14 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Random Draft"+"|r:                 "+(GetObjectName((1848653618))))
endif
if UT then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Single Draft"+"|r:                 "+(GetObjectName((1848653639))))
endif
if D4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"All Random"+"|r:          "+(GetObjectName((1848653617))))
endif
if Z8 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Vote Random"+"|r:         "+(GetObjectName((1848653620))))
endif
if E4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Team Random"+"|r:     "+(GetObjectName((1848653389))))
endif
if G9 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Reverse"+"|r:                 "+(GetObjectName((1848653619))))
endif
if ge then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Shuffle Players"+"|r:     "+(GetObjectName((1848653640))))
endif
if Rx then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"All Agility"+"|r:             "+(GetObjectName((1848653644))))
endif
if bx then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"All Strength"+"|r:         "+(GetObjectName((1848653643))))
endif
if Nx then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"All Intelligence"+"|r:    "+(GetObjectName((1848653642))))
endif
if Jj then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Range Only"+"|r:    "+(GetObjectName((1848657716))))
endif
if lj then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Melee Only"+"|r:    "+(GetObjectName((1848657717))))
endif
if W8 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Duplicate Mode"+"|r:   "+(GetObjectName((1848653641))))
endif
if P4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Item Drop"+"|r:             "+(GetObjectName((1848653638))))
endif
if Y4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Powerups"+"|r:        "+(GetObjectName((1848653645))))
endif
if A4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Super Creeps"+"|r:        "+(GetObjectName((1848653646))))
call DisplayTimedTextToPlayer(j8,0,D9,20,"                             "+(GetObjectName((1848653647))))
endif
if X4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Easy Mode"+"|r:           "+(GetObjectName((1848653652))))
endif
if HC4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Same Hero"+"|r:           "+(GetObjectName((1848653653)))+" "+(KY4[GetPlayerId((Le))])+"|r"+" "+(GetObjectName((1848653655))))
endif
if PD4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Only Mid"+"|r:           "+(GetObjectName((1848653872))))
endif
if PE4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Bot"+"|r:           "+(GetObjectName((1848653654))))
endif
if PF4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Mid"+"|r:           "+(GetObjectName((1848653651))))
endif
if PG4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Top"+"|r:           "+(GetObjectName((1848653650))))
endif
if PH4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Swap"+"|r:           "+(GetObjectName((1848653656))))
endif
if PI4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"No Repick"+"|r:           "+(GetObjectName((1848653649))))
endif
if PJ4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Pool Mode"+"|r:           "+(GetObjectName((1848653657))))
endif
if PK4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Observer Info"+"|r:           "+(GetObjectName((1848653658))))
endif
if bN then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Mini Heroes"+"|r:           "+(GetObjectName((1848657219))))
endif
if CS then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Fast Respawn"+"|r:           "+(GetObjectName((1848656976))))
endif
if SM4 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Captains Mode"+"|r:           "+(GetObjectName((1848657220))))
endif
if LS then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Experimental Runes"+"|r:           "+(GetObjectName((1848657718))))
endif
if O04 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Captains Draft"+"|r:           "+(GetObjectName((1848657734))))
endif
if X8 then
call DisplayTimedTextToPlayer(j8,0,D9,20,OM9+"Normal Mode"+"|r:        "+(GetObjectName((1848653648))))
endif
if XT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Super Tower|r:         Towers regenerates HP")
endif
if ZT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Modified Super Creeps|r:  An improved version of Super Creeps")
endif
if AT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"High Exp AI|r:            The AI has increased experience gain.")
endif
if CT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Normal Exp AI|r:       The AI receives the default amount of experience.")
endif
if LT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Dynamic Exp AI|r:       AI gets bonus exp rate on death or on a period without death/kill/assist. Bonus exp is reduced on kill/assist.")
endif
if BT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"High Gold AI|r:           The AI has increased gold gain.")
endif
if VT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Normal Gold AI|r:      The AI receives the default amount of gold.")
endif
if EU then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Dynamic Gold AI|r:       AI gets bonus gold rate on death or on a period without death/kill/assist. Bonus gold rate reduced on kill/assist.")
endif
if T34 then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"Cool Names|r:          The AI receives a random cool name.")
endif
if T64 then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"All Dagon|r:          The AI receives random level Dagon at random times.")
endif
if WT then
call DisplayTimedTextToPlayer(j8,0,D9,20,"|c00dd8dff"+"No Necronomicon|r:    The AI will not build Necronomicon.")
endif
endfunction
function P5 takes nothing returns nothing
if((GetUnitTypeId(GetEnumUnit())==1848651828)or(GetUnitTypeId(GetEnumUnit())==1865429043))then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function ON9 takes unit u1,unit u2 returns nothing
local player OO9=GetOwningPlayer(u1)
local player OP9=GetOwningPlayer(u2)
local unit OQ9=CreateUnit(OO9,1697657158,0,0,0)
local group g
local item OR9
local integer OS9
set LP4="B0v"
set OS9=VF4[GetPlayerId(OO9)]
set VF4[GetPlayerId(OO9)]=VF4[GetPlayerId(OP9)]
set VF4[GetPlayerId(OP9)]=OS9
call DisableTrigger(H84)
if GetUnitAbilityLevel(u1,1093677893)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("OT9")
elseif GetUnitAbilityLevel(u2,1093677893)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("OT9")
endif
if GetUnitAbilityLevel(u1,1093682009)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("OU9")
elseif GetUnitAbilityLevel(u2,1093682009)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("OU9")
endif
if GetUnitAbilityLevel(u1,1093743444)>0 then
set B2=u1
set C2=u2
call ExecuteFunc("OV9")
elseif GetUnitAbilityLevel(u2,1093743444)>0 then
set B2=u2
set C2=u1
call ExecuteFunc("OV9")
endif
call Q47(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u1)))))
call Q47(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u2)))))
set g=ZI7()
set bj_groupEnumOwningPlayer=OO9
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function P5)
call ZH7(g)
set g=ZI7()
set bj_groupEnumOwningPlayer=OP9
call GroupEnumUnitsInRect(g,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(g,function P5)
call ZH7(g)
call SetUnitOwner(u2,OO9,true)
call SetUnitOwner(u1,OP9,true)
set G7[GetPlayerId(OO9)]=u2
set G7[GetPlayerId(OP9)]=u1
if WQ7(OO9)then
call SetPlayerName(OO9,YJ7(OO9))
else
call SetPlayerName(OO9,YJ7(OO9)+" ("+Y37(G7[GetPlayerId(OO9)])+")")
endif
if WQ7(OP9)then
call SetPlayerName(OP9,YJ7(OP9))
else
call SetPlayerName(OP9,YJ7(OP9)+" ("+Y37(G7[GetPlayerId(OP9)])+")")
endif
call UnitAddItem(OQ9,UnitItemInSlot(u2,0))
call UnitAddItem(OQ9,UnitItemInSlot(u2,1))
call UnitAddItem(OQ9,UnitItemInSlot(u2,2))
call UnitAddItem(OQ9,UnitItemInSlot(u2,3))
call UnitAddItem(OQ9,UnitItemInSlot(u2,4))
call UnitAddItem(OQ9,UnitItemInSlot(u2,5))
set OR9=UnitItemInSlot(u1,0)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(u1,1)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(u1,2)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(u1,3)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(u1,4)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(u1,5)
if OR9!=null then
call SetItemPlayer(OR9,OO9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u2,OR9)
endif
set OR9=UnitItemInSlot(OQ9,0)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
set OR9=UnitItemInSlot(OQ9,1)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
set OR9=UnitItemInSlot(OQ9,2)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
set OR9=UnitItemInSlot(OQ9,3)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
set OR9=UnitItemInSlot(OQ9,4)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
set OR9=UnitItemInSlot(OQ9,5)
if OR9!=null then
call SetItemPlayer(OR9,OP9,false)
call SetItemUserData(OR9,1)
call UnitAddItem(u1,OR9)
endif
call RemoveUnit(OQ9)
call EnableTrigger(H84)
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER) or GetUnitTypeId(u1)==1211119187)and PH7(u1,SU[BA])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[BA]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER) or GetUnitTypeId(u1)==1211119187)and PH7(u1,SU[ZA])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[ZA]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER) or GetUnitTypeId(u1)==1211119187)and PH7(u2,SU[BA])!=null then
call UnitRemoveItem(u1,PH7(u2,SU[BA]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER) or GetUnitTypeId(u1)==1211119187)and PH7(u2,SU[ZA])!=null then
call UnitRemoveItem(u1,PH7(u2,SU[ZA]))
endif
if GetUnitTypeId(u1)==1211119187 and PH7(u1,SU[ZA])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[ZA]))
elseif GetUnitTypeId(u1)==1211119187 and PH7(u1,SU[BA])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[BA]))
endif
if GetUnitTypeId(u2)==1211119187 and PH7(u2,SU[ZA])!=null then
call UnitRemoveItem(u2,PH7(u2,SU[ZA]))
elseif GetUnitTypeId(u2)==1211119187 and PH7(u2,SU[BA])!=null then
call UnitRemoveItem(u2,PH7(u2,SU[BA]))
endif
if(IsUnitType(u1,UNIT_TYPE_MELEE_ATTACKER))and PH7(u1,SU[DW4])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[DW4]))
elseif(IsUnitType(u1,UNIT_TYPE_RANGED_ATTACKER))and PH7(u1,SU[DV4])!=null then
call UnitRemoveItem(u1,PH7(u1,SU[DV4]))
endif
if(IsUnitType(u2,UNIT_TYPE_MELEE_ATTACKER))and PH7(u2,SU[DW4])!=null then
call UnitRemoveItem(u1,PH7(u2,SU[DW4]))
elseif(IsUnitType(u2,UNIT_TYPE_RANGED_ATTACKER))and PH7(u2,SU[DV4])!=null then
call UnitRemoveItem(u1,PH7(u2,SU[DV4]))
endif
call ClearSelectionForPlayer(OO9)
call SelectUnitAddForPlayer(u2,OO9)
call ClearSelectionForPlayer(OP9)
call SelectUnitAddForPlayer(u1,OP9)
call Q47(StringHash("SwapHero|"+I2S(GetPlayerId(OO9))))
call Q47(StringHash("SwapHero|"+I2S(GetPlayerId(OP9))))
set IM4=u1
call ExecuteFunc("TT8")
set IM4=u2
call ExecuteFunc("TT8")
call ES8(OO9)
call ES8(OP9)
if(GetPlayerController(OP9)==MAP_CONTROL_COMPUTER)then
call QG7(Q_4,"AIHSwap|U",u1)
call ExecuteFunc("Uf")
endif
set OO9=null
set OP9=null
set g=null
set OQ9=null
set OR9=null
endfunction
function yM takes unit u1,unit u2 returns boolean
return R87(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u2)))),I2S(GetUnitTypeId(u2))+"|"+I2S(GetUnitTypeId(u1)))
endfunction
function YL takes nothing returns nothing
call Q47(StringHash("SwapHero|"+I2S(GetPlayerId(GetTriggerPlayer()))))
endfunction
function qA takes player p returns integer
local integer i=1
set LP4="qA"
loop
exitwhen i>5
if Y7[i]==p or Z7[i]==p then
return i
endif
set i=i+1
endloop
return-1
endfunction
function YT takes unit u1,unit u2 returns boolean
call QF7(StringHash("SwapHero|"+I2S(GetPlayerId(GetOwningPlayer(u1)))),I2S(GetUnitTypeId(u1))+"|"+I2S(GetUnitTypeId(u2)),true)
if yM(u1,u2)then
call ON9(u1,u2)
else
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,30,"|cff99ccffYou have requested to swap with |r"+P[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,30,"  ")
if(GetPlayerController(GetOwningPlayer(u2))==MAP_CONTROL_USER)then
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,D9,30,"  ")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,D9,30,"                         "+P[GetPlayerId(GetOwningPlayer(u1))]+GetUnitName(u1)+"|r |cff99ccffwants to swap with you. Type|r |c00ff0303-swap "+I2S(qA(GetOwningPlayer(u1)))+"|r |cff99ccffto accept|r")
call DisplayTimedTextToPlayer(GetOwningPlayer(u2),0,D9,30,"  ")
else
if(GetHeroSkillPoints(u1)!=GetHeroLevel(u1))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,$A,"
                |cff99ccffRequest to swap with |r"+P[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r rejected because you used a skill point")
elseif(Bz>Q94)then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,$A,"
                |cff99ccffRequest to swap with |r"+P[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r rejected because it is too late")
elseif((hG[GetPlayerId(GetOwningPlayer(u2))]>0)or(not PF7(u2)))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,$A,"
                |cff99ccffRequest to swap with |r"+P[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r rejected because it already started its item build")
elseif(not PF7(u1))then
call DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,D9,$A,"
                |cff99ccffRequest to swap with |r"+P[GetPlayerId(GetOwningPlayer(u2))]+GetUnitName(u2)+"|r rejected because you have an item")
else
call ON9(u1,u2)
endif
endif
endif
return false
endfunction
function YV takes nothing returns nothing
local integer i=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
set LP4="YV"
if GetEventPlayerChatString()=="-swapall" then
set i=1
set IN4=G7[GetPlayerId(GetTriggerPlayer())]
loop
exitwhen i>5
if WM7(GetTriggerPlayer())then
set IQ4=Y7[i]
else
set IQ4=Z7[i]
endif
set IM4=G7[GetPlayerId(IQ4)]
if not(IN4==null or GetOwningPlayer(IN4)!=GetTriggerPlayer()or IM4==null or GetOwningPlayer(IM4)!=IQ4 or IQ4==GetTriggerPlayer())then
if YT(IN4,IM4)then
return
endif
endif
set i=i+1
endloop
return
elseif i<1 or i>5 then
call AV7(GetTriggerPlayer(),"Invalid swap selection")
return
endif
set IN4=G7[GetPlayerId(GetTriggerPlayer())]
if WM7(GetTriggerPlayer())then
set IQ4=Y7[i]
else
set IQ4=Z7[i]
endif
set IM4=G7[GetPlayerId(IQ4)]
if IN4==null or GetOwningPlayer(IN4)!=GetTriggerPlayer()or IM4==null or GetOwningPlayer(IM4)!=IQ4 or IQ4==GetTriggerPlayer()then
call AV7(GetTriggerPlayer(),"Invalid swap selection")
return
endif
call YT(IN4,IM4)
endfunction
function Y2 takes nothing returns nothing
local integer i
local player p
local unit u
local string s
set LP4="Y2"
if GetLocalPlayer()==GetTriggerPlayer()then
call ClearTextMessages()
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45,"|cff99ccffSwap Hero Options:|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45," ")
set i=1
loop
exitwhen i>5
set p=Y7[i]
set u=G7[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if yM(G7[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303(Requested Swap With You)|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45,P[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set p=Z7[i]
set u=G7[GetPlayerId(p)]
if IsPlayerAlly(GetTriggerPlayer(),p)and GetTriggerPlayer()!=p and u!=null and GetOwningPlayer(u)==p then
set s=" "
if yM(G7[GetPlayerId(GetTriggerPlayer())],u)then
set s=" |c00ff0303(Requested Swap With You)|r"
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45,P[GetPlayerId(p)]+I2S(i)+"|r"+" - "+"|cff99ccff"+GetUnitName(u)+"|r"+s)
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45," ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45,"|cff99ccffType|r |c00ff0303-swap #|r |cff99ccffto make a choice or -swapcancel to cancel swap requests|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,45," ")
endfunction
function OW9 takes player JI7 returns boolean
local integer OX9=1
local integer OY9=0
set LP4="B7v"
loop
exitwhen OX9>5
if WM7(JI7)then
if G7[GetPlayerId(Y7[OX9])]!=null and Y7[OX9]!=JI7 and GetHeroLevel(G7[GetPlayerId(Y7[OX9])])==1 then
set OY9=OY9+1
endif
else
if G7[GetPlayerId(Z7[OX9])]!=null and Z7[OX9]!=JI7 and GetHeroLevel(G7[GetPlayerId(Z7[OX9])])==1 then
set OY9=OY9+1
endif
endif
set OX9=OX9+1
endloop
if OY9>0 then
return true
else
return false
endif
endfunction
function OZ9 takes nothing returns boolean
if PH4 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,"-swaphero "+(GetObjectName((1848653880))))
return false
endif
if GetUnitState(G7[GetPlayerId(GetTriggerPlayer())],UNIT_STATE_LIFE)<1 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653894))))
return false
endif
if N04 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653895)))+" -swaphero.")
return false
endif
if OW9(GetTriggerPlayer())==false then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653896))))
return false
endif
return true
endfunction
function MY9 takes nothing returns nothing
if OZ9()then
if GetEventPlayerChatString()=="-swap"or GetEventPlayerChatString()=="-swaphero"then
call Y2()
elseif GetEventPlayerChatString()=="-swapcancel"then
call YL()
else
call YV()
endif
endif
endfunction
function OA9 takes nothing returns boolean
return GetSpellAbilityId()==1093682761
endfunction
function OB9 takes integer o6,unit OC9,unit O39 returns nothing
local integer T8=1
local integer U8=GetUnitAbilityLevel(OC9,o6)
set LP4="cev"
loop
exitwhen T8>U8
call SelectHeroSkill(O39,o6)
set T8=T8+1
endloop
endfunction
function O69 takes nothing returns nothing
local integer T8
local integer U8
local unit S4
local location FY9=GetUnitLoc(GetTriggerUnit())
set LP4="O69"
set S4=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()),GetUnitTypeId(GetTriggerUnit()),FY9,bj_UNIT_FACING)
call SetHeroXP(S4,GetHeroXP(GetTriggerUnit()),false)
set T8=1
set U8=GetUnitAbilityLevel(GetTriggerUnit(),1096904043)
loop
exitwhen T8>U8
call SelectHeroSkill(bj_lastCreatedUnit,1096904043)
set T8=T8+1
endloop
set T8=0
set U8=5
loop
exitwhen T8>U8
call UnitAddItem(S4,UnitItemInSlot(GetTriggerUnit(),T8))
set T8=T8+1
endloop
if(GetUnitTypeId(GetTriggerUnit())==1164277353)then
call OB9(1093815130,GetTriggerUnit(),S4)
call OB9(1093683252,GetTriggerUnit(),S4)
call OB9(1093751369,GetTriggerUnit(),S4)
call OB9(1093678929,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221432)then
call OB9(1093677892,GetTriggerUnit(),S4)
call OB9(1093677639,GetTriggerUnit(),S4)
call OB9(1093677893,GetTriggerUnit(),S4)
call OB9(1093679411,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1429221431)then
call OB9(1093682745,GetTriggerUnit(),S4)
call OB9(1093678681,GetTriggerUnit(),S4)
call OB9(1093677381,GetTriggerUnit(),S4)
call OB9(1093677624,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1215063922)then
call OB9(1093677895,GetTriggerUnit(),S4)
call OB9(1093677894,GetTriggerUnit(),S4)
call OB9(1093685043,GetTriggerUnit(),S4)
call OB9(1095068013,GetTriggerUnit(),S4)
endif
if(GetUnitTypeId(GetTriggerUnit())==1164666213)then
call OB9(1093677877,GetTriggerUnit(),S4)
call OB9(1093678679,GetTriggerUnit(),S4)
call OB9(1093678678,GetTriggerUnit(),S4)
call OB9(1093808454,GetTriggerUnit(),S4)
endif
call A57(GetTriggerUnit())
call RemoveLocation(FY9)
set FY9=null
set G7[GetPlayerId(GetOwningPlayer(S4))]=S4
endfunction
function OL9 takes nothing returns boolean
local integer O19=GetUnitTypeId(G7[GetPlayerId(GetTriggerPlayer())])
set LP4="OL9"
return(O19==1429221432 or O19==1429221431 or O19==1215063922 or O19==1164277353 or O19==1164666213)and(RectContainsUnit(ND,G7[GetPlayerId(GetTriggerPlayer())])or RectContainsUnit(OD,G7[GetPlayerId(GetTriggerPlayer())]))
endfunction
function O09 takes nothing returns nothing
local unit Z47=G7[GetPlayerId(GetTriggerPlayer())]
set LP4="O09"
call UnitAddAbility(Z47,1093682761)
call IssueImmediateOrderById(Z47,$D02B7)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,120.,"|c00ff0303"+(GetObjectName((1848653897)))+" "+Y37(GetEnumUnit())+". "+(GetObjectName((1848653898)))+"|r")
endfunction
function MZ9 takes nothing returns nothing
if OL9()then
call O09()
endif
endfunction
function O59 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer XB8=GetTriggerEvalCount(t)
local real x
local real y
set LP4="O59"
if GetTriggerEventId()==EVENT_UNIT_DEATH or XB8>60 then
if RG7(Z47,"Frozen")==false then
if WM7(GetOwningPlayer(Z47))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
call SetUnitPosition(Z47,x,y)
call PauseUnit(Z47,false)
endif
call Q47(RP7)
call RN7(t)
else
call PauseUnit(Z47,true)
endif
set t=null
set Z47=null
return false
endfunction
function O29 takes player p returns nothing
local unit Z47=G7[GetPlayerId(p)]
local trigger t
set LP4="cEv"
if A47(Z47)==false then
set t=CreateTrigger()
call DisplayTimedTextToPlayer(p,0,D9,30.,(GetObjectName((1848653899))))
call UnitRemoveBuffs(Z47,true,false)
call UnitRemoveAbility(Z47,1113815395)
call UnitRemoveAbility(Z47,1113815346)
call UnitRemoveAbility(Z47,1110454858)
call UnitRemoveAbility(Z47,1112896368)
call UnitRemoveAbility(Z47,1114993524)
call UnitRemoveAbility(Z47,1110454854)
call PauseUnit(Z47,true)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function O59))
call QG7(GetHandleId(t),"Hero",Z47)
endif
set p=null
set Z47=null
set t=null
endfunction
function O_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
set LP4="O_9"
call Q47(RP7)
call RN7(t)
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call O29(p)
endif
set t=null
return false
endfunction
function MA9 takes nothing returns nothing
local player p=GetTriggerPlayer()
local unit Z47=G7[GetPlayerId(p)]
local trigger t
set LP4="MA9"
if A47(Z47)==false then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,3.5,false)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function O_9))
call QN7(GetHandleId(t),"p",p)
endif
set p=null
set Z47=null
set t=null
endfunction
function P49 takes player p returns nothing
local unit Z47=G7[GetPlayerId(p)]
local trigger t
set LP4="cOv"
if A47(Z47)==false then
set t=CreateTrigger()
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30.,P[GetPlayerId(p)]+GetPlayerName(p)+"|r is being unstuck. It will be sent to its base in 60 seconds.")
call UnitRemoveBuffs(Z47,true,false)
call UnitRemoveAbility(Z47,1113815395)
call UnitRemoveAbility(Z47,1113815346)
call UnitRemoveAbility(Z47,1110454858)
call UnitRemoveAbility(Z47,1112896368)
call UnitRemoveAbility(Z47,1114993524)
call UnitRemoveAbility(Z47,1110454854)
call PauseUnit(Z47,true)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function O59))
call QG7(GetHandleId(t),"Hero",Z47)
endif
set p=null
set Z47=null
set t=null
endfunction
function NL9 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=OW7(S2I(SubString(VH,$A,StringLength(VH))))
set LP4="NL9"
if((pl!=null)and(WR7(pl))and(IsPlayerInForce(pl,QW4)))then
if(G7[GetPlayerId(pl)]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r has no Hero")
else
call P49(pl)
endif
endif
set pl=null
endfunction
function P79 takes player p returns string
local string s=B9[GetPlayerId(p)]
set LP4="cRv"
if B9[GetPlayerId(p)]!="Here" then
return" |c00ff0303("+(GetObjectName((1848653881)))+" at "+SubString(s,$A,StringLength(s))+"|c00ff0303)|r"
endif
return" "
endfunction
function MB9 takes nothing returns nothing
local integer T8=1
local integer U8=5
local integer D5
set LP4="MB9"
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,20," ")
if(WN7(GetTriggerPlayer()))then
loop
exitwhen T8>U8
set D5=GetPlayerId(Y7[T8])
if(G7[D5]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,20,P[D5]+(KY4[GetPlayerId((Y7[T8]))])+"|r "+(GetObjectName((1848653901)))+" "+GetUnitName(G7[D5])+" ("+(GetObjectName((1848653900)))+" "+I2S(GetUnitLevel(G7[D5]))+")"+P79(Y7[T8]))
endif
set T8=T8+1
endloop
else
loop
exitwhen T8>U8
set D5=GetPlayerId(Z7[T8])
if(G7[D5]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,20,P[D5]+(KY4[GetPlayerId((Z7[T8]))])+"|r "+(GetObjectName((1848653901)))+" "+GetUnitName(G7[D5])+" ("+(GetObjectName((1848653900)))+" "+I2S(GetUnitLevel(G7[D5]))+")"+P79(Z7[T8]))
endif
set T8=T8+1
endloop
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,20," ")
endfunction
function P89 takes unit u returns boolean
return GetUnitTypeId(u)==1311781199 or GetUnitTypeId(u)==1311781171 or GetUnitTypeId(u)==1311781172 or GetUnitTypeId(u)==1311781173
endfunction
function P99 takes unit u returns unit
local integer JZ7=GetHandleId(GetOwningPlayer(u))
set LP4="Command_Movespeed_GetBear"
return(QA7(JZ7,"MyBear"))
endfunction
function MC9 takes nothing returns nothing
local unit u
local integer i=0
set LP4="MC9"
if XL4 then
return
endif
if(G7[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848653889))))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetUnitName(G7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(G7[GetPlayerId(GetTriggerPlayer())]))))
if P89(G7[GetPlayerId(GetTriggerPlayer())])then
set u=P99(G7[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetUnitName(u)+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
endif
endif
endfunction
function M39 takes nothing returns nothing
local unit u
local integer i=0
set LP4="M39"
if XL4 then
return
endif
if(G7[GetPlayerId(GetTriggerPlayer())]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848653889))))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetUnitName(G7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653902)))+" "+I2S(R2I(.5+GetUnitMoveSpeed(G7[GetPlayerId(GetTriggerPlayer())]))))
if P89(G7[GetPlayerId(GetTriggerPlayer())])then
set u=P99(G7[GetPlayerId(GetTriggerPlayer())])
if u!=null then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
endif
endif
loop
exitwhen i>16
set u=G7[i]
if u!=null and u!=G7[GetPlayerId(GetTriggerPlayer())]and IsUnitAlly(u,GetTriggerPlayer()) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetUnitName(u)+" "+GetObjectName(1848653902)+" "+I2S(R2I(.5+GetUnitMoveSpeed(u))))
endif
set i=i+1
endloop
endfunction
function M69 takes nothing returns nothing
call QF7(GetHandleId(GetTriggerPlayer()),"DisableHelp",true)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653906))))
endfunction
function ML9 takes nothing returns nothing
call QF7(GetHandleId(GetTriggerPlayer()),"DisableHelp",false)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653903))))
endfunction
function M19 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,"   "+(GetObjectName((1848653904)))+" "+I2S(S7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653905)))+" "+I2S(T7[GetPlayerId(GetTriggerPlayer())])+" "+(GetObjectName((1848653907)))+" "+I2S(JU[GetPlayerId(GetTriggerPlayer())]))
endfunction
function M09 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
set LP4="M09"
if(GetEventPlayerChatString()=="-cson")then
set AW[x]=true
set ob[x]=true
else
set AW[x]=false
set ob[x]=false
endif
call TC8()
endfunction
function PD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer i=(LoadInteger(C7,(RP7),(34)))
local real x
local real y
set LP4="PD9"
if Ob[i]==false then
call FlushChildHashtable(C7,(RP7))
call RN7(t)
elseif G7[i]!=null and A47(G7[i])==false then
set x=GetUnitX(G7[i])
set y=GetUnitY(G7[i])
call PanCameraToTimedForPlayer(Player(i),x,y,0)
endif
set t=null
return false
endfunction
function NW9 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
local trigger t
local integer RP7
local integer i
set LP4="NW9"
if Ob[x]==false and(GetEventPlayerChatString()=="-center" or GetEventPlayerChatString()=="-c")then
set Ob[x]=true
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function PD9))
call SaveInteger(C7,(RP7),(34),(x))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,GetObjectName(1848658519))
elseif GetEventPlayerChatString()=="-centeroff" or GetEventPlayerChatString()=="-co" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,GetObjectName(1848658520))
set Ob[x]=false
endif
endfunction
function NX9 takes nothing returns nothing
set Ab[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658522))
endfunction
function NY9 takes nothing returns nothing
set Ab[GetPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5,GetObjectName(1848658736))
endfunction
function qL takes nothing returns nothing
local integer i=1
local integer D49
local integer NS7
set LP4="qL"
loop
exitwhen i>5
set NS7=GetPlayerId(Y7[i])
set D49=R2I(TimerGetRemaining(T[NS7]))
if D49>0 and O64[NS7]and P84==false and L8==false then
call PlayerSetLeaderboard(Y7[i],gm[NS7])
call LeaderboardDisplay(gm[NS7],true)
call LeaderboardSetLabel(gm[NS7],"   Respawn in "+I2S(D49)+" seconds")
else
call LeaderboardDisplay(gm[NS7],false)
endif
set NS7=GetPlayerId(Z7[i])
set D49=R2I(TimerGetRemaining(T[NS7]))
if D49>0 and O64[NS7]and P84==false and L8==false then
call PlayerSetLeaderboard(Z7[i],gm[NS7])
call LeaderboardDisplay(gm[NS7],true)
call LeaderboardSetLabel(gm[NS7],"   Respawn in "+I2S(D49)+" seconds")
else
call LeaderboardDisplay(gm[NS7],false)
endif
set i=i+1
endloop
endfunction
function qM takes nothing returns nothing
local integer x=0
set LP4="qM"
set x=x+1
set gm[GetPlayerId(Y7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[x],gm[GetPlayerId(Y7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Y7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Y7[x])],"Respawn: ")
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"Respawn: ")
set x=x+1
set gm[GetPlayerId(Y7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[x],gm[GetPlayerId(Y7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Y7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Y7[x])],"Respawn: ")
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"Respawn: ")
set x=x+1
set gm[GetPlayerId(Y7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[x],gm[GetPlayerId(Y7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Y7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Y7[x])],"Respawn: ")
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"Respawn: ")
set x=x+1
set gm[GetPlayerId(Y7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[x],gm[GetPlayerId(Y7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Y7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Y7[x])],"Respawn: ")
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"Respawn: ")
set x=x+1
set gm[GetPlayerId(Y7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Y7[x],gm[GetPlayerId(Y7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Y7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Y7[x])],"Respawn: ")
set gm[GetPlayerId(Z7[x])]=CreateLeaderboard()
call PlayerSetLeaderboard(Z7[x],gm[GetPlayerId(Z7[x])])
call LeaderboardDisplay(gm[GetPlayerId(Z7[x])],false)
call LeaderboardSetLabel(gm[GetPlayerId(Z7[x])],"Respawn: ")
endfunction
function N89 takes nothing returns nothing
local integer x=GetPlayerId(GetTriggerPlayer())
set LP4="N89"
if GetEventPlayerChatString()=="-don" or GetEventPlayerChatString()=="-deathon" then
set O64[x]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653911))))
else
set O64[x]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653912))))
endif
endfunction
function PE9 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PE9"
call TriggerAddAction(t,function qM)
call TriggerRegisterTimerEvent(t,.5,false)
set t=CreateTrigger()
call TriggerAddAction(t,function qL)
call TriggerRegisterTimerEvent(t,1.,true)
endfunction
function N49 takes nothing returns nothing
if(GetEventPlayerChatString()=="-showdeny")then
set ob[GetPlayerId(GetTriggerPlayer())]=true
else
set ob[GetPlayerId(GetTriggerPlayer())]=false
endif
endfunction
function N79 takes nothing returns nothing
call AV7(GetTriggerPlayer(),(GetObjectName((1848657991))))
endfunction
function PF9 takes nothing returns nothing
local integer i=0
set LP4="PF9"
loop
exitwhen i>16
set ob[i]=true
set AW[i]=true
set i=i+1
endloop
endfunction
function M59 takes nothing returns nothing
call ForceRemovePlayer(C8,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653909))))
endfunction
function M29 takes nothing returns nothing
call ForceAddPlayer(C8,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848653914))))
endfunction
function qN takes nothing returns boolean
local integer x=GetRandomInt(1,4)
set LP4="qN"
if x==1 then
set BW=bo
elseif x==2 then
set BW=Bo
elseif x==3 then
set BW=fL
elseif x==4 then
set BW=FL
endif
if cW[GetPlayerId(GetLocalPlayer())]then
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
call EnableWeatherEffect(BW,true)
endif
return false
endfunction
function qo takes nothing returns nothing
local integer x=GetRandomInt(1,4)
local trigger t=CreateTrigger()
set LP4="qo"
call TriggerRegisterTimerEvent(t,300.,true)
call TriggerAddCondition(t,Condition(function qN))
set cW[GetPlayerId(Y7[1])]=false
set cW[GetPlayerId(Y7[2])]=false
set cW[GetPlayerId(Y7[3])]=false
set cW[GetPlayerId(Y7[4])]=false
set cW[GetPlayerId(Y7[5])]=false
set cW[GetPlayerId(Z7[1])]=false
set cW[GetPlayerId(Z7[2])]=false
set cW[GetPlayerId(Z7[3])]=false
set cW[GetPlayerId(Z7[4])]=false
set cW[GetPlayerId(Z7[5])]=false
if R8 then
set cW[GetPlayerId(KW4)]=false
set cW[GetPlayerId(KX4)]=false
endif
if x==1 then
set BW=bo
elseif x==2 then
set BW=Bo
elseif x==3 then
set BW=fL
elseif x==4 then
set BW=FL
endif
set t=null
endfunction
function M_9 takes nothing returns nothing
local string PG9=StringCase(GetEventPlayerChatString(),false)
set LP4="M_9"
if bW then
set bW=false
call qo()
endif
if PG9=="-weather snow" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,true)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if PG9=="-weather rain" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,true)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if PG9=="-weather moonlight" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,true)
call EnableWeatherEffect(FL,false)
endif
if PG9=="-weather wind" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,true)
endif
if PG9=="-weather off" and GetLocalPlayer()==GetTriggerPlayer()then
set cW[GetPlayerId(GetTriggerPlayer())]=false
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
endif
if PG9=="-weather random" then
set cW[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call EnableWeatherEffect(bo,false)
call EnableWeatherEffect(Bo,false)
call EnableWeatherEffect(fL,false)
call EnableWeatherEffect(FL,false)
call EnableWeatherEffect(BW,true)
endif
endif
endfunction
function N99 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
local integer D5=GetPlayerId(GetTriggerPlayer())
set LP4="N99"
set vb[D5]=vb[D5]+1
if vb[D5]>20 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848656977))))
return
endif
if GetEventPlayerChatString()=="-rollon" or GetEventPlayerChatString()=="-rolloff" then
return
endif
if a==0 then
set a=100
endif
if a>0 and a<$7D1 then
call ZF7(C8,5,P[GetPlayerId(GetTriggerPlayer())]+(KY4[GetPlayerId((GetTriggerPlayer()))])+"|r "+(GetObjectName((1848653129)))+" "+I2S(GetRandomInt(1,a))+" "+(GetObjectName((1848653133)))+" "+I2S(a))
else
call AV7(GetTriggerPlayer(),(GetObjectName((1848652377))))
endif
endfunction
function NS9 takes nothing returns nothing
local integer a
set LP4="NS9"
if GetRandomInt(1,2)==1 then
set a=GetRandomInt(K14,K04)
else
set a=GetRandomInt(K64,KL4)
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848657747)))+" "+YL7(a))
endfunction
function NP9 takes nothing returns nothing
local integer a=S2I(SubString(GetEventPlayerChatString(),4,StringLength(GetEventPlayerChatString())))
set LP4="NP9"
if GetTriggerPlayer()!=Y7[1]or a>2 or a<1 or SM4==false or TimerGetElapsed(V)>$E or AD4 then
return
endif
set AH4=a
set AI4=a
set A94=true
if a==1 then
call YM7(bj_FORCE_ALL_PLAYERS,15.,P[GetPlayerId(Y7[1])]+(KY4[GetPlayerId((Y7[1]))])+"|r "+GetObjectName(1848656979))
else
call YM7(bj_FORCE_ALL_PLAYERS,15.,P[GetPlayerId(Z7[1])]+(KY4[GetPlayerId((Z7[1]))])+"|r "+GetObjectName(1848656979))
endif
endfunction
function NJ9 takes nothing returns nothing
set eb[GetPlayerId(GetTriggerPlayer())]=false
endfunction
function NK9 takes nothing returns nothing
set eb[GetPlayerId(GetTriggerPlayer())]=true
endfunction
function ND9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848654128))))
set ib[GetPlayerId(GetTriggerPlayer())]=true
if GetLocalPlayer()==GetTriggerPlayer()then
call SetPlayerName(Y7[1],(KY4[GetPlayerId((Y7[1]))]))
call SetPlayerName(Y7[2],(KY4[GetPlayerId((Y7[2]))]))
call SetPlayerName(Y7[3],(KY4[GetPlayerId((Y7[3]))]))
call SetPlayerName(Y7[4],(KY4[GetPlayerId((Y7[4]))]))
call SetPlayerName(Y7[5],(KY4[GetPlayerId((Y7[5]))]))
call SetPlayerName(Z7[1],(KY4[GetPlayerId((Z7[1]))]))
call SetPlayerName(Z7[2],(KY4[GetPlayerId((Z7[2]))]))
call SetPlayerName(Z7[3],(KY4[GetPlayerId((Z7[3]))]))
call SetPlayerName(Z7[4],(KY4[GetPlayerId((Z7[4]))]))
call SetPlayerName(Z7[5],(KY4[GetPlayerId((Z7[5]))]))
endif
endfunction
function NE9 takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
set LP4="NE9"
if CW[id] then
set CW[id]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848653908))))
else
set CW[id]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,(GetObjectName((1848654129))))
endif
endfunction
function NU9 takes nothing returns nothing
local integer id=GetPlayerId(GetTriggerPlayer())
set LP4="NU9"
set ab[id]=true
endfunction
function NF9 takes nothing returns nothing
local integer i=1
local player p
local real PH9
set LP4="NF9"
loop
exitwhen i>5
set p=Y7[i]
if WR7(p)then
set PH9=OT[GetPlayerId(p)]/(TimerGetElapsed(V))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.,P[GetPlayerId(p)]+(KY4[GetPlayerId((p))])+"|r"+" "+(GetObjectName((1848653876)))+" "+R2S(PH9))
endif
set p=Z7[i]
if WR7(p)then
set PH9=OT[GetPlayerId(p)]/(TimerGetElapsed(V))*60
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.,P[GetPlayerId(p)]+(KY4[GetPlayerId((p))])+"|r"+" "+(GetObjectName((1848653876)))+" "+R2S(PH9))
endif
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.," ")
set p=null
endfunction
function NG9 takes nothing returns nothing
call CR7(GetTriggerPlayer())
endfunction
function PI9 takes nothing returns boolean
return OI7(GetFilterUnit())and GetOwningPlayer(GetFilterUnit())==GetTriggerPlayer()
endfunction
function Courier_Add takes nothing returns nothing
call UnitAddType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function Courier_Remove takes nothing returns nothing
call UnitRemoveType(GetEnumUnit(),UNIT_TYPE_PEON)
endfunction
function NH9 takes nothing returns nothing
local group g=ZI7()
set LP4="NH9"
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function PI9))
call ZH7(g)
set g=null
endfunction
function NI9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656726)))+" [|cffff0000E|r|cffff0000E|r|cffff0000E|r] - [|cffffcc00T|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656725)))+" [|cffff0000E|r|cffff0000E|r|cff00ffffW|r] - [|cffffcc00D|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656724)))+" [|cffff0000E|r|cffff0000E|r|cff0000ffQ|r] - [|cffffcc00F|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656694)))+" [|cff0000ffQ|r|cff0000ffQ|r|cff0000ffQ|r] - [|cffffcc00Y|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656716)))+" [|cff0000ffQ|r|cff0000ffQ|r|cff00ffffW|r] - [|cffffcc00V|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656718)))+" [|cff0000ffQ|r|cff0000ffQ|r|cffff0000E|r] - [|cffffcc00G|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656723)))+" [|cff00ffffW|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00Z|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656719)))+" [|cff00ffffW|r|cff00ffffW|r|cff0000ffQ|r] - [|cffffcc00X|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656720)))+" [|cff00ffffW|r|cff00ffffW|r|cff00ffffW|r] - [|cffffcc00C|r]")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656721)))+" [|cff0000ffQ|r|cff00ffffW|r|cffff0000E|r] - [|cffffcc00B|r]")
endfunction
function PJ9 takes string s returns nothing
call StopMusic(true)
call PlayMusic(s)
endfunction
function NM9 takes nothing returns nothing
local string s=GetEventPlayerChatString()
local integer XS7=GetRandomInt(1,TT)
set LP4="NM9"
if GetLocalPlayer()==GetTriggerPlayer()then
if s=="-music off" then
call StopMusic(false)
elseif s=="-music random" then
call PJ9(RT[XS7])
elseif s=="-music nightelf1" then
call PJ9(ZP)
elseif s=="-music nightelf2" then
call PJ9(BP)
elseif s=="-music nightelf3" then
call PJ9(CP)
elseif s=="-music human1" then
call PJ9(GQ)
elseif s=="-music human2" then
call PJ9(IQ)
elseif s=="-music human3" then
call PJ9(JQ)
elseif s=="-music orc1" then
call PJ9(VP)
elseif s=="-music orc2" then
call PJ9(XP)
elseif s=="-music orc3" then
call PJ9(YP)
elseif s=="-music undead1" then
call PJ9(OP)
elseif s=="-music undead2" then
call PJ9(RP)
elseif s=="-music undead3" then
call PJ9(TP)
elseif s=="-music other1" then
call PJ9(YQ)
elseif s=="-music other2" then
call PJ9(GR)
elseif s=="-music other3" then
call PJ9(HR)
elseif s=="-music other4" then
call PJ9(IR)
elseif s=="-music other5" then
call PJ9(OR)
elseif s=="-music other6"then
call PJ9(VK4)
elseif s=="-music other7"then
call PJ9(VM4)
elseif s=="-music other8"then
call PJ9(VN4)
elseif s=="-music other9"then
call PJ9(VO4)
elseif s=="-music special" then
call PJ9(XR)
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848656727)))+" ")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,"off, random, nightelf1, nightelf2, nightelf3, human1, human2, human3, orc1, orc2, orc3, undead1, undead2, undead3, other1, other2, other3, other4, other5, other6, other7, other8, other9, special")
endif
endif
endfunction
function PK9 takes nothing returns boolean
set TT=TT+1
set RT[TT]=ZP
set TT=TT+1
set RT[TT]=BP
set TT=TT+1
set RT[TT]=CP
set TT=TT+1
set RT[TT]=GQ
set TT=TT+1
set RT[TT]=IQ
set TT=TT+1
set RT[TT]=JQ
set TT=TT+1
set RT[TT]=VP
set TT=TT+1
set RT[TT]=XP
set TT=TT+1
set RT[TT]=YP
set TT=TT+1
set RT[TT]=OP
set TT=TT+1
set RT[TT]=RP
set TT=TT+1
set RT[TT]=TP
set TT=TT+1
set RT[TT]=YQ
set TT=TT+1
set RT[TT]=GR
set TT=TT+1
set RT[TT]=HR
set TT=TT+1
set RT[TT]=IR
set TT=TT+1
set RT[TT]=OR
set TT=TT+1
set RT[TT]=VK4
set TT=TT+1
set RT[TT]=VM4
set TT=TT+1
set RT[TT]=VN4
set TT=TT+1
set RT[TT]=VO4
set TT=TT+1
set RT[TT]=XR
return false
endfunction
function PM9 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function PK9))
endfunction
function PN9 takes player p,integer r,integer g,integer b,integer a returns nothing
if GetLocalPlayer()==p then
call SetWaterBaseColor(r,g,b,a)
endif
endfunction
function PO9 takes string s returns nothing
local string PP9=""
local string PQ9=""
local string PR9=""
local integer i=0
local integer ED8=StringLength(s)
local integer PS9=1
set LP4="cdv"
loop
exitwhen i>ED8
if SubString(s,i,i+1)==" " then
set PS9=PS9+1
else
if PS9==1 then
set PP9=PP9+SubString(s,i,i+1)
elseif PS9==2 then
set PQ9=PQ9+SubString(s,i,i+1)
else
set PR9=PR9+SubString(s,i,i+1)
endif
endif
set i=i+1
endloop
set bb=S2I(PP9)
set Bb=S2I(PQ9)
set cb=S2I(PR9)
endfunction
function NN9 takes nothing returns nothing
local string PT9=SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString()))
local player p=GetTriggerPlayer()
local integer r
local integer g
local integer b
set LP4="NN9"
set Nb[GetPlayerId(p)]=true
if PT9=="red" then
call PN9(p,$FF,0,0,$FF)
elseif PT9=="blue" then
call PN9(p,0,0,$FF,$FF)
elseif PT9=="green" then
call PN9(p,0,$FF,0,$FF)
elseif PT9=="default" then
call PN9(p,0,0,$FF,$FF)
elseif PT9=="random" then
set r=GetRandomInt(0,$FF)
set g=GetRandomInt(0,$FF)
set b=GetRandomInt(0,$FF)
call PN9(p,r,g,b,$FF)
call DisplayTimedTextToPlayer(p,0,0,5,(GetObjectName((1848657988)))+" r="+I2S(r)+" g="+I2S(g)+" b="+I2S(b))
else
call PO9(PT9)
set r=bb
set g=Bb
set b=cb
if r>=0 and r<=$FF and g>=0 and g<=$FF and b>=0 and b<=$FF then
call PN9(p,r,g,b,$FF)
endif
endif
endfunction
function NQ9 takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.,"This command has been temporarily disabled")
endfunction
function NR9 takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,"Total Bonus XP/Gold: "+I2S(NC4[GetPlayerId(GetTriggerPlayer())])+"/"+I2S(N34[GetPlayerId(GetTriggerPlayer())]))
return false
endfunction
function NA9 takes nothing returns boolean
if XZ4>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetObjectName(1848659023)+": "+I2S(XZ4))
endif
return false
endfunction
function PU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer PV9=R47(RP7,"u1Index")
local integer PW9=R47(RP7,"u2Index")
local unit u1=WG7(PV9)
local unit u2=WG7(PW9)
local real CB7=R77(RP7,"Duration")
local lightning PX9=Q07(RP7,"Lightning")
set LP4="PU9"
if I2R(GetTriggerEvalCount(t))*.025>CB7 then
call DestroyLightning(PX9)
call WF7(PV9)
call WF7(PW9)
call Q47(RP7)
call RN7(t)
else
call MoveLightning(PX9,true,GetUnitX(u1),GetUnitY(u1),GetUnitX(u2),GetUnitY(u2))
endif
set t=null
set u1=null
set u2=null
set PX9=null
return false
endfunction
function PY9 takes string PZ9,unit u1,unit u2,real r,real g,real b,real a,real CB7 returns nothing
local real x1=GetUnitX(u1)
local real y1=GetUnitY(u1)
local real x2=GetUnitX(u2)
local real y2=GetUnitY(u2)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local lightning PX9=AddLightning(PZ9,true,x1,y1,x2,y2)
set LP4="TimedLightningToUnit"
call SetLightningColor(PX9,r,g,b,a)
call QJ7(RP7,"Lightning",PX9)
call Q97(RP7,"u1Index",WI7(u1))
call Q97(RP7,"u2Index",WI7(u2))
call QD7(RP7,"Duration",CB7)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function PU9))
set t=null
set PX9=null
endfunction
function PA9 takes string PB9 returns nothing
local sound BZ7=CreateSound(PB9,false,false,false,$A,$A,"")
set LP4="clv"
call SetSoundVolume(BZ7,0)
call StartSound(BZ7)
call KillSoundWhenDone(BZ7)
set BZ7=null
endfunction
function PC9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local ubersplat P39=(LoadUbersplatHandle(C7,(JZ7),($83)))
set LP4="PC9"
call DestroyUbersplat(P39)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set P39=null
return false
endfunction
function P69 takes ubersplat P39,real d returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="DelayedUbersplayDestroy"
call SaveUbersplatHandle(C7,(JZ7),($83),(P39))
call TriggerRegisterTimerEvent(t,d,false)
call TriggerAddCondition(t,Condition(function PC9))
set t=null
endfunction
function PL9 takes nothing returns nothing
local real d=N67(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),ZZ4,ZA4)
set LP4="PL9"
if d<ZY4 then
set ZY4=d
set ZX4=GetEnumUnit()
endif
endfunction
function P19 takes group g,real x,real y returns unit
set ZY4=$F423F
set ZX4=null
set ZZ4=x
set ZA4=y
call ForGroup(g,function PL9)
return ZX4
endfunction
function P09 takes integer Z_7 returns nothing
local integer i=0
set LP4="SetAbilityUnavailableToAll"
loop
exitwhen i>5
call SetPlayerAbilityAvailable(Y7[i],Z_7,false)
call SetPlayerAbilityAvailable(Z7[i],Z_7,false)
set i=i+1
endloop
endfunction
function P59 takes integer id returns nothing
local integer i=0
loop
exitwhen i>$C
call SetPlayerAbilityAvailable(Player(i),id,false)
set i=i+1
endloop
endfunction
function NO9 takes nothing returns nothing
local string s=GetEventPlayerChatString()
local trigger t
local integer x=S2I(SubString(GetEventPlayerChatString(),7,StringLength(GetEventPlayerChatString())))
local integer i=1
set LP4="NO9"
if x<1 or x>Fb then
set x=GetRandomInt(1,Fb)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,$A,(GetObjectName((1848657205)))+" "+I2S(x))
endif
if gb then
loop
exitwhen i>Fb
call PA9(Cb[i])
set i=i+1
endloop
set gb=false
endif
if db[x]==false then
endif
call AU7(GetTriggerPlayer(),Cb[x])
endfunction
function N19 takes nothing returns nothing
if bj[GetPlayerId(GetTriggerPlayer())]==false then
set bj[GetPlayerId(GetTriggerPlayer())]=true
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.,"Override is now on for Formless")
else
set bj[GetPlayerId(GetTriggerPlayer())]=false
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,15.,"Override is now off for Formless")
endif
endfunction
function P29 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=QC7(GetHandleId(t),"FormlessPlayer")
set LP4="P29"
if G7[GetPlayerId(p)]!=null and H74 then
call AV7(p,"Already have a hero.")
else
if WM7(p)then
call CreateUnitAtLoc(p,1211445296,GetRectCenter(L9),0)
else
call CreateUnitAtLoc(p,1211445296,GetRectCenter(C9),0)
endif
endif
call Q47(GetHandleId(t))
call DestroyTimer(t)
set p=null
set t=null
endfunction
function N09 takes nothing returns nothing
local player p=GetTriggerPlayer()
local timer t
set LP4="N09"
if(G7[GetPlayerId(p)]==null or H74==false)and O and D4==false and E4==false and Z8==false and L==false and RY4==false then
call XI7(p)
call DisplayTimedTextToPlayer(p,0,D9,$A,"Formless will be created for you shortly.")
set t=CreateTimer()
call QN7(GetHandleId(t),"FormlessPlayer",p)
call TimerStart(t,6,false,function P29)
endif
set p=null
set t=null
endfunction
function P_9 takes nothing returns nothing
local timer t=GetExpiredTimer()
local player p=QC7(GetHandleId(t),"BastionPlayer")
set LP4="P_9"
if G7[GetPlayerId(p)]!=null and H74 then
call AV7(p,"Already have a hero.")
else
if WM7(p)then
call CreateUnitAtLoc(p,1211510832,GetRectCenter(L9),0)
else
call CreateUnitAtLoc(p,1211510832,GetRectCenter(C9),0)
endif
endif
call Q47(GetHandleId(t))
call DestroyTimer(t)
set p=null
set t=null
endfunction
function N59 takes nothing returns nothing
local player p=GetTriggerPlayer()
local timer t
set LP4="N59"
if(G7[GetPlayerId(p)]==null or H74==false)and O and D4==false and E4==false and Z8==false and L==false and RY4==false then
call XI7(p)
call DisplayTimedTextToPlayer(p,0,D9,$A,"Bastion will be created for you shortly.")
set t=CreateTimer()
call QN7(GetHandleId(t),"BastionPlayer",p)
call TimerStart(t,6,false,function P_9)
endif
set p=null
set t=null
endfunction
function Q49 takes nothing returns nothing
local integer i=1
set LP4="Q49"
if zA==false then
set zA=true
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,60," ")
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90,"You can now pick heroes from the Fun Taverns.")
if false then
loop
exitwhen i==6
call FogModifierStart(CreateFogModifierRadiusLoc(Y7[i],FOG_OF_WAR_VISIBLE,GetUnitLoc(vN),$C8,true,true))
call FogModifierStart(CreateFogModifierRadiusLoc(Z7[i],FOG_OF_WAR_VISIBLE,GetUnitLoc(vN),$C8,true,true))
set i=i+1
endloop
set i=1
endif
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,90,"This is a FOR FUN ONLY mode.")
loop
exitwhen i==6
call CreateUnit(Y7[i],1848651843,7225,-7475,270)
call CreateUnit(Z7[i],1848651843,7225,-7475,270)
set i=i+1
endloop
endif
if false then
set DV=DV+1
set RU[DV]=1227960882
set SU[DV]=1227960368
set ZU[DV]=0
set AU[DV]=1227961139
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNArcaniteMelee.blp"
set CU[DV]=45
set HJ4[DV]=$3E1C
set FH=DV
set DV=DV+1
set RU[DV]=1227960883
set SU[DV]=1227960369
set ZU[DV]=0
set AU[DV]=1227961140
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpThree.blp"
set CU[DV]=90
set HJ4[DV]=$3B47
set GH=DV
set DV=DV+1
set RU[DV]=1227960884
set SU[DV]=1227960632
set ZU[DV]=0
set AU[DV]=1227961141
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNImprovedBows.blp"
set CU[DV]=40
set HJ4[DV]=$36B0
set hH=DV
set DV=DV+1
set RU[DV]=1227960885
set SU[DV]=1227960880
set ZU[DV]=0
set AU[DV]=1227961142
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
set CU[DV]=40
set HJ4[DV]=$2D00
set jH=DV
set DV=DV+1
set RU[DV]=1227960886
set SU[DV]=1227960372
set ZU[DV]=0
set AU[DV]=1227961143
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSanctuary.blp"
set CU[DV]=30
set HJ4[DV]=7500
set JH=DV
set DV=DV+1
set RU[DV]=1227960888
set SU[DV]=1227960376
set ZU[DV]=0
set AU[DV]=1227961145
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNThoriumRanged.blp"
set CU[DV]=0
set HJ4[DV]=$283C
set LH=DV
set DV=DV+1
set RU[DV]=1227961136
set SU[DV]=1227960626
set ZU[DV]=0
set AU[DV]=1227961393
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyStrength.blp"
set CU[DV]=0
set HJ4[DV]=$2A94
set kH=DV
set DV=DV+1
set RU[DV]=1227961137
set SU[DV]=1227960628
set ZU[DV]=0
set AU[DV]=1227961394
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"
set CU[DV]=0
set HJ4[DV]=9975
set lH=DV
set DV=DV+1
set RU[DV]=1227960887
set SU[DV]=1227960374
set ZU[DV]=0
set AU[DV]=1227961144
set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrb.blp"
set CU[DV]=45
set HJ4[DV]=$2C24
set MH=DV
set FP4=FP4+1
set FI4[FP4]=S2
set FJ4[FP4]=C5
set FK4[FP4]=HY
set FO4[FP4]=FH
set FP4=FP4+1
set FI4[FP4]=D74
set FJ4[FP4]=DI4
set FK4[FP4]=P2
set FM4[FP4]=DH4
set FO4[FP4]=GH
set FP4=FP4+1
set FI4[FP4]=X2
set FJ4[FP4]=AV
set FK4[FP4]=XV
set FM4[FP4]=NW
set FO4[FP4]=hH
set FP4=FP4+1
set FI4[FP4]=ZW
set FJ4[FP4]=LL
set FK4[FP4]=U1
set FM4[FP4]=UV
set FO4[FP4]=jH
set FP4=FP4+1
set FI4[FP4]=ZW
set FJ4[FP4]=E1
set FK4[FP4]=U1
set FM4[FP4]=UV
set FO4[FP4]=jH
set FP4=FP4+1
set FI4[FP4]=E6
set FJ4[FP4]=EV
set FK4[FP4]=QW
set FM4[FP4]=QW
set FO4[FP4]=JH
set FP4=FP4+1
set FI4[FP4]=CV
set FJ4[FP4]=NV
set FK4[FP4]=GX
set FM4[FP4]=VW
set FN4[FP4]=P2
set FO4[FP4]=LH
set FP4=FP4+1
set FI4[FP4]=SY
set FJ4[FP4]=JV
set FK4[FP4]=OV
set FM4[FP4]=AV
set FN4[FP4]=X2
set FO4[FP4]=kH
set FP4=FP4+1
set FI4[FP4]=TW
set FJ4[FP4]=GY
set FK4[FP4]=ZY
set FM4[FP4]=ZW
set FN4[FP4]=D44
set FO4[FP4]=lH
set FP4=FP4+1
set FI4[FP4]=VW
set FJ4[FP4]=AV
set FK4[FP4]=ZW
set FM4[FP4]=HZ
set FO4[FP4]=MH
endif
endfunction
function Q79 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real Q89=R77(RP7,"T_CurrentX")
local real Q99=R77(RP7,"T_CurrentY")
local real QD9=R77(RP7,"T_MaxX")
local real QE9=$80
local real x
local real y
set LP4="Q79"
loop
exitwhen Q89>QD9
loop
exitwhen Q99>8192
set dW=dW+1
set x=Q89
set y=Q99
if IsPointBlighted(x,y)==false then
set DW[dW]=GetTerrainType(x,y)
set LW[dW]=GetTerrainVariance(x,y)
endif
set x=-Q89
set y=Q99
if IsPointBlighted(x,y)==false then
set fW[dW]=GetTerrainType(x,y)
set mW[dW]=GetTerrainVariance(x,y)
endif
set x=-Q89
set y=-Q99
if IsPointBlighted(x,y)==false then
set FW[dW]=GetTerrainType(x,y)
set MW[dW]=GetTerrainVariance(x,y)
endif
set x=Q89
set y=-Q99
if IsPointBlighted(x,y)==false then
set hW[dW]=GetTerrainType(x,y)
set pW[dW]=GetTerrainVariance(x,y)
endif
set Q99=Q99+QE9
endloop
set Q99=0
set Q89=Q89+QE9
endloop
set QD9=QD9+256
call QD7(RP7,"T_CurrentX",Q89*1.)
call QD7(RP7,"T_CurrentY",Q99*1.)
call QD7(RP7,"T_MaxX",QD9*1.)
if QD9>8192 then
call Q47(RP7)
call RN7(t)
endif
set t=null
return false
endfunction
function QF9 takes string OG9 returns boolean
if OG9=="-ma" or OG9=="-ms" or OG9=="-cs" or OG9=="-cson" or OG9=="-disablehelp" or OG9=="-enablehelp" or OG9=="-unstuck" or OG9=="-recreate" then
return true
elseif OG9=="-swaphero" or OG9=="-showmsg" or OG9=="-hidemsg" or OG9=="-showdeny" or OG9=="-hidedeny" or OG9=="-weather rain" or OG9=="-weather snow" or OG9=="-weather moonlight" or OG9=="-weather wind" or OG9=="-weather random" or OG9=="-weather off" or OG9=="-denyinfo" or OG9=="-di" or OG9=="-deathon" or OG9=="-don" or OG9=="-deathoff" or OG9=="-doff" or OG9=="-roll" or OG9=="-hideheronames" or OG9=="-hhn" or OG9=="-test" or OG9=="-mute" or OG9=="-wtf" or OG9=="-fun" or OG9=="-fleshstr" or OG9=="-fs" or OG9=="-switchon" then
return true
elseif OG9=="-override" or OG9=="-formless" then
return true
endif
return false
endfunction
function QG9 takes nothing returns boolean
return not O
endfunction
function QH9 takes string qQ returns nothing
if cx==""then
set cx="|c006699CC"+qQ+"|r"
else
set cx=cx+"/|c006699CC"+qQ+"|r"
endif
endfunction
function QI9 takes string qQ returns nothing
if cx==""then
set cx="|c00dd8dff"+qQ+"|r"
else
set cx=cx+"/"+"|c00dd8dff"+qQ+"|r"
endif
endfunction
function QJ9 takes string PG9,integer qs,integer qS returns string
return SubString(PG9,0,qs)+SubString(PG9,qS,StringLength(PG9))
endfunction
function QK9 takes string PG9 returns string
local integer FE8=StringLength(PG9)
local string qT
local string M9=""
local integer i=0
set LP4="cUv"
loop
exitwhen(i==FE8)
set qT=StringCase(SubString(PG9,i,i+1),false)
if not(qT==StringCase(qT,true))then
set M9=M9+qT
endif
set i=i+1
endloop
return M9
endfunction
function QM9 takes nothing returns boolean
local integer i=1
local boolean b1=false
local boolean b2=false
local integer NS7=0
loop
exitwhen i>5
if(not b1)and GetPlayerController(Y7[i])==MAP_CONTROL_USER and GetPlayerSlotState(Y7[i])==PLAYER_SLOT_STATE_PLAYING then
set b1=true
set NS7=i
elseif GetPlayerController(Y7[i])!=MAP_CONTROL_USER and GetPlayerSlotState(Y7[i])==PLAYER_SLOT_STATE_PLAYING then
set b2=true
endif
set i=i+1
endloop
if b1 and b2 then
set NS7=GetPlayerId(Y7[NS7])
call SetItemPawnable(CreateItem(1227896130,GetUnitX(KT4[NS7]),GetUnitY(KT4[NS7])),false)
set NS7=1
loop
exitwhen NS7>5
call RY7(IY4,GetObjectName(1496332594),Y7[NS7])
set NS7=NS7+1
endloop
endif
set i=1
set b1=false
set b2=false
set NS7=0
loop
exitwhen i>5
if(not b1)and GetPlayerController(Z7[i])==MAP_CONTROL_USER and GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_PLAYING then
set b1=true
set NS7=i
elseif GetPlayerController(Z7[i])!=MAP_CONTROL_USER and GetPlayerSlotState(Z7[i])==PLAYER_SLOT_STATE_PLAYING then
set b2=true
endif
set i=i+1
endloop
if b1 and b2 then
set NS7=GetPlayerId(Z7[NS7])
call SetItemPawnable(CreateItem(1227896130,GetUnitX(KT4[NS7]),GetUnitY(KT4[NS7])),false)
set NS7=1
loop
exitwhen NS7>5
call RY7(JZ4,GetObjectName(1496332594),Z7[NS7])
set NS7=NS7+1
endloop
endif
call DestroyTrigger(GetTriggeringTrigger())
return false
endfunction

function QN9 takes string QO9,integer QP9 returns nothing
local string PG9=QK9(QO9)
local string array QQ9
local string array QR9
local boolean array QS9
local integer QT9
local integer QU9
local integer FE8=StringLength(PG9)
local integer x=0
local integer y=0
local integer z=0
local boolean AP
local boolean AR
local boolean LM
local boolean MM
local boolean TR
local boolean DM
local boolean MR
local boolean SP
local boolean AA
local boolean AI
local boolean AS
local boolean ID
local boolean NP
local boolean SC
local boolean EM
local boolean DU
local boolean SH
local boolean VR
local boolean RV
local boolean RD
local boolean OM
local boolean NT
local boolean NB
local boolean NM
local boolean NS
local boolean SO
local boolean NR
local boolean XL
local boolean SD
local boolean PM
local boolean OI
local boolean MI
local boolean CM
local boolean FR
local boolean MO
local boolean RO
local boolean ER
local boolean CD
local boolean RS
local boolean ST
local boolean MC
local boolean HE
local boolean NE
local boolean HG
local boolean NG
local boolean DE
local boolean QV9
local boolean NN
local boolean FM
local boolean QW9
local boolean QX9
local boolean QY9
local boolean QZ9
local boolean QA9
local trigger t
//call DisplayTextToForce( bj_FORCE_PLAYER[SelfIndex], ( QO9 + I2S(QP9) ) )
set LP4="GameMode_Entered"
set QQ9[1]="allpick"
set QR9[1]="ap"
set QQ9[2]="allrandom"
set QR9[2]="ar"
set QQ9[3]="leaguemode"
set QR9[3]="lm"
set QQ9[4]="mirrormatch"
set QR9[4]="mm"
set QQ9[5]="teamrandom"
set QR9[5]="tr"
set QQ9[6]="deathmatch"
set QR9[6]="dm"
set QQ9[7]="moderandom"
set QR9[7]="mr"
set QQ9[8]="shuffleplayers"
set QR9[8]="sp"
set QQ9[9]="allagility"
set QR9[9]="aa"
set QQ9[$A]="allintelligence"
set QR9[$A]="ai"
set QQ9[$B]="allstrength"
set QR9[$B]="as"
set QQ9[$C]="itemdrop"
set QR9[$C]="id"
set QQ9[$D]="nopowerups"
set QR9[$D]="np"
set QQ9[$E]="supercreeps"
set QR9[$E]="sc"
set QQ9[$F]="easymode"
set QR9[$F]="em"
set QQ9[16]="duplicatemode"
set QR9[16]="du"
set QQ9[17]="samehero"
set QR9[17]="sh"
set QQ9[18]="voterandom"
set QR9[18]="vr"
set QQ9[19]="reverse"
set QR9[19]="rv"
set QQ9[20]="randomdraft"
set QR9[20]="rd"
set QQ9[21]="onlymid"
set QR9[21]="om"
set QQ9[22]="extendedleague"
set QR9[22]="xl"
set QQ9[23]="nomid"
set QR9[23]="nm"
set QQ9[24]="notop"
set QR9[24]="nt"
set QQ9[25]="nobot"
set QR9[25]="nb"
set QQ9[26]="noswap"
set QR9[26]="ns"
set QQ9[27]="norepick"
set QR9[27]="nr"
set QQ9[28]="captainsdraft"
set QR9[28]="cd"
set QQ9[29]="singledraft"
set QR9[29]="sd"
set QQ9[30]="poolingmode"
set QR9[30]="pm"
set QQ9[31]="observerinfo"
set QR9[31]="oi"
set QQ9[32]="miniheroes"
set QR9[32]="mi"
set QQ9[33]="captainsmode"
set QR9[33]="cm"
set QQ9[34]="fastrespawn"
set QR9[34]="fr"
set QQ9[35]="meleeonly"
set QR9[35]="mo"
set QQ9[36]="rangeonly"
set QR9[36]="ro"
set QQ9[37]="experimentalrunes"
set QR9[37]="er"
set QQ9[38]="randomside"
set QR9[38]="rs"
set QQ9[39]="switchon"
set QR9[39]="so"
set QQ9[40]="zoommode"
set QR9[40]="zm"
set QQ9[41]="capturepoint"
set QR9[41]="cp"
set QT9=41
set QU9=41
set QT9=QT9+1
set QQ9[QT9]="supertower"
set QR9[QT9]="st"
set QT9=QT9+1
set QQ9[QT9]="msupercreeps"
set QR9[QT9]="mc"
set QT9=QT9+1
set QQ9[QT9]="highexp"
set QR9[QT9]="he"
set QT9=QT9+1
set QQ9[QT9]="normexp"
set QR9[QT9]="ne"
set QT9=QT9+1
set QQ9[QT9]="dynaexp"
set QR9[QT9]="de"
set QT9=QT9+1
set QQ9[QT9]="highgold"
set QR9[QT9]="hg"
set QT9=QT9+1
set QQ9[QT9]="normgold"
set QR9[QT9]="ng"
set QT9=QT9+1
set QQ9[QT9]="dynagold"
set QR9[QT9]="dg"
set QT9=QT9+1
set QQ9[QT9]="nonecronomicon"
set QR9[QT9]="nn"
set QT9=QT9+1
set QQ9[QT9]="formlessmode"
set QR9[QT9]="fm"
set QT9=QT9+1
set QQ9[QT9]="coolnames"
set QR9[QT9]="cn"
set QT9=QT9+1
set QQ9[QT9]="alldagons"
set QR9[QT9]="ad"
set QT9=QT9+1
set QQ9[QT9]="beginnermode"
set QR9[QT9]="bm"
set QT9=QT9+1
set QQ9[QT9]="advancedmode"
set QR9[QT9]="am"
set QT9=QT9+1
set QQ9[QT9]="xtrememode"
set QR9[QT9]="xm"
set x=-1
loop
    exitwhen x==FE8-1
    set x=x+1
    set y=x
    loop
        exitwhen y==FE8
        set y=y+1
        set z=1
        loop
            exitwhen z>QT9
            if QQ9[z]==SubString(PG9,x,y)then
                set QS9[z]=true
                set z=QT9+1
                set PG9=QJ9(PG9,x,y)
                set x=-1
                set FE8=StringLength(PG9)
                set y=FE8
            else
                set z=z+1
            endif
        endloop
    endloop
endloop
set x=-1
loop
exitwhen x==FE8-1
set x=x+1
set y=x
loop
exitwhen y==FE8
set y=y+1
set z=1
loop
exitwhen z>QT9
if QR9[z]==SubString(PG9,x,y)then
set QS9[z]=true
if(z<=QU9)then
set vY=false
endif
set z=QT9+1
set PG9=QJ9(PG9,x,y)
set x=-1
set FE8=StringLength(PG9)
set y=FE8
else
set z=z+1
endif
endloop
endloop
endloop
set AP=QS9[1]
set AR=QS9[2]
set LM=QS9[3]
set MM=QS9[4]
set TR=QS9[5]
set DM=QS9[6]
set MR=QS9[7]
set SP=QS9[8]
set AA=QS9[9]
set AI=QS9[$A]
set AS=QS9[$B]
set ID=QS9[$C]
set NP=QS9[$D]
set SC=QS9[$E]
set EM=QS9[$F]
set DU=QS9[16]
set SH=QS9[17]
set VR=QS9[18]
set RV=QS9[19]
set RD=QS9[20]
set OM=QS9[21]
set XL=QS9[22]
set NM=QS9[23]
set NT=QS9[24]
set NB=QS9[25]
set NS=QS9[26]
set NR=QS9[27]
set CD=QS9[28]
set SD=QS9[29]
set PM=QS9[30]
set OI=QS9[31]
set MI=QS9[32]
set CM=QS9[33]
set FR=QS9[34]
set MO=QS9[35]
set RO=QS9[36]
set ER=QS9[37]
set RS=QS9[38]
set SO=QS9[39]
set ST=QS9[QU9+1]
set MC=QS9[QU9+2]
set HE=QS9[QU9+3]
set NE=QS9[QU9+4]
set DE=QS9[QU9+5]
set HG=QS9[QU9+6]
set NG=QS9[QU9+7]
set QV9=QS9[QU9+8]
set NN=QS9[QU9+9]
set FM=QS9[QU9+$A]
set QW9=QS9[QU9+$B]
set QX9=QS9[QU9+$C]
set QZ9=QS9[QU9+$D]
set QY9=QS9[QU9+$E]
set QA9=QS9[QU9+$F]
if PG9!=""or QF9(GetEventPlayerChatString())then
return
elseif(LM or VR or RV or RD or XL or CD or SO)then
call AV7(Le,"The following modes are currently disabled for this AI release: -lm, -vr, -rv, -rd, -xl, -cd, -so")
return
elseif FM and(AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or DU or SH or VR or RV or RD or XL or SD or MO or RO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif(AR and(CM or AP or TR or LM or MR or RV or RD or CD or SD))or(AP and(TR or MR))or(TR and(LM or MR))or(LM and MR)or(MM and SH)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif(AA and(AI or AS or DM))or(AS and(AI or DM))or(AI and DM)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif(RO and(MO or DM))or(MO and DM)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif RV and(CM or AR or TR or MR or LM or DM or SH)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif(DM and(CM or TR or LM or MR or SH or RV or RD or CD or SD))or(MM and DM)or(SH and DM)then
call AV7(Le,(GetObjectName((1848652372))))
return
elseif LM and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or XL or MO or RO)then
call AV7(Le,(GetObjectName((1848652593))))
return
elseif XL and(CM or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or RO or MO)then
call AV7(Le,(GetObjectName((1848652594))))
return
elseif CM and(SP or XL or AP or RD or CD or AR or SD or MM or TR or DM or MR or AA or AI or AS or ID or NP or SC or EM or DU or SH or RV or OM or NB or NM or NT or LM or MO or RO)then
call AV7(Le,(GetObjectName((1848652594))))
return
elseif RD and(CD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif CD and(RD or CM or AP or LM or AR or SD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif MR and(CM or AP or LM or AR or SD or MM or TR or DM or AA or AI or AS or SH or RV or RO or MO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif SD and(CM or AP or LM or AR or RD or CD or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif VR and(CM or LM or RD or CD or SD or AR or MM or TR or DM or MR or AA or AI or AS or SH or RV or RO or MO)then
call AV7(Le,(GetObjectName((1848652373))))
return
elseif MM and P8(W7)!=P8(X7)then
call AV7(Le,(GetObjectName((1848652596))))
return
elseif VR and P8(W7)!=P8(X7)then
call AV7(Le,(GetObjectName((1848652596))))
return
elseif RV and P8(W7)!=P8(X7)then
call AV7(Le,(GetObjectName((1848652596))))
return
elseif(LM or XL)and(WQ7(Y7[1])or WQ7(Y7[2])or WQ7(Y7[3])or WQ7(Y7[4])or WQ7(Y7[5])or WQ7(Z7[1])or WQ7(Z7[2])or WQ7(Z7[3])or WQ7(Z7[4])or WQ7(Z7[5]))then
call AV7(Le,"AI players not allowed in League Modes")
return
elseif(QZ9 and QY9)or(QZ9 and QA9)or(QY9 and QA9)or(NE and HE)or(HG and NG)or((QY9 or QZ9 or QA9)and(NE or HE or DE or HG or NG or QV9))then
call AV7(Le,"Invalid AI Game Mode Combination!")
return
endif
if FR or CM or AP or AR or LM or MM or TR or DM or MR or SP or AA or AI or AS or ID or NP or SC or DU or EM or SH or VR or RV or RD or CD or OM or NB or NM or NT or NS or NR or XL or SD or PM or OI or MI or MO or RO or ER or RS or SO or ST or MC or(HE or NE or HG or DE or NG or QV9)or NN or FM or(QY9 or QZ9 or QA9)then
call DisableTrigger(GetTriggeringTrigger())
else
return
endif
if CM==false then
call TL8()
call J09()
endif
if LM==false and XL==false then
call PE9()
endif
set OL4=QK9(GetEventPlayerChatString())
if(YI4)then
call E58("Mode"+OL4,0)
else
call E58("Mode"+OL4,GetPlayerId(Le))
endif
set X8=false
if LM then
set vo="Leaguemode"
elseif XL then
set vo="Extended League"
elseif RD then
set vo="Randomdraft"
elseif CD then
set vo="Captainsdraft"
elseif MM then
set vo="Mirrormatch"
elseif DM then
set vo="Deathmatch"
elseif RV then
set vo="Reverse"
elseif AP then
set vo="Allpick"
elseif AR then
set vo="Allrandom"
elseif TR then
set vo="Teamrandom"
elseif MR then
set vo="Moderandom"
elseif VR then
set vo="Voterandom"
elseif SD then
set vo="Singledraft"
elseif CM then
set vo="Captainsmode"
endif
if CM then
call QH9("Captains Mode")
endif
if LM then
call QH9("League Mode")
endif
if XL then
call QH9("Extended League")
endif
if RD then
call QH9("Random Draft")
endif
if CD then
call QH9("Captains Draft")
endif
if DM then
call QH9("Death Match")
endif
if MM then
call QH9("Mirror Match")
endif
if AP then
call QH9("All Pick")
endif
if AR then
call QH9("All Random")
endif
if VR then
call QH9("Vote Random")
endif
if MR then
call QH9("Mode Random")
endif
if TR then
call QH9("Team Random")
endif
if SP then
call QH9("Shuffle Players")
endif
if AA then
call QH9("All Agility")
endif
if AS then
call QH9("All Strength")
endif
if AI then
call QH9("All Intelligence")
endif
if RO then
call QH9("Range Only")
endif
if MO then
call QH9("Melee Only")
endif
if DU then
call QH9("Duplicate Mode")
endif
if ID then
call QH9("Item Drop")
endif
if NP then
call QH9("No Powerups")
endif
if SC then
call QH9("Super Creeps")
endif
if EM then
call QH9("Easy Mode")
endif
if SH then
call QH9("Same Hero")
endif
if RV then
call QH9("Reverse")
endif
if OM then
call QH9("Only Mid")
endif
if NM then
call QH9("No Mid")
endif
if NB then
call QH9("No Bot")
endif
if NT then
call QH9("No Top")
endif
if NS then
call QH9("No Swap")
endif
if NR then
call QH9("No Repick")
endif
if SD then
call QH9("Single Draft")
endif
if PM then
call QH9("Pooling Mode")
endif
if OI then
call QH9("Observer Info")
endif
if MI then
call QH9("Mini Heroes")
endif
if FR then
call QH9("Fast Respawn")
endif
if ER then
call QH9("Experimental Runes")
endif
if RS then
call QH9("Random Side")
endif
if SO then
call QH9("Switch On")
endif
if ST then
call QI9("Super Tower")
endif
if MC then
call QI9("Modified Super Creeps")
endif
if QZ9 then
call QI9("Beginner's Mode")
endif
if QY9 then
call QI9("Advanced Mode")
endif
if QA9 then
call QI9("Xtreme Mode")
endif
if HE then
call QI9("High Exp AI")
endif
if NE then
call QI9("Normal Exp AI")
endif
if DE then
call QI9("Dynamic Exp AI")
endif
if HG then
call QI9("High Gold AI")
endif
if NG then
call QI9("Normal Gold AI")
endif
if QV9 then
call QI9("Dynamic Gold AI")
endif
if NN then
call QI9("No Necronomicon")
endif
if FM then
call QI9("Formless Mode")
endif
if QW9 then
call QI9("Cool Names")
endif
if QX9 then
call QI9("All Dagons")
endif
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
if QP9==1 then
call YM7(bj_FORCE_ALL_PLAYERS,20.,P[GetPlayerId(Le)]+(KY4[GetPlayerId(Le)])+"|r"+" "+GetObjectName(1848653361)+" "+cx)
else
call YM7(bj_FORCE_ALL_PLAYERS,20.,GetObjectName(1848657998)+" "+cx)
endif
call YM7(bj_FORCE_ALL_PLAYERS,20.,(GetObjectName((1848653363)))+" -gameinfo.")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
call AX7("QB9",SP)
call AX7("QC9",RS)
call AX7("Q39",DM)
call AX7("Q69",MM)
call AX7("QL9",SH)
call AX7("Q19",AA)
call AX7("Q09",AI)
call AX7("Q59",AS)
call AX7("Q29",RO)
call AX7("Q_9",MO)
call AX7("R49",DU)
call AX7("R79",AR)
call AX7("R89",AP)
call AX7("R99",TR)
call AX7("RD9",SD)
call AX7("RE9",MR)
call AX7("RF9",ID)
call AX7("RG9",NP)
call AX7("RH9",SC)
call AX7("RI9",EM)
call AX7("RJ9",OM)
call AX7("RK9",NB)
call AX7("RM9",NT)
call AX7("RN9",NM)
call AX7("RO9",NS)
call AX7("StartSwitchOn",SO)
call AX7("RP9",NR)
call AX7("RQ9",PM)
call AX7("RR9",OI)
call AX7("RS9",MI)
call AX7("RT9",FR)
call AX7("RU9",ER)
call AX7("RV9",ST)
call AX7("RW9",MC)
if QZ9 then
set NE=true
set NG=true
set DE=false
set QV9=false
endif
if QY9 then
set NE=true
set NG=true
set DE=true
set QV9=true
endif
if QA9 then
set HE=true
set HG=true
set DE=true
set QV9=true
endif
call AX7("RX9",DE)
call AX7("RY9",QV9)
call AX7("RZ9",FM)
call AX7("RA9",QW9)
call AX7("RB9",QX9)
call AX7("RC9",CM)
set AT=HE
set CT=NE
set BT=HG
set VT=NG
set WT=NN
set Q84=true
call BM8(0,0,false)
if SM4==false and O04==false then
call J_9()
endif
call TC8()
endfunction
function R39 takes nothing returns nothing
call QN9(GetEventPlayerChatString(),1)
endfunction
function R69 takes nothing returns boolean
if YH4!="" and Q84==false then
set YI4=true
call QN9("-"+(YH4),2)
else
call TriggerRegisterPlayerChatEvent(YG4,Le,"-",false)
endif
return false
endfunction
function R89 takes nothing returns nothing
local location FU8=GetRectCenter(pr)
local location FV8=GetRectCenter(qr)
local integer x=1
set LP4="R89"
set O4=true
set Q94=120
loop
exitwhen x>5
if WR7(Y7[x])then
call CreateUnitAtLoc(Y7[x],1848651843,FV8,bj_UNIT_FACING)
endif
if WR7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,FU8,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set FU8=null
set FV8=null
endfunction
function RL9 takes integer YW7,boolean R19 returns boolean
local boolean R09=false
local integer i
local integer j=1
set LP4="AICheckIfHeroAlreadyBannedPicked"
if(R19)then
if(BA4==1)then
return false
endif
set i=BA4-1
loop
if(YW7==BC4[j])then
return true
endif
set j=j+1
exitwhen(j>i)
endloop
else
if(BB4==1)then
return false
endif
set i=BB4-1
loop
if(YW7==B34[j])then
return true
endif
set j=j+1
exitwhen(j>i)
endloop
endif
return R09
endfunction
function R59 takes integer YW7,boolean R19 returns nothing
if(R19)then
set BC4[BA4]=YW7
set BA4=BA4+1
else
set B34[BB4]=YW7
set BB4=BB4+1
endif
endfunction
function R29 takes integer YW7 returns nothing
local integer i=1
local boolean R_9=false
set LP4="AIRemoveUnitFromCMPickPool"
loop
if(YW7==BZ4[i])then
set BZ4[i]=0
call R59(YW7,false)
set R_9=true
endif
set i=i+1
exitwhen(i>34 or R_9)
endloop
endfunction
function S49 takes nothing returns integer
local integer JA7=0
local integer YW7=0
set LP4="S49"
loop
set JA7=GetRandomInt(1,34)
exitwhen(BZ4[JA7]>0 and RL9(BZ4[JA7],false)==false)
endloop
set YW7=BZ4[JA7]
call R59(YW7,false)
set BZ4[JA7]=0
return YW7
endfunction
function S79 takes integer YW7 returns nothing
local integer i=1
local boolean R_9=false
set LP4="AIRemoveUnitFromCMBanPool"
loop
if(YW7==BW4[i])then
set BW4[i]=0
call R59(YW7,true)
set R_9=true
endif
set i=i+1
exitwhen(i>20 or R_9)
endloop
endfunction
function S89 takes nothing returns integer
local integer JA7=0
local integer YW7=0
set LP4="S89"
loop
set JA7=GetRandomInt(1,20)
exitwhen(BW4[JA7]>0 and RL9(BZ4[JA7],true)==false)
endloop
set YW7=BW4[JA7]
call R59(YW7,true)
set BW4[JA7]=0
return YW7
endfunction
function S99 takes nothing returns boolean
local integer i=1
local integer SD9=0
local integer YW7=0
set LP4="S99"
if not AL4 then
call RN7(GetTriggeringTrigger())
return false
endif
if WQ7(A64)then
if GetPlayerState(A64,PLAYER_STATE_RESOURCE_GOLD)>0 then
set BL4=BL4+1
if BL4>2 then
if B14 then
set YW7=S89()
else
set YW7=S49()
endif
loop
exitwhen(IssueNeutralImmediateOrderById(A64,BV4[i],YW7)or GetPlayerState(A64,PLAYER_STATE_RESOURCE_GOLD)==0)
set i=i+1
if(i>$C)then
if B14 then
set YW7=S89()
else
set YW7=S49()
endif
set i=1
set SD9=SD9+1
if(SD9>5)then
exitwhen true
endif
endif
endloop
set BL4=0
endif
endif
endif
return true
endfunction
function SE9 takes nothing returns nothing
call XH7(1160786502)
call XH7(1311780946)
call XH7(1311788336)
call XH7(1160786507)
call XH7(1311788343)
call XH7(1311788363)
call XH7(1211117616)
endfunction
function SF9 takes nothing returns nothing
set BZ4[1]=1211117653
set BZ4[2]=1162032951
set BZ4[3]=1211117617
set BZ4[4]=1212363833
set BZ4[5]=1215657064
set BZ4[6]=1432580716
set BZ4[7]=1433631084
set BZ4[8]=1315988077
set BZ4[9]=1215063922
set BZ4[$A]=1315074670
set BZ4[$B]=1211117636
set BZ4[$C]=1430466872
set BZ4[$D]=1430468144
set BZ4[$E]=1429221441
set BZ4[$F]=1429221430
set BZ4[16]=1313026096
set BZ4[17]=1430467634
set BZ4[18]=1429221424
set BZ4[19]=1430468913
set BZ4[20]=1160785972
set BZ4[21]=1162032181
set BZ4[22]=1162032951
set BZ4[23]=1160785970
set BZ4[24]=1429221443
set BZ4[25]=1211117640
set BZ4[26]=1429221445
set BZ4[27]=1328558154
set BZ4[28]=1432510828
set BZ4[29]=1332766568
set BZ4[30]=1429221456
set BZ4[31]=1315007329
set BZ4[32]=1211117653
set BZ4[33]=1311787088
set BZ4[34]=1164207469
endfunction
function SG9 takes nothing returns nothing
set BW4[1]=1211117653
set BW4[2]=1214931305
set BW4[3]=1215657064
set BW4[4]=1311781174
set BW4[5]=1315074670
set BW4[6]=1430466872
set BW4[7]=1162032951
set BW4[8]=1311787088
set BW4[9]=1211119409
set BW4[$A]=1328558390
set BW4[$B]=1332766568
set BW4[$C]=1433168227
set BW4[$D]=1433631084
set BW4[$E]=1333027688
set BW4[$F]=1328558160
set BW4[16]=1215723364
set BW4[17]=1211117654
set BW4[18]=1432510828
set BW4[19]=1315334514
set BW4[20]=1162032181
endfunction
function SH9 takes nothing returns boolean
local integer i=1
local integer SI9=0
set LP4="SH9"
loop
exitwhen i>5
if WQ7(Y7[i])then
if(IssueNeutralImmediateOrderById(Y7[i],B64[i],1747990094)==false)then
set SI9=1
loop
exitwhen(SI9>5)or IssueNeutralImmediateOrderById(Y7[i],B64[SI9],1747990094)
set SI9=SI9+1
endloop
endif
endif
if WQ7(Z7[i])then
if(IssueNeutralImmediateOrderById(Z7[i],B64[6+i],1747990094)==false)then
set SI9=1
loop
exitwhen(SI9>5)or IssueNeutralImmediateOrderById(Z7[i],B64[6+SI9],1747990094)
set SI9=SI9+1
endloop
endif
endif
set i=i+1
endloop
call RN7(GetTriggeringTrigger())
return false
endfunction
function SJ9 takes string S,real SK9,real SM9,real SN9,real SO9,real SP9,boolean SQ9,integer r,integer g,integer b returns image
set AZ4=CreateImage(S,SK9,SM9,0,SN9-(SK9/2),SO9-(SM9/2),SP9,0,0,0,2)
call SetImageRenderAlways(AZ4,true)
call ShowImage(AZ4,SQ9)
call SetImageColor(AZ4,r,g,b,$FF)
return AZ4
endfunction
function SR9 takes image i returns nothing
call ShowImage(i,false)
call DestroyImage(i)
endfunction
function SS9 takes integer ST9 returns nothing
local real x=AA4+40
local real y=AB4-50
local integer SU9=$FF
local integer SV9=0
local integer SW9=0
local integer SX9=0
local integer SY9=0
local integer SZ9=$FF
local integer r
local integer g
local integer b
set LP4="ModeCM_DisplayPhase"
if ST9==1 then
set r=SU9
set g=SV9
set b=SW9
set AU4=SJ9("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set AV4=SJ9("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set AW4=SJ9("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif ST9==2 then
set r=SX9
set g=SY9
set b=SZ9
call SR9(AU4)
call SR9(AV4)
call SR9(AW4)
set AU4=SJ9("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set AV4=SJ9("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set AW4=SJ9("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set AX4=SJ9("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif ST9==3 then
set r=SU9
set g=SV9
set b=SW9
call SR9(AU4)
call SR9(AV4)
call SR9(AW4)
call SR9(AX4)
set AU4=SJ9("Fonts\\B.blp",90,90,x-40,y,0,true,r,g,b)
set AV4=SJ9("Fonts\\A.blp",90,90,x,y,0,true,r,g,b)
set AW4=SJ9("Fonts\\N.blp",90,90,x+50,y,0,true,r,g,b)
elseif ST9==4 then
set r=SX9
set g=SY9
set b=SZ9
call SR9(AU4)
call SR9(AV4)
call SR9(AW4)
set AU4=SJ9("Fonts\\P.blp",90,90,x-60,y,0,true,r,g,b)
set AV4=SJ9("Fonts\\I.blp",90,90,x-20,y,0,true,r,g,b)
set AW4=SJ9("Fonts\\C.blp",90,90,x,y,0,true,r,g,b)
set AX4=SJ9("Fonts\\K.blp",90,90,x+45,y,0,true,r,g,b)
elseif ST9==5 then
call SR9(AU4)
call SR9(AV4)
call SR9(AW4)
call SR9(AX4)
endif
endfunction
function SA9 takes integer i,integer SB9 returns string
if i<0 then
set i=0
endif
if TimerGetElapsed(V)<$F then
return "|c00555555"+I2S(i)
endif
if AI4==3 then
return "|c00555555"+I2S(i)
endif
if AI4==1 and SB9!=1 then
return "|c00555555"+I2S(i)
elseif AI4==2 and SB9!=2 then
return "|c00555555"+I2S(i)
elseif i==0 then
return "|c00555555"+I2S(i)
elseif i<6 then
return "|c00ff0303"+I2S(i)
else
return I2S(i)
endif
endfunction
function SC9 takes nothing returns boolean
local multiboarditem S39
local integer i
local integer S69
local integer SL9
local integer S19=7
local integer S09=0
set LP4="SC9"
set S69=1
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemWidth(S39,.5)
call MultiboardSetItemValue(S39,P[GetPlayerId(Y7[1])]+(KY4[GetPlayerId((Y7[1]))])+"|r")
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657238))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set i=0
set S69=S69
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AJ4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AJ4[i]])
endif
call MultiboardReleaseItem(S39)
set i=1
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AJ4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AJ4[i]])
endif
call MultiboardReleaseItem(S39)
set i=2
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AJ4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AJ4[i]])
endif
call MultiboardReleaseItem(S39)
set i=3
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AJ4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AJ4[i]])
endif
call MultiboardReleaseItem(S39)
set i=4
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AJ4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AJ4[i]])
endif
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657240))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set i=0
set S69=S69
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AO4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AO4[i]])
endif
call MultiboardReleaseItem(S39)
set i=1
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AO4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AO4[i]])
endif
call MultiboardReleaseItem(S39)
set i=2
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AO4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AO4[i]])
endif
call MultiboardReleaseItem(S39)
set i=3
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AO4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AO4[i]])
endif
call MultiboardReleaseItem(S39)
set i=4
set SL9=S09+i+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AO4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AO4[i]])
endif
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S09+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,SA9(AG4[1],1))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set S69=S69+1
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S09+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,SA9(AF4[1],1))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S09
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S09+1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
if TimerGetElapsed(V)<$F then
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657457))
elseif AI4==1 then
call MultiboardSetItemValue(S39,GetObjectName(1848657460))
elseif AI4==2 then
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set S69=1
set SL9=S19
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemWidth(S39,1.5)
call MultiboardSetItemValue(S39,"   "+P[GetPlayerId(Z7[1])]+(KY4[GetPlayerId((Z7[1]))])+"|r")
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S19-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+" "+GetObjectName(1848657238))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set i=0
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AK4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AK4[i]])
endif
call MultiboardReleaseItem(S39)
set i=1
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AK4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AK4[i]])
endif
call MultiboardReleaseItem(S39)
set i=2
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AK4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AK4[i]])
endif
call MultiboardReleaseItem(S39)
set i=3
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AK4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AK4[i]])
endif
call MultiboardReleaseItem(S39)
set i=4
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AK4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AK4[i]])
endif
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S19-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+" "+GetObjectName(1848657240))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set i=0
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AP4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AP4[i]])
endif
call MultiboardReleaseItem(S39)
set i=1
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AP4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AP4[i]])
endif
call MultiboardReleaseItem(S39)
set i=2
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AP4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AP4[i]])
endif
call MultiboardReleaseItem(S39)
set i=3
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AP4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AP4[i]])
endif
call MultiboardReleaseItem(S39)
set i=4
set SL9=S19+i+1-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemWidth(S39,.015)
if AP4[i]>0 then
call MultiboardSetItemStyle(S39,false,true)
call MultiboardSetItemIcon(S39,MG4[AP4[i]])
endif
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S19-2
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657237))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S19-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,SA9(AG4[2],2))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set S69=S69+1
set SL9=S19-2
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657236))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S19-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,SA9(AF4[2],2))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set S69=S69+2
set SL9=S19-2
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
call MultiboardSetItemValue(S39,"|c006699CC"+GetObjectName(1848657241))
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
set SL9=S19-1
set S39=MultiboardGetItem(AT4,S69,SL9)
call MultiboardSetItemStyle(S39,true,false)
if TimerGetElapsed(V)<$F then
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657457))
elseif AI4==2 then
call MultiboardSetItemValue(S39,GetObjectName(1848657460))
elseif AI4==1 then
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657457))
else
call MultiboardSetItemValue(S39,"|c00555555"+GetObjectName(1848657458))
endif
call MultiboardSetItemWidth(S39,.035)
call MultiboardReleaseItem(S39)
return false
endfunction
function S59 takes nothing returns nothing
local integer S29=$C
local integer S_9=$E
local trigger t=CreateTrigger()
local integer i
local multiboarditem S39
set LP4="S59"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function SC9))
set AT4=CreateMultiboard()
call MultiboardSetItemsWidth(AT4,.015)
call MultiboardSetRowCount(AT4,S29)
call MultiboardSetColumnCount(AT4,S_9)
call MultiboardSetTitleText(AT4,GetObjectName(1848658742))
call MultiboardSetItemsStyle(AT4,false,false)
call MultiboardMinimize(AT4,false)
call MultiboardDisplay(AT4,true)
set i=0
loop
exitwhen i>S_9
set S39=MultiboardGetItem(AT4,0,i)
call MultiboardSetItemWidth(S39,.015)
call MultiboardReleaseItem(S39)
set i=i+1
endloop
set t=null
set S39=null
endfunction
function T49 takes nothing returns boolean
local unit T79=GetSoldUnit()
local player p=GetOwningPlayer(T79)
local integer i
local real x
local real y
local real a
set LP4="T49"
if GetUnitTypeId(T79)==1747990094 and IsPlayerAlly(GetOwningPlayer(T79),GetOwningPlayer(GetSellingUnit()))then
if G7[GetPlayerId(p)]!=null then
call AV7(p,GetObjectName(1848657459))
call KillUnit(T79)
set T79=null
set p=null
return false
endif
set x=GetUnitX(GetSellingUnit())
set y=GetUnitY(GetSellingUnit())
set i=N57(GetUnitTypeId(GetSellingUnit()))
set a=GetUnitFacing(GetSellingUnit())
call RemoveUnit(GetSellingUnit())
call CreateUnit(p,i,x,y,a)
endif
if GetUnitTypeId(T79)==1747990094 then
call KillUnit(T79)
endif
if G7[GetPlayerId(Y7[1])]!=null and G7[GetPlayerId(Y7[2])]!=null and G7[GetPlayerId(Y7[3])]!=null and G7[GetPlayerId(Y7[4])]!=null and G7[GetPlayerId(Y7[5])]!=null and G7[GetPlayerId(Z7[1])]!=null and G7[GetPlayerId(Z7[2])]!=null and G7[GetPlayerId(Z7[3])]!=null and G7[GetPlayerId(Z7[4])]!=null and G7[GetPlayerId(Z7[5])]!=null then
call RN7(GetTriggeringTrigger())
endif
set T79=null
set p=null
return false
endfunction
function T89 takes player pl,boolean J4 returns nothing
local integer O5=GetPlayerId(pl)
local integer T8
local integer U8
if not J4 then
set B04[64+O5]=(not B04[64+O5])
call DisplayTimedTextToPlayer(pl,0,0,10.,GetObjectName(1496332596)+M27(B04[64+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if not B04[48+O5]then
return
endif
else
set B04[48+O5]=true
endif
set B04[32+O5]=(B04[64+O5]and B04[48+O5])
set O5=GetPlayerId(GetLocalPlayer())
set T8=1
set U8=3+HB4+HA4
loop
exitwhen T8>U8
call x7(R4,$F,T8,N77(B04[32+O5],L54,.01))
set T8=T8+1
endloop
if(pl==GetLocalPlayer())then
set LE4=IsMultiboardMinimized(R4)
call MultiboardMinimize(R4,true)
endif
call UI8()
if(pl==GetLocalPlayer())then
call MultiboardMinimize(R4,LE4)
endif
endfunction
function O49 takes nothing returns nothing
call T89(GetTriggerPlayer(),false)
endfunction
function T99 takes player pl,boolean J4 returns nothing
local integer O5=GetPlayerId(pl)
local integer T8
local integer U8
local real NC7
if not(LT or EU)then
return
endif
if not J4 then
set B04[112+O5]=(not B04[112+O5])
call DisplayTimedTextToPlayer(pl,0,0,10.,GetObjectName(1496332595)+M27(B04[112+O5],GetObjectName(1496403790),GetObjectName(1498369862)))
if not B04[96+O5]then
return
endif
else
set B04[96+O5]=true
endif
set B04[80+O5]=(B04[112+O5]and B04[96+O5])
set O5=GetPlayerId(GetLocalPlayer())
set NC7=0
if(LT)then
set NC7=NC7+L54/2
endif
if(EU)then
set NC7=NC7+L54/2
endif
set T8=1
set U8=3+HB4+HA4
loop
exitwhen T8>U8
call x7(R4,$E,T8,N77(B04[80+O5],NC7,.01))
set T8=T8+1
endloop
if(pl==GetLocalPlayer())then
set LE4=IsMultiboardMinimized(R4)
call MultiboardMinimize(R4,true)
endif
call UI8()
if(pl==GetLocalPlayer())then
call MultiboardMinimize(R4,LE4)
endif
endfunction
function O89 takes nothing returns nothing
call T99(GetTriggerPlayer(),false)
endfunction
function TD9 takes nothing returns boolean
local integer O5=1
set AE4=true
call RN7(GetTriggeringTrigger())
call DestroyMultiboard(AT4)
call TL8()
call J09()
call TC8()
loop
exitwhen O5>$B
if GetPlayerController(Player(O5))==MAP_CONTROL_USER then
call T89(Player(O5),true)
call T99(Player(O5),true)
endif
set O5=O5+1
endloop
return false
endfunction
function ModeCM_SpawnSound takes nothing returns boolean
call RN7(GetTriggeringTrigger())
call PlaySoundBJ(YO)
return false
endfunction
function TE9 takes nothing returns boolean
local trigger t=CreateTrigger()
local integer BO8
local integer BN8
local string YJ8
local unit u
local real x
local real y
local integer i
local real d
local real TF9=GetRectCenterX(L9)
local real TG9=GetRectCenterY(L9)
local real TH9=GetRectCenterX(C9)
local real TI9=GetRectCenterY(C9)
set LP4="TE9"
set AI4=3
set N_4=true
call RN7(GetTriggeringTrigger())
set i=0
loop
exitwhen i==5
set x=TF9-300+i*$96
set y=TG9
set u=CreateUnit(Y7[0],MH4[AO4[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(Y7[i+1],TF9,TG9,0)
call CreateUnit(Y7[i+1],1848651843,TF9,TG9,bj_UNIT_FACING)
call SetPlayerState(Y7[i+1],PLAYER_STATE_RESOURCE_GOLD,A84[GetPlayerId(Y7[i+1])]-$FA)
set B64[1+i]=u
set i=i+1
endloop
set i=0
loop
exitwhen i==5
set x=TH9-300+i*$96
set y=TI9
set u=CreateUnit(Z7[0],MH4[AP4[i]],x,y,270)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_SELL)
call PanCameraToTimedForPlayer(Z7[i+1],TH9,TI9,0)
call CreateUnit(Z7[i+1],1848651843,TH9,TI9,bj_UNIT_FACING)
call SetPlayerState(Z7[i+1],PLAYER_STATE_RESOURCE_GOLD,A84[GetPlayerId(Z7[i+1])]-$FA)
set B64[7+i]=u
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function T49))
call SuspendTimeOfDay(false)
call EnableTrigger(M14)
call EnableTrigger(M64)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function TD9))
set Q94=90
call XJ7()
set AL4=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function SH9))
call ExecuteFunc("TJ9")
call J_9()
set t=null
set u=null
return false
endfunction
function TK9 takes integer i returns nothing
call XH7(KC4[i])
if AI4==1 then
set AO4[AQ4]=i
set AQ4=AQ4+1
else
set AP4[AR4]=i
set AR4=AR4+1
endif
endfunction
function TM9 takes nothing returns nothing
local integer i=XR7()
set LP4="TM9"
loop
if G[i]==false then
set G[i]=true
call TK9(i)
return
endif
endloop
endfunction
function TN9 takes integer i returns nothing
call E58("Ban"+I2S(GetPlayerId(GetOwningPlayer(GetSoldUnit()))),KC4[i])
call XH7(KC4[i])
if AI4==1 then
set AJ4[AM4]=i
set AM4=AM4+1
else
set AK4[AN4]=i
set AN4=AN4+1
endif
endfunction
function TO9 takes nothing returns nothing
call TN9(-1)
endfunction
function TP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p=null
set LP4="TP9"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call TK9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call R29(GetUnitTypeId(GetSoldUnit()))
if AS4==0 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
elseif AS4==1 then
if AI4==1 and AQ4==4 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==4 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==2 then
if AI4==1 and AQ4==5 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==5 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function TE9))
call SS9(5)
call MultiboardSetTitleText(AT4,GetObjectName(1848658742))
endif
else
if GetTriggerEvalCount(t)>50 then
if AF4[AI4]>0 then
set AF4[AI4]=AF4[AI4]-1
else
if AI4==1 then
call TM9()
else
call TM9()
endif
if AS4==0 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
elseif AS4==1 then
if AI4==1 and AQ4==4 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==4 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==2 then
if AI4==1 and AQ4==5 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==5 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function TE9))
call SS9(5)
call MultiboardSetTitleText(AT4,GetObjectName(1848658742))
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
endif
endif
else
if AI4==1 then
set AG4[1]=AG4[1]-1
else
set AG4[2]=AG4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function TQ9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p
set LP4="TQ9"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if AM4==(2+3)and AN4==(2+3)then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call RN7(t)
set AS4=0
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TP9))
call SS9(4)
call YM7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658995)+"|r")
call MultiboardSetTitleText(AT4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659000))
if AI4==1 then
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set B14=false
set A64=p
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call TN9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call S79(GetUnitTypeId(GetSoldUnit()))
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TQ9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
else
if GetTriggerEvalCount(t)>50 then
if AF4[AI4]>0 then
set AF4[AI4]=AF4[AI4]-1
else
call TO9()
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TQ9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
endif
else
if AI4==1 then
set AG4[1]=AG4[1]-1
else
set AG4[2]=AG4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function TR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local player p=null
set LP4="TR9"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call TK9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call R29(GetUnitTypeId(GetSoldUnit()))
if AS4==0 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
elseif AS4==1 then
if AI4==1 and AQ4==2 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==2 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==2 then
if AI4==1 and AQ4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==3 then
set AS4=AS4+1
call RN7(t)
if AH4==1 then
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=2
set p=Z7[1]
set AG4[AI4]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TQ9))
call SS9(3)
call YM7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(AT4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
set A64=p
set B14=true
endif
else
if GetTriggerEvalCount(t)>50 then
if AF4[AI4]>0 then
set AF4[AI4]=AF4[AI4]-1
else
if AI4==1 then
call TM9()
else
call TM9()
endif
if AS4==0 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
if AI4==1 then
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
elseif AS4==1 then
if AI4==1 and AQ4==2 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==2 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,500)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==2 then
if AI4==1 and AQ4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=2
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
elseif AI4==2 and AR4==3 then
set AS4=AS4+1
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
if p!=null then
set A64=p
endif
elseif AS4==3 then
set AS4=AS4+1
call RN7(t)
if AH4==1 then
set AI4=1
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=2
set p=Z7[1]
set AG4[AI4]=50
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TQ9))
call SS9(3)
call YM7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658996)+"|r")
call MultiboardSetTitleText(AT4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848658999))
set A64=p
set B14=true
endif
endif
else
if AI4==1 then
set AG4[1]=AG4[1]-1
else
set AG4[2]=AG4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function TS9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local trigger t2
local player p
set LP4="TS9"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL and IsUnitType(GetSoldUnit(),UNIT_TYPE_HERO)==false then
set t=null
return false
endif
if AM4==2 and AN4==2 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call RemoveUnit(GetSoldUnit())
endif
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TR9))
call SS9(2)
call YM7(bj_FORCE_ALL_PLAYERS,15.,"|c006699CC"+GetObjectName(1848658997)+"|r")
call MultiboardSetTitleText(AT4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659001))
if AI4==1 then
set AG4[AI4]=50
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AG4[AI4]=50
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
set B14=false
set t=null
set p=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SELL then
call TN9(GetUnitPointValue(GetSoldUnit()))
call RemoveUnit(GetSoldUnit())
call S79(GetUnitTypeId(GetSoldUnit()))
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TS9))
if AI4==1 then
set AI4=2
set AG4[AI4]=40
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=40
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
else
if GetTriggerEvalCount(t)>40 then
if AF4[AI4]>0 then
set AF4[AI4]=AF4[AI4]-1
else
call TO9()
call RN7(t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TS9))
if AI4==1 then
set AI4=2
set AG4[AI4]=40
set p=Z7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=1
set AG4[AI4]=40
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
set A64=p
endif
else
if AI4==1 then
set AG4[1]=AG4[1]-1
else
set AG4[2]=AG4[2]-1
endif
endif
endif
set t=null
set p=null
return false
endfunction
function TT9 takes nothing returns boolean
local trigger t=CreateTrigger()
local trigger t2
local player p
set LP4="TT9"
set AD4=true
call RN7(GetTriggeringTrigger())
if A94==false then
if AH4==1 then
call YM7(bj_FORCE_ALL_PLAYERS,15.,P[GetPlayerId(Y7[1])]+(KY4[GetPlayerId((Y7[1]))])+"|r "+GetObjectName(1848657217))
else
call YM7(bj_FORCE_ALL_PLAYERS,15.,P[GetPlayerId(Z7[1])]+(KY4[GetPlayerId((Z7[1]))])+"|r "+GetObjectName(1848657217))
endif
endif
if AH4==1 then
set AI4=1
set AG4[AI4]=40
set p=Y7[1]
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
else
set AI4=2
set p=Z7[1]
set AG4[AI4]=40
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,$FA)
call AU7(p,"Sound\\Interface\\Rescue.wav")
endif
call SS9(1)
call YM7(GetPlayersAll(),15.,"|c006699CC"+GetObjectName(1848658998)+"|r")
call MultiboardSetTitleText(AT4,GetObjectName(1848658742)+" - |c00ffffff"+GetObjectName(1848659009))
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TS9))
set AL4=true
set B14=true
set A64=p
set t2=CreateTrigger()
call TriggerRegisterTimerEvent(t2,1,true)
call TriggerAddCondition(t2,Condition(function S99))
set t2=null
set t=null
set p=null
return false
endfunction
function RC9 takes nothing returns nothing
local trigger t
local location TU9=GetRectCenter(pr)
local location TV9=GetRectCenter(qr)
local integer x=1
local player p
set LP4="RC9"
call DisableTrigger(QZ4)
loop
exitwhen x>5
if WP7(Y7[x])then
call CreateUnitAtLoc(Y7[x],1848651843,TV9,bj_UNIT_FACING)
endif
if WP7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,TU9,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(TU9)
call RemoveLocation(TV9)
set SM4=true
set F9=false
set E9=false
set N_4=false
call SuspendTimeOfDay(true)
call DisableTrigger(M14)
call DisableTrigger(M64)
if AY4==false then
call SE9()
endif
set A84[GetPlayerId(Y7[1])]=GetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Y7[2])]=GetPlayerState(Y7[2],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Y7[3])]=GetPlayerState(Y7[3],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Y7[4])]=GetPlayerState(Y7[4],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Y7[5])]=GetPlayerState(Y7[5],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Z7[1])]=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Z7[2])]=GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Z7[3])]=GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Z7[4])]=GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)
set A84[GetPlayerId(Z7[5])]=GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Y7[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Y7[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Y7[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Y7[5],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD,0)
call SetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD,0)
set AF4[1]=90
set AF4[2]=90
set AH4=GetRandomInt(1,2)
set A94=false
set AI4=AH4
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$F-TimerGetElapsed(V),false)
call TriggerAddCondition(t,Condition(function TT9))
call S59()
call YM7(GetPlayersAll(),4.,GetObjectName(1848657235))
call YM7(GetPlayersAll(),4.,GetObjectName(1848657234))
set t=null
set TU9=null
set TV9=null
set p=null
endfunction
function TW9 takes player p,integer z8 returns nothing
local integer i=1
set LP4="Cgv"
loop
exitwhen i>5
if p!=Y7[i]then
call SetPlayerTechMaxAllowed(Y7[i],z8,0)
endif
if p!=Z7[i]then
call SetPlayerTechMaxAllowed(Z7[i],z8,0)
endif
set i=i+1
endloop
endfunction
function TX9 takes integer TY9 returns integer
local integer TZ9
set LP4="CGv"
if TY9==1 then
set TZ9=GetUnitPointValueByType(K54[GetRandomInt(1,K24)])
elseif TY9==2 then
set TZ9=GetUnitPointValueByType(K_4[GetRandomInt(1,M44)])
elseif TY9==3 then
set TZ9=GetUnitPointValueByType(M74[GetRandomInt(1,M84)])
endif
return TZ9
endfunction
function TA9 takes integer TB9,integer TC9,integer TY9 returns integer
local integer TZ9
set LP4="Cjv"
set TZ9=TX9(TY9)
if W8 and TB9!=TZ9 and TC9!=TZ9 then
return TZ9
endif
loop
exitwhen G[TZ9]==false and TB9!=TZ9 and TC9!=TZ9
set TZ9=TX9(TY9)
endloop
set G[TZ9]=true
return TZ9
endfunction
function RD9 takes nothing returns nothing
local player p
local integer i=1
local integer TB9
local integer TC9
local integer T39
local trigger t
local integer RP7
set LP4="RD9"
set UT=true
set Q94=120
set E9=false
set F9=false
call PauseUnit(MO4,true)
call PauseUnit(MP4,true)
call PauseUnit(MQ4,true)
call PauseUnit(MR4,true)
call PauseUnit(MS4,true)
call PauseUnit(MT4,true)
call PauseUnit(MU4,true)
call PauseUnit(MV4,true)
call PauseUnit(MW4,true)
call PauseUnit(MX4,true)
call PauseUnit(MY4,true)
call PauseUnit(MZ4,true)
call DisableTrigger(QZ4)
loop
exitwhen i>5
set p=Y7[i]
set TB9=0
set TC9=0
set T39=0
if WR7(p)then
call UnitAddAbility(KT4[GetPlayerId(p)],1093743686)
call UnitAddAbility(KT4[GetPlayerId(p)],1093743685)
call UnitAddAbility(KT4[GetPlayerId(p)],1093743688)
set TB9=TA9(TB9,TC9,1)
set TC9=TA9(TB9,TC9,2)
set T39=TA9(TB9,TC9,3)
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[TB9],1,1)
call TW9(p,KC4[TB9])
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[TC9],1,1)
call TW9(p,KC4[TC9])
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[T39],1,1)
call TW9(p,KC4[T39])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(KT4[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(L9),GetRectCenterY(L9),0)
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F,"|cff99ccff"+(GetObjectName((1848657206)))+"|r")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
endif
set p=Z7[i]
set TB9=0
set TC9=0
set T39=0
if WR7(p)then
call UnitAddAbility(KT4[GetPlayerId(p)],1093743686)
call UnitAddAbility(KT4[GetPlayerId(p)],1093743685)
call UnitAddAbility(KT4[GetPlayerId(p)],1093743688)
set TB9=TA9(TB9,TC9,1)
set TC9=TA9(TB9,TC9,2)
set T39=TA9(TB9,TC9,3)
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[TB9],1,1)
call TW9(p,KC4[TB9])
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[TC9],1,1)
call TW9(p,KC4[TC9])
call AddUnitToStock(KT4[GetPlayerId(p)],KC4[T39],1,1)
call TW9(p,KC4[T39])
call ClearSelectionForPlayer(p)
call SelectUnitAddForPlayer(KT4[GetPlayerId(p)],p)
call PanCameraToTimedForPlayer(p,GetRectCenterX(C9),GetRectCenterY(C9),0)
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
call DisplayTimedTextToPlayer(p,0,D9,$F,"|cff99ccff"+(GetObjectName((1848657206)))+"|r")
call DisplayTimedTextToPlayer(p,0,D9,$F," ")
endif
set i=i+1
endloop
set p=null
set t=null
endfunction
function T69 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X18=R47(RP7,"Index")
local player p
local integer XS7
local location FU8=GetRectCenter(L9)
local location FV8=GetRectCenter(C9)
set LP4="T69"
if X18<6 then
set p=Y7[X18]
elseif X18<$B then
set p=Z7[X18-5]
endif
if X18>$A then
call Q47(RP7)
call RN7(t)
if L==false and RY4==false then
set F9=true
endif
elseif X18<6 then
call Q97(RP7,"Index",X18+1)
set G7[GetPlayerId(p)]=null
if WR7(p)then
loop
exitwhen G7[GetPlayerId(p)]!=null
if GetPlayerController(p)==MAP_CONTROL_USER and RY4 then
set XS7=500
elseif RY4 then
set XS7=XQ7()
else
set XS7=XR7()
endif
if G[XS7]==false then
if not W8 and not RY4 then
set G[XS7]=true
endif
set G7[GetPlayerId(p)]=CreateUnitAtLoc(p,KC4[XS7],FU8,bj_UNIT_FACING)
endif
endloop
endif
elseif X18<$B then
call Q97(RP7,"Index",X18+1)
set G7[GetPlayerId(p)]=null
if WR7(p)then
loop
exitwhen G7[GetPlayerId(p)]!=null
if p==Le and RY4 then
set XS7=500
elseif RY4 then
set XS7=XQ7()
else
set XS7=XR7()
endif
if G[XS7]==false then
if not W8 then
set G[XS7]=true
endif
set G7[GetPlayerId(p)]=CreateUnitAtLoc(p,KC4[XS7],FV8,bj_UNIT_FACING)
endif
endloop
endif
endif
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set FU8=null
set FV8=null
set p=null
set t=null
return false
endfunction
function R79 takes nothing returns nothing
local location FU8=GetRectCenter(L9)
local location FV8=GetRectCenter(C9)
local location TL9=GetRectCenter(L9)
local location T19=GetRectCenter(C9)
local integer T8=1
local integer U8=5
local integer XS7
local trigger t
set LP4="R79"
set D4=true
set E9=false
if not W8 then
call XJ7()
endif
call DisableTrigger(QZ4)
set W4=400
call PanCameraToTimedLocForPlayer(Y7[1],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[2],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[3],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[4],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[5],TL9,0)
call PanCameraToTimedLocForPlayer(Z7[1],T19,0)
call PanCameraToTimedLocForPlayer(Z7[2],T19,0)
call PanCameraToTimedLocForPlayer(Z7[3],T19,0)
call PanCameraToTimedLocForPlayer(Z7[4],T19,0)
call PanCameraToTimedLocForPlayer(Z7[5],T19,0)
if HC4 then
loop
set XS7=XR7()
exitwhen G[XS7]==false
endloop
if WM7(Le)then
set G7[GetPlayerId(Le)]=CreateUnit(Le,KC4[XS7],GetLocationX(FU8),GetLocationY(FU8),270)
else
set G7[GetPlayerId(Le)]=CreateUnit(Le,KC4[XS7],GetLocationX(FV8),GetLocationY(FV8),270)
endif
call RemoveLocation(FU8)
call RemoveLocation(FV8)
call RemoveLocation(TL9)
call RemoveLocation(T19)
set FU8=null
set FV8=null
set TL9=null
set T19=null
set t=null
return
endif
set F9=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function T69))
call Q97(GetHandleId(t),"Index",1)
call RemoveLocation(FU8)
call RemoveLocation(FV8)
call RemoveLocation(TL9)
call RemoveLocation(T19)
set FU8=null
set FV8=null
set TL9=null
set T19=null
set t=null
endfunction
function Q2 takes nothing returns nothing
call A57(GetEnumUnit())
endfunction
function Q3 takes unit Z47 returns nothing
local integer Q4=GetPlayerId(GetOwningPlayer(Z47))
set LP4="Q3"
set se[Q4]=UnitItemInSlot(Z47,0)
set Se[Q4]=UnitItemInSlot(Z47,1)
set We[Q4]=UnitItemInSlot(Z47,2)
set ze[Q4]=UnitItemInSlot(Z47,3)
set Ze[Q4]=UnitItemInSlot(Z47,4)
set vx[Q4]=UnitItemInSlot(Z47,5)
endfunction
function Q5 takes player h5,player h6 returns integer
local unit Q6=G7[GetPlayerId(h5)]
local unit Q7=G7[GetPlayerId(h6)]
set LP4="Q5"
call UnitRemoveBuffs(Q6,true,true)
call UnitRemoveBuffs(Q7,true,true)
if Q6==null and Q7==null then
call YM7(bj_FORCE_ALL_PLAYERS,$F,P[GetPlayerId(Y7[0])]+YJ7(h5)+" and "+YJ7(h6)+" did not pick a hero so they have no hero to be assigned.|r")
elseif GetRandomInt(1,2)==1 then
if(Q6!=null)then
return GetUnitTypeId(Q6)
else
return GetUnitTypeId(Q7)
endif
else
if(Q7!=null)then
return GetUnitTypeId(Q7)
else
return GetUnitTypeId(Q6)
endif
endif
call YM7(bj_FORCE_ALL_PLAYERS,$F,P[GetPlayerId(Y7[0])]+YJ7(h5)+" and "+YJ7(h6)+" have not picked a hero. They will be given a random hero!")
return XR7()
endfunction
function Q8 takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848651828)then
call RemoveUnit(GetEnumUnit())
endif
if(GetUnitTypeId(GetEnumUnit())==1865429043)then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function Q9 takes nothing returns boolean
local integer T8
local group ra=ZI7()
local unit rA
local location TL9=GetRectCenter(L9)
local location T19=GetRectCenter(C9)
local integer rb=P8(W7)
local player array rB
local player array rc
local integer x
local integer y
local real rC
local real rd
local real rD
local integer re
local group FP8=JG7(GetWorldBounds(),null)
set LP4="Q9"
call ForGroup(FP8,function Q8)
call ZH7(FP8)
set T8=1
set x=1
set y=1
loop
exitwhen T8>5
if(WR7(Y7[T8]))then
call Q3(G7[GetPlayerId(Y7[T8])])
call GroupAddUnit(ra,G7[GetPlayerId(Y7[T8])])
set rB[x]=Y7[T8]
set x=x+1
endif
if(WR7(Z7[T8]))then
call Q3(G7[GetPlayerId(Z7[T8])])
call GroupAddUnit(ra,G7[GetPlayerId(Z7[T8])])
set rc[y]=Z7[T8]
set y=y+1
endif
set T8=T8+1
endloop
set x=1
loop
exitwhen x>rb
set re=Q5(rB[x],rc[x])
if(G7[GetPlayerId(rB[x])]==null)then
set rC=GetLocationX(TL9)+GetRandomReal(1,40)
set rd=GetLocationY(TL9)+GetRandomReal(1,40)
set rD=270
else
set rC=GetUnitX(G7[GetPlayerId(rB[x])])
set rd=GetUnitY(G7[GetPlayerId(rB[x])])
set rD=GetUnitFacing(G7[GetPlayerId(rB[x])])
call SetUnitPathing(G7[GetPlayerId(rB[x])],false)
endif
set G7[GetPlayerId(rB[x])]=CreateUnit(rB[x],re,rC,rd,rD)
call SetUnitPathing(G7[GetPlayerId(rB[x])],false)
call SetUnitPosition(G7[GetPlayerId(rB[x])],rC,rd)
call UnitAddItem(G7[GetPlayerId(rB[x])],se[GetPlayerId(rB[x])])
call UnitAddItem(G7[GetPlayerId(rB[x])],Se[GetPlayerId(rB[x])])
call UnitAddItem(G7[GetPlayerId(rB[x])],We[GetPlayerId(rB[x])])
call UnitAddItem(G7[GetPlayerId(rB[x])],ze[GetPlayerId(rB[x])])
call UnitAddItem(G7[GetPlayerId(rB[x])],Ze[GetPlayerId(rB[x])])
call UnitAddItem(G7[GetPlayerId(rB[x])],vx[GetPlayerId(rB[x])])
call ClearSelectionForPlayer(rB[x])
call SelectUnitAddForPlayer(G7[GetPlayerId(rB[x])],rB[x])
call PanCameraToTimedForPlayer(rB[x],rC,rd,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",rC,rd))
if(G7[GetPlayerId(rc[x])]==null)then
set rC=GetLocationX(T19)
set rd=GetLocationY(T19)
set rD=270
else
set rC=GetUnitX(G7[GetPlayerId(rc[x])])
set rd=GetUnitY(G7[GetPlayerId(rc[x])])
set rD=GetUnitFacing(G7[GetPlayerId(rc[x])])
call SetUnitPathing(G7[GetPlayerId(rc[x])],false)
endif
set G7[GetPlayerId(rc[x])]=CreateUnit(rc[x],re,rC,rd,rD)
call SetUnitPathing(G7[GetPlayerId(rc[x])],false)
call SetUnitPosition(G7[GetPlayerId(rc[x])],rC,rd)
call UnitAddItem(G7[GetPlayerId(rc[x])],se[GetPlayerId(rc[x])])
call UnitAddItem(G7[GetPlayerId(rc[x])],Se[GetPlayerId(rc[x])])
call UnitAddItem(G7[GetPlayerId(rc[x])],We[GetPlayerId(rc[x])])
call UnitAddItem(G7[GetPlayerId(rc[x])],ze[GetPlayerId(rc[x])])
call UnitAddItem(G7[GetPlayerId(rc[x])],Ze[GetPlayerId(rc[x])])
call UnitAddItem(G7[GetPlayerId(rc[x])],vx[GetPlayerId(rc[x])])
call ClearSelectionForPlayer(rc[x])
call SelectUnitAddForPlayer(G7[GetPlayerId(rc[x])],rc[x])
call PanCameraToTimedForPlayer(rc[x],rC,rd,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",rC,rd))
set x=x+1
endloop
call ForGroup(ra,function Q2)
call ZH7(ra)
set x=1
loop
exitwhen x>rb
call SetUnitPathing(G7[GetPlayerId(rB[x])],true)
call SetUnitPathing(G7[GetPlayerId(rc[x])],true)
set x=x+1
endloop
call RemoveLocation(TL9)
call RemoveLocation(T19)
set ra=null
set rA=null
set TL9=null
set T19=null
set FP8=null
return false
endfunction
function rE takes nothing returns boolean
set AJ=true
return false
endfunction
function rf takes nothing returns boolean
set F9=false
set E9=false
call XJ7()
return false
endfunction
function Q69 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q69"
call YM7(C8,$A,"Your hero might change at the 60 second mark.")
call YM7(C8,$A,"It is recommended to not purchase items until then.")
set V8=true
call XH7(1211117641)
call TriggerRegisterTimerEvent(t,60-TimerGetElapsed(V),false)
call TriggerAddCondition(t,Condition(function Q9))
set t=CreateTrigger()
call TriggerAddCondition(t,Condition(function rf))
call TriggerRegisterTimerEvent(t,57-TimerGetElapsed(V),false)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,55+60-TimerGetElapsed(V),false)
call TriggerAddCondition(t,Condition(function rE))
set t=null
endfunction
function R99 takes nothing returns nothing
local location FU8=GetRectCenter(GD)
local location FV8=GetRectCenter(FD)
local location TL9=GetRectCenter(L9)
local location T19=GetRectCenter(C9)
local integer T8
local integer U8
local integer XS7
set LP4="R99"
if not W8 then
call XJ7()
endif
call DisableTrigger(QZ4)
set E4=true
set W4=400
set E9=false
call PanCameraToTimedLocForPlayer(Y7[1],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[2],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[3],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[4],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[5],TL9,0)
call PanCameraToTimedLocForPlayer(Z7[1],T19,0)
call PanCameraToTimedLocForPlayer(Z7[2],T19,0)
call PanCameraToTimedLocForPlayer(Z7[3],T19,0)
call PanCameraToTimedLocForPlayer(Z7[4],T19,0)
call PanCameraToTimedLocForPlayer(Z7[5],T19,0)
if HC4 then
if WM7(Le)then
loop
set XS7=GetRandomInt(K64,KL4)
exitwhen G[XS7]==false
endloop
set G7[GetPlayerId(Le)]=CreateUnit(Le,KC4[XS7],GetLocationX(FU8),GetLocationY(FU8),270)
else
loop
set XS7=GetRandomInt(K14,K04)
exitwhen G[XS7]==false
endloop
set G7[GetPlayerId(Le)]=CreateUnit(Le,KC4[XS7],GetLocationX(FV8),GetLocationY(FV8),270)
endif
call RemoveLocation(FU8)
call RemoveLocation(FV8)
call RemoveLocation(TL9)
call RemoveLocation(T19)
return
endif
set F9=false
set T8=1
set U8=5
loop
exitwhen T8>U8
set G7[GetPlayerId(Y7[T8])]=null
if(WR7(Y7[T8]))then
loop
set XS7=GetRandomInt(K64,KL4)
if(G[XS7]==false)then
if not W8 then
set G[XS7]=true
endif
set G7[GetPlayerId(Y7[T8])]=CreateUnitAtLoc(Y7[T8],KC4[XS7],FU8,bj_UNIT_FACING)
endif
exitwhen(G7[GetPlayerId(Y7[T8])]!=null)
endloop
endif
set T8=T8+1
endloop
set T8=1
set U8=5
loop
exitwhen T8>U8
set G7[GetPlayerId(Z7[T8])]=null
if(WR7(Z7[T8]))then
loop
set XS7=GetRandomInt(K14,K04)
if(G[XS7]==false)then
if not W8 then
set G[XS7]=true
endif
set G7[GetPlayerId(Z7[T8])]=CreateUnitAtLoc(Z7[T8],KC4[XS7],FV8,bj_UNIT_FACING)
endif
exitwhen(G7[GetPlayerId(Z7[T8])]!=null)
endloop
endif
set T8=T8+1
endloop
set F9=true
call RemoveLocation(FU8)
call RemoveLocation(FV8)
call RemoveLocation(TL9)
call RemoveLocation(T19)
set FU8=null
set FV8=null
set TL9=null
set T19=null
endfunction
function rF takes nothing returns nothing
set P84=true
call YM7(bj_FORCE_ALL_PLAYERS,$A,"No Deaths has been enabled. You will have no respawn time.")
call DisableTrigger(GetTriggeringTrigger())
endfunction
function rg takes nothing returns nothing
local integer rG=S2I(SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString())))
set LP4="rg"
if rG>P94 then
call AV7(Le,"Too many lives")
elseif rG<$A then
call AV7(Le,"Too few lives")
else
set P94=rG
call YM7(bj_FORCE_ALL_PLAYERS,$A,"Each team has "+I2S(P94)+" lives before they lose the game.")
call DisableTrigger(GetTriggeringTrigger())
endif
endfunction
function rh takes nothing returns nothing
call DisableTrigger(Q67(GetHandleId(GetTriggeringTrigger()),"nd"))
call DisableTrigger(Q67(GetHandleId(GetTriggeringTrigger()),"lives"))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function T09 takes nothing returns nothing
local trigger ri=CreateTrigger()
local trigger rI=CreateTrigger()
local trigger nd=CreateTrigger()
set LP4="T09"
set P94=A_7(KL4,K04-K14+1)
call YM7(bj_FORCE_ALL_PLAYERS,10.," ")
call YM7(bj_FORCE_ALL_PLAYERS,10.,"Extra commands: -nd and -lives xx can be entered in the following 15 seconds. ")
call YM7(bj_FORCE_ALL_PLAYERS,10.,"Current DM lives are "+I2S(P94))
call TriggerRegisterTimerEvent(ri,15.,false)
call TriggerAddAction(ri,function rh)
call QI7(GetHandleId(ri),"nd",nd)
call QI7(GetHandleId(ri),"lives",rI)
call TriggerRegisterPlayerChatEvent(nd,Le,"-nd",true)
call TriggerAddAction(nd,function rF)
call TriggerRegisterPlayerChatEvent(rI,Le,"-lives",false)
call TriggerAddAction(rI,function rg)
endfunction
function T59 takes nothing returns nothing
local integer rJ=R47(GetHandleId(GetTriggeringTrigger()),"PlayerId")
local integer T8
local integer U8
local integer XS7
local integer QM
local location FU8=GetRectCenter(pr)
local location FV8=GetRectCenter(qr)
set LP4="T59"
if L8 then
return
endif
if WM7(Player(rJ))then
set T8=K64
set U8=KL4
set QM=0
else
set T8=K14
set U8=K04
set QM=1
endif
if O4 then
set T8=K64
set U8=K04
if WM7(Player(rJ))then
call CreateUnitAtLoc(Player(rJ),1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(rJ),1848651843,FV8,bj_UNIT_FACING)
else
call CreateUnitAtLoc(Player(rJ),1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Player(rJ),1848651843,FV8,bj_UNIT_FACING)
endif
endif
if((not D4)and(GetPlayerController(Player(rJ))==MAP_CONTROL_USER))then
loop
exitwhen T8>U8
if G[T8]==false then
call SetPlayerTechMaxAllowed(Player(rJ),KC4[T8],1)
endif
set T8=T8+1
endloop
if(GetPlayerState(Player(rJ),PLAYER_STATE_RESOURCE_GOLD)<$FA)then
call SetPlayerState(Player(rJ),PLAYER_STATE_RESOURCE_GOLD,$FA)
endif
elseif(P7[QM]<P94)then
set G7[rJ]=null
if WR7(Player(rJ))then
loop
if(D4)then
set XS7=XR7()
elseif RY4 then
set XS7=XQ7()
elseif(((not O4)and(WM7(Player(rJ))))or((O4)and(GetRandomInt(1,2)==1)))then
set XS7=GetRandomInt(K64,KL4)
else
set XS7=GetRandomInt(K14,K04)
endif
if G[XS7]==false then
if RY4==false then
set G[XS7]=true
endif
if WM7(Player(rJ))then
set G7[rJ]=CreateUnitAtLoc(Player(rJ),KC4[XS7],FU8,bj_UNIT_FACING)
else
set G7[rJ]=CreateUnitAtLoc(Player(rJ),KC4[XS7],FV8,bj_UNIT_FACING)
endif
endif
exitwhen G7[rJ]!=null
endloop
endif
endif
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set FU8=null
set FV8=null
if not D4 then
endif
endfunction
function Q39 takes nothing returns nothing
local location Mk
local real CPv
local trigger t
local integer rk
local integer x
set LP4="Q39"
set L=true
call XH7(1211117641)
call XH7(1311781207)
set x=1
loop
exitwhen x>5
set rk=GetPlayerId(Y7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,T[rk])
call TriggerAddAction(t,function T59)
call Q97(GetHandleId(t),"PlayerId",rk)
set rk=GetPlayerId(Z7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,T[rk])
call TriggerAddAction(t,function T59)
call Q97(GetHandleId(t),"PlayerId",rk)
set x=x+1
endloop
call UnitRemoveAbility(KI4,1096906593)
call UnitRemoveAbility(KJ4,1096906593)
call UnitRemoveAbility(KK4,1096906593)
call UnitRemoveAbility(KM4,1096906593)
call UnitRemoveAbility(KN4,1096906593)
call UnitRemoveAbility(KO4,1096906593)
call UnitRemoveAbility(KP4,1096906593)
call UnitRemoveAbility(KQ4,1096906593)
call UnitRemoveAbility(KR4,1096906593)
call UnitRemoveAbility(KS4,1096906593)
call ExecuteFunc("T09")
endfunction
function RZ9 takes nothing returns nothing
local location P0=GetRectCenter(GD)
local location P3=GetRectCenter(FD)
local location Qn=GetRectCenter(L9)
local location QN=GetRectCenter(C9)
local integer hK=1
local integer hl=5
local trigger t
local integer rk
local integer x
set LP4="RZ9"
set RY4=true
set P94=$98967F
call XH7(1211117641)
call XH7(1311781207)
call XH7(1211117653)
call XH7(1315334514)
set x=K64
loop
exitwhen x>K04
set A0[x]=false
set x=x+1
endloop
set x=1
loop
exitwhen x>5
if GetPlayerController(Y7[x])==MAP_CONTROL_COMPUTER then
set rk=GetPlayerId(Y7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,T[rk])
call TriggerAddAction(t,function T59)
call Q97(GetHandleId(t),"PlayerId",rk)
endif
if GetPlayerController(Z7[x])==MAP_CONTROL_COMPUTER then
set rk=GetPlayerId(Z7[x])
set t=CreateTrigger()
call TriggerRegisterTimerExpireEvent(t,T[rk])
call TriggerAddAction(t,function T59)
call Q97(GetHandleId(t),"PlayerId",rk)
endif
set x=x+1
endloop
call DisableTrigger(QZ4)
set E9=false
call XJ7()
set W4=400
set F9=false
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function T69))
call Q97(GetHandleId(t),"Index",1)
call RemoveLocation(P0)
call RemoveLocation(P3)
call RemoveLocation(Qn)
call RemoveLocation(QN)
set P0=null
set P3=null
set Qn=null
set QN=null
set t=null
endfunction
function RE9 takes nothing returns nothing
local integer rK=GetRandomInt(1,4)
set LP4="RE9"
set Ox=true
if(rK==1)then
call YM7(bj_FORCE_ALL_PLAYERS,20.,"AP has been randomly selected as your mode!")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("R89")
elseif(rK==2)then
call YM7(bj_FORCE_ALL_PLAYERS,20.,"AR has been randomly selected as your mode!")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("R79")
elseif(rK==3)then
call YM7(bj_FORCE_ALL_PLAYERS,20.,"TR has been randomly selected as your mode!")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
call ExecuteFunc("R99")
elseif(rK==4)then
call YM7(bj_FORCE_ALL_PLAYERS,20.,"Normal has been randomly selected as your mode!")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
endif
endfunction
function R49 takes nothing returns nothing
set W8=true
call XH7(1211117641)
endfunction
function QB9 takes nothing returns nothing
local integer FT8=P8(W7)
local integer FS8=P8(X7)
local integer D5=FT8+FS8
local integer T8
local integer T29
local integer x
local integer y
local integer z
local player array T_9
local player array U49
local integer w
local integer U79
local integer U89
local location TL9=GetRectCenter(L9)
local location T19=GetRectCenter(C9)
local location FU8=GetRectCenter(pr)
local location FV8=GetRectCenter(qr)
set LP4="QB9"
set ge=true
call S08(Y7[1])
call S08(Y7[2])
call S08(Y7[3])
call S08(Y7[4])
call S08(Y7[5])
call S08(Z7[1])
call S08(Z7[2])
call S08(Z7[3])
call S08(Z7[4])
call S08(Z7[5])
set x=1
loop
exitwhen x>5
if WR7(Y7[x])then
call CreateUnitAtLoc(Y7[x],1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Y7[x],1848651843,FV8,bj_UNIT_FACING)
endif
if WR7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Z7[x],1848651843,FV8,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set U79=GetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[5],PLAYER_STATE_RESOURCE_GOLD)
set U89=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
set T_9[1]=null
set T_9[2]=null
set T_9[3]=null
set T_9[4]=null
set T_9[5]=null
set T_9[6]=null
set T_9[7]=null
set T_9[8]=null
set T_9[9]=null
set T_9[$A]=null
set z=1
set w=1
set T8=1
loop
exitwhen T8>5
if(WR7(Y7[T8]))then
set T_9[w]=Y7[T8]
set w=w+1
else
set U49[z]=Y7[T8]
set z=z+1
endif
set T8=T8+1
endloop
set T8=1
loop
exitwhen T8>5
if(WR7(Z7[T8]))then
set T_9[w]=Z7[T8]
set w=w+1
else
set U49[z]=Z7[T8]
set z=z+1
endif
set T8=T8+1
endloop
set Y7[1]=null
set Y7[2]=null
set Y7[3]=null
set Y7[4]=null
set Y7[5]=null
set Z7[1]=null
set Z7[2]=null
set Z7[3]=null
set Z7[4]=null
set Z7[5]=null
set T8=1
loop
exitwhen T8>(D5/ 2)
set T29=GetRandomInt(1,D5)
if(T_9[T29]!=null)then
set Y7[T8]=T_9[T29]
set T_9[T29]=null
set T8=T8+1
endif
endloop
set x=T8
set T8=1
loop
exitwhen T8>D5-x+1
set T29=GetRandomInt(1,D5)
if(T_9[T29]!=null)then
set Z7[T8]=T_9[T29]
set T_9[T29]=null
set T8=T8+1
endif
endloop
set z=T8
set T8=x
set y=1
loop
exitwhen T8>5
set Y7[T8]=U49[y]
set y=y+1
set T8=T8+1
endloop
set T8=z
loop
exitwhen T8>5
set Z7[T8]=U49[y]
set y=y+1
set T8=T8+1
endloop
set T8=0
loop
exitwhen T8>5
set T8=T8+1
endloop
call SetPlayerTeam(Y7[0],0)
call SetPlayerTeam(Y7[1],0)
call SetPlayerTeam(Y7[2],0)
call SetPlayerTeam(Y7[3],0)
call SetPlayerTeam(Y7[4],0)
call SetPlayerTeam(Y7[5],0)
call SetPlayerTeam(Z7[0],1)
call SetPlayerTeam(Z7[1],1)
call SetPlayerTeam(Z7[2],1)
call SetPlayerTeam(Z7[3],1)
call SetPlayerTeam(Z7[4],1)
call SetPlayerTeam(Z7[5],1)
call EB8()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(Y7[x],Y7[y],3)
call SetPlayerAllianceStateBJ(Z7[x],Z7[y],3)
call SetPlayerAllianceStateBJ(Y7[x],Z7[y],0)
call SetPlayerAllianceStateBJ(Z7[x],Y7[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(W7)
call ForceClear(X7)
call ForceAddPlayer(W7,Y7[0])
call ForceAddPlayer(W7,Y7[1])
call ForceAddPlayer(W7,Y7[2])
call ForceAddPlayer(W7,Y7[3])
call ForceAddPlayer(W7,Y7[4])
call ForceAddPlayer(W7,Y7[5])
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ExecuteFunc("FM8")
call TL8()
set FT8=P8(W7)
set FS8=P8(X7)
set T8=1
loop
exitwhen T8>5
if(WR7(Y7[T8]))then
call SetPlayerStateBJ(Y7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FT8))
call SetPlayerStateBJ(Y7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(WR7(Z7[T8]))then
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FS8))
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
if R8 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call EA8()
set TL9=null
set T19=null
set FU8=null
set FV8=null
endfunction
function QC9 takes nothing returns nothing
local integer FT8=P8(W7)
local integer FS8=P8(X7)
local integer D5=FT8+FS8
local integer T8
local integer T29
local integer x
local integer y
local integer z
local player array T_9
local player array U49
local integer w
local integer U79
local integer U89
local location TL9
local location T19
local location FU8
local location FV8
local integer U99
set LP4="QC9"
set U99=GetRandomInt(1,2)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,(GetObjectName((1848657753))))
if U99==1 then
return
endif
set jj=true
set TL9=GetRectCenter(L9)
set T19=GetRectCenter(C9)
set FU8=GetRectCenter(pr)
set FV8=GetRectCenter(qr)
call S08(Y7[1])
call S08(Y7[2])
call S08(Y7[3])
call S08(Y7[4])
call S08(Y7[5])
call S08(Z7[1])
call S08(Z7[2])
call S08(Z7[3])
call S08(Z7[4])
call S08(Z7[5])
set x=1
loop
exitwhen x>5
if WR7(Y7[x])then
call CreateUnitAtLoc(Y7[x],1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Y7[x],1848651843,FV8,bj_UNIT_FACING)
endif
if WR7(Z7[x])then
call CreateUnitAtLoc(Z7[x],1848651843,FU8,bj_UNIT_FACING)
call CreateUnitAtLoc(Z7[x],1848651843,FV8,bj_UNIT_FACING)
endif
set x=x+1
endloop
call RemoveLocation(FU8)
call RemoveLocation(FV8)
set U79=GetPlayerState(Y7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Y7[5],PLAYER_STATE_RESOURCE_GOLD)
set U89=GetPlayerState(Z7[1],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[2],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[3],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[4],PLAYER_STATE_RESOURCE_GOLD)+GetPlayerState(Z7[5],PLAYER_STATE_RESOURCE_GOLD)
set T_9[1]=Y7[1]
set T_9[2]=Y7[2]
set T_9[3]=Y7[3]
set T_9[4]=Y7[4]
set T_9[5]=Y7[5]
set T_9[6]=Z7[1]
set T_9[7]=Z7[2]
set T_9[8]=Z7[3]
set T_9[9]=Z7[4]
set T_9[$A]=Z7[5]
set Y7[1]=T_9[6]
set Y7[2]=T_9[7]
set Y7[3]=T_9[8]
set Y7[4]=T_9[9]
set Y7[5]=T_9[$A]
set Z7[1]=T_9[1]
set Z7[2]=T_9[2]
set Z7[3]=T_9[3]
set Z7[4]=T_9[4]
set Z7[5]=T_9[5]
call SetPlayerTeam(Y7[0],0)
call SetPlayerTeam(Y7[1],0)
call SetPlayerTeam(Y7[2],0)
call SetPlayerTeam(Y7[3],0)
call SetPlayerTeam(Y7[4],0)
call SetPlayerTeam(Y7[5],0)
call SetPlayerTeam(Z7[0],1)
call SetPlayerTeam(Z7[1],1)
call SetPlayerTeam(Z7[2],1)
call SetPlayerTeam(Z7[3],1)
call SetPlayerTeam(Z7[4],1)
call SetPlayerTeam(Z7[5],1)
call EB8()
set x=0
set y=0
loop
exitwhen x>5
loop
exitwhen y>5
call SetPlayerAllianceStateBJ(Y7[x],Y7[y],3)
call SetPlayerAllianceStateBJ(Z7[x],Z7[y],3)
call SetPlayerAllianceStateBJ(Y7[x],Z7[y],0)
call SetPlayerAllianceStateBJ(Z7[x],Y7[y],0)
set y=y+1
endloop
set y=0
set x=x+1
endloop
call ForceClear(W7)
call ForceClear(X7)
call ForceAddPlayer(W7,Y7[0])
call ForceAddPlayer(W7,Y7[1])
call ForceAddPlayer(W7,Y7[2])
call ForceAddPlayer(W7,Y7[3])
call ForceAddPlayer(W7,Y7[4])
call ForceAddPlayer(W7,Y7[5])
call ForceAddPlayer(X7,Z7[0])
call ForceAddPlayer(X7,Z7[1])
call ForceAddPlayer(X7,Z7[2])
call ForceAddPlayer(X7,Z7[3])
call ForceAddPlayer(X7,Z7[4])
call ForceAddPlayer(X7,Z7[5])
call ExecuteFunc("FM8")
set FT8=P8(W7)
set FS8=P8(X7)
set T8=1
loop
exitwhen T8>5
if(WR7(Y7[T8]))then
call SetPlayerStateBJ(Y7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FT8))
call SetPlayerStateBJ(Y7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
if(WR7(Z7[T8]))then
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_GOLD,(4265/ FS8))
call SetPlayerStateBJ(Z7[T8],PLAYER_STATE_RESOURCE_LUMBER,0)
endif
set T8=T8+1
endloop
call PanCameraToTimedLocForPlayer(Y7[1],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[2],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[3],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[4],TL9,0)
call PanCameraToTimedLocForPlayer(Y7[5],TL9,0)
call PanCameraToTimedLocForPlayer(Z7[1],T19,0)
call PanCameraToTimedLocForPlayer(Z7[2],T19,0)
call PanCameraToTimedLocForPlayer(Z7[3],T19,0)
call PanCameraToTimedLocForPlayer(Z7[4],T19,0)
call PanCameraToTimedLocForPlayer(Z7[5],T19,0)
call DestroyFogModifier(CreateFogModifierRectBJ(true,Y7[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Y7[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Y7[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Y7[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Y7[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[1],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[2],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[3],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[4],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
call DestroyFogModifier(CreateFogModifierRectBJ(true,Z7[5],FOG_OF_WAR_MASKED,bj_mapInitialPlayableArea))
if R8 then
set x=0
loop
exitwhen x>5
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(0),true)
call SetPlayerAlliance(Player(0),Y7[x],ConvertAllianceType(4),true)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(0),false)
call SetPlayerAlliance(Player(0),Z7[x],ConvertAllianceType(4),false)
set x=x+1
endloop
endif
call EA8()
call TL8()
set TL9=null
set T19=null
set FU8=null
set FV8=null
endfunction
function rN takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer Hm=R47(RP7,"HeroType")
local player j8
local integer x=1
set LP4="rN"
loop
exitwhen x>5
set j8=Y7[x]
if WR7(j8)and j8!=Le then
set G7[GetPlayerId(j8)]=CreateUnit(j8,Hm,GetRectCenterX(L9),GetRectCenterY(L9),270)
endif
set j8=Z7[x]
if WR7(j8)and j8!=Le then
set G7[GetPlayerId(j8)]=CreateUnit(j8,Hm,GetRectCenterX(C9),GetRectCenterY(C9),270)
endif
set x=x+1
endloop
call Q47(RP7)
call RN7(t)
set t=null
set j8=null
return false
endfunction
function ro takes nothing returns nothing
local integer x=1
local player j8
local unit Z47=GetTriggerUnit()
local integer Hm=GetUnitTypeId(Z47)
local trigger t
local integer RP7
set LP4="ro"
if(GetOwningPlayer(Z47)==Le and IsUnitType(Z47,UNIT_TYPE_HERO))then
call DisableTrigger(GetTriggeringTrigger())
if V4[GetPlayerId(Le)]==false and D4==false and E4==false then
call SetPlayerState(Le,PLAYER_STATE_RESOURCE_GOLD,$FA+GetPlayerState(Le,PLAYER_STATE_RESOURCE_GOLD))
endif
set I[GetPlayerId(Le)]=true
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function rN))
call Q97(RP7,"HeroType",Hm)
endif
set j8=null
set Z47=null
set t=null
endfunction
function QL9 takes nothing returns nothing
local integer x=1
local trigger t=CreateTrigger()
local region r=CreateRegion()
set LP4="QL9"
set HC4=true
call DisableTrigger(QZ4)
call XH7(1211117641)
loop
exitwhen x>5
if(Y7[x]!=Le)then
call XI7(Y7[x])
set V4[GetPlayerId(Y7[x])]=true
set I[GetPlayerId(Y7[x])]=true
endif
if(Z7[x]!=Le)then
call XI7(Z7[x])
set V4[GetPlayerId(Z7[x])]=true
set I[GetPlayerId(Z7[x])]=true
endif
set x=x+1
endloop
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,null)
call TriggerAddAction(t,function ro)
endfunction
function Q19 takes nothing returns nothing
local integer T8
local integer U8
set LP4="Q19"
set Rx=true
set T8=1
set U8=M84
loop
exitwhen T8>U8
call XH7(M74[T8])
set T8=T8+1
endloop
set T8=1
set U8=M44
loop
exitwhen T8>U8
call XH7(K_4[T8])
set T8=T8+1
endloop
endfunction
function Q59 takes nothing returns nothing
local integer T8
local integer U8
set LP4="Q59"
set bx=true
set T8=1
set U8=M84
loop
exitwhen T8>U8
call XH7(M74[T8])
set T8=T8+1
endloop
set T8=1
set U8=K24
loop
exitwhen T8>U8
call XH7(K54[T8])
set T8=T8+1
endloop
endfunction
function Q09 takes nothing returns nothing
local integer T8
local integer U8
set LP4="Q09"
set Nx=true
set T8=1
set U8=K24
loop
exitwhen T8>U8
call XH7(K54[T8])
set T8=T8+1
endloop
set T8=1
set U8=M44
loop
exitwhen T8>U8
call XH7(K_4[T8])
set T8=T8+1
endloop
endfunction
function Q_9 takes nothing returns nothing
local integer T8
local integer U8
set LP4="Q_9"
set lj=true
set T8=1
set U8=MD4
loop
exitwhen T8>U8
call XH7(M94[T8])
set T8=T8+1
endloop
endfunction
function Q29 takes nothing returns nothing
local integer T8
local integer U8
set LP4="Q29"
set Jj=true
set T8=1
set U8=MF4
loop
exitwhen T8>U8
call XH7(ME4[T8])
set T8=T8+1
endloop
endfunction
function RF9 takes nothing returns nothing
set P4=true
endfunction
function RI9 takes nothing returns nothing
set X4=true
call SetPlayerTechResearched(Y7[0],1378889780,1)
call SetPlayerTechResearched(Z7[0],1378889780,1)
call SetPlayerHandicapXP(Y7[1],1.5)
call SetPlayerHandicapXP(Y7[2],1.5)
call SetPlayerHandicapXP(Y7[3],1.5)
call SetPlayerHandicapXP(Y7[4],1.5)
call SetPlayerHandicapXP(Y7[5],1.5)
call SetPlayerHandicapXP(Z7[1],1.5)
call SetPlayerHandicapXP(Z7[2],1.5)
call SetPlayerHandicapXP(Z7[3],1.5)
call SetPlayerHandicapXP(Z7[4],1.5)
call SetPlayerHandicapXP(Z7[5],1.5)
endfunction
function RG9 takes nothing returns nothing
set Y4=true
call DisableTrigger(H14)
endfunction
function RH9 takes nothing returns nothing
set A4=true
endfunction
function UD9 takes nothing returns nothing
set oy=false
call YM7(bj_FORCE_ALL_PLAYERS,$A,(GetObjectName((1848657985))))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function UE9 takes nothing returns nothing
call DisableTrigger(Q67(GetHandleId(GetTriggeringTrigger()),"nn"))
call DisableTrigger(GetTriggeringTrigger())
endfunction
function UF9 takes nothing returns nothing
local trigger UG9=CreateTrigger()
local trigger UH9=CreateTrigger()
set LP4="UF9"
call YM7(bj_FORCE_ALL_PLAYERS,10.," ")
call YM7(bj_FORCE_ALL_PLAYERS,10.,"Extra commands: -noneutrals can be entered in the following 15 seconds. ")
call TriggerRegisterTimerEvent(UG9,15.,false)
call TriggerAddAction(UG9,function UE9)
call QI7(GetHandleId(UG9),"nn",UH9)
call TriggerRegisterPlayerChatEvent(UH9,Le,"-noneutrals",true)
call TriggerAddAction(UH9,function UD9)
endfunction
function RJ9 takes nothing returns nothing
set PD4=true
call ExecuteFunc("UF9")
endfunction
function RK9 takes nothing returns nothing
set PE4=true
endfunction
function RN9 takes nothing returns nothing
set PF4=true
endfunction
function RM9 takes nothing returns nothing
set PG4=true
endfunction
function RO9 takes nothing returns nothing
set PH4=true
endfunction
function RP9 takes nothing returns nothing
set PI4=true
endfunction
function RQ9 takes nothing returns nothing
set PJ4=true
endfunction
function RA9 takes nothing returns nothing
set T34=true
endfunction
function RB9 takes nothing returns nothing
set T64=true
endfunction
function UI9 takes nothing returns nothing
local integer i=0
set LP4="UI9"
loop
exitwhen i>5
call SetPlayerName(Y7[i],(KY4[GetPlayerId((Y7[i]))])+" ("+I2S(Q[GetPlayerId(Y7[i])])+"/"+I2S(U[GetPlayerId(Y7[i])])+" | "+I2S(S7[GetPlayerId(Y7[i])])+"-"+I2S(T7[GetPlayerId(Y7[i])])+")")
call SetPlayerName(Z7[i],(KY4[GetPlayerId((Z7[i]))])+" ("+I2S(Q[GetPlayerId(Z7[i])])+"/"+I2S(U[GetPlayerId(Z7[i])])+" | "+I2S(S7[GetPlayerId(Z7[i])])+"-"+I2S(T7[GetPlayerId(Z7[i])])+")")
set i=i+1
endloop
endfunction
function UJ9 takes nothing returns boolean
if PK4==false then
if GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4 then
call UI9()
endif
endif
return false
endfunction
function UK9 takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string UM9
set LP4="UK9"
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848652107 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897784 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1701078382 then
elseif id==1848651862 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651863 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651826 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651864 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848651833 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1848657989 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1849897781 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092369 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1967339316 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092592 then
call ResetUnitAnimation(GetTriggerUnit())
elseif id==1966092378 then
call ResetUnitAnimation(GetTriggerUnit())
endif
endif
return false
endfunction
function UN9 takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
local string UM9
set LP4="UN9"
if GetLocalPlayer()==GetTriggerPlayer()then
if id==1749236021 then
set UM9="stand work"
elseif id==1848652107 then
set UM9="stand third"
elseif id==1849897784 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1701078382 then
elseif id==1848651862 then
set UM9="spell attack"
elseif id==1848651863 then
set UM9="spell"
elseif id==1848651826 then
call SetUnitAnimationByIndex(GetTriggerUnit(),3)
elseif id==1848651864 then
set UM9="stand work"
elseif id==1848651833 then
set UM9="stand work"
elseif id==1848657989 then
set UM9="stand victory"
elseif id==1849897781 then
set UM9="stand work"
elseif id==1966092369 then
set UM9="stand work"
elseif id==1967339316 then
set UM9="stand work gold"
elseif id==1966092592 then
set UM9="stand work"
elseif id==1966092378 then
set UM9="stand work"
endif
if UM9!="" then
call SetUnitAnimation(GetTriggerUnit(),UM9)
call QueueUnitAnimationBJ(GetTriggerUnit(),UM9)
endif
endif
return false
endfunction
function RR9 takes nothing returns nothing
set PK4=true
endfunction
function UO9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
set LP4="UO9"
call SetUnitScale(Z47,AP7(Z47)*BS,AP7(Z47)*BS,AP7(Z47)*BS)
set Z47=null
endfunction
function UP9 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call UO9()
endif
return false
endfunction
function RS9 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RS9"
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function UP9))
set bN=true
set BS=.5
endfunction
function RT9 takes nothing returns nothing
set CS=true
endfunction
function RU9 takes nothing returns nothing
set LS=true
endfunction
function UQ9 takes nothing returns nothing
set K[1]=0
endfunction
function UR9 takes nothing returns nothing
set K[2]=0
endfunction
function US9 takes nothing returns nothing
set K[3]=0
endfunction
function UT9 takes nothing returns nothing
set K[4]=0
endfunction
function UU9 takes nothing returns nothing
set K[5]=0
endfunction
function UV9 takes nothing returns nothing
set K[7]=0
endfunction
function UW9 takes nothing returns nothing
set K[8]=0
endfunction
function UX9 takes nothing returns nothing
set K[9]=0
endfunction
function UY9 takes nothing returns nothing
set K[$A]=0
endfunction
function UZ9 takes nothing returns nothing
set K[$B]=0
endfunction
function UA9 takes nothing returns nothing
local integer i=1
local string id
local player p
set LP4="UA9"
loop
exitwhen i>5
set p=Y7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IU4,id,"id",i)
set p=Z7[i]
set id=I2S(GetPlayerId(p))
call StoreInteger(IU4,id,"id",i+5)
if GetLocalPlayer()==Le then
call SyncStoredInteger(IU4,I2S(GetPlayerId(Y7[i])),"id")
call SyncStoredInteger(IU4,I2S(GetPlayerId(Z7[i])),"id")
endif
set i=i+1
endloop
endfunction
function UB9 takes nothing returns boolean
local boolean UC9=X8
set LP4="UB9"
if(vY and(not UC9))then
set X8=true
endif
if UC9 then
call XN7()
call YM7(bj_FORCE_ALL_PLAYERS,20.,P[GetPlayerId(Le)]+(KY4[GetPlayerId((Le))])+"|r"+" "+(GetObjectName((1848656717))))
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
set Q84=true
call J_9()
call PE9()
call TL8()
call J09()
call TC8()
elseif vY then
call YM7(bj_FORCE_ALL_PLAYERS,20.,"The selected mode/s are insignificant and is considered |c006699CCNormal Mode|r. You will get 175 gold refunded when you pick a hero.")
call YM7(bj_FORCE_ALL_PLAYERS,20.," ")
endif
call UA9()
call RN7(GetTriggeringTrigger())
return false
endfunction
function U39 takes nothing returns boolean
set O=true
call RN7(GetTriggeringTrigger())
return false
endfunction
function U69 takes nothing returns nothing
set N=true
endfunction
function UL9 takes nothing returns nothing
set F8=true
endfunction
function U19 takes nothing returns nothing
set S9=true
endfunction
function U09 takes nothing returns boolean
return(GetUnitAbilityLevel(GetKillingUnit(),1093685043)>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnit()))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitIllusion(GetTriggerUnit())==false)!=null
endfunction
function U59 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"Unit")
set LP4="U59"
call Q97(GetHandleId(u),"PreviousKills",R47(GetHandleId(u),"PreviousKills")-1)
call Q47(RP7)
call RN7(t)
set u=null
set t=null
return false
endfunction
function U29 takes nothing returns nothing
local unit U_9=GetKillingUnit()
local unit V49=GetTriggerUnit()
local integer JZ7=GetHandleId(U_9)
local integer V79=R47(JZ7,"PreviousKills")
local integer DB8=GetUnitAbilityLevel(U_9,1093685043)
local integer V89=V79*DB8
local integer V99=A_7(V89+DB8*2+2,30)
local texttag tt=CreateTextTag()
local player p=GetOwningPlayer(U_9)
local trigger t=CreateTrigger()
set DT[GetPlayerId(p)]=DT[GetPlayerId(p)]+V99
call TriggerRegisterTimerEvent(t,25.,false)
call TriggerAddCondition(t,Condition(function U59))
call QG7(GetHandleId(t),"Unit",U_9)
call Q97(JZ7,"PreviousKills",V79+1)
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,V99+GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD))
call SetTextTagText(tt,"+"+I2S(V99),.025)
call SetTextTagPosUnit(tt,V49,0)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set t=null
set U_9=null
set V49=null
set p=null
endfunction
function VD9 takes nothing returns boolean
local integer VE9=DT[GetPlayerId(GetTriggerPlayer())]
set LP4="VD9"
if VE9>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848657745)))+" "+I2S(VE9))
endif
return false
endfunction
function NB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NB8"
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function U09))
call TriggerAddAction(t,function U29)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function VD9))
set t=null
endfunction
function VF9 takes nothing returns nothing
call D38(SC4,GetEnumUnit(),2,SL4)
call DZ8(SC4,GetEnumUnit(),S64)
endfunction
function VG9 takes unit CP7,unit J67,real VH9 returns nothing
local group g
local integer X37=GetUnitAbilityLevel(CP7,1093750345)
local real x
local real y
set SC4=CP7
set SL4=(80+70*X37)*VH9/5.
set S64=(1+.75*X37)*VH9/5.
set S34=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(S34,1093687350)
call SetUnitAbilityLevel(S34,1093687350,DX8(S64))
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),$AF+25,Condition(function LF7))
if GetUnitTypeId(J67)!=1747993156 then
call GroupAddUnit(g,J67)
endif
call ForGroup(g,function VF9)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",GetUnitX(J67),GetUnitY(J67)))
set g=null
endfunction
function VI9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local unit DT8=QA7(RP7,"Projectile")
local real VH9=R77(RP7,"Elapsed")
local real VJ9=R77(RP7,"OriginalTime")
local real l4=MZ7(GetUnitX(DT8),GetUnitY(DT8),GetUnitX(m5),GetUnitY(m5))
local real x=GetUnitX(DT8)+18*Cos(l4*bj_DEGTORAD)
local real y=GetUnitY(DT8)+18*Sin(l4*bj_DEGTORAD)
call SetUnitX(DT8,x)
call SetUnitY(DT8,y)
if N67(x,y,GetUnitX(m5),GetUnitY(m5))<=18 then
call KillUnit(DT8)
call VG9(p5,m5,VH9)
call Q47(RP7)
call RN7(t)
elseif(TimerGetElapsed(V))-VJ9>(5.+2.)then
call KillUnit(DT8)
call VG9(p5,DT8,VH9)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
set DT8=null
return false
endfunction
function VK9 takes unit p5,unit m5,real VH9,real VJ9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=CreateUnit(GetOwningPlayer(p5),1747993156,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
set LP4="ddv"
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QG7(RP7,"Projectile",DT8)
call QD7(RP7,"Elapsed",VH9*1.)
call QD7(RP7,"OriginalTime",VJ9*1.)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function VI9))
set t=null
set DT8=null
endfunction
function VM9 takes string VN9,unit m5,unit VO9 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,VN9,.033)
call SetTextTagPosUnit(tt,m5,64)
call SetTextTagColor(tt,$FF,0,0,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.65)
if IsUnitAlly(VO9,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function VP9 takes real VQ9 returns string
if VQ9>4.5 then
return"5.0"
elseif VQ9>4. then
return"4.5"
elseif VQ9>3.5 then
return"4.0"
elseif VQ9>3. then
return"3.5"
elseif VQ9>2.5 then
return"3.0"
elseif VQ9>2. then
return"2.5"
elseif VQ9>1.5 then
return"2.0"
elseif VQ9>1. then
return"1.5"
elseif VQ9>.5 then
return"1.0"
elseif VQ9>.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function VR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local real VJ9=R77(RP7,"OriginalTime")
local real EO8=(TimerGetElapsed(V))
local real VS9=5.-(EO8-VJ9)
local real UJ8=B87(EO8-VJ9,5.)
local integer VT9=R47(RP7,"Count")+1
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call VG9(p5,p5,5.)
if(LoadInteger(C7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(C7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(C7,(RP7),(32))))
call Q47(RP7)
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093750344 then
if ZG7(GetSpellTargetUnit())==false then
call VK9(p5,GetSpellTargetUnit(),UJ8,VJ9)
endif
if(LoadInteger(C7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(C7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(C7,(RP7),(32))))
call Q47(RP7)
call RN7(t)
endif
else
call SaveInteger(C7,(RP7),StringHash("Count"),(VT9))
if VS9>=0 then
call VM9(VP9(VS9),p5,p5)
if ModuloInteger(VT9,2)==0 then
call SetUnitVertexColor(p5,$FF,125,125,$FF)
else
call SetUnitVertexColor(p5,$FF,$AF,$AF,$FF)
endif
else
call SetUnitVertexColor(p5,$FF,0,0,$FF)
endif
if EO8-VJ9>(5.+2.)then
call VG9(p5,p5,5.)
if(LoadInteger(C7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(C7,(GetHandleId(p5)),(704)))==1093750345 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,false)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call DestroyEffect((LoadEffectHandle(C7,(RP7),(32))))
call Q47(RP7)
call RN7(t)
endif
endif
set t=null
set p5=null
return false
endfunction
function VU9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local string st="war3mapImported\\UnstableConcoctionRangeDisplay3.mdx"
set LP4="VU9"
if GetLocalPlayer()!=GetOwningPlayer(p5)then
set st=""
endif
call QG7(RP7,"Source",p5)
call QD7(RP7,"OriginalTime",TimerGetElapsed(V)*1.)
call SaveEffectHandle(C7,(RP7),(32),(AddSpecialEffectTarget(st,p5,"origin")))
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VR9))
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750345,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750344,true)
call Z27(p5,1093750344)
call UnitMakeAbilityPermanent(p5,true,1093750344)
call TriggerEvaluate(t)
set p5=null
set t=null
endfunction
function VV9 takes nothing returns boolean
if GetSpellAbilityId()==1093750345 then
call VU9()
endif
return false
endfunction
function NC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VV9))
call AC7(1093687350)
set t=null
endfunction
function ZV takes nothing returns boolean
return GetSpellAbilityId()==1093683532
endfunction
function VW9 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848657461)!=null
endfunction
function VX9 takes nothing returns nothing
call UnitDamageTarget(L7,GetEnumUnit(),E8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function RC takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit oA=QA7(RP7,"Caster")
local integer Rd=R47(RP7,"Counter")
local real x=GetUnitX(oA)
local real y=GetUnitY(oA)
local boolexpr hP
local group FP8
set LP4="RC"
if Rd>$C then
call KillUnit(oA)
call PauseTimer(t)
call Q47(RP7)
call DestroyTimer(t)
else
set L7=Z47
set E8=8+GetUnitAbilityLevel(Z47,1093683532)*6
set hP=Condition(function VW9)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,650,hP)
call ForGroup(FP8,function VX9)
call ZH7(FP8)
call DestroyBoolExpr(hP)
set Rd=Rd+1
call Q97(RP7,"Counter",Rd)
set FP8=null
set hP=null
endif
set t=null
set Z47=null
set oA=null
endfunction
function VY9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location Mk=GetSpellTargetLoc()
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697657157,x,y,0)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
call RemoveLocation(Mk)
call Z27(oA,1093683764)
call SetUnitAbilityLevel(oA,1093683764,GetUnitAbilityLevel(Z47,1093683532))
call Z27(oA,1097625443)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",oA)
call Q97(RP7,"Counter",0)
call TimerStart(t,1,true,function RC)
set Z47=null
set Mk=null
set oA=null
set t=null
endfunction
function N38 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function VY9)
call TriggerAddCondition(t,Condition(function ZV))
call AC7(1093683764)
set t=null
endfunction
function VZ9 takes nothing returns nothing
call D38(DN,GetEnumUnit(),1,dN)
endfunction
function VA9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093682483)
local real BD7=(.35+.25*X37)*(GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))
local group g=ZI7()
set LP4="VA9"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",m5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",m5,"chest"))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Enchantment.mdx",GetUnitX(m5),GetUnitY(m5)))
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),325,Condition(function LV7))
set dN=BD7
set DN=Z47
call ForGroup(g,function VZ9)
call PlaySoundOnUnitBJ(oO,100,m5)
call ZH7(g)
set Z47=null
set m5=null
set g=null
endfunction
function VB9 takes nothing returns boolean
if GetSpellAbilityId()==1093682483 and ZG7(GetSpellTargetUnit())==false then
call VA9()
endif
return false
endfunction
function G28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="G28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VB9))
set t=null
endfunction
function VC9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=QA7(RP7,"Caster")
local integer XB8=GetTriggerEvalCount(t)
local integer V39=R2I(((.9-.3)/ .5)/ .03)
local integer V69=R2I(($AF/ V39))
local integer VL9=R2I(($FF/ V39)*1.75)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
set LP4="VC9"
if XB8>V39 then
call SetUnitVertexColor(DA8,$FF,$FF,$FF,0)
call SetUnitVertexColor(Z47,$FF,$FF,$FF,$FF)
call ShowUnit(DA8,false)
call Q47(RP7)
call RN7(t)
else
call SetUnitVertexColor(DA8,$FF,$FF,$FF,$AF-V69*XB8)
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
call SetUnitVertexColor(Z47,$FF,$FF,$FF,VL9*XB8)
endif
set t=null
set DA8=null
set Z47=null
return false
endfunction
function V19 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit DA8=QA7(GetHandleId(Z47),"BlinkAM_Caster")
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
set LP4="V19"
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
call SetUnitVertexColor(Z47,$FF,$FF,$FF,0)
call SetUnitVertexColor(DA8,$FF,$FF,$FF,$AF)
call SetUnitTimeScale(DA8,.5)
call QG7(RP7,"Caster",DA8)
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"x",x*1.)
call QD7(RP7,"y",y*1.)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function VC9))
set Z47=null
set DA8=null
set t=null
endfunction
function V09 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit DA8
local integer RP7=GetHandleId(Z47)
local real a=MZ7(GetUnitX(Z47),GetUnitY(Z47),GetSpellTargetX(),GetSpellTargetY())
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
set LP4="V09"
call SetUnitPathing(Z47,false)
call Z27(Z47,1097167976)
set DA8=CreateUnit(GetOwningPlayer(Z47),1747990091,GetUnitX(Z47),GetUnitY(Z47),a)
call AE7(DA8,5)
call SetUnitPathing(DA8,false)
call Z27(DA8,1097167976)
call Z27(DA8,1097625443)
call Z27(DA8,1093678162)
call SetUnitVertexColor(DA8,$FF,$FF,$FF,0)
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
call SetUnitAnimation(DA8,"Spell Throw")
call SetUnitPathing(Z47,true)
call UnitRemoveAbility(Z47,1097167976)
call QG7(RP7,"BlinkAM_Caster",DA8)
set Z47=null
set DA8=null
endfunction
function V59 takes nothing returns boolean
if GetSpellAbilityId()==1095066220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call V19()
else
call V09()
endif
endif
return false
endfunction
function G_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="G_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V59))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function V59))
set t=null
call AF7(1747990091)
endfunction
function V29 takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093752374)
local real V_9=16+$C*DB8
local real W49=GetUnitState(J67,UNIT_STATE_MANA)
local real W79=RMinBJ(V_9,W49)
set LP4="ManaBreak_SuccessfulAttack"
if W79>0 then
call SetUnitState(J67,UNIT_STATE_MANA,W49-W79)
call D38(CP7,J67,2,W79*.6)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",J67,"origin"))
endif
endfunction
function W89 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer W99=(LoadInteger(C7,(JZ7),(30)))
local unit J67=WG7(W99)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="W89"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
call V29(CP7,J67)
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function WD9 takes nothing returns nothing
local trigger t=CreateTrigger()
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
local integer JZ7=GetHandleId(t)
set LP4="WD9"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,.4,false)
call TriggerAddCondition(t,Condition(function W89))
call SaveInteger(C7,(JZ7),(30),(WI7(J67)))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set J67=null
set CP7=null
set t=null
endfunction
function WE9 takes nothing returns nothing
local unit CP7=GetAttacker()
set LP4="WE9"
if RG7(CP7,"CooldownState")==false then
call RR7(CP7,"CooldownState",.4)
call WD9()
endif
set CP7=null
endfunction
function WF9 takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093752374)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and Y57(GetTriggerUnit())==false then
call WE9()
endif
return false
endfunction
function WG9 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="WG9"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function WF9))
call SaveUnitHandle(C7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function WH9 takes nothing returns boolean
if GetLearnedSkill()==1093752374 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093752374)==1 then
call WG9()
endif
return false
endfunction
function H48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H48"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function WH9))
set t=null
endfunction
function WI9 takes nothing returns boolean
return GetSpellAbilityId()==1093685071
endfunction
function WJ9 takes nothing returns nothing
if(GetUnitTypeId(GetEnumUnit())==1848652113 or GetUnitTypeId(GetEnumUnit())==1848652109 or GetUnitTypeId(GetEnumUnit())==1848652114 or GetUnitTypeId(GetEnumUnit())==1848652115)then
call KillUnit(GetEnumUnit())
endif
endfunction
function WK9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit WM9=(LoadUnitHandle(C7,(JZ7),(2)))
local real WN9=(LoadReal(C7,(JZ7),(6)))
local real WO9=(LoadReal(C7,(JZ7),(7)))
local real WP9=GetUnitX(WM9)
local real WQ9=GetUnitY(WM9)
set LP4="WK9"
call SaveReal(C7,(JZ7),(6),((WP9)*1.))
call SaveReal(C7,(JZ7),(7),((WQ9)*1.))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if WN9==WP9 and WO9==WQ9 then
if GetUnitAbilityLevel(WM9,1093752647)==0 then
call Z27(WM9,1093752647)
endif
else
if GetUnitAbilityLevel(WM9,1093752647)>0 then
call UnitRemoveAbility(WM9,1093752647)
endif
endif
endif
set t=null
set WM9=null
return false
endfunction
function WR9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local player j8=GetOwningPlayer(Z47)
local integer X37=GetUnitAbilityLevel(Z47,1093685071)
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local group FP8=ZI7()
local unit WM9
local trigger t
local integer JZ7
set LP4="WR9"
call GroupEnumUnitsOfPlayer(FP8,j8,Condition(function WE7))
call ForGroup(FP8,function WJ9)
call ZH7(FP8)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",x,y))
if(X37==1)then
set WM9=CreateUnit(j8,1848652113,x,y,270)
call UnitApplyTimedLife(WM9,1112820806,60)
elseif(X37==2)then
set WM9=CreateUnit(j8,1848652113,x,y,270)
call UnitApplyTimedLife(WM9,1112820806,70)
call UnitApplyTimedLife(CreateUnit(j8,1848652109,x,y,270),1112820806,70)
elseif(X37==3)then
set WM9=CreateUnit(j8,1848652114,x,y,270)
call UnitApplyTimedLife(WM9,1112820806,80)
call UnitApplyTimedLife(CreateUnit(j8,1848652109,x,y,270),1112820806,80)
elseif(X37==4)then
set WM9=CreateUnit(j8,1848652114,x,y,270)
call UnitApplyTimedLife(WM9,1112820806,80)
call UnitApplyTimedLife(CreateUnit(j8,1848652115,x,y,270),1112820806,90)
endif
if X37==3 or X37==4 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,WM9,EVENT_UNIT_DEATH)
call SaveReal(C7,(JZ7),(6),((GetUnitX(WM9))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(WM9))*1.))
call SaveUnitHandle(C7,(JZ7),(2),(WM9))
call TriggerAddCondition(t,Condition(function WK9))
endif
set Z47=null
set j8=null
set FP8=null
set WM9=null
set t=null
endfunction
function H98 takes nothing returns nothing
set nJ=CreateTrigger()
call BT7(nJ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(nJ,Condition(function WI9))
call TriggerAddAction(nJ,function WR9)
endfunction
function WS9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local real a=bj_RADTODEG*Atan2(y-IJ4,x-IH4)
local real WT9
local real WU9
set LP4="WS9"
if Sin((a-IK4)*bj_DEGTORAD)<0 then
set WT9=GetUnitX(GetEnumUnit())+$F*Cos((IK4-90)*bj_DEGTORAD)
set WU9=GetUnitY(GetEnumUnit())+$F*Sin((IK4-90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),WT9,WU9)
call SetUnitFacingTimed(GetEnumUnit(),IK4+90,.3)
else
set WT9=GetUnitX(GetEnumUnit())+$F*Cos((IK4+90)*bj_DEGTORAD)
set WU9=GetUnitY(GetEnumUnit())+$F*Sin((IK4+90)*bj_DEGTORAD)
call SetUnitPosition(GetEnumUnit(),WT9,WU9)
call SetUnitFacingTimed(GetEnumUnit(),IK4-90,.3)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetEnumUnit(),"origin"))
endfunction
function WV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real l4=R77(RP7,"Angle")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local group g=QL7(RP7,"g")
set LP4="WV9"
if GetTriggerEvalCount(t)>16 then
call ZH7(g)
call Q47(RP7)
call RN7(t)
else
set IH4=x
set IJ4=y
set IK4=l4
call ForGroup(g,function WS9)
endif
set t=null
set g=null
return false
endfunction
function WW9 takes nothing returns nothing
call D38(IM4,GetEnumUnit(),1,IH4)
endfunction
function WX9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(ZO7,1093685042)
local unit DA8
local real WY9=bj_RADTODEG*Atan2(GetUnitY(J67)-GetUnitY(ZO7),GetUnitX(J67)-GetUnitX(ZO7))
local real x
local real y
local group g=ZI7()
local group g2=ZI7()
set LP4="WX9"
if DB8==0 then
set DB8=GetUnitAbilityLevel(ZO7,1093810233)
endif
call QP7(RP7,"g",g)
call QD7(RP7,"Angle",WY9*1.)
call QD7(RP7,"x",GetUnitX(ZO7)*1.)
call QD7(RP7,"y",GetUnitY(ZO7)*1.)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function WV9))
set x=GetUnitX(ZO7)+50*Cos(WY9*bj_DEGTORAD)
set y=GetUnitY(ZO7)+50*Sin(WY9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LV7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1865429081,x,y,WY9)
call UnitApplyTimedLife(DA8,1112820806,1)
call Z27(DA8,1093684825)
call SetUnitAbilityLevel(DA8,1093684825,DB8)
call IssueImmediateOrderById(DA8,$D0080)
set x=GetUnitX(ZO7)+$FA*Cos(WY9*bj_DEGTORAD)
set y=GetUnitY(ZO7)+$FA*Sin(WY9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LV7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1865429081,x,y,WY9)
call UnitApplyTimedLife(DA8,1112820806,1)
call Z27(DA8,1093684825)
call SetUnitAbilityLevel(DA8,1093684825,DB8)
call IssueImmediateOrderById(DA8,$D0080)
set x=GetUnitX(ZO7)+450*Cos(WY9*bj_DEGTORAD)
set y=GetUnitY(ZO7)+450*Sin(WY9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LV7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1865429081,x,y,WY9)
call UnitApplyTimedLife(DA8,1112820806,1)
call Z27(DA8,1093684825)
call SetUnitAbilityLevel(DA8,1093684825,DB8)
call IssueImmediateOrderById(DA8,$D0080)
if GetUnitAbilityLevel(ZO7,1093685042)==0 then
set x=GetUnitX(ZO7)+650*Cos(WY9*bj_DEGTORAD)
set y=GetUnitY(ZO7)+650*Sin(WY9*bj_DEGTORAD)
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LV7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1865429081,x,y,WY9)
call UnitApplyTimedLife(DA8,1112820806,1)
call Z27(DA8,1093684825)
call SetUnitAbilityLevel(DA8,1093684825,DB8)
call IssueImmediateOrderById(DA8,$D0080)
endif
call ZH7(g2)
call GroupRemoveUnit(g,J67)
set IH4=100*DB8
set IM4=ZO7
call ForGroup(g,function WW9)
set t=null
set ZO7=null
set J67=null
set DA8=null
set g=null
set g2=null
endfunction
function WZ9 takes nothing returns boolean
if(GetSpellAbilityId()==1093685042 or GetSpellAbilityId()==1093810233)and ZG7(GetSpellTargetUnit())==false then
call WX9()
endif
return false
endfunction
function H78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WZ9))
set t=null
endfunction
function WA9 takes nothing returns boolean
return GetSpellAbilityId()==1093685041
endfunction
function WB9 takes unit Z47,real x,real y,group WC9 returns nothing
local group FP8=ZI7()
local unit G58
set LP4="WildAxes_DamageUnits"
call BW7(x,y,$96)
call GroupEnumUnitsInRange(FP8,x,y,$96,Condition(function WE7))
loop
set G58=FirstOfGroup(FP8)
exitwhen G58==null
if IsUnitInGroup(G58,WC9)==false and IsUnitEnemy(G58,GetOwningPlayer(Z47))then
if(GetUnitAbilityLevel(G58,1093678162)!=1 and GetUnitState(G58,UNIT_STATE_LIFE)>0 and IsUnitType(G58,UNIT_TYPE_STRUCTURE)==false)then
call GroupAddUnit(WC9,G58)
call UnitDamageTarget(Z47,G58,60+GetUnitAbilityLevel(Z47,1093685041)*30,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_METAL_HEAVY_SLICE)
call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",G58,"overhead")
endif
endif
call GroupRemoveUnit(FP8,G58)
endloop
call ZH7(FP8)
set FP8=null
set G58=null
endfunction
function W39 takes nothing returns nothing
local integer JZ7=GetHandleId(GetExpiredTimer())
local unit W69=QA7(JZ7,"Axe")
local unit ZO7=QA7(JZ7,"Hero")
local real Ax=R77(JZ7,"Ax")
local real Ay=R77(JZ7,"Ay")
local real Cx=R77(JZ7,"Cx")
local real Cy=R77(JZ7,"Cy")
local real Bx=R77(JZ7,"Bx")
local real By=R77(JZ7,"By")
local real a=R77(JZ7,"a")
local real b=1-a
local boolean WL9=R87(JZ7,"FirstPass")
local group W19=QL7(JZ7,"AlreadyDamaged")
local real W09=RMaxBJ(N67(Ax,Ay,Cx,Cy)/$514,.4)
set LP4="W39"
call SetUnitX(W69,AY7(Ax*a*a+Bx*2*a*b+Cx*b*b))
call SetUnitY(W69,AZ7(Ay*a*a+By*2*a*b+Cy*b*b))
call WB9(ZO7,GetUnitX(W69),GetUnitY(W69),W19)
if(WL9)then
call QD7(JZ7,"a",(a-.02/W09)*1.)
else
call QD7(JZ7,"a",(a+.02/W09)*1.)
call QD7(JZ7,"Ax",GetUnitX(ZO7)*1.)
call QD7(JZ7,"Ay",GetUnitY(ZO7)*1.)
endif
if(a<0 and WL9)then
call QF7(JZ7,"FirstPass",false)
call QD7(JZ7,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+(R77(JZ7,"AngleOffset"))))*1.)
call QD7(JZ7,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+(R77(JZ7,"AngleOffset"))))*1.)
endif
if(a>1 and WL9==false)then
call PauseTimer(GetExpiredTimer())
call ZH7(W19)
call Q47(JZ7)
call RemoveUnit(W69)
call DestroyTimer(GetExpiredTimer())
endif
set W69=null
set ZO7=null
set W19=null
endfunction
function W59 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real Ax=GetUnitX(Z47)
local real Ay=GetUnitY(Z47)
local real Cx=GetLocationX(GetSpellTargetLoc())
local real Cy=GetLocationY(GetSpellTargetLoc())
local unit W29=CreateUnit(GetOwningPlayer(Z47),1697657172,Ax,Ay,270.)
local unit W_9=CreateUnit(GetOwningPlayer(Z47),1697657172,Ax,Ay,270.)
local integer X49
local integer X79
local timer X89=CreateTimer()
local timer X99=CreateTimer()
set LP4="W59"
if GetSpellTargetUnit()!=null then
set Cx=GetUnitX(GetSpellTargetUnit())
set Cy=GetUnitY(GetSpellTargetUnit())
endif
call Z27(W29,1097691750)
call UnitRemoveAbility(W29,1097691750)
call SetUnitFlyHeight(W29,$96,0)
call Z27(W_9,1097691750)
call UnitRemoveAbility(W_9,1097691750)
call SetUnitFlyHeight(W_9,$96,0)
set X49=GetHandleId(X89)
call QG7(X49,"Hero",Z47)
call QG7(X49,"Axe",W29)
call QP7(X49,"AlreadyDamaged",ZI7())
call QD7(X49,"Ax",(Ax)*1.)
call QD7(X49,"Ay",(Ay)*1.)
call QD7(X49,"Cx",(Cx)*1.)
call QD7(X49,"Cy",(Cy)*1.)
call QD7(X49,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)+45))*1.)
call QD7(X49,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)+45))*1.)
call QD7(X49,"a",(1)*1.)
call QD7(X49,"AngleOffset",(-45)*1.)
call QF7(X49,"FirstPass",true)
set X79=GetHandleId(X99)
call QG7(X79,"Hero",Z47)
call QG7(X79,"Axe",W_9)
call QP7(X79,"AlreadyDamaged",ZI7())
call QD7(X79,"Ax",(Ax)*1.)
call QD7(X79,"Ay",(Ay)*1.)
call QD7(X79,"Cx",(Cx)*1.)
call QD7(X79,"Cy",(Cy)*1.)
call QD7(X79,"Bx",(Ax+300*Cos(Atan2(Cy-Ay,Cx-Ax)-45))*1.)
call QD7(X79,"By",(Ay+300*Sin(Atan2(Cy-Ay,Cx-Ax)-45))*1.)
call QD7(X79,"a",(1)*1.)
call QD7(X79,"AngleOffset",(45)*1.)
call QF7(X79,"FirstPass",true)
call TimerStart(X89,.025,true,function W39)
call TimerStart(X99,.025,true,function W39)
set Z47=null
set W29=null
set W_9=null
set X89=null
set X99=null
endfunction
function H88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H88"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WA9))
call TriggerAddAction(t,function W59)
set t=null
endfunction
function XD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="XD9"
call UnitRemoveAbility(p5,1093743664)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function XE9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
set LP4="XE9"
call Z27(p5,1093743664)
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function XD9))
call QG7(RP7,"Source",p5)
set t=null
set p5=null
endfunction
function XF9 takes nothing returns boolean
if GetSpellAbilityId()==1093743450 then
call XE9()
endif
return false
endfunction
function HD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XF9))
set t=null
endfunction
function XG9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer RP7=GetHandleId(p5)
local player p=QC7(RP7,"Track|SourcePlayer")
local integer DB8=R47(RP7,"Track|Level")
local texttag tt=CreateTextTag()
local integer Z98
local integer i=1
local unit XH9
local player XI9
set LP4="XG9"
if DB8==1 then
set Z98=$96
elseif DB8==2 then
set Z98=$C8
else
set Z98=$FA
endif
call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+Z98)
call SetTextTagText(tt,"+"+I2S(Z98),.025)
call SetTextTagPosUnit(tt,G7[GetPlayerId(p)],100)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==p then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set VF4[GetPlayerId(p)]=VF4[GetPlayerId(p)]+Z98
set XZ4=XZ4+Z98
if DB8==1 then
set Z98=50
elseif DB8==2 then
set Z98=100
else
set Z98=$96
endif
loop
exitwhen i>5
if WM7(p)then
set XI9=Y7[i]
else
set XI9=Z7[i]
endif
if XI9!=p then
set XH9=G7[GetPlayerId(XI9)]
if N37(XH9,p5)<950 then
set tt=CreateTextTag()
call SetPlayerState(XI9,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(XI9,PLAYER_STATE_RESOURCE_GOLD)+Z98)
call SetTextTagText(tt,"+"+I2S(Z98),.025)
call SetTextTagPosUnit(tt,XH9,100)
call SetTextTagColor(tt,$FF,$DC,0,$FF)
call SetTextTagVelocity(tt,0,.03)
call SetTextTagVisibility(tt,false)
if GetLocalPlayer()==XI9 then
call SetTextTagVisibility(tt,true)
endif
call SetTextTagFadepoint(tt,2)
call SetTextTagLifespan(tt,3)
call SetTextTagPermanent(tt,false)
set VF4[GetPlayerId(XI9)]=VF4[GetPlayerId(XI9)]+Z98
set XZ4=XZ4+Z98
endif
endif
set i=i+1
endloop
set p5=null
set p=null
set tt=null
set XH9=null
set XI9=null
endfunction
function XJ9 takes nothing returns boolean
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and R77(GetHandleId(GetTriggerUnit()),"Track|Time")>O97()then
call XG9()
endif
return false
endfunction
function XK9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit oA=QA7(RP7,"Caster")
set LP4="XK9"
call SetUnitX(oA,GetUnitX(m5))
call SetUnitY(oA,GetUnitY(m5))
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>$A and GetUnitAbilityLevel(m5,1110454348)==0)then
call DestroyEffect(Q17(RP7,"FX"))
call KillUnit(oA)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set oA=null
return false
endfunction
function XM9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(m5),1697657174,GetUnitX(m5),GetUnitY(m5),0)
local string XN9="war3mapImported\\TrackBuff.mdx"
set LP4="XM9"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(m5))and Y27(GetLocalPlayer())==false then
set XN9=""
endif
call Z27(oA,1093742901)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XK9))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Caster",oA)
call QH7(RP7,"FX",AddSpecialEffectTarget(XN9,m5,"overhead"))
call QD7(GetHandleId(GetSpellTargetUnit()),"Track|Time",(((O97())+30)*1.))
call QN7(GetHandleId(GetSpellTargetUnit()),"Track|SourcePlayer",GetOwningPlayer(GetTriggerUnit()))
call Q97(GetHandleId(GetSpellTargetUnit()),"Track|Level",GetUnitAbilityLevel(GetTriggerUnit(),1093681716))
set t=null
set m5=null
set p5=null
set oA=null
endfunction
function XO9 takes nothing returns boolean
if GetSpellAbilityId()==1093681716 then
call XM9()
endif
return false
endfunction
function HI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XO9))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XJ9))
set t=null
endfunction
function XP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
set LP4="XP9"
call UnitRemoveAbility(m5,1093749079)
call UnitRemoveAbility(m5,1110459201)
call Q47(RP7)
call RN7(t)
set t=null
set m5=null
return false
endfunction
function XQ9 takes unit p5,unit m5 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="DXv"
call TriggerRegisterTimerEvent(t,3.,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XP9))
call QG7(RP7,"Target",m5)
call Z27(m5,1093749079)
call UnitMakeAbilityPermanent(m5,true,1093749079)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093749079,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",m5,"chest"))
set t=null
endfunction
function XR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local unit p5=QA7(RP7,"Source")
set LP4="XR9"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and(GetEventDamage()>40 or IsUnitType(m5,UNIT_TYPE_STRUCTURE) or GetUnitTypeId(m5)==1970107511 or GetUnitTypeId(m5)==1700946284)and R87(GetHandleId(p5),"JinadaActive") then
call XQ9(p5,m5)
call QF7(GetHandleId(p5),"JinadaActive",false)
call QD7(GetHandleId(p5),"LastUsed",TimerGetElapsed(V)*1.)
call UnitRemoveAbility(p5,1093749075)
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
call WF7(D18)
call Q47(RP7)
call RN7(t)
endif
else
call WF7(D18)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function XS9 takes nothing returns boolean
local trigger t
local integer RP7
local unit m5
local unit p5
local integer X37
set LP4="XS9"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call QF7(GetHandleId(GetTriggerUnit()),"JinadaActive",false)
call QD7(GetHandleId(GetTriggerUnit()),"LastUsed",TimerGetElapsed(V)*1.)
call UnitRemoveAbility(GetTriggerUnit(),1093749075)
call UnitRemoveAbility(GetTriggerUnit(),1093749300)
call UnitRemoveAbility(GetTriggerUnit(),1093749299)
call UnitRemoveAbility(GetTriggerUnit(),1093749301)
call UnitRemoveAbility(GetTriggerUnit(),1093749077)
elseif GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"JinadaHero")then
if IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and R87(GetHandleId(GetAttacker()),"JinadaActive") then
set t=CreateTrigger()
set RP7=GetHandleId(t)
set m5=GetTriggerUnit()
set p5=GetAttacker()
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function XR9))
call Q97(RP7,"TargetIndex",WI7(m5))
call QG7(RP7,"Source",p5)
set X37=GetUnitAbilityLevel(p5,1093749073)
if X37==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif X37==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
set m5=null
set p5=null
set t=null
endif
endif
return false
endfunction
function XT9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real XU9=TimerGetElapsed(V)
local integer X37=GetUnitAbilityLevel(Z47,1093749073)
local real XV9=R77(GetHandleId(Z47),"LastUsed")
local boolean XW9=R87(GetHandleId(Z47),"JinadaActive")
set LP4="XT9"
if XU9-XV9>$E-X37*2 and XW9==false and A47(Z47)==false then
call QF7(GetHandleId(Z47),"JinadaActive",true)
call Z27(Z47,1093749075)
if GetUnitAbilityLevel(Z47,1110455864)==0 then
if X37==1 then
call Z27(Z47,1093749300)
elseif X37==2 then
call Z27(Z47,1093749299)
elseif X37==3 then
call Z27(Z47,1093749301)
elseif X37==4 then
call Z27(Z47,1093749077)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749077,false)
elseif XW9==false and GetUnitAbilityLevel(Z47,1110455864)==0 then
call UnitRemoveAbility(Z47,1093749075)
call UnitRemoveAbility(Z47,1093749300)
call UnitRemoveAbility(Z47,1093749299)
call UnitRemoveAbility(Z47,1093749301)
call UnitRemoveAbility(Z47,1093749077)
endif
set t=null
set Z47=null
return false
endfunction
function XX9 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer XZ9=GetHandleId(t2)
set LP4="DBv"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function XT9))
call BT7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t2,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function XS9))
call QG7(RP7,"Hero",Z47)
call QG7(XZ9,"JinadaHero",Z47)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
set Rj[GetPlayerId(GetOwningPlayer(Z47))]=t2
endif
set Z47=null
set t=null
set t2=null
endfunction
function XA9 takes nothing returns boolean
if GetLearnedSkill()==1093749073 and GetUnitAbilityLevel(GetTriggerUnit(),1093749073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call XX9(GetTriggerUnit(),false)
endif
return false
endfunction
function HJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HJ8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XA9))
set t=null
endfunction
function XB9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
local integer X37=GetUnitAbilityLevel(p5,1093678913)
set LP4="XB9"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 then
call Q47(RP7)
call RN7(t)
if RG7(p5,"WindWalk|CD")==false then
call RR7(p5,"WindWalk|CD",.5)
if IsUnitType(m5,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(m5,GetOwningPlayer(p5))then
call D38(p5,m5,2,30*X37)
call BO7(I2S(R2I(30*X37)),1,p5,.027,$D8,0,0,$D8)
call RK7(p5,"WindWalkBH|Active")
set t=Q67(GetHandleId(p5),"ai|WWTrigger")
call Q47(GetHandleId(t))
call RN7(t)
endif
endif
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function XC9 takes nothing returns boolean
local trigger t=null
local unit m5=null
local unit p5=null
local integer RP7
local integer X37
set LP4="XC9"
if RG7(GetAttacker(),"WindWalkBH|Active")then
set t=CreateTrigger()
set m5=GetTriggerUnit()
set p5=GetAttacker()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function XB9))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
if R87(GetHandleId(p5),"JinadaActive")then
set X37=GetUnitAbilityLevel(p5,1093749073)
if X37==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif X37==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
else
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
set m5=null
set p5=null
set t=null
endif
return false
endfunction
function X39 takes nothing returns boolean
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit p5=QA7(RP7,"Hero")
local integer X37
set LP4="X39"
call RK7(p5,"WindWalkBH|Active")
if GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH then
if R87(GetHandleId(p5),"JinadaActive")then
set X37=GetUnitAbilityLevel(p5,1093749073)
if X37==0 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==1 then
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==2 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
elseif X37==3 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749077)
elseif X37==4 then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
endif
else
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
else
if not R87(GetHandleId(p5),"JinadaActive")then
call UnitRemoveAbility(p5,1093749300)
call UnitRemoveAbility(p5,1093749299)
call UnitRemoveAbility(p5,1093749301)
call UnitRemoveAbility(p5,1093749077)
endif
endif
call Q47(RP7)
call RN7(GetTriggeringTrigger())
set p5=null
return false
endfunction
function X69 takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Hero")
set LP4="X69"
if IsTriggerEnabled(Q67(RP7,"CancelTr"))then
call RI7(p5,"WindWalkBH|Active")
endif
call Q47(RP7)
call RN7(t)
set p5=null
set t=null
endfunction
function XL9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093678913)
set LP4="XL9"
call TriggerRegisterTimerEvent(t,1.25-.25*X37-.01,false)
call TriggerAddAction(t,function X69)
call QG7(RP7,"Hero",p5)
set t=CreateTrigger()
call QI7(RP7,"CancelTr",t)
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,$A+5*X37,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function X39))
call QG7(RP7,"Hero",p5)
call QI7(GetHandleId(p5),"ai|WWTrigger",t)
call Z27(p5,1093749300)
call Z27(p5,1093749299)
call Z27(p5,1093749301)
call Z27(p5,1093749077)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749300,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749299,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749301,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093749077,false)
set t=null
set p5=null
endfunction
function X19 takes nothing returns boolean
if GetSpellAbilityId()==1093678913 then
call XL9()
endif
return false
endfunction
function HK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X19))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function XC9))
set t=null
endfunction
function X09 takes nothing returns boolean
return GetSpellAbilityId()==1093683024 or GetSpellAbilityId()==1093682775
endfunction
function X59 takes integer X37,integer a returns integer
if a==0 then
return 1
else
return(X37-1)*5+1+a
endif
endfunction
function Ry takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1697656920
endfunction
function RY takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function X29 takes player p returns nothing
local group g=ZI7()
set LP4="Warpath_FindAndRemove"
call GroupEnumUnitsOfPlayer(g,p,Condition(function Ry))
call ForGroup(g,function RY)
call ZH7(g)
set g=null
endfunction
function X_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit ZO7=QA7(GetHandleId(t),"Hero")
local integer JZ7=GetHandleId(ZO7)
local integer DB8=GetUnitAbilityLevel(ZO7,1093682774)
local integer Y49=(R47(JZ7,"Warpath|Level")-1)
local integer Y79=B77(Y49,0,5)
local unit DA8=QA7(JZ7,"Warpath|Caster")
local integer Y89
if DB8==1 then
set Y89=Y79*20
elseif DB8==2 then
set Y89=Y79*25
elseif DB8==3 then
set Y89=Y79*30
endif
if Y49==0 then
set Y89=0
endif
call D28(ZO7,Y89)
if GetUnitTypeId(DA8)==1697656920 then
call SetUnitAbilityLevel(DA8,1093682502,X59(DB8,Y79))
call Q97(JZ7,"Warpath|Level",Y49)
else
call X29(QC7(GetHandleId(t),"p"))
endif
call Q47(GetHandleId(t))
call RN7(t)
set t=null
set ZO7=null
set DA8=null
return false
endfunction
function Y99 takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local integer JZ7=GetHandleId(ZO7)
local unit DA8=QA7(JZ7,"Warpath|Caster")
local integer DB8=GetUnitAbilityLevel(ZO7,1093682774)
local integer Y49=(R47(JZ7,"Warpath|Level")+1)
local integer Y79=B77(Y49,0,5)
local integer YD9=X59(DB8,Y79)
local trigger t=CreateTrigger()
local integer Y89
set LP4="Y99"
if DB8==1 then
set Y89=Y79*20
elseif DB8==2 then
set Y89=Y79*25
elseif DB8==3 then
set Y89=Y79*30
endif
call D28(ZO7,Y89)
call SetUnitAbilityLevel(DA8,1093682502,YD9)
call Q97(JZ7,"Warpath|Level",Y49)
call QG7(GetHandleId(t),"Hero",ZO7)
call QN7(GetHandleId(t),"p",GetOwningPlayer(ZO7))
call TriggerRegisterTimerEvent(t,10.,false)
call TriggerAddCondition(t,Condition(function X_9))
set t=null
set ZO7=null
set DA8=null
endfunction
function YE9 takes unit Z47,boolean XY9 returns nothing
local integer DB8=GetUnitAbilityLevel(Z47,1093682774)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656920,0,0,0)
local trigger t=CreateTrigger()
set LP4="Warpath_LearnAction"
call Z27(oA,1093682502)
call QG7(GetHandleId(Z47),"Warpath|Caster",oA)
call SetUnitInvulnerable(oA,true)
call Z27(oA,1097625443)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X09))
call TriggerAddAction(t,function Y99)
if XY9 then
set Vj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set oA=null
set t=null
endfunction
function YF9 takes nothing returns boolean
if GetLearnedSkill()==1093682774 and GetUnitAbilityLevel(GetTriggerUnit(),1093682774)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call YE9(GetTriggerUnit(),false)
endif
return false
endfunction
function HM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HM8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YF9))
call AC7(1093682502)
set t=null
endfunction
function YG9 takes nothing returns boolean
return(GetSpellAbilityId()==1093682775)and ZG7(GetSpellTargetUnit())==false
endfunction
function R6 takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function R7 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697656901)
endfunction
function R9 takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
set LP4="R9"
call SetUnitPositionLoc(GetEnumUnit(),Mk)
if GetUnitUserData(GetEnumUnit())==4 then
call IssueTargetOrderById(GetEnumUnit(),$D02B6,GetSpellTargetUnit())
else
call IncUnitAbilityLevel(GetEnumUnit(),1093682778)
call IssueTargetOrderById(GetEnumUnit(),$D02B6,GetSpellTargetUnit())
call SetUnitUserData(GetEnumUnit(),(GetUnitUserData(GetEnumUnit())+1))
endif
call RemoveLocation(Mk)
set Mk=null
endfunction
function YH9 takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
local location sA=GetUnitLoc(GetSpellTargetUnit())
local group sb=ZI7()
set LP4="YH9"
if(UnitHasBuffBJ(GetSpellTargetUnit(),1110454869))then
call GroupEnumUnitsOfPlayer(sb,GetOwningPlayer(GetSpellTargetUnit()),Condition(function R7))
call ForGroupBJ(sb,function R9)
else
call GroupEnumUnitsOfPlayer(sb,GetOwningPlayer(GetSpellTargetUnit()),Condition(function R7))
call ForGroupBJ(sb,function R6)
call DisableTrigger(EA)
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellTargetUnit()),Mk,sA)
call EnableTrigger(EA)
call UnitAddAbility(bj_lastCreatedUnit,1093682778)
call SetUnitAbilityLevelSwapped(1093682778,bj_lastCreatedUnit,((GetUnitAbilityLevelSwapped(1093682775,GetTriggerUnit())*4)-3))
call IssueTargetOrderById(bj_lastCreatedUnit,$D02B6,GetSpellTargetUnit())
call SetUnitUserData(bj_lastCreatedUnit,1)
endif
call ZH7(sb)
call RemoveLocation(Mk)
call RemoveLocation(sA)
set Mk=null
set sA=null
set sb=null
endfunction
function HN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HN8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YG9))
call TriggerAddAction(t,function YH9)
set t=null
endfunction
function YI9 takes nothing returns boolean
return(IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function YJ9 takes unit Z47 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
call Z27(DA8,1093683024)
call SetUnitAbilityLevel(DA8,1093683024,GetUnitAbilityLevel(Z47,1093683024))
call IssueImmediateOrderById(DA8,$D022E)
set DA8=null
endfunction
function YK9 takes unit Z47,real BD7 returns nothing
local integer RP7=GetHandleId(Z47)
local real sD=R77(RP7,"Bristleback_DamageStack")
if sD+BD7>$FA then
call QD7(RP7,"Bristleback_DamageStack",((0)*1.))
call YJ9(Z47)
else
call QD7(RP7,"Bristleback_DamageStack",((sD+BD7)*1.))
endif
endfunction
function YM9 takes nothing returns nothing
local unit sE=GetTriggerUnit()
local unit VC8=GetEventDamageSource()
local real sf=MY7(VC8,sE)
local real sF=GetUnitFacing(sE)
local real sg
local real BD7=GetEventDamage()
local real sG
local real RK
set LP4="YM9"
if(BD7>5)and GetUnitState(sE,UNIT_STATE_LIFE)>1 then
if((sF-sf)<(-180.))then
set sg=(sF-sf+360)
else
if((sF-sf)>180.)then
set sg=(sF-sf-360)
else
set sg=(sF-sf)
endif
endif
set RK=RAbsBJ(sg)
if RK<=70 then
set sG=(GetUnitAbilityLevel(sE,1093684531)*.08+.08)*BD7
call YK9(sE,BD7-sG)
call SetUnitState(sE,UNIT_STATE_LIFE,GetUnitState(sE,UNIT_STATE_LIFE)+sG)
elseif RK<=110 then
set sG=(GetUnitAbilityLevel(sE,1093684531)*.04+.04)*BD7
call SetUnitState(sE,UNIT_STATE_LIFE,GetUnitState(sE,UNIT_STATE_LIFE)+sG)
endif
endif
set sE=null
set VC8=null
endfunction
function YN9 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="Dpv"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function YI9))
call TriggerAddAction(t,function YM9)
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function YO9 takes nothing returns boolean
if GetLearnedSkill()==1093684531 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684531)==1 then
call YN9(GetTriggerUnit(),false)
endif
return false
endfunction
function HO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HO8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YO9))
set t=null
endfunction
function YP9 takes nothing returns boolean
return GetSpellAbilityId()==1093683024
endfunction
function YQ9 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1)!=null
endfunction
function YR9 takes nothing returns nothing
local integer YS9=GetHandleId(GetEnumUnit())
local integer YT9=LoadInteger(C7,Y8,YS9)
local real YU9=B87(E8+YT9*30,400)
call UnitDamageTarget(L7,GetEnumUnit(),YU9,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call SaveInteger(C7,Y8,YS9,YT9+1)
endfunction
function YV9 takes nothing returns nothing
local integer YS9=GetHandleId(GetEnumUnit())
local integer YT9=LoadInteger(C7,Y8,YS9)
call SaveInteger(C7,Y8,YS9,YT9-1)
endfunction
function YW9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"UnitVar")
local group FP8=QL7(RP7,"GroupVar")
set Y8=GetHandleId(Z47)
call ForGroup(FP8,function YV9)
call ZH7(FP8)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set FP8=null
return false
endfunction
function YX9 takes nothing returns nothing
local unit U_9=GetTriggerUnit()
local group YY9=ZI7()
local trigger t=CreateTrigger()
set LP4="YX9"
if IsUnitType(U_9,UNIT_TYPE_HERO)==false then
set U_9=G7[GetPlayerId(GetOwningPlayer(U_9))]
endif
call GroupEnumUnitsInRange(YY9,GetUnitX(U_9),GetUnitY(U_9),650,Condition(function YQ9))
set L7=CreateUnit(GetOwningPlayer(U_9),1697656901,GetUnitX(U_9),GetUnitY(U_9),0)
set E8=GetUnitAbilityLevel(U_9,1093683024)*20
set Y8=GetHandleId(U_9)
call ForGroup(YY9,function YR9)
call QG7(GetHandleId(t),"UnitVar",U_9)
call QP7(GetHandleId(t),"GroupVar",YY9)
call TriggerRegisterTimerEvent(t,10.,false)
call TriggerAddCondition(t,Condition(function YW9))
set t=null
set U_9=null
set YY9=null
endfunction
function HP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HP8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YP9))
call TriggerAddAction(t,function YX9)
set t=null
endfunction
function YZ9 takes nothing returns nothing
call D38(E_7,GetEnumUnit(),1,F47)
endfunction
function YA9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(p5,1093816142)
local real YB9
local group g=ZI7()
set F47=100+DB8*75
set E_7=p5
set IM4=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),$BE+25,Condition(function LQ7))
call ForGroup(g,function YZ9)
set YB9=F47
if GetUnitState(p5,UNIT_STATE_LIFE)<=YB9*.75 then
set YB9=GetUnitState(p5,UNIT_STATE_LIFE)/ .75-$A
endif
call D38(p5,p5,1,YB9)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DoubleEdgeTarget.mdx",GetUnitX(m5),GetUnitY(m5)))
set p5=null
set m5=null
endfunction
function YC9 takes nothing returns boolean
if GetSpellAbilityId()==1093816142 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call YA9()
else
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DoubleEdgeCaster.mdx",GetTriggerUnit(),"hand, right"))
endif
endif
return false
endfunction
function HQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HQ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function YC9))
set t=null
endfunction
function Y39 takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093677142)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)!=1 and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitTypeId(GetAttacker())!=1848657461
endfunction
function Y69 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetAttacker()
local integer DB8=GetUnitAbilityLevel(CP7,1093677142)
local integer YL9=GetHeroStr(CP7,true)
local real YU9=($E+2*DB8)+(.18+.08*DB8)*YL9
set LP4="Y69"
call D38(CP7,J67,2,YU9)
set CP7=null
set J67=null
endfunction
function HR8 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function Y39))
call TriggerAddAction(t,function Y69)
set t=null
endfunction
function Y19 takes nothing returns nothing
local integer Y09
local unit Y59=GetEnumUnit()
if Y57(Y59)==false and RG7(Y59,"Stampede|4332")==false then
call RR7(Y59,"Stampede|4332",3.75)
set Y09=F97
call D38(F87,Y59,1,(Y09)*GetHeroStr(F77,true))
call SetPlayerAbilityAvailable(GetOwningPlayer(Y59),1093816139,false)
call Z27(Y59,1093816139)
call CA7(Y59,1093816139,1,1.25,1110460230)
endif
set Y59=null
endfunction
function Y29 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local group g
if GetTriggerEvalCount(t)>=R2I(20*3.75)or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitPathing(CP7,true)
call UnitRemoveAbility(CP7,1093816116)
call UnitRemoveAbility(CP7,1110460226)
else
set g=ZI7()
set IM4=CP7
set F77=DA8
set F87=CP7
set F97=DB8
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),105+25,Condition(function LF7))
call ForGroup(g,function Y19)
call ZH7(g)
endif
set t=null
set CP7=null
set g=null
return false
endfunction
function Y_9 takes nothing returns nothing
local unit CP7=GetEnumUnit()
local integer DB8=GetUnitAbilityLevel(F77,1093816118)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SetUnitPathing(CP7,false)
call Z27(CP7,1093816116)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function Y29))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(F77))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",CP7,"foot, left")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\SandBreathDamageSmall.mdx",CP7,"foot, right")))
set CP7=null
set t=null
endfunction
function Z49 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g=ZI7()
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set F77=CP7
set IM4=CP7
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function DK8))
call ForGroup(g,function Y_9)
call ZH7(g)
set t=null
set CP7=null
set g=null
return false
endfunction
function Z79 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local sound Z89=CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,$A,$A,"DefaultEAXON")
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call StartSound(Z89)
call KillSoundWhenDone(Z89)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function Z49))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set Z89=null
endfunction
function Z99 takes nothing returns boolean
if GetSpellAbilityId()==1093816118 then
call Z79()
endif
return false
endfunction
function HS8 takes nothing returns nothing
local trigger t=CreateTrigger()
call AC7(1093816116)
call AC7(1093687350)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z99))
call CreateSound("abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",false,false,false,$A,$A,"DefaultEAXON")
set t=null
endfunction
function ZD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X37=R47(RP7,"Level")
local real so
set LP4="ZD9"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>$A then
set so=GetEventDamage()*.08*X37
call DisableTrigger(t)
call D38(GetEventDamageSource(),GetTriggerUnit(),2,so)
call EnableTrigger(t)
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
return false
endfunction
function ZE9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093684045)
set LP4="ZE9"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",p5,"chest"))
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,7.,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ZD9))
set t=null
set m5=null
set p5=null
endfunction
function ZF9 takes nothing returns boolean
if GetSpellAbilityId()==1093684045 then
call ZE9()
endif
return false
endfunction
function HT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZF9))
set t=null
endfunction
function ZG9 takes nothing returns boolean
return GetSpellAbilityId()==1093684308 or GetSpellAbilityId()==1093747539
endfunction
function sq takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function ZH9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer sr=GetUnitAbilityLevel(Z47,1093684308)
local group FP8=JG7(bj_mapInitialPlayableArea,Condition(function sq))
local unit PZ
set LP4="ZH9"
if sr==0 then
set sr=GetUnitAbilityLevel(Z47,1093747539)
endif
loop
set PZ=FirstOfGroup(FP8)
exitwhen PZ==null
if(IsUnitAlly(PZ,GetOwningPlayer(Z47)))then
call SetWidgetLife(PZ,(GetUnitStateSwap(UNIT_STATE_LIFE,PZ)+100+(100*sr)))
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",PZ,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(FP8,PZ)
endloop
call DestroyGroup(FP8)
set FP8=JH7(bj_mapInitialPlayableArea,GetOwningPlayer(Z47))
loop
set PZ=FirstOfGroup(FP8)
exitwhen PZ==null
if(IsUnitType(PZ,UNIT_TYPE_HERO)==false and GetUnitTypeId(PZ)!=1848651843)then
call SetUnitLifePercentBJ(PZ,100)
call DestroyEffect(AddSpecialEffectTargetUnitBJ("chest",PZ,"Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl"))
endif
call GroupRemoveUnit(FP8,PZ)
endloop
call DestroyGroup(FP8)
set Z47=null
set FP8=null
set PZ=null
endfunction
function HU8 takes nothing returns nothing
set do=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(do,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(do,Condition(function ZG9))
call TriggerAddAction(do,function ZH9)
endfunction
function ZI9 takes nothing returns boolean
return GetSpellAbilityId()==1093684310 or GetSpellAbilityId()==1093815619
endfunction
function ZJ9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit st=QA7(RP7,"Chen")
local unit u=QA7(RP7,"Unit")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
set LP4="ZJ9"
call DestroyEffect(Q17(RP7,"FX"))
if R87(GetHandleId(u),"Grapple")==false and GetUnitAbilityLevel(u,1093678162)==0 then
call RR7(u,"4409",1)
call SetUnitPosition(u,x,y)
endif
if R87(GetHandleId(u),"Grapple")then
call AV7(GetOwningPlayer(st),GetObjectName(1848652598))
endif
call Q47(RP7)
call RN7(t)
set t=null
set st=null
set u=null
return false
endfunction
function ZK9 takes unit u,unit ZM9,integer KR7,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="Preservation_PortUnit"
if IsUnitOwnedByPlayer(u,GetOwningPlayer(ZM9))then
call TriggerRegisterTimerEvent(t,.1,false)
else
call TriggerRegisterTimerEvent(t,7-KR7,false)
endif
call TriggerAddCondition(t,Condition(function ZJ9))
call QH7(JZ7,"FX",AddSpecialEffectTarget("effects\\Test_of_Faith_FX.mdx",u,"overhead"))
call QG7(JZ7,"Unit",u)
call QG7(JZ7,"Chen",ZM9)
call QD7(JZ7,"x",x)
call QD7(JZ7,"y",y)
set t=null
endfunction
function ZN9 takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit st=GetTriggerUnit()
local location Mk=GetUnitLoc(st)
local unit oA
local integer sr=GetUnitAbilityLevel(st,1093684310)
local real sX
local location sy
local effect fx
set LP4="ZN9"
if(WM7(GetOwningPlayer(st)))then
set sy=GetRectCenter(L9)
else
set sy=GetRectCenter(C9)
endif
if(IsUnitAlly(m5,GetOwningPlayer(st))==false)then
if ZG7(GetSpellTargetUnit())==false then
set sX=GetRandomInt(50*sr,100*sr)
call BO7(I2S(R2I(sX)),1,m5,.023,$FF,$FF,0,$D8)
call UnitDamageTargetBJ(st,m5,sX,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)
set fx=AddSpecialEffectTargetUnitBJ("chest",m5,"Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
call DestroyEffect(fx)
endif
else
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(R87(GetHandleId(GetOwningPlayer(m5)),"DisableHelp")==false)then
call ZK9(m5,st,sr,GetLocationX(sy),GetLocationY(sy))
endif
elseif(IsUnitOwnedByPlayer(m5,GetOwningPlayer(st)))then
call SetUnitPositionLoc(m5,sy)
endif
endif
call RemoveLocation(Mk)
call RemoveLocation(sy)
set m5=null
set st=null
set Mk=null
set oA=null
set sy=null
set fx=null
endfunction
function ZO9 takes nothing returns boolean
if GetLearnedSkill()==1093684310 and IsUnitIllusion(GetTriggerUnit())==false then
call Z27(GetTriggerUnit(),1093815619)
call SetUnitAbilityLevel(GetTriggerUnit(),1093815619,GetUnitAbilityLevel(GetTriggerUnit(),1093684310))
endif
return false
endfunction
function HW8 takes nothing returns nothing
local trigger t
set VJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(VJ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(VJ,Condition(function ZI9))
call TriggerAddAction(VJ,function ZN9)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZO9))
endfunction
function ZP9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1095262562)
if A47(CP7)==false then
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)+.5*DB8*.25)
endif
set CP7=null
set t=null
return false
endfunction
function ZQ9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function ZP9))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function ZR9 takes nothing returns boolean
if GetLearnedSkill()==1095262562 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095262562)==1 then
call ZQ9()
endif
return false
endfunction
function HX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZR9))
set t=null
endfunction
function ZS9 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697657656,x,y,0)
local integer DB8=GetUnitAbilityLevel(CP7,1093748025)
set LP4="ZS9"
call Z27(DA8,1093677380)
call SetUnitAbilityLevel(DA8,1093677380,DB8)
call IssueTargetOrderById(DA8,$D0102,DA8)
call RemoveLocation(l)
call Z27(DA8,1097625443)
call UnitApplyTimedLife(DA8,1112820806,2)
set CP7=null
set DA8=null
set l=null
endfunction
function ZT9 takes nothing returns boolean
if GetSpellAbilityId()==1093748025 then
call ZS9()
endif
return false
endfunction
function HY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZT9))
set t=null
endfunction
function ZU9 takes nothing returns boolean
return(GetSpellAbilityId()==1093678649)
endfunction
function ZV9 takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAliveBJ(GetFilterUnit()))and(not OI7(GetFilterUnit()))and(GetUnitTypeId(GetFilterUnit())!=1852010352)and(GetUnitAbilityLevel(GetFilterUnit(),1097167976)==1)and((GetUnitAbilityLevel(GetFilterUnit(),1093684047)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684049)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684050)==1)or(GetUnitAbilityLevel(GetFilterUnit(),1093684048)==1)))!=null
endfunction
function sS takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit st=QA7(RP7,"Chen")
local integer sT=R47(RP7,"MaxUnits")
local group FP8=JJ7(GetOwningPlayer(st),Condition(function ZV9))
local unit PZ
set LP4="sS"
loop
exitwhen(CountUnitsInGroup(FP8)<=sT)
set PZ=GroupPickRandomUnit(FP8)
call GroupRemoveUnit(FP8,PZ)
call RemoveUnit(PZ)
endloop
call DestroyGroup(FP8)
call Q47(RP7)
call RN7(t)
set st=null
set t=null
set FP8=null
set PZ=null
return false
endfunction
function ZW9 takes nothing returns nothing
local unit sU=GetSpellTargetUnit()
local unit st=GetTriggerUnit()
local integer sr=GetUnitAbilityLevel(st,1093678649)
local integer sT=1
local integer playerid=GetPlayerId(GetOwningPlayer(st))
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="ZW9"
call BG7(sU)
if(sr==1)then
call Z27(sU,1093684047)
elseif(sr==2)then
call Z27(sU,1093684049)
elseif(sr==3)then
set sT=2
call Z27(sU,1093684050)
elseif(sr==4)then
set sT=3
call Z27(sU,1093684048)
endif
call Z27(sU,1097167976)
call Z27(sU,1093743175)
call QG7(RP7,"Chen",st)
call Q97(RP7,"MaxUnits",sT)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function sS))
set t=null
set sU=null
set st=null
endfunction
function ZX9 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8
local real x
local real y
set LP4="ZX9"
if IsUnitEnemy(J67,GetOwningPlayer(CP7))then
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1093678649)
call SetUnitAbilityLevel(DA8,1093678649,GetUnitAbilityLevel(CP7,1093810260))
call IssueTargetOrderById(DA8,$D0265,J67)
else
if WM7(GetOwningPlayer(CP7))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
if(R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))==false then
call ZK9(J67,CP7,GetUnitAbilityLevel(CP7,1093810260),x,y)
endif
endif
set CP7=null
set J67=null
set DA8=null
endfunction
function ZY9 takes nothing returns boolean
if GetSpellAbilityId()==1093810260 and ZG7(GetSpellTargetUnit())==false then
call ZX9()
endif
return false
endfunction
function ZZ9 takes nothing returns boolean
if GetSpellAbilityId()==1093810260 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) then
if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO) or IsUnitIllusion(GetSpellTargetUnit())then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658745))
endif
endif
endif
return false
endfunction
function HV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZU9))
call TriggerAddAction(t,function ZW9)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZZ9))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZY9))
set t=null
endfunction
function ZA9 takes nothing returns nothing
call D38(FB,GetEnumUnit(),1,fB)
endfunction
function ZB9 takes unit p5,real x,real y,integer X37 returns nothing
local group g=ZI7()
set LP4="D2v"
if X37==1 then
set fB=105
elseif X37==2 then
set fB=$AA
elseif X37==3 then
set fB=$FA
elseif X37==4 then
set fB=310
endif
set FB=p5
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,$F0,Condition(function LF7))
call ForGroup(g,function ZA9)
call ZH7(g)
set g=null
endfunction
function ZC9 takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(IM4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="ZC9"
call Z27(oA,1093742676)
call IssueTargetOrderById(oA,$D006B,GetEnumUnit())
set oA=null
endfunction
function Z39 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
local integer Z69=ModuloInteger(GetTriggerEvalCount(t),4)+1
local real a
local real d
local real x
local real y
local group g=ZI7()
set LP4="Z39"
set IM4=Z47
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),710,Condition(function LF7))
call ForGroup(g,function ZC9)
if Z69==1 then
set a=GetRandomReal(0,90)
elseif Z69==2 then
set a=GetRandomReal(90,$B4)
elseif Z69==3 then
set a=GetRandomReal($B4,270)
else
set a=GetRandomReal(270,360)
endif
set d=GetRandomReal($8C,710)
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and(GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494)then
call Q47(RP7)
call RN7(t)
call StopSound(vX,false,true)
else
set x=GetUnitX(Z47)+d*Cos(a*bj_DEGTORAD)
set y=GetUnitY(Z47)+d*Sin(a*bj_DEGTORAD)
call DestroyEffect(AddSpecialEffect("effects\\SnowyBlizzardTarget.mdx",x,y))
call ZB9(Z47,x,y,X37)
endif
call ZH7(g)
set t=null
set g=null
set Z47=null
return false
endfunction
function ZL9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37
set LP4="ZL9"
call BY7(vX,GetUnitX(Z47),GetUnitY(Z47))
if GetSpellAbilityId()==1093677906 then
set X37=GetUnitAbilityLevel(Z47,1093677906)
else
set X37=GetUnitAbilityLevel(Z47,1093681494)+1
endif
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function Z39))
call QG7(RP7,"Hero",Z47)
call Q97(RP7,"Level",X37)
set t=null
set Z47=null
endfunction
function Z19 takes nothing returns boolean
if GetSpellAbilityId()==1093677906 or GetSpellAbilityId()==1093681494 then
call ZL9()
endif
return false
endfunction
function HZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z19))
call AC7(1093677912)
set t=null
endfunction
function Z09 takes unit CP7 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093812553)
if GetUnitTypeId(CP7)==1215063922 then
call SetUnitAbilityLevel(CP7,1093681490,DB8)
else
call SetUnitAbilityLevel(CP7,1093681490,DB8+4)
endif
endfunction
function Z59 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093812553)
if DB8==1 then
call Z27(CP7,1093681490)
endif
call Z09(CP7)
set CP7=null
endfunction
function Z29 takes nothing returns boolean
if GetLearnedSkill()==1093812553 and IsUnitIllusion(GetTriggerUnit())==false then
call Z59()
endif
return false
endfunction
function Z_9 takes nothing returns nothing
local unit u=GetTriggerUnit()
if GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 then
call SetUnitAnimation(u,"stand")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"head"))
elseif GetUnitTypeId(u)==1215063922 then
call SetUnitAnimation(u,"stand defend")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",u,"origin"))
endif
set u=null
endfunction
function A49 takes nothing returns boolean
if GetSpellAbilityId()==1093681490 then
call Z_9()
endif
return false
endfunction
function NZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A49))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Z29))
call AC7(1093681490)
set t=null
endfunction
function A79 takes nothing returns boolean
return GetLearnedSkill()==1093681996 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function A89 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
set LP4="A89"
call SetPlayerTechResearched(GetOwningPlayer(Z47),1378889782,GetPlayerTechCount(GetOwningPlayer(Z47),1378889782,true)+1)
set Z47=null
endfunction
function NY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NY8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function A79))
call TriggerAddAction(t,function A89)
set t=null
endfunction
function A99 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call Z09(CP7)
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
set t=null
set CP7=null
return false
endfunction
function AD9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call Z09(CP7)
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
set t=null
set CP7=null
return false
endfunction
function GO8 takes nothing returns nothing
if GetUnitAbilityLevel(IM4,1093681490)>0 then
call Z09(IM4)
endif
endfunction
function AE9 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function A99))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function AD9))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function AF9 takes nothing returns boolean
if GetSpellAbilityId()==1093677895 then
call AE9()
endif
return false
endfunction
function NA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AF9))
set t=null
endfunction
function AG9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="AG9"
call SetUnitX(YZ[id],x)
call SetUnitY(YZ[id],y)
if GetPlayerController(GetOwningPlayer(YZ[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(YZ[id],1093682253)
call SetUnitAbilityLevel(YZ[id],1093682253,ZZ)
endif
call IssueImmediateOrderById(YZ[id],$D022E)
endfunction
function AH9 takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local integer id=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="AH9"
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call SetUnitX(YZ[id],x)
call SetUnitY(YZ[id],y)
if GetPlayerController(GetOwningPlayer(YZ[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(YZ[id],1093682253)
call SetUnitAbilityLevel(YZ[id],1093682253,ZZ)
endif
call IssueImmediateOrderById(YZ[id],$D022E)
endif
endfunction
function AI9 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())) and A47(GetFilterUnit())==false)!=null
endfunction
function AJ9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=ZI7()
local integer id=GetPlayerId(GetOwningPlayer(p5))
local integer X37=GetUnitAbilityLevel(p5,1093682248)
set LP4="AJ9"
if X37==0 then
set X37=GetUnitAbilityLevel(p5,1093750594)
endif
set YZ[id]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
set zZ[id]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
set ZZ=X37
call SetUnitScale(YZ[id],.25,.25,.25)
call Z27(YZ[id],1093682253)
call Z27(zZ[id],1093748784)
call SetUnitAbilityLevel(YZ[id],1093682253,X37)
call SetUnitAbilityLevel(zZ[id],1093748784,X37)
call GroupEnumUnitsInRange(g,x,y,575,Condition(function AI9))
call ForGroup(g,function AG9)
if GetUnitAbilityLevel(p5,1093750594)>0 then
call ForGroup(g,function AH9)
endif
call ZH7(g)
set p5=null
set g=null
endfunction
function AK9 takes nothing returns boolean
if GetSpellAbilityId()==1093682248 or GetSpellAbilityId()==1093750594 then
call AJ9()
endif
return false
endfunction
function HA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HA8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AK9))
set t=null
call AC7(1093682253)
endfunction
function AM9 takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="AM9"
call Z27(oA,1093686090)
call SetUnitAbilityLevel(oA,1093686090,IG4)
call IssueTargetOrderById(oA,$D007F,GetEnumUnit())
call D38(GetTriggerUnit(),GetEnumUnit(),1,IH4)
set oA=null
endfunction
function AN9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local location l=GetSpellTargetLoc()
local integer i=1
local real iN=GetUnitX(Z47)
local real io=GetUnitY(Z47)
local real hN
local real ho
local real x
local real y
local real a
local group g=ZI7()
local group g2=ZI7()
set LP4="AN9"
if m5==null then
set hN=GetLocationX(l)
set ho=GetLocationY(l)
else
set hN=GetUnitX(m5)
set ho=GetUnitY(m5)
endif
set a=bj_DEGTORAD*MZ7(iN,io,hN,ho)
call RemoveLocation(l)
loop
exitwhen i>20
set x=AY7(iN+i*60*Cos(a))
set y=AZ7(io+i*60*Sin(a))
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LV7))
call GroupAddGroup(g2,g)
call GroupClear(g2)
call CE7(CreateDestructable(1110454320,x,y,GetRandomReal(0,360),.5,GetRandomInt(0,2)),8)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))
set i=i+1
endloop
set IG4=GetUnitAbilityLevel(Z47,1093686091)
set IH4=IG4*50+75
call ForGroup(g,function AM9)
call ZH7(g)
call ZH7(g2)
set Z47=null
set l=null
set m5=null
set g=null
set g2=null
endfunction
function AO9 takes nothing returns boolean
if GetSpellAbilityId()==1093686091 then
call AN9()
endif
return false
endfunction
function HB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AO9))
call AC7(1093686090)
set t=null
endfunction
function AP9 takes nothing returns boolean
return((GetUnitAbilityLevel(GetSpellAbilityUnit(),1093682250)>0)and(((GetSpellAbilityId()==1093686091)or(GetSpellAbilityId()==1093682252)or(GetSpellAbilityId()==1093682248)or(GetSpellAbilityId()==1093750594)))or(GetUnitPointValue(GetTriggerUnit())==500)and XW7(GetSpellAbilityId()))
endfunction
function AQ9 takes nothing returns nothing
local location sb=GetUnitLoc(GetTriggerUnit())
set LP4="AQ9"
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),sb,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093682249)
call SetUnitAbilityLevelSwapped(1093682249,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093682250,GetSpellAbilityUnit()))
call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)
call RemoveLocation(sb)
set sb=null
endfunction
function HC8 takes nothing returns nothing
set dq=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dq,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(dq,Condition(function AP9))
call TriggerAddAction(dq,function AQ9)
endfunction
function AR9 takes nothing returns boolean
return((GetItemTypeId(GetManipulatedItem())==1227894859)and(GetUnitTypeId(GetTriggerUnit())==1333027688))
endfunction
function AS9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="AS9"
call Z27(oA,1095332466)
call IssueImmediateOrderById(oA,$D00C4)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set oA=null
return false
endfunction
function AT9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="AT9"
call UnitRemoveAbility(Z47,1110454608)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function AS9))
set t=null
set Z47=null
endfunction
function H38 takes nothing returns nothing
set H54=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(H54,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(H54,Condition(function AR9))
call TriggerAddAction(H54,function AT9)
endfunction
function AU9 takes nothing returns boolean
return(UnitHasBuffBJ(GetAttacker(),1114795873))
endfunction
function AV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="AV9"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call UnitRemoveAbility(CP7,1114795873)
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function AW9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
set LP4="AW9"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function AV9))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set CP7=null
set J67=null
endfunction
function H68 takes nothing returns nothing
set dr=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dr,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dr,Condition(function AU9))
call TriggerAddAction(dr,function AW9)
endfunction
function AX9 takes unit u returns boolean
return IsUnitType(u,UNIT_TYPE_HERO)==false and IsUnitType(u,UNIT_TYPE_ANCIENT)==false and GetUnitTypeId(u)!=1848652101 and GetUnitTypeId(u)!=1848652089
endfunction
function AY9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="AY9"
call UnitRemoveAbility(J67,1114860655)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set J67=null
return false
endfunction
function AZ9 takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="AZ9"
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function AY9))
call SaveUnitHandle(C7,(JZ7),(17),(m5))
call SetUnitOwner(m5,GetOwningPlayer(p5),true)
call UnitApplyTimedLife(m5,1112820806,80)
call Z27(m5,1097167976)
call Z27(m5,1093743175)
call BG7(m5)
set m5=null
set p5=null
set t=null
endfunction
function AA9 takes nothing returns boolean
if GetSpellAbilityId()==1093682264 and AX9(GetSpellTargetUnit())then
call AZ9()
endif
return false
endfunction
function HL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HL8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AA9))
set t=null
endfunction
function AB9 takes nothing returns boolean
return ji()and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)!=GetUnitState(GetFilterUnit(),UNIT_STATE_MAX_LIFE)
endfunction
function AC9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer Rd=R47(RP7,"Counter")
local group g
local unit G58
set LP4="AC9"
if Rd>$A then
call Q47(RP7)
call RN7(t)
else
call Q97(RP7,"Counter",Rd+1)
set IM4=p5
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),300,Condition(function AB9))
set G58=GroupPickRandomUnit(g)
call ZH7(g)
call SetUnitState(G58,UNIT_STATE_LIFE,GetUnitState(G58,UNIT_STATE_LIFE)+$A)
endif
set t=null
set p5=null
set g=null
set G58=null
return false
endfunction
function A39 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="A39"
call AddUnitAnimationProperties(CP7,"alternate",false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function A69 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer i=1
local trigger t
local integer JZ7
set LP4="A69"
loop
exitwhen i>(1+2*GetUnitAbilityLevel(p5,1093677378))
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",p5)
call Q97(GetHandleId(t),"Counter",0)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function AC9))
set i=i+1
endloop
if GetUnitTypeId(p5)==1160786520 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function A39))
call SaveUnitHandle(C7,(JZ7),(2),(p5))
set t=null
endif
set t=null
set p5=null
endfunction
function AL9 takes nothing returns boolean
if GetSpellAbilityId()==1093677378 then
call A69()
endif
return false
endfunction
function H18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AL9))
set t=null
endfunction
function A19 takes real x1,real y1,real x2,real y2 returns real
return SquareRoot(((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2)))
endfunction
function A09 takes unit u returns integer
local integer DB8=GetUnitAbilityLevel(u,1093682265)
if DB8>0 then
return DB8
endif
set DB8=GetUnitAbilityLevel(u,1093752642)
return DB8
endfunction
function A59 takes nothing returns boolean
local real d
local real A29
set LP4="A59"
if GetUnitAbilityLevel(GetTriggerUnit(),1110455125)>0 and A09(GetEventDamageSource())>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455125)
set A29=RMinBJ(A19(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitX(GetEventDamageSource()),GetUnitY(GetEventDamageSource())),$9C4)
set d=(.1+.05*I2R(A09(GetEventDamageSource())))*A29
call BO7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,3,$D8,$D8,$D8)
call DisableTrigger(GetTriggeringTrigger())
call D38(GetEventDamageSource(),GetTriggerUnit(),3,d)
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function A_9 takes nothing returns nothing
local trigger t
local unit m5
local unit p5
set LP4="A_9"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function A59))
endif
set t=null
set m5=null
set p5=null
endfunction
function Sn takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if A09(GetAttacker())>0 and(R87(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")then
call A_9()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093682265 or GetSpellAbilityId()==1093752642)then
call A_9()
endif
return false
endfunction
function B49 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="fDv"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function Sn))
call QG7(GetHandleId(t),"Hero",Z47)
if XY9 then
set Vj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function B79 takes nothing returns boolean
if(GetLearnedSkill()==1093682265 or GetLearnedSkill()==1093752642)and IsUnitIllusion(GetTriggerUnit())==false and A09(GetTriggerUnit())==1 then
call B49(GetTriggerUnit(),false)
endif
return false
endfunction
function H08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H08"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function B79))
set t=null
endfunction
function B89 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
return GetUnitAbilityLevel(GetSpellTargetUnit(),1093682263)>0
else
return GetUnitAbilityLevel(GetTriggerUnit(),1093682263)>0
endif
endfunction
function B99 takes nothing returns nothing
local unit p5
local unit m5
local unit oA
set LP4="B99"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
set p5=GetSpellTargetUnit()
set m5=GetTriggerUnit()
else
set p5=GetTriggerUnit()
set m5=GetAttacker()
endif
set oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(oA,1093681712)
call SetUnitAbilityLevel(oA,1093681712,GetUnitAbilityLevel(p5,1093682263))
call IssueTargetOrderById(oA,$D02B6,m5)
set p5=null
set m5=null
set oA=null
endfunction
function H58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H58"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B89))
call TriggerAddAction(t,function B99)
set t=null
endfunction
function BD9 takes real x returns real
local real H7=GetRectMinX(bj_mapInitialPlayableArea)+$96
set LP4="fGv"
if(x<H7)then
return H7
endif
set H7=GetRectMaxX(bj_mapInitialPlayableArea)-$96
if(x>H7)then
return H7
endif
return x
endfunction
function BE9 takes real y returns real
local real H7=GetRectMinY(bj_mapInitialPlayableArea)+$96
set LP4="fhv"
if(y<H7)then
return H7
endif
set H7=GetRectMaxY(bj_mapInitialPlayableArea)-$96
if(y>H7)then
return H7
endif
return y
endfunction
function BF9 takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return id==1852862003 or id==1852862006 or id==1848652080 or id==1848657754 or id==1852862001 or id==1852862004 or id==1848652081 or id==1848657968 or id==1852862002 or id==1852862005 or id==1848652082 or id==1848657969
endfunction
function BG9 takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or BF9(GetFilterUnit())or CC7(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1848651861 or GetUnitTypeId(GetFilterUnit())==1848651865 or GetUnitTypeId(GetFilterUnit())==1848651866 or GetUnitTypeId(GetFilterUnit())==1848658773 or GetUnitTypeId(GetFilterUnit())==1848658774 or GetUnitTypeId(GetFilterUnit())==1848658775 or YG7(GetUnitTypeId(GetFilterUnit())))and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(QA7(GetHandleId(GetTriggeringTrigger()),"BlackHole"))))!=null
endfunction
function BH9 takes nothing returns nothing
local location BI9=GetUnitLoc(GetEnumUnit())
local location BJ9=GetUnitLoc(QA7(GetHandleId(GetTriggeringTrigger()),"BlackHole"))
local location BK9=OF7(BJ9,DistanceBetweenPoints(BJ9,BI9)-2,AngleBetweenPoints(BJ9,BI9))
set LP4="BH9"
call SetUnitPositionLoc(GetEnumUnit(),BK9)
call RemoveLocation(BI9)
call RemoveLocation(BJ9)
call RemoveLocation(BK9)
set BI9=null
set BJ9=null
set BK9=null
endfunction
function BM9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local group FP8
local integer RP7=GetHandleId(t)
local unit BN9=QA7(RP7,"BlackHole")
local unit DA8
local real x
local real y
set LP4="BM9"
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747288 then
call KillUnit(BN9)
set DA8=QA7(RP7,"Caster")
call UnitApplyTimedLife(QA7(RP7,"Shadow1"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow2"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow3"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow4"),1112820806,1)
call Q47(RP7)
call RN7(t)
call KillUnit(DA8)
elseif GetTriggerEvalCount(t)>90 then
set DA8=QA7(RP7,"Caster")
call UnitApplyTimedLife(QA7(RP7,"Shadow1"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow2"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow3"),1112820806,1)
call UnitApplyTimedLife(QA7(RP7,"Shadow4"),1112820806,1)
call Q47(RP7)
call RN7(t)
call KillUnit(BN9)
call KillUnit(DA8)
call OD7(QA7(RP7,"Source"))
else
set x=GetUnitX(BN9)
set y=GetUnitY(BN9)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,400,Condition(function BG9))
call ForGroup(FP8,function BH9)
call ZH7(FP8)
endif
set DA8=null
set BN9=null
set t=null
set FP8=null
return false
endfunction
function BO9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local unit BN9=CreateUnit(GetOwningPlayer(p5),1966092340,x,y,0)
set LP4="BO9"
call RemoveLocation(l)
call SetUnitAbilityLevel(BN9,1093681968,GetUnitAbilityLevel(p5,1093747288))
if WN7(GetOwningPlayer(p5))then
call Z27(DA8,1093687348)
else
call Z27(DA8,1093687347)
endif
call IssuePointOrderById(DA8,$D01F9,x,y)
call QG7(RP7,"Caster",DA8)
call QG7(RP7,"Shadow1",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call QG7(RP7,"Shadow2",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call QG7(RP7,"Shadow3",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call QG7(RP7,"Shadow4",CreateUnit(GetOwningPlayer(p5),1747990098,x,y,0))
call QG7(RP7,"BlackHole",BN9)
call QG7(RP7,"Source",p5)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function BM9))
set p5=null
set BN9=null
set t=null
set l=null
set DA8=null
endfunction
function BP9 takes nothing returns boolean
if GetSpellAbilityId()==1093747288 then
call BO9()
endif
return false
endfunction
function BQ9 takes nothing returns boolean
local location l
local real x
local real y
set LP4="BQ9"
if GetSpellAbilityId()==1093747288 then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
set l=null
if(x!=BD9(x)and y!=BE9(y))or RectContainsCoords(eE,x,y)or RectContainsCoords(oE,x,y)or RectContainsCoords(aE,x,y)or RectContainsCoords(nE,x,y)or RectContainsCoords(VE,x,y)or RectContainsCoords(EE,x,y)then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),"Cannot cast Blackhole here")
endif
endif
return false
endfunction
function H28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BP9))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function BQ9))
call AC7(1093681968)
set t=null
endfunction
function BR9 takes unit p5,unit m5,integer X37 returns nothing
local real BD7
set LP4="Malefice_Stun"
if X37==1 then
set BD7=40
elseif X37==2 then
set BD7=40
elseif X37==3 then
set BD7=65
else
set BD7=65
endif
call DZ8(m5,m5,1)
call D38(p5,m5,1,BD7)
endfunction
function BS9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
set LP4="BS9"
call BR9(p5,m5,X37)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function SW takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t
local integer RP7
local integer X37=GetUnitAbilityLevel(p5,1093683511)
set LP4="SW"
call BR9(p5,m5,X37)
if X37>1 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function BS9))
endif
if X37==4 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function BS9))
endif
set t=null
set p5=null
set m5=null
endfunction
function BT9 takes nothing returns boolean
if GetSpellAbilityId()==1093683511 and ZG7(GetSpellTargetUnit())==false then
call SW()
endif
return false
endfunction
function H_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="H_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BT9))
set t=null
endfunction
function BU9 takes nothing returns boolean
return(GetSpellAbilityId()==1093681713)
endfunction
function BV9 takes nothing returns nothing
local location sb=GetUnitLoc(GetTriggerUnit())
local location Sa=GetSpellTargetLoc()
local integer kt=GetUnitAbilityLevel(GetTriggerUnit(),1093681713)
local unit BW9
set LP4="BV9"
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetTriggerUnit()),Sa,Sa)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(8.,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093681714)
call SetUnitAbilityLevelSwapped(1093681714,bj_lastCreatedUnit,kt)
call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D00FD,Sa)
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_USER)then
set BW9=bj_lastCreatedUnit
loop
call NX7(.9)
exitwhen(IsUnitDeadBJ(BW9))
if(GetUnitCurrentOrder(BW9)!=$D00FD)then
call UnitRemoveAbility(BW9,1093681714)
call UnitAddAbility(BW9,1093681714)
call SetUnitAbilityLevelSwapped(1093681714,BW9,kt)
call IssuePointOrderByIdLoc(BW9,$D00FD,Sa)
endif
endloop
endif
call RemoveLocation(sb)
call RemoveLocation(Sa)
set BW9=null
set sb=null
set Sa=null
endfunction
function I48 takes nothing returns nothing
set dR=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dR,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(dR,Condition(function BU9))
call TriggerAddAction(dR,function BV9)
endfunction
function BX9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local integer X37=GetUnitAbilityLevel(p5,1093744688)
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
set LP4="BX9"
call SetUnitState(m5,UNIT_STATE_LIFE,1)
call D38(p5,m5,2,20)
call D38(p5,m5,1,20)
call D38(p5,m5,3,20)
call Z27(oA,1093744474)
call SetUnitAbilityLevel(oA,1093744474,X37)
call IssueImmediateOrderById(oA,$D02BB)
set p5=null
set m5=null
set oA=null
endfunction
function BY9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer BZ9=GetUnitLevel(m5)
set LP4="BY9"
if GetOwningPlayer(m5)!=Y7[0]and GetOwningPlayer(m5)!=Z7[0]and BZ9>4 then
call OD7(Z47)
call AV7(GetOwningPlayer(Z47),(GetObjectName((1848656728))))
endif
set Z47=null
set m5=null
endfunction
function BA9 takes nothing returns boolean
if GetSpellAbilityId()==1093744688 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call BX9()
else
call BY9()
endif
endif
return false
endfunction
function I78 takes nothing returns nothing
local trigger t=CreateTrigger()
local region regDemonicConversion=CreateRegion()
set LP4="I78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function BA9))
set t=null
endfunction
function SZ takes nothing returns nothing
local integer O5=0
set LP4="SZ"
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
call GroupAddUnit(IP4,GetEnumUnit())
call D38(IM4,GetEnumUnit(),1,IH4)
if((IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(IsUnitInForce(IM4,QW4)))then
set O5=GetPlayerId(GetOwningPlayer(IM4))
if((hq[$F0+O5]>Bz)and(h4[16+O5]==GetEnumUnit())and(OA7(G7[O5]))and(OV7(G7[O5]))and(GetUnitLifePercent(G7[O5])>65.)and(G0[$80+O5])and(not IsUnitInRange(G7[O5],GetEnumUnit(),450.))and(kJ(GetUnitX(IM4),GetUnitY(IM4))))then
set PM4[16+O5]=GetEnumUnit()
endif
endif
endif
endfunction
function S0 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local group g=QL7(RP7,"g")
local unit oA=QA7(RP7,"Caster")
local integer X37=R47(RP7,"Level")
local real RK=R77(RP7,"Angle")
local group S1
local real x
local real y
set LP4="S0"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set IM4=CreateUnit(GetOwningPlayer(oA),1747990095,GetUnitX(QA7(RP7,"Hero")),GetUnitY(QA7(RP7,"Hero")),0)
call SetUnitScale(IM4,2.5,2.5,2.5)
call KillUnit(IM4)
call SetUnitPosition(QA7(RP7,"Hero"),GetUnitX(oA),GetUnitY(oA))
call ShowUnit((QA7(RP7,"Hero")),false)
call ShowUnit((QA7(RP7,"Hero")),true)
call SelectUnitAddForPlayer((QA7(RP7,"Hero")),GetOwningPlayer((QA7(RP7,"Hero"))))
set PM4[GetPlayerId(GetOwningPlayer(oA))]=null
call ZH7(g)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEvalCount(t)>120 then
set PM4[GetPlayerId(GetOwningPlayer(oA))]=null
call ZH7(g)
call Q47(RP7)
call RN7(t)
call SetUnitScale(oA,2.5,2.5,2.5)
call KillUnit(oA)
else
set x=GetUnitX(oA)
set y=GetUnitY(oA)
set S1=ZI7()
set IP4=g
set PM4[16+GetPlayerId(GetOwningPlayer(oA))]=null
set IM4=oA
set IH4=X37*70
call GroupEnumUnitsInRange(S1,x,y,$E1+25,Condition(function jh))
call ForGroup(S1,function SZ)
call ZH7(S1)
call SetUnitX(oA,AY7(x+$F*Cos(RK*bj_DEGTORAD)))
call SetUnitY(oA,AZ7(y+$F*Sin(RK*bj_DEGTORAD)))
if(IsUnitInForce(oA,QW4))then
if(PM4[16+GetPlayerId(GetOwningPlayer(oA))]!=null)then
call IssueImmediateOrderById(G7[GetPlayerId(GetOwningPlayer(oA))],$D00D9)
set hq[512+GetPlayerId(GetOwningPlayer(oA))]=Bz+1.
elseif((h4[16+GetPlayerId(GetOwningPlayer(oA))]==G7[GetPlayerId(GetOwningPlayer(oA))])and(OA7(G7[GetPlayerId(GetOwningPlayer(oA))]))and(not IsUnitInRange(G7[GetPlayerId(GetOwningPlayer(oA))],oA,550.))and(kJ(GetUnitX(oA),GetUnitY(oA)))and(OV7(G7[GetPlayerId(GetOwningPlayer(oA))])))then
call IssueImmediateOrderById(G7[GetPlayerId(GetOwningPlayer(oA))],$D00D9)
endif
endif
endif
set t=null
set g=null
set S1=null
set oA=null
return false
endfunction
function BB9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local group g=ZI7()
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real RK=MZ7(x1,y1,x2,y2)
local integer X37=GetUnitAbilityLevel(Z47,1093686073)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1747990095,x1,y1,RK)
set LP4="BB9"
call BY7(UX,x1,y1)
call Z27(GetTriggerUnit(),1093686081)
set PM4[GetPlayerId(GetOwningPlayer(Z47))]=oA
call SetUnitScale(oA,3.5,3.5,3.5)
call QG7(RP7,"Caster",oA)
call Q97(RP7,"Level",X37)
call QP7(RP7,"g",g)
call QD7(RP7,"Angle",RK)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerRegisterUnitEvent(t,oA,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S0))
call RemoveLocation(l)
set t=null
set oA=null
set g=null
set Z47=null
set l=null
endfunction
function S3 takes nothing returns nothing
local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="S3"
if PM4[i]==null then
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652599))
else
call SetUnitScale(PM4[i],2.5,2.5,2.5)
call KillUnit(PM4[i])
endif
endfunction
function BC9 takes nothing returns boolean
if GetSpellAbilityId()==1093686073 then
call BB9()
endif
if GetSpellAbilityId()==1093686081 then
call S3()
endif
return false
endfunction
function fwv takes nothing returns boolean
if GetLearnedSkill()==1093686073 and GetUnitAbilityLevel(GetTriggerUnit(),1093686073)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call Z27(GetTriggerUnit(),1093686081)
endif
return false
endfunction
function PE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BC9))
set t=null
endfunction
function B39 takes nothing returns nothing
call D38(GetTriggerUnit(),GetEnumUnit(),1,IH4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdx",GetEnumUnit(),"chest"))
endfunction
function B69 takes nothing returns nothing
local group g=ZI7()
local unit Z47=GetTriggerUnit()
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local integer X37=GetUnitAbilityLevel(Z47,1093686083)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,x,y,0)
set LP4="B69"
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdx",x,y))
call Z27(oA,1093686084)
call SetUnitAbilityLevel(oA,1093686084,X37)
call IssuePointOrderById(oA,$D0270,x,y)
set IH4=X37*70
call GroupEnumUnitsInRange(g,x,y,425,Condition(function jF))
call ForGroup(g,function B39)
call ZH7(g)
set oA=null
set g=null
set Z47=null
endfunction
function BL9 takes nothing returns boolean
if GetSpellAbilityId()==1093686083 then
call B69()
endif
return false
endfunction
function PF8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PF8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BL9))
set t=null
endfunction
function B19 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer DB8
local integer B09
local integer B59
set LP4="B19"
if(GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER and GetIssuedOrderId()!=$D0222)or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitInvulnerable(Z47,false)
call UnitRemoveAbility(Z47,1093678162)
call Q47(RP7)
call RN7(t)
else
set DB8=(R47(RP7,"Level"))
set B09=(R47(RP7,"Counter"))+1
call Q97(RP7,"Counter",(B09))
set B59=3*DB8
if DB8==4 then
set B59=B59+1
endif
if B09>B59 or N67(GetUnitX(Z47),GetUnitY(Z47),(R77(RP7,"x")),(R77(RP7,"y")))>125 then
call SetUnitInvulnerable(Z47,false)
call UnitRemoveAbility(Z47,1093678162)
call Q47(RP7)
call RN7(t)
endif
endif
set t=null
set Z47=null
return false
endfunction
function B29 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="B29"
call SetUnitInvulnerable(Z47,true)
call Z27(Z47,1093678162)
call QG7(RP7,"Hero",Z47)
call Q97(RP7,"Level",GetUnitAbilityLevel(Z47,1093686082))
call Q97(RP7,"Counter",0)
call QD7(RP7,"x",((GetUnitX(Z47))*1.))
call QD7(RP7,"y",((GetUnitY(Z47))*1.))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function B19))
call RR7(Z47,"4266",5.9)
set t=null
set Z47=null
endfunction
function B_9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
call IssueImmediateOrderById(ZO7,$D0224)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set ZO7=null
return false
endfunction
function C49 takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),($E),(ZO7))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function B_9))
set t=null
set ZO7=null
endfunction
function C79 takes nothing returns boolean
if GetIssuedOrderId()==852514and IsUnitIllusion(GetTriggerUnit())==false and RG7(GetTriggerUnit(),"4266")==false then
call B29()
elseif GetIssuedOrderId()==852515then
call C49()
endif
return false
endfunction
function PG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PG8"
call BT7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function C79))
set t=null
endfunction
function C89 takes unit p5,unit m5,integer X37,integer C99 returns nothing
call DZ8(p5,m5,.75+.75*X37)
if C99==1 then
call D38(p5,m5,1,X37*50+50)
else
call D38(p5,m5,1,X37*50+50+100)
endif
endfunction
function CD9 takes unit p5,unit m5 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="PrismaticPrison_MiniStun"
call UnitAddAbility(oA,1093686086)
call IssueTargetOrderById(oA,$D007F,m5)
set oA=null
endfunction
function CE9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X37=(LoadInteger(C7,(RP7),(5)))
local integer C99=(LoadInteger(C7,(RP7),($98)))
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local integer CF9=(LoadInteger(C7,(RP7),(30)))
local unit m5=WG7(CF9)
local lightning i7=(LoadLightningHandle(C7,(RP7),($C4)))
set LP4="CE9"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(i7)
call WF7(CF9)
call Q47(RP7)
call RN7(t)
else
call MoveLightning(i7,false,GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))
if N67(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))>600 then
call DestroyLightning(i7)
call WF7(CF9)
call Q47(RP7)
call RN7(t)
call C89(p5,m5,X37,C99)
endif
endif
set t=null
set p5=null
set m5=null
set i7=null
return false
endfunction
function CG9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local lightning i7=AddLightning("HWPB",false,GetUnitX(BM4),GetUnitY(BM4),GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
set LP4="CG9"
call SetLightningColor(i7,0,.7,1,1)
call SaveLightningHandle(C7,(RP7),($C4),(i7))
call SaveUnitHandle(C7,(RP7),(2),(BM4))
call SaveInteger(C7,(RP7),(30),(WI7(GetEnumUnit())))
call SaveInteger(C7,(RP7),(5),(BH4))
call SaveInteger(C7,(RP7),($98),(BI4))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BM4,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function CE9))
call D38(GetTriggerUnit(),GetEnumUnit(),1,BJ4)
call CD9(GetTriggerUnit(),GetEnumUnit())
set t=null
set i7=null
endfunction
function CH9 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656917,x,y,0)
local group g=ZI7()
local integer X37=GetUnitAbilityLevel(Z47,1093686072)
local real CI9=6
local integer CJ9=1
set LP4="CH9"
if X37==0 then
set X37=GetUnitAbilityLevel(Z47,1093751120)
set CI9=8
set CJ9=2
endif
call RemoveLocation(l)
call SetUnitAnimation(oA,"channel")
call CI7(oA,CI9)
set BM4=oA
set BK4=CI9
set BJ4=X37*50+50
set BH4=X37
set BI4=CJ9
set IM4=Z47
call GroupEnumUnitsInRange(g,x,y,400,Condition(function LM7))
call ForGroup(g,function CG9)
call ZH7(g)
set g=null
set oA=null
set Z47=null
set l=null
endfunction
function CK9 takes nothing returns boolean
if GetSpellAbilityId()==1093686072 or GetSpellAbilityId()==1093751120 then
call CH9()
endif
return false
endfunction
function PH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CK9))
set t=null
endfunction
function CM9 takes nothing returns boolean
return GetSpellAbilityId()==1093808453
endfunction
function CN9 takes nothing returns nothing
call SetUnitX(GetEnumUnit(),VY4)
call SetUnitY(GetEnumUnit(),VZ4)
endfunction
function CO9 takes nothing returns nothing
local destructable array dx
local integer OX9
local integer CP9
local fogmodifier CQ9
local unit DA8=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local location CR9
local real x
local real y
local group g=ZI7()
set LP4="CO9"
if J67==null then
set CR9=GetSpellTargetLoc()
else
set CR9=GetUnitLoc(J67)
endif
set x=GetLocationX(CR9)
set y=GetLocationY(CR9)
set VY4=x
set VZ4=y
if IsUnitAlly(DA8,GetOwningPlayer(J67)) or ZG7(GetSpellTargetUnit())==false then
set IM4=DA8
call GroupEnumUnitsInRange(g,x,y,$96,Condition(function LF7))
call C87(CreateFogModifierRadiusLocBJ(true,GetOwningPlayer(DA8),FOG_OF_WAR_VISIBLE,CR9,1000.),2.25+.75*GetUnitAbilityLevel(DA8,1093808453))
set OX9=1
set CP9=8
loop
exitwhen OX9>CP9
call CE7(CreateDestructableLoc(1110454325,OF7(CR9,150.,(I2R(OX9)*45.)),GetRandomReal(0,360),1,0),2.25+.75*GetUnitAbilityLevel(DA8,1093808453))
call QM7(GetHandleId(DA8),"AI|SproutTree"+I2S(OX9),bj_lastCreatedDestructable)
set OX9=OX9+1
endloop
endif
call RemoveLocation(CR9)
call ForGroup(g,function CN9)
call ZH7(g)
set CQ9=null
set DA8=null
set J67=null
set CR9=null
set g=null
endfunction
function CS9 takes nothing returns nothing
if GetSpellAbilityId()==1093808453 and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endfunction
function I98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CM9))
call TriggerAddAction(t,function CO9)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function CS9)
set t=null
endfunction
function CT9 takes nothing returns boolean
return GetSpellAbilityId()==1093677391
endfunction
function CU9 takes nothing returns nothing
local location Mk=GetSpellTargetLoc()
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
set LP4="CU9"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetTriggerUnit()))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",x,y))
call DestroyEffect(AddSpecialEffect("war3mapImported\\FurionTeleportTarget.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call RemoveLocation(Mk)
set Mk=null
endfunction
function ID8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="ID8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function CT9))
call TriggerAddAction(t,function CU9)
set t=null
endfunction
function CV9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local integer O87=(LoadInteger(C7,(YY7),(5)))
local unit CW9=(LoadUnitHandle(C7,(YY7),(17)))
local integer CX9=Z77(CW9)
local real CP7=GetUnitState(CW9,UNIT_STATE_LIFE)
local real CY9=GetUnitState(CW9,UNIT_STATE_MAX_LIFE)
local real CZ9
set LP4="CV9"
if CP7/CY9>.4 then
set CZ9=I2R(O87)/4*.2*CX9+2*O87
else
set CZ9=I2R(O87)/4*.6*CX9+2*O87
endif
set CZ9=CZ9/8.
if GetTriggerEvalCount(t)>16*8. then
call DestroyEffect((LoadEffectHandle(C7,(YY7),(31))))
call UnitRemoveAbility(CW9,1093685583)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
else
call SetUnitState(CW9,UNIT_STATE_LIFE,CP7+CZ9)
endif
set CW9=null
set t=null
return false
endfunction
function CA9 takes nothing returns nothing
local unit CW9=GetSpellTargetUnit()
local unit CB9=GetTriggerUnit()
local integer O87=GetUnitAbilityLevel(CB9,1093685584)
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
set LP4="CA9"
call TriggerRegisterTimerEvent(t,1/8.,true)
call TriggerAddCondition(t,Condition(function CV9))
call SaveInteger(C7,(YY7),(5),(O87))
call SaveUnitHandle(C7,(YY7),(17),(CW9))
call SaveEffectHandle(C7,(YY7),(31),(AddSpecialEffectTarget("InnerVitality.mdx",CW9,"chest")))
call Z27(CW9,1093685583)
call SetUnitAbilityLevel(CW9,1093685583,O87)
set CW9=null
set CB9=null
set t=null
endfunction
function CC9 takes nothing returns boolean
if GetSpellAbilityId()==1093685584 then
call CA9()
endif
return false
endfunction
function OP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OP8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CC9))
set t=null
endfunction
function C39 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer XZ9
local string C69
local integer CL9
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local unit p5=QA7(RP7,"Source")
set LP4="C39"
if GetTriggerEvalCount(t)>7 or A47(m5)then
call DestroyEffect(Q17(RP7,"Effect"))
call Q47(RP7)
set XZ9=GetHandleId(p5)
set C69=I2S(GetHandleId(m5))+"NumOfSpears"
set CL9=R47(XZ9,C69)
set CL9=CL9-1
if CL9==0 then
call Q97(XZ9,C69,0)
else
call Q97(XZ9,C69,CL9)
endif
call WF7(D18)
call RN7(t)
else
call D38(p5,m5,1,4*GetUnitAbilityLevel(p5,1093685582))
endif
set t=null
set m5=null
set p5=null
return false
endfunction
function C19 takes unit p5,unit m5 returns nothing
local integer RP7=GetHandleId(p5)
local integer XZ9
local trigger t
local integer C69=R47(RP7,I2S(GetHandleId(m5))+"NumOfSpears")
set LP4="f6v"
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function C39))
set XZ9=GetHandleId(t)
call QG7(XZ9,"Source",p5)
call Q97(XZ9,"TargetIndex",WI7(m5))
call Q97(RP7,I2S(GetHandleId(m5))+"NumOfSpears",C69+1)
call QH7(XZ9,"Effect",AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",m5,"chest"))
set t=null
endfunction
function C09 takes nothing returns boolean
local real d
set LP4="C09"
if GetUnitAbilityLevel(GetTriggerUnit(),1110456369)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685582)>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,B97(GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)-$F,1))
call UnitRemoveAbility(GetTriggerUnit(),1110456369)
call C19(GetEventDamageSource(),GetTriggerUnit())
call DisableTrigger(GetTriggeringTrigger())
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function C59 takes nothing returns nothing
local trigger t
local unit m5
local unit p5
set LP4="C59"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function C09))
endif
set t=null
set m5=null
set p5=null
endfunction
function C29 takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685582)>0 and(R87(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")then
call C59()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685582 then
call C59()
endif
return false
endfunction
function C_9 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="BurningSpear_Learned"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function C29))
call QG7(GetHandleId(t),"Hero",Z47)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function L49 takes nothing returns boolean
if GetLearnedSkill()==1093685582 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685582)==1 then
call C_9(GetTriggerUnit(),false)
endif
return false
endfunction
function OQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OQ8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function L49))
set t=null
endfunction
function tQ takes nothing returns boolean
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit Z47=QA7(RP7,"Hero")
local real L79=GetUnitState(Z47,UNIT_STATE_LIFE)
local real MaxHealth=GetUnitState(Z47,UNIT_STATE_MAX_LIFE)
local integer L89
local integer L99
local integer X37=GetUnitAbilityLevel(Z47,1093685585)
local boolean LD9=R87(RP7,"HasFX")
set LP4="tQ"
if IsUnitType(Z47,UNIT_TYPE_HERO)and X37>0 then
set L89=R2I(100*GetUnitState(Z47,UNIT_STATE_LIFE)/GetUnitState(Z47,UNIT_STATE_MAX_LIFE))
set L99=B47(A_7(R2I(100-L89)/7,$E),1)
if A47(Z47)==false then
call D28(Z47,X37*L99*2)
call E88(Z47,X37*L99*3)
if L89<40 then
if LD9==false then
call QF7(RP7,"HasFX",true)
call QH7(RP7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl",Z47,"left weapon"))
call QH7(RP7,"FX2",AddSpecialEffectTarget("effects\\HeadhunterWEAPONSRight_NoSound.mdx",Z47,"right weapon"))
endif
else
if LD9 then
call QF7(RP7,"HasFX",false)
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
endif
endif
endif
endif
set Z47=null
return false
endfunction
function LE9 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="Frv"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function tQ))
call QG7(GetHandleId(t),"Hero",Z47)
call QF7(GetHandleId(t),"HasFX",false)
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function LF9 takes nothing returns boolean
if GetLearnedSkill()==1093685585 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685585)==1 then
call LE9(GetTriggerUnit(),false)
endif
return false
endfunction
function OR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OR8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LF9))
set t=null
endfunction
function LG9 takes nothing returns nothing
local unit p5=GetEnumUnit()
local real l4=N67(GetUnitX(p5),GetUnitY(p5),VV4,VW4)
set LP4="LG9"
if l4<VU4 and IsUnitVisible(p5,GetOwningPlayer(VX4)) then
set VT4=GetEnumUnit()
set VU4=l4
endif
set p5=null
endfunction
function LH9 takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer RP7=GetUnitAbilityLevel(GetTriggerUnit(),1093752632)
local integer VT9=1093678936
local group g
local unit q5
set LP4="LH9"
if RP7==0 then
set RP7=GetUnitAbilityLevel(GetTriggerUnit(),1093752633)
set VT9=1093681484
endif
if m5==null then
set VT4=null
set VX4=p5
set VU4=$F423F
set VV4=GetSpellTargetX()
set VW4=GetSpellTargetY()
set IM4=p5
set g=ZI7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function LF7))
call ForGroup(g,function LG9)
call ZH7(g)
set m5=VT4
set g=null
endif
if m5!=null then
set q5=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call Z27(q5,VT9)
call SetUnitAbilityLevel(q5,VT9,RP7)
call IssueTargetOrderById(q5,$D0097,m5)
set q5=null
endif
set p5=null
set m5=null
endfunction
function LI9 takes nothing returns boolean
if GetSpellAbilityId()==1093752632 or GetSpellAbilityId()==1093752633 then
call LH9()
endif
return false
endfunction
function IE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LI9))
set t=null
endfunction
function LJ9 takes unit CP7,unit J67 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093685586)
local real Y09
local real LK9=.5
set LP4="SoulEater_Hit"
if DB8==0 then
set DB8=GetUnitAbilityLevel(CP7,1093747251)
set LK9=.65
endif
call Z27(DA8,1093685589)
call SetUnitAbilityLevel(DA8,1093685589,DB8)
call IssueTargetOrderById(DA8,$D006B,J67)
if DB8==1 then
set Y09=.35
elseif DB8==2 then
set Y09=.3
else
set Y09=.25
endif
call D38(CP7,CP7,1,GetUnitState(CP7,UNIT_STATE_LIFE)*Y09)
call D38(CP7,J67,1,GetUnitState(J67,UNIT_STATE_LIFE)*LK9)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",CP7,"chest"))
call DestroyEffect(AddSpecialEffectTarget("effects\\LifeBreak.mdx",J67,"chest"))
set CP7=null
set J67=null
set DA8=null
endfunction
function LM9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local real x
local real y
local real LN9=GetUnitX(CP7)
local real LO9=GetUnitY(CP7)
local real BC7=GetUnitX(J67)
local real B37=GetUnitY(J67)
local real WY9=Atan2(B37-LO9,BC7-LN9)
set LP4="LM9"
if GetUnitTypeId(CP7)==1160786520 then
call SetUnitAnimationByIndex(CP7,1)
else
call SetUnitAnimationByIndex(CP7,17)
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or N67(WN9,WO9,BC7,B37)>$578 or BI8(CP7)then
call SetUnitPathing(CP7,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call UnitRemoveAbility(CP7,1093686100)
call SetUnitTimeScale(CP7,1.)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif N67(LN9,LO9,BC7,B37)<125 then
call SetUnitPathing(CP7,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call UnitRemoveAbility(CP7,1093686100)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitTimeScale(CP7,1.)
if J67!=null and A47(J67)==false then
call IssueTargetOrderById(CP7,$D000F,J67)
call LJ9(CP7,J67)
endif
else
call SetUnitPathing(CP7,false)
set WN9=BC7
set WO9=B37
call SaveReal(C7,(JZ7),(23),((WN9)*1.))
call SaveReal(C7,(JZ7),(24),((WO9)*1.))
set x=LN9+$F*Cos(WY9)
set y=LO9+$F*Sin(WY9)
call SetUnitPosition(CP7,x,y)
call SetUnitFacing(CP7,WY9*bj_RADTODEG)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function LP9 takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="LP9"
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function LM9))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),(23),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(J67))*1.))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",CP7,"hand right alternate")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\LifeBreakCharge.mdx",CP7,"hand left alternate")))
call SetUnitPathing(CP7,false)
call Z27(CP7,1093686100)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093686100,false)
call SetUnitAnimationByIndex(CP7,17)
call SetUnitTimeScale(CP7,3.)
set CP7=null
set J67=null
set t=null
endfunction
function LQ9 takes nothing returns boolean
if(GetSpellAbilityId()==1093685586 or GetSpellAbilityId()==1093747251)and ZG7(GetSpellTargetUnit())==false then
call LP9()
endif
return false
endfunction
function OS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LQ9))
set t=null
call AC7(1093685589)
endfunction
function LR9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X37=R47(RP7,"Level")
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
set LP4="LR9"
if GetTriggerEvalCount(t)>$A or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(Q17(RP7,"FX"))
call UnitRemoveAbility(m5,1093748533)
call UnitRemoveAbility(m5,1093748531)
call UnitRemoveAbility(m5,1093748534)
call UnitRemoveAbility(m5,1093748532)
call Q47(RP7)
call RN7(t)
else
call D38(p5,m5,1,(X37*5+5)/ 2)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function LS9 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=FN
local unit p5=fN
local unit m5=GetEnumUnit()
set LP4="LS9"
if X37==1 then
call Z27(m5,1093748533)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093748533,false)
elseif X37==2 then
call Z27(m5,1093748531)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093748531,false)
elseif X37==3 then
call Z27(m5,1093748534)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093748534,false)
elseif X37==4 then
call Z27(m5,1093748532)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093748532,false)
endif
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl",m5,"chest"))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LR9))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",GetUnitX(m5),GetUnitY(m5)))
set t=null
set p5=null
set m5=null
endfunction
function LT9 takes unit p5,unit m5 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093685048)
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local group g=ZI7()
local group g2=ZI7()
set LP4="LiquidFire_Hit"
set FN=X37
set fN=p5
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,300+25,Condition(function DH8))
call GroupEnumUnitsInRange(g2,x,y,300+25,Condition(function LS7))
call GroupAddGroup(g2,g)
call ForGroup(g,function LS9)
call ZH7(g)
call ZH7(g2)
set t=null
set g=null
set g2=null
endfunction
function LU9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
set LP4="LU9"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and(GetEventDamage()>40 or IsUnitType(m5,UNIT_TYPE_STRUCTURE) or GetUnitTypeId(m5)==1970107511 or GetUnitTypeId(m5)==1700946284)and R87(GetHandleId(p5),"LiquidFire|Active") then
call LT9(p5,m5)
call QF7(GetHandleId(p5),"LiquidFire|Active",false)
call QD7(GetHandleId(p5),"LiquidFire|LastUsed",TimerGetElapsed(V)*1.)
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function LV9 takes nothing returns boolean
local trigger t
local integer RP7
local unit m5
local unit p5
set LP4="LV9"
if GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"LiquidAttacker")and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
set m5=GetTriggerUnit()
set p5=GetAttacker()
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function LU9))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
set m5=null
set p5=null
set t=null
endif
set t=null
set m5=null
set p5=null
return false
endfunction
function LW9 takes nothing returns boolean
call QF7(GetHandleId(GetTriggerUnit()),"LiquidFire|Active",false)
call QD7(GetHandleId(GetTriggerUnit()),"LiquidFire|LastUsed",TimerGetElapsed(V)*1.)
call UnitRemoveAbility(GetTriggerUnit(),1093748291)
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
return false
endfunction
function LX9 takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real YN7=(TimerGetElapsed(V))
local integer X37=GetUnitAbilityLevel(Z47,1093685048)
local real XV9=R77(GetHandleId(Z47),"LiquidFire|LastUsed")
local boolean C38=R87(GetHandleId(Z47),"LiquidFire|Active")
set LP4="LX9"
if YN7-XV9>25-X37*5 and C38==false and A47(Z47)==false then
call QF7(GetHandleId(Z47),"LiquidFire|Active",true)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LW9))
call Z27(Z47,1093748291)
elseif C38==false then
call UnitRemoveAbility(Z47,1093748291)
endif
set t=null
set Z47=null
return false
endfunction
function LY9 takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer XZ9=GetHandleId(t2)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function LX9))
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"LiquidFire|LastUsed",0)
call BT7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call QG7(XZ9,"LiquidAttacker",Z47)
call TriggerAddCondition(t2,Condition(function LV9))
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
set Aj[GetPlayerId(GetOwningPlayer(Z47))]=t2
endif
set Z47=null
set t=null
set t2=null
endfunction
function LZ9 takes nothing returns boolean
if GetLearnedSkill()==1093685048 and GetUnitAbilityLevel(GetTriggerUnit(),1093685048)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call LY9(GetTriggerUnit(),false)
endif
return false
endfunction
function HF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LZ9))
set t=null
endfunction
function LA9 takes real x1,real y1,real x2,real y2,real x3,real y3,real x,real y returns boolean
local real LB9=(y-y1)*(x2-x1)-(x-x1)*(y2-y1)
local real LC9=(y-y3)*(x1-x3)-(x-x3)*(y1-y3)
local real L39=(y-y2)*(x3-x2)-(x-x2)*(y3-y2)
set LP4="DualBreath_IsPointInTriangle"
return(LB9*LC9>0)and(L39*LC9>0)
endfunction
function L69 takes nothing returns boolean
local real LL9=IH4
local real L19=IJ4
local real L09=IK4
local real L59=Zl
local real L29=vL
local real L_9=eL
set LP4="L69"
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and LA9(LL9,L19,L09,L59,L29,L_9,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
endfunction
function D4D takes real D7D,real LB9,real LC9 returns nothing
local real L39=550
local real D8D=$C8
local real D9D=$FA
local real DDD=Asin((D9D-D8D)/ L39)
local real x=D8D/ Sin(DDD)
local real y=(L39+D9D+x)*Tan(DDD)
local real LL9=LB9+x*Cos((D7D-$B4)*bj_DEGTORAD)
local real L19=LC9+x*Sin((D7D-$B4)*bj_DEGTORAD)
local real L09=(LB9+(L39+D9D)*Cos(D7D*bj_DEGTORAD))+y*Cos((D7D-90)*bj_DEGTORAD)
local real L59=(LC9+(L39+D9D)*Sin(D7D*bj_DEGTORAD))+y*Sin((D7D-90)*bj_DEGTORAD)
local real L29=(LB9+(L39+D9D)*Cos(D7D*bj_DEGTORAD))+y*Cos((D7D+90)*bj_DEGTORAD)
local real L_9=(LC9+(L39+D9D)*Sin(D7D*bj_DEGTORAD))+y*Sin((D7D+90)*bj_DEGTORAD)
set LP4="Fkv"
set IH4=LL9
set IJ4=L19
set IK4=L09
set Zl=L59
set vL=L29
set eL=L_9
endfunction
function DED takes nothing returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="DED"
call Z27(DA8,1093685057)
call IssueTargetOrderById(DA8,$D0102,GetEnumUnit())
set DA8=null
endfunction
function DFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local real Y5=R77(RP7,"TargetX")
local real Z5=R77(RP7,"TargetY")
local integer X37=R47(RP7,"Level")
local unit DA8
set LP4="DFD"
if GetTriggerEvalCount(t)>1 then
call SetUnitAnimation(Z47,"stand")
call Q47(RP7)
call RN7(t)
else
call SetUnitAnimation(Z47,"spell")
set DA8=CreateUnit(p,1697656901,x,y,0)
call Z27(DA8,1093685059)
call SetUnitAbilityLevel(DA8,1093685059,X37)
call IssuePointOrderById(DA8,$D0250,Y5,Z5)
endif
set t=null
set p=null
set Z47=null
set DA8=null
return false
endfunction
function DGD takes unit u,player p,integer X37,location l,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="FPv"
call QN7(RP7,"p",p)
call QD7(RP7,"x",(x)*1.)
call QD7(RP7,"y",(y)*1.)
call QD7(RP7,"TargetX",GetLocationX(l)*1.)
call QD7(RP7,"TargetY",GetLocationY(l)*1.)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Hero",u)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function DFD))
set t=null
endfunction
function DHD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093685047)
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local location l
local unit DA8
local group g=ZI7()
set LP4="DHD"
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
call D4D(bj_RADTODEG*Atan2(GetLocationY(l)-y,GetLocationX(l)-x),x,y)
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function L69))
call ForGroup(g,function DED)
call ZH7(g)
set DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,x,y,0)
call Z27(DA8,1093685058)
call SetUnitAbilityLevel(DA8,1093685058,X37)
call IssuePointOrderById(DA8,$D0264,GetLocationX(l),GetLocationY(l))
call DGD(Z47,GetOwningPlayer(Z47),X37,l,x+50*Cos(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)),y+50*Sin(Atan2(GetLocationY(l)-y,GetLocationX(l)-x)))
call RemoveLocation(l)
set Z47=null
set l=null
set g=null
set DA8=null
endfunction
function DID takes nothing returns boolean
if GetSpellAbilityId()==1093685047 then
call DHD()
endif
return false
endfunction
function HE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DID))
call AC7(1093685058)
call AC7(1093685059)
call AC7(1093685057)
set t=null
endfunction
function DJD takes nothing returns nothing
local unit CP7=FE7
local unit J67=GetEnumUnit()
local unit DKD
if IsUnitInGroup(J67,FD7)==false then
call GroupAddUnit(FD7,J67)
call DZ8(CP7,J67,FF7)
call D38(CP7,J67,1,25*FG7)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(J67),GetUnitY(J67)))
endif
endfunction
function DMD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real x0=(LoadReal(C7,(JZ7),(6)))
local real y0=(LoadReal(C7,(JZ7),(7)))
local real a=(LoadReal(C7,(JZ7),($89)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=GetTriggerEvalCount(t)
local real x
local real y
local group g
local integer i
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local integer DB8=GetUnitAbilityLevel(CP7,1093685046)
set i=0
loop
exitwhen i>$A
set x=x0+100*i*Cos(a*bj_DEGTORAD)
set y=y0+100*i*Sin(a*bj_DEGTORAD)
if ModuloInteger(ZD8,$A)==0 then
endif
set IM4=CP7
set FE7=CP7
set FD7=DND
set FF7=(.6+.4*DB8)-(ZD8*.05)
set FG7=DB8
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,$96+25,Condition(function LF7))
call ForGroup(g,function DJD)
call ZH7(g)
set i=i+1
endloop
if ZD8==20*(.6+.4*DB8)then
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set g=null
set DND=null
return false
endfunction
function DOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real x0=(LoadReal(C7,(JZ7),(6)))
local real y0=(LoadReal(C7,(JZ7),(7)))
local real a=(LoadReal(C7,(JZ7),($89)))
local integer ZD8=GetTriggerEvalCount(t)
local real x=x0+100*ZD8*Cos(a*bj_DEGTORAD)
local real y=y0+100*ZD8*Sin(a*bj_DEGTORAD)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093685046)
local ubersplat P39
local integer i
if ZD8<$A then
call SaveEffectHandle(C7,(JZ7),(609+ZD8),(AddSpecialEffect("effects\\IcePath.mdx",x,y)))
set P39=CreateUbersplat(x,y,"IPTH",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(P39,true)
call SaveUbersplatHandle(C7,(JZ7),(760+ZD8),(P39))
endif
if ZD8==$A then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function DMD))
call SaveReal(C7,(JZ7),(6),((x0)*1.))
call SaveReal(C7,(JZ7),(7),((y0)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call TriggerEvaluate(t)
elseif ZD8>=(.4+.6+.4*DB8)/.05 then
set i=0
loop
exitwhen i==$A
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(609+i))))
call DestroyUbersplat((LoadUbersplatHandle(C7,(JZ7),(760+i))))
set i=i+1
endloop
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function DPD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local real a=MZ7(x,y,GetSpellTargetX(),GetSpellTargetY())
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function DOD))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call TriggerEvaluate(t)
set t=null
set CP7=null
endfunction
function DQD takes nothing returns boolean
if GetSpellAbilityId()==1093685046 then
call DPD()
endif
return false
endfunction
function HG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DQD))
set t=null
endfunction
function DRD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local real a=R77(RP7,"a")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local integer id=GetPlayerId(GetOwningPlayer(p5))
local integer XB8=GetTriggerEvalCount(t)
local real DSD=x+$96*XB8*Cos(a)
local real DTD=y+$96*XB8*Sin(a)
local integer DUD=6
set LP4="DRD"
if GetUnitAbilityLevel(p5,1093685045)==0 then
set DUD=9
endif
if GetPlayerController(GetOwningPlayer(RV4[id]))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(RV4[GetPlayerId(GetOwningPlayer(p5))],1093685061)
call SetUnitAbilityLevel(RV4[GetPlayerId(GetOwningPlayer(p5))],1093685061,X37)
endif
call IssuePointOrderById(RV4[id],$D0208,DSD,DTD)
if XB8==(DUD)then
call Q47(RP7)
call RN7(t)
call SetUnitAnimation(p5,"stand")
endif
set t=null
set p5=null
return false
endfunction
function DVD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local integer X37=GetUnitAbilityLevel(p5,1093685045)
local integer o6=1093685061
set LP4="DVD"
if X37==0 then
set X37=GetUnitAbilityLevel(p5,1093747249)
set o6=1093747250
endif
call RemoveLocation(l)
call SetUnitAnimation(p5,"spell")
set RV4[GetPlayerId(GetOwningPlayer(p5))]=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call Z27(RV4[GetPlayerId(GetOwningPlayer(p5))],o6)
call SetUnitAbilityLevel(RV4[GetPlayerId(GetOwningPlayer(p5))],o6,X37)
call Q97(RP7,"Level",X37)
call QD7(RP7,"x",(GetUnitX(p5))*1.)
call QD7(RP7,"y",(GetUnitY(p5))*1.)
call QD7(RP7,"a",(a)*1.)
call QG7(RP7,"Source",p5)
if o6==1093685061 then
call TriggerRegisterTimerEvent(t,.1,true)
else
call TriggerRegisterTimerEvent(t,.05,true)
endif
call TriggerAddCondition(t,Condition(function DRD))
set t=null
set p5=null
set l=null
endfunction
function DWD takes nothing returns boolean
if GetSpellAbilityId()==1093685045 or GetSpellAbilityId()==1093747249 then
call DVD()
endif
return false
endfunction
function HH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="HH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DWD))
call AC7(1093685061)
set t=null
endfunction
function DXD takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429059 or GetUnitTypeId(GetSummonedUnit())==1865429319 or GetUnitTypeId(GetSummonedUnit())==1865429320 or GetUnitTypeId(GetSummonedUnit())==1865429321
endfunction
function DYD takes nothing returns nothing
call SetUnitAbilityLevelSwapped(1093678392,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093678135,GetSummoningUnit()))
endfunction
function IF8 takes nothing returns nothing
set dT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dT,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(dT,Condition(function DXD))
call TriggerAddAction(dT,function DYD)
endfunction
function DZD takes unit Z47,unit m5 returns nothing
local real a=GetRandomReal(0,360)
local real x=GetUnitX(m5)+50*Cos(a*bj_DEGTORAD)
local real y=GetUnitY(m5)+50*Sin(a*bj_DEGTORAD)
local real DAD=GetRandomReal($AF,$FA)
call SetUnitPosition(Z47,x,y)
call SetUnitFacing(Z47,bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(Z47),GetUnitX(m5)-GetUnitX(Z47)))
call SetUnitAnimation(Z47,"Attack")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",Z47,"chest"))
if WO7(GetOwningPlayer(m5))==false and IsUnitType(m5,UNIT_TYPE_ANCIENT)==false then
set DAD=99999
endif
call D38(Z47,m5,2,DAD)
call IssueTargetOrderById(Z47,$D000F,m5)
endfunction
function DBD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit m5=QA7(RP7,"Target")
set LP4="DBD"
call DZD(Z47,m5)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set m5=null
return false
endfunction
function DCD takes unit Z47 returns nothing
local group g=ZI7()
set LP4="Omnislash_FindTarget"
set IM4=Z47
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),450,Condition(function LO7))
set IM4=GroupPickRandomUnit(g)
if IM4!=null then
call DZD(Z47,IM4)
endif
call ZH7(g)
set g=null
endfunction
function D3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit DA8=QA7(RP7,"Caster")
local integer Tq=R47(RP7,"Limit")
local integer TQ=R47(RP7,"BFLevel")
local integer Rd=R47(RP7,"Counter")
local unit Tr
set LP4="D3D"
call SetUnitPosition(DA8,GetUnitX(Z47),GetUnitY(Z47))
if Rd>Tq then
call KillUnit(DA8)
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093678407,true)
call SetUnitPathing(Z47,true)
call SetUnitInvulnerable(Z47,false)
call RK7(Z47,"Omnislashing")
call SetUnitVertexColor(Z47,$FF,$FF,$FF,$FF)
else
call Q97(RP7,"Counter",Rd+1)
call DCD(Z47)
if IM4==null then
call KillUnit(DA8)
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093678407,true)
call SetUnitPathing(Z47,true)
call SetUnitInvulnerable(Z47,false)
call RK7(Z47,"Omnislashing")
call SetUnitVertexColor(Z47,$FF,$FF,$FF,$FF)
endif
endif
set t=null
set Z47=null
set Tr=null
set DA8=null
return false
endfunction
function D6D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093684529)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer TQ=GetUnitAbilityLevel(Z47,1093678407)
local player p=GetOwningPlayer(Z47)
local integer UW7=3
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1865429060,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="D6D"
if X37==0 then
set X37=GetUnitAbilityLevel(Z47,1093747032)
if X37==1 then
set UW7=6
elseif X37==2 then
set UW7=9
elseif X37==3 then
set UW7=$C
endif
elseif X37==2 then
set UW7=6
elseif X37==3 then
set UW7=9
endif
call SetPlayerAbilityAvailable(p,1093678407,false)
call SetUnitVertexColor(Z47,$FF,$FF,$FF,125)
call SetUnitPathing(Z47,false)
call SetUnitInvulnerable(Z47,true)
call RI7(Z47,"Omnislashing")
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Target",m5)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function DBD))
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",DA8)
call Q97(RP7,"Limit",UW7)
call Q97(RP7,"BFLevel",TQ)
call Q97(RP7,"Counter",2)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",Z47,"weapon"))
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerAddCondition(t,Condition(function D3D))
set Z47=null
set m5=null
set t=null
set p=null
endfunction
function DLD takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call D6D()
endif
return false
endfunction
function D1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="D1D"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitAnimationByIndex(CP7,4)
set t=null
set CP7=null
return false
endfunction
function D0D takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="D0D"
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function D1D))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function D5D takes nothing returns boolean
if GetSpellAbilityId()==1093684529 or GetSpellAbilityId()==1093747032 then
call D0D()
endif
return false
endfunction
function IG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DLD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function D5D))
set t=null
endfunction
function D2D takes integer X37 returns integer
if X37==1 then
return 1093742682
elseif X37==2 then
return 1093742897
elseif X37==3 then
return 1093742681
elseif X37==4 then
return 1093742896
endif
return 0
endfunction
function D_D takes integer X37 returns integer
if X37==1 then
return 1110456653
elseif X37==2 then
return 1110456654
elseif X37==3 then
return 1110456655
elseif X37==4 then
return 1110456652
endif
return 0
endfunction
function E4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local real xN=R77(RP7,"LastX")
local real xo=R77(RP7,"LastY")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real d=SquareRoot((xN-x)*(xN-x)+(xo-y)*(xo-y))
local real vB=(.0003+X37*.00005)*d*GetUnitState(m5,UNIT_STATE_MAX_MANA)
local integer QI=GetTriggerEvalCount(t)
local unit DA8
set LP4="E4D"
if Y57(m5) then
set vB=0
endif
if d>300 then
set vB=0
endif
if vB>1 and ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",m5,"chest"))
endif
if vB>0 then
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-vB)
endif
call QD7(RP7,"LastX",x)
call QD7(RP7,"LastY",y)
if GetTriggerEventId()==EVENT_UNIT_DEATH or QI==(X37+3)*$A then
call UnitRemoveAbility(m5,D2D(X37))
call UnitRemoveAbility(m5,D_D(X37))
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
elseif GetUnitState(m5,UNIT_STATE_MANA)<1 then
call DZ8(QA7(RP7,"Source"),m5,1+.3*X37)
set DA8=null
call UnitRemoveAbility(m5,D2D(X37))
call UnitRemoveAbility(m5,D_D(X37))
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function E7D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093742680)
set LP4="E7D"
call Z27(m5,D2D(X37))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
call QD7(RP7,"LastX",GetUnitX(m5))
call QD7(RP7,"LastY",GetUnitY(m5))
call QH7(RP7,"FX",AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",m5,"chest"))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function E4D))
set p5=null
set m5=null
set t=null
endfunction
function E8D takes nothing returns boolean
if GetSpellAbilityId()==1093742680 and ZG7(GetSpellTargetUnit())==false then
call E7D()
endif
return false
endfunction
function II8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="II8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E8D))
set t=null
endfunction
function E9D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real Tw=R77(RP7,"Mana")
set LP4="E9D"
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)+Tw)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl",m5,"origin"))
call Q47(RP7)
call RN7(t)
set m5=null
set t=null
return false
endfunction
function EDD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="EDD"
call QG7(RP7,"Target",m5)
call QD7(RP7,"Mana",75*GetUnitAbilityLevel(Z47,1093742898))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function E9D))
set t=null
set Z47=null
set m5=null
endfunction
function EED takes nothing returns boolean
if GetSpellAbilityId()==1093742898 then
call EDD()
endif
return false
endfunction
function IJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EED))
set t=null
endfunction
function EFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit EGD=(LoadUnitHandle(C7,(JZ7),(19)))
local real WY9=(LoadReal(C7,(JZ7),($D)))
local integer EHD=(LoadInteger(C7,(JZ7),(34)))
local real EID=GetUnitX(EGD)-50*Cos(WY9)
local real EJD=GetUnitY(EGD)-50*Sin(WY9)
local unit DA8=CreateUnit(GetOwningPlayer(EGD),1697656901,EID,EJD,0)
local real x=GetUnitX(DA8)+50*Cos(WY9)
local real y=GetUnitY(DA8)+50*Sin(WY9)
local real x2=x+(300+50*EHD)*Cos(WY9)
local real y2=y+(300+50*EHD)*Sin(WY9)
set LP4="EFD"
call Z27(DA8,1093679159)
call SetUnitAbilityLevel(DA8,1093679159,EHD)
call IssuePointOrderById(DA8,$D0264,x,y)
call KillUnit(EGD)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set DA8=null
set t=null
return false
endfunction
function EKD takes unit EGD,integer EHD,real WY9 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="Illuminate_Release"
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function EFD))
call SaveUnitHandle(C7,(JZ7),(19),(EGD))
call SaveReal(C7,(JZ7),($D),((WY9)*1.))
call SaveInteger(C7,(JZ7),(34),(EHD))
set t=null
endfunction
function EMD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=R47(RP7,"Count")
local integer END=iX-1
local real RK=R77(RP7,"Angle")
local unit oA=QA7(RP7,"Caster")
local unit Z47=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
local integer EOD=2+X37*2
local boolean EPD=R87(RP7,"SpiritCast")
local unit EQD
set LP4="EMD"
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call Q97(RP7,"Count",iX+1)
endif
call SetUnitScale(oA,I2R(100+20*END)/ 100,I2R(100+20*END)/ 100,I2R(100+20*END)/ 100)
if(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and EPD==false)or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093743153)or END==EOD then
if EPD then
set EQD=QA7(RP7,"Dummy")
call ShowUnit(EQD,false)
call UnitApplyTimedLife(EQD,1112820806,1)
endif
call Q47(RP7)
call RN7(t)
if(LoadInteger(C7,(GetHandleId(Z47)),(704)))==0 or(LoadInteger(C7,(GetHandleId(Z47)),(704)))==1093679157 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093679157,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093743153,false)
call UnitRemoveAbility(Z47,1093743153)
call EKD(oA,END,RK)
endif
set oA=CreateUnit(GetOwningPlayer(oA),1747990093,GetUnitX(oA)+$96*(END)*Cos(RK),GetUnitY(oA)+$96*(END)*Sin(RK),0)
call UnitApplyTimedLife(oA,1112820806,7)
set t=null
set oA=null
set Z47=null
set EQD=null
return false
endfunction
function ERD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="ERD"
call IssueImmediateOrderById(Z47,$D0004)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function ESD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real RK=Atan2(GetLocationY(l)-GetUnitY(Z47),GetLocationX(l)-GetUnitX(Z47))
local real x
local real y
local unit oA
local unit EQD
local boolean EPD=false
set LP4="ESD"
if GetLocationY(l)==GetUnitY(Z47)and GetLocationX(l)==GetUnitX(Z47)then
set RK=GetUnitFacing(Z47)*bj_DEGTORAD
endif
set x=GetUnitX(Z47)+$96*Cos(RK)
set y=GetUnitY(Z47)+$96*Sin(RK)
set oA=CreateUnit(GetOwningPlayer(Z47),1966092362,x,y,RK*bj_RADTODEG)
call RemoveLocation(l)
if GetUnitTypeId(Z47)==1211119192 or GetUnitTypeId(Z47)==1211119193 or GetUnitTypeId(Z47)==1211119191 then
set EPD=true
endif
call QF7(RP7,"SpiritCast",EPD)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",oA)
call Q97(RP7,"Count",1)
call Q97(RP7,"Level",GetUnitAbilityLevel(Z47,1093679157))
call QD7(RP7,"Angle",RK)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function EMD))
if EPD then
set EQD=CreateUnit(GetOwningPlayer(Z47),1747990106,GetUnitX(Z47),GetUnitY(Z47),RK*bj_RADTODEG)
call SetUnitX(EQD,GetUnitX(Z47))
call SetUnitY(EQD,GetUnitY(Z47))
call SetUnitAnimation(EQD,"spell")
call QueueUnitAnimation(EQD,"spell")
call QueueUnitAnimation(EQD,"spell")
call SetUnitVertexColor(EQD,$FF,$FF,$FF,75)
call QG7(RP7,"Dummy",EQD)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function ERD))
call QG7(RP7,"Hero",Z47)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093679157,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093743153,true)
call CW7(Z47,1093743153,1,6)
set t=null
set Z47=null
set oA=null
set EQD=null
set l=null
endfunction
function ETD takes nothing returns boolean
if GetSpellAbilityId()==1093679157 then
call ESD()
endif
return false
endfunction
function IK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ETD))
set t=null
endfunction
function EUD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real x1
local real y1
local real x2
local real y2
set LP4="EUD"
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>2 and WO7(GetOwningPlayer(GetEventDamageSource())))then
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
call Q47(RP7)
call RN7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH then
set x1=GetUnitX(p5)
set y1=GetUnitY(p5)
set x2=GetUnitX(m5)
set y2=GetUnitY(m5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",x1,y1))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",x2,y2))
call RR7(m5,"4410",1)
call SetUnitPosition(m5,GetUnitX(p5),GetUnitY(p5))
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
call Q47(RP7)
call RN7(t)
call XG7(m5)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function EVD takes nothing returns nothing
local unit p5=GetEnumUnit()
local real l4=N67(GetUnitX(p5),GetUnitY(p5),VC4,V34)
set LP4="EVD"
if l4<VB4 then
set VA4=GetEnumUnit()
set VB4=l4
endif
set p5=null
endfunction
function EWD takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit p5=GetTriggerUnit()
local trigger t
local integer RP7
local real Hk
local group g
set LP4="EWD"
if m5==null then
set VA4=null
set VB4=$F423F
set VC4=GetSpellTargetX()
set V34=GetSpellTargetY()
set IM4=p5
set g=ZI7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function D78))
call GroupRemoveUnit(g,p5)
call ForGroup(g,function EVD)
call ZH7(g)
set m5=VA4
set g=null
endif
if GetSpellAbilityId()==1093742677 then
set Hk=5
elseif GetSpellAbilityId()==1093742937 then
set Hk=4
elseif GetSpellAbilityId()==1093742938 then
set Hk=3
elseif GetSpellAbilityId()==1093750321 then
set Hk=3
endif
if m5!=null then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function EUD))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QH7(RP7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",p5,"origin"))
call QH7(RP7,"FX2",AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",m5,"origin"))
endif
set m5=null
set p5=null
set t=null
endfunction
function EXD takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
call EWD()
endif
return false
endfunction
function EYD takes nothing returns boolean
if GetSpellAbilityId()==1093742677 or GetSpellAbilityId()==1093742937 or GetSpellAbilityId()==1093742938 then
if GetSpellTargetUnit()!=null and R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),YK7(1848652600))
endif
endif
return false
endfunction
function IM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EXD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function EYD))
set t=null
endfunction
function EZD takes nothing returns nothing
local unit m5=GetEnumUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real a=Atan2(y-tN,x-SN)
set LP4="EZD"
set x=AY7(x+25*Cos(a))
set y=AZ7(y+25*Sin(a))
call BW7(x,y,$96)
call SetUnitX(m5,x)
call SetUnitY(m5,y)
set m5=null
endfunction
function EAD takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit DA8=CreateUnit(IQ4,1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="EAD"
call Z27(DA8,1093742679)
call SetUnitAbilityLevel(DA8,1093742679,pN)
call IssueTargetOrderById(DA8,$D0269,m5)
set m5=null
set DA8=null
endfunction
function EBD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local real t5=R77(RP7,"SourceX")
local real w5=R77(RP7,"SourceY")
local integer o6=R47(RP7,"AbilityID")
local group g=QL7(RP7,"g")
local integer XB8=GetTriggerEvalCount(t)
set LP4="EBD"
set SN=t5
set tN=w5
call ForGroup(g,function EZD)
if XB8==$A then
if o6==1093742936 then
set pN=1
elseif o6==1093742934 then
set pN=2
else
set pN=3
endif
set IQ4=p
call ForGroup(g,function EAD)
call ZH7(g)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p=null
set g=null
return false
endfunction
function ECD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local real t5=R77(RP7,"SourceX")
local real w5=R77(RP7,"SourceY")
local integer o6=R47(RP7,"AbilityID")
local group g=QL7(RP7,"g")
set LP4="ECD"
call RN7(t)
call Q47(RP7)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function EBD))
call QN7(RP7,"p",p)
call QD7(RP7,"SourceX",t5*1.)
call QD7(RP7,"SourceY",w5*1.)
call QP7(RP7,"g",g)
call Q97(RP7,"AbilityID",o6)
set t=null
set p=null
set g=null
return false
endfunction
function E3D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local group g=ZI7()
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
set LP4="E3D"
call KillUnit(CreateUnit(GetOwningPlayer(p5),1747990096,x,y,0))
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,700,Condition(function LX7))
call TriggerRegisterTimerEvent(t,.4,false)
call TriggerAddCondition(t,Condition(function ECD))
call QN7(RP7,"p",GetOwningPlayer(GetTriggerUnit()))
call QD7(RP7,"SourceX",(x)*1.)
call QD7(RP7,"SourceY",(y)*1.)
call QP7(RP7,"g",g)
call Q97(RP7,"AbilityID",GetSpellAbilityId())
call RemoveLocation(l)
set l=null
set t=null
set g=null
set p5=null
endfunction
function E6D takes nothing returns boolean
if GetSpellAbilityId()==1093742936 or GetSpellAbilityId()==1093742934 or GetSpellAbilityId()==1093742935 then
call E3D()
endif
return false
endfunction
function IN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IN8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E6D))
set t=null
endfunction
function ELD takes unit u returns boolean
return GetUnitTypeId(u)==1966092345
endfunction
function E1D takes nothing returns boolean
if ELD(GetFilterUnit())or L67()then
if LoadInteger(C7,tl,GetHandleId(GetFilterUnit()))<IG4 then
return true
endif
endif
return false
endfunction
function E0D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer E5D=R47(RP7,"LucentLevel")
local integer Tq=R47(RP7,"Limit")
local integer E2D=R47(RP7,"TargetLimit")
local group g=ZI7()
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local unit m5
local real r1=GetRandomInt($C8,350)
local real r2=GetRandomInt($C8,350)
set LP4="E0D"
if GetRandomInt(1,2)==1 then
set r1=-1*r1
set r2=-1*r2
endif
set IM4=Z47
set IG4=E2D
set tl=GetHandleId(t)
call GroupEnumUnitsInRange(g,x,y,700,Condition(function E1D))
set m5=GroupPickRandomUnit(g)
call ZH7(g)
if A47(Z47)==false and m5!=null and ELD(m5)==false then
call SaveInteger(C7,tl,GetHandleId(m5),LoadInteger(C7,tl,GetHandleId(m5))+1)
call BJ7("effects\\Eclipse.mdx",m5,"origin",3)
if GetPlayerController(GetOwningPlayer(Z47))==MAP_CONTROL_COMPUTER then
call D38(Z47,m5,1,300)
else
call D38(Z47,m5,1,E5D*75)
endif
elseif A47(Z47)==false then
set x=x+GetRandomInt(-350,350)
set y=y+GetRandomInt(-350,350)
call BK7("effects\\Eclipse.mdx",x,y,1.5)
endif
if(GetTriggerEvalCount(t)+1)==Tq then
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
set g=null
set m5=null
return false
endfunction
function E_D takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer Tq
local integer F4D=GetUnitAbilityLevel(ZO7,1093678130)
local integer E2D
local unit DA8=CreateUnit(GetOwningPlayer(ZO7),1697656901,GetUnitX(ZO7),GetUnitY(ZO7),0)
set LP4="E_D"
if F4D==0 and GetUnitTypeId(ZO7)!=1160785973 then
set F4D=4
endif
call Z27(DA8,1093751862)
if GetSpellAbilityId()==1093678388 then
set Tq=1+3*GetUnitAbilityLevel(ZO7,1093678388)
set E2D=4
else
set Tq=4*GetUnitAbilityLevel(ZO7,1093677141)
set E2D=6
endif
call Q97(RP7,"LucentLevel",F4D)
call Q97(RP7,"Limit",Tq)
call Q97(RP7,"TargetLimit",E2D)
call QG7(RP7,"Hero",ZO7)
call TriggerRegisterTimerEvent(t,.6,true)
call TriggerAddCondition(t,Condition(function E0D))
call TriggerEvaluate(t)
call IssueImmediateOrderById(DA8,$D028D)
set t=null
set ZO7=null
set DA8=null
endfunction
function F7D takes nothing returns boolean
if GetSpellAbilityId()==1093678388 or GetSpellAbilityId()==1093677141 then
call E_D()
endif
return false
endfunction
function IO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F7D))
set t=null
endfunction
function F8D takes nothing returns boolean
if GetLearnedSkill()==1093678129 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093678129)==4 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,5)
else
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382378855,GetUnitAbilityLevel(GetTriggerUnit(),1093678129))
endif
elseif GetLearnedSkill()==1093678642 then
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889801,1)
endif
return false
endfunction
function IP8 takes nothing returns nothing
set du=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(du,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(du,Condition(function F8D))
endfunction
function F9D takes nothing returns boolean
return GetSpellAbilityId()==1093684053
endfunction
function FDD takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function FED takes nothing returns nothing
call Z27(GetEnumUnit(),1093684052)
call SetUnitAbilityLevel(GetEnumUnit(),1093684052,D8)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetEnumUnit(),"chest"))
endfunction
function FFD takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093684052)
endfunction
function FGD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local group FP8=QL7(RP7,"Group")
set LP4="FGD"
call ForGroup(FP8,function FFD)
call ZH7(FP8)
call Mv(t)
set t=null
set FP8=null
endfunction
function FHD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local boolexpr hP=Condition(function FDD)
local group FP8=ZI7()
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(Z47,1093684053)
local real CI9=$F
set LP4="FHD"
set D8=X37
call GroupEnumUnitsInRange(FP8,0,0,9999,hP)
call ForGroup(FP8,function FED)
call DestroyBoolExpr(hP)
call QP7(RP7,"Group",FP8)
call TimerStart(t,CI9,false,function FGD)
set Z47=null
set hP=null
set FP8=null
set t=null
endfunction
function N58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N58"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F9D))
call TriggerAddAction(t,function FHD)
set t=null
endfunction
function FID takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetEnumUnit(),"origin"))
endfunction
function FJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit m5=QA7(RP7,"Target")
set LP4="FJD"
call D38(Z47,m5,1,.75*GetUnitAbilityLevel(Z47,1093684054)*75)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set m5=null
return false
endfunction
function FKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local group g=ZI7()
local unit m5=QA7(RP7,"Target")
set LP4="FKD"
call DestroyEffect(Q17(RP7,"FX"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",m5,"origin"))
call Q47(RP7)
call RN7(t)
call ZH7(g)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Target",m5)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function FJD))
set t=null
set Z47=null
set g=null
set m5=null
return false
endfunction
function ug takes nothing returns nothing
call D38(IM4,GetEnumUnit(),1,IH4)
endfunction
function uG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local group g=QL7(RP7,"g")
set LP4="uG"
set IH4=GetUnitAbilityLevel(Z47,1093684054)*75
set IM4=Z47
call ForGroup(g,function ug)
call ZH7(g)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set g=null
return false
endfunction
function uh takes nothing returns nothing
local real in=Ma(GetTriggerUnit(),GetEnumUnit())
set LP4="uh"
if in>650 then
else
call GroupAddUnit(IP4,GetEnumUnit())
endif
endfunction
function FMD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local group g=ZI7()
local unit m5
set LP4="FMD"
set IM4=Z47
set IP4=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),900,Condition(function LW7))
call ForGroup(g,function uh)
call ZH7(g)
set g=IP4
call ForGroup(g,function FID)
call QP7(RP7,"g",g)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function uG))
set IM4=Z47
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),$C8,Condition(function LW7))
set m5=GroupPickRandomUnit(g)
call ZH7(g)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Target",m5)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl",Z47,"origin"))
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function FKD))
set t=null
set g=null
set Z47=null
set m5=null
endfunction
function FND takes nothing returns boolean
if GetSpellAbilityId()==1093684054 then
call FMD()
endif
return false
endfunction
function N28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FND))
set t=null
endfunction
function FOD takes nothing returns boolean
return GetSpellAbilityId()==1093684280
endfunction
function uj takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function uJ takes real uk,real uK,real iN,real io returns integer
local real in=SquareRoot((iN-uk)*(iN-uk)+(io-uK)*(io-uK))
set LP4="uJ"
return A_7(R2I(in/$96),$A)
endfunction
function ul takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit IJ=QA7(RP7,"Projectile")
local real hN=R77(RP7,"TargetX")
local real ho=R77(RP7,"TargetY")
local real RK=R77(RP7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real Il=AY7(GetUnitX(IJ)+30*Cos(RK))
local real IL=AZ7(GetUnitY(IJ)+30*Sin(RK))
local boolexpr hP=Condition(function uj)
local group FP8=ZI7()
local unit oA
local unit m5
local real uk
local real uK
set LP4="ul"
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
set L7=Z47
call GroupEnumUnitsInRange(FP8,Il,IL,$8C,hP)
set m5=FirstOfGroup(FP8)
call ZH7(FP8)
call DestroyBoolExpr(hP)
if m5!=null then
if IsUnitType(m5,UNIT_TYPE_HERO) then
set SN4[GetPlayerId(GetOwningPlayer(Z47))]=SN4[GetPlayerId(GetOwningPlayer(Z47))]+1
call E58("AA_Hits"+I2S(GetPlayerId(GetOwningPlayer(Z47))),SN4[GetPlayerId(GetOwningPlayer(Z47))])
endif
set uk=R77(RP7,"OriginalX")
set uK=R77(RP7,"OriginalY")
set oA=CreateUnit(GetOwningPlayer(m5),1697656901,iN,io,0)
call Z27(oA,1093684279)
call SetUnitAbilityLevel(oA,1093684279,uJ(uk,uK,iN,io))
call IssueTargetOrderById(oA,$D007F,m5)
call UnitDamageTarget(Z47,m5,90*GetUnitAbilityLevel(Z47,1093684280),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call KillUnit(IJ)
call Mv(t)
set oA=null
elseif(Il-hN)*(Il-hN)+(IL-ho)*(IL-ho)<$640 then
call KillUnit(IJ)
call Mv(t)
endif
set Z47=null
set IJ=null
set t=null
set hP=null
set FP8=null
set m5=null
endfunction
function FPD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real iN=AY7(GetUnitX(Z47))
local real io=AZ7(GetUnitY(Z47))
local location sy=GetSpellTargetLoc()
local real hN=GetLocationX(sy)
local real ho=GetLocationY(sy)
local real RK=Atan2(ho-io,hN-iN)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
local unit IJ=CreateUnit(GetOwningPlayer(Z47),1747988533,iN,io,RK*bj_RADTODEG)
set LP4="FPD"
set SO4[GetPlayerId(GetOwningPlayer(Z47))]=SO4[GetPlayerId(GetOwningPlayer(Z47))]+1
call E58("AA_Total"+I2S(GetPlayerId(GetOwningPlayer(Z47))),SO4[GetPlayerId(GetOwningPlayer(Z47))])
call RemoveLocation(sy)
call SetUnitFacing(IJ,RK*bj_RADTODEG)
call SetUnitPathing(IJ,false)
set hN=AY7(iN+$BB8*Cos(RK))
set ho=AZ7(io+$BB8*Sin(RK))
call QD7(RP7,"OriginalX",iN)
call QD7(RP7,"OriginalY",io)
call QD7(RP7,"TargetX",hN)
call QD7(RP7,"TargetY",ho)
call QD7(RP7,"Angle",RK)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Projectile",IJ)
call TimerStart(t,.035,true,function ul)
set Z47=null
set sy=null
set t=null
set IJ=null
endfunction
function FQD takes nothing returns boolean
local integer FRD=SN4[GetPlayerId(GetTriggerPlayer())]
local integer D5=SO4[GetPlayerId(GetTriggerPlayer())]
set LP4="FQD"
if GetUnitTypeId(G7[GetPlayerId(GetTriggerPlayer())])==1311781206 and D5>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848657741)))+" "+R2S(I2R(FRD)/ I2R(D5)*100)+"% ("+I2S(FRD)+"/"+I2S(D5)+")")
endif
return false
endfunction
function N_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N_8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FOD))
call TriggerAddAction(t,function FPD)
call AC7(1093684279)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function FQD))
set t=null
endfunction
function FSD takes nothing returns boolean
return GetSpellAbilityId()==1093684302
endfunction
function uM takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(L7)))!=null
endfunction
function un takes nothing returns nothing
local unit Z47=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697657170,0,0,0)
set LP4="un"
call Z27(oA,1093684303)
call SetUnitAbilityLevel(oA,1093684303,GetUnitAbilityLevel(L7,1093684302))
call UnitApplyTimedLife(oA,1112820806,$A)
set Z47=null
set oA=null
endfunction
function uN takes unit Z47 returns nothing
local group FP8=ZI7()
local boolexpr hP=Condition(function uM)
set LP4="uN"
set L7=Z47
call GroupEnumUnitsInRange(FP8,GetUnitX(Z47),GetUnitY(Z47),800,hP)
call ForGroup(FP8,function un)
call DestroyBoolExpr(hP)
call ZH7(FP8)
set FP8=null
set hP=null
endfunction
function uo takes unit Z47 returns nothing
local integer RP7=GetHandleId(Z47)
local string uO=R97(RP7,"OrderType")
local string up=OrderId2String(R47(RP7,"OrderId"))
local real hN
local real ho
local unit m5
local trigger t=Q67(RP7,"Trigger_TrackOrder")
local boolean uP=not R87(RP7,"Idle")
local boolean uq=R87(RP7,"SuperOrder")
set LP4="uo"
call DisableTrigger(t)
call IssueImmediateOrderById(Z47,$D0004)
if uO=="Target"and(uP or uq)then
set m5=QA7(RP7,"OrderTarget")
call IssueTargetOrder(Z47,up,m5)
elseif uO=="Point"and(uP or uq)then
set hN=R77(RP7,"OrderPointX")
set ho=R77(RP7,"OrderPointY")
call IssuePointOrder(Z47,up,hN,ho)
elseif(uP or uq)then
call IssueImmediateOrder(Z47,"OrderString")
endif
call QF7(RP7,"SuperOrder",false)
call EnableTrigger(t)
set m5=null
set t=null
endfunction
function uQ takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real ur=R77(RP7,"DistanceRemaining")
local real uR=R77(RP7,"OriginalDistance")
local real RK=R77(RP7,"Angle")
local real Il=GetUnitX(Z47)+30*Cos(RK*bj_DEGTORAD)
local real IL=GetUnitY(Z47)+30*Sin(RK*bj_DEGTORAD)
local real us=$C8
local real uS=(1-ur/uR)*us*2
set LP4="uQ"
if uS>us then
set uS=us*2-uS
endif
call SetUnitFlyHeight(Z47,B97(uS,0),0)
call SetUnitX(Z47,AY7(Il))
call SetUnitY(Z47,AZ7(IL))
call SetUnitFacing(Z47,RK)
call QD7(RP7,"DistanceRemaining",ur-20)
if uS<1 and ur-uR!=0 then
call QF7(GetHandleId(Z47),"InAir",false)
call SetUnitFacing(Z47,RK)
call SetUnitAnimation(Z47,"stand")
call SetUnitPathing(Z47,true)
call uo(Z47)
call uN(Z47)
call PauseTimer(t)
call Q47(RP7)
call DestroyTimer(t)
endif
set t=null
set Z47=null
endfunction
function FTD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093684302)
local real in=350+50*X37
local real RK=GetUnitFacing(Z47)
local real iN=GetUnitX(Z47)
local real io=GetUnitY(Z47)
local real hN=AY7(iN+in*Cos(RK*bj_DEGTORAD))
local real ho=AZ7(io+in*Sin(RK*bj_DEGTORAD))
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
local trigger uT=Q67(GetHandleId(Z47),"Trigger_TrackOrder")
set LP4="FTD"
set in=SquareRoot((iN-hN)*(iN-hN)+(io-ho)*(io-ho))
if in>100 then
call Z27(Z47,1097691750)
call UnitRemoveAbility(Z47,1097691750)
call SetUnitPathing(Z47,false)
call SetUnitAnimationByIndex(Z47,6)
call DisableTrigger(uT)
call IssueImmediateOrderById(Z47,$D0004)
call EnableTrigger(uT)
call QD7(RP7,"DistanceRemaining",in)
call QD7(RP7,"OriginalDistance",in)
call QD7(RP7,"Angle",RK)
call QG7(RP7,"Hero",Z47)
call TimerStart(t,.025,true,function uQ)
call QF7(GetHandleId(Z47),"Leap_InAir",true)
call QF7(GetHandleId(Z47),"SuperOrder",false)
endif
set Z47=null
set t=null
set uT=null
endfunction
function uu takes nothing returns boolean
return OrderId2String(GetIssuedOrderId())!="windwalk"
endfunction
function uU takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer RP7=GetHandleId(Z47)
local boolean uv=R87(RP7,"Leap_InAir")
set LP4="uU"
call Q97(RP7,"OrderId",GetIssuedOrderId())
call QF7(RP7,"Idle",false)
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
call QE7(RP7,"OrderType","Target")
call QR7(RP7,"OrderTarget",GetOrderTarget())
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if uv or N67(GetUnitX(Z47),GetUnitY(Z47),GetOrderPointX(),GetOrderPointY())>800 then
call QE7(RP7,"OrderType","Point")
call QD7(RP7,"OrderPointX",GetOrderPointX())
call QD7(RP7,"OrderPointY",GetOrderPointY())
else
call QF7(RP7,"Idle",true)
endif
else
call QE7(RP7,"OrderType","Instant")
endif
if uv then
call QF7(RP7,"SuperOrder",true)
endif
set Z47=null
endfunction
function uV takes nothing returns nothing
local unit Z47=QA7(GetHandleId(GetExpiredTimer()),"Hero")
local integer RP7=GetHandleId(Z47)
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local string uO=R97(RP7,"OrderType")
set LP4="uV"
if uO=="Point"and N67(GetUnitX(Z47),GetUnitY(Z47),R77(RP7,"OrderPointX"),R77(RP7,"OrderPointY"))<100 then
call QF7(RP7,"Idle",true)
endif
set Z47=null
endfunction
function uw takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local timer t2
set LP4="uw"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddAction(t,function uU)
call TriggerAddCondition(t,Condition(function uu))
call QI7(GetHandleId(Z47),"Trigger_TrackOrder",t)
set t2=CreateTimer()
call QG7(GetHandleId(t2),"Hero",Z47)
call TimerStart(t2,.3,true,function uV)
call QQ7(GetHandleId(Z47),"Timer_CheckIdle",t2)
set Z47=null
set t=null
set t2=null
endfunction
function uW takes nothing returns nothing
if GetUnitAbilityLevel(GetTriggerUnit(),1093684302)==1 then
call uw()
endif
endfunction
function O48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O48"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FSD))
call TriggerAddAction(t,function FTD)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(t,function uW)
set t=null
endfunction
function ux takes nothing returns nothing
local unit Z47=QA7(GetHandleId(GetTriggeringTrigger()),"Morphling")
local real r
local real g
local real b
local integer FUD
local integer FVD
local real FWD
local real rStr2Agi
set LP4="ux"
if GetUnitTypeId(Z47)!=1328558160 then
call DisableTrigger(GetTriggeringTrigger())
elseif A47(Z47)==false and R87(GetHandleId(Z47),"Waveforming")==false then
set FUD=GetHeroAgi(Z47,true)
set FVD=GetHeroStr(Z47,true)
set FWD=RMaxBJ(75+2*(FUD-FVD),35)
set r=FWD
set g=FWD
set b=FWD
call SetUnitVertexColorBJ(Z47,r,g,b,GetRandomReal(.0,10.))
endif
set Z47=null
endfunction
function FXD takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==1328558160 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function FYD takes nothing returns nothing
local trigger t
set LP4="FYD"
if(R87(GetHandleId(GetTriggerUnit()),"HasMorphling")==false)then
set t=CreateTrigger()
call QG7(GetHandleId(t),"Morphling",GetTriggerUnit())
call QI7(GetHandleId(GetTriggerUnit()),"ColorTrigger",t)
call TriggerAddAction(t,function ux)
call TriggerRegisterTimerEvent(t,1.,true)
call QF7(GetHandleId(GetTriggerUnit()),"HasMorphling",true)
call UnitAddItem(GetTriggerUnit(),CreateItem(1227894853,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
set t=null
endfunction
function IQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IQ8"
call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
call TriggerAddCondition(t,Condition(function FXD))
call TriggerAddAction(t,function FYD)
set t=null
endfunction
function FZD takes nothing returns boolean
return GetSpellAbilityId()==1093682766
endfunction
function FAD takes nothing returns boolean
local unit T3=GetFilterUnit()
set LP4="FAD"
if IsUnitInGroup(T3,O8)then
set T3=null
return false
endif
if IsUnitEnemy(T3,GetOwningPlayer(L7))and GetUnitAbilityLevel(T3,1093678162)!=1 and GetUnitState(T3,UNIT_STATE_LIFE)>0 and IsUnitType(T3,UNIT_TYPE_STRUCTURE)==false then
set T3=null
return true
endif
set T3=null
return false
endfunction
function uZ takes nothing returns nothing
call UnitDamageTarget(L7,GetEnumUnit(),E8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function FBD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"UnitVar")
local real RK=R77(RP7,"Angle")
local integer u3=R47(RP7,"Remaining")
local group Ro=QL7(RP7,"AlreadyDamaged")
local real u4=GetUnitX(Z47)
local real u5=GetUnitY(Z47)
local real WN9=(LoadReal(C7,(RP7),(23)))
local real WO9=(LoadReal(C7,(RP7),(24)))
local real B17=WN9+$3E8*.05*Cos(RK)
local real B07=WO9+$3E8*.05*Sin(RK)
local group FP8=ZI7()
local unit DKD=QA7(RP7,"Dummy")
set LP4="FBD"
call SaveReal(C7,(RP7),(23),((B17)*1.))
call SaveReal(C7,(RP7),(24),((B07)*1.))
set L7=Z47
set E8=GetUnitAbilityLevel(Z47,1093682766)*75+25
set O8=Ro
call GroupEnumUnitsInRange(FP8,u4,u5,$C8+25,Condition(function FAD))
call ForGroup(FP8,function uZ)
call GroupAddGroup(FP8,Ro)
call ZH7(FP8)
set u3=u3-1
call Q97(RP7,"Remaining",u3)
call SetUnitX(Z47,AY7(B17))
call SetUnitY(Z47,AZ7(B07))
call SetUnitX(DKD,GetUnitX(Z47))
call SetUnitY(DKD,GetUnitY(Z47))
call IssueTargetOrderById(DKD,$D007F,Z47)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u4,u5))
if u3==0 then
call RemoveUnit(DKD)
call SetUnitVertexColor(Z47,$FF,$FF,$FF,$FF)
call QF7(GetHandleId(Z47),"Waveforming",false)
call SetUnitInvulnerable(Z47,false)
call SetUnitPathing(Z47,true)
call ClearSelectionForPlayer(GetOwningPlayer(Z47))
call SelectUnitAddForPlayer(Z47,GetOwningPlayer(Z47))
call Q47(RP7)
call RN7(t)
endif
set Z47=null
set Ro=null
set FP8=null
set t=null
return false
endfunction
function FCD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real iN=GetUnitX(Z47)
local real io=GetUnitY(Z47)
local location sy=GetSpellTargetLoc()
local real hN=GetLocationX(sy)
local real ho=GetLocationY(sy)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local group Ro=ZI7()
local integer NS7=GetPlayerId(GetOwningPlayer(Z47))
local unit DKD=CreateUnit(GetOwningPlayer(Z47),1697656901,iN,io,0)
call UnitAddAbility(DKD,1093815860)
call RemoveLocation(sy)
if GetSpellTargetUnit()!=null then
set hN=GetUnitX(GetSpellTargetUnit())
set ho=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(Z47,$FF,$FF,$FF,0)
call QF7(GetHandleId(Z47),"Waveforming",true)
call SetUnitInvulnerable(Z47,true)
call SetUnitPathing(Z47,false)
call QG7(RP7,"UnitVar",Z47)
call SaveReal(C7,(RP7),(23),((iN)*1.))
call SaveReal(C7,(RP7),(24),((io)*1.))
call QP7(RP7,"AlreadyDamaged",Ro)
call QD7(RP7,"Angle",Atan2(ho-io,hN-iN))
call Q97(RP7,"Remaining",B47(R2I(SquareRoot((hN-iN)*(hN-iN)+(ho-io)*(ho-io))/50),1))
call QG7(RP7,"Dummy",DKD)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function FBD))
call ShowUnit(Z47,false)
call ShowUnit(Z47,true)
call SelectUnitAddForPlayer(Z47,GetOwningPlayer(Z47))
set t=null
set Z47=null
set sy=null
set Ro=null
endfunction
function IR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IR8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FZD))
call TriggerAddAction(t,function FCD)
set t=null
endfunction
function u7 takes nothing returns nothing
local unit u8=QA7(GetHandleId(GetTriggeringTrigger()),"Morphling")
set LP4="u7"
if GetHeroStatBJ(1,u8,false)>2*GetUnitAbilityLevel(u8,1093684056)and GetUnitState(u8,UNIT_STATE_MANA)>=20. and GetUnitState(u8,UNIT_STATE_LIFE)>1. then
call SetUnitManaBJ(u8,GetUnitState(u8,UNIT_STATE_MANA)-20)
call ModifyHeroStat(1,u8,1,2*GetUnitAbilityLevel(u8,1093684056))
call ModifyHeroStat(0,u8,0,2*GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
endfunction
function u9 takes nothing returns nothing
local unit u8=QA7(GetHandleId(GetTriggeringTrigger()),"Morphling")
set LP4="u9"
if GetHeroStatBJ(0,u8,false)>2*GetUnitAbilityLevel(u8,1093684056)and GetUnitState(u8,UNIT_STATE_MANA)>=20. and GetUnitState(u8,UNIT_STATE_LIFE)>1. then
call SetUnitManaBJ(u8,GetUnitState(u8,UNIT_STATE_MANA)-20)
call ModifyHeroStat(0,u8,1,2*GetUnitAbilityLevel(u8,1093684056))
call ModifyHeroStat(1,u8,0,2*GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
endfunction
function F3D takes nothing returns boolean
return(((GetIssuedOrderId()==$D0246)or(GetIssuedOrderId()==$D0243))and(GetTriggerUnit()==QA7(GetHandleId(GetTriggeringTrigger()),"Morphling")))
endfunction
function UA takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local trigger Ub=Q67(RP7,"MorphStr")
local trigger UB=Q67(RP7,"MorphAgi")
set LP4="UA"
if(GetIssuedOrderId()==$D0243)then
call DisableTrigger(Ub)
elseif(GetIssuedOrderId()==$D0246)then
call DisableTrigger(UB)
endif
set Ub=null
set UB=null
endfunction
function F6D takes nothing returns boolean
return(((GetIssuedOrderId()==$D0245)or(GetIssuedOrderId()==$D0242))and(GetTriggerUnit()==QA7(GetHandleId(GetTriggeringTrigger()),"Morphling")))
endfunction
function UC takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local trigger Ub=Q67(RP7,"MorphStr")
local trigger UB=Q67(RP7,"MorphAgi")
set LP4="UC"
if(GetIssuedOrderId()==$D0242)then
call EnableTrigger(Ub)
call DisableTrigger(UB)
elseif(GetIssuedOrderId()==$D0245)then
call DisableTrigger(Ub)
call EnableTrigger(UB)
endif
set Ub=null
set UB=null
endfunction
function FLD takes nothing returns boolean
return GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER
endfunction
function F1D takes unit ZO7,integer F0D,real F5D returns nothing
local integer F2D=GetHeroAgi(ZO7,false)
local integer F_D=GetHeroStr(ZO7,false)
local real G4D=GetUnitState(ZO7,UNIT_STATE_MANA)
if F0D==0 then
if G4D>=F5D and F2D>2 and A47(ZO7)==false then
call SetUnitState(ZO7,UNIT_STATE_MANA,G4D-F5D)
call SetHeroAgi(ZO7,F2D-2,true)
call SetHeroStr(ZO7,F_D+2,true)
endif
elseif F0D==1 then
if G4D>=F5D and F_D>2 and A47(ZO7)==false then
call SetUnitState(ZO7,UNIT_STATE_MANA,G4D-F5D)
call SetHeroAgi(ZO7,F2D+2,true)
call SetHeroStr(ZO7,F_D-2,true)
endif
endif
endfunction
function G7D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer G8D=GetUnitAbilityLevel(Z47,1093684056)
set LP4="G7D"
call F1D(Z47,1,30./ G8D)
set t=null
set Z47=null
return false
endfunction
function G9D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer G8D=GetUnitAbilityLevel(Z47,1093684056)
set LP4="G9D"
call F1D(Z47,0,30./ G8D)
set t=null
set Z47=null
return false
endfunction
function GDD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local trigger GED=Q67(RP7,"Iterate")
local integer G8D=GetUnitAbilityLevel(Z47,1093684056)
local integer GFD=R47(RP7,"LastOrder")
local real GGD=1./ G8D
set LP4="GDD"
if GetIssuedOrderId()==$D0245 then
if GED!=null then
call Q47(GetHandleId(GED))
call RN7(GED)
endif
set GED=CreateTrigger()
call TriggerRegisterTimerEvent(GED,GGD,true)
call TriggerAddCondition(GED,Condition(function G7D))
call QG7(GetHandleId(GED),"Hero",Z47)
call QI7(RP7,"Iterate",GED)
call Q97(RP7,"LastOrder",GetIssuedOrderId())
call UnitAddAbility(Z47,1093808716)
call UnitRemoveAbility(Z47,1093808724)
elseif GetIssuedOrderId()==$D0242 then
if GED!=null then
call Q47(GetHandleId(GED))
call RN7(GED)
endif
set GED=CreateTrigger()
call TriggerRegisterTimerEvent(GED,GGD,true)
call TriggerAddCondition(GED,Condition(function G9D))
call QG7(GetHandleId(GED),"Hero",Z47)
call QI7(RP7,"Iterate",GED)
call Q97(RP7,"LastOrder",GetIssuedOrderId())
call UnitAddAbility(Z47,1093808724)
call UnitRemoveAbility(Z47,1093808716)
elseif GetIssuedOrderId()==$D0246 then
if GED!=null then
call Q47(GetHandleId(GED))
call RN7(GED)
endif
call QG7(RP7,"Iterate",null)
call Q97(RP7,"LastOrder",GetIssuedOrderId())
call UnitRemoveAbility(Z47,1093808716)
call UnitRemoveAbility(Z47,1093808724)
elseif GetIssuedOrderId()==$D0243 then
if GED!=null then
call Q47(GetHandleId(GED))
call RN7(GED)
endif
call QG7(RP7,"Iterate",null)
call Q97(RP7,"LastOrder",GetIssuedOrderId())
call UnitRemoveAbility(Z47,1093808716)
call UnitRemoveAbility(Z47,1093808724)
elseif GetIssuedOrderId()==$D0244 and GFD!=$D0242 and GFD!=$D0242 then
call F1D(Z47,1,30./ G8D)
elseif GetIssuedOrderId()==$D0241 and GFD!=$D0242 and GFD!=$D0242 then
call F1D(Z47,0,30./ G8D)
endif
set t=null
set Z47=null
set GED=null
return false
endfunction
function GHD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(GetTriggerUnit(),1093684056)
set LP4="GHD"
if DB8==1 then
call SetHeroAgi(ZO7,GetHeroAgi(ZO7,false)+3,true)
call SetHeroStr(ZO7,GetHeroStr(ZO7,false)+3,true)
else
call SetHeroAgi(ZO7,GetHeroAgi(ZO7,false)+1,true)
call SetHeroStr(ZO7,GetHeroStr(ZO7,false)+1,true)
endif
if DB8==1 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call Z27(ZO7,1093684055)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function GDD))
call QG7(JZ7,"Iterate",null)
else
call SetUnitAbilityLevel(ZO7,1093684055,DB8)
endif
set t=null
set ZO7=null
endfunction
function GID takes nothing returns boolean
return GetLearnedSkill()==1093684056 and IsUnitIllusion(GetTriggerUnit())==false and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER
endfunction
function GJD takes nothing returns nothing
local unit u8=GetTriggerUnit()
local trigger Ue
local trigger UE
local trigger Ub
local trigger UB
set LP4="GJD"
if(GetUnitAbilityLevel(u8,1093684056)==1)then
call Z27(u8,1093684055)
set UB=CreateTrigger()
call DisableTrigger(UB)
call TriggerRegisterTimerEventPeriodic(UB,1.)
call TriggerAddAction(UB,function u9)
call QG7(GetHandleId(UB),"Morphling",u8)
set Ub=CreateTrigger()
call DisableTrigger(Ub)
call TriggerRegisterTimerEventPeriodic(Ub,1.)
call TriggerAddAction(Ub,function u7)
call QG7(GetHandleId(Ub),"Morphling",u8)
set Ue=CreateTrigger()
call ky(Ue,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(Ue,Condition(function F6D))
call TriggerAddAction(Ue,function UC)
call QI7(GetHandleId(Ue),"MorphAgi",UB)
call QI7(GetHandleId(Ue),"MorphStr",Ub)
call QG7(GetHandleId(Ue),"Morphling",u8)
set UE=CreateTrigger()
call ky(UE,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(UE,Condition(function F3D))
call TriggerAddAction(UE,function UA)
call QI7(GetHandleId(UE),"MorphAgi",UB)
call QI7(GetHandleId(UE),"MorphStr",Ub)
call QG7(GetHandleId(UE),"Morphling",u8)
if(GetPlayerController(GetOwningPlayer(u8))!=MAP_CONTROL_USER)then
call QI7(GetHandleId(GetOwningPlayer(u8)),"MorphAgi",UB)
call QI7(GetHandleId(GetOwningPlayer(u8)),"MorphStr",Ub)
endif
else
call SetUnitAbilityLevel(u8,1093684055,GetUnitAbilityLevel(u8,1093684056))
endif
set u8=null
set Ue=null
set UE=null
set Ub=null
set UB=null
endfunction
function pZ takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="pZ"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function FLD))
call TriggerAddAction(t,function GHD)
set t=null
endfunction
function IU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IU8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function GID))
call TriggerAddAction(t,function GJD)
set t=null
endfunction
function GKD takes nothing returns boolean
return GetSpellAbilityId()==1093682998 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and ZG7(GetSpellTargetUnit())==false
endfunction
function GMD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093682998)
local unit DA8
local location FY9
local real l4
local integer FUD=GetHeroAgi(Z47,true)
local integer FVD=GetHeroStr(Z47,true)
local real GND=I2R(FUD)/ I2R(FVD)
local real GOD=I2R(FVD)/ I2R(FUD)
local real GPD
local real GQD
local real GRD
local real GSD
local real BD7
local real GTD
local integer GUD
local integer GVD
local integer GWD
local string GXD
local string GYD
local string GZD
set LP4="GMD"
if GND<.5 then
set GPD=.25
set GQD=20*X37
elseif GND>1.5 then
set GPD=.5*X37
set GQD=20*X37
else
set GPD=.25+(GND-.5)*(.5*X37-.25)
set GQD=20*X37
endif
if GOD<.5 then
set GRD=.25
set GSD=100
elseif GOD>1.5 then
set GRD=.75*X37
set GSD=300
else
set GSD=100+(GOD-.5)*$C8
set GRD=.25+(GOD-.5)*(.75*X37-.25)
endif
set BD7=GQD+GPD*FUD
set GTD=GRD
set GUD=R2I(GTD)
set GVD=R2I($A*GTD-GUD*$A)
set GWD=R2I(100*GTD-GVD*$A-GUD*100)
set GXD=I2S(GUD)
set GYD=I2S(GVD)
set GZD=I2S(GWD)
set l4=Atan2(GetUnitY(m5)-GetUnitY(Z47),GetUnitX(m5)-GetUnitX(Z47))
set FY9=Location(GetUnitX(m5)+GSD*Cos(l4),GetUnitY(m5)+GSD*Sin(l4))
call SetUnitPositionLoc(m5,FY9)
call BW7(GetLocationX(FY9),GetLocationY(FY9),$C8)
call RemoveLocation(FY9)
call BO7("|c001ce6b9+"+I2S(R2I(BD7))+"|r |c00ff0303+"+GXD+"."+GYD+GZD+"|r",1,m5,.023,$FF,$FF,$FF,$D8)
call D38(Z47,m5,1,BD7)
call DZ8(Z47,m5,GTD)
set Z47=null
set m5=null
set DA8=null
set FY9=null
endfunction
function IS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GKD))
call TriggerAddAction(t,function GMD)
set t=null
call AC7(1093687350)
endfunction
function GAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))-1
local texttag tt
set LP4="GAD"
call SaveInteger(C7,(JZ7),(34),(ZD8))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(ZD8),.03)
call SetTextTagPosUnit(tt,CP7,0)
call SetTextTagColorBJ(tt,0,29,$FF,$F)
call SetTextTagVelocity(tt,0,.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(CP7)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
set tt=CreateTextTag()
call SetTextTagText(tt,I2S(ZD8),.03)
call SetTextTagPosUnit(tt,J67,0)
call SetTextTagColorBJ(tt,0,29,$FF,$F)
call SetTextTagVelocity(tt,0,.035)
call SetTextTagFadepoint(tt,3)
call SetTextTagLifespan(tt,.9)
call SetTextTagPermanent(tt,false)
call SetTextTagVisibility(tt,false)
if GetOwningPlayer(CP7)==GetLocalPlayer()then
call SetTextTagVisibility(tt,true)
endif
endif
set t=null
set tt=null
set CP7=null
set J67=null
return false
endfunction
function GBD takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit ZO7=(LoadUnitHandle(C7,(GetHandleId(t)),($E)))
local unit GCD=(LoadUnitHandle(C7,(GetHandleId(ZO7)),($E5)))
set LP4="GBD"
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(GCD),GetUnitY(GCD)))
call RemoveUnit(GCD)
call UnitRemoveAbility(ZO7,(1093683011))
if(LoadInteger(C7,(GetHandleId(ZO7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(ZO7)),(704)))==(1093683000)then
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),(1093683000),true)
endif
call FlushChildHashtable(C7,(GetHandleId(t)))
call RN7((t))
set ZO7=null
set GCD=null
set t=null
endfunction
function G3D takes nothing returns boolean
return(GetSpellAbilityId()==(1093683011))
endfunction
function G6D takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local integer JZ7=GetHandleId(ZO7)
local unit GCD=(LoadUnitHandle(C7,(JZ7),($E5)))
local real x=GetUnitX(GCD)
local real y=GetUnitY(GCD)
set LP4="G6D"
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",GetUnitX(ZO7),GetUnitY(ZO7)))
call KillUnit(GCD)
call SetUnitX(ZO7,x)
call SetUnitY(ZO7,y)
call PanCameraToTimedForPlayer(GetOwningPlayer(ZO7),x,y,0)
call IssueImmediateOrderById(ZO7,$D0004)
set ZO7=null
set GCD=null
endfunction
function GLD takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),(1110455088))>0 and GetUnitState(GetSummonedUnit(),UNIT_STATE_LIFE)>0
endfunction
function G1D takes nothing returns nothing
local unit ZO7=GetSummoningUnit()
local integer JZ7=GetHandleId(ZO7)
local unit J67=(LoadUnitHandle(C7,(JZ7),($E4)))
local unit GCD=GetSummonedUnit()
local trigger t
set LP4="G1D"
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),(1093683000),false)
call Z27(ZO7,(1093683011))
call SetUnitColor(GCD,GetPlayerColor(GetOwningPlayer(J67)))
call SaveUnitHandle(C7,(JZ7),($E5),(GCD))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,GCD,EVENT_UNIT_DEATH)
call TriggerAddAction(t,function GBD)
call SaveUnitHandle(C7,(GetHandleId(t)),($E),(ZO7))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,GCD,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function GAD))
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(ZO7))
call SaveUnitHandle(C7,(GetHandleId(t)),(17),(GCD))
call SaveInteger(C7,(GetHandleId(t)),(34),(GetUnitAbilityLevel(ZO7,(1093683000))*$F+$F-1))
set ZO7=null
set J67=null
set GCD=null
set t=null
endfunction
function G0D takes nothing returns boolean
return GetSpellAbilityId()==(1093683000)
endfunction
function G5D takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="G5D"
call SaveUnitHandle(C7,(GetHandleId(ZO7)),($E4),(J67))
set ZO7=null
set J67=null
endfunction
function G2D takes nothing returns boolean
if GetSpellAbilityId()==(1093683000)then
if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit())then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659014))
endif
endif
return false
endfunction
function IT8 takes nothing returns nothing
local trigger t
set LP4="IT8"
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G0D))
call TriggerAddAction(t,function G5D)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function GLD))
call TriggerAddAction(t,function G1D)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G3D))
call TriggerAddAction(t,function G6D)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function G2D))
set t=null
endfunction
function G_D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YO4)==false then
call GroupAddUnit(YP4,GetEnumUnit())
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endif
endfunction
function H4D takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1110454858)
call UnitRemoveAbility(GetEnumUnit(),1112896368)
call UnitRemoveAbility(GetEnumUnit(),1114993524)
endfunction
function H7D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YN4)==false then
call GroupAddUnit(YN4,GetEnumUnit())
call SetUnitOwner(YM4,GetOwningPlayer(GetEnumUnit()),false)
call IssueTargetOrderById(YM4,$D0103,GetEnumUnit())
endif
endfunction
function H8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local group g
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
set LP4="H8D"
if GetTriggerEvalCount(t)==$A then
call Z27(CP7,1093809221)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093678933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809221,true)
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>$8C or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093809221)then
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093678933 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093678933,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809221,false)
call ForGroup(DND,function H4D)
call ZH7(DND)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
set YK4=CP7
set YM4=DA8
set YN4=DND
call GroupEnumUnitsInRange(g,x,y,$4E2+25,Condition(function C67))
call ForGroup(g,function H7D)
set YO4=g
set YP4=ZI7()
call ForGroup(DND,function G_D)
call GroupRemoveGroup(YP4,DND)
call ZH7(g)
call ZH7(YP4)
endif
set t=null
set g=null
set CP7=null
set DND=null
set DA8=null
return false
endfunction
function H9D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
set LP4="H9D"
call UnitAddAbility(DA8,1093678932)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H8D))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\SongOfTheSiren_2.mdx",CP7,"origin")))
set t=null
set CP7=null
endfunction
function HDD takes nothing returns boolean
if GetSpellAbilityId()==1093678933 then
call H9D()
endif
return false
endfunction
function IV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HDD))
set t=null
endfunction
function HED takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093815125)
local integer id=1093809204
set LP4="WaterSpray_Hit"
call D38(CP7,J67,1,100+30*DB8)
if DB8==2 then
set id=1093809205
elseif DB8==3 then
set id=1093809206
elseif DB8==4 then
set id=1093809207
endif
if BP8(J67)==false then
call CW7(J67,id,1,8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),id,false)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",J67,"chest"))
set CP7=null
set J67=null
endfunction
function HFD takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),E67)==false then
call GroupAddUnit(E67,GetEnumUnit())
call HED(E37,GetEnumUnit())
endif
endfunction
function HGD takes nothing returns nothing
local unit CP7=GetEnumUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local group g=ZI7()
call DestroyEffect(AddSpecialEffect("war3mapImported\\RipTide09.mdx",x,y))
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function LF7))
call ForGroup(g,function HFD)
call ZH7(g)
set t=null
set g=null
endfunction
function HHD takes nothing returns boolean
return IsUnitIllusion(GetFilterUnit())and A47(GetFilterUnit())==false
endfunction
function HID takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local group g=ZI7()
local integer i=0
set LP4="HID"
set E67=ZI7()
set E37=CP7
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(CP7),Condition(function HHD))
call GroupAddUnit(g,CP7)
call ForGroup(g,function HGD)
call ZH7(g)
call ZH7(E67)
set CP7=null
set g=null
endfunction
function HJD takes nothing returns boolean
if GetSpellAbilityId()==1093815125 then
call HID()
endif
return false
endfunction
function IW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HJD))
set t=null
endfunction
function HKD takes unit CP7,unit J67,integer DB8 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="Ensnare"
call UnitAddAbility(DA8,1093681729)
call SetUnitAbilityLevel(DA8,1093681729,DB8)
call IssueTargetOrderById(DA8,$D008A,J67)
set DA8=null
endfunction
function HMD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call HKD(GetFilterUnit(),YR4,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
endif
return false
endfunction
function HND takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1212363833 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),IH4)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function HOD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local group g=ZI7()
set LP4="HOD"
set IH4=MZ7(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(YR4),GetUnitY(YR4))
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),700,Condition(function HND))
call ZH7(g)
set ZO7=null
set g=null
endfunction
function HPD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=YR4
local group g=ZI7()
set LP4="HPD"
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),700,Condition(function HMD))
call ZH7(g)
set ZO7=null
set g=null
endfunction
function HQD takes nothing returns boolean
if GetSpellAbilityId()==1093809220 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if ZG7(GetSpellTargetUnit())==false then
set YQ4=0
set YR4=GetSpellTargetUnit()
call HKD(GetTriggerUnit(),YR4,GetUnitAbilityLevel(GetTriggerUnit(),1093809220))
call HPD()
endif
else
call HOD()
endif
endif
return false
endfunction
function IX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function HQD))
set t=null
endfunction
function HRD takes unit HSD returns integer
local real r=GetRandomReal(0,100)
local integer X37=GetUnitAbilityLevel(HSD,1093679160)
local boolean HTD=PH7(HSD,SU[FA4])!=null
local integer HUD=0
local integer id=GetPlayerId(GetOwningPlayer(HSD))
set LP4="MC_RunChance"
set HTD=false
if X37==1 then
set TH4[id]=TH4[id]+1
if HTD then
if r<30 then
set TF4[id]=TF4[id]+1
set HUD=3
elseif r<60 then
set TE4[id]=TE4[id]+1
set HUD=2
endif
else
if r<25 then
set HUD=2
set TE4[id]=TE4[id]+1
endif
endif
elseif X37==2 then
set TH4[id]=TH4[id]+1
if HTD then
if r<17.5 then
set HUD=4
set TG4[id]=TG4[id]+1
elseif r<35 then
set HUD=3
set TF4[id]=TF4[id]+1
elseif r<70 then
set HUD=2
set TE4[id]=TE4[id]+1
endif
else
if r<20 then
set HUD=3
set TF4[id]=TF4[id]+1
elseif r<40 then
set HUD=2
set TE4[id]=TE4[id]+1
endif
endif
elseif X37==3 then
set TH4[id]=TH4[id]+1
if HTD then
if r<$A then
set HUD=5
set N4[id]=N4[id]+1
elseif r<20 then
set HUD=4
set TG4[id]=TG4[id]+1
elseif r<40 then
set HUD=3
set TF4[id]=TF4[id]+1
elseif r<80 then
set HUD=2
set TE4[id]=TE4[id]+1
endif
else
if r<12.5 then
set HUD=4
set TG4[id]=TG4[id]+1
elseif r<25 then
set HUD=3
set TF4[id]=TF4[id]+1
elseif r<50 then
set HUD=2
set TE4[id]=TE4[id]+1
endif
endif
endif
return HUD
endfunction
function HVD takes nothing returns boolean
local unit m5=GetFilterUnit()
local unit Z47=GetTriggerUnit()
set LP4="HVD"
if IsUnitAlly(m5,GetOwningPlayer(Z47))and GetUnitState(m5,UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(m5,1113746543)==0 then
if(GetOwningPlayer(m5)==Y7[0]or GetOwningPlayer(m5)==Z7[0])then
if(GetUnitTypeId(m5)==1969711215 or GetUnitTypeId(m5)==1966092337 or GetUnitTypeId(m5)==1970169187 or GetUnitTypeId(m5)==1966092338)then
set m5=null
set Z47=null
return true
endif
if(GetUnitTypeId(m5)==1702061422 or GetUnitTypeId(m5)==1697656918 or GetUnitTypeId(m5)==1701081721 or GetUnitTypeId(m5)==1697656919)then
set m5=null
set Z47=null
return true
endif
return false
elseif IsUnitType(m5,UNIT_TYPE_HERO) then
set m5=null
set Z47=null
return true
elseif GetOwningPlayer(m5)==GetOwningPlayer(Z47)then
set m5=null
set Z47=null
return true
endif
endif
set m5=null
set Z47=null
return false
endfunction
function HWD takes integer r returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=r
local group FP8=ZI7()
local unit DA8
local unit G58
local integer HXD=GetSpellAbilityId()
local integer T8=1
set LP4="Bloodlust"
if r==2 then
call BO7(GetObjectName(1848658743),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==3 then
call BO7(GetObjectName(1848658516),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==4 then
call BO7(GetObjectName(1848658744),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==5 then
call BO7(GetObjectName(1848658511),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
endif
set r=r-1
call GroupEnumUnitsInRange(FP8,GetUnitX(Z47),GetUnitY(Z47),600,Condition(function HVD))
if Z47!=GetSpellTargetUnit()then
call GroupAddUnit(FP8,Z47)
endif
loop
exitwhen T8>X37
set T8=T8+1
set DA8=CreateUnit(GetOwningPlayer(Z47),1697656899,GetUnitX(Z47),GetUnitY(Z47),270)
call P37(DA8)
call Z27(DA8,HXD)
call SetUnitAbilityLevel(DA8,HXD,GetUnitAbilityLevel(Z47,HXD))
call UnitApplyTimedLife(DA8,1112820806,1.)
set G58=GroupPickRandomUnit(FP8)
call PB7(DA8,"bloodlust",G58)
call SetUnitPathing(DA8,false)
call SetUnitInvulnerable(DA8,true)
call Z27(DA8,1097625443)
call GroupRemoveUnit(FP8,G58)
endloop
call ZH7(FP8)
set Z47=null
set FP8=null
set DA8=null
set G58=null
endfunction
function HYD takes nothing returns boolean
local integer r
set LP4="HYD"
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and(GetSpellAbilityId()==1093679155 or GetSpellAbilityId()==1093679177 or GetSpellAbilityId()==1093679175 or GetSpellAbilityId()==1093679174)then
set r=HRD(GetTriggerUnit())
if r>1 then
call HWD(r)
endif
endif
return false
endfunction
function IZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HYD))
set t=null
endfunction
function HZD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093815122)
call IssueTargetOrderById(DA8,$D007F,J67)
set CP7=null
set J67=null
set DA8=null
endfunction
function HAD takes nothing returns nothing
local unit CP7=IM4
call Z27(CP7,1093815121)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093815121,true)
call QF7(GetHandleId(CP7),"AI|Magi2Blast",true)
set CP7=null
endfunction
function HBD takes nothing returns nothing
local unit CP7=IM4
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093815121,false)
set CP7=null
endfunction
function HCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
local integer H3D=R47(RP7,"Iterations")
local integer X37=R47(RP7,"Level")
local integer H6D=R47(RP7,"Spell")
local unit DA8
set LP4="HCD"
if GetTriggerEvalCount(t)>H3D then
call Q47(RP7)
call RN7(t)
else
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
if H6D==1093815121 then
set H6D=1093815122
endif
call Z27(DA8,H6D)
call SetUnitAbilityLevel(DA8,H6D,X37)
call IssueTargetOrderById(DA8,$D007F,m5)
endif
set t=null
set m5=null
set p5=null
set DA8=null
return false
endfunction
function HLD takes integer r returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer H6D=GetSpellAbilityId()
local integer X37=GetUnitAbilityLevel(p5,H6D)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="Fireblast"
if r==2 then
call BO7(GetObjectName(1848658743),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==3 then
call BO7(GetObjectName(1848658516),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==4 then
call BO7(GetObjectName(1848658744),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
elseif r==5 then
call BO7(GetObjectName(1848658511),5,GetTriggerUnit(),.03,$FF,0,0,$FF)
endif
set r=r-1
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Iterations",r)
call Q97(RP7,"Level",X37)
call Q97(RP7,"Spell",H6D)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function HCD))
set t=null
set m5=null
set p5=null
endfunction
function H1D takes nothing returns boolean
local integer r
set LP4="H1D"
if GetUnitAbilityLevel(GetTriggerUnit(),1093679160)>0 and ZG7(GetSpellTargetUnit())==false and(GetSpellAbilityId()==1093678167 or GetSpellAbilityId()==1093679172 or GetSpellAbilityId()==1093679169 or GetSpellAbilityId()==1093679161 or GetSpellAbilityId()==1093815121)then
set r=HRD(GetTriggerUnit())
if r>1 and((LoadInteger(C7,(GetHandleId((GetSpellTargetUnit()))),((4322))))==1)==false then
call HLD(r)
endif
endif
if ZG7(GetSpellTargetUnit())==false and GetSpellAbilityId()==1093815121 then
call HZD()
endif
return false
endfunction
function H0D takes nothing returns boolean
local integer id=GetPlayerId(GetTriggerPlayer())
local string GXD
local string GYD
local string GZD
local string H5D
local string H2D
local string str6
set LP4="H0D"
if TH4[id]>0 then
set GXD=GetObjectName(1848658504)+" "+I2S(TH4[id])
set GYD=GetObjectName(1848658509)+" "+I2S(TE4[id]+TF4[id]+TG4[id]+N4[id])+" ("+I2S((TE4[id]+TF4[id]+TG4[id]+N4[id])*100/ TH4[id])+"%)"
set GZD=GetObjectName(1848658508)+" "+I2S(TE4[id])+" ("+I2S(100*TE4[id]/ TH4[id])+"%)"
set H5D=GetObjectName(1848658507)+" "+I2S(TF4[id])+" ("+I2S(100*TF4[id]/ TH4[id])+"%)"
set H2D=GetObjectName(1848658506)+" "+I2S(TG4[id])+" ("+I2S(100*TG4[id]/ TH4[id])+"%)"
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GXD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GYD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GZD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,H5D)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,H2D)
endif
return false
endfunction
function IY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H1D))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function H0D))
set t=null
endfunction
function H_D takes nothing returns boolean
return GetSpellAbilityId()==1093679182
endfunction
function Uu takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function UU takes nothing returns nothing
call D38(GetTriggerUnit(),GetEnumUnit(),3,E8)
endfunction
function I7D takes nothing returns nothing
local boolexpr hP=Condition(function Uu)
local group FP8=ZI7()
local real x=GetUnitX(GetSpellTargetUnit())
local real y=GetUnitY(GetSpellTargetUnit())
set LP4="I7D"
set E8=90*GetUnitAbilityLevel(GetTriggerUnit(),1093679182)
call GroupEnumUnitsInRange(FP8,x,y,$FA,hP)
call ForGroup(FP8,function UU)
if GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)>1 then
call SetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE,GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+E8)
endif
call ZH7(FP8)
call DestroyBoolExpr(hP)
set FP8=null
set hP=null
endfunction
function PN takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PN"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function H_D))
call TriggerAddAction(t,function I7D)
set t=null
endfunction
function I8D takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==KC4[21]and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and IsUnitIllusion(GetFilterUnit())==false then
set IM4=GetFilterUnit()
endif
return false
endfunction
function I9D takes nothing returns nothing
local unit IDD=GetTriggerUnit()
local unit p5
local group g=ZI7()
local real x
local real y
set LP4="I9D"
set IM4=null
call GroupEnumUnitsInRange(g,GetUnitX(IDD),GetUnitY(IDD),$3E8,Condition(function I8D))
call ZH7(g)
set p5=IM4
if p5!=null then
set x=GetUnitX(p5)
set y=GetUnitY(p5)
call SetUnitPosition(IDD,x,y)
endif
set x=GetUnitX(IDD)+600*Cos(GetUnitFacing(IDD)*bj_DEGTORAD)
set y=GetUnitY(IDD)+600*Sin(GetUnitFacing(IDD)*bj_DEGTORAD)
call IssuePointOrderById(IDD,$D0012,x,y)
set IDD=null
set p5=null
set g=null
endfunction
function IED takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1110455105)>0 then
call I9D()
endif
return false
endfunction
function Po takes nothing returns nothing
local trigger t=CreateTrigger()
local region r=CreateRegion()
set LP4="Po"
call RegionAddRect(r,bj_mapInitialPlayableArea)
call TriggerRegisterEnterRegion(t,r,null)
call TriggerAddCondition(t,Condition(function IED))
set t=null
set r=null
endfunction
function IFD takes nothing returns boolean
return((IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(UnitHasBuffBJ(GetAttacker(),1110455106))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_ANCIENT)))!=null
endfunction
function IGD takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110455106)>0 then
set IG4=IG4+1
endif
return false
endfunction
function IHD takes nothing returns nothing
local unit IID=GetAttacker()
local group g=ZI7()
local integer IJD=GetRandomInt(1,100)
local integer IKD=GetUnitAbilityLevel(IID,1093682242)
local integer IMD=GetUnitAbilityLevel(IID,1093687627)
local unit DA8
local integer IND=2*IKD
local integer IOD=$C
set LP4="IHD"
set IG4=0
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(IID),Condition(function IGD))
call ZH7(g)
if IG4<IND then
if IsUnitIllusion(IID)==false and IJD<=(IOD+2*IMD)then
set DA8=CreateUnit(GetOwningPlayer(IID),1697656901,GetUnitX(IID),GetUnitY(IID),0)
call Z27(DA8,1093682244)
call IssueTargetOrderById(DA8,$D0132,IID)
endif
if IsUnitIllusion(IID) and IJD<=(1+2*IMD)and IMD>0 then
set DA8=CreateUnit(GetOwningPlayer(IID),1697656901,GetUnitX(IID),GetUnitY(IID),0)
call Z27(DA8,1093682244)
call IssueTargetOrderById(DA8,$D0132,IID)
endif
endif
set IID=null
set g=null
set DA8=null
endfunction
function PO takes nothing returns nothing
set dU=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dU,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(dU,Condition(function IFD))
call TriggerAddAction(dU,function IHD)
endfunction
function IPD takes nothing returns boolean
local unit IQD=GetSummonedUnit()
local unit oA
local unit m5
set LP4="IPD"
if GetUnitAbilityLevel(IQD,1110456632)>0 then
set oA=GetSummoningUnit()
set m5=QA7(GetHandleId(oA),"SpiritTarget")
call SetUnitX(IQD,GetUnitX(m5))
call SetUnitY(IQD,GetUnitY(m5))
call IssueTargetOrderById(IQD,$D000F,m5)
endif
set IQD=null
set oA=null
set m5=null
return false
endfunction
function IRD takes player p,unit m5,integer X37 returns nothing
local unit oA=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitX(m5),0)
local integer ISD
set LP4="SpiritLance_CreateImage"
call QG7(GetHandleId(oA),"SpiritTarget",m5)
if X37==1 then
set ISD=1093742664
elseif X37==2 then
set ISD=1093742663
elseif X37==3 then
set ISD=1093742665
else
set ISD=1093742662
endif
call Z27(oA,ISD)
call IssueTargetOrderById(oA,$D0132,G7[GetPlayerId(p)])
set oA=null
endfunction
function ITD takes player p,unit J67,integer X37,boolean IUD,boolean IVD returns nothing
local real YU9=50+50*X37
local unit DA8
if IVD then
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093742659)
call SetUnitAbilityLevel(DA8,1093742659,X37)
call IssueTargetOrderById(DA8,$D00DD,J67)
call D38(G7[GetPlayerId(p)],J67,1,YU9)
if IUD then
call IRD(p,J67,X37)
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",J67,"origin"))
set DA8=null
endfunction
function IWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"SourcePlayer")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local boolean IVD=R87(RP7,"damage")
local unit IJ=QA7(RP7,"Projectile")
local real x=GetUnitX(IJ)
local real y=GetUnitY(IJ)
local real hN=GetUnitX(m5)
local real ho=GetUnitY(m5)
local real Ik=$3E8*.035
local real IK=MZ7(x,y,hN,ho)
local real Il=x+Ik*Cos(IK*bj_DEGTORAD)
local real IL=y+Ik*Sin(IK*bj_DEGTORAD)
set LP4="IWD"
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
call SetUnitFacing(IJ,IK)
if N67(hN,ho,Il,IL)<=Ik then
call ITD(p,m5,X37,true,IVD)
call KillUnit(IJ)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set IJ=null
return false
endfunction
function IXD takes unit p5,integer X37,unit m5,boolean IVD returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit IJ=CreateUnit(GetOwningPlayer(p5),1747990092,GetUnitX(p5),GetUnitY(p5),MZ7(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5)))
set LP4="G6v"
call QN7(RP7,"SourcePlayer",GetOwningPlayer(p5))
call QG7(RP7,"Target",m5)
call QF7(RP7,"damage",IVD)
call QG7(RP7,"Projectile",IJ)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,.035,true)
call TriggerAddCondition(t,Condition(function IWD))
set t=null
set IJ=null
endfunction
function IYD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call IXD(GetFilterUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093742660),GetSpellTargetUnit(),false)
endif
return false
endfunction
function IZD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093742660)
local unit m5=GetSpellTargetUnit()
local group g=ZI7()
local boolean IAD=ZG7(GetSpellTargetUnit())
set LP4="IZD"
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),700,Condition(function IYD))
if IAD then
call IXD(Z47,X37,m5,false)
else
call IXD(Z47,X37,m5,true)
endif
call ZH7(g)
set Z47=null
set m5=null
set g=null
endfunction
function IBD takes nothing returns boolean
if IsUnitIllusion(GetFilterUnit()) and GetUnitTypeId(GetFilterUnit())==1332179560 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())then
call SetUnitFacing(GetFilterUnit(),IH4)
call SetUnitAnimation(GetFilterUnit(),"spell")
endif
return false
endfunction
function ICD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local group g=ZI7()
set LP4="ICD"
set IH4=MZ7(GetUnitX(Z47),GetUnitY(Z47),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),700,Condition(function IBD))
call ZH7(g)
set Z47=null
set g=null
endfunction
function I3D takes nothing returns boolean
if GetSpellAbilityId()==1093742660 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call IZD()
else
call ICD()
endif
endif
return false
endfunction
function IA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IA8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function I3D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function I3D))
call AC7(1093742659)
call AC7(1093742664)
call AC7(1093742663)
call AC7(1093742665)
call AC7(1093742662)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function IPD))
set t=null
endfunction
function I6D takes nothing returns nothing
local unit u=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(u),1697656901,GetUnitX(u),GetUnitY(u),0)
set LP4="I6D"
call Z27(oA,1093682243)
call IssueTargetOrderById(oA,$D0132,u)
set u=null
set oA=null
endfunction
function ILD takes nothing returns boolean
if GetSpellAbilityId()==1093682231 then
call I6D()
endif
return false
endfunction
function IB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ILD))
set t=null
endfunction
function I1D takes nothing returns boolean
return GetSpellAbilityId()==1093678938
endfunction
function U4 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0)!=null
endfunction
function U5 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697657394,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),270)
set LP4="U5"
call Z27(oA,1093678676)
call SetUnitAbilityLevel(oA,1093678676,GetUnitAbilityLevel(Z47,1093678938))
call IssueTargetOrderById(oA,$D00CB,GetEnumUnit())
set Z47=null
set oA=null
endfunction
function I0D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local group FP8=ZI7()
local boolexpr hP=Condition(function U4)
set LP4="I0D"
call GroupEnumUnitsInRange(FP8,GetUnitX(Z47),GetUnitY(Z47),650,hP)
call ForGroup(FP8,function U5)
call DestroyBoolExpr(hP)
call ZH7(FP8)
set Z47=null
set FP8=null
endfunction
function IC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IC8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function I1D))
call TriggerAddAction(t,function I0D)
set t=null
endfunction
function I5D takes unit p5,integer X37 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
set LP4="NaturesGuise_Add"
call Z27(DA8,1093748546)
call SetUnitAbilityLevel(DA8,1093748546,X37)
call IssueTargetOrderById(DA8,$D0065,p5)
call Z27(p5,1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093808975,false)
set DA8=null
endfunction
function I2D takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1747993172
endfunction
function I_D takes unit J4D returns boolean
local group g=ZI7()
local boolean J7D=false
set LP4="NaturesGuise_FindSentinel"
call GroupEnumUnitsInRange(g,GetUnitX(J4D),GetUnitY(J4D),375,Condition(function I2D))
if FirstOfGroup(g)!=null then
set J7D=true
endif
call ZH7(g)
set g=null
return J7D
endfunction
function J8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer D18=R47(RP7,"TargetIndex")
local unit WU7=WG7(D18)
local integer VT9=R47(RP7,"Count")
local integer X37=R47(RP7,"Level")
local real CS8=(LoadReal(C7,(RP7),(442)))
set LP4="J8D"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED and GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set VT9=VT9+1
call Q97(RP7,"Count",VT9)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677402 and GetTriggerUnit()==WU7 then
call SaveReal(C7,(RP7),(442),(((TimerGetElapsed(V))+1.)*1.))
call DisableTrigger(GetTriggeringTrigger())
call I5D(WU7,X37)
call EnableTrigger(GetTriggeringTrigger())
call Q97(RP7,"Count",0)
endif
if nA(GetUnitX(WU7),GetUnitY(WU7),375)==false and I_D(WU7)==false then
if CS8<(TimerGetElapsed(V))or GetTriggerEvalCount(t)==1 then
call UnitRemoveAbility(WU7,1110454833)
call UnitRemoveAbility(WU7,1093748545)
call UnitRemoveAbility(WU7,1093808975)
call UnitRemoveAbility(WU7,1110459705)
call Q47(RP7)
call RN7(t)
endif
elseif(R87(RP7,"NaturesGuise|Special")and VT9>($96*X37))then
call UnitRemoveAbility(WU7,1110454833)
call UnitRemoveAbility(WU7,1093748545)
call UnitRemoveAbility(WU7,1093808975)
call UnitRemoveAbility(WU7,1110459705)
call Q47(RP7)
call RN7(t)
elseif R87(RP7,"NaturesGuise|Special")and GetUnitAbilityLevel(WU7,1110454833)==0 and GetUnitAbilityLevel(WU7,1093748545)>0 then
call SaveReal(C7,(RP7),(442),(((TimerGetElapsed(V))+1.)*1.))
call DisableTrigger(GetTriggeringTrigger())
call I5D(WU7,X37)
call EnableTrigger(GetTriggeringTrigger())
elseif GetUnitAbilityLevel(WU7,1110454833)==0 then
call UnitRemoveAbility(WU7,1110454833)
call UnitRemoveAbility(WU7,1093748545)
call UnitRemoveAbility(WU7,1093808975)
call UnitRemoveAbility(WU7,1110459705)
call Q47(RP7)
call RN7(t)
else
call SaveReal(C7,(RP7),(442),(((TimerGetElapsed(V))+1.)*1.))
endif
set t=null
set WU7=null
return false
endfunction
function J9D takes nothing returns nothing
local unit WU7=GetAttacker()
local integer WB7=GetHandleId(WU7)
local trigger t=Q67(WB7,"Nature|Trg")
local integer YQ7=GetHandleId(t)
set LP4="J9D"
if R87(YQ7,"NaturesGuise|Special")and GetAttacker()==WU7 then
call UnitRemoveAbility(WU7,1110454833)
call UnitRemoveAbility(WU7,1093748545)
call Q47(YQ7)
call RN7(t)
endif
set WU7=null
set t=null
endfunction
function JDD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110454833)>0 or GetUnitAbilityLevel(GetAttacker(),1093748545)>0 then
call J9D()
endif
return false
endfunction
function JED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if GetUnitAbilityLevel(CP7,1110454833)>0 then
call Z27(CP7,1093748545)
endif
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function JFD takes nothing returns nothing
local trigger t
local integer RP7
set LP4="JFD"
set t=CreateTrigger()
set RP7=GetHandleId(t)
call Q97(RP7,"TargetIndex",WI7(GetSpellTargetUnit()))
call Q97(RP7,"Level",GetUnitAbilityLevel(GetTriggerUnit(),1093677402))
call Q97(RP7,"Count",0)
call SaveReal(C7,(RP7),(442),(((TimerGetElapsed(V))+1.)*1.))
call TriggerAddCondition(t,Condition(function J8D))
call TriggerRegisterTimerEvent(t,.1,true)
call Z27(GetSpellTargetUnit(),1093808975)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetSpellTargetUnit()),1093808975,false)
if GetTriggerUnit()==GetSpellTargetUnit()then
call QF7(RP7,"NaturesGuise|Special",true)
call QI7(GetHandleId(GetSpellTargetUnit()),"Nature|Trg",t)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=CreateTrigger()
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(GetTriggerUnit()))
call TriggerAddCondition(t,Condition(function JED))
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterDeathEvent(t,GetTriggerUnit())
endif
set t=null
endfunction
function JGD takes nothing returns boolean
if GetSpellAbilityId()==1093677402 then
call JFD()
endif
return false
endfunction
function I38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JGD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function JDD))
set t=null
endfunction
function JHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real JID=(LoadReal(C7,(GetHandleId(J67)),(686)))
set LP4="JHD"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JID<(TimerGetElapsed(V))or Y57(J67)then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveReal(C7,(GetHandleId(J67)),(686),((0)*1.))
call UnitRemoveAbility(J67,1093809232)
call UnitRemoveAbility(J67,1093809232)
call UnitRemoveAbility(J67,1093809232)
call UnitRemoveAbility(J67,1093809232)
call UnitRemoveAbility(J67,1110459719)
else
call D38(CP7,J67,1,$F+$F*DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function JJD takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local real JID=(LoadReal(C7,(GetHandleId(J67)),(686)))
local integer DB8=GetUnitAbilityLevel(CP7,1093748535)
set LP4="Sentinel_Hit"
if JID>(TimerGetElapsed(V))then
call SaveReal(C7,(GetHandleId(J67)),(686),(((TimerGetElapsed(V))+4)*1.))
else
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveReal(C7,(GetHandleId(J67)),(686),(((TimerGetElapsed(V))+4)*1.))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function JHD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl",J67,"overhead")))
if DB8==1 then
call Z27(J67,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809232,false)
elseif DB8==2 then
call Z27(J67,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809232,false)
elseif DB8==3 then
call Z27(J67,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809232,false)
elseif DB8==4 then
call Z27(J67,1093809232)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809232,false)
endif
endif
set t=null
endfunction
function Sentinel_FindClosest takes nothing returns boolean
if GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(TR4)and(GetUnitTypeId(GetFilterUnit())==1747993172 or GetUnitTypeId(GetFilterUnit())==1747993173)then
if N67(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),TS4,TT4)<TU4 then
set TQ4=GetFilterUnit()
set TU4=N67(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),TS4,TT4)
endif
endif
return false
endfunction
function JKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67
local group g
local real YJ8=(LoadReal(C7,(JZ7),(442)))
local real x
local real y
local integer XZ7
local real hp
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
set LP4="JKD"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_DEATH then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
if GetTriggerUnit()==DA8 then
call UnitRemoveAbility(DA8,1097886070)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
elseif GetUnitTypeId(DA8)==1747993172 then
set IM4=DA8
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(DA8),GetUnitY(DA8),110,Condition(function LF7))
set J67=P19(g,GetUnitX(DA8),GetUnitY(DA8))
call ZH7(g)
if J67!=null then
call JJD(CP7,J67)
set x=GetUnitX(DA8)
set y=GetUnitY(DA8)
set hp=GetUnitState(DA8,UNIT_STATE_LIFE)
call ShowUnit(DA8,false)
call DisableTrigger(t)
call KillUnit(DA8)
call EnableTrigger(t)
set DA8=CreateUnit(GetOwningPlayer(CP7),1747993173,x,y,0)
call SetUnitState(DA8,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(DA8,1112820806,480-((TimerGetElapsed(V))-YJ8))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveReal(C7,(JZ7),(411),(((TimerGetElapsed(V))+4)*1.))
endif
elseif GetUnitTypeId(DA8)==1747993173 and(LoadReal(C7,(JZ7),(411)))<(TimerGetElapsed(V))then
set x=GetUnitX(DA8)
set y=GetUnitY(DA8)
set hp=GetUnitState(DA8,UNIT_STATE_LIFE)
call ShowUnit(DA8,false)
call DisableTrigger(t)
call KillUnit(DA8)
call EnableTrigger(t)
set DA8=CreateUnit(GetOwningPlayer(CP7),1747993172,x,y,0)
call SetUnitState(DA8,UNIT_STATE_LIFE,hp)
call UnitApplyTimedLife(DA8,1112820806,480-((TimerGetElapsed(V))-YJ8))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
endif
set t=null
set CP7=null
set J67=null
set DA8=null
set g=null
return false
endfunction
function JMD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093748535)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1747993172,x,y,0)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="JMD"
call UnitApplyTimedLife(DA8,1112820806,480)
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function JKD))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V)))*1.))
call SaveInteger(C7,(JZ7),(34),(0))
set t=null
set CP7=null
set DA8=null
endfunction
function JND takes nothing returns boolean
if GetSpellAbilityId()==1093748535 then
call JMD()
endif
return false
endfunction
function IL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IL8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JND))
set t=null
endfunction
function JOD takes nothing returns nothing
local unit CB9=GetTriggerUnit()
local integer O87=GetUnitAbilityLevel(CB9,1093748535)
local real x=.0
local real y=.0
local unit JPD=null
local trigger t=null
local integer YY7=0
local unit JX7=null
local unit u=null
local group g=null
local boolexpr b=Condition(function TX7)
set LP4="JOD"
if((WQ7(GetOwningPlayer(CB9))))then
set t=CreateTrigger()
set YY7=GetHandleId(t)
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(CB9),800,Condition(function TX7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(CB9))
endloop
set JX7=u
endif
call DestroyGroup(g)
if(JX7!=null)then
set x=GetUnitX(JX7)+GetRandomReal(-10.,10.)
set y=GetUnitY(JX7)+GetRandomReal(-10.,10.)
else
set x=GetUnitX(CB9)+GetRandomReal(-10.,10.)
set y=GetUnitY(CB9)+GetRandomReal(-10.,10.)
endif
set JPD=CreateUnit(GetOwningPlayer(CB9),1747993172,x,y,0)
call UnitApplyTimedLife(JPD,1112820806,480)
call TriggerRegisterUnitEvent(t,JPD,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CB9,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function JKD))
call SaveUnitHandle(C7,(YY7),(19),(JPD))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call SaveReal(C7,(YY7),(442),(((TimerGetElapsed(V)))*1.))
call UnitAddAbility(CB9,1093751126)
call YT7(CB9,JPD)
endif
set t=null
set CB9=null
set JPD=null
call DestroyBoolExpr(b)
set JX7=null
set g=null
set u=null
endfunction
function JQD takes nothing returns nothing
local unit J67=GetEnumUnit()
local real d=N67(GetUnitX(J67),GetUnitY(J67),FJ7,FK7)
if d<FI7 and IsUnitVisible(J67,GetOwningPlayer(FM7)) and(IsUnitType(J67,UNIT_TYPE_HERO) or(IsUnitType(J67,UNIT_TYPE_STRUCTURE) and LD7(J67)))then
set FH7=GetEnumUnit()
set FI7=d
endif
set J67=null
endfunction
function JRD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>5 then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
call BE7(J67,RMinBJ(GetEventDamage(),20*GetUnitAbilityLevel(CP7,1093815628)))
endif
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or ZD8>6 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093815640)
call UnitRemoveAbility(J67,1093815641)
call UnitRemoveAbility(J67,1093815639)
call UnitRemoveAbility(J67,1093815638)
call UnitRemoveAbility(J67,1110460213)
endif
set t=null
set J67=null
set CP7=null
return false
endfunction
function JSD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer JTD=1093815640
local integer DB8=GetUnitAbilityLevel(CP7,1093815628)
local group g
if J67==null then
set FH7=null
set FM7=CP7
set FI7=$F423F
set FJ7=GetSpellTargetX()
set FK7=GetSpellTargetY()
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function DI8))
call ForGroup(g,function JQD)
call ZH7(g)
set J67=FH7
set g=null
endif
if DB8==2 then
set JTD=1093815641
elseif DB8==3 then
set JTD=1093815639
elseif DB8==4 then
set JTD=1093815638
endif
call Z27(J67,JTD)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),JTD,false)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function JRD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(34),(0))
set t=null
set J67=null
set CP7=null
endfunction
function JUD takes nothing returns boolean
if GetSpellAbilityId()==1093815628 then
call JSD()
endif
return false
endfunction
function I68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JUD))
set t=null
endfunction
function JVD takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local real JWD=(LoadReal(C7,(JZ7),(21)))
set LP4="JVD"
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+JWD)
set CP7=null
set J67=null
endfunction
function JXD takes nothing returns nothing
local trigger t=B27(ZB4,GetEnumUnit(),1747993656,"JVD",400)
local integer JZ7=GetHandleId(t)
set LP4="JXD"
call SaveReal(C7,(JZ7),(21),((ZC4)*1.))
set t=null
endfunction
function JYD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local group g
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093809971)
call UnitRemoveAbility(J67,1110459724)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
else
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if ZD8>3 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093809971)
call UnitRemoveAbility(J67,1110459724)
endif
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",J67,"origin"))
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),525,Condition(function LA7))
set ZB4=J67
set ZC4=$F+$F*DB8
call ForGroup(g,function JXD)
call ZH7(g)
call D38(CP7,J67,1,ZC4)
endif
set t=null
set CP7=null
set J67=null
set g=null
return false
endfunction
function JZD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093809742)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="JZD"
call Z27(J67,1093809971)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809971,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function JYD))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V)))*1.))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
set t=null
set CP7=null
endfunction
function JAD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="JAD"
call B27(CP7,J67,1747993657,"JZD",600)
set CP7=null
set J67=null
endfunction
function JBD takes nothing returns boolean
if GetSpellAbilityId()==1093809742 and ZG7(GetSpellTargetUnit())==false then
call JZD()
endif
return false
endfunction
function I18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JBD))
set t=null
endfunction
function JCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local integer VT9=R47(RP7,"Count")
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and VT9<(6)then
set VT9=VT9+1
call Q97(RP7,"Count",VT9)
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-8*X37)
call D38(p5,m5,1,5+$F*X37)
elseif VT9>=(6)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750095 and GetSpellAbilityId()!=1093747504 and GetSpellAbilityId()!=1093753417 and GetSpellAbilityId()!=1093810265 and F38(GetSpellAbilityId())==false and(XW7(GetSpellAbilityId())or GetSpellAbilityId()==1093678667))then
call DestroyEffect(Q17(RP7,"FX"))
call UnitRemoveAbility(m5,1093750867)
call UnitRemoveAbility(m5,1110459217)
call Q47(RP7)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function J3D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer X37=GetUnitAbilityLevel(p5,1093743692)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="J3D"
call Z27(m5,1093750867)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function JCD))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareTarget.mdl",m5,"overhead"))
call Q97(RP7,"Level",X37)
call Q97(RP7,"Count",0)
set p5=null
set m5=null
set t=null
endfunction
function J6D takes nothing returns nothing
local group g=ZI7()
local location l=GetSpellTargetLoc()
set LP4="J6D"
set IM4=GetTriggerUnit()
set oZ=GetTriggerUnit()
call GroupEnumUnitsInRange(g,GetLocationX(l),GetLocationY(l),375,Condition(function DG8))
call ForGroup(g,function J3D)
call BK7("war3mapImported\\CotS.mdx",GetLocationX(l),GetLocationY(l),5)
call ZH7(g)
call RemoveLocation(l)
set g=null
set l=null
endfunction
function JLD takes nothing returns boolean
if GetSpellAbilityId()==1093743692 then
call J6D()
endif
return false
endfunction
function I08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I08"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JLD))
set t=null
endfunction
function J1D takes nothing returns boolean
local real d
set LP4="J1D"
if GetUnitAbilityLevel(GetTriggerUnit(),1110455640)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093684314)>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455640)
set d=(.15+.15*I2R(GetUnitAbilityLevel(GetEventDamageSource(),1093684314)))*GetHeroInt(GetEventDamageSource(),true)
call BO7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,3,$D8,$D8,$D8)
call DisableTrigger(GetTriggeringTrigger())
call D38(GetEventDamageSource(),GetTriggerUnit(),3,d)
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function J0D takes nothing returns nothing
local trigger t
local unit J67
local unit CP7
set LP4="J0D"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set J67=GetSpellTargetUnit()
set CP7=GetTriggerUnit()
else
set J67=GetTriggerUnit()
set CP7=GetAttacker()
endif
if IsUnitIllusion(CP7)==false then
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",CP7)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function J1D))
endif
set t=null
set J67=null
set CP7=null
endfunction
function ve takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093684314)>0 and(R87(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")then
call J0D()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093684314 then
call J0D()
endif
return false
endfunction
function J5D takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="hcv"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function ve))
call QG7(GetHandleId(t),"Hero",Z47)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function J2D takes nothing returns boolean
if GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 then
call J5D(GetTriggerUnit(),false)
endif
return false
endfunction
function I58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I58"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function J2D))
set t=null
endfunction
function J_D takes nothing returns boolean
return GetSpellAbilityId()==1093684275
endfunction
function K4D takes nothing returns boolean
call RN7(GetTriggeringTrigger())
call VolumeGroupReset()
return false
endfunction
function K7D takes nothing returns nothing
local location AU8=GetUnitLoc(GetTriggerUnit())
local trigger t=CreateTrigger()
set LP4="K7D"
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093684275)+2,false)
call TriggerAddCondition(t,Condition(function K4D))
call CreateNUnitsAtLoc(1,1697656901,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call ShowUnitHide(bj_lastCreatedUnit)
call UnitApplyTimedLifeBJ(5.,1112820806,bj_lastCreatedUnit)
call UnitAddAbility(bj_lastCreatedUnit,1093684274)
call SetUnitAbilityLevelSwapped(1093684274,bj_lastCreatedUnit,GetUnitAbilityLevel(GetTriggerUnit(),1093684275))
call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D0270,AU8)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_UNITSOUNDS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_COMBAT,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_SPELLS,.0)
call VolumeGroupSetVolume(SOUND_VOLUMEGROUP_MUSIC,.0)
call RemoveLocation(AU8)
set t=null
set AU8=null
endfunction
function I28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J_D))
call TriggerAddAction(t,function K7D)
set t=null
endfunction
function K8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815892)
set LP4="K8D"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call D38(CP7,J67,1,100+50*DB8)
set t=null
set CP7=null
set J67=null
return false
endfunction
function K9D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093815892)
local boolean KDD=(LoadBoolean(C7,(JZ7),(95)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call Z27(DA8,1093684307)
call SetUnitAbilityLevel(DA8,1093684307,DB8)
call IssueTargetOrderById(DA8,$D02BC,J67)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function K8D))
call TriggerRegisterTimerEvent(t,.01,false)
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(CP7))
call SaveUnitHandle(C7,(GetHandleId(t)),(17),(J67))
call SaveInteger(C7,(GetHandleId(t)),(5),(DB8))
if KDD then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageSpell.mdx",J67,"overhead"))
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function KED takes integer id returns boolean
return id==1093682265 or id==1093752642 or id==1093677622 or id==1093679446 or id==1095263841 or id==1093684314 or id==1093685582 or id==1093685065
endfunction
function KFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8
local integer DB8=GetUnitAbilityLevel(CP7,1093815892)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call UnitRemoveAbility(J67,1093815893)
call UnitRemoveAbility(J67,1110455638)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call UnitRemoveAbility(J67,1093815893)
call UnitRemoveAbility(J67,1110455638)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function K9D))
call TriggerRegisterTimerEvent(t,.01,false)
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(CP7))
call SaveUnitHandle(C7,(GetHandleId(t)),(17),(J67))
call SaveInteger(C7,(GetHandleId(t)),(5),(DB8))
call SaveBoolean(C7,(JZ7),(95),(false))
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093815895)
call SetUnitAbilityLevel(DA8,1093815895,DB8)
call IssueTargetOrderById(DA8,$D0269,J67)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LastWordDamageDuration.mdx",J67,"overhead"))
set DA8=null
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and FB8(GetSpellAbilityId())==false and F38(GetSpellAbilityId())==false and GetSpellAbilityId()!=1095328363 and GetSpellAbilityId()!=1093678426 and GetSpellAbilityId()!=1093682768 and GetSpellAbilityId()!=1093685593 and GetSpellAbilityId()!=1093678680 and GetSpellAbilityId()!=1093681489 and GetSpellAbilityId()!=1093808472 and GetSpellAbilityId()!=1093808471 and GetSpellAbilityId()!=1093808470 and GetSpellAbilityId()!=1093743191 and GetSpellAbilityId()!=1093678667 and GetSpellAbilityId()!=1097163124 and GetSpellAbilityId()!=1093683801 and GetSpellAbilityId()!=1093682767 and GetSpellAbilityId()!=1093750345 and GetSpellAbilityId()!=1093750089 and GetSpellAbilityId()!=1093751096 and GetSpellAbilityId()!=1093751361 and GetSpellAbilityId()!=1093751126 and GetSpellAbilityId()!=1093808473 and GetSpellAbilityId()!=1093748565 and GetSpellAbilityId()!=1093753177 and KED(GetSpellAbilityId())==false then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call UnitRemoveAbility(J67,1093815893)
call UnitRemoveAbility(J67,1110455638)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
if GetSpellAbilityId()==1093685846 or GetSpellAbilityId()==1093684302 then
call TriggerRegisterTimerEvent(t,.01,false)
else
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_SPELL_ENDCAST)
endif
call TriggerAddCondition(t,Condition(function K9D))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveBoolean(C7,(JZ7),(95),(true))
endif
set J67=null
set CP7=null
set t=null
return false
endfunction
function KGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
if GetUnitAbilityLevel(J67,1093815893)==0 or GetTriggerEvalCount(t)>$FA then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(DA8)
else
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
endif
set t=null
set DA8=null
set J67=null
return false
endfunction
function KHD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1865429305,GetUnitX(J67),GetUnitY(J67),0)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function KFD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call Z27(J67,1093815893)
call UnitMakeAbilityPermanent(J67,true,1093815894)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815893,false)
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\LastWordDebuff_6.mdx",J67,"overhead")))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function KGD))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set CP7=null
set J67=null
set t=null
endfunction
function KID takes nothing returns boolean
if GetSpellAbilityId()==1093815892 and ZG7(GetSpellTargetUnit())==false then
call KHD()
endif
return false
endfunction
function KJD takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IN4
local real YU9=(LoadReal(C7,(JZ7),(20)))
set LP4="KJD"
call SetHeroInt(CP7,GetHeroInt(CP7,false)+1,true)
call BO7("+1 "+GetObjectName(1848658512),3,CP7,.023,0,$FF,0,$E6)
set CP7=null
endfunction
function KKD takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IN4
local real YU9=(LoadReal(C7,(JZ7),(20)))
set LP4="KKD"
call SetHeroInt(CP7,GetHeroInt(CP7,false)+2,true)
call BO7("+2 "+GetObjectName(1848658512),3,CP7,.023,0,$FF,0,$E6)
set CP7=null
endfunction
function KMD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit A97=GetTriggerUnit()
set LP4="KMD"
if IsUnitType(A97,UNIT_TYPE_HERO) and FA8(GetUnitTypeId(A97))==false and IsUnitIllusion(A97)==false and(IsUnitInRange(CP7,A97,900)or GetOwningPlayer(CP7)==GetOwningPlayer(GetKillingUnit()))and A47(CP7)==false and IsUnitAlly(CP7,GetOwningPlayer(A97))==false then
set SQ4[GetPlayerId(GetOwningPlayer(CP7))]=SQ4[GetPlayerId(GetOwningPlayer(CP7))]+2
call BO7("-2 "+GetObjectName(1848658512),3,A97,.023,$FF,0,0,$E6)
call SetHeroInt(A97,GetHeroInt(A97,false)-2,true)
call B27(A97,CP7,1747993424,"KKD",450)
endif
set t=null
set CP7=null
set A97=null
return false
endfunction
function KND takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function KMD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function KOD takes nothing returns boolean
if GetLearnedSkill()==1093684314 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093684314)==1 then
call KND()
endif
return false
endfunction
function KPD takes nothing returns boolean
local integer KQD=SQ4[GetPlayerId(GetTriggerPlayer())]
set LP4="KPD"
if GetUnitTypeId(G7[GetPlayerId(GetTriggerPlayer())])==1311781185 and KQD>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetObjectName(1848657997)+" "+I2S(KQD))
endif
return false
endfunction
function I_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KID))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function KOD))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function KPD))
set t=null
endfunction
function KRD takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call D38(IT,GetEnumUnit(),1,KT)
call IssueTargetOrderById(JT,$D006B,GetEnumUnit())
else
call D38(IT,GetEnumUnit(),1,KT/ 3)
call IssueTargetOrderById(JT,$D006B,GetEnumUnit())
endif
endfunction
function KSD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local unit DA8=QA7(JZ7,"Caster")
local integer DB8=R47(JZ7,"Level")
local real x=R77(JZ7,"x")
local real y=R77(JZ7,"y")
local group g=ZI7()
local real d
local real a
local real x2
local real y2
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,360+25,Condition(function DH8))
set IT=CP7
set KT=DB8*$C
set JT=DA8
call ForGroup(g,function KRD)
call ZH7(g)
call DestroyEffect(Q17(JZ7,"FX0"))
call DestroyEffect(Q17(JZ7,"FX1"))
call DestroyEffect(Q17(JZ7,"FX2"))
call DestroyEffect(Q17(JZ7,"FX3"))
call DestroyEffect(Q17(JZ7,"FX4"))
call DestroyEffect(Q17(JZ7,"FX5"))
call DestroyEffect(Q17(JZ7,"FX6"))
call DestroyEffect(Q17(JZ7,"FX7"))
call DestroyEffect(Q17(JZ7,"FX8"))
if GetTriggerEvalCount(t)==9 then
call Q47(JZ7)
call RN7(t)
else
set d=0
set a=0
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX0",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=45
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX1",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=90
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX2",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=$87
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX3",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=$B4
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX4",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=$E1
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX5",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=270
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX6",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=$96
set a=305
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX7",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
set d=275
set a=360
set x2=x+d*Cos(a*bj_DEGTORAD)
set y2=y+d*Sin(a*bj_DEGTORAD)
call QH7(JZ7,"FX8",AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x2,y2))
endif
set t=null
set CP7=null
set DA8=null
set g=null
return false
endfunction
function KTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=GetUnitAbilityLevel(p5,1093678644)
local real x1=R77(RP7,"x")
local real y1=R77(RP7,"y")
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x1,y1,0)
local real x2
local real y2
local real d
local real a
local integer i
set LP4="KTD"
call Z27(DA8,1093744966)
call SetUnitAbilityLevel(DA8,1093744966,X37)
if GetTriggerEvalCount(t)==1 then
set i=1
loop
exitwhen i>$A
set d=GetRandomReal(0,450)
set a=GetRandomReal(0,360)
set x2=x1+d*Cos(a*bj_DEGTORAD)
set y2=y1+d*Sin(a*bj_DEGTORAD)
set DA8=CreateUnit(GetOwningPlayer(p5),1697656906,GetUnitX(p5),GetUnitY(p5),90)
call IssuePointOrderById(DA8,$D0010,x2,y2)
call UnitApplyTimedLife(DA8,1112820806,.5)
set i=i+1
endloop
else
call Q47(RP7)
call RN7(t)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call QD7(RP7,"x",(x1)*1.)
call QD7(RP7,"y",(y1)*1.)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KSD))
call TriggerEvaluate(t)
endif
set p5=null
set DA8=null
set t=null
return false
endfunction
function KUD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
call BA7(GetOwningPlayer(p5),9.4,x,y,360)
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerAddCondition(t,Condition(function KTD))
call QG7(RP7,"Source",p5)
call QD7(RP7,"x",(x)*1.)
call QD7(RP7,"y",(y)*1.)
call RemoveLocation(l)
set t=null
set p5=null
set l=null
endfunction
function KVD takes nothing returns boolean
if GetSpellAbilityId()==1093678644 then
call KUD()
endif
return false
endfunction
function J48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J48"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KVD))
call AC7(1093744966)
set t=null
endfunction
function KWD takes nothing returns boolean
return GetLearnedSkill()==1093677909
endfunction
function KXD takes nothing returns nothing
call SetPlayerTechResearchedSwap(1378889781,GetUnitAbilityLevelSwapped(1093677909,GetTriggerUnit()),GetOwningPlayer(GetLearningUnit()))
endfunction
function Pv takes nothing returns nothing
set dX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dX,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dX,Condition(function KWD))
call TriggerAddAction(dX,function KXD)
endfunction
function KYD takes nothing returns boolean
return GetLearnedSkill()==1093677130 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function KZD takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093684546)==0)then
call Z27(GetTriggerUnit(),1093684546)
endif
call SetUnitAbilityLevel(GetTriggerUnit(),1093684546,GetUnitAbilityLevel(GetTriggerUnit(),1093677130))
endfunction
function Pw takes nothing returns nothing
set dY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dY,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dY,Condition(function KYD))
call TriggerAddAction(dY,function KZD)
endfunction
function KAD takes nothing returns nothing
local unit CP7=GetAttacker()
local unit J67=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093682266)
local boolean KBD=R87(GetHandleId(CP7),"Backstab|Free")
local real d=RAbsBJ(GetUnitFacing(J67)-GetUnitFacing(CP7))
set LP4="KAD"
if d>$B4 then
set d=360-d
endif
if d<=105 or KBD then
call QF7(GetHandleId(CP7),"Backstab|Free",false)
if GetUnitAbilityLevel(J67,1093678162)==0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",J67,"chest"))
call D38(CP7,J67,2,GetHeroAgi(CP7,true)*(.25*DB8+.25))
endif
endif
set CP7=null
set J67=null
endfunction
function KCD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682266)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false then
call KAD()
endif
return false
endfunction
function J88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J88"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function KCD))
set t=null
endfunction
function K3D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656883,x,y,0)
local integer X37=GetUnitAbilityLevel(Z47,1093685831)
local real vr=(83+17*X37)*.01
set LP4="K3D"
call SetUnitVertexColor(oA,$FF,$FF,$FF,$96)
call UnitApplyTimedLife(oA,1112820806,6)
call SetUnitScale(oA,vr,vr,vr)
if WN7(GetOwningPlayer(Z47))then
call Z27(oA,1093677369)
call SetUnitAbilityLevel(oA,1093677369,X37)
else
call Z27(oA,1093682487)
call SetUnitAbilityLevel(oA,1093682487,X37)
endif
call IssuePointOrderById(oA,$D01F9,x,y)
call RemoveLocation(l)
set Z47=null
set l=null
set oA=null
endfunction
function K6D takes nothing returns boolean
if GetSpellAbilityId()==1093685831 then
call K3D()
endif
return false
endfunction
function J98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K6D))
set t=null
endfunction
function KLD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JA7=GetHandleId(t)
if O37(LoadUnitHandle(C7,JA7,1635021931))or GetTriggerEvalCount(t)>=$B then
call FlushChildHashtable(C7,JA7)
call DestroyTrigger(t)
else
call IssueTargetOrderById(LoadUnitHandle(C7,JA7,1635021931),$D000F,LoadUnitHandle(C7,JA7,1952543335))
endif
set t=null
return false
endfunction
function K1D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real BD7=30*GetUnitAbilityLevel(p5,1093684025)
local trigger t
local integer RP7
local real x=GetUnitX(m5)-75*Cos(GetUnitFacing(m5)*bj_DEGTORAD)
local real y=GetUnitY(m5)-75*Sin(GetUnitFacing(m5)*bj_DEGTORAD)
local trigger K0D
local integer K5D
set LP4="K1D"
call SetUnitX(p5,x)
call SetUnitY(p5,y)
call SetUnitFacing(p5,GetUnitFacing(m5))
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",x,y))
if IsUnitEnemy(m5,GetOwningPlayer(p5))then
call D38(p5,m5,1,BD7)
call QF7(GetHandleId(p5),"Backstab|Free",true)
call IssueTargetOrderById(p5,$D000F,m5)
if(GetPlayerController(GetOwningPlayer(p5))!=MAP_CONTROL_USER)then
if P87(700,p5,Condition(function k6))<1 then
set K0D=CreateTrigger()
set K5D=GetHandleId(K0D)
call SaveUnitHandle(C7,K5D,1952543335,m5)
call SaveUnitHandle(C7,K5D,1635021931,p5)
call TriggerAddCondition(K0D,Condition(function KLD))
call TriggerRegisterTimerEvent(K0D,.4,true)
set K0D=null
endif
call NX7(.3)
call IssueTargetOrderById(p5,$D000F,m5)
endif
endif
set p5=null
set m5=null
set t=null
endfunction
function K2D takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call K1D()
endif
return false
endfunction
function K_D takes nothing returns boolean
if GetSpellAbilityId()==1093684025 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlinkStrike.mdx",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
return false
endfunction
function JD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K2D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function K_D))
set t=null
endfunction
function M4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call SetUnitAnimationByIndex(CP7,8)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function M7D takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SetUnitAnimationByIndex(CP7,7)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function M4D))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function M8D takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1311788336 then
call M7D()
endif
return false
endfunction
function RB8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function M8D))
set t=null
endfunction
function M9D takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call D38(RS4,GetEnumUnit(),1,RT4)
endfunction
function MDD takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer MED=GetHandleId(t2)
local trigger t1=Q67(MED,"t1")
local integer MFD=GetHandleId(t1)
local unit MGD=QA7(MED,"Remnant")
local group g
local integer DB8=R47(MED,"Level")
set LP4="MDD"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ShowUnit(MGD,false)
call KillUnit(MGD)
call Q47(MFD)
call RN7(t1)
call Q47(MED)
call RN7(t2)
elseif IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(MGD)) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
set g=ZI7()
set IM4=MGD
set RS4=MGD
set RT4=100+40*DB8
call GroupEnumUnitsInRange(g,GetUnitX(MGD),GetUnitY(MGD),285,Condition(function LF7))
call ForGroup(g,function M9D)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(MGD),GetUnitY(MGD)))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(MGD),GetUnitY(MGD)))
call ShowUnit(MGD,false)
call KillUnit(MGD)
call Q47(MFD)
call RN7(t1)
call Q47(MED)
call RN7(t2)
endif
set t1=null
set t2=null
set MGD=null
set g=null
return false
endfunction
function MHD takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer MID=GetHandleId(t1)
local trigger t2
local integer XZ9
local unit MJD
local integer X37
local real x=R77(MID,"x")
local real y=R77(MID,"y")
local real MKD
local integer XB8=GetTriggerEvalCount(t1)
set LP4="MHD"
if XB8==1 then
call DestroyEffect(Q17(MID,"FX1"))
elseif XB8==2 then
call DestroyEffect(Q17(MID,"FX2"))
set t2=CreateTrigger()
set XZ9=GetHandleId(t2)
set X37=R47(MID,"Level")
set MKD=R77(MID,"Facing")
set MJD=CreateUnit(GetOwningPlayer(QA7(MID,"Source")),1747990342,x,y,MKD)
call SetUnitVertexColor(MJD,$FF,$FF,$FF,100)
call UnitApplyTimedLife(MJD,1112820806,$C)
call QG7(MID,"Remnant",MJD)
call QG7(XZ9,"Remnant",MJD)
call QI7(XZ9,"t1",t1)
call Q97(XZ9,"Level",X37)
call TriggerRegisterUnitInRange(t2,MJD,$EB,Condition(function WE7))
call TriggerRegisterUnitEvent(t2,MJD,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function MDD))
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",MJD,"origin"))
elseif XB8>2 then
set MJD=QA7(MID,"Remnant")
call DestroyEffect(AddSpecialEffectTarget("effects\\ManaFlareBoltImpact_NoSound.mdx",MJD,"origin"))
endif
set t1=null
set t2=null
set MJD=null
return false
endfunction
function MMD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer MID=GetHandleId(t1)
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
set LP4="MMD"
call TriggerRegisterTimerEvent(t1,.5,true)
call TriggerAddCondition(t1,Condition(function MHD))
call QD7(MID,"x",(x)*1.)
call QD7(MID,"y",(y)*1.)
call Q97(MID,"Level",GetUnitAbilityLevel(p5,1093743696))
call QG7(MID,"Source",p5)
call QD7(MID,"Facing",GetUnitFacing(p5)*1.)
call QH7(MID,"FX1",AddSpecialEffect("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl",x,y))
call QH7(MID,"FX2",AddSpecialEffect("effects\\Static_Remnant_FX.mdx",x,y))
set p5=null
set t1=null
endfunction
function MND takes nothing returns boolean
if GetSpellAbilityId()==1093743696 then
call MMD()
endif
return false
endfunction
function OL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OL8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MND))
set t=null
endfunction
function MOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real RK=R77(RP7,"Angle")
local real x=GetUnitX(m5)-5*Cos(RK)
local real y=GetUnitY(m5)-5*Sin(RK)
local integer X37=R47(RP7,"Level")
local real MPD=R77(RP7,"x")
local real MQD=R77(RP7,"y")
set LP4="MOD"
if((MPD-x)*(MPD-x))+((MQD-y)*(MQD-y))<100 then
set x=MPD
set y=MQD
endif
call SetUnitX(m5,x)
call SetUnitY(m5,y)
if GetTriggerEvalCount(t)==($A+$A*X37)then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function MRD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit oA=CreateUnit(GetOwningPlayer(p5),1966092376,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
local integer X37=GetUnitAbilityLevel(p5,1093743698)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="MRD"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function MOD))
call QG7(RP7,"Target",m5)
call QD7(RP7,"Angle",Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5)))
call Q97(RP7,"Level",X37)
call QD7(RP7,"x",GetUnitX(p5))
call QD7(RP7,"y",GetUnitY(p5))
call Z27(oA,1093743697)
call SetUnitAbilityLevel(oA,1093743697,X37)
call IssueTargetOrderById(oA,$D0200,m5)
if not WQ7(GetOwningPlayer(p5))then
call UnitApplyTimedLife(oA,1112820806,.5+.5*X37)
endif
set oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call Z27(oA,1093743699)
call IssueTargetOrderById(oA,$D006B,p5)
set p5=null
set m5=null
set oA=null
set t=null
endfunction
function MSD takes nothing returns boolean
if GetSpellAbilityId()==1093743698 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and ZG7(GetSpellTargetUnit())==false then
call MRD()
endif
return false
endfunction
function O18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MSD))
set t=null
endfunction
function MTD takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(FZ),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="MTD"
call Z27(oA,1093686069)
call IssueTargetOrderById(oA,$D006B,GetEnumUnit())
call D38(FZ,GetEnumUnit(),1,gZ)
set oA=null
endfunction
function MUD takes unit p5,unit m5 returns nothing
local integer RP7=GetHandleId(p5)
local group g=ZI7()
set LP4="h7v"
call DestroyEffect(Q17(RP7,"OverloadFX1"))
call DestroyEffect(Q17(RP7,"OverloadFX2"))
call RK7(p5,"OverloadActive")
set IM4=p5
set FZ=p5
set gZ=GetUnitAbilityLevel(p5,1093685591)*20+$A
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),300,Condition(function LF7))
call ForGroup(g,function MTD)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(m5),GetUnitY(m5)))
set g=null
endfunction
function MVD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
set LP4="MVD"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and RG7(p5,"OverloadActive")then
call DisableTrigger(t)
call MUD(p5,m5)
call Q47(RP7)
call RN7(t)
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set p5=null
return false
endfunction
function MWD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer RP7=GetHandleId(t)
set LP4="MWD"
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function MVD))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
set t=null
set m5=null
set p5=null
endfunction
function MXD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093685591)>0 and RG7(GetAttacker(),"OverloadActive")and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
call MWD()
endif
return false
endfunction
function MYD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit p5=GetTriggerUnit()
local integer RP7=GetHandleId(p5)
local string fx=""
set LP4="MYD"
if IsUnitAlly(p5,GetLocalPlayer())or Y27(GetLocalPlayer())then
set fx="Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl"
endif
call QH7(RP7,"OverloadFX1",AddSpecialEffectTarget(fx,p5,"right hand"))
call QH7(RP7,"OverloadFX2",AddSpecialEffectTarget(fx,p5,"left hand"))
set t=null
set p5=null
endfunction
function MZD takes nothing returns boolean
if((GetSpellAbilityId()==1093743695 or GetSpellAbilityId()==1093743696 or GetSpellAbilityId()==1093743698)or(GetUnitPointValue(GetTriggerUnit())==500)and XW7(GetSpellAbilityId()))and RG7(GetTriggerUnit(),"OverloadActive")==false then
call RI7(GetTriggerUnit(),"OverloadActive")
call MYD()
endif
return false
endfunction
function MAD takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="Hov"
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MZD))
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function MXD))
if XY9 then
set Aj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set p5=null
set t=null
endfunction
function MBD takes nothing returns boolean
if GetLearnedSkill()==1093685591 and GetUnitAbilityLevel(GetTriggerUnit(),1093685591)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call MAD(GetTriggerUnit(),false)
endif
return false
endfunction
function O08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O08"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MBD))
set t=null
endfunction
function MCD takes nothing returns nothing
if(LoadBoolean(C7,jZ,GetHandleId(GetEnumUnit()))==false)then
call SaveBoolean(C7,jZ,GetHandleId(GetEnumUnit()),true)
call D38(LZ,GetEnumUnit(),1,mZ*(JZ*4+4)/ 100)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetEnumUnit(),"origin"))
endif
endfunction
function M3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X37=R47(RP7,"Level")
local unit oA=QA7(RP7,"Caster")
local unit p5=QA7(RP7,"Source")
local unit M6D=QA7(RP7,"Fake")
local integer u3=R47(RP7,"Remaining")
local real hN=R77(RP7,"x")
local real ho=R77(RP7,"y")
local real u4=GetUnitX(p5)
local real u5=GetUnitY(p5)
local real RK=Atan2(ho-u5,hN-u4)
local real Il=u4+(25+25*X37)*Cos(RK)
local real IL=u5+(25+25*X37)*Sin(RK)
local lightning PX9=Q07(RP7,"Light")
local real MLD=R77(RP7,"lx")
local real M1D=R77(RP7,"ly")
local real W78=GetUnitState(p5,UNIT_STATE_MANA)
local real M0D=(25+25*X37)*($A+.01*GetUnitState(p5,UNIT_STATE_MAX_MANA))/ 100
local group g=ZI7()
local real M5D=R77(RP7,"Traveled")
set LP4="M3D"
set M5D=M5D+25+25*X37
call QD7(RP7,"Traveled",M5D)
if GetTriggerEvalCount(t)>25 then
set MLD=MLD+(25+25*X37)*Cos(RK)
set M1D=M1D+(25+25*X37)*Sin(RK)
call QD7(RP7,"lx",MLD)
call QD7(RP7,"ly",M1D)
endif
call SetUnitState(p5,UNIT_STATE_MANA,RMaxBJ(W78-M0D,0))
call MoveLightning(PX9,true,MLD,M1D,Il,IL)
call SetUnitX(p5,Il)
call SetUnitY(p5,IL)
call SetUnitPosition(oA,Il,IL)
call SetUnitPosition(M6D,Il,IL)
set IM4=p5
set LZ=p5
set jZ=RP7
set JZ=X37
set mZ=M5D
call GroupEnumUnitsInRange(g,Il,IL,75+75*X37,Condition(function LF7))
call ForGroup(g,function MCD)
call ZH7(g)
set u3=u3-1
call Q97(RP7,"Remaining",u3)
call SetUnitVertexColor(p5,$FF,$FF,$FF,0)
if u3==0 or GetUnitState(p5,UNIT_STATE_MANA)<1 then
call DestroyLightning(PX9)
call BW7(Il,IL,75)
call DestroyEffect(Q17(RP7,"FX"))
call RemoveUnit(oA)
call RemoveUnit(M6D)
call SetUnitVertexColor(p5,$FF,$FF,$FF,$FF)
call SetUnitPathing(p5,true)
call SetUnitInvulnerable(p5,false)
call Q47(RP7)
call RN7(t)
else
call BW7(Il,IL,75)
endif
set t=null
set oA=null
set p5=null
set PX9=null
set g=null
set M6D=null
return false
endfunction
function M2D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real iN=GetUnitX(p5)
local real io=GetUnitY(p5)
local unit oA
local unit M6D
local location l
local real x
local real y
local trigger t
local integer RP7
local lightning PX9
local integer X37=GetUnitAbilityLevel(p5,1093743695)
local real W78=GetUnitState(p5,UNIT_STATE_MANA)
local real M0D=$F+.07*GetUnitState(p5,UNIT_STATE_MAX_MANA)
set LP4="M2D"
call SetUnitState(p5,UNIT_STATE_MANA,RMaxBJ(W78-M0D,0))
if GetUnitState(p5,UNIT_STATE_MANA)>$A then
set t=CreateTrigger()
set RP7=GetHandleId(t)
set oA=CreateUnit(GetOwningPlayer(p5),1865429296,iN,io,0)
set M6D=CreateUnit(GetOwningPlayer(p5),1211119431,iN,io,0)
set PX9=AddLightning("FORK",true,iN,io,iN,io)
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
call SetUnitVertexColor(p5,$FF,$FF,$FF,0)
call SetUnitVertexColor(M6D,$FF,$FF,$FF,0)
call SetUnitPathing(p5,false)
call SetUnitPathing(oA,false)
call SetUnitInvulnerable(p5,true)
call QG7(RP7,"Caster",oA)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Fake",M6D)
call QJ7(RP7,"Light",PX9)
call Q97(RP7,"Level",X37)
call QD7(RP7,"x",x)
call QD7(RP7,"y",y)
call QD7(RP7,"lx",iN)
call QD7(RP7,"ly",io)
call QD7(RP7,"Traveled",0)
call Q97(RP7,"Remaining",B47(R2I(SquareRoot((x-iN)*(x-iN)+(y-io)*(y-io))/(25+25*X37)),1))
call QH7(RP7,"FX",AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",M6D,"origin"))
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function M3D))
call ShowUnit(p5,false)
call ShowUnit(p5,true)
call SelectUnitAddForPlayer(p5,GetOwningPlayer(p5))
endif
set p5=null
set oA=null
set M6D=null
set l=null
set t=null
set PX9=null
endfunction
function M_D takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
call M2D()
endif
return false
endfunction
function N4D takes nothing returns boolean
if GetSpellAbilityId()==1093743695 then
if GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)<($F+.07*GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848657720))
endif
endif
return false
endfunction
function O58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O58"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M_D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function N4D))
set t=null
endfunction
function N7D takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetTriggerUnit(),"origin"))
endfunction
function N8D takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1211117651 then
call N7D()
endif
return false
endfunction
function O28 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function N8D))
set t=null
endfunction
function N9D takes nothing returns nothing
local integer RP7=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit NDD=QA7(RP7,"BearItemHolder")
local unit NED=QA7(RP7,"MyBear")
set LP4="N9D"
if NDD!=null and L==false and RY4==false then
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,0))
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,1))
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,2))
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,3))
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,4))
call UnitAddItem(NED,UnitRemoveItemFromSlot(NDD,5))
endif
set NDD=null
set NED=null
endfunction
function NFD takes nothing returns boolean
return GetSpellAbilityId()==1093681461
endfunction
function NGD takes nothing returns boolean
if A47(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652103))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function NHD takes nothing returns nothing
local unit U_9=GetTriggerUnit()
local player NID=GetOwningPlayer(U_9)
local location AU8=GetUnitLoc(U_9)
local boolexpr NJD=Condition(function NGD)
local group YY9=ZI7()
local integer DB8=GetUnitAbilityLevel(U_9,1093681461)
local integer JZ7=GetHandleId(NID)
local boolean NKD
local unit CN8
set LP4="NHD"
call GroupEnumUnitsOfPlayer(YY9,GetOwningPlayer(U_9),NJD)
if CountUnitsInGroup(YY9)!=0 then
set CN8=FirstOfGroup(YY9)
if CN8!=null and RG7(CN8,"4327") then
call OD7(U_9)
call AV7(NID,GetObjectName(1848659278))
endif
endif
call ZH7(YY9)
call RemoveLocation(AU8)
call DestroyBoolExpr(NJD)
set U_9=null
set NID=null
set YY9=null
set NJD=null
set AU8=null
endfunction
function NMD takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1848652103)or(GetUnitTypeId(GetFilterUnit())==1848652099)or(GetUnitTypeId(GetFilterUnit())==1848652088)or(GetUnitTypeId(GetFilterUnit())==1848651828)
endfunction
function NND takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit NED
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
local integer X37=GetUnitAbilityLevel(p5,GetSpellAbilityId())
local group g=ZI7()
set LP4="NND"
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(p5),Condition(function NMD))
set NED=FirstOfGroup(g)
call ZH7(g)
if GetSpellAbilityId()==1093748038 then
call Z27(DA8,1093681473)
call SetUnitAbilityLevel(DA8,1093681473,X37)
elseif GetSpellAbilityId()==1093748037 then
call Z27(DA8,1093681474)
call SetUnitAbilityLevel(DA8,1093681474,X37)
elseif GetSpellAbilityId()==1093748040 then
call Z27(DA8,1093681475)
call SetUnitAbilityLevel(DA8,1093681475,X37)
elseif GetSpellAbilityId()==1093748041 then
call Z27(DA8,1093681476)
call SetUnitAbilityLevel(DA8,1093681476,X37)
elseif GetSpellAbilityId()==1093748039 then
call Z27(DA8,1093681477)
call SetUnitAbilityLevel(DA8,1093681477,X37)
endif
call IssueTargetOrderById(DA8,$D0085,p5)
if NED!=null and A47(NED)==false then
call IssueTargetOrderById(DA8,$D0085,NED)
endif
set g=null
set p5=null
set NED=null
set DA8=null
endfunction
function NOD takes nothing returns boolean
if GetSpellAbilityId()==1093748038 or GetSpellAbilityId()==1093748037 or GetSpellAbilityId()==1093748040 or GetSpellAbilityId()==1093748041 or GetSpellAbilityId()==1093748039 then
call NND()
endif
return false
endfunction
function JE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NOD))
set t=null
endfunction
function NPD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CN8=(LoadUnitHandle(C7,(JZ7),(2)))
local real NQD
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and WO7(GetOwningPlayer(GetEventDamageSource()))then
call SaveReal(C7,(JZ7),(714),(((TimerGetElapsed(V)))*1.))
endif
endif
set NQD=(LoadReal(C7,(JZ7),(714)))
if NQD+3<(TimerGetElapsed(V))then
if(LoadInteger(C7,(JZ7),(34)))==2 then
call SaveInteger(C7,(JZ7),(34),(1))
call RK7(CN8,"4327")
call SetPlayerAbilityAvailable(GetOwningPlayer(CN8),1093681463,true)
endif
else
if(LoadInteger(C7,(JZ7),(34)))==1 then
call SaveInteger(C7,(JZ7),(34),(2))
call RI7(CN8,"4327")
call SetPlayerAbilityAvailable(GetOwningPlayer(CN8),1093681463,false)
endif
endif
set t=null
set CN8=null
return false
endfunction
function NRD takes unit CN8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,CN8,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,CN8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NPD))
call SaveUnitHandle(C7,(JZ7),(2),(CN8))
call SaveReal(C7,(JZ7),(714),((0)*1.))
call SaveInteger(C7,(JZ7),(34),(1))
call SetPlayerAbilityAvailable(GetOwningPlayer(CN8),1093681463,true)
set t=null
endfunction
function NSD takes nothing returns nothing
local unit U_9=GetTriggerUnit()
local player NID=GetOwningPlayer(U_9)
local location AU8=GetUnitLoc(U_9)
local boolexpr NJD=Condition(function NGD)
local group YY9=ZI7()
local integer DB8=GetUnitAbilityLevel(U_9,1093681461)
local integer JZ7=GetHandleId(NID)
local boolean NKD
local unit CN8
set LP4="NSD"
call GroupEnumUnitsOfPlayer(YY9,GetOwningPlayer(U_9),NJD)
set NKD=CountUnitsInGroup(YY9)==0
if(DB8==1 and NKD)then
call CreateNUnitsAtLoc(1,1848651828,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call QG7(JZ7,"MyBear",bj_lastCreatedUnit)
call N9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif(DB8==2 and NKD)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call QG7(JZ7,"MyBear",bj_lastCreatedUnit)
call N9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif(DB8==3 and NKD)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call QG7(JZ7,"MyBear",bj_lastCreatedUnit)
call N9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif(DB8==4 and NKD)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call QG7(JZ7,"MyBear",bj_lastCreatedUnit)
call N9D()
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif NKD==false then
set CN8=FirstOfGroup(YY9)
call AddSpecialEffectTargetUnitBJ("chest",CN8,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call SetUnitState(CN8,UNIT_STATE_LIFE,GetUnitState(CN8,UNIT_STATE_MAX_LIFE))
call SetUnitPosition(CN8,GetUnitX(U_9),GetUnitY(U_9))
set CN8=null
endif
call SetUnitAbilityLevel(bj_lastCreatedUnit,1093679449,DB8)
call ZH7(YY9)
call RemoveLocation(AU8)
call DestroyBoolExpr(NJD)
set NJD=null
set U_9=null
set NID=null
set AU8=null
set YY9=null
set CN8=null
endfunction
function JG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NFD))
call TriggerAddAction(t,function NSD)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NFD))
call TriggerAddAction(t,function NHD)
set t=null
endfunction
function NTD takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110459185)>0)!=null
endfunction
function NUD takes nothing returns nothing
call D38(D2,GetEnumUnit(),2,30)
endfunction
function NVD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit NWD=QA7(RP7,"Bear")
local group g=ZI7()
set LP4="NVD"
set IM4=NWD
set D2=NWD
call GroupEnumUnitsInRange(g,GetUnitX(NWD),GetUnitY(NWD),$7D0,Condition(function NTD))
call ForGroup(g,function NUD)
call ZH7(g)
set t=null
set g=null
set NWD=null
return false
endfunction
function NXD takes nothing returns nothing
local unit NWD=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="NXD"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function NVD))
call QG7(RP7,"Bear",NWD)
set NWD=null
set t=null
endfunction
function VF takes nothing returns boolean
return GetLearnedSkill()==1093681461 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function Vg takes nothing returns boolean
if A47(GetFilterUnit())then
return false
endif
if((GetUnitTypeId(GetFilterUnit())==1848652099))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848652088))then
return true
endif
if((GetUnitTypeId(GetFilterUnit())==1848651828))then
return true
endif
return false
endfunction
function NYD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local player j8=GetOwningPlayer(Z47)
local location AU8=GetUnitLoc(Z47)
local boolexpr hP=Condition(function Vg)
local group FP8=ZI7()
local integer DB8=GetUnitAbilityLevel(Z47,1093681461)
local integer JZ7=GetHandleId(j8)
local integer Vh
local unit CN8
local real L89
set LP4="NYD"
call GroupEnumUnitsOfPlayer(FP8,GetOwningPlayer(Z47),hP)
call DestroyBoolExpr(hP)
if(DB8==1)then
call NXD()
endif
set Vh=CountUnitsInGroup(FP8)
if(Vh==1)then
set CN8=FirstOfGroup(FP8)
set L89=GetUnitLifePercent(CN8)
set AU8=GetUnitLoc(CN8)
call ShowUnit(CN8,false)
call KillUnit(CN8)
if(DB8==2)then
call CreateNUnitsAtLoc(1,1848652088,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif(DB8==3)then
call CreateNUnitsAtLoc(1,1848652099,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
elseif(DB8==4)then
call CreateNUnitsAtLoc(1,1848652103,GetOwningPlayer(GetTriggerUnit()),AU8,bj_UNIT_FACING)
call AddSpecialEffectTargetUnitBJ("chest",bj_lastCreatedUnit,"Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl")
call NRD(bj_lastCreatedUnit)
endif
call SetUnitLifePercentBJ(bj_lastCreatedUnit,L89)
call QG7(JZ7,"MyBear",bj_lastCreatedUnit)
call N9D()
endif
call ZH7(FP8)
set Z47=null
set j8=null
set AU8=null
set hP=null
set FP8=null
set CN8=null
endfunction
function JI8 takes nothing returns nothing
set dZ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(dZ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(dZ,Condition(function VF))
call TriggerAddAction(dZ,function NYD)
endfunction
function NZD takes nothing returns boolean
return GetUnitTypeId(GetAttacker())==1848652103 or GetUnitTypeId(GetAttacker())==1848652099 or GetUnitTypeId(GetAttacker())==1848652088 or GetUnitTypeId(GetAttacker())==1848651828
endfunction
function NAD takes nothing returns nothing
local unit VD=GetAttacker()
local unit VI=G7[GetPlayerId(GetOwningPlayer(VD))]
set LP4="NAD"
if((GetUnitX(VI)-GetUnitX(VD))*(GetUnitX(VI)-GetUnitX(VD))+(GetUnitY(VI)-GetUnitY(VD))*(GetUnitY(VI)-GetUnitY(VD))>=($127690))then
call IssueImmediateOrderById(VD,$D0004)
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)then
if((GetHeroLevel(VI)<$C)and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>150.)and((GetOwningPlayer(GetTriggerUnit())==Y7[0])or(GetOwningPlayer(GetTriggerUnit())==Z7[0]))and(eY[GetPlayerId(GetOwningPlayer(GetAttacker()))]==1)and(Bz>hq[$F0+GetPlayerId(GetOwningPlayer(GetAttacker()))]))then
call TriggerSleepAction(.1)
call PV7(GetAttacker(),$D0012,h9[GetPlayerId(GetOwningPlayer(GetAttacker()))])
endif
endif
set VD=null
set VI=null
endfunction
function JF8 takes nothing returns nothing
set d0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d0,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(d0,Condition(function NZD))
call TriggerAddAction(d0,function NAD)
endfunction
function NBD takes nothing returns boolean
return GetSpellAbilityId()==1093681463
endfunction
function NCD takes nothing returns nothing
local unit VD=GetTriggerUnit()
local unit VI=G7[GetPlayerId(GetOwningPlayer(VD))]
set LP4="NCD"
call SetUnitX(VD,GetUnitX(VI)+GetRandomReal(25,50)*Cos(GetRandomReal(0,360)))
call SetUnitY(VD,GetUnitY(VI)+GetRandomReal(25,50)*Sin(GetRandomReal(0,360)))
set VD=null
set VI=null
endfunction
function JH8 takes nothing returns nothing
set H24=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(H24,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(H24,Condition(function NBD))
call TriggerAddAction(H24,function NCD)
endfunction
function N3D takes nothing returns boolean
return GetLearnedSkill()==1093681464 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function N6D takes nothing returns nothing
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889776,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889776,true)+1)
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889777,GetPlayerTechCount(GetOwningPlayer(GetTriggerUnit()),1378889777,true)+1)
endfunction
function qb takes nothing returns nothing
set H_4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(H_4,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(H_4,Condition(function N3D))
call TriggerAddAction(H_4,function N6D)
endfunction
function NLD takes item ON7 returns boolean
return OK7(ON7)==A5 or OK7(ON7)==B5 or OK7(ON7)==LV or OK7(ON7)==EW
endfunction
function N1D takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1848652103 or GetUnitTypeId(GetTriggerUnit())==1848652099 or GetUnitTypeId(GetTriggerUnit())==1848652088 or GetUnitTypeId(GetTriggerUnit())==1848651828)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function N0D takes nothing returns nothing
local location N5D
set LP4="N0D"
if WM7(GetOwningPlayer(GetTriggerUnit()))then
set N5D=GetRectCenter(L9)
else
set N5D=GetRectCenter(C9)
endif
if NLD(GetEnumItem())==false then
call SetItemPositionLoc(GetEnumItem(),N5D)
endif
call RemoveLocation(N5D)
set N5D=null
endfunction
function N2D takes nothing returns nothing
local integer RP7=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local unit m7=QA7(RP7,"BearItemHolder")
local unit VD=QA7(RP7,"MyBear")
local integer x
local integer y
set LP4="N2D"
if m7==null then
if WM7(GetOwningPlayer(VD))then
set x=-6390
set y=-5615
else
set x=5875
set y=5000
endif
set m7=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657158,x,y,0)
call QG7(RP7,"BearItemHolder",m7)
endif
if NLD(GetEnumItem())==false then
call UnitAddItem(m7,GetEnumItem())
endif
call ShowUnit(m7,true)
set m7=null
set VD=null
endfunction
function VL takes nothing returns nothing
local integer B58=OK7(GetEnumItem())
set LP4="VL"
if GetWidgetLife(GetEnumItem())>0 and B58!=T0 then
if L or RY4 then
call N0D()
else
call N2D()
endif
endif
endfunction
function N_D takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
local rect O4D=RectFromCenterSizeBJ(Mk,400.,400.)
local unit VI=G7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
set LP4="N_D"
call SetHeroXP(VI,(GetHeroXP(VI)-(GetHeroXP(VI)/(125-(25*GetUnitAbilityLevel(VI,1093681461))))),false)
call UnitDamageTargetBJ(GetKillingUnit(),VI,(100.*I2R(GetUnitAbilityLevel(VI,1093681461))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
call EnumItemsInRectBJ(O4D,function VL)
call RemoveLocation(Mk)
call RemoveRect(O4D)
set Mk=null
set VI=null
set O4D=null
endfunction
function qB takes nothing returns nothing
set d3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(d3,Condition(function N1D))
call TriggerAddAction(d3,function N_D)
endfunction
function O7D takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==1311781171 or GetUnitTypeId(GetTriggerUnit())==1311781199 or GetUnitTypeId(GetTriggerUnit())==1311781173 or GetUnitTypeId(GetTriggerUnit())==1311781172)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function O8D takes nothing returns nothing
local unit VD=QA7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"MyBear")
set LP4="O8D"
call KillUnit(VD)
set VD=null
endfunction
function qc takes nothing returns nothing
set d4=CreateTrigger()
call ky(d4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(d4,Condition(function O7D))
call TriggerAddAction(d4,function O8D)
endfunction
function O9D takes nothing returns boolean
return(GetLearnedSkill()==1093681483 or GetLearnedSkill()==1093748313)and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function ODD takes nothing returns nothing
if(GetUnitAbilityLevel(GetTriggerUnit(),1093681483)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093748313)==1)then
call Z27(GetTriggerUnit(),1093752646)
endif
endfunction
function qC takes nothing returns nothing
set d5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d5,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(d5,Condition(function O9D))
call TriggerAddAction(d5,function ODD)
endfunction
function OED takes nothing returns boolean
if(GetSpellAbilityId()==1093681485 or GetSpellAbilityId()==1093681459 or GetSpellAbilityId()==1093681460 or GetSpellAbilityId()==1093677652 or GetSpellAbilityId()==1093748314 or GetSpellAbilityId()==1093752646)then
return true
elseif GetSpellAbilityId()==1093681483 or GetSpellAbilityId()==1093748313 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093752646)==0 then
call Z27(GetTriggerUnit(),1093752646)
endif
endif
return false
endfunction
function OFD takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))!=null
endfunction
function OGD takes nothing returns nothing
call IssueImmediateOrderById(GetEnumUnit(),$D024C)
endfunction
function Vq takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),300.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function VQ takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),450.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function Vr takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),600.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function OHD takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),750.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
function OID takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==WM4 and GetUnitTypeId(GetFilterUnit())==WK4 and A47(GetFilterUnit())==false
endfunction
function OJD takes player p,integer XZ7,real x,real y returns nothing
local group g=ZI7()
set LP4="DetonateMinesInArea"
set WM4=p
set WK4=XZ7
call GroupEnumUnitsInRange(g,x,y,716,Condition(function OID))
call ForGroup(g,function OGD)
call ZH7(g)
set g=null
endfunction
function OKD takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group FP8
set LP4="OKD"
call DisableTrigger(I44)
set V0=true
if(GetSpellAbilityId()==1093681485)then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call BA7(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,425,Condition(function OFD))
call ForGroup(FP8,function Vq)
call RemoveUnit(GetTriggerUnit())
call ZH7(FP8)
elseif(GetSpellAbilityId()==1093681459)then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call BA7(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,435,Condition(function OFD))
call ForGroup(FP8,function VQ)
call RemoveUnit(GetTriggerUnit())
call ZH7(FP8)
elseif(GetSpellAbilityId()==1093681460)then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call BA7(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,450,Condition(function OFD))
call ForGroup(FP8,function Vr)
call RemoveUnit(GetTriggerUnit())
call ZH7(FP8)
elseif(GetSpellAbilityId()==1093748314)then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
call BA7(GetOwningPlayer(GetTriggerUnit()),3,x,y,500)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,450,Condition(function OFD))
call ForGroup(FP8,function OHD)
call RemoveUnit(GetTriggerUnit())
call ZH7(FP8)
elseif(GetSpellAbilityId()==1093677652)then
set FP8=JK7(GetOwningPlayer(GetTriggerUnit()),1865429304)
call ForGroup(FP8,function OGD)
call DestroyGroup(FP8)
set FP8=JK7(GetOwningPlayer(GetTriggerUnit()),1865429042)
call ForGroup(FP8,function OGD)
call DestroyGroup(FP8)
set FP8=JK7(GetOwningPlayer(GetTriggerUnit()),1865429058)
call ForGroup(FP8,function OGD)
call DestroyGroup(FP8)
set FP8=JK7(GetOwningPlayer(GetTriggerUnit()),1865429314)
call ForGroup(FP8,function OGD)
call DestroyGroup(FP8)
endif
if(GetSpellAbilityId()==1093752646)then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call OJD(GetOwningPlayer(GetTriggerUnit()),1865429304,x,y)
call OJD(GetOwningPlayer(GetTriggerUnit()),1865429042,x,y)
call OJD(GetOwningPlayer(GetTriggerUnit()),1865429058,x,y)
call OJD(GetOwningPlayer(GetTriggerUnit()),1865429314,x,y)
endif
set V0=false
call EnableTrigger(I44)
set FP8=null
endfunction
function OMD takes nothing returns nothing
local integer id=GetUnitTypeId(GetTriggerUnit())
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local group FP8
set LP4="OMD"
if id==1865429304 then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,425,Condition(function OFD))
call ForGroup(FP8,function Vq)
call ZH7(FP8)
endif
if id==1865429042 then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,435,Condition(function OFD))
call ForGroup(FP8,function VQ)
call ZH7(FP8)
endif
if id==1865429058 then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,450,Condition(function OFD))
call ForGroup(FP8,function Vr)
call ZH7(FP8)
endif
if id==1865429314 then
call BK7("Abilities\\Spells\\Human\\FlameStrike\\FlameStrike1.mdl",x,y,5)
set FP8=ZI7()
call GroupEnumUnitsInRange(FP8,x,y,450,Condition(function OFD))
call ForGroup(FP8,function OHD)
call ZH7(FP8)
endif
set FP8=null
endfunction
function OND takes nothing returns boolean
local integer id=GetUnitTypeId(GetTriggerUnit())
set LP4="OND"
if id==1865429304 or id==1865429042 or id==1865429058 or id==1865429314 then
call OMD()
endif
return false
endfunction
function qD takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="qD"
call PA9("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav")
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddAction(t,function OKD)
call TriggerAddCondition(t,Condition(function OED))
set I44=CreateTrigger()
call BT7(I44,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(I44,Condition(function OND))
set t=null
endfunction
function OOD takes nothing returns boolean
if((GetUnitTypeId(GetTriggerUnit())==1848651855))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651856))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651857))then
return true
endif
if((GetUnitTypeId(GetTriggerUnit())==1848651854))then
return true
endif
if GetUnitTypeId(GetTriggerUnit())==1865429304 or GetUnitTypeId(GetTriggerUnit())==1865429042 or GetUnitTypeId(GetTriggerUnit())==1865429058 or GetUnitTypeId(GetTriggerUnit())==1865429314 then
if Ab[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]then
endif
endif
return false
endfunction
function OPD takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()))and((GetUnitTypeId(GetFilterUnit())==1848651855)or(GetUnitTypeId(GetFilterUnit())==1848651856)or(GetUnitTypeId(GetFilterUnit())==1848651857)or(GetUnitTypeId(GetFilterUnit())==1848651854)))
endfunction
function OQD takes rect r,boolexpr ORD returns group
set CB=ZI7()
call GroupEnumUnitsInRect(CB,r,ORD)
call DestroyBoolExpr(ORD)
return CB
endfunction
function OSD takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1211117637 or GetUnitTypeId(GetFilterUnit())==1211117639 or GetUnitTypeId(GetFilterUnit())==1211117638 or GetUnitTypeId(GetFilterUnit())==1160786000 or GetUnitTypeId(GetFilterUnit())==1311780930 or GetUnitTypeId(GetFilterUnit())==1430468144 or GetUnitTypeId(GetFilterUnit())==1162032951 or GetUnitTypeId(GetFilterUnit())==1429221456 or GetUnitTypeId(GetFilterUnit())==1160786510 or GetUnitTypeId(GetFilterUnit())==1160786511 or GetUnitTypeId(GetFilterUnit())==1328558390 or GetUnitTypeId(GetFilterUnit())==1328558391 or GetUnitTypeId(GetFilterUnit())==1160786502 or GetUnitTypeId(GetFilterUnit())==1211122767 or GetUnitTypeId(GetFilterUnit())==1311788343 or GetUnitTypeId(GetFilterUnit())==1311788354 or GetUnitTypeId(GetFilterUnit())==1311788355 or GetUnitTypeId(GetFilterUnit())==1311788367 or GetUnitTypeId(GetFilterUnit())==1311788353)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(IM4))
endfunction
function OTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit OUD=QA7(JZ7,"Mine")
local group g
set LP4="OTD"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(AddSpecialEffect("war3mapImported\\NewGroundEX.mdx",GetUnitX(OUD),GetUnitY(OUD)))
call Q47(JZ7)
call RN7(t)
else
set g=ZI7()
set IM4=OUD
call GroupEnumUnitsInRange(g,GetUnitX(OUD),GetUnitY(OUD),$C8,Condition(function OSD))
if FirstOfGroup(g)!=null then
call Q47(JZ7)
call RN7(t)
call SetUnitExploded(OUD,true)
call KillUnit(OUD)
endif
call ZH7(g)
endif
set t=null
set OUD=null
set g=null
return false
endfunction
function OVD takes nothing returns nothing
local integer JZ7=GetHandleId(GetOwningPlayer(GetTriggerUnit()))
local group FP8=OQD(bj_mapInitialPlayableArea,Condition(function OPD))
local integer Vu=R47(JZ7,"GMCount")
local integer VU=0
local unit Vv
local integer VV
local unit G58
local integer Vw
local integer T8
local integer U8
local trigger t=CreateTrigger()
set LP4="OVD"
call TriggerRegisterTimerEvent(t,.4,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function OTD))
call QG7(GetHandleId(t),"Mine",GetTriggerUnit())
set Vu=(Vu+1)
call StartTimerBJ(Q37(JZ7,"MineTimer"+I2S(Vu)),false,15000.)
call QG7(JZ7,"GMUnit"+I2S(Vu),GetTriggerUnit())
set VU=CountUnitsInGroup(FP8)
if(VU>20)then
set VV=99999
set T8=1
set U8=Vu
loop
exitwhen T8>U8
set G58=QA7(JZ7,"GMUnit"+I2S(T8))
set Vw=R2I(TimerGetRemaining(Q37(JZ7,"MineTimer"+I2S(T8))))
if(GetUnitState(G58,UNIT_STATE_LIFE)>0 and Vw<VV)then
set Vv=G58
set VV=Vw
endif
set T8=T8+1
endloop
call ExplodeUnitBJ(Vv)
else
call BO7(I2S(VU),1,GetTriggerUnit(),.027,$82,$82,$82,$D8)
endif
call Q97(JZ7,"GMCount",Vu)
call ZH7(FP8)
set t=null
set FP8=null
set Vv=null
set G58=null
endfunction
function OWD takes nothing returns boolean
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and(GetUnitTypeId(GetFilterUnit())==1848651855 or GetUnitTypeId(GetFilterUnit())==1848651856 or GetUnitTypeId(GetFilterUnit())==1848651857 or GetUnitTypeId(GetFilterUnit())==1848651854)then
set n0=n0+1
endif
return false
endfunction
function OXD takes nothing returns boolean
local group g=ZI7()
set LP4="OXD"
set n0=0
call GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),Condition(function OWD))
if n0>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848657475)))+": "+I2S(n0))
endif
call ZH7(g)
set g=null
return false
endfunction
function qe takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="qe"
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function OXD))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function OOD))
call TriggerAddAction(t,function OVD)
set t=null
endfunction
function OYD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit DA8=CreateUnit(GetOwningPlayer(ZO7),1697656901,GetUnitX(ZO7),GetUnitY(ZO7),0)
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer i=0
local real a=0
local real r=0
local integer DB8=GetUnitAbilityLevel(ZO7,1093681745)
call Z27(DA8,1093678406)
call SetUnitAbilityLevel(DA8,1093678406,DB8)
loop
exitwhen i>40
exitwhen IssuePointOrderById(DA8,$D0271,x+r*Cos(a),y+r*Sin(a))
set i=i+1
set a=a+.4
set r=r+$A
endloop
call RemoveLocation(l)
set ZO7=null
set DA8=null
set l=null
endfunction
function OZD takes nothing returns boolean
if GetSpellAbilityId()==1093681745 then
call OYD()
endif
return false
endfunction
function JJ8 takes nothing returns nothing
set d8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d8,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(d8,Condition(function OZD))
endfunction
function OAD takes nothing returns boolean
return GetSpellAbilityId()==1093678137 and ZG7(GetSpellTargetUnit())==false
endfunction
function OBD takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093678137)*80,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function JK8 takes nothing returns nothing
set d9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(d9,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(d9,Condition(function OAD))
call TriggerAddAction(d9,function OBD)
endfunction
function OCD takes unit u returns boolean
return GetUnitTypeId(u)==1211117638 or GetUnitTypeId(u)==1211117637 or GetUnitTypeId(u)==1211117639 or GetUnitTypeId(u)==1328558391
endfunction
function O3D takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE) then
call D38(OU,GetEnumUnit(),1,PU/3)
else
call D38(OU,GetEnumUnit(),1,PU)
endif
endfunction
function O6D takes unit CP7,real x,real y,real r,real d returns nothing
local group g=ZI7()
set LP4="Toss_DamageArea"
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,r,Condition(function DH8))
set OU=CP7
set PU=d
call ForGroup(g,function O3D)
call ZH7(g)
set g=null
endfunction
function OLD takes nothing returns boolean
return(LU7()and OI7(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function O1D takes unit Z47 returns unit
local unit p5=null
local group g=ZI7()
set LP4="Toss_GetSource"
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),275,Condition(function OLD))
call GroupRemoveUnit(g,Z47)
set p5=GroupPickRandomUnit(g)
call ZH7(g)
set IM4=p5
set p5=null
set g=null
return IM4
endfunction
function O0D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit Z47=QA7(RP7,"Hero")
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real O5D=R77(RP7,"Tossx0")
local real O2D=R77(RP7,"Tossy0")
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetUnitX(m5)
local real y2=GetUnitY(m5)
local real RK
local real O_D
local real P4D
local real P7D
local real Il
local real IL
local location l
set LP4="O0D"
if N67(O5D,O2D,x2,y2)>$3E8 then
set x2=O5D
set y2=O2D
endif
set RK=MZ7(x1,y1,x2,y2)
set O_D=N67(x1,y1,x2,y2)
set P4D=O_D/(51-iX)
set P7D=(iX-25)*(iX-25)
set Il=x1+P4D*Cos(RK*bj_DEGTORAD)
set IL=y1+P4D*Sin(RK*bj_DEGTORAD)
if iX<51 then
if OCD(p5)==false then
call SetUnitFlyHeight(p5,775-P7D,0)
endif
call SetUnitPosition(p5,Il,IL)
else
if OCD(p5)==false then
call SetUnitFlyHeight(p5,GetUnitDefaultFlyHeight(p5),0)
endif
call PauseUnit(p5,false)
call SetUnitPathing(p5,true)
call SetUnitPosition(p5,x2,y2)
call RK7(p5,"Tossed")
set l=Location(x2,y2)
call TerrainDeformationRippleBJ(.2,true,l,1.,300.,96.,1,64.)
call RemoveLocation(l)
call DestroyEffect(Q17(RP7,"FX"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(p5),GetUnitY(p5)))
if IsUnitAlly(p5,GetOwningPlayer(Z47))then
else
if(PH7((Z47),SU[GA4])!=null)then
call D38(Z47,p5,1,(.2+.15*(GetUnitAbilityLevel(Z47,1093682009)+1))*75*GetUnitAbilityLevel(Z47,1093681754))
else
call D38(Z47,p5,1,(.2+.15*GetUnitAbilityLevel(Z47,1093682009))*75*GetUnitAbilityLevel(Z47,1093681754))
endif
endif
call BW7(x2,y2,300)
call O6D(Z47,x2,y2,300,75*GetUnitAbilityLevel(Z47,1093681754))
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
set p5=null
set m5=null
set l=null
return false
endfunction
function P8D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit p5=VH4
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="P8D"
call SetUnitAnimationByIndex(Z47,4)
call PauseUnit(p5,true)
call SetUnitPathing(p5,false)
if OCD(p5)==false then
call Z27(p5,1097691750)
call UnitRemoveAbility(p5,1097691750)
endif
call RI7(p5,"Tossed")
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",p5,"origin"))
call QD7(RP7,"Tossx0",GetUnitX(m5))
call QD7(RP7,"Tossy0",GetUnitY(m5))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function O0D))
set Z47=null
set p5=null
set m5=null
set t=null
endfunction
function P9D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit p5=O1D(Z47)
local unit m5=GetSpellTargetUnit()
set LP4="P9D"
set VH4=p5
if p5==null then
call OD7(Z47)
call AV7(GetOwningPlayer(Z47),YK7(1848656961))
elseif GetOwningPlayer(m5)==GetOwningPlayer(Z47)then
call OD7(Z47)
call AV7(GetOwningPlayer(Z47),YK7(1848656729))
endif
set Z47=null
set p5=null
set m5=null
endfunction
function PDD takes nothing returns boolean
if GetSpellAbilityId()==1093681754 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call P9D()
else
call P8D()
endif
endif
return false
endfunction
function JP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JP8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PDD))
set t=null
endfunction
function PED takes nothing returns nothing
local unit CP7=GetTriggerUnit()
call P59(1093815115)
endfunction
function PFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local integer ZD8
set LP4="PFD"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 and GetEventDamage()>20. then
set ZD8=R47(GetHandleId(CP7),"WarClub_Count")
if RG7(CP7,"WarClubState")==false then
call RR7(CP7,"WarClubState",.1)
call Q97(GetHandleId(CP7),"WarClub_Count",(ZD8+1))
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set CP7=null
set t=null
return false
endfunction
function PGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer WB7=GetHandleId(t)
local unit EU8=QA7(WB7,"Source")
local integer PHD=R47(GetHandleId(EU8),"WarClub_Count")
set LP4="PGD"
call Q97(WB7,"WarClub_Cooldown",1)
call UnitRemoveAbility(EU8,1093752391)
if(PH7(EU8,SU[GA4])!=null)then
call Z27(EU8,1093752392)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(EU8),1093752392,true)
if PHD>5 then
call FlushChildHashtable(C7,WB7)
call RN7(t)
endif
set EU8=null
set t=null
return false
endfunction
function PID takes nothing returns nothing
local trigger t
local unit EU8=GetAttacker()
local integer WB7=GetHandleId(EU8)
local integer PHD=R47(WB7,"WarClub_Count")
set LP4="PID"
if PHD<6 then
if not RG7(EU8,"WarClubState")then
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.,false)
call TriggerAddCondition(t,Condition(function PFD))
call QG7(GetHandleId(t),"Source",EU8)
endif
else
call Q97(WB7,"WarClub_Count",(0))
call UnitRemoveAbility(EU8,1093752625)
if(R47(WB7,"WarClub_Cooldown"))==1 then
set t=Q67(WB7,"WarClub_EndTrig")
call FlushChildHashtable(C7,GetHandleId(t))
call RN7(t)
endif
endif
set EU8=null
set t=null
endfunction
function PJD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093752625)>0 then
call PID()
endif
return false
endfunction
function PKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="PKD"
if GetTriggerEvalCount(t)==1 then
call SetUnitTimeScalePercent(CP7,$FA)
else
call SetUnitTimeScalePercent(CP7,100)
call SetUnitAnimationByIndex(CP7,$C)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function PMD takes nothing returns boolean
local trigger t
set LP4="PMD"
if GetSpellAbilityId()==1093752392 then
call RR7(GetTriggerUnit(),"WarClubCastState",29.9)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752392,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752391,true)
call Z27(GetTriggerUnit(),1093752391)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093752625,false)
call Z27(GetTriggerUnit(),1093752625)
call IssueTargetOrderById(GetTriggerUnit(),$D021F,GetSpellTargetDestructable())
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,30,false)
call TriggerAddCondition(t,Condition(function PGD))
call QG7(GetHandleId(t),"Source",GetTriggerUnit())
call QI7(GetHandleId(GetTriggerUnit()),"WarClub_EndTrig",t)
call Q97(GetHandleId(GetTriggerUnit()),"WarClub_Cooldown",(0))
call Q97(GetHandleId(GetTriggerUnit()),"WarClub_Count",(0))
set t=null
elseif GetSpellAbilityId()==1093815105 then
call RemoveDestructable(GetSpellTargetDestructable())
call ShowUnit(GetTriggerUnit(),false)
call ShowUnit(GetTriggerUnit(),true)
call UnitRemoveAbility(GetTriggerUnit(),1097625443)
call UnitAddAbility(GetTriggerUnit(),1093815106)
call UnitRemoveAbility(GetTriggerUnit(),1093815106)
call UnitAddAbility(GetTriggerUnit(),1093815107)
call UnitRemoveAbility(GetTriggerUnit(),1093815107)
call AddUnitAnimationProperties(GetTriggerUnit(),"upgrade",false)
endif
return false
endfunction
function PND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="PND"
if(PH7((CP7),SU[GA4])!=null)then
if RG7(CP7,"WarClubCastState")==false then
if GetUnitAbilityLevel(CP7,1093752392)==0 and GetUnitAbilityLevel(CP7,1093752391)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093752392,true)
call Z27(CP7,1093752392)
endif
endif
else
call UnitRemoveAbility(CP7,1093752392)
call UnitRemoveAbility(CP7,1093752391)
endif
set t=null
set CP7=null
return false
endfunction
function OU9 takes nothing returns nothing
local unit p5=B2
local unit m5=C2
local unit DA8=QA7(GetHandleId(p5),"GrowCaster")
set LP4="OU9"
call QG7(GetHandleId(m5),"GrowCaster",DA8)
call SetUnitOwner(DA8,GetOwningPlayer(m5),true)
set p5=null
set m5=null
set DA8=null
endfunction
function AE8 takes nothing returns nothing
local unit Z47=IS4
local unit DA8=QA7(GetHandleId(Z47),"GrowCaster")
set LP4="AE8"
if DA8!=null and GetUnitTypeId(DA8)==1697657174 then
call RemoveUnit(DA8)
endif
set Z47=null
set DA8=null
endfunction
function POD takes nothing returns boolean
return GetLearnedSkill()==1093682009 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function PPD takes nothing returns nothing
local unit PQD=QA7(GetHandleId(GetTriggeringTrigger()),"Tiny")
local integer X37=GetUnitAbilityLevel(PQD,1093682009)
set LP4="PPD"
if GetUnitState(PQD,UNIT_STATE_LIFE)>1 then
call SetUnitScale(PQD,.5+.25*X37,.5+.25*X37,.5+.25*X37)
endif
set PQD=null
endfunction
function PRD takes nothing returns boolean
local integer X37
if IsUnitIllusion(GetTriggerUnit())and(GetUnitTypeId(GetTriggerUnit())==1432580716 or GetUnitTypeId(GetTriggerUnit())==1429221720)then
set X37=GetUnitAbilityLevel(QA7(GetHandleId(GetTriggeringTrigger()),"Tiny"),1093682009)
call SetUnitScale(GetTriggerUnit(),.5+.25*X37,.5+.25*X37,.5+.25*X37)
endif
return false
endfunction
function PSD takes nothing returns nothing
local trigger t
local unit PTD=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(PTD,1093682009)
local unit DA8
local unit ZO7=GetTriggerUnit()
local region PUD
set LP4="PSD"
if DB8==1 then
set DA8=CreateUnit(GetOwningPlayer(ZO7),1697657174,0,0,0)
call Z27(DA8,1093742658)
call QG7(GetHandleId(ZO7),"GrowCaster",DA8)
else
set DA8=QA7(GetHandleId(ZO7),"GrowCaster")
endif
if DB8==2 then
call UnitRemoveAbility(DA8,1093742658)
call Z27(DA8,1093742657)
elseif DB8==3 then
call UnitRemoveAbility(DA8,1093742658)
call UnitRemoveAbility(DA8,1093742657)
call Z27(DA8,1093687891)
endif
call SetPlayerTechResearched(GetOwningPlayer(PTD),1378889797,DB8)
if DB8==1 then
set t=CreateTrigger()
call TriggerAddAction(t,function PPD)
call TriggerRegisterTimerEvent(t,2.,true)
call QG7(GetHandleId(t),"Tiny",PTD)
call SetUnitScale(PTD,.5+.25*DB8,.5+.25*DB8,.5+.25*DB8)
set t=CreateTrigger()
set PUD=CreateRegion()
call RegionAddRect(PUD,GetWorldBounds())
call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
call TriggerAddCondition(t,Condition(function PRD))
call QG7(GetHandleId(t),"Tiny",PTD)
set t=null
set PUD=null
endif
set PTD=null
set ZO7=null
set DA8=null
endfunction
function JN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JN8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function POD))
call TriggerAddAction(t,function PSD)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PMD))
call PED()
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function PJD))
set t=null
endfunction
function PVD takes nothing returns boolean
if RG7(GetFilterUnit(),"Tossed")then
call D38(gB,GetFilterUnit(),1,lB)
endif
return false
endfunction
function PWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,x,y,0)
local integer X37=GetUnitAbilityLevel(Z47,1093684300)
local group g=ZI7()
set LP4="PWD"
call Z27(oA,1093742666)
call SetUnitAbilityLevel(oA,1093742666,X37)
set gB=Z47
if X37==1 then
set lB=25
elseif X37==2 then
set lB=45
elseif X37==3 then
set lB=65
elseif X37==4 then
set lB=75
endif
call GroupEnumUnitsInRange(g,x,y,275+24,Condition(function PVD))
call ZH7(g)
if GetTriggerEvalCount(t)>6 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
set oA=null
set g=null
return false
endfunction
function PXD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
local integer X37=GetUnitAbilityLevel(Z47,1093684300)
set LP4="PXD"
call Z27(oA,1093742669)
call SetUnitAbilityLevel(oA,1093742669,X37)
call IssuePointOrderById(oA,$D02AC,GetLocationX(l),GetLocationY(l))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function PWD))
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"x",GetLocationX(l))
call QD7(RP7,"y",GetLocationY(l))
call TriggerEvaluate(t)
call RemoveLocation(l)
set Z47=null
set l=null
set t=null
set oA=null
endfunction
function PYD takes nothing returns boolean
if GetSpellAbilityId()==1093684300 then
call PXD()
endif
return false
endfunction
function JO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PYD))
set t=null
endfunction
function PZD takes nothing returns boolean
local unit CP7=GetTriggerUnit()
local unit J67=GetAttacker()
local integer DB8=GetUnitAbilityLevel(CP7,1093744977)
local unit DA8
set LP4="PZD"
if GetRandomInt(1,100)<=DB8*6 and N37(CP7,J67)<325 then
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093681750)
call SetUnitAbilityLevel(DA8,1093681750,DB8)
call IssueTargetOrderById(DA8,$D007F,J67)
set DA8=null
endif
set CP7=null
set J67=null
return false
endfunction
function PAD takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="jKv"
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function PZD))
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function PBD takes nothing returns boolean
if GetLearnedSkill()==1093744977 and GetUnitAbilityLevel(GetTriggerUnit(),1093744977)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call PAD(GetTriggerUnit(),false)
endif
return false
endfunction
function JQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JQ8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PBD))
set t=null
endfunction
function PCD takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),1093685040)>0 and RG7(GetAttacker(),"BeastRageTrigger")==false
endfunction
function P3D takes nothing returns nothing
local unit J37=GetAttacker()
local unit J67=GetTriggerUnit()
local integer JZ7=GetHandleId(J37)
local unit P6D=QA7(JZ7,"BeastRage|PreviousTarget")
local integer B09=B47(R47(JZ7,"BeastRage|Counter"),0)
local integer DB8=GetUnitAbilityLevel(J37,1093685040)
set LP4="P3D"
if P6D!=J67 then
set B09=1
else
set B09=A_7(B09+1,2+DB8)
endif
call A27(J37,1093684826,B09)
call Q97(JZ7,"BeastRage|Counter",B09)
call QG7(JZ7,"BeastRage|PreviousTarget",J67)
call RR7(J37,"BeastRageTrigger",.4)
set J37=null
set J67=null
set P6D=null
endfunction
function JC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JC8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function PCD))
call TriggerAddAction(t,function P3D)
call AC7(1093684826)
set t=null
endfunction
function PLD takes unit CP7,unit J67,unit DA8,integer DB8 returns nothing
call SetUnitOwner(DA8,GetOwningPlayer(J67),false)
call SetUnitAbilityLevel(DA8,1093808463,DB8)
call IssueTargetOrderById(DA8,$D00DE,J67)
call D38(CP7,J67,1,75+50*DB8)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",J67,"overhead"))
endfunction
function P1D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Z94)==false then
call GroupAddUnit(Z94,GetEnumUnit())
call PLD(Z44,GetEnumUnit(),Z74,ZD4)
endif
endfunction
function P0D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit P5D=(LoadUnitHandle(C7,(JZ7),(675)))
local unit P2D=(LoadUnitHandle(C7,(JZ7),(676)))
local real a=(LoadReal(C7,(JZ7),($D)))
local real d=(LoadReal(C7,(JZ7),(433)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local group g=ZI7()
set LP4="P0D"
if GetTriggerEvalCount(t)<=50 then
set a=a+20
set d=d+7
call SaveReal(C7,(JZ7),($D),((a)*1.))
call SaveReal(C7,(JZ7),(433),((d)*1.))
elseif GetTriggerEvalCount(t)<=100 then
set a=a+20
set d=d-7
call SaveReal(C7,(JZ7),($D),((a)*1.))
call SaveReal(C7,(JZ7),(433),((d)*1.))
endif
call SetUnitX(P5D,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(P5D,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set a=a+$B4
call SetUnitX(P2D,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(P2D,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set IM4=CP7
set Z44=CP7
set Z74=DA8
set Z94=DND
set ZD4=DB8
call GroupEnumUnitsInRange(g,GetUnitX(P5D),GetUnitY(P5D),125,Condition(function LF7))
call ForGroup(g,function P1D)
set IM4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(P2D),GetUnitY(P2D),125,Condition(function LF7))
call ForGroup(g,function P1D)
call ZH7(g)
if GetTriggerEvalCount(t)>100 then
call KillUnit(P5D)
call KillUnit(P2D)
call KillUnit(DA8)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set P5D=null
set P2D=null
set DA8=null
return false
endfunction
function P_D takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit P5D=CreateUnit(GetOwningPlayer(CP7),1697657433,x,y,0)
local unit P2D=CreateUnit(GetOwningPlayer(CP7),1697657433,x,y,0)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
set LP4="P_D"
call UnitAddAbility(DA8,1093808463)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveUnitHandle(C7,(JZ7),(675),(P5D))
call SaveUnitHandle(C7,(JZ7),(676),(P2D))
call SaveReal(C7,(JZ7),($D),((0)*1.))
call SaveReal(C7,(JZ7),(433),((0)*1.))
call SaveInteger(C7,(JZ7),(5),(GetUnitAbilityLevel(CP7,1093808462)))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function P0D))
set CP7=null
set P5D=null
set P2D=null
set t=null
set DA8=null
endfunction
function Q4D takes unit CP7,unit J67,unit DA8,integer DB8 returns nothing
call SetUnitOwner(DA8,GetOwningPlayer(J67),false)
call SetUnitAbilityLevel(DA8,1093808464,DB8)
call IssueTargetOrderById(DA8,$D006B,J67)
call D38(CP7,J67,1,75)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",J67,"overhead"))
endfunction
function Q7D takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Z94)==false and Z84!=null and A47(Z84)==false then
call GroupAddUnit(Z94,GetEnumUnit())
call Q4D(Z44,GetEnumUnit(),Z74,ZD4)
endif
endfunction
function Q8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit P5D=(LoadUnitHandle(C7,(JZ7),(393)))
local unit P2D=(LoadUnitHandle(C7,(JZ7),(394)))
local unit Q9D=(LoadUnitHandle(C7,(JZ7),(395)))
local unit QDD=(LoadUnitHandle(C7,(JZ7),(396)))
local unit QED=(LoadUnitHandle(C7,(JZ7),(397)))
local real a=(LoadReal(C7,(JZ7),($D)))-12.5
local real d=(LoadReal(C7,(JZ7),(433)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local unit W69
local group g
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
set LP4="Q8D"
set d=d+900/20.
call SaveReal(C7,(JZ7),(433),((d)*1.))
call SetUnitX(P5D,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(P5D,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(P2D,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(P2D,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(Q9D,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(Q9D,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(QDD,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(QDD,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set a=a+6.25
call SetUnitX(QED,AY7(x+d*Cos(a*bj_DEGTORAD)))
call SetUnitY(QED,AZ7(y+d*Sin(a*bj_DEGTORAD)))
set Z44=CP7
set Z74=DA8
set Z94=DND
set ZD4=DB8
set W69=P5D
if W69!=null and A47(W69)==false then
set x=GetUnitX(W69)
set y=GetUnitY(W69)
set Z84=W69
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LF7))
call ForGroup(g,function Q7D)
call ZH7(g)
endif
set W69=P2D
if W69!=null and A47(W69)==false then
set x=GetUnitX(W69)
set y=GetUnitY(W69)
set Z84=W69
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LF7))
call ForGroup(g,function Q7D)
call ZH7(g)
endif
set W69=Q9D
if W69!=null and A47(W69)==false then
set x=GetUnitX(W69)
set y=GetUnitY(W69)
set Z84=W69
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LF7))
call ForGroup(g,function Q7D)
call ZH7(g)
endif
set W69=QDD
if W69!=null and A47(W69)==false then
set x=GetUnitX(W69)
set y=GetUnitY(W69)
set Z84=W69
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LF7))
call ForGroup(g,function Q7D)
call ZH7(g)
endif
set W69=QED
if W69!=null and A47(W69)==false then
set x=GetUnitX(W69)
set y=GetUnitY(W69)
set Z84=W69
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LF7))
call ForGroup(g,function Q7D)
call ZH7(g)
endif
if GetTriggerEvalCount(t)>20 then
call KillUnit(P5D)
call KillUnit(P2D)
call KillUnit(Q9D)
call KillUnit(QDD)
call KillUnit(QED)
call KillUnit(DA8)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set P5D=null
set P2D=null
set Q9D=null
set QDD=null
set QED=null
set DA8=null
return false
endfunction
function QFD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x0=GetUnitX(CP7)
local real y0=GetUnitY(CP7)
local real x1=GetSpellTargetX()
local real y1=GetSpellTargetY()
local real a=MZ7(x0,y0,x1,y1)
local unit P5D=CreateUnit(GetOwningPlayer(CP7),1697657434,x0,y0,a-12.5)
local unit P2D=CreateUnit(GetOwningPlayer(CP7),1697657434,x0,y0,a-6.25)
local unit Q9D=CreateUnit(GetOwningPlayer(CP7),1697657434,x0,y0,a)
local unit QDD=CreateUnit(GetOwningPlayer(CP7),1697657434,x0,y0,a+6.25)
local unit QED=CreateUnit(GetOwningPlayer(CP7),1697657434,x0,y0,a+12.5)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x0,y0,0)
set LP4="QFD"
call UnitAddAbility(DA8,1093808464)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveUnitHandle(C7,(JZ7),(393),(P5D))
call SaveUnitHandle(C7,(JZ7),(394),(P2D))
call SaveUnitHandle(C7,(JZ7),(395),(Q9D))
call SaveUnitHandle(C7,(JZ7),(396),(QDD))
call SaveUnitHandle(C7,(JZ7),(397),(QED))
call SaveReal(C7,(JZ7),(6),((x0)*1.))
call SaveReal(C7,(JZ7),(7),((y0)*1.))
call SaveReal(C7,(JZ7),(433),((0)*1.))
call SaveReal(C7,(JZ7),($D),((a)*1.))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call SaveInteger(C7,(JZ7),(5),(GetUnitAbilityLevel(CP7,1093808461)))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function Q8D))
set CP7=null
set P5D=null
set P2D=null
set Q9D=null
set QDD=null
set QED=null
set t=null
set DA8=null
endfunction
function QGD takes nothing returns boolean
if GetSpellAbilityId()==1093808461 then
call QFD()
elseif GetSpellAbilityId()==1093808462 then
call P_D()
endif
return false
endfunction
function QHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093808460)
local player p=(LoadPlayerHandle(C7,(JZ7),(54)))
set LP4="QHD"
if GetUnitTypeId(CP7)==1311781175 or GetUnitTypeId(CP7)==1311781442 then
if((LoadInteger(C7,(GetHandleId((CP7))),((4416))))==1)==false or p!=GetOwningPlayer(CP7)then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808462,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808461,false)
call SaveInteger(C7,(GetHandleId((CP7))),((4416)),(1))
call SaveInteger(C7,(GetHandleId((CP7))),((4417)),(2))
if p!=GetOwningPlayer(CP7)then
call SavePlayerHandle(C7,(JZ7),(54),(GetOwningPlayer(CP7)))
endif
endif
if GetUnitAbilityLevel(CP7,1093808462)!=DB8 then
call SetUnitAbilityLevel(CP7,1093808462,DB8)
endif
elseif GetUnitTypeId(CP7)==1311781174 then
if((LoadInteger(C7,(GetHandleId((CP7))),((4417))))==1)==false or p!=GetOwningPlayer(CP7)then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808461,true)
call SaveInteger(C7,(GetHandleId((CP7))),((4417)),(1))
call SaveInteger(C7,(GetHandleId((CP7))),((4416)),(2))
if p!=GetOwningPlayer(CP7)then
call SavePlayerHandle(C7,(JZ7),(54),(GetOwningPlayer(CP7)))
endif
endif
if GetUnitAbilityLevel(CP7,1093808461)!=DB8 then
call SetUnitAbilityLevel(CP7,1093808461,DB8)
endif
endif
set t=null
set CP7=null
return false
endfunction
function QID takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="QID"
call Z27(CP7,1093808462)
call Z27(CP7,1093808461)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808462,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808461,false)
call SaveInteger(C7,(GetHandleId((CP7))),((4416)),(2))
call SaveInteger(C7,(GetHandleId((CP7))),((4417)),(2))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function QHD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SavePlayerHandle(C7,(JZ7),(54),(GetOwningPlayer(CP7)))
set t=null
set CP7=null
endfunction
function QJD takes nothing returns boolean
if GetLearnedSkill()==1093808460 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808460)==1 then
call QID()
endif
return false
endfunction
function J38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J38"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function QJD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QGD))
set t=null
endfunction
function QKD takes nothing returns nothing
if GetEnumUnit()==GetTriggerUnit()then
call CA7(GetEnumUnit(),1093687365,R34,RC4,1110454338)
else
call CA7(GetEnumUnit(),1093687365,R34,RC4,1110454338)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093687365,false)
endfunction
function QMD takes nothing returns nothing
local group g=ZI7()
set LP4="QMD"
set R34=GetUnitAbilityLevel(GetTriggerUnit(),1093748042)
set RC4=$A
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function DN8))
call ForGroup(g,function QKD)
call ZH7(g)
set g=null
endfunction
function QND takes nothing returns boolean
if GetSpellAbilityId()==1093748042 then
call QMD()
endif
return false
endfunction
function J68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QND))
set t=null
endfunction
function QOD takes nothing returns boolean
return GetSpellAbilityId()==1093681733
endfunction
function QPD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="QPD"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitAbilityLevel(CP7,1093679429,GetUnitAbilityLevel(CP7,1093681733))
call UnitRemoveAbility(CP7,1110456665)
set t=null
set CP7=null
return false
endfunction
function QQD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="QQD"
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function QPD))
set t=null
set CP7=null
endfunction
function JA8 takes nothing returns nothing
set Dc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dc,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerRegisterAnyUnitEventBJ(Dc,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Dc,Condition(function QOD))
call TriggerAddAction(Dc,function QQD)
endfunction
function QRD takes nothing returns boolean
return GetLearnedSkill()==1093681733 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function QSD takes nothing returns nothing
call SetUnitAbilityLevel(GetTriggerUnit(),1093679429,GetUnitAbilityLevel(GetTriggerUnit(),1093681733))
endfunction
function JB8 takes nothing returns nothing
set DC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DC,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(DC,Condition(function QRD))
call TriggerAddAction(DC,function QSD)
endfunction
function QTD takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit QUD=QA7(GetHandleId(t),"MeldTarget")
set LP4="QTD"
call UnitRemoveAbility(QUD,1093685827)
call Q47(GetHandleId(t))
call DestroyTimer(t)
set QUD=null
set t=null
endfunction
function QVD takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local timer t2=null
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit QUD=GetTriggerUnit()
set LP4="QVD"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==Z47 then
call DestroyTrigger(t)
call D38(Z47,QUD,2,50*GetUnitAbilityLevel(Z47,1093685846))
call BO7(I2S(50*GetUnitAbilityLevel(Z47,1093685846)),1.,QUD,.03,$FF,0,0,$FF)
set t2=CreateTimer()
call Z27(QUD,1093685827)
call SetUnitAbilityLevel(QUD,1093685827,GetUnitAbilityLevel(Z47,1093685846))
call QG7(GetHandleId(t2),"MeldTarget",QUD)
call TimerStart(t2,$A,false,function QTD)
endif
else
call DestroyTrigger(t)
endif
set QUD=null
set Z47=null
set t2=null
set t=null
endfunction
function QWD takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local trigger t2=null
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local unit QXD=null
local real jUv=9999
local unit QUD=GetOrderTargetUnit()
set LP4="QWD"
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER and IsUnitEnemy(GetOrderTargetUnit(),GetOwningPlayer(Z47))and(GetIssuedOrderId()==851983or GetIssuedOrderId()==$D0003)then
if N67(x,y,GetUnitX(QUD),GetUnitY(QUD))<($91+50*GetUnitAbilityLevel(Z47,1093685839))then
call UnitRemoveAbility(Z47,1110456395)
call YO7(t)
if IsUnitType(GetOrderTargetUnit(),UNIT_TYPE_STRUCTURE)==false then
set t2=CreateTrigger()
call TriggerRegisterUnitEvent(t2,QUD,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t2,2,false)
set RP7=GetHandleId(t2)
call QG7(RP7,"Hero",Z47)
call TriggerAddAction(t2,function QVD)
endif
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_CAST or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(Z47,1110456395)
call YO7(t)
else
if x!=GetUnitX(Z47)or y!=GetUnitY(Z47)then
call UnitRemoveAbility(Z47,1110456395)
call YO7(t)
endif
endif
set QXD=null
set Z47=null
set t2=null
set t=null
set QUD=null
endfunction
function QYD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="QYD"
call DestroyEffect(AddSpecialEffectTarget("effects\\PurpleAura.mdx",ZO7,"origin"))
call BY7(aO,GetUnitX(ZO7),GetUnitY(ZO7))
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(t,function QWD)
call QG7(RP7,"Hero",ZO7)
call QD7(RP7,"x",GetUnitX(ZO7))
call QD7(RP7,"y",GetUnitY(ZO7))
call IssueImmediateOrderById(ZO7,$D0019)
set t=null
set ZO7=null
endfunction
function QZD takes nothing returns boolean
if GetSpellAbilityId()==1093685846 then
call QYD()
endif
return false
endfunction
function O_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QZD))
set t=null
endfunction
function QAD takes nothing returns boolean
local unit Z47=GetTriggerUnit()
local integer RP7=GetHandleId(Z47)
local integer QBD=R47(RP7,"RefractionPrevent_Remaining")
set LP4="QAD"
if QBD>0 and GetTriggerEventId()!=EVENT_UNIT_DEATH then
if GetEventDamage()>5 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",Z47,"right hand"))
call BE7(Z47,GetEventDamage())
call Q97(RP7,"RefractionPrevent_Remaining",QBD-1)
endif
else
call UnitRemoveAbility(Z47,1093685838)
call UnitRemoveAbility(Z47,1110456394)
call Q97(RP7,"RefractionPrevent_Remaining",0)
endif
set Z47=null
return false
endfunction
function QCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit ZO7=QA7(GetHandleId(t),"Hero")
local integer JZ7=GetHandleId(ZO7)
local integer A58=R47(JZ7,"RefractionDamage_Remaining")
set LP4="QCD"
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED and GetAttacker()==ZO7 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and A58>0 and GetEventDamage()>0 then
call Q97(JZ7,"RefractionDamage_Remaining",A58-1)
else
call UnitRemoveAbility(ZO7,1093685830)
call UnitRemoveAbility(ZO7,1093685837)
call UnitRemoveAbility(ZO7,1110456393)
call Q97(JZ7,"RefractionDamage_Remaining",0)
endif
endif
set t=null
set ZO7=null
return false
endfunction
function Q3D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit ZO7=QA7(GetHandleId(t),"Hero")
local integer JZ7=GetHandleId(ZO7)
set LP4="Q3D"
call Q97(JZ7,"RefractionPrevent_Remaining",0)
call Q97(JZ7,"RefractionDamage_Remaining",0)
call UnitRemoveAbility(ZO7,1093685830)
call UnitRemoveAbility(ZO7,1093685837)
call UnitRemoveAbility(ZO7,1093685838)
call Q47(GetHandleId(t))
call RN7(t)
set t=null
set ZO7=null
return false
endfunction
function Q6D takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local integer JZ7=GetHandleId(ZO7)
local trigger t=CreateTrigger()
set LP4="Q6D"
call TriggerRegisterTimerEvent(t,17,false)
call TriggerAddCondition(t,Condition(function Q3D))
call QG7(GetHandleId(t),"Hero",ZO7)
call BY7(LO,GetUnitX(ZO7),GetUnitY(ZO7))
call Z27(ZO7,1093685838)
call Q97(JZ7,"RefractionPrevent_Remaining",GetUnitAbilityLevel(ZO7,1093748033)+2)
call Z27(ZO7,1093685830)
call SetUnitAbilityLevel(ZO7,1093685830,GetUnitAbilityLevel(ZO7,1093748033))
call Z27(ZO7,1093685837)
call Q97(JZ7,"RefractionDamage_Remaining",GetUnitAbilityLevel(ZO7,1093748033)+2)
set ZO7=null
set t=null
endfunction
function QLD takes unit ZO7,boolean XY9 returns nothing
local trigger t
set LP4="Refraction_MainLearn"
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QAD))
call Q97(GetHandleId(ZO7),"RefractionPrevent_Remaining",0)
if XY9 then
set rj[GetPlayerId(GetOwningPlayer(ZO7))]=t
endif
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QCD))
call QG7(GetHandleId(t),"Hero",ZO7)
call Q97(GetHandleId(ZO7),"RefractionDamage_Remaining",0)
if XY9 then
set Ej[GetPlayerId(GetOwningPlayer(ZO7))]=t
endif
set t=null
set ZO7=null
endfunction
function Q1D takes nothing returns boolean
if GetLearnedSkill()==1093748033 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748033)==1 then
call QLD(GetTriggerUnit(),false)
endif
return false
endfunction
function Q0D takes nothing returns boolean
if GetSpellAbilityId()==1093748033 then
call Q6D()
endif
return false
endfunction
function P48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P48"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q0D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Q1D))
set t=null
endfunction
function Q5D takes unit u,real wP,real wq,real wQ,real wr,real wR returns boolean
local real ws=wQ-wP
local real wS=wr-wq
local real wt=GetUnitX(u)-wP
local real wT=GetUnitY(u)-wq
set LP4="j2v"
return wR>=RAbsBJ(ws*wT-wS*wt)/ RAbsBJ(Pow(Pow(ws,2)+Pow(wS,2),.5))
endfunction
function Q2D takes unit p5,unit m5,real BD7,real wU,real wv returns nothing
local integer DB8=GetUnitAbilityLevel(p5,1093685839)
local real wV=(300+20*DB8)*2
local real ww=80+25
local unit wW
local real dx
local real dy
local real wx
local real x
local real y
local group g=ZI7()
local boolean wX
local boolean wy
set LP4="VorpalBlade_SuccessfulAttack"
set dx=GetUnitX(m5)-GetUnitX(p5)
set dy=GetUnitY(m5)-GetUnitY(p5)
set wx=Pow(Pow(dx,2)+Pow(dy,2),.5)
set x=GetUnitX(m5)+(wV/ 2-25)*(dx/ wx)
set y=GetUnitY(m5)+(wV/ 2-25)*(dy/ wx)
set IM4=p5
set IH4=BD7
call GroupEnumUnitsInRange(g,x,y,Pow(Pow(wV/ 2,2)+Pow(ww/ 2,2),.5),Condition(function LF7))
call GroupRemoveUnit(g,m5)
set wW=FirstOfGroup(g)
loop
exitwhen wW==null
set wX=Q5D(wW,GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5),ww/ 2)
set wy=Q5D(wW,x,y,x-100,y+100*x*Pow(y,-1),.01+wV/ 2)
if wX and wy then
call D38(p5,wW,3,BD7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PriestMissile\\PriestMissile.mdl",wW,"chest"))
endif
call GroupRemoveUnit(g,wW)
set wW=FirstOfGroup(g)
endloop
call ZH7(g)
set wW=null
set g=null
endfunction
function Q_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
set LP4="Q_D"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and GetEventDamage()>1 and IsUnitIllusion(m5)==false then
call DisableTrigger(t)
call Q2D(p5,m5,GetEventDamage(),R77(RP7,"InitX"),R77(RP7,"InitY"))
call Q47(RP7)
call RN7(t)
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function R4D takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer RP7=GetHandleId(t)
set LP4="R4D"
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function Q_D))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call QD7(RP7,"InitX",GetUnitX(p5))
call QD7(RP7,"InitY",GetUnitY(p5))
set m5=null
set p5=null
set t=null
endfunction
function R7D takes nothing returns nothing
local unit p5=GetAttacker()
set LP4="R7D"
if RG7(p5,"VorpalCooldown")==false then
call RR7(p5,"VorpalCooldown",.4)
call R4D()
endif
set p5=null
endfunction
function R8D takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093685839)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")then
call R7D()
endif
return false
endfunction
function R9D takes nothing returns nothing
local trigger t
set LP4="R9D"
if GetUnitAbilityLevel(GetTriggerUnit(),1093685839)==1 then
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function R8D))
call QG7(GetHandleId(t),"Hero",GetTriggerUnit())
endif
call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1382379618,GetUnitAbilityLevel(GetTriggerUnit(),1093685839))
set t=null
endfunction
function RDD takes nothing returns boolean
if GetLearnedSkill()==1093685839 and IsUnitIllusion(GetTriggerUnit())==false then
call R9D()
endif
return false
endfunction
function P78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P78"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RDD))
set t=null
endfunction
function RED takes unit u returns nothing
local unit Z47=G7[GetPlayerId(GetOwningPlayer(u))]
local integer RP7=GetHandleId(Z47)
local integer w3
local integer i
local integer x
local unit w4
set LP4="WardenTrap_RemoveTrap"
if GetUnitTypeId(Z47)!=1160786265 then
return
endif
set w3=R47(RP7,"TrapMax")
set i=1
loop
exitwhen i>w3
set w4=QA7(RP7,"RFD"+I2S(i))
if w4==u then
set x=i
loop
exitwhen x==w3
call QG7(RP7,"RFD"+I2S(x),QA7(RP7,"RFD"+I2S(x+1)))
set x=x+1
endloop
set i=w3
endif
set i=i+1
endloop
call Q97(RP7,"TrapMax",w3-1)
set w4=null
set Z47=null
endfunction
function RGD takes unit u returns nothing
local unit Z47=G7[GetPlayerId(GetOwningPlayer(u))]
local integer RP7=GetHandleId(Z47)
local integer w3=R47(RP7,"TrapMax")
call SaveReal(C7,(GetHandleId(u)),(786),(((TimerGetElapsed(V)))*1.))
set w3=w3+1
call QG7(RP7,"RFD"+I2S(w3),u)
call Q97(RP7,"TrapMax",w3)
if Ab[GetPlayerId(GetOwningPlayer(Z47))]then
call SelectUnitAddForPlayer(u,GetOwningPlayer(Z47))
endif
set Z47=null
endfunction
function RHD takes nothing returns nothing
call RED(GetTriggerUnit())
endfunction
function RID takes unit u returns nothing
local integer w8=GetUnitAbilityLevel(u,1093685840)*3+2
local integer RP7=GetHandleId(u)
local integer w3=R47(RP7,"TrapMax")
local unit w4=QA7(RP7,"Trap1")
set LP4="WardenTrap_IsTooMany"
if w3==w8 then
call RED(w4)
call RemoveUnit(w4)
endif
set w4=null
endfunction
function RJD takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="RJD"
call Z27(oA,1093685845)
call SetUnitAbilityLevel(oA,1093685845,FO7)
call IssueTargetOrderById(oA,$D006B,GetEnumUnit())
set oA=null
endfunction
function RKD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=ZI7()
local real YJ8=(LoadReal(C7,(GetHandleId(p5)),(786)))
local real RMD=(TimerGetElapsed(V))-YJ8
local integer DB8=1
if RMD>4 then
set DB8=5
elseif RMD>3 then
set DB8=4
elseif RMD>2 then
set DB8=3
elseif RMD>1 then
set DB8=2
endif
set FO7=DB8
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,400,Condition(function LV7))
call ForGroup(g,function RJD)
call ZH7(g)
call RED(p5)
call RemoveUnit(p5)
set g=null
set p5=null
endfunction
function RND takes unit u returns nothing
call IssueImmediateOrderById(u,$D024C)
endfunction
function ROD takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==IQ4 and GetUnitTypeId(GetFilterUnit())==1697657392
endfunction
function RPD takes nothing returns nothing
local real RQD=N67(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),IH4,IJ4)
local real RRD=N67(GetUnitX(IM4),GetUnitY(IM4),IH4,IJ4)
set LP4="RPD"
if RQD<RRD then
set IM4=GetEnumUnit()
endif
endfunction
function RSD takes nothing returns nothing
local group g=ZI7()
set LP4="RSD"
set IQ4=GetOwningPlayer(GetTriggerUnit())
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),9000,Condition(function ROD))
set IM4=FirstOfGroup(g)
set IH4=GetUnitX(GetTriggerUnit())
set IJ4=GetUnitY(GetTriggerUnit())
call ForGroup(g,function RPD)
call RND(IM4)
call ZH7(g)
set g=null
endfunction
function RTD takes nothing returns nothing
call Z27(GetTriggerUnit(),1093685844)
endfunction
function RUD takes nothing returns nothing
local location l=GetSpellTargetLoc()
set LP4="RUD"
call Z27(GetTriggerUnit(),1093685844)
call RID(GetTriggerUnit())
call RGD(CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697657392,GetLocationX(l),GetLocationY(l),0))
call RemoveLocation(l)
set l=null
endfunction
function RVD takes nothing returns boolean
if GetSpellAbilityId()==1093685840 then
call RUD()
endif
if GetSpellAbilityId()==1093685844 then
call RSD()
endif
return false
endfunction
function RWD takes nothing returns boolean
if GetSpellAbilityId()==1093685841 then
call RKD()
endif
return false
endfunction
function RXD takes nothing returns boolean
if GetLearnedSkill()==1093685840 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685840)==1 then
call RTD()
endif
return false
endfunction
function RYD takes nothing returns boolean
if GetUnitTypeId(GetDyingUnit())==1697657392 then
call RHD()
endif
return false
endfunction
function P88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P88"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RVD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function RYD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RWD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RXD))
set t=null
endfunction
function RZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="RZD"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetTriggerUnit()==p5 and GetSpellAbilityId()==1093750841 and TimerGetElapsed(V)>R77(RP7,"OriginalTime")then
call Q47(RP7)
call RN7(t)
elseif BX8(GetSpellAbilityId())and p5==GetSpellTargetUnit()then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call Q47(RP7)
call RN7(t)
endif
else
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
return false
endfunction
function RAD takes nothing returns nothing
local unit p5=GetAttacker()
local integer RP7=GetHandleId(p5)
local integer X37=GetUnitAbilityLevel(p5,1093750841)
local integer VT9=R47(RP7,"Count")
local integer RBD=2+X37
local trigger t=null
set LP4="RAD"
set VT9=VT9+1
call Q97(RP7,"Count",VT9)
if VT9>=RBD then
call UnitRemoveAbility(p5,1093750323)
call UnitRemoveAbility(p5,1093750326)
call UnitRemoveAbility(p5,1093750327)
call UnitRemoveAbility(p5,1110459208)
set t=Q67(RP7,"OverpowerEndTrig")
call Q47(GetHandleId(t))
call RN7(t)
set t=null
endif
set p5=null
endfunction
function RCD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110459208)>0 then
call RAD()
endif
return false
endfunction
function R3D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093750841)
set LP4="R3D"
call Z27(p5,1093750323)
call Z27(p5,1093750326)
call Z27(p5,1093750327)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750326,false)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RZD))
call QI7(GetHandleId(p5),"OverpowerEndTrig",t)
call Q97(GetHandleId(p5),"Count",0)
call QG7(RP7,"Source",p5)
call QD7(RP7,"OriginalTime",(TimerGetElapsed(V)+1)*1.)
set t=null
set p5=null
endfunction
function R6D takes nothing returns boolean
if GetSpellAbilityId()==1093750841 then
call R3D()
endif
return false
endfunction
function JR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JR8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R6D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function RCD))
call AC7(1093750323)
set t=null
endfunction
function RLD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local integer DB8=GetUnitAbilityLevel(CP7,1093684291)
local integer K_9
local integer R1D
set LP4="RLD"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(CP7,1110454856)==0 or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and CP7==GetSpellTargetUnit()and BX8(GetSpellAbilityId()))then
call Q47(JZ7)
call RN7(t)
call UnitRemoveAbility(CP7,1110454856)
call D28(CP7,0)
else
set K_9=R2I(GetUnitState(CP7,UNIT_STATE_LIFE)*(.04+.01*DB8))
set R1D=R47(JZ7,"LastBonus")
if K_9!=R1D then
call Q97(JZ7,"LastBonus",K_9)
call D28(CP7,K_9)
endif
endif
set t=null
set CP7=null
return false
endfunction
function R0D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="R0D"
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RLD))
call QG7(RP7,"Source",GetTriggerUnit())
call Q97(RP7,"LastBonus",0)
set t=null
endfunction
function R5D takes nothing returns boolean
if GetSpellAbilityId()==1093684291 then
call R0D()
endif
return false
endfunction
function R2D takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1110454856)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
endif
return false
endfunction
function JS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function R5D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function R2D))
set t=null
endfunction
function R_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real S4D=R77(RP7,"rRealX1")
local real x2=R77(RP7,"x2")
local real S7D=R77(RP7,"rRealY1")
local real y2=R77(RP7,"y2")
set LP4="R_D"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",p5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",m5,"origin"))
call SetUnitPosition(p5,x2,y2)
call RR7(m5,"4407",1)
call SetUnitPosition(m5,S4D,S7D)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function S8D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real S4D=GetUnitX(p5)
local real S7D=GetUnitY(p5)
local real x2=GetUnitX(m5)
local real y2=GetUnitY(m5)
local trigger t
local integer RP7
set LP4="S8D"
if IsUnitAlly(p5,GetOwningPlayer(m5)) or ZG7(GetSpellTargetUnit())==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QD7(RP7,"rRealX1",(S4D)*1.)
call QD7(RP7,"x2",(x2)*1.)
call QD7(RP7,"rRealY1",(S7D)*1.)
call QD7(RP7,"y2",(y2)*1.)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function R_D))
call BN7("SPLK",S4D,S7D,x2,y2,.5,0,1,1,.3)
call BW7(S4D,S7D,300)
call BW7(x2,y2,300)
endif
set p5=null
set m5=null
set t=null
endfunction
function S9D takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call S8D()
endif
return false
endfunction
function SDD takes nothing returns nothing
if(IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652610))))
endif
endfunction
function SED takes nothing returns boolean
if GetSpellAbilityId()==1093683534 or GetSpellAbilityId()==1093747031 then
call SDD()
endif
return false
endfunction
function JT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S9D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function SED))
set t=null
endfunction
function SFD takes unit DA8,real x,real y,integer X37 returns nothing
call SetUnitPosition(DA8,x,y)
if GetPlayerController(GetOwningPlayer(DA8))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(DA8,1093681488)
call SetUnitAbilityLevel(DA8,1093681488,X37)
endif
call IssueImmediateOrderById(DA8,$D026C)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl",x,y))
set DA8=null
endfunction
function SGD takes nothing returns boolean
if(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),p0)==false then
call GroupAddUnit(p0,GetFilterUnit())
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>R14 then
call SetUnitState(GetFilterUnit(),UNIT_STATE_LIFE,GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)-(R14))
else
call D38(Q0,GetFilterUnit(),1,R14*1.33)
endif
endif
return false
endfunction
function SHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local real l4=R77(RP7,"Angle")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local integer X37=R47(RP7,"Level")
local group WC9=QL7(RP7,"AlreadyDamaged")
local group g
set LP4="SHD"
if GetTriggerEvalCount(t)>$A then
call ZH7(WC9)
call Q47(RP7)
call RN7(t)
else
set p0=WC9
set Q0=p5
set R14=X37*20+$A
set IM4=p5
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,325,Condition(function SGD))
call ZH7(g)
set g=null
call SFD(DA8,x,y,X37)
if ModuloInteger(GetTriggerEvalCount(t),2)==0 then
call KillUnit(CreateUnit(GetOwningPlayer(p5),1697657409,x,y,0))
endif
set x=AY7(x+$C8*Cos(l4*bj_DEGTORAD))
set y=AZ7(y+$C8*Sin(l4*bj_DEGTORAD))
call QD7(RP7,"x",x*1.)
call QD7(RP7,"y",y*1.)
endif
set t=null
set p5=null
set DA8=null
set WC9=null
return false
endfunction
function SID takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real l4=MZ7(x1,y1,x2,y2)
local integer X37=GetUnitAbilityLevel(p5,1093744463)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x1,y1,0)
set LP4="SID"
call Z27(DA8,1093681488)
call SetUnitAbilityLevel(DA8,1093681488,X37)
call RemoveLocation(l)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call Q97(RP7,"Level",X37)
call QD7(RP7,"x",x1*1.)
call QD7(RP7,"y",y1*1.)
call QD7(RP7,"Angle",l4*1.)
call QP7(RP7,"AlreadyDamaged",ZI7())
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function SHD))
set t=null
set p5=null
set l=null
set DA8=null
endfunction
function SJD takes nothing returns boolean
if GetSpellAbilityId()==1093744463 then
call SID()
endif
return false
endfunction
function JU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SJD))
set t=null
endfunction
function SKD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl",GetTriggerUnit(),"weapon"))
endfunction
function SMD takes nothing returns boolean
if GetSpellAbilityId()==1093677633 then
call SKD()
endif
return false
endfunction
function JV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JV8"
call TriggerAddCondition(t,Condition(function SMD))
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
set t=null
endfunction
function SND takes nothing returns boolean
return(GetSpellAbilityId()==(1093683779)or GetSpellAbilityId()==(1093677616)or GetSpellAbilityId()==(1093810503)or GetSpellAbilityId()==(1093810504)or(GetUnitPointValue(GetTriggerUnit())==500))and GetUnitAbilityLevel(GetTriggerUnit(),(1093684789))>0
endfunction
function SOD takes nothing returns nothing
local real SPD=GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)
local real SQD=.03+.02*GetUnitAbilityLevel(GetTriggerUnit(),1093684789)
local real YU9=SPD*SQD
set LP4="SOD"
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),YU9,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl",GetEnumUnit(),"overhead"))
endfunction
function SRD takes nothing returns boolean
return(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)!=null
endfunction
function SSD takes nothing returns nothing
local location AU8=GetUnitLoc(GetTriggerUnit())
local group YY9=ZI7()
local real x=GetLocationX(AU8)
local real y=GetLocationY(AU8)
local boolexpr NJD=Condition(function SRD)
set LP4="SSD"
call GroupEnumUnitsInRange(YY9,x,y,$401,NJD)
call ForGroup(YY9,function SOD)
call RemoveLocation(AU8)
call ZH7(YY9)
call DestroyBoolExpr(NJD)
set AU8=null
set YY9=null
set NJD=null
endfunction
function JW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JW8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SND))
call TriggerAddAction(t,function SSD)
set t=null
endfunction
function STD takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and FA8(GetUnitTypeId(GetFilterUnit()))==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(D77)))!=null
endfunction
function SUD takes nothing returns nothing
local real x=GetUnitX(GetEnumUnit())
local real y=GetUnitY(GetEnumUnit())
local unit PR7=CreateUnit(GetOwningPlayer(D77),1697656880,x,y,0)
set LP4="SUD"
call UnitAddAbility(PR7,1093678419)
call SetUnitAbilityLevel(PR7,1093678419,D87)
call IssueTargetOrderById(PR7,$D0097,GetEnumUnit())
call UnitApplyTimedLife(PR7,1112820806,3)
call UnitAddAbility(PR7,1097625443)
if(GetPlayerController(GetOwningPlayer(PR7))==MAP_CONTROL_COMPUTER)then
call IssueTargetOrderById(PR7,$D0097,GetEnumUnit())
endif
set PR7=null
endfunction
function SVD takes nothing returns nothing
local group g=ZI7()
set LP4="SVD"
set D77=GetTriggerUnit()
if GetSpellAbilityId()==1093810503 then
set D87=GetUnitAbilityLevel(GetTriggerUnit(),1093810503)+4
else
set D87=GetUnitAbilityLevel(GetTriggerUnit(),1093810504)+7
endif
call GroupEnumUnitsInRect(g,bj_mapInitialPlayableArea,Condition(function STD))
call ForGroup(g,function SUD)
call ZH7(g)
set g=null
endfunction
function SWD takes nothing returns boolean
set LP4="SWD"
if GetSpellAbilityId()==1093810503 or GetSpellAbilityId()==1093810504 then
call SVD()
endif
return false
endfunction
function JX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SWD))
set t=null
endfunction
function SXD takes nothing returns boolean
return GetSpellAbilityId()==1093683779 and ZG7(GetSpellTargetUnit())==false
endfunction
function SYD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656880,GetUnitX(m5),GetUnitY(m5),0)
set LP4="SYD"
call Z27(oA,1093678419)
call SetUnitAbilityLevel(oA,1093678419,GetUnitAbilityLevel(Z47,1093683779))
call IssueTargetOrderById(oA,$D0097,m5)
call UnitApplyTimedLife(oA,1112820806,3)
call SetUnitPathing(oA,false)
call Z27(oA,1097625443)
if(GetPlayerController(GetOwningPlayer(oA))==MAP_CONTROL_COMPUTER)then
call NX7(.01)
call IssueTargetOrderById(oA,$D0097,m5)
endif
set Z47=null
set m5=null
set oA=null
endfunction
function JY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JY8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SXD))
call TriggerAddAction(t,function SYD)
set t=null
endfunction
function SZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
set LP4="SZD"
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
if GetTriggerEvalCount(t)>80 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set DA8=null
return false
endfunction
function SAD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697657411,GetUnitX(p5),GetUnitY(p5),0)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="SAD"
call Z27(DA8,1093748301)
call SetUnitAbilityLevel(DA8,1093748301,GetUnitAbilityLevel(p5,1093677616))
call IssueTargetOrderById(DA8,$D0097,m5)
call UnitApplyTimedLife(DA8,1112820806,$A)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function SZD))
set p5=null
set m5=null
set DA8=null
set t=null
endfunction
function SBD takes nothing returns boolean
if GetSpellAbilityId()==1093677616 and ZG7(GetSpellTargetUnit())==false then
call SAD()
endif
return false
endfunction
function JZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="JZ8"
call TriggerAddCondition(t,Condition(function SBD))
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set t=null
endfunction
function SCD takes nothing returns boolean
return GetSpellAbilityId()==(1093683507)and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or ZG7(GetSpellTargetUnit())==false)
endfunction
function WU takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real BD7=R77(RP7,"Damage")
set LP4="WU"
call UnitDamageTarget(Z47,Z47,BD7,false,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call Q47(RP7)
call PauseTimer(t)
call DestroyTimer(t)
set t=null
set Z47=null
endfunction
function S3D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real BD7=25+25*GetUnitAbilityLevel(Z47,1093683507)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
set LP4="S3D"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",m5,"origin"))
if IsUnitAlly(m5,GetOwningPlayer(Z47))and GetUnitState(m5,UNIT_STATE_LIFE)>1. then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+2*BD7)
else
call UnitDamageTarget(Z47,m5,2*BD7,false,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"Damage",BD7)
call TimerStart(t,0,false,function WU)
set Z47=null
set m5=null
set t=null
endfunction
function NH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NH8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SCD))
call TriggerAddAction(t,function S3D)
set t=null
endfunction
function WV takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(MB),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="WV"
call Z27(oA,1093684554)
call SetUnitAbilityLevel(oA,1093684554,IG4)
call IssueTargetOrderById(oA,$D026B,GetEnumUnit())
set oA=null
endfunction
function S6D takes unit p5,unit m5,integer X37 returns nothing
local group g=ZI7()
set LP4="AphoticShield_Explode"
set IM4=p5
set IG4=X37
set MB=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),700,Condition(function LW7))
call ForGroup(g,function WV)
call ZH7(g)
set g=null
endfunction
function WW takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real SLD=R77(JZ7,"Life")
local unit CP7
local unit J67=QA7(JZ7,"Target")
local integer DB8
set LP4="WW"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if RG7(GetTriggerUnit(),"BorrowedTime|Active")==false then
if SLD<GetEventDamage()then
set CP7=QA7(JZ7,"Source")
set DB8=R47(JZ7,"Level")
call DestroyEffect(Q17(JZ7,"FX"))
call QF7(GetHandleId(J67),"AphoticShield|Active",false)
call Q47(JZ7)
call RN7(t)
call BE7(GetTriggerUnit(),SLD)
call S6D(CP7,GetTriggerUnit(),DB8)
set GZ[256+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
elseif GetEventDamage()>0 then
call BE7(GetTriggerUnit(),GetEventDamage())
call QD7(JZ7,"Life",SLD-GetEventDamage())
endif
endif
else
set CP7=QA7(JZ7,"Source")
set DB8=R47(JZ7,"Level")
call QF7(GetHandleId(J67),"AphoticShield|Active",false)
set GZ[256+GetPlayerId(GetOwningPlayer(QA7(JZ7,"AphTarg")))]=false
call DestroyEffect(Q17(JZ7,"FX"))
call Q47(JZ7)
call RN7(t)
call S6D(CP7,J67,DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function S1D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=GetSpellTargetUnit()
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093684550)
local integer MED=GetHandleId(J67)
local real SLD
set LP4="S1D"
if R87(MED,"AphoticShield|Active") then
call TriggerEvaluate(Q67(MED,"AphoticShield|Trigger"))
endif
call UnitRemoveBuffs(J67,false,true)
call BT8(J67,0,0)
if DB8==1 then
set SLD=110
elseif DB8==2 then
set SLD=$8C
elseif DB8==3 then
set SLD=$AA
else
set SLD=$C8
endif
call QD7(JZ7,"Life",SLD)
call QH7(JZ7,"FX",AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",J67,"chest"))
call QG7(JZ7,"Source",CP7)
call Q97(JZ7,"Level",DB8)
call QG7(JZ7,"Target",J67)
set GZ[256+GetPlayerId(GetOwningPlayer(GetSpellTargetUnit()))]=true
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerAddCondition(t,Condition(function WW))
call QI7(MED,"AphoticShield|Trigger",t)
call QF7(MED,"AphoticShield|Active",true)
set t=null
set J67=null
set CP7=null
endfunction
function S0D takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call S1D()
endif
return false
endfunction
function WY takes nothing returns nothing
if GetUnitAbilityLevel(GetSpellTargetUnit(),1112433775)>0 then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),YK7(1848652617))
endif
endfunction
function S5D takes nothing returns boolean
if GetSpellAbilityId()==1093684550 then
call WY()
endif
return false
endfunction
function s7 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="s7"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function S5D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S0D))
set t=null
endfunction
function S2D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="S2D"
if GetTriggerEventId()==EVENT_UNIT_DEATH or IssueImmediateOrderById(Z47,$D00A1)then
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function S_D takes unit Z47 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function S2D))
call QG7(RP7,"Hero",Z47)
set t=null
endfunction
function T4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(ZO7,1093684819)
local integer DY8=2+DB8
local real W78
set LP4="T4D"
if DB8==0 then
set DB8=GetUnitAbilityLevel(ZO7,1093747777)
set DY8=4+1*DB8
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and RG7(ZO7,"BorrowedTime|Active")then
call BE7(ZO7,GetEventDamage())
call BE7(ZO7,GetEventDamage())
elseif(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093684819 or GetSpellAbilityId()==1093747777))or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and RG7(ZO7,"BorrowedTime|CD")==false and GetUnitState(ZO7,UNIT_STATE_LIFE)<400)then
call TimerStart(N74[GetPlayerId(GetOwningPlayer(ZO7))],70-$A*DB8,false,null)
call RR7(ZO7,"BorrowedTime|Active",DY8)
call RR7(ZO7,"BorrowedTime|CD",70-$A*DB8)
call UnitRemoveBuffs(ZO7,false,true)
call BT8(ZO7,0,0)
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call DisableTrigger(t)
set D97=true
if IssueImmediateOrderById(ZO7,$D00A1)==false then
call S_D(ZO7)
endif
set D97=false
call EnableTrigger(t)
endif
call BJ7("Abilities\\Spells\\Undead\\Unsummon\\UnsummonTarget.mdl",ZO7,"origin",DY8)
endif
set t=null
set ZO7=null
return false
endfunction
function T7D takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="J6v"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T4D))
if XY9 then
set Vj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function T8D takes nothing returns boolean
if(GetLearnedSkill()==1093684819 or GetLearnedSkill()==1093747777)and IsUnitIllusion(GetTriggerUnit())==false and(GetUnitAbilityLevel(GetTriggerUnit(),1093684819)==1 or GetUnitAbilityLevel(GetTriggerUnit(),1093747777)==1)then
call T7D(GetTriggerUnit(),false)
endif
return false
endfunction
function NJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function T8D))
set t=null
endfunction
function T9D takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),(1110455862))>0 or GetUnitAbilityLevel(GetAttacker(),(1093684551))>0
endfunction
function TDD takes nothing returns nothing
local unit VC8=GetAttacker()
local unit m5=GetTriggerUnit()
local unit TED
local integer X37=GetUnitAbilityLevel(VC8,(1093684551))
local unit DA8=CreateUnit(GetOwningPlayer(VC8),1697656901,GetUnitX(VC8),GetUnitY(VC8),0)
set LP4="TDD"
if X37>0 then
call Q97(GetHandleId(m5),"MarkOfTheAbyss|Level",X37)
else
set X37=R47(GetHandleId(m5),"MarkOfTheAbyss|Level")
endif
if IsUnitEnemy(m5,GetOwningPlayer(VC8)) then
call Z27(DA8,(1093684552))
call SetUnitAbilityLevel(DA8,(1093684552),X37)
call IssueTargetOrderById(DA8,$D0085,VC8)
endif
set VC8=null
set m5=null
set TED=null
set DA8=null
endfunction
function NI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NI8"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function T9D))
call TriggerAddAction(t,function TDD)
set t=null
endfunction
function TFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local real YU9
local integer DY8
local unit YV8
set LP4="TFD"
if DB8==1 then
set YU9=$F
set DY8=$A
elseif DB8==2 then
set YU9=21
set DY8=$D
elseif DB8==3 then
set YU9=27
set DY8=16
elseif DB8==4 then
set YU9=33
set DY8=19
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093686065 and ZG7(GetSpellTargetUnit())==false and J67==GetSpellTargetUnit()then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
set YV8=GetKillingUnit()
if EC8(YV8)then
set YV8=(G7[GetPlayerId(GetOwningPlayer((YV8)))])
endif
if GetTriggerUnit()==J67 or YV8==J67 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093752627)
call UnitRemoveAbility(J67,1110459471)
endif
else
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if ZD8==DY8 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093752627)
call UnitRemoveAbility(J67,1110459471)
endif
call D38(CP7,J67,1,YU9)
endif
set t=null
set CP7=null
set J67=null
set YV8=null
return false
endfunction
function TGD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093686065)
local real THD
local real JNI
set LP4="TGD"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl",J67,"overhead"))
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093752627,false)
call Z27(J67,1093752627)
call TriggerRegisterTimerEvent(t,1,true)
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TFD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",J67,"overhead")))
set CP7=null
set J67=null
set t=null
endfunction
function TID takes nothing returns nothing
if GetUnitAbilityLevel(GetEnumUnit(),1110459471)>0 then
set EV7=EV7+1
endif
endfunction
function TJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g=ZI7()
set IM4=CP7
set EV7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function LF7))
call ForGroup(g,function TID)
call ZH7(g)
if EV7==0 then
if GetUnitAbilityLevel(CP7,1110459738)>0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
endif
elseif EV7==1 then
if GetUnitAbilityLevel(CP7,1093812562)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812562)
endif
elseif EV7==2 then
if GetUnitAbilityLevel(CP7,1093812563)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812563)
endif
elseif EV7==3 then
if GetUnitAbilityLevel(CP7,1093812565)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812565)
endif
elseif EV7==4 then
if GetUnitAbilityLevel(CP7,1093812564)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812564)
endif
elseif EV7==5 then
if GetUnitAbilityLevel(CP7,1093812561)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812561)
endif
elseif EV7>=6 then
if GetUnitAbilityLevel(CP7,1093812560)==0 then
call UnitRemoveAbility(CP7,1093812562)
call UnitRemoveAbility(CP7,1093812563)
call UnitRemoveAbility(CP7,1093812565)
call UnitRemoveAbility(CP7,1093812564)
call UnitRemoveAbility(CP7,1093812561)
call UnitRemoveAbility(CP7,1093812560)
call UnitRemoveAbility(CP7,1110459738)
call UnitAddAbility(CP7,1093812560)
endif
endif
set t=null
set CP7=null
return false
endfunction
function TKD takes nothing returns boolean
if GetSpellAbilityId()==1093686065 and ZG7(GetSpellTargetUnit())==false then
call TGD()
endif
return false
endfunction
function TMD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function TJD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812562,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812563,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812565,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812564,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812561,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812560,false)
set t=null
endfunction
function TND takes nothing returns boolean
if GetLearnedSkill()==1093686065 and GetUnitAbilityLevel(GetTriggerUnit(),1093686065)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call TMD()
endif
return false
endfunction
function JL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TKD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function TND))
set t=null
endfunction
function TOD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call D38(GetTriggerUnit(),GetEnumUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),1093681974)*35+65)
endfunction
function TPD takes nothing returns nothing
local group g=ZI7()
local unit Z47=GetTriggerUnit()
set LP4="TPD"
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),300,Condition(function jF))
call ForGroup(g,function TOD)
call SetUnitAnimation(Z47,"spin")
call CG7(Z47,.6)
call RR7(Z47,"TPD",.7-.05*GetUnitAbilityLevel(GetTriggerUnit(),1093681974))
call ZH7(g)
set g=null
set Z47=null
endfunction
function TQD takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1110455120)>0 and IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and IsUnitType(GetAttacker(),UNIT_TYPE_MECHANICAL)==false and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false and GetRandomReal(0,100)<17 and RG7(GetTriggerUnit(),"TPD")==false then
call TPD()
endif
return false
endfunction
function J18 takes nothing returns nothing
local trigger t=CreateTrigger()
call ky(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function TQD))
set t=null
endfunction
function xC takes nothing returns boolean
return LV7()and GetUnitAbilityLevel(GetFilterUnit(),1110454328)==0 and GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0
endfunction
function xd takes integer JZ7,integer TRD returns nothing
local integer i=1
set LP4="xd"
loop
exitwhen i>TRD
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($A8C+i))))
set i=i+1
endloop
endfunction
function TSD takes nothing returns nothing
if((IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetEnumUnit()))!=MAP_CONTROL_USER))then
set hq[640+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=Bz+1+(.5*GetUnitAbilityLevel(GetTriggerUnit(),1093683510))
set hq[832+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=Bz+1+(.5*GetUnitAbilityLevel(GetTriggerUnit(),1093683510))
call IssueTargetOrderById(GetEnumUnit(),$D0003,DE7)
else
call IssueTargetOrderById(GetEnumUnit(),$D000F,DE7)
endif
endfunction
function xE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local group g=LoadGroupHandle(C7,(JZ7),($DC))
local unit ZO7=LoadUnitHandle(C7,(JZ7),($E))
local integer TRD=LoadInteger(C7,(JZ7),(365))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
set LP4="xE"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_PLAYER_UNIT_ISSUED_ORDER then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if ZD8==(4+2*DB8)then
call UnitRemoveAbility(ZO7,1093683509)
call ZH7(g)
call xd(JZ7,TRD)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call DisableTrigger(t)
set DE7=ZO7
call ForGroup(g,function TSD)
call EnableTrigger(t)
endif
else
if IsUnitInGroup(GetTriggerUnit(),g) and UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=$D0005 and D97==false then
call DisableTrigger(t)
if((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))then
call DisableTrigger(Q14[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call IssueTargetOrderById(GetTriggerUnit(),$D0003,ZO7)
call EnableTrigger(Q14[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
call IssueTargetOrderById(GetTriggerUnit(),$D000F,ZO7)
endif
call EnableTrigger(t)
endif
endif
set t=null
set g=null
set ZO7=null
return false
endfunction
function xf takes nothing returns nothing
set IG4=IG4+1
call SaveEffectHandle(C7,(tl),($A8C+IG4),(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl",GetEnumUnit(),"chest")))
endfunction
function xF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(ZO7,1093683510)
local group g=ZI7()
set LP4="xF"
call Z27(ZO7,1093683509)
call SetUnitAbilityLevel(ZO7,1093683509,DB8)
set IM4=ZO7
set DE7=ZO7
set IG4=0
set tl=JZ7
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),300,Condition(function xC))
call ForGroup(g,function xf)
call ForGroup(g,function TSD)
call SaveInteger(C7,(JZ7),(365),IG4)
call SaveUnitHandle(C7,(JZ7),($E),ZO7)
call SaveGroupHandle(C7,(JZ7),($DC),g)
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
call TriggerRegisterTimerEvent(t,.25,true)
call BT7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call BT7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call BT7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function xE))
set t=null
set g=null
set ZO7=null
endfunction
function TTD takes nothing returns boolean
if GetSpellAbilityId()==1093683510 then
call xF()
endif
return false
endfunction
function J08 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TTD))
set t=null
endfunction
function TUD takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093814595,false)
call CA7(GetEnumUnit(),1093814595,1,6,1110459990)
endfunction
function TVD takes nothing returns boolean
return GetSpellAbilityId()==1093682482 or GetSpellAbilityId()==1093750098
endfunction
function TWD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local real SLD=GetUnitState(J67,UNIT_STATE_LIFE)
local integer DB8=GetUnitAbilityLevel(Z47,1093682482)
local unit DA8
local boolean TXD=false
local group g
set LP4="TWD"
if DB8==0 then
set DB8=GetUnitAbilityLevel(Z47,1093750098)
set TXD=true
endif
if(SLD<=300 and DB8==1)or(SLD<=450 and DB8==2)or(SLD<=625 and DB8==3)then
if TXD then
endif
call PlaySoundOnUnitBJ(WN,100,J67)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",J67,"overhead"))
set DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,0,0,0)
call UnitRemoveBuffs(J67,true,true)
call UnitRemoveAbility(J67,1097167980)
call UnitDamageTarget(DA8,J67,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\AxeUltiMSFX_01.mdx",Z47,"origin"))
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),625,Condition(function D88))
call ForGroup(g,function TUD)
call ZH7(g)
set g=null
endif
set Z47=null
set J67=null
set DA8=null
endfunction
function J58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J58"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TVD))
call TriggerAddAction(t,function TWD)
set t=null
endfunction
function TYD takes nothing returns boolean
return GetSpellAbilityId()==1093683019 and ZG7(GetSpellTargetUnit())==false
endfunction
function TZD takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019),ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC)
if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>1 then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+20+70*GetUnitAbilityLevel(GetTriggerUnit(),1093683019))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetSpellTargetUnit(),"origin"))
endfunction
function TAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
local player p=QC7(RP7,"p")
local integer X37=R47(RP7,"Level")
local unit oA
set LP4="TAD"
if GetUnitAbilityLevel(m5,1110454854)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_ATTACKED and GetTriggerUnit()==m5 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
if((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))then
call IssuePointOrderById(GetAttacker(),$D0012,GetUnitX(GetAttacker())+GetRandomReal(0,150.)-75.,GetUnitY(GetAttacker())+GetRandomReal(0,150.)-75.)
else
call UnitRemoveAbility(m5,1110454854)
set oA=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(oA,1093678169)
call SetUnitAbilityLevel(oA,1093678169,X37)
call IssueTargetOrderById(oA,$D0103,GetAttacker())
call Q47(RP7)
call RN7(t)
endif
elseif GetTriggerEventId()!=EVENT_UNIT_ATTACKED then
if GetUnitState(m5,UNIT_STATE_LIFE)>21 then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)-20)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,false)
call UnitRemoveAbility(m5,1110454854)
call D38(p5,m5,1,50)
call Q47(RP7)
call RN7(t)
endif
endif
set t=null
set p=null
set oA=null
set m5=null
set p5=null
return false
endfunction
function TBD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TBD"
set RP7=GetHandleId(t)
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call QN7(RP7,"p",GetOwningPlayer(p5))
call Q97(RP7,"Level",GetUnitAbilityLevel(p5,1093678169))
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function TAD))
if GetUnitAbilityLevel(m5,1093678169)>0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678169,false)
call Z27(m5,1093816121)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093816121,true)
endif
set V64=true
call D38(p5,m5,2,0)
set V64=false
set p5=null
set m5=null
set t=null
endfunction
function TCD takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and OI7(GetSpellTargetUnit())==false then
call TBD()
endif
return false
endfunction
function T3D takes nothing returns boolean
if GetSpellAbilityId()==1093678169 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
if GetOwningPlayer(GetTriggerUnit())!=GetOwningPlayer(GetSpellTargetUnit())and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function T6D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1110454854)
call UnitRemoveAbility(CP7,1093816121)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093678169,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093816121,false)
set t=null
set CP7=null
return false
endfunction
function TLD takes nothing returns boolean
local trigger t
if GetIssuedOrderId()==852589and GetUnitAbilityLevel(GetTriggerUnit(),1093816121)>0 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function T6D))
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(GetTriggerUnit()))
endif
return false
endfunction
function J28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TCD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function T3D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function TLD))
set t=null
endfunction
function T1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit p5=QA7(JZ7,"Source")
local unit m5=QA7(JZ7,"Target")
local real W78
local integer ZD8=6
local fogmodifier T0D=(LoadFogModifierHandle(C7,(JZ7),(42)))
set LP4="T1D"
if GetUnitAbilityLevel(p5,1093747769)>0 then
set ZD8=8
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call FogModifierStop(T0D)
call DestroyFogModifier(T0D)
call Q47(JZ7)
call RN7(t)
elseif GetTriggerEvalCount(t)>ZD8 then
call FogModifierStop(T0D)
call DestroyFogModifier(T0D)
call Q47(JZ7)
call RN7(t)
call OD7(p5)
else
set W78=RMinBJ(.05*GetUnitState(m5,UNIT_STATE_MAX_MANA),GetUnitState(m5,UNIT_STATE_MANA))
if GetUnitAbilityLevel(p5,1093747769)>0 then
set W78=RMinBJ(.1*GetUnitState(m5,UNIT_STATE_MAX_MANA),GetUnitState(m5,UNIT_STATE_MANA))
endif
if W78>0 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+W78)
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-W78)
endif
endif
set t=null
set p5=null
set m5=null
set T0D=null
return false
endfunction
function T5D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local fogmodifier T0D=CreateFogModifierRadius(GetOwningPlayer(p5),FOG_OF_WAR_VISIBLE,GetUnitX(m5),GetUnitY(m5),350,true,true)
set LP4="T5D"
call FogModifierStart(T0D)
call UnitRemoveAbility(m5,1110454854)
call UnitRemoveAbility(m5,1112896368)
call UnitRemoveAbility(m5,1114993524)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function T1D))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call SaveFogModifierHandle(C7,(RP7),(42),(T0D))
set p5=null
set m5=null
set t=null
set T0D=null
endfunction
function T2D takes nothing returns boolean
if GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769 then
call T5D()
endif
return false
endfunction
function J_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T2D))
set t=null
endfunction
function T_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real JID=(LoadReal(C7,(GetHandleId(J67)),(789)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JID<(TimerGetElapsed(V))then
call UnitRemoveAbility(J67,1093816135)
call UnitRemoveAbility(J67,1093816129)
call UnitRemoveAbility(J67,1093816134)
call UnitRemoveAbility(J67,1093816136)
call UnitRemoveAbility(J67,1110460229)
endif
set t=null
set J67=null
return false
endfunction
function U4D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093816137)
set LP4="U4D"
if DB8==1 then
call UnitRemoveAbility(J67,1110460229)
call UnitRemoveAbility(J67,1093816129)
call UnitRemoveAbility(J67,1093816134)
call UnitRemoveAbility(J67,1093816136)
call Z27(J67,1093816135)
call UnitMakeAbilityPermanent(J67,true,1093816132)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093816135,false)
elseif DB8==2 then
call UnitRemoveAbility(J67,1110460229)
call UnitRemoveAbility(J67,1093816135)
call UnitRemoveAbility(J67,1093816134)
call UnitRemoveAbility(J67,1093816136)
call Z27(J67,1093816129)
call UnitMakeAbilityPermanent(J67,true,1093816133)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093816129,false)
elseif DB8==3 then
call UnitRemoveAbility(J67,1110460229)
call UnitRemoveAbility(J67,1093816135)
call UnitRemoveAbility(J67,1093816129)
call UnitRemoveAbility(J67,1093816136)
call Z27(J67,1093816134)
call UnitMakeAbilityPermanent(J67,true,1093816131)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093816134,false)
elseif DB8==4 then
call UnitRemoveAbility(J67,1110460229)
call UnitRemoveAbility(J67,1093816135)
call UnitRemoveAbility(J67,1093816129)
call UnitRemoveAbility(J67,1093816134)
call Z27(J67,1093816136)
call UnitMakeAbilityPermanent(J67,true,1093816130)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093816136,false)
endif
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function T_D))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(GetHandleId(J67)),(789),((19.9+(TimerGetElapsed(V)))*1.))
set t=null
set CP7=null
set J67=null
endfunction
function U7D takes nothing returns boolean
if GetSpellAbilityId()==1093816137 and ZG7(GetSpellTargetUnit())==false then
call U4D()
endif
return false
endfunction
function K78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U7D))
set t=null
endfunction
function U8D takes unit CP7,unit J67,real U9D returns nothing
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+GetUnitState(J67,UNIT_STATE_MAX_LIFE)*U9D)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",CP7,"overhead"))
endfunction
function UDD takes nothing returns boolean
if A47(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093684293)>0 and IsUnitEnemy(X14,GetOwningPlayer(GetFilterUnit()))then
call U8D(GetFilterUnit(),X14,GetUnitAbilityLevel(GetFilterUnit(),1093684293)*.1*.5)
endif
return false
endfunction
function UED takes unit CP7,unit J67,integer DB8 returns nothing
local group g=ZI7()
set LP4="Bloodbath_Search"
set X14=J67
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),350,Condition(function UDD))
call ZH7(g)
set X14=null
set g=null
endfunction
function UFD takes nothing returns boolean
local unit CP7=GetKillingUnit()
local unit J67=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093684293)
set LP4="UFD"
if IsUnitIllusion(J67)==false and IsUnitType(J67,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(J67)!=1848651852 then
if IsUnitType(J67,UNIT_TYPE_HERO)==false then
if DB8>0 then
call U8D(CP7,J67,DB8*.05+.05)
endif
else
if DB8>0 then
call U8D(CP7,J67,DB8*.1)
else
call UED(CP7,J67,DB8)
endif
endif
endif
set CP7=null
set J67=null
return false
endfunction
function K88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K88"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UFD))
set t=null
endfunction
function xn takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local real xN=R77(RP7,"LastX")
local real xo=R77(RP7,"LastY")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real d=SquareRoot((xN-x)*(xN-x)+(xo-y)*(xo-y))
local real DAD=.2*X37*d
local integer QI=R47(RP7,"Iteration")
set LP4="xn"
if d>$514 then
set DAD=0
endif
if DAD>5 then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",m5,"origin"))
endif
if DAD>0 and A47(m5)==false then
call D38(p5,m5,3,DAD)
endif
call QD7(RP7,"LastX",x)
call QD7(RP7,"LastY",y)
call Q97(RP7,"Iteration",QI+1)
if A47(m5)then
call Q47(RP7)
call RN7(t)
elseif QI>4*(6+X37)then
call UnitRemoveAbility(m5,1093683528)
call UnitRemoveAbility(m5,1110456396)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function xp takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093684296)
set LP4="xp"
call Z27(m5,1093683528)
call SetUnitAbilityLevel(m5,1093683528,X37)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",m5,"chest"))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call QD7(RP7,"LastX",GetUnitX(m5))
call QD7(RP7,"LastY",GetUnitY(m5))
call Q97(RP7,"Iteration",0)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function xn))
call D38(p5,m5,3,50+100*X37)
set p5=null
set m5=null
set t=null
endfunction
function UGD takes nothing returns boolean
if GetSpellAbilityId()==1093684296 and ZG7(GetSpellTargetUnit())==false then
call xp()
endif
return false
endfunction
function K98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UGD))
set t=null
endfunction
function UHD takes nothing returns nothing
local unit DA8
if LG7(GetEnumUnit())==false then
call UnitRemoveAbility(GetEnumUnit(),1110459737)
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YE4),true)
else
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YE4),true)
if GetUnitAbilityLevel(GetEnumUnit(),1110459737)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454356)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110454348)==0 then
set DA8=CreateUnit(GetOwningPlayer(YE4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call UnitAddAbility(DA8,1093812552)
call IssueTargetOrderById(DA8,$D00B5,GetEnumUnit())
set DA8=null
endif
endif
endfunction
function UID takes nothing returns nothing
local real F5D=YF4*.1+.1
if A47(YE4) or IsUnitInGroup(GetEnumUnit(),YD4)==false or GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>F5D or(GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)>F5D/2 and LG7(GetEnumUnit()))then
call GroupRemoveUnit(Y94,GetEnumUnit())
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(YE4),false)
call UnitRemoveAbility(GetEnumUnit(),1110459737)
endif
endfunction
function UJD takes nothing returns nothing
local real F5D
if A47(YE4)==false and IsUnitInGroup(GetEnumUnit(),Y94)==false and IsUnitIllusion(GetEnumUnit())==false then
set F5D=YF4*.1+.1
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<F5D and LG7(GetEnumUnit())==false then
call GroupAddUnit(Y94,GetEnumUnit())
elseif GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)/GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)<F5D/2 then
call GroupAddUnit(Y94,GetEnumUnit())
endif
endif
endfunction
function UKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group UMD=(LoadGroupHandle(C7,(JZ7),(22)))
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093683512)
set LP4="UKD"
set IM4=CP7
set YE4=CP7
set Y94=UMD
set YF4=DB8
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),25+6000,Condition(function L27))
call ForGroup(g,function UJD)
set YD4=g
call ForGroup(Y94,function UID)
call ForGroup(Y94,function UHD)
if FirstOfGroup(Y94)==null then
call UnitRemoveAbility(CP7,Y84[1])
call UnitRemoveAbility(CP7,Y84[2])
call UnitRemoveAbility(CP7,Y84[3])
call UnitRemoveAbility(CP7,Y84[4])
call UnitRemoveAbility(CP7,1093808436)
else
if DB8==1 then
call UnitRemoveAbility(CP7,Y84[2])
call UnitRemoveAbility(CP7,Y84[3])
call UnitRemoveAbility(CP7,Y84[4])
call UnitRemoveAbility(CP7,1110459701)
call UnitRemoveAbility(CP7,1110459700)
call UnitRemoveAbility(CP7,1110459702)
elseif DB8==2 then
call UnitRemoveAbility(CP7,Y84[1])
call UnitRemoveAbility(CP7,Y84[3])
call UnitRemoveAbility(CP7,Y84[4])
call UnitRemoveAbility(CP7,1110455634)
call UnitRemoveAbility(CP7,1110459700)
call UnitRemoveAbility(CP7,1110459702)
elseif DB8==3 then
call UnitRemoveAbility(CP7,Y84[1])
call UnitRemoveAbility(CP7,Y84[2])
call UnitRemoveAbility(CP7,Y84[4])
call UnitRemoveAbility(CP7,1110455634)
call UnitRemoveAbility(CP7,1110459701)
call UnitRemoveAbility(CP7,1110459702)
elseif DB8==4 then
call UnitRemoveAbility(CP7,Y84[1])
call UnitRemoveAbility(CP7,Y84[2])
call UnitRemoveAbility(CP7,Y84[3])
call UnitRemoveAbility(CP7,1110455634)
call UnitRemoveAbility(CP7,1110459701)
call UnitRemoveAbility(CP7,1110459700)
endif
call Z27(CP7,Y84[DB8])
call Z27(CP7,1093808436)
call UnitMakeAbilityPermanent(CP7,true,Y84[DB8])
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),Y84[DB8],false)
endif
call ZH7(g)
set t=null
set CP7=null
set g=null
set UMD=null
return false
endfunction
function UND takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="UND"
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function UKD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveGroupHandle(C7,(JZ7),(22),(ZI7()))
set t=null
set CP7=null
endfunction
function UOD takes nothing returns boolean
if GetLearnedSkill()==1093683512 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683512)==1 then
call UND()
endif
return false
endfunction
function KE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KE8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UOD))
set Y84[1]=1093808432
set Y84[2]=1093808433
set Y84[3]=1093808434
set Y84[4]=1093808435
set t=null
endfunction
function UPD takes nothing returns boolean
if GetSpellAbilityId()==1093682499 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp"))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
return false
endfunction
function KD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function UPD))
set t=null
endfunction
function UQD takes nothing returns boolean
return GetUnitTypeId(GetSummonedUnit())==1865429043
endfunction
function URD takes nothing returns nothing
local unit xU=GetSummonedUnit()
local unit xv=GetSummoningUnit()
local integer RP7=GetHandleId(xv)
local integer X37=GetUnitAbilityLevel(xv,1093681735)
local integer xV=R47(RP7,"TotalWebs")
local unit xw=QA7(RP7,"Web1")
local integer x=1
set xV=xV+1
call SetUnitVertexColorBJ(xU,100,100,100,80)
call Z27(xU,1097625443)
call QG7(RP7,"Web"+I2S(xV),xU)
if(xV>X37*2)then
call KillUnit(xw)
loop
exitwhen x==xV
call QG7(RP7,"Web"+I2S(x),QA7(RP7,"Web"+I2S(x+1)))
set x=x+1
endloop
set xV=xV-1
endif
call Q97(RP7,"TotalWebs",xV)
call SetUnitAbilityLevel(xU,1093681734,X37)
set xU=null
set xv=null
set xw=null
endfunction
function KF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function UQD))
call TriggerAddAction(t,function URD)
set t=null
endfunction
function USD takes unit xv returns nothing
local integer RP7=GetHandleId(xv)
local integer X37=GetUnitAbilityLevel(xv,1093681735)
local integer xV=R47(RP7,"TotalWebs")
local integer x=1
local unit VX
loop
exitwhen x>xV
set VX=QA7(RP7,"Web"+I2S(x))
call SetUnitAbilityLevel(VX,1093681734,X37)
set x=x+1
endloop
set VX=null
endfunction
function UTD takes nothing returns nothing
local unit UUD=QA7(GetHandleId(GetTriggeringTrigger()),"Spider")
if UUD==null then
call FlushChildHashtable(C7,(GetHandleId(GetTriggeringTrigger())))
call RN7(GetTriggeringTrigger())
else
if IsUnitType(UUD,UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(UUD,1110454595)>0 then
call Z27(UUD,1093677617)
else
call UnitRemoveAbility(UUD,1093677617)
endif
else
if GetUnitAbilityLevel(UUD,1110454595)>0 then
call Z27(UUD,1093810499)
else
call UnitRemoveAbility(UUD,1093810499)
endif
endif
endif
set UUD=null
endfunction
function UVD takes unit CP7 returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function UTD)
call QG7(GetHandleId(t),"Spider",CP7)
set t=null
endfunction
function UWD takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1848652101 or GetUnitTypeId(GetSummonedUnit())==1848652089 then
call UVD(GetSummonedUnit())
endif
return false
endfunction
function UXD takes unit Z47,boolean XY9 returns nothing
local trigger t
if(GetUnitAbilityLevel(Z47,1093681735)==1 or XY9)then
call UVD(Z47)
else
call USD(Z47)
endif
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function UYD takes nothing returns boolean
if GetLearnedSkill()==1093681735 and IsUnitIllusion(GetTriggerUnit())==false then
call UXD(GetTriggerUnit(),false)
endif
return false
endfunction
function KG8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UYD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function UWD))
set t=null
endfunction
function UZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="UZD"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and BX8(GetSpellAbilityId())and GetSpellTargetUnit()==Z47)then
if A47(Z47)==false then
call UnitRemoveAbility(Z47,1093687122)
call UnitRemoveAbility(Z47,1110454597)
endif
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function UAD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
set LP4="UAD"
call TriggerRegisterTimerEvent(t,$E,false)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UZD))
call QG7(RP7,"Hero",Z47)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",Z47,"origin"))
call Z27(Z47,1093687122)
call SetUnitAbilityLevel(Z47,1093687122,GetUnitAbilityLevel(Z47,1093687121))
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093687122,false)
set t=null
set Z47=null
endfunction
function UBD takes nothing returns boolean
if GetSpellAbilityId()==1093687121 then
call UAD()
endif
return false
endfunction
function KH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UBD))
set t=null
endfunction
function UCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="UCD"
if GetTriggerEvalCount(t)>300 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetUnitAbilityLevel(J67,1110459703)>0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call D38(CP7,J67,1,GetUnitAbilityLevel(CP7,1093681736)*75)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function U3D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="U3D"
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function UCD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set CP7=null
set J67=null
endfunction
function U6D takes nothing returns boolean
if GetSpellAbilityId()==1093681736 then
call U3D()
endif
return false
endfunction
function KI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U6D))
set t=null
endfunction
function ULD takes nothing returns boolean
return GetSpellAbilityId()==1093678389
endfunction
function U1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local real YU9=(LoadReal(C7,(JZ7),(20)))
local integer DY8=(LoadInteger(C7,(JZ7),($BC)))
local texttag tt
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetEventDamageSource()==DA8 then
set tt=CreateTextTag()
call BO7(I2S(DY8),DY8,J67,.03,$7F,$7F,$FF,$FF)
call SetTextTagText(tt,"+"+I2S(R2I(YU9)),.025)
call SetTextTagPosUnit(tt,J67,$A)
call SetTextTagColor(tt,$FF,0,0,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,2)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,2)
if IsUnitVisible(J67,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
call D38(CP7,J67,1,YU9)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
set tt=null
return false
endfunction
function U0D takes nothing returns nothing
local integer DB8=GetUnitAbilityLevel(GetTriggerUnit(),1093678389)
local integer U5D=GetRandomInt(1,DB8+1)
local unit U_9=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local location AU8=GetUnitLoc(U_9)
local real YU9=GetRandomReal(1,$C8)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(U_9),1697656901,GetUnitX(U_9),GetUnitY(U_9),0)
if DB8==2 then
set YU9=GetRandomReal(50,$E1)
elseif DB8==3 then
set YU9=GetRandomReal(75,$FA)
elseif DB8==4 then
set YU9=GetRandomReal(100,275)
endif
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function U1D))
call SaveUnitHandle(C7,(JZ7),(2),(U_9))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveReal(C7,(JZ7),(20),((YU9)*1.))
if(DB8==4)then
set U5D=GetRandomInt(2,4)
endif
call SaveInteger(C7,(JZ7),($BC),(U5D))
call Z27(DA8,1093678165)
call SetUnitAbilityLevel(DA8,1093678165,U5D)
call IssueTargetOrderById(DA8,$D007F,J67)
set t=null
endfunction
function KK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ULD))
call TriggerAddAction(t,function U0D)
endfunction
function U2D takes nothing returns boolean
return GetLearnedSkill()==1095263841 and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function U_D takes nothing returns nothing
if(UnitHasBuffBJ(GetTriggerUnit(),1112504171))then
call UnitRemoveAbility(GetTriggerUnit(),1112504171)
endif
call DisableTrigger(DF)
endfunction
function NF8 takes nothing returns nothing
set DF=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DF,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(DF,Condition(function U2D))
call TriggerAddAction(DF,function U_D)
endfunction
function V4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CB9=(LoadUnitHandle(C7,(YY7),(2)))
local real V7D=GetUnitState(CB9,UNIT_STATE_LIFE)
set LP4="V4D"
call UnitRemoveAbility(CB9,1093751344)
call UnitRemoveAbility(CB9,1110459445)
call D28(CB9,0)
call E48(CB9,0)
call SetUnitState(CB9,UNIT_STATE_LIFE,V7D)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
set t=null
set CB9=null
return false
endfunction
function V8D takes nothing returns nothing
local unit CB9=GetTriggerUnit()
local unit CW9=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
local integer O87=GetUnitAbilityLevel(CB9,1093678161)
local real V9D=GetUnitState(CW9,UNIT_STATE_LIFE)
local real V7D=GetUnitState(CB9,UNIT_STATE_LIFE)
local integer VDD=R2I((.035+.015*O87)*V9D)
local integer VED=R2I((.35+.15*O87)*V9D)
set LP4="V8D"
call D28(CB9,VDD)
call E48(CB9,VED)
call Z27(CB9,1093751344)
call SetUnitState(CW9,UNIT_STATE_LIFE,1)
call D38(CB9,CW9,2,20)
call D38(CB9,CW9,1,20)
call D38(CB9,CW9,3,20)
call SetUnitState(CB9,UNIT_STATE_LIFE,V7D+VED)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",CW9,"chest"))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call TriggerRegisterUnitEvent(t,CB9,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,35,false)
call TriggerAddCondition(t,Condition(function V4D))
set CB9=null
set CW9=null
set t=null
endfunction
function VFD takes nothing returns boolean
if GetSpellAbilityId()==1093678161 and GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)>.5 and OI7(GetSpellTargetUnit())==false then
call V8D()
endif
return false
endfunction
function NG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VFD))
set t=null
endfunction
function VGD takes integer x returns boolean
return x==1093808454 or x==1093808455 or x==1093743695 or x==1093684805 or x==1093743695 or x==1093747504 or x==1093686082
endfunction
function VHD takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1110455896)>0 and(XW7(GetSpellAbilityId())or GetSpellAbilityId()==1093685065)and VGD(GetSpellAbilityId())==false and F38(GetSpellAbilityId())==false
endfunction
function VID takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit Z47=GetTriggerUnit()
local unit x9=QA7(RP7,"Destroyer")
local integer sr=GetUnitAbilityLevel(x9,1093683526)
set LP4="VID"
if GetRandomInt(1,100)<=sr*$A and m9(Z47,x9,$578)then
call SetUnitState(Z47,UNIT_STATE_MANA,GetUnitState(Z47,UNIT_STATE_MANA)+.25*GetUnitState(Z47,UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",Z47,"overhead"))
endif
set Z47=null
set x9=null
endfunction
function VJD takes unit Z47,boolean XY9 returns nothing
local integer sr=GetUnitAbilityLevel(Z47,1093683526)
local trigger t
set LP4="kKv"
if(sr==1 or XY9)then
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VHD))
call TriggerAddAction(t,function VID)
call QG7(GetHandleId(t),"Destroyer",Z47)
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
endif
if XY9 then
call UnitAddAbility(Z47,1093685068)
if sr>1 then
call UnitAddAbility(Z47,1093685069)
endif
if sr>2 then
call UnitAddAbility(Z47,1093685070)
endif
if sr>3 then
call UnitAddAbility(Z47,1093685064)
endif
else
if(sr==1)then
call Z27(Z47,1093685068)
elseif(sr==2)then
call Z27(Z47,1093685069)
elseif(sr==3)then
call Z27(Z47,1093685070)
elseif(sr==4)then
call Z27(Z47,1093685064)
endif
endif
set t=null
endfunction
function VKD takes nothing returns boolean
if GetLearnedSkill()==1093683526 and IsUnitIllusion(GetTriggerUnit())==false then
call VJD(GetTriggerUnit(),false)
endif
return false
endfunction
function NU8 takes nothing returns nothing
set RJ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RJ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(RJ,Condition(function VKD))
endfunction
function XA takes nothing returns boolean
local real d
set LP4="XA"
if GetUnitAbilityLevel(GetTriggerUnit(),1110455897)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093685065)>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110455897)
set d=.01*(5+GetUnitAbilityLevel(GetEventDamageSource(),1093685065))*(GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+100)
if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_SUMMONED)or IsUnitIllusion(GetTriggerUnit()))and GetUnitTypeId(GetTriggerUnit())!=1848651828 and GetUnitTypeId(GetTriggerUnit())!=1848652088 and GetUnitTypeId(GetTriggerUnit())!=1848652099 and GetUnitTypeId(GetTriggerUnit())!=1848652103 and GetUnitTypeId(GetTriggerUnit())!=1848651861 and GetUnitTypeId(GetTriggerUnit())!=1848651865 and GetUnitTypeId(GetTriggerUnit())!=1848651866 then
set d=d+100*GetUnitAbilityLevel(GetEventDamageSource(),1093685065)
endif
call BO7("+"+I2S(R2I(d)),1,GetTriggerUnit(),.023,$BF,64,$FF,$D8)
if(GetRandomInt(1,100)<=GetUnitAbilityLevel(GetEventDamageSource(),1093683526)*$A)and(R87(GetHandleId(GetTriggeringTrigger()),"DoneViaSpell")==false)then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_MANA,GetUnitState(GetEventDamageSource(),UNIT_STATE_MANA)+.25*GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_MANA))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCasterOverhead.mdl",GetEventDamageSource(),"overhead"))
endif
call DisableTrigger(GetTriggeringTrigger())
call D38(GetEventDamageSource(),GetTriggerUnit(),3,d)
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function Xb takes nothing returns nothing
local trigger t
local unit m5
local unit p5
set LP4="Xb"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
call QF7(GetHandleId(t),"DoneViaSpell",true)
else
call QF7(GetHandleId(t),"DoneViaSpell",false)
endif
call QG7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function XA))
endif
set t=null
set m5=null
set p5=null
endfunction
function XB takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093685065)>0 and(R87(GetHandleId(GetTriggeringTrigger()),"OrbOn")or(GZ[304+GetPlayerId(GetOwningPlayer(GetAttacker()))]))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")then
call Xb()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685065 then
call Xb()
endif
return false
endfunction
function VMD takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="kLv"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function XB))
call QG7(GetHandleId(t),"Hero",Z47)
if XY9 then
set rj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function VND takes nothing returns boolean
if GetLearnedSkill()==1093685065 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093685065)==1 then
call VMD(GetTriggerUnit(),false)
endif
return false
endfunction
function NV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NV8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VND))
set t=null
endfunction
function VOD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer VPD=R47(RP7,"StolenInt")
set LP4="VOD"
call SetHeroInt(m5,GetHeroInt(m5,false)+VPD,true)
call SetHeroInt(p5,GetHeroInt(p5,false)-VPD,true)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function VQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
set LP4="VQD"
call RK7(m5,"AstralImprisonmentState")
call DestroyEffect(Q17(RP7,"FX"))
call SetUnitInvulnerable(m5,false)
call PauseUnit(m5,false)
call ShowUnit(m5,true)
call ClearSelectionForPlayer(GetOwningPlayer(m5))
call SelectUnitAddForPlayer(m5,GetOwningPlayer(m5))
call Q77(GetHandleId(p5),"748")
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function VRD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093685066)
local integer VSD=A_7(GetHeroInt(J67,false),2+DB8*2)
local trigger t
local integer JZ7
local unit DA8=CreateUnit(GetOwningPlayer(J67),1865429305,GetUnitX(J67),GetUnitY(J67),0)
set LP4="VRD"
call UnitApplyTimedLife(DA8,1112820806,DB8+1)
if(IsUnitEnemy(J67,GetOwningPlayer(CP7)))==false or ZG7(GetSpellTargetUnit())==false then
call RI7(J67,"AstralImprisonmentState")
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SelectUnitRemoveForPlayer(J67,GetOwningPlayer(J67))
call SetUnitInvulnerable(J67,true)
call PauseUnit(J67,true)
call ShowUnit(J67,false)
call QH7(JZ7,"FX",AddSpecialEffect("Abilities\\Spells\\Demon\\DarkConversion\\ZombifyTarget.mdl",GetUnitX(J67),GetUnitY(J67)))
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
call TriggerRegisterTimerEvent(t,DB8,false)
call TriggerAddCondition(t,Condition(function VQD))
if(IsUnitEnemy(J67,GetOwningPlayer(CP7))) then
call QG7(GetHandleId(CP7),"748",J67)
call SetHeroInt(J67,GetHeroInt(J67,false)-VSD,true)
call SetHeroInt(CP7,GetHeroInt(CP7,false)+VSD,true)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
call Q97(JZ7,"StolenInt",VSD)
call TriggerRegisterTimerEvent(t,60,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VOD))
endif
endif
set DA8=null
set CP7=null
set J67=null
set t=null
endfunction
function VTD takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call VRD()
endif
return false
endfunction
function VUD takes nothing returns nothing
if IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")and GetSpellTargetUnit()!=GetTriggerUnit()then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652600))))
endif
endfunction
function VVD takes nothing returns boolean
if GetSpellAbilityId()==1093685066 then
call VUD()
endif
return false
endfunction
function NW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VTD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function VVD))
set t=null
endfunction
function VWD takes nothing returns boolean
return GetSpellAbilityId()==1093685067 or GetSpellAbilityId()==1093752407
endfunction
function VXD takes nothing returns nothing
local unit J67=GetEnumUnit()
local unit VYD=GetTriggerUnit()
local integer VZD=GetHeroInt(VYD,true)-GetHeroInt(J67,true)
local integer array VAD
local integer DB8=GetUnitAbilityLevel(VYD,1093685067)
local integer VBD=7+1*DB8
set LP4="VXD"
if DB8==0 then
set DB8=GetUnitAbilityLevel(VYD,1093752407)
set VBD=7+1*DB8+1
endif
set VAD[1]=$A
set VAD[2]=30
set VAD[3]=50
if(VZD>0)then
call UnitDamageTarget(VYD,J67,VZD*VBD,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call BO7(I2S(R2I(VZD*VBD)),3,J67,.023,$D8,30,30,$D8)
if(VZD<VAD[DB8])then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl",J67,"overhead"))
call SetUnitState(J67,UNIT_STATE_MANA,GetUnitState(J67,UNIT_STATE_MANA)*.25)
endif
endif
set J67=null
set VYD=null
endfunction
function VCD takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))then
if(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))then
return true
endif
endif
return false
endfunction
function V3D takes nothing returns nothing
local unit U_9=GetTriggerUnit()
local integer KR7=GetUnitAbilityLevel(U_9,1093685067)
local real x=GetLocationX(GetSpellTargetLoc())
local real y=GetLocationY(GetSpellTargetLoc())
local group YY9=ZI7()
local integer S19=0
local unit V6D=(QA7(GetHandleId(U_9),"748"))
set LP4="V3D"
if KR7==0 then
set KR7=GetUnitAbilityLevel(U_9,1093752407)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x,y))
loop
exitwhen S19>=360
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",x+($C8+KR7*50)*Cos(S19*bj_DEGTORAD),y+($C8+KR7*50)*Sin(S19*bj_DEGTORAD)))
set S19=S19+45
endloop
call GroupEnumUnitsInRange(YY9,x,y,300+KR7*100,Condition(function VCD))
if V6D!=null and N67(x,y,GetUnitX(V6D),GetUnitY(V6D))<(300+KR7*100)then
call SetUnitInvulnerable(V6D,false)
call GroupAddUnit(YY9,V6D)
endif
call ForGroup(YY9,function VXD)
if V6D!=null and A47(V6D)==false then
call SetUnitInvulnerable(V6D,true)
endif
call ZH7(YY9)
set U_9=null
set YY9=null
endfunction
function NX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VWD))
call TriggerAddAction(t,function V3D)
set t=null
endfunction
function VLD takes nothing returns nothing
call D38(R64,GetEnumUnit(),1,RL4)
endfunction
function V1D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=QA7(JZ7,"Target")
local unit CP7=QA7(JZ7,"Source")
local group g
local integer ZD8=R47(JZ7,"Count")
set LP4="V1D"
if GetTriggerEvalCount(t)>$C8 or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEvalCount(t)>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093685575 and GetSpellTargetUnit()==J67)then
call DestroyEffect(Q17(JZ7,"Effect"))
call Q47(JZ7)
call RN7(t)
else
set ZD8=ZD8+1
call Q97(JZ7,"Count",ZD8)
set g=ZI7()
set IM4=CP7
set R64=CP7
set RL4=1.+2.*GetUnitAbilityLevel(CP7,1093685575)
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),275,Condition(function LF7))
call GroupRemoveUnit(g,J67)
call ForGroup(g,function VLD)
call ZH7(g)
endif
set J67=null
set t=null
set CP7=null
set g=null
return false
endfunction
function V0D takes nothing returns nothing
local trigger t=CreateTrigger()
local effect fx=AddSpecialEffectTarget("war3mapImported\\NewSoulArmor.mdx",GetSpellTargetUnit(),"chest")
local integer JZ7=GetHandleId(t)
set LP4="V0D"
call BY7(CN,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call QG7(JZ7,"Source",GetTriggerUnit())
call QG7(JZ7,"Target",GetSpellTargetUnit())
call QH7(JZ7,"Effect",fx)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,GetSpellTargetUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V1D))
set t=null
set fx=null
endfunction
function V5D takes nothing returns boolean
if GetSpellAbilityId()==1093685575 then
call V0D()
endif
return false
endfunction
function OM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V5D))
set t=null
endfunction
function V2D takes unit u returns boolean
return GetUnitAbilityLevel(u,1110454858)>0 or GetUnitAbilityLevel(u,1112896368)>0 or GetUnitAbilityLevel(u,1114993524)>0 or YF7(u)
endfunction
function V_D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local integer X37
local unit p5
local unit m5
local real x1
local real y1
local real d
local real a
set LP4="V_D"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(RP7)
call RN7(t)
else
set m5=QA7(RP7,"Target")
set d=R77(RP7,"d")
set x=R77(RP7,"x")
set y=R77(RP7,"y")
set a=R77(RP7,"a")
set x1=GetUnitX(m5)+d/ $F*Cos(a)
set y1=GetUnitY(m5)+d/ $F*Sin(a)
if IsUnitType(m5,UNIT_TYPE_HERO) then
call SetUnitPosition(m5,x1,y1)
else
call SetUnitX(m5,x1)
call SetUnitY(m5,y1)
endif
if GetTriggerEvalCount(t)>$F then
set p5=QA7(RP7,"Source")
set X37=R47(RP7,"Level")
call Q47(RP7)
call RN7(t)
call D38(p5,m5,1,X37*40)
set p5=null
endif
set m5=null
endif
set t=null
return false
endfunction
function W4D takes nothing returns nothing
local trigger t
local integer RP7
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
if V2D(m5)==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function V_D))
call QD7(RP7,"x",(j0)*1.)
call QD7(RP7,"y",(K0)*1.)
call QD7(RP7,"d",(N67(j0,K0,GetUnitX(m5),GetUnitY(m5)))*1.)
call QD7(RP7,"a",(Atan2(K0-GetUnitY(m5),j0-GetUnitX(m5)))*1.)
call Q97(RP7,"Level",l0)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
endif
set t=null
set p5=null
set m5=null
endfunction
function W7D takes nothing returns nothing
local group g=ZI7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer X37=GetUnitAbilityLevel(GetTriggerUnit(),1093685573)
local real r=$96+100*X37+25
set LP4="W7D"
set IM4=GetTriggerUnit()
call BY7(LO,x,y)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Star Aura.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,r,Condition(function LX7))
set j0=x
set K0=y
set l0=X37
call ForGroup(g,function W4D)
call BW7(x,y,$C8)
call RemoveLocation(l)
call ZH7(g)
set l=null
set g=null
endfunction
function W8D takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call W7D()
endif
return false
endfunction
function W9D takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
set LP4="W9D"
if BX7(x,y)==false or(IsPointInRegion(IT4,((x)*1.),((y)*1.)))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848652619))))
endif
call RemoveLocation(l)
set l=null
endfunction
function WDD takes nothing returns boolean
if GetSpellAbilityId()==1093685573 then
call W9D()
endif
return false
endfunction
function OK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W8D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function WDD))
set t=null
endfunction
function Xq takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
set LP4="Xq"
call UnitRemoveAbility(m5,1110456151)
call UnitRemoveAbility(m5,1113746543)
call UnitRemoveAbility(m5,1110455858)
call UnitRemoveAbility(m5,1110455861)
call UnitRemoveAbility(m5,1113813619)
call UnitRemoveAbility(m5,1110454582)
call UnitRemoveAbility(m5,1110455634)
set t=null
set m5=null
return false
endfunction
function XQ takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="XQ"
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(GetTriggerUnit(),1093685815)*1.5+.5,false)
call TriggerAddCondition(t,Condition(function Xq))
call QG7(GetHandleId(t),"Target",GetSpellTargetUnit())
call BY7(bR,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
call DestroyEffect(AddSpecialEffectTarget("effects\\Surge.mdx",GetSpellTargetUnit(),"origin"))
set t=null
endfunction
function WED takes nothing returns boolean
if GetSpellAbilityId()==1093685815 then
call XQ()
endif
return false
endfunction
function ON8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="ON8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WED))
set t=null
endfunction
function WFD takes boolean WGD returns boolean
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit WHD=QA7(RP7,"Wall")
local unit m5=GetTriggerUnit()
local unit XS=CreateUnit(GetOwningPlayer(WHD),1697657171,GetUnitX(m5),GetUnitY(m5),0)
local unit ZO7=G7[GetPlayerId(GetOwningPlayer(WHD))]
local integer DB8=GetUnitAbilityLevel(ZO7,1093685579)
set LP4="WallOfReplica_Detected_Main"
if DB8==0 then
set DB8=GetUnitAbilityLevel(ZO7,1093808465)
endif
call SetUnitAbilityLevel(WHD,1093685580,DB8)
set PN4=GetUnitX(m5)
set PO4=GetUnitY(m5)
set PP4=m5
if WGD then
call SetUnitAbilityLevel(WHD,1093685580,3+DB8)
call IssueTargetOrderById(WHD,$D0132,m5)
call D38(WHD,m5,1,$96)
else
call IssueTargetOrderById(WHD,$D0132,m5)
call D38(WHD,m5,1,$96)
endif
call UnitApplyTimedLife(XS,1112820806,.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(m5),GetUnitY(m5)))
set WHD=null
set m5=null
set XS=null
return false
endfunction
function WID takes nothing returns boolean
local group g
set LP4="WID"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(QA7(GetHandleId(GetTriggeringTrigger()),"Wall")))and FA8(GetUnitTypeId(GetFilterUnit()))==false then
set g=QL7(GetHandleId(GetTriggeringTrigger()),"g1")
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call WFD(false)
endif
endif
set g=null
return false
endfunction
function WJD takes nothing returns boolean
local group g
set LP4="WJD"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(QA7(GetHandleId(GetTriggeringTrigger()),"Wall")))and FA8(GetUnitTypeId(GetFilterUnit()))==false then
set g=QL7(GetHandleId(GetTriggeringTrigger()),"g1")
if IsUnitInGroup(GetFilterUnit(),g)==false then
call GroupAddUnit(g,GetFilterUnit())
call WFD(true)
endif
endif
set g=null
return false
endfunction
function WallOfReplica_FindSource takes nothing returns nothing
if GetPlayerId(GetOwningPlayer(GetEnumUnit()))==IG4 then
call GroupAddUnit(IP4,GetEnumUnit())
endif
endfunction
function WKD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
set LP4="XT"
call GroupRemoveUnit(QL7(JZ7,"g1"),QA7(JZ7,"imagesource"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call Q47(JZ7)
call DisableTrigger(t)
set t=null
return false
endfunction
function WMD takes nothing returns boolean
local unit WHD=GetSummoningUnit()
local unit YX8=GetSummonedUnit()
local integer JZ7=GetHandleId(WHD)
local integer WND=R47(JZ7,"NumOfImages")
local trigger t=CreateTrigger()
set LP4="WMD"
call SetUnitVertexColor(YX8,$FF,$FF,$FF,100)
call TriggerRegisterUnitEvent(t,YX8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WKD))
call QP7(GetHandleId(t),"g1",QL7(JZ7,"g1"))
call QG7(GetHandleId(t),"imagesource",PP4)
set WND=WND+1
call Q97(JZ7,"NumOfImages",WND)
call QG7(JZ7,"Illusion"+I2S(WND),YX8)
call QI7(JZ7,"IllusionTrig"+I2S(WND),t)
call SetUnitX(YX8,PN4)
call SetUnitY(YX8,PO4)
set WHD=null
set YX8=null
set t=null
return false
endfunction
function WOD takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Xw takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer v5=GetHandleId(t)
local trigger XW=Q67(v5,"mastert")
local integer tK=GetHandleId(XW)
local trigger v7=Q67(tK,"DetectTrig")
local group Xx=QL7(tK,"g1")
local group XX=QL7(tK,"g2")
local unit WPD=QA7(tK,"Wall")
local integer Xy=GetHandleId(WPD)
local integer Xv=R47(Xy,"NumOfImages")
local integer i
local unit u
set LP4="Xw"
call ForGroup(XX,function WOD)
set i=1
loop
exitwhen i>Xv
set u=QA7(Xy,"Illusion"+I2S(i))
call Q47(GetHandleId(Q67(Xy,"IllusionTrig"+I2S(i))))
call RN7(Q67(Xy,"IllusionTrig"+I2S(i)))
if IsUnitIllusion(u)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",GetUnitX(u),GetUnitY(u)))
call RemoveUnit(u)
endif
set i=i+1
endloop
call Q47(v5)
call Q47(tK)
call Q47(Xy)
call RemoveUnit(WPD)
call ZH7(Xx)
call ZH7(XX)
call RN7(XW)
call RN7(v7)
call RN7(t)
set t=null
set XW=null
set v7=null
set Xx=null
set XX=null
set WPD=null
set u=null
return false
endfunction
function WQD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real WRD=GetUnitFacing(Z47)-45
local unit WPD=CreateUnit(GetOwningPlayer(Z47),1747988559,x,y,WRD)
local unit u
local real WT9
local real WU9
local integer i
local real Xk
local trigger t=CreateTrigger()
local group g1=ZI7()
local integer RP7=GetHandleId(t)
local group g2=ZI7()
local trigger XW=t
local integer DB8=GetUnitAbilityLevel(Z47,1093685579)
local boolean WGD=false
set LP4="WQD"
if DB8==0 then
set WGD=true
set DB8=GetUnitAbilityLevel(Z47,1093808465)
endif
call SetUnitAbilityLevel(WPD,1093685580,DB8)
call BY7(hR,x,y)
call QP7(RP7,"g1",g1)
call QP7(GetHandleId(WPD),"g1",g1)
call QP7(RP7,"g2",g2)
call QG7(RP7,"Wall",WPD)
call Q97(GetHandleId(WPD),"NumOfImages",0)
set i=0
loop
exitwhen i>39
set WT9=x+(500-25*i)*Cos((WRD-45)*bj_DEGTORAD)
set WU9=y+(500-25*i)*Sin((WRD-45)*bj_DEGTORAD)
set u=CreateUnit(GetOwningPlayer(Z47),1747988560,WT9,WU9,WRD)
call SetUnitPathing(u,false)
call SetUnitX(u,WT9)
call SetUnitY(u,WU9)
call GroupAddUnit(g2,u)
call TriggerRegisterUnitInRange(t,u,17,Condition(function WE7))
set i=i+1
endloop
if WGD then
call TriggerAddCondition(t,Condition(function WJD))
else
call TriggerAddCondition(t,Condition(function WID))
endif
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,WPD,EVENT_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function WMD))
call QI7(RP7,"DetectTrig",t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$F*DB8,false)
call TriggerAddCondition(t,Condition(function Xw))
call QI7(GetHandleId(t),"mastert",XW)
call RemoveLocation(l)
set Z47=null
set l=null
set u=null
set t=null
set XW=null
set g1=null
set g2=null
set WPD=null
endfunction
function WSD takes nothing returns boolean
if GetSpellAbilityId()==1093685579 or GetSpellAbilityId()==1093808465 then
call WQD()
endif
return false
endfunction
function OO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WSD))
set t=null
endfunction
function WTD takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Y24)==false and Y57(GetEnumUnit())==false then
call GroupAddUnit(Y24,GetEnumUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),Y_4,false)
call CA7(GetEnumUnit(),Y_4,1,3,1110455633)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl",GetEnumUnit(),"overhead"))
endif
endfunction
function WUD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
local real x2=(LoadReal(C7,(JZ7),(66)))
local real y2=(LoadReal(C7,(JZ7),(67)))
local real a=(LoadReal(C7,(JZ7),($89)))
local integer ZD8=GetTriggerEvalCount(t)
local real x=GetUnitX(ZO7)
local real y=GetUnitY(ZO7)
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local group g=ZI7()
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local integer DB8=GetUnitAbilityLevel(ZO7,1093684299)
set LP4="WUD"
if N67(x,y,x2,y2)<=NU then
set x=x2
set y=y2
else
set x=AY7(WN9+65*Cos(a*bj_DEGTORAD))
set y=AZ7(WO9+65*Sin(a*bj_DEGTORAD))
endif
if DB8==1 then
set Y_4=1093810497
elseif DB8==2 then
set Y_4=1093810489
elseif DB8==3 then
set Y_4=1093810498
elseif DB8==4 then
set Y_4=1093810488
endif
set IM4=ZO7
set Y24=DND
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LF7))
call ForGroup(g,function WTD)
call ZH7(g)
call SaveReal(C7,(JZ7),(23),((x)*1.))
call SaveReal(C7,(JZ7),(24),((y)*1.))
call SetUnitPosition(ZO7,x,y)
if(x==x2 and y==y2)or ZD8>40 then
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
call IssueImmediateOrderById(DA8,$D0080)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitAnimation(ZO7,"stand")
call SetUnitPathing(ZO7,true)
call SetUnitInvulnerable(ZO7,false)
if GetUnitTypeId(ZO7)==1160786520 then
call SetUnitVertexColor(ZO7,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(ZO7,0,$FF,$96,$FF)
endif
call RK7(ZO7,"TimeWalk|Active")
endif
set t=null
set ZO7=null
set DA8=null
return false
endfunction
function WVD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local location l
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x1=GetUnitX(ZO7)
local real y1=GetUnitY(ZO7)
local real x2
local real y2
local real a
local unit DA8=CreateUnit(GetOwningPlayer(ZO7),1697656901,x1,y1,0)
set LP4="WVD"
if GetSpellTargetUnit()==null then
set l=GetSpellTargetLoc()
else
set l=GetUnitLoc(GetSpellTargetUnit())
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=MZ7(x1,y1,x2,y2)
call RemoveLocation(l)
call SetUnitAnimationByIndex(ZO7,0)
call SetUnitPathing(ZO7,false)
call SetUnitInvulnerable(ZO7,true)
call SetUnitVertexColor(ZO7,0,0,0,$FF)
call RI7(ZO7,"TimeWalk|Active")
call SaveReal(C7,(JZ7),(66),((AY7(x2))*1.))
call SaveReal(C7,(JZ7),(67),((AZ7(y2))*1.))
call SaveReal(C7,(JZ7),(23),((x1)*1.))
call SaveReal(C7,(JZ7),(24),((y1)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveUnitHandle(C7,(JZ7),($E),(ZO7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call Z27(DA8,1093684289)
call SetUnitAbilityLevel(DA8,1093684289,GetUnitAbilityLevel(ZO7,1093684299))
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function WUD))
set ZO7=null
set l=null
set t=null
set DA8=null
endfunction
function WWD takes nothing returns boolean
if GetSpellAbilityId()==1093684299 then
call WVD()
endif
return false
endfunction
function KM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WWD))
set t=null
endfunction
function X6 takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real BD7=GetEventDamage()
set LP4="X6"
if(BD7>0)and GetUnitState(Z47,UNIT_STATE_LIFE)>1 then
if(GetRandomInt(1,100)<=(5+(5*GetUnitAbilityLevel(Z47,1093682010))))then
call SetUnitState(Z47,UNIT_STATE_LIFE,GetUnitState(Z47,UNIT_STATE_LIFE)+BD7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",Z47,"hand,left"))
endif
endif
set Z47=null
endfunction
function WXD takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="k8v"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddAction(t,function X6)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function WYD takes nothing returns boolean
if GetLearnedSkill()==1093682010 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093682010)==1 then
call WXD(GetTriggerUnit(),false)
endif
return false
endfunction
function KO8 takes nothing returns nothing
set I74=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(I74,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(I74,Condition(function WYD))
endfunction
function WZD takes nothing returns boolean
return GetSpellAbilityId()==1093683761 or GetSpellAbilityId()==1093747767
endfunction
function WAD takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit ya=QA7(RP7,"Caster")
set LP4="WAD"
call SetUnitTimeScale(ya,0)
call PauseTimer(t)
call Q47(RP7)
call DestroyTimer(t)
set t=null
set ya=null
endfunction
function WBD takes unit S4 returns boolean
local integer ID=GetUnitTypeId(S4)
return ID==1869836340 or ID==1865429048 or ID==1865429049 or ID==1700946284 or ID==1697657398 or ID==1970107511 or ID==1966092370 or ID==1162032181
endfunction
function WCD takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())!=GetOwningPlayer(L7)and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or WBD(GetFilterUnit()))
endfunction
function W3D takes nothing returns nothing
local unit W6D=GetEnumUnit()
if GetUnitTypeId(GetEnumUnit())!=1162032181 then
call PauseUnit(W6D,true)
call SetUnitTimeScale(W6D,0)
call UnitRemoveAbility(W6D,1112896364)
call UnitRemoveAbility(W6D,1112896368)
call UnitRemoveAbility(W6D,1112896372)
call RI7(W6D,"4306")
endif
set W6D=null
endfunction
function WLD takes nothing returns nothing
local unit W1D=GetEnumUnit()
if GetUnitTypeId(GetEnumUnit())!=1162032181 then
call RK7(W1D,"4306")
call PauseUnit(W1D,false)
call SetUnitTimeScale(W1D,1)
endif
set W1D=null
endfunction
function W0D takes nothing returns nothing
local unit X77=GetEnumUnit()
if(IsUnitType(X77,UNIT_TYPE_STRUCTURE)and(IsUnitEnemy(X77,GetOwningPlayer(hx)))and(IsUnitVisible(X77,GetOwningPlayer(hx)))and(hS==null))then
set hS=X77
elseif(IsUnitType(X77,UNIT_TYPE_HERO)and(IsUnitEnemy(X77,GetOwningPlayer(hx)))and(IsUnitVisible(X77,GetOwningPlayer(hx)))and((hS==null)or(IsUnitType(hS,UNIT_TYPE_STRUCTURE))or(GetUnitLifePercent(hS)>GetUnitLifePercent(X77))))then
set hS=X77
endif
set X77=null
endfunction
function W5D takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit W2D=QA7(RP7,"Caster")
local unit Z47=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
local group W_D=QL7(RP7,"Group")
local integer T8=R47(RP7,"Counter")
local real Y5=GetUnitX(W2D)
local real Z5=GetUnitY(W2D)
local boolexpr X4D=Condition(function WCD)
local group FP8=ZI7()
local integer O5=GetPlayerId(GetOwningPlayer(Z47))
local integer DY8=35+X37*5
set LP4="W5D"
if GetUnitAbilityLevel(Z47,1093747767)>0 then
set DY8=30+X37*$A
endif
call ForGroup(W_D,function WLD)
set L7=Z47
call GroupEnumUnitsInRange(FP8,Y5,Z5,425,X4D)
call GroupClear(W_D)
call GroupAddGroup(FP8,W_D)
call ForGroup(FP8,function W3D)
if(GetPlayerController(GetOwningPlayer(Z47))==MAP_CONTROL_COMPUTER)then
if(h4[16+O5]==null)then
set hS=null
set hx=Z47
call ForGroup(FP8,function W0D)
set h4[16+O5]=hS
endif
if(h4[16+O5]!=null)then
if((IsUnitAliveBJ(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110454854)==0))then
if((not IsUnitInRange(Z47,h4[16+O5],300.))and(IsUnitType(h4[16+O5],UNIT_TYPE_HERO)))then
if(not IssueTargetOrderById(Z47,$D00FA,h4[16+O5]))then
call IssueTargetOrderById(Z47,$D000F,h4[16+O5])
endif
elseif(not PP7(Z47,SU[O1]))then
call IssueTargetOrderById(Z47,$D000F,h4[16+O5])
endif
else
set h4[16+O5]=null
endif
endif
endif
call ZH7(FP8)
set T8=T8+1
call Q97(RP7,"Counter",T8)
if T8>DY8 then
set GZ[384+O5]=false
set h4[16+O5]=null
if L8==false then
call ForGroup(W_D,function WLD)
endif
call RemoveUnit(W2D)
call ZH7(W_D)
call PauseTimer(t)
call Q47(RP7)
call DestroyTimer(t)
endif
set t=null
set W2D=null
set Z47=null
set W_D=null
call DestroyBoolExpr(X4D)
set X4D=null
set FP8=null
endfunction
function X7D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,(1093683761))
local location m5=GetSpellTargetLoc()
local real Y5=GetLocationX(m5)
local real Z5=GetLocationY(m5)
local unit W2D=CreateUnit(GetOwningPlayer(Z47),(1966092364),Y5,Z5,0)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
local group W_D=ZI7()
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="X7D"
if X37==0 then
set X37=GetUnitAbilityLevel(Z47,1093747767)
endif
set GZ[384+O5]=true
set h4[16+O5]=null
set hq[512+O5]=Bz+2.+(X37)
call QG7(GetHandleId(t),"Caster",W2D)
call TimerStart(t,.8,false,function WAD)
set t=CreateTimer()
set RP7=GetHandleId(t)
call QG7(RP7,"Caster",W2D)
call QG7(RP7,"Hero",Z47)
call QP7(RP7,"Group",W_D)
call Q97(RP7,"Counter",0)
call Q97(RP7,"Level",X37)
call TimerStart(t,.1,true,function W5D)
call RemoveLocation(m5)
set Z47=null
set m5=null
set W2D=null
set t=null
set W_D=null
endfunction
function KP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KP8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WZD))
call TriggerAddAction(t,function X7D)
set t=null
endfunction
function X8D takes unit u,real X9D returns nothing
local integer d=R2I(X9D)
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer XDD
local real difference
set LP4="Wither_SetArmor"
set BN4[0]=1093808968
set BN4[1]=1093808971
set BN4[2]=1093808972
set BN4[3]=1093808970
set BN4[4]=1093808969
set BN4[5]=1093808973
if d<1 then
call UnitRemoveAbility(u,BN4[0])
call UnitRemoveAbility(u,BN4[1])
call UnitRemoveAbility(u,BN4[2])
call UnitRemoveAbility(u,BN4[3])
call UnitRemoveAbility(u,BN4[4])
call UnitRemoveAbility(u,BN4[5])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set XDD=5
set i=0
loop
exitwhen i>XDD
if b[i]==1 then
call Z27(u,BN4[i])
call SetPlayerAbilityAvailable(GetOwningPlayer(u),BN4[i],false)
else
call UnitRemoveAbility(u,BN4[i])
endif
set i=i+1
endloop
endfunction
function XED takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093808967)
local real CS8=(LoadReal(C7,(GetHandleId(J67)),(682)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(J67)),(683)))-1
set LP4="XED"
call X8D(J67,ZD8*DB8)
call SaveInteger(C7,(GetHandleId(J67)),(683),(ZD8))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
set J67=null
return false
endfunction
function XFD takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093808967)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=(LoadInteger(C7,(GetHandleId(J67)),(683)))+1
set LP4="Wither_SuccessfulAttack"
call X8D(J67,ZD8*DB8)
call SaveInteger(C7,(GetHandleId(J67)),(683),(ZD8))
call SaveReal(C7,(GetHandleId(J67)),(682),(((TimerGetElapsed(V))+BO4-.01)*1.))
call TriggerRegisterTimerEvent(t,BO4,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function XED))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",J67,"origin"))
set t=null
endfunction
function XGD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer W99=(LoadInteger(C7,(JZ7),(30)))
local unit J67=WG7(W99)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="XGD"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
if GetUnitAbilityLevel(J67,1093678162)==0 then
call XFD(CP7,J67)
endif
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function XHD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
local integer JZ7=GetHandleId(t)
set LP4="XHD"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function XGD))
call SaveInteger(C7,(JZ7),(30),(WI7(J67)))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set J67=null
set CP7=null
set t=null
endfunction
function XID takes nothing returns nothing
local unit CP7=GetAttacker()
set LP4="XID"
if((LoadInteger(C7,(GetHandleId((CP7))),((4307))))==1)==false then
call RR7(CP7,"4307",.3)
call XHD()
endif
endfunction
function XJD takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093808967)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call XID()
endif
return false
endfunction
function XKD takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="XKD"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function XJD))
call SaveUnitHandle(C7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function XMD takes nothing returns boolean
if GetLearnedSkill()==1093808967 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093808967)==1 then
call XKD()
endif
return false
endfunction
function KQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KQ8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XMD))
set t=null
endfunction
function XND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="XND"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetUnitAbilityLevel(p5,1110459186)==0 then
call Q47(RP7)
call RN7(t)
call SetUnitTimeScale(p5,1)
call Q97(GetHandleId(p5),"TimeLocked",2)
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"origin"))
endif
set t=null
set p5=null
return false
endfunction
function XOD takes unit p5 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TimeLock_RegisterUnit"
call SetUnitTimeScale(p5,0)
call Q97(GetHandleId(p5),"TimeLocked",1)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function XND))
call QG7(RP7,"Source",p5)
if(RG7(p5,"4306"))then
call D38(ST4,p5,1,30+$A*GetUnitAbilityLevel(ST4,1093679153))
endif
set t=null
endfunction
function XPD takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),1110459186)>0 and(R47(GetHandleId(GetFilterUnit()),"TimeLocked")==1)==false then
call XOD(GetFilterUnit())
endif
return false
endfunction
function XQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local group g=ZI7()
set LP4="XQD"
set ST4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),450,Condition(function XPD))
call ZH7(g)
set t=null
set p5=null
set g=null
return false
endfunction
function XRD takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TimeLock"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function XQD))
call QG7(RP7,"Source",p5)
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function XSD takes nothing returns boolean
if GetLearnedSkill()==1093679153 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093679153)==1 then
call XRD(GetTriggerUnit(),false)
endif
return false
endfunction
function KN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KN8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function XSD))
set t=null
endfunction
function XTD takes unit MQ7 returns boolean
return(GetUnitTypeId(MQ7)==1211117641 or GetUnitTypeId(MQ7)==1211117642 or GetUnitTypeId(MQ7)==GetUnitTypeId(GetTriggerUnit()))and GetUnitState(MQ7,UNIT_STATE_LIFE)>.5 and GetOwningPlayer(MQ7)==GetOwningPlayer(GetTriggerUnit())
endfunction
function XUD takes nothing returns boolean
return GetSpellAbilityId()==1093684792
endfunction
function XVD takes nothing returns boolean
return XTD(GetFilterUnit())
endfunction
function XWD takes nothing returns nothing
local unit XXD=GetEnumUnit()
local real yg=BF7(XXD,Y9)
set LP4="XWD"
if yg<E8 then
set E8=yg
set L7=XXD
endif
set XXD=null
endfunction
function XYD takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)!=null
endfunction
function XZD takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",GetEnumUnit(),"origin"))
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),E8,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
endfunction
function XAD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local location CR9
local real x
local real y
local real LN9=GetUnitX(p5)
local real LO9=GetUnitY(p5)
local group YY9
local boolexpr NJD
local boolean XBD=false
set LP4="XAD"
if J67!=null and XTD(J67)then
set x=GetUnitX(J67)
set y=GetUnitY(J67)
set XBD=true
else
set NJD=Condition(function XVD)
set YY9=ZI7()
call GroupEnumUnitsInRange(YY9,0,0,$F423F,NJD)
if J67!=null then
set CR9=GetUnitLoc(J67)
else
set CR9=GetSpellTargetLoc()
endif
set L7=FirstOfGroup(YY9)
if L7!=null then
set XBD=true
call GroupRemoveUnit(YY9,L7)
set E8=BF7(L7,CR9)
set Y9=CR9
call ForGroup(YY9,function XWD)
set J67=L7
set x=GetUnitX(J67)
set y=GetUnitY(J67)
endif
call ZH7(YY9)
call DestroyBoolExpr(NJD)
call RemoveLocation(CR9)
endif
if XBD then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",LN9,LO9))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl",x,y))
call SetUnitX(p5,x)
call SetUnitY(p5,y)
set E8=60+GetUnitAbilityLevel(GetTriggerUnit(),(1093684792))*20
set NJD=Condition(function XYD)
set YY9=ZI7()
call GroupEnumUnitsInRange(YY9,LN9,LO9,400,NJD)
call ForGroup(YY9,function XZD)
call ZH7(YY9)
set YY9=ZI7()
call GroupEnumUnitsInRange(YY9,x,y,400,NJD)
call ForGroup(YY9,function XZD)
call ZH7(YY9)
call DestroyBoolExpr(NJD)
endif
call DestroyBoolExpr(NJD)
set p5=null
set J67=null
set CR9=null
set YY9=null
set NJD=null
endfunction
function yj takes nothing returns nothing
call SetUnitAnimationByIndex(QA7(GetHandleId(GetExpiredTimer()),"UnitVar"),2)
endfunction
function XCD takes nothing returns nothing
local timer t=CreateTimer()
set LP4="XCD"
call SetUnitAnimationByIndex(GetTriggerUnit(),2)
call QG7(GetHandleId(t),"UnitVar",GetTriggerUnit())
call TimerStart(t,1,false,function yj)
set t=null
endfunction
function O78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O78"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function XUD))
call TriggerAddAction(t,function XCD)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XUD))
call TriggerAddAction(t,function XAD)
set t=null
endfunction
function X3D takes nothing returns boolean
return GetSpellAbilityId()==1093684802
endfunction
function X6D takes nothing returns boolean
return(Y57(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and(LG7(GetFilterUnit())==false or IsUnitVisible(GetFilterUnit(),GetOwningPlayer(L7)))and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitTypeId(GetFilterUnit())!=1848651852)!=null
endfunction
function XLD takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,E8,Z9,0)
set LP4="XLD"
call Z27(oA,1093684803)
call IssueTargetOrderById(oA,$D008A,GetEnumUnit())
set oA=null
endfunction
function X1D takes unit IJ,real x,real y returns nothing
local boolexpr hP=Condition(function X6D)
local group FP8=ZI7()
set LP4="Trap_Ensnare"
set L7=IJ
call GroupEnumUnitsInRange(FP8,x,y,$F5,hP)
set E8=x
set Z9=y
call ForGroup(FP8,function XLD)
call ZH7(FP8)
call DestroyBoolExpr(hP)
set hP=null
set FP8=null
endfunction
function X0D takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit IJ=QA7(RP7,"Projectile")
local real hN=R77(RP7,"TargetX")
local real ho=R77(RP7,"TargetY")
local real RK=R77(RP7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real Il=GetUnitX(IJ)+30*Cos(RK)
local real IL=GetUnitY(IJ)+30*Sin(RK)
set LP4="X0D"
if(Il-hN)*(Il-hN)+(IL-ho)*(IL-ho)<$4B0 then
call SetUnitX(IJ,hN)
call SetUnitY(IJ,ho)
call X1D(IJ,hN,ho)
call PauseTimer(t)
call Q47(RP7)
call KillUnit(IJ)
call DestroyTimer(t)
else
call SetUnitX(IJ,Il)
call SetUnitY(IJ,IL)
endif
set t=null
set IJ=null
endfunction
function X5D takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location sy=GetSpellTargetLoc()
local real hN=AY7(GetLocationX(sy))
local real ho=AZ7(GetLocationY(sy))
local real iN=AY7(GetUnitX(Z47))
local real io=AZ7(GetUnitY(Z47))
local unit IJ=CreateUnit(GetOwningPlayer(Z47),1747988547,iN,io,0)
local real RK=Atan2(ho-io,hN-iN)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
set LP4="X5D"
call SetUnitScale(IJ,2,2,2)
call QG7(RP7,"Projectile",IJ)
call QD7(RP7,"TargetX",hN)
call QD7(RP7,"TargetY",ho)
call QD7(RP7,"Angle",RK)
call TimerStart(t,.035,true,function X0D)
call RemoveLocation(sy)
set sy=null
set IJ=null
set Z47=null
set t=null
endfunction
function O88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O88"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X3D))
call TriggerAddAction(t,function X5D)
set t=null
endfunction
function X2D takes unit u returns boolean
return GetUnitTypeId(u)==1211117641 or GetUnitTypeId(u)==1211117642
endfunction
function X_D takes unit MQ7 returns boolean
return GetUnitTypeId(MQ7)==1211117641 or GetUnitTypeId(MQ7)==1211117642
endfunction
function DoubleTrouble_IsKoboldCondition takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(L7)and GetFilterUnit()!=L7 and(GetUnitTypeId(GetFilterUnit())==1211117641 or GetUnitTypeId(GetFilterUnit())==1211117642)
endfunction
function DoubleTrouble_UnshareXPCondition takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(L7))and X_D(GetFilterUnit())==false)!=null
endfunction
function DoubleTrouble_UnshareXPGive takes nothing returns nothing
call AddHeroXP(GetEnumUnit(),D8,true)
endfunction
function Y4D takes nothing returns nothing
local integer yp=GetHandleId(GetTriggeringTrigger())
local player j8=QC7(yp,"PlayerVar")
local integer yP=GetHandleId(j8)
local unit GX8=QA7(yP,"Kobold0")
local unit GY8=QA7(yP,"Kobold1")
local unit GZ8=QA7(yP,"Kobold2")
local unit GA8=QA7(yP,"Kobold3")
local unit GB8=QA7(yP,"Kobold4")
local integer Y7D=GetUnitAbilityLevel(GX8,1096904043)*2
local integer Y8D=GetHeroAgi(GX8,false)
local integer Y9D=GetHeroAgi(GX8,true)-Y8D-Y7D
local integer YDD=GetHeroStr(GX8,false)
local integer YED=GetHeroStr(GX8,true)-YDD-Y7D
local integer YFD=GetHeroInt(GX8,false)
local integer YGD=GetHeroInt(GX8,true)-YFD-Y7D
local real YHD=.3
local integer YID
local integer YJD
local integer YKD
if A74 then
set YHD=1.
endif
set YID=R2I(Y8D+Y9D*YHD)
set YJD=R2I(YDD+YED*YHD)
set YKD=R2I(YFD+YGD*YHD)
if GetUnitState(GX8,UNIT_STATE_LIFE)>1 then
if GY8!=null then
call SetHeroAgi(GY8,YID,false)
call SetHeroStr(GY8,YJD,false)
call SetHeroInt(GY8,YKD,false)
endif
if GZ8!=null then
call SetHeroAgi(GZ8,YID,false)
call SetHeroStr(GZ8,YJD,false)
call SetHeroInt(GZ8,YKD,false)
endif
if GA8!=null then
call SetHeroAgi(GA8,YID,false)
call SetHeroStr(GA8,YJD,false)
call SetHeroInt(GA8,YKD,false)
endif
if GB8!=null then
call SetHeroAgi(GB8,YID,false)
call SetHeroStr(GB8,YJD,false)
call SetHeroInt(GB8,YKD,false)
endif
endif
set j8=null
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
endfunction
function YMD takes nothing returns nothing
local integer YND=GetHandleId(GetTriggeringTrigger())
local player NID=QC7(YND,"PlayerVar")
local integer YOD=GetHandleId(NID)
local unit GX8=QA7(YOD,"Kobold0")
local unit GY8=QA7(YOD,"Kobold1")
local unit GZ8=QA7(YOD,"Kobold2")
local unit GA8=QA7(YOD,"Kobold3")
local unit GB8=QA7(YOD,"Kobold4")
local integer YPD=GetHandleId(GX8)
local integer YQD=GetHandleId(GY8)
local integer YRD=GetHandleId(GZ8)
local integer YSD=GetHandleId(GA8)
local integer YTD=GetHandleId(GB8)
local integer YUD=R47(YPD,"XPEarned")
local integer YVD=R47(YPD,"XPGiven")
local integer YWD=R47(YQD,"XPEarned")
local integer YXD=R47(YQD,"XPGiven")
local integer YYD=R47(YRD,"XPEarned")
local integer YZD=R47(YRD,"XPGiven")
local integer YAD=R47(YSD,"XPEarned")
local integer YBD=R47(YSD,"XPGiven")
local integer YCD=R47(YTD,"XPEarned")
local integer Y3D=R47(YTD,"XPGiven")
local integer Y6D=GetHeroXP(GX8)
local integer YLD=GetHeroXP(GY8)
local integer Y1D=GetHeroXP(GZ8)
local integer Y0D=GetHeroXP(GA8)
local integer Y5D=GetHeroXP(GB8)
local integer Y2D=Y6D-YUD-YVD
local integer Y_D=YLD-YWD-YXD
local integer Z4D=Y1D-YYD-YZD
local integer Z7D=Y0D-YAD-YBD
local integer Z8D=Y5D-YCD-Y3D
set LP4="YMD"
if GetUnitState(GX8,UNIT_STATE_LIFE)>1 then
set YUD=YUD+Y2D
set YWD=YWD+Y_D
set YYD=YYD+Z4D
set YAD=YAD+Z7D
set YCD=YCD+Z8D
if GX8!=null then
call AddHeroXP(GY8,Y2D,false)
if GetHeroXP(GY8)!=YLD then
set YXD=YXD+Y2D
endif
call AddHeroXP(GZ8,Y2D,false)
if GetHeroXP(GZ8)!=Y1D then
set YZD=YZD+Y2D
endif
call AddHeroXP(GA8,Y2D,false)
if GetHeroXP(GA8)!=Y0D then
set YBD=YBD+Y2D
endif
call AddHeroXP(GB8,Y2D,false)
if GetHeroXP(GB8)!=Y5D then
set Y3D=Y3D+Y2D
endif
endif
if GY8!=null then
call AddHeroXP(GX8,Y_D,false)
if GetHeroXP(GX8)!=Y6D then
set YVD=YVD+Y_D
endif
call AddHeroXP(GZ8,Y_D,false)
if GetHeroXP(GZ8)!=Y1D then
set YZD=YZD+Y_D
endif
call AddHeroXP(GA8,Y_D,false)
if GetHeroXP(GA8)!=Y0D then
set YBD=YBD+Y_D
endif
call AddHeroXP(GB8,Y_D,false)
if GetHeroXP(GB8)!=Y5D then
set Y3D=Y3D+Y_D
endif
endif
if GZ8!=null then
call AddHeroXP(GY8,Z4D,false)
if GetHeroXP(GY8)!=YLD then
set YXD=YXD+Z4D
endif
call AddHeroXP(GX8,Z4D,false)
if GetHeroXP(GX8)!=Y6D then
set YVD=YVD+Z4D
endif
call AddHeroXP(GA8,Z4D,false)
if GetHeroXP(GA8)!=Y0D then
set YBD=YBD+Z4D
endif
call AddHeroXP(GB8,Z4D,false)
if GetHeroXP(GB8)!=Y5D then
set Y3D=Y3D+Z4D
endif
endif
if GA8!=null then
call AddHeroXP(GY8,Z7D,false)
if GetHeroXP(GY8)!=YLD then
set YXD=YXD+Z7D
endif
call AddHeroXP(GZ8,Z7D,false)
if GetHeroXP(GZ8)!=Y1D then
set YZD=YZD+Z7D
endif
call AddHeroXP(GX8,Z7D,false)
if GetHeroXP(GX8)!=Y6D then
set YVD=YVD+Z7D
endif
call AddHeroXP(GB8,Z7D,false)
if GetHeroXP(GB8)!=Y5D then
set Y3D=Y3D+Z7D
endif
endif
if GB8!=null then
call AddHeroXP(GY8,Z8D,false)
if GetHeroXP(GY8)!=YLD then
set YXD=YXD+Z8D
endif
call AddHeroXP(GZ8,Z8D,false)
if GetHeroXP(GZ8)!=Y1D then
set YZD=YZD+Z8D
endif
call AddHeroXP(GX8,Z8D,false)
if GetHeroXP(GX8)!=Y6D then
set YVD=YVD+Z8D
endif
call AddHeroXP(GA8,Z8D,false)
if GetHeroXP(GA8)!=Y0D then
set YBD=YBD+Z8D
endif
endif
call Q97(YPD,"XPEarned",YUD)
call Q97(YPD,"XPGiven",YVD)
call Q97(YQD,"XPEarned",YWD)
call Q97(YQD,"XPGiven",YXD)
call Q97(YRD,"XPEarned",YYD)
call Q97(YRD,"XPGiven",YZD)
call Q97(YSD,"XPEarned",YAD)
call Q97(YSD,"XPGiven",YBD)
call Q97(YTD,"XPEarned",YCD)
call Q97(YTD,"XPGiven",Y3D)
endif
set NID=null
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
endfunction
function Z9D takes nothing returns boolean
return X_D(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function ZDD takes nothing returns nothing
local unit Y98=GetTriggerUnit()
local integer RP7=GetHandleId(GetOwningPlayer(Y98))
local unit GX8=QA7(RP7,"Kobold0")
local unit GY8=QA7(RP7,"Kobold1")
local unit GZ8=QA7(RP7,"Kobold2")
local unit GA8=QA7(RP7,"Kobold3")
local unit GB8=QA7(RP7,"Kobold4")
local boolean XFv=false
set LP4="ZDD"
call DisableTrigger(DS)
if GX8!=null and GX8!=Y98 then
call KillUnit(GX8)
endif
if GY8!=null and GY8!=Y98 then
call KillUnit(GY8)
endif
if GZ8!=null and GZ8!=Y98 then
call KillUnit(GZ8)
endif
if GA8!=null and GA8!=Y98 then
call KillUnit(GA8)
endif
if GB8!=null and GB8!=Y98 then
call KillUnit(GB8)
endif
call EnableTrigger(DS)
set Y98=null
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
endfunction
function ZED takes nothing returns boolean
return X_D(GetTriggerUnit())and IsUnitIllusion(GetTriggerUnit())==false
endfunction
function ZFD takes unit UR7,unit ZO7 returns nothing
local trigger t=Q67(GetHandleId(GetOwningPlayer(ZO7)),"Kobold|ItemTrigger")
local integer i=0
local boolean ZGD=false
local boolean ZHD=false
local boolean ZID=false
local boolean ZJD=false
local boolean ZKD=false
local boolean ZMD=false
local boolean ZND=false
local boolean ZOD=false
local boolean ZPD=false
set LP4="DoubleTrouble_GiveItem"
call DisableTrigger(t)
call DisableTrigger(H84)
loop
exitwhen i>5
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[EV]then
set ZGD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[E6]then
set ZHD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[H6]then
set ZID=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[G6]then
set ZJD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[F6]then
set ZKD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[DR4]then
set ZMD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==SU[F44]then
set ZND=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==(SU[YB])then
set ZOD=true
endif
if GetItemTypeId(UnitItemInSlot(ZO7,i))==(SU[LB])then
set ZPD=true
endif
set i=i+1
endloop
if ZPD then
call UnitAddItem(UR7,CreateItem((SU[LB]),0,0))
elseif ZOD then
call UnitAddItem(UR7,CreateItem((SU[YB]),0,0))
elseif ZND then
call UnitAddItem(UR7,CreateItem(SU[F44],0,0))
elseif ZMD then
call UnitAddItem(UR7,CreateItem(SU[DR4],0,0))
elseif ZKD then
call UnitAddItem(UR7,CreateItem(SU[F6],0,0))
elseif ZJD then
call UnitAddItem(UR7,CreateItem(SU[G6],0,0))
elseif ZID then
call UnitAddItem(UR7,CreateItem(SU[H6],0,0))
elseif ZHD then
call UnitAddItem(UR7,CreateItem(SU[E6],0,0))
elseif ZGD then
call UnitAddItem(UR7,CreateItem(SU[EV],0,0))
endif
call EnableTrigger(t)
call EnableTrigger(H84)
set t=null
endfunction
function ZQD takes nothing returns nothing
local unit GC8=GetTriggerUnit()
local integer i=0
local boolean ZGD=false
local boolean ZHD=false
local boolean ZID=false
local boolean ZJD=false
local boolean ZKD=false
local boolean ZMD=false
local boolean ZND=false
local boolean ZOD=false
local boolean ZPD=false
local integer YOD=GetHandleId(GetOwningPlayer(GC8))
local unit GX8=QA7(YOD,"Kobold0")
local unit GY8=QA7(YOD,"Kobold1")
local unit GZ8=QA7(YOD,"Kobold2")
local unit GA8=QA7(YOD,"Kobold3")
local unit GB8=QA7(YOD,"Kobold4")
local integer ZRD
local boolean ZSD=false
local integer ZTD=0
local integer ZUD=0
local integer ZVD=0
local integer ZWD=0
local integer ZXD=0
local integer ZYD=0
local integer ZZD=0
local integer ZAD=0
local integer ZBD=0
set LP4="ZQD"
call DisableTrigger(GetTriggeringTrigger())
if GetUnitTypeId(GC8)==1211117642 then
call UnitRemoveItemFromSlot(GC8,0)
call EnableTrigger(GetTriggeringTrigger())
return
endif
if not(GetItemTypeId(GetManipulatedItem())==SU[EV]or GetItemTypeId(GetManipulatedItem())==SU[E6]or GetItemTypeId(GetManipulatedItem())==SU[H6]or GetItemTypeId(GetManipulatedItem())==SU[G6]or GetItemTypeId(GetManipulatedItem())==SU[F6]or GetItemTypeId(GetManipulatedItem())==SU[DR4]or GetItemTypeId(GetManipulatedItem())==SU[F44]or GetItemTypeId(GetManipulatedItem())==(SU[YB])or GetItemTypeId(GetManipulatedItem())==(SU[LB]))then
call EnableTrigger(GetTriggeringTrigger())
return
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
set ZSD=true
endif
loop
exitwhen i>5
set ZRD=GetItemTypeId(UnitItemInSlot(GC8,i))
if ZRD==SU[EV]then
set ZTD=ZTD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZTD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZGD=true
endif
endif
if ZRD==SU[E6]then
set ZUD=ZUD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZUD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZHD=true
endif
endif
if ZRD==SU[H6]then
set ZVD=ZVD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZVD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZID=true
endif
endif
if ZRD==SU[G6]then
set ZWD=ZWD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZWD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZJD=true
endif
endif
if ZRD==SU[F6]then
set ZXD=ZXD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZXD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZKD=true
endif
endif
if ZRD==SU[DR4]then
set ZYD=ZYD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZYD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZMD=true
endif
endif
if ZRD==(SU[F44])then
set ZZD=ZZD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZZD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZND=true
endif
endif
if ZRD==(SU[YB])then
set ZAD=ZAD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZAD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZOD=true
endif
endif
if ZRD==(SU[LB])then
set ZBD=ZBD+1
if(not(ZSD and ZRD==GetItemTypeId(GetManipulatedItem())))or(ZBD>1 and ZRD==GetItemTypeId(GetManipulatedItem()))then
set ZPD=true
endif
endif
set i=i+1
endloop
call RemoveItem(UnitRemoveItemFromSlot(GY8,0))
if GZ8!=null then
call RemoveItem(UnitRemoveItemFromSlot(GZ8,0))
endif
if GA8!=null then
call RemoveItem(UnitRemoveItemFromSlot(GA8,0))
endif
if GB8!=null then
call RemoveItem(UnitRemoveItemFromSlot(GB8,0))
endif
if ZPD then
call UnitAddItem(GY8,CreateItem((SU[LB]),0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem((SU[LB]),0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem((SU[LB]),0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[LB]),0,0))
endif
elseif ZOD then
call UnitAddItem(GY8,CreateItem((SU[YB]),0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem((SU[YB]),0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem((SU[YB]),0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[YB]),0,0))
endif
elseif ZND then
call UnitAddItem(GY8,CreateItem((SU[F44]),0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem((SU[F44]),0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem((SU[F44]),0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[F44]),0,0))
endif
elseif ZMD then
call UnitAddItem(GY8,CreateItem(SU[DR4],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[DR4],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[DR4],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[DR4]),0,0))
endif
elseif ZKD then
call UnitAddItem(GY8,CreateItem(SU[F6],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[F6],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[F6],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[F6]),0,0))
endif
elseif ZJD then
call UnitAddItem(GY8,CreateItem(SU[G6],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[G6],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[G6],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[G6]),0,0))
endif
elseif ZID then
call UnitAddItem(GY8,CreateItem(SU[H6],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[H6],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[H6],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[H6]),0,0))
endif
elseif ZHD then
call UnitAddItem(GY8,CreateItem(SU[E6],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[E6],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[E6],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[E6]),0,0))
endif
elseif ZGD then
call UnitAddItem(GY8,CreateItem(SU[EV],0,0))
if GZ8!=null then
call UnitAddItem(GZ8,CreateItem(SU[EV],0,0))
endif
if GA8!=null then
call UnitAddItem(GA8,CreateItem(SU[EV],0,0))
endif
if GB8!=null then
call UnitAddItem(GB8,CreateItem((SU[EV]),0,0))
endif
endif
call EnableTrigger(GetTriggeringTrigger())
set GC8=null
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
endfunction
function ZCD takes unit Z3D,integer Z6D returns nothing
local integer yP=GetHandleId(GetOwningPlayer(Z3D))
local unit GX8=QA7(yP,"Kobold0")
local unit GY8=QA7(yP,"Kobold1")
local unit GZ8=QA7(yP,"Kobold2")
local unit GA8=QA7(yP,"Kobold3")
local unit GB8=QA7(yP,"Kobold4")
set LP4="DoubleTrouble_LevelAbility"
if GX8!=null and GX8!=Z3D then
call SelectHeroSkill(GX8,Z6D)
endif
if GY8!=null and GY8!=Z3D then
call SelectHeroSkill(GY8,Z6D)
endif
if GZ8!=null and GZ8!=Z3D then
call SelectHeroSkill(GZ8,Z6D)
endif
if GA8!=null and GA8!=Z3D then
call SelectHeroSkill(GA8,Z6D)
endif
if GB8!=null and GB8!=Z3D then
call SelectHeroSkill(GB8,Z6D)
endif
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
endfunction
function ZLD takes integer N7,unit qf,unit qF returns nothing
local integer T8=1
local integer U8=GetUnitAbilityLevel(qf,N7)
set LP4="DoubleTrouble_MatchLevel"
loop
exitwhen T8>U8
call SelectHeroSkill(qF,N7)
set T8=T8+1
endloop
endfunction
function Z1D takes unit UR7,unit Z0D returns nothing
call AddHeroXP(UR7,GetHeroXP(Z0D),false)
call Q97(GetHandleId(UR7),"XPGiven",GetHeroXP(Z0D))
call Q97(GetHandleId(UR7),"XPEarned",0)
call ZLD(1093684792,Z0D,UR7)
call ZLD(1093684802,Z0D,UR7)
call ZLD(1093684791,Z0D,UR7)
call ZLD(1096904043,Z0D,UR7)
call ZLD(1093684567,Z0D,UR7)
call ZLD(1093809987,Z0D,UR7)
endfunction
function Z5D takes unit GY8,unit GZ8,integer YJ,integer Yg,integer YG returns nothing
if Yg>YG then
call SelectHeroSkill(GZ8,YJ)
elseif YG>Yg then
call SelectHeroSkill(GY8,YJ)
endif
endfunction
function Z2D takes unit GY8,unit GZ8 returns nothing
local integer y8=GetHeroXP(GY8)
local integer y9=GetHeroXP(GZ8)
local integer yW=GetHandleId(GY8)
local integer yx=GetHandleId(GZ8)
local integer yZ=R47(yW,"XPGiven")
local integer y4=R47(yx,"XPGiven")
local integer VX
set LP4="DoubleTrouble_SyncXP"
if y8>y9 then
set VX=y8-y9
call AddHeroXP(GZ8,VX,true)
if y9!=GetHeroXP(GZ8)then
call Q97(yx,"XPGiven",y4+VX)
endif
elseif y8<y9 then
set VX=y9-y8
call AddHeroXP(GY8,VX,true)
if y8!=GetHeroXP(GY8)then
call Q97(yW,"XPGiven",yZ+VX)
endif
endif
endfunction
function Z_D takes unit GY8,unit GZ8 returns nothing
local integer A4D=GetUnitAbilityLevel(GY8,1093684792)
local integer A7D=GetUnitAbilityLevel(GY8,1093684802)
local integer A8D=GetUnitAbilityLevel(GY8,1093684791)
local integer A9D=GetUnitAbilityLevel(GY8,1093684567)
local integer ADD=GetUnitAbilityLevel(GY8,1096904043)
local integer AED=GetUnitAbilityLevel(GY8,1093809987)
local integer AFD=GetUnitAbilityLevel(GZ8,1093684792)
local integer AGD=GetUnitAbilityLevel(GZ8,1093684802)
local integer AHD=GetUnitAbilityLevel(GZ8,1093684791)
local integer AID=GetUnitAbilityLevel(GZ8,1093684567)
local integer AJD=GetUnitAbilityLevel(GZ8,1096904043)
local integer AKD=GetUnitAbilityLevel(GZ8,1093809987)
set LP4="DoubleTrouble_SyncHeroesHelper"
call Z2D(GY8,GZ8)
call Z5D(GY8,GZ8,1093684792,A4D,AFD)
call Z5D(GY8,GZ8,1093684802,A7D,AGD)
call Z5D(GY8,GZ8,1093684791,A8D,AHD)
call Z5D(GY8,GZ8,1093684567,A9D,AID)
call Z5D(GY8,GZ8,1093809987,AED,AKD)
call Z5D(GY8,GZ8,1096904043,ADD,AJD)
endfunction
function AMD takes unit GY8,unit GZ8 returns nothing
if GY8!=null and GZ8!=null then
call Z_D(GY8,GZ8)
endif
endfunction
function AND takes nothing returns nothing
local integer YOD=GetHandleId(QC7(GetHandleId(GetTriggeringTrigger()),"PlayerVar"))
local unit GX8=QA7(YOD,"Kobold0")
local unit GY8=QA7(YOD,"Kobold1")
local unit GZ8=QA7(YOD,"Kobold2")
local unit GA8=QA7(YOD,"Kobold3")
local unit GB8=QA7(YOD,"Kobold4")
set LP4="AND"
call DisableTrigger(PQ4)
call AMD(GX8,GY8)
call AMD(GX8,GZ8)
call AMD(GX8,GA8)
call AMD(GX8,GB8)
call AMD(GY8,GZ8)
call AMD(GY8,GA8)
call AMD(GY8,GB8)
call AMD(GZ8,GA8)
call AMD(GZ8,GB8)
call AMD(GA8,GB8)
call EnableTrigger(PQ4)
set GX8=null
set GY8=null
set GZ8=null
set GA8=null
set GB8=null
endfunction
function AOD takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="AOD"
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddAction(t,function AND)
call QN7(GetHandleId(t),"PlayerVar",GetOwningPlayer(GetTriggerUnit()))
set t=null
endfunction
function APD takes unit CP7 returns nothing
local trigger t
set LP4="DividedWeStand_Initialize"
call QG7(GetHandleId(GetOwningPlayer(CP7)),"Kobold0",CP7)
call Q97(GetHandleId(CP7),"XPEarned",GetHeroXP(CP7))
call Q97(GetHandleId(CP7),"XPGiven",0)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddAction(t,function YMD)
call QN7(GetHandleId(t),"PlayerVar",GetOwningPlayer(CP7))
call QI7(GetHandleId(GetOwningPlayer(CP7)),"Kobold|XPTrigger",t)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddAction(t,function Y4D)
call QN7(GetHandleId(t),"PlayerVar",GetOwningPlayer(CP7))
call QI7(GetHandleId(GetOwningPlayer(CP7)),"Kobold|AttributesTrigger",t)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(t,function ZDD)
call TriggerAddCondition(t,Condition(function Z9D))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddAction(t,function ZQD)
call TriggerAddCondition(t,Condition(function ZED))
call QI7(GetHandleId(GetOwningPlayer(CP7)),"Kobold|ItemTrigger",t)
call ExecuteFunc("AOD")
set t=null
endfunction
function AQD takes unit CP7,boolean ARD returns nothing
local player NID=GetOwningPlayer(CP7)
local integer JZ7=GetHandleId(NID)
local unit UR7
set LP4="DividedWeStand_CreateNewClone"
set A44=A44+1
if A44==1 then
call APD(CP7)
endif
call TriggerExecute(Q67(GetHandleId(GetOwningPlayer(CP7)),"Kobold|XPTrigger"))
call TriggerExecute(Q67(GetHandleId(GetOwningPlayer(CP7)),"Kobold|AttributesTrigger"))
if ARD==false then
call ZCD(CP7,1093684567)
call ZCD(CP7,1093809987)
endif
set UR7=CreateUnit(GetOwningPlayer(CP7),1211117642,GetUnitX(CP7),GetUnitY(CP7),0)
call Z1D(UR7,CP7)
call ZFD(UR7,CP7)
call QG7(JZ7,"Kobold"+I2S(A44),UR7)
set UR7=null
endfunction
function ASD takes nothing returns nothing
if A74==false then
set A74=true
call DisableTrigger(PQ4)
call AQD(IM4,true)
call EnableTrigger(PQ4)
endif
endfunction
function ATD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="ATD"
if IsUnitIllusion(GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())==GetOwningPlayer(CP7)and X2D(GetTriggerUnit())then
if GetLearnedSkill()==1093684567 or GetLearnedSkill()==1093809987 then
call DisableTrigger(GetTriggeringTrigger())
call AQD(GetTriggerUnit(),false)
call EnableTrigger(GetTriggeringTrigger())
elseif GetLearnedSkill()==1096904043 or GetLearnedSkill()==1093684792 or GetLearnedSkill()==1093684802 or GetLearnedSkill()==1093684791 then
call TriggerExecute(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"Kobold|XPTrigger"))
call TriggerExecute(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"Kobold|AttributesTrigger"))
call DisableTrigger(GetTriggeringTrigger())
call ZCD(GetTriggerUnit(),GetLearnedSkill())
call EnableTrigger(GetTriggeringTrigger())
endif
endif
set CP7=null
return false
endfunction
function AUD takes nothing returns nothing
local unit CP7=IM4
local integer JZ7
set LP4="AUD"
set Z_4=CreateTrigger()
set PQ4=Z_4
set JZ7=GetHandleId(Z_4)
call BT7(Z_4,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(Z_4,Condition(function ATD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
endfunction
function Yu takes nothing returns boolean
return IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false and BR8(GetFilterUnit())==false)
endfunction
function YU takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
local group g
local unit u
local real d
local real a
local real AVD
local real AWD
local unit DA8=QA7(RP7,"Caster")
set LP4="YU"
if GetTriggerEvalCount(t)>32 then
call Q47(RP7)
call RN7(t)
else
set g=ZI7()
set IM4=Z47
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),500,Condition(function Yu))
set u=GroupPickRandomUnit(g)
if u==null then
set d=GetRandomReal($AF,400)
set a=GetRandomReal(0,6)
set AVD=GetUnitX(Z47)+d*Cos(a)
set AWD=GetUnitY(Z47)+d*Sin(a)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",AVD,AWD))
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl",u,"origin"))
call D38(DA8,u,5,12.5*X37)
endif
call ZH7(g)
endif
set u=null
set g=null
set t=null
set Z47=null
return false
endfunction
function Yv takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="Yv"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl",Z47,"hand right"))
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",DA8)
call Q97(RP7,"Level",GetUnitAbilityLevel(Z47,1093677877))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function YU))
set t=null
set Z47=null
endfunction
function AXD takes nothing returns boolean
if GetSpellAbilityId()==1093677877 then
call Yv()
endif
return false
endfunction
function KR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KR8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AXD))
set t=null
endfunction
function AYD takes nothing returns nothing
local unit CP7=Y44
local unit J67=GetEnumUnit()
set LP4="AYD"
call D38(CP7,J67,1,Y74)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",J67,"origin"))
set CP7=null
set J67=null
endfunction
function AZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit CP7=QA7(RP7,"Source")
local integer DB8=GetUnitAbilityLevel(CP7,1093808454)
local group g
set LP4="AZD"
if DB8!=0 then
if DB8==1 then
set Y74=66
elseif DB8==2 then
set Y74=100
else
set Y74=$90
endif
else
set DB8=GetUnitAbilityLevel(CP7,1093808455)
if DB8==1 then
set Y74=88
elseif DB8==2 then
set Y74=$85
else
set Y74=$B1
endif
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetUnitState(CP7,UNIT_STATE_MANA)<20*DB8 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==-1 or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093808456 or GetSpellAbilityId()==1093809992))then
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093808454 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808454,true)
endif
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093808455 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808455,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808456,false)
call Q47(RP7)
call RN7(t)
call RK7(CP7,"AI|PulseNova")
elseif GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)-20*DB8)
set IM4=CP7
set Y44=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),475,Condition(function LF7))
call ForGroup(g,function AYD)
call ZH7(g)
set g=null
endif
set t=null
return false
endfunction
function AAD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="AAD"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",CP7,"origin"))
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808454,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808455,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808456,true)
call UnitAddAbility(CP7,1093808456)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AZD))
call QG7(RP7,"Source",CP7)
call TriggerEvaluate(t)
call RI7(CP7,"AI|PulseNova")
set CP7=null
set t=null
endfunction
function Yy takes nothing returns boolean
if GetSpellAbilityId()==1093808454 or GetSpellAbilityId()==1093808455 then
call AAD()
endif
return false
endfunction
function KS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Yy))
set t=null
endfunction
function ABD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit EGD=(LoadUnitHandle(C7,(JZ7),(374)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ACD=(LoadInteger(C7,(JZ7),($E9)))
local integer B59=(LoadInteger(C7,(JZ7),($C)))
local unit DA8
local group g
local real a
local real x
local real y
local integer A3D=(LoadInteger(C7,(JZ7),(720)))
set LP4="ABD"
if A3D>0 then
set A3D=A3D-1
call SaveInteger(C7,(JZ7),(720),(A3D))
return false
endif
if N67(GetUnitX(EGD),GetUnitY(EGD),GetUnitX(J67),GetUnitY(J67))>20 then
set a=MZ7(GetUnitX(EGD),GetUnitY(EGD),GetUnitX(J67),GetUnitY(J67))
call SetUnitFacing(EGD,a)
set x=GetUnitX(EGD)+13.5*Cos(a*bj_DEGTORAD)
set y=GetUnitY(EGD)+13.5*Sin(a*bj_DEGTORAD)
call SetUnitX(EGD,x)
call SetUnitY(EGD,y)
else
if A47(J67)==false then
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093679409)
call SetUnitAbilityLevel(DA8,1093679409,DB8)
call IssueTargetOrderById(DA8,$D0102,J67)
endif
if ACD>B59 then
call RemoveUnit(EGD)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),600,Condition(function LW7))
call GroupRemoveUnit(g,J67)
set J67=GroupPickRandomUnit(g)
call ZH7(g)
if J67==null then
call RemoveUnit(EGD)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call SaveInteger(C7,(JZ7),(720),($A))
call SaveInteger(C7,(JZ7),($E9),(ACD+1))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
endif
endif
set t=null
set CP7=null
set J67=null
set EGD=null
set DA8=null
set g=null
return false
endfunction
function A6D takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093678420)
local integer B59=7
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit EGD
set LP4="A6D"
if GetSpellAbilityId()==1093679176 then
set DB8=GetUnitAbilityLevel(CP7,1093679176)+1
set B59=7
endif
set EGD=CreateUnit(GetOwningPlayer(CP7),1697656889,GetUnitX(CP7),GetUnitY(CP7),0)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(374),(EGD))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),($E9),(1))
call SaveInteger(C7,(JZ7),($C),(B59))
call SaveInteger(C7,(JZ7),(720),(0))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function ABD))
set CP7=null
set J67=null
set EGD=null
set t=null
endfunction
function ALD takes nothing returns boolean
if GetSpellAbilityId()==1093678420 or GetSpellAbilityId()==1093679176 then
call A6D()
endif
return false
endfunction
function KU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ALD))
set t=null
endfunction
function A1D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(p5,1093679412)
local integer A0D=GetHeroLevel(m5)
local real YU9=GetUnitState(m5,UNIT_STATE_MAX_LIFE)*.2
set LP4="A1D"
if ModuloInteger(A0D,7-X37)==0 or A0D==25 then
call D38(p5,m5,1,YU9)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",m5,"chest"))
endif
set p5=null
set m5=null
endfunction
function A5D takes nothing returns boolean
if GetSpellAbilityId()==1093679412 then
call A1D()
endif
return false
endfunction
function KV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A5D))
set t=null
endfunction
function A2D takes unit CP7 returns nothing
call UnitRemoveAbility(CP7,1093750609)
call UnitRemoveAbility(CP7,1093750610)
call UnitRemoveAbility(CP7,1093750611)
call UnitRemoveAbility(CP7,1093750612)
call UnitRemoveAbility(CP7,1093750613)
call UnitRemoveAbility(CP7,1093750614)
call UnitRemoveAbility(CP7,1093750615)
call UnitRemoveAbility(CP7,1093750616)
call UnitRemoveAbility(CP7,1093750617)
call UnitRemoveAbility(CP7,1395667021)
call UnitRemoveAbility(CP7,1093750618)
call UnitRemoveAbility(CP7,1395667022)
call UnitRemoveAbility(CP7,1093750832)
call UnitRemoveAbility(CP7,1093750833)
call UnitRemoveAbility(CP7,1093750839)
call UnitRemoveAbility(CP7,1093750849)
call UnitRemoveAbility(CP7,1093750835)
call UnitRemoveAbility(CP7,1093750836)
call UnitRemoveAbility(CP7,1093750837)
call UnitRemoveAbility(CP7,1093750838)
call UnitRemoveAbility(CP7,1093812551)
endfunction
function A_D takes unit CP7,unit J67 returns nothing
local integer B4D=GetUnitTypeId(J67)
local integer B7D=0
local integer B8D=0
set LP4="Devour_Absorb"
if B4D==1848658008 then
set B7D=1093750609
elseif B4D==1852796263 then
set B7D=1093750610
elseif B4D==1852207221 then
set B7D=1093750611
elseif B4D==1853060204 then
set B7D=1093750612
elseif B4D==1853055348 then
set B7D=1093750613
elseif B4D==1853060200 then
set B7D=1093750614
set B8D=1093750615
elseif B4D==1848651859 then
set B7D=1093750616
set B8D=1093750617
elseif B4D==1852534636 then
set B7D=1395667021
elseif B4D==1852207976 then
set B7D=1093750618
set B8D=1093812551
elseif B4D==1852010091 then
set B7D=1395667022
set B8D=1093750832
elseif B4D==1852272243 then
set B7D=1093750833
elseif B4D==1852270641 then
set B7D=1093750839
set B8D=1093750849
elseif B4D==1852798821 then
set B7D=1093750835
set B8D=1093750836
elseif B4D==1852077175 then
set B7D=1093750837
set B8D=1093750838
elseif B4D==1853320295 then
set B7D=1093750617
endif
if B7D!=0 then
call A2D(CP7)
call Z27(CP7,B7D)
endif
if B8D!=0 then
call Z27(CP7,B8D)
endif
endfunction
function B9D takes real BDD returns string
local string c1="|c00ff0303"
local string c="||"
local string p=" "
local string s=c1+c+"|r"
local string BED
set LP4="Kwv"
if BDD>85 then
set BED=s+p+s+p+s+p+s+p+s+p+s+p+s
elseif BDD>70 then
set BED=s+p+s+p+s+p+s+p+s+p+s+p+c
elseif BDD>55 then
set BED=s+p+s+p+s+p+s+p+s+p+c+p+c
elseif BDD>40 then
set BED=s+p+s+p+s+p+s+p+c+p+c+p+c
elseif BDD>25 then
set BED=s+p+s+p+s+p+c+p+c+p+c+p+c
elseif BDD>$A then
set BED=s+p+s+p+c+p+c+p+c+p+c+p+c
elseif BDD>0 then
set BED=s+p+c+p+c+p+c+p+c+p+c+p+c
else
set BED=c+p+c+p+c+p+c+p+c+p+c+p+c
endif
return BED
endfunction
function BFD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
local integer BGD=R47(RP7,"TypeID")
local real HP=R77(RP7,"HP")
local texttag tt=QB7(RP7,"tt")
local integer iX=GetTriggerEvalCount(t)
local real BHD=B97(HP-iX,0)
local boolean BID=true
set LP4="BFD"
call SetTextTagText(tt,B9D(100*BHD/ HP),.018)
call SetTextTagPosUnit(tt,Z47,0)
if IsUnitVisible(Z47,GetLocalPlayer())==false and Y27(GetLocalPlayer())==false then
set BID=false
endif
call SetTextTagVisibility(tt,BID)
if BHD==0 then
call CH7(GetOwningPlayer(Z47),Z47,25*X37)
endif
if BHD==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093742674,true)
call UnitRemoveAbility(Z47,1093742675)
call Q47(RP7)
call RN7(t)
call DestroyTextTag(tt)
endif
set t=null
set Z47=null
return false
endfunction
function BJD takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(ZO7,1093742674)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real HP=GetUnitState(J67,UNIT_STATE_LIFE)
local integer BKD=GetUnitLevel(J67)
local integer BGD=GetUnitTypeId(J67)
local texttag tt=CreateTextTag()
local boolean BID=true
local unit DA8=CreateUnit(GetOwningPlayer(ZO7),1697656901,0,0,0)
set LP4="BJD"
call BN7("SPLK",GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(J67),GetUnitY(J67),.1,.1,.2,.9,.5)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",GetUnitX(J67),GetUnitY(J67)))
if IsUnitVisible(ZO7,GetLocalPlayer())==false then
set BID=false
endif
call A_D(ZO7,J67)
call SetTextTagText(tt,B9D(100),.018)
call SetTextTagPosUnit(tt,ZO7,0)
call SetTextTagVisibility(tt,BID)
call SetTextTagPermanent(tt,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093742674,false)
call Z27(ZO7,1093742675)
call QG7(RP7,"Hero",ZO7)
call QS7(RP7,"tt",tt)
call Q97(RP7,"TypeID",BGD)
call Q97(RP7,"Level",X37)
call QD7(RP7,"HP",HP)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BFD))
call ShowUnit(J67,false)
call UnitRemoveBuffs(J67,true,true)
call UnitRemoveAbility(J67,1097167980)
call UnitDamageTarget(DA8,J67,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set t=null
set ZO7=null
set J67=null
set DA8=null
endfunction
function BMD takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093742674)
local integer BKD=GetUnitLevel(m5)
set LP4="BMD"
if(GetOwningPlayer(m5)!=Y7[0]and GetOwningPlayer(m5)!=Z7[0])and((X37==1 and BKD>2)or(X37==2 and BKD>4)or(X37==3 and BKD>5)or(X37==4 and BKD>6))then
endif
set Z47=null
set m5=null
endfunction
function BND takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer id=R47(RP7,"Count")
set LP4="BND"
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function BOD takes nothing returns nothing
local integer id=GetSpellAbilityId()
local trigger t
local integer RP7
set LP4="BOD"
if id==1093750609 or id==1093750610 or id==1093750611 or id==1093750612 or id==1093750613 or id==1093750614 or id==1093750615 or id==1093750616 or id==1093750617 or id==1395667021 or id==1093750618 or id==1395667022 or id==1093750832 or id==1093750833 or id==1093750834 or id==1093750835 or id==1093750836 or id==1093750837 or id==1093750838 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function BND))
call QG7(RP7,"Source",GetTriggerUnit())
call Q97(RP7,"Count",id)
set t=null
endif
endfunction
function BPD takes nothing returns boolean
if GetSpellAbilityId()==1093742674 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call BMD()
else
call BJD()
endif
elseif GetUnitTypeId(GetTriggerUnit())==1430467634 then
call BOD()
endif
return false
endfunction
function KW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function BPD))
set t=null
endfunction
function BQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="BQD"
call UnitRemoveAbility(p5,1093750604)
call UnitRemoveAbility(p5,1093750606)
call UnitRemoveAbility(p5,1093750607)
call UnitRemoveAbility(p5,1093750605)
call UnitRemoveAbility(p5,1110455370)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function BRD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093750608)
set LP4="BRD"
if DB8==1 then
call Z27(CP7,1093750604)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750604,false)
elseif DB8==2 then
call Z27(CP7,1093750606)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750606,false)
elseif DB8==3 then
call Z27(CP7,1093750607)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750607,false)
elseif DB8==4 then
call Z27(CP7,1093750605)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750605,false)
endif
call TriggerRegisterTimerEvent(t,8+2*DB8,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BQD))
call QG7(JZ7,"Source",CP7)
set CP7=null
set t=null
endfunction
function BSD takes nothing returns boolean
if GetSpellAbilityId()==1093750608 then
call BRD()
endif
return false
endfunction
function KX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BSD))
set t=null
endfunction
function BTD takes nothing returns boolean
local real x
local real y
set LP4="BTD"
if(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))then
set x=A2+GetRandomReal(20,70)*Cos(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
set y=N2+GetRandomReal(20,70)*Sin(GetUnitFacing(GetTriggerUnit())*bj_DEGTORAD)
call SetUnitPosition(GetFilterUnit(),x,y)
endif
return false
endfunction
function BUD takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=ZI7()
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local integer DB8=GetUnitAbilityLevel(p5,1093810508)
set LP4="BUD"
set A2=GetUnitX(p5)+100*Cos(GetUnitFacing(p5)*bj_DEGTORAD)
set N2=GetUnitY(p5)+100*Sin(GetUnitFacing(p5)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,410+24,Condition(function BTD))
call ZH7(g)
call Z27(DA8,1093678662)
call SetUnitAbilityLevel(DA8,1093678662,DB8)
call IssueImmediateOrderById(DA8,$D009F)
set p5=null
set g=null
endfunction
function BVD takes nothing returns boolean
if GetSpellAbilityId()==1093810508 then
call BUD()
endif
return false
endfunction
function KY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BVD))
set t=null
endfunction
function BWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CW9=(LoadUnitHandle(C7,(YY7),(17)))
set LP4="BWD"
if GetUnitAbilityLevel(CW9,1110454357)==0 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(CW9,1093751088)
call UnitRemoveAbility(CW9,1093751089)
call UnitRemoveAbility(CW9,1093751090)
call UnitRemoveAbility(CW9,1093751091)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
endif
set t=null
set CW9=null
return false
endfunction
function BXD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
local unit CB9=GetTriggerUnit()
local unit CW9=GetSpellTargetUnit()
local integer O87=GetUnitAbilityLevel(CB9,1093677879)
local integer BYD
set LP4="BXD"
if O87==1 then
set BYD=1093751088
elseif O87==2 then
set BYD=1093751089
elseif O87==3 then
set BYD=1093751090
elseif O87==4 then
set BYD=1093751091
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CW9),BYD,false)
call Z27(CW9,BYD)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,CW9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BWD))
call SaveUnitHandle(C7,(YY7),(17),(CW9))
set t=null
set CB9=null
set CW9=null
endfunction
function BZD takes nothing returns boolean
if GetSpellAbilityId()==1093677879 then
call BXD()
endif
return false
endfunction
function KZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BZD))
set t=null
endfunction
function BAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CW9=(LoadUnitHandle(C7,(YY7),(17)))
set LP4="BAD"
call UnitRemoveAbility(CW9,1093751094)
call UnitRemoveAbility(CW9,1110459224)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
set t=null
set CW9=null
return false
endfunction
function BBD takes unit CB9,unit CW9,integer O87 returns nothing
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
set LP4="Skewer_Hit"
call SetUnitPathing(CW9,true)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerRegisterUnitEvent(t,CW9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BAD))
call SaveUnitHandle(C7,(YY7),(17),(CW9))
call Z27(CW9,1093751094)
call UnitMakeAbilityPermanent(CW9,true,1093751094)
call SetPlayerAbilityAvailable(GetOwningPlayer(CW9),1093751094,false)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl",CW9,"chest"))
call D38(CB9,CW9,1,70*O87)
set t=null
endfunction
function BCD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CB9=(LoadUnitHandle(C7,(YY7),(2)))
local unit B3D=(LoadUnitHandle(C7,(YY7),(393)))
local unit B6D=(LoadUnitHandle(C7,(YY7),(394)))
local unit BLD=(LoadUnitHandle(C7,(YY7),(395)))
local unit B1D=(LoadUnitHandle(C7,(YY7),(396)))
local integer O87=(LoadInteger(C7,(YY7),(5)))
local real B0D=(LoadReal(C7,(YY7),(47)))
local real B5D=(LoadReal(C7,(YY7),(48)))
local real B2D=(LoadReal(C7,(YY7),($D)))
local real B_D=(LoadReal(C7,(YY7),(6)))
local real C4D=(LoadReal(C7,(YY7),(7)))
local real C7D=AA7(B_D+19*Cos(B2D))
local real C8D=AB7(C4D+19*Sin(B2D))
local group g
local integer C9D=(LoadInteger(C7,(YY7),($C)))
local location l
set LP4="BCD"
call SetUnitPosition(CB9,C7D,C8D)
call SetUnitFacing(CB9,B2D*bj_RADTODEG)
call SaveReal(C7,(YY7),(6),((C7D)*1.))
call SaveReal(C7,(YY7),(7),((C8D)*1.))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",C7D,C8D))
endif
if GetTriggerEvalCount(t)==2 then
call SetUnitAnimationByIndex(CB9,3)
endif
if B3D==null or B6D==null or BLD==null or B1D==null then
set IM4=CB9
set g=ZI7()
call GroupEnumUnitsInRange(g,C7D,C8D,125+25,Condition(function LC7))
if FirstOfGroup(g)!=null then
if B3D!=null then
call GroupRemoveUnit(g,B3D)
endif
if B6D!=null then
call GroupRemoveUnit(g,B6D)
endif
if BLD!=null then
call GroupRemoveUnit(g,BLD)
endif
if FirstOfGroup(g)!=null then
if B3D==null then
set B3D=FirstOfGroup(g)
call SetUnitPathing(B3D,false)
call RR7(B3D,"4404",5)
elseif B6D==null and O87>1 then
set B6D=FirstOfGroup(g)
call SetUnitPathing(B6D,false)
call RR7(B6D,"4404",5)
elseif BLD==null and O87>2 then
set BLD=FirstOfGroup(g)
call SetUnitPathing(BLD,false)
call RR7(BLD,"4404",5)
elseif B1D==null and O87>3 then
set B1D=FirstOfGroup(g)
call SetUnitPathing(B1D,false)
call RR7(B1D,"4404",5)
endif
endif
endif
call ZH7(g)
set g=null
endif
call SaveUnitHandle(C7,(YY7),(393),(B3D))
call SaveUnitHandle(C7,(YY7),(394),(B6D))
call SaveUnitHandle(C7,(YY7),(395),(BLD))
call SaveUnitHandle(C7,(YY7),(396),(B1D))
if B3D!=null then
call SetUnitPosition(B3D,C7D,C8D)
endif
if B6D!=null then
call SetUnitPosition(B6D,C7D,C8D)
endif
if BLD!=null then
call SetUnitPosition(BLD,C7D,C8D)
endif
if B1D!=null then
call SetUnitPosition(B1D,C7D,C8D)
endif
if ModuloInteger(GetTriggerEvalCount(t),3)==0 then
call BW7(C7D,C8D,$C8)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>C9D then
call DestroyEffect((LoadEffectHandle(C7,(YY7),($AF))))
call SetUnitAnimationByIndex(CB9,0)
call SetUnitTimeScale(CB9,1.)
call SetUnitPathing(CB9,true)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
if B3D!=null then
if IsPointInRegion(IT4,GetUnitX(B3D),GetUnitY(B3D)) then
set l=BS8(GetUnitX(B3D),GetUnitY(B3D))
call SetUnitX(B3D,AA7(GetLocationX(l)))
call SetUnitY(B3D,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call BBD(CB9,B3D,O87)
call BW7(GetUnitX(B3D),GetUnitY(B3D),300)
endif
if B6D!=null then
if IsPointInRegion(IT4,GetUnitX(B6D),GetUnitY(B6D)) then
set l=BS8(GetUnitX(B6D),GetUnitY(B6D))
call SetUnitX(B6D,AA7(GetLocationX(l)))
call SetUnitY(B6D,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call BBD(CB9,B6D,O87)
call BW7(GetUnitX(B6D),GetUnitY(B6D),300)
endif
if BLD!=null then
if IsPointInRegion(IT4,GetUnitX(BLD),GetUnitY(BLD)) then
set l=BS8(GetUnitX(BLD),GetUnitY(BLD))
call SetUnitX(BLD,AA7(GetLocationX(l)))
call SetUnitY(BLD,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call BBD(CB9,BLD,O87)
call BW7(GetUnitX(BLD),GetUnitY(BLD),300)
endif
if B1D!=null then
if IsPointInRegion(IT4,GetUnitX(B1D),GetUnitY(B1D)) then
set l=BS8(GetUnitX(B1D),GetUnitY(B1D))
call SetUnitX(B1D,AA7(GetLocationX(l)))
call SetUnitY(B1D,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
call BBD(CB9,B1D,O87)
call BW7(GetUnitX(B1D),GetUnitY(B1D),300)
endif
if B3D!=null and A47(B3D)==false then
call IssueTargetOrderById(CB9,$D000F,B3D)
elseif B6D!=null and A47(B6D)==false then
call IssueTargetOrderById(CB9,$D000F,B6D)
elseif BLD!=null and A47(BLD)==false then
call IssueTargetOrderById(CB9,$D000F,BLD)
elseif B1D!=null and A47(B1D)==false then
call IssueTargetOrderById(CB9,$D000F,B1D)
endif
call BW7(C7D,C8D,375)
if IsPointInRegion(IT4,GetUnitX(CB9),GetUnitY(CB9)) then
set l=BS8(GetUnitX(CB9),GetUnitY(CB9))
call SetUnitX(CB9,AA7(GetLocationX(l)))
call SetUnitY(CB9,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
endif
set t=null
set CB9=null
set B3D=null
set B6D=null
set BLD=null
set B1D=null
return false
endfunction
function CDD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
local real B0D=AA7(GetSpellTargetX())
local real B5D=AB7(GetSpellTargetY())
local unit CB9=GetTriggerUnit()
local real THD=GetUnitX(CB9)
local real CED=GetUnitY(CB9)
local integer O87=GetUnitAbilityLevel(CB9,1093751364)
local real a=MZ7(THD,CED,B0D,B5D)*bj_DEGTORAD
local real CFD=400+$C8*O87+25
if N67(THD,CED,B0D,B5D)>CFD then
set B0D=AA7(THD+CFD*Cos(a))
set B5D=AB7(CED+CFD*Sin(a))
endif
call SetUnitPathing(CB9,false)
call SetUnitAnimationByIndex(CB9,3)
call SetUnitTimeScale(CB9,1.5)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CB9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function BCD))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call SaveInteger(C7,(YY7),(5),(O87))
call SaveUnitHandle(C7,(YY7),(393),(null))
call SaveUnitHandle(C7,(YY7),(394),(null))
call SaveUnitHandle(C7,(YY7),(395),(null))
call SaveUnitHandle(C7,(YY7),(396),(null))
call SaveReal(C7,(YY7),(47),((B0D)*1.))
call SaveReal(C7,(YY7),(48),((B5D)*1.))
call SaveReal(C7,(YY7),(6),((THD)*1.))
call SaveReal(C7,(YY7),(7),((CED)*1.))
call SaveReal(C7,(YY7),($D),((Atan2(B5D-CED,B0D-THD))*1.))
call SaveInteger(C7,(YY7),($C),(R2I(N67(THD,CED,B0D,B5D)/19.)))
call SaveEffectHandle(C7,(YY7),($AF),(AddSpecialEffectTarget("war3mapImported\\SkewerTuskGlow_1.mdx",CB9,"head")))
set t=null
set CB9=null
endfunction
function CGD takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call CDD()
endif
return false
endfunction
function CHD takes nothing returns boolean
if GetSpellAbilityId()==1093751364 then
call SetUnitAnimationByIndex(GetTriggerUnit(),7)
endif
return false
endfunction
function KA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KA8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CGD))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function CHD))
set t=null
endfunction
function CID takes nothing returns boolean
if GetSpellAbilityId()==1093747504 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748052,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748051,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748049,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093748050,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093808966,false)
endif
return false
endfunction
function KB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CID))
set t=null
endfunction
function CJD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815362)
set LP4="CJD"
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+.1*(20+GetUnitState(J67,UNIT_STATE_MAX_LIFE)*(.02+.01*DB8)))
if GetTriggerEvalCount(t)>39 or(GetTriggerEvalCount(t)==1 and IsUnitHidden(J67))then
call UnitRemoveAbility(J67,1093815364)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(609))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(610))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(611))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(612))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(613))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(614))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(615))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(616))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(617))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CKD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t
local integer JZ7
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="CKD"
call UnitAddAbility(DA8,1093815367)
if IssueTargetOrderById(DA8,$D007F,J67) then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call Z27(J67,1093815364)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function CJD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(609),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"hand right")))
call SaveEffectHandle(C7,(JZ7),(610),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"hand left")))
call SaveEffectHandle(C7,(JZ7),(611),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"foot right")))
call SaveEffectHandle(C7,(JZ7),(612),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"foot left")))
call SaveEffectHandle(C7,(JZ7),(613),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"foot right mount rear")))
call SaveEffectHandle(C7,(JZ7),(614),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"foot left mount rear")))
call SaveEffectHandle(C7,(JZ7),(615),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"head")))
call SaveEffectHandle(C7,(JZ7),(616),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"chest")))
call SaveEffectHandle(C7,(JZ7),(617),(AddSpecialEffectTarget("war3mapImported\\Cryofreeze5.mdx",J67,"weapon")))
endif
set CP7=null
set J67=null
set t=null
endfunction
function CMD takes nothing returns boolean
if GetSpellAbilityId()==1093815362 then
call CKD()
endif
return false
endfunction
function S98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="S98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CMD))
set t=null
endfunction
function CND takes nothing returns nothing
local unit J67=GetEnumUnit()
set LP4="CND"
call DisableTrigger(F37)
call UnitWakeUp(J67)
call IssueTargetOrderById(J67,$D000F,F67)
call EnableTrigger(F37)
set J67=null
endfunction
function COD takes nothing returns nothing
set LP4="COD"
call RR7(GetEnumUnit(),"4328",.75)
endfunction
function CPD takes nothing returns nothing
local unit J67=GetEnumUnit()
set LP4="CPD"
if IsUnitInGroup(J67,FC7)==false then
call GroupAddUnit(FC7,J67)
call TriggerRegisterUnitEvent(F37,J67,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(F37,J67,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(F37,J67,EVENT_UNIT_ISSUED_TARGET_ORDER)
call RI7(J67,"4328")
endif
set J67=null
endfunction
function CQD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local group DND=(LoadGroupHandle(C7,(JZ7),(22)))
local group g
set LP4="CQD"
if GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
set FC7=DND
set F37=t
set g=ZI7()
set IM4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),350+25,Condition(function LQ7))
call GroupRemoveUnit(g,J67)
call ForGroup(g,function CPD)
call ZH7(g)
if ZD8==(2.25+.25*DB8)*20 or A47(J67)then
call ForGroup(DND,function COD)
call ZH7(DND)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set F37=t
set F67=J67
call ForGroup(DND,function CND)
if ModuloInteger(ZD8,20)==0 or ZD8==0 then
endif
endif
else
if UnitIsSleeping(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1110454328)==0 and GetIssuedOrderId()!=$D0005 and D97==false then
call DisableTrigger(t)
call ClearSelectionForPlayer(GetOwningPlayer(GetTriggerUnit()))
call IssueTargetOrderById(GetTriggerUnit(),$D000F,J67)
call EnableTrigger(t)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CRD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093687856)
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="CRD"
call UnitAddAbility(DA8,1093815882)
call SetUnitAbilityLevel(DA8,1093815882,DB8)
call IssueTargetOrderById(DA8,$D007F,J67)
set FL7=CP7
call TriggerRegisterTimerEvent(t,.05,true)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveGroupHandle(C7,(JZ7),(22),(ZI7()))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\WintersCurse.mdx",J67,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffect("war3mapImported\\WintersCurseAoE.mdx",GetUnitX(J67),GetUnitY(J67))))
call TriggerAddCondition(t,Condition(function CQD))
set CP7=null
set J67=null
set t=null
endfunction
function CSD takes nothing returns boolean
if GetSpellAbilityId()==1093687856 and ZG7(GetSpellTargetUnit())==false then
call CRD()
endif
return false
endfunction
function SD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CSD))
set t=null
endfunction
function CTD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815859)
set LP4="CTD"
call D38(CP7,J67,3,(.032+.002*DB8)*GetUnitState(J67,UNIT_STATE_MAX_LIFE))
if(TimerGetElapsed(V))>=(LoadReal(C7,(GetHandleId(CP7)),(782)))then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CUD takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)*.8)
set LP4="Touch_FireBlast"
if(LoadReal(C7,(GetHandleId(CP7)),(782)))>(TimerGetElapsed(V))then
call SaveReal(C7,(GetHandleId(CP7)),(782),(((TimerGetElapsed(V))+F17)*1.))
else
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function CTD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("effects\\BasicWaterFlash.mdx",J67,"chest")))
call SaveReal(C7,(GetHandleId(CP7)),(782),(((TimerGetElapsed(V))+F17)*1.))
endif
set t=null
endfunction
function CVD takes nothing returns boolean
local real d
local real CS8
local integer ZD8
local unit CP7
local unit J67
set LP4="CVD"
if GetUnitAbilityLevel(GetTriggerUnit(),1110460215)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093815859)>0 and(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),(2)))==GetEventDamageSource()then
set CP7=GetEventDamageSource()
set J67=GetTriggerUnit()
set ZD8=(LoadInteger(C7,(GetHandleId(CP7)),(780)))
set CS8=(LoadReal(C7,(GetHandleId(CP7)),(781)))
if CS8+F17<(TimerGetElapsed(V))then
set ZD8=1
set CS8=(TimerGetElapsed(V))
call SaveInteger(C7,(GetHandleId(CP7)),(780),(ZD8))
call SaveReal(C7,(GetHandleId(CP7)),(781),((CS8)*1.))
else
set ZD8=ZD8+1
set CS8=(TimerGetElapsed(V))
call SaveInteger(C7,(GetHandleId(CP7)),(780),(ZD8))
call SaveReal(C7,(GetHandleId(CP7)),(781),((CS8)*1.))
endif
if ZD8==4 then
set ZD8=0
call SaveInteger(C7,(GetHandleId(CP7)),(780),(ZD8))
call CUD(CP7,J67)
endif
call FlushChildHashtable(C7,(GetHandleId(GetTriggeringTrigger())))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function CWD takes nothing returns nothing
local trigger t
local unit J67
local unit CP7
set LP4="CWD"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set J67=GetSpellTargetUnit()
set CP7=GetTriggerUnit()
else
set J67=GetTriggerUnit()
set CP7=GetAttacker()
endif
if IsUnitIllusion(CP7)==false then
set t=CreateTrigger()
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
call SaveBoolean(C7,(GetHandleId(t)),(264),(true))
else
call SaveBoolean(C7,(GetHandleId(t)),(264),(false))
endif
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(CP7))
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function CVD))
endif
set t=null
set J67=null
set CP7=null
endfunction
function CXD takes nothing returns boolean
set LP4="CXD"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093815859)>0 and(LoadBoolean(C7,(GetHandleId(GetTriggeringTrigger())),(263)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),($E)))then
call CWD()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call SaveBoolean(C7,(GetHandleId(GetTriggeringTrigger())),(263),(true))
elseif(GetIssuedOrderId()==$D0120)then
call SaveBoolean(C7,(GetHandleId(GetTriggeringTrigger())),(263),(false))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815859 then
call CWD()
endif
return false
endfunction
function CYD takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="CYD"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function CXD))
call SaveUnitHandle(C7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=null
endfunction
function CZD takes nothing returns boolean
set LP4="CZD"
if GetLearnedSkill()==1093815859 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093815859)==1 then
call CYD()
endif
return false
endfunction
function SG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SG8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function CZD))
set t=null
endfunction
function CAD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="CAD"
if A47(J67)==false then
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)*.94)
endif
if GetTriggerEvalCount(t)==5 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CBD takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local integer DB8
local integer CCD
local integer C3D
set LP4="ArcticSiege_SuccessfulAttack"
if((RG7(J67,"4329")==false))and Y57(J67)==false and GetUnitTypeId(J67)!=1848651852 then
call RR7(J67,"4329",F07)
set DB8=GetUnitAbilityLevel(CP7,1093815877)
if DB8==1 then
set CCD=1093815874
set C3D=1093815873
elseif DB8==2 then
set CCD=1093815862
set C3D=1093815864
elseif DB8==3 then
set CCD=1093815875
set C3D=1093815863
elseif DB8==4 then
set CCD=1093815876
set C3D=1093815865
endif
call CA7(J67,CCD,1,4,1110460225)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),CCD,false)
call UnitMakeAbilityPermanent(J67,true,C3D)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function CAD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl",J67,"chest")))
endif
endfunction
function C6D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="C6D"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
call CBD(CP7,J67)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set J67=null
set CP7=null
return false
endfunction
function CLD takes nothing returns nothing
local trigger t=CreateTrigger()
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
local integer JZ7=GetHandleId(t)
set LP4="CLD"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function C6D))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set J67=null
set CP7=null
endfunction
function C1D takes nothing returns boolean
set LP4="C1D"
if GetAttacker()==(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),(2)))and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false then
if GetUnitTypeId(GetAttacker())==1311788354 or GetUnitTypeId(GetAttacker())==1311788355 or GetUnitTypeId(GetAttacker())==1311788367 or GetUnitTypeId(GetAttacker())==1311788353 then
call CLD()
endif
endif
return false
endfunction
function C0D takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
set LP4="C0D"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function C1D))
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(CP7))
set CP7=null
set t=null
endfunction
function C5D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
set LP4="C5D"
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
return false
endfunction
function C2D takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
set LP4="C2D"
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function C5D))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
set CP7=null
set t=null
endfunction
function C_D takes nothing returns boolean
set LP4="C_D"
if GetTriggerEventId()==EVENT_PLAYER_HERO_SKILL then
if GetLearnedSkill()==1093815877 and GetUnitAbilityLevel(GetTriggerUnit(),1093815877)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call C0D()
endif
else
if GetSpellAbilityId()==1093815877 then
if GetUnitTypeId(GetTriggerUnit())!=1311788343 then
call BW7(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),$96)
if IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)then
call C2D()
endif
endif
endif
endif
return false
endfunction
function SH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SH8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C_D))
set t=null
endfunction
function L4D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real x
local real y
local real a
set LP4="L4D"
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(BB7)
else
set a=MZ7(GetUnitX(BB7),GetUnitY(BB7),GetUnitX(J67),GetUnitY(J67))
set x=GetUnitX(BB7)+20*Cos(a*bj_DEGTORAD)
set y=GetUnitY(BB7)+20*Sin(a*bj_DEGTORAD)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SetUnitFacing(BB7,a)
if N37(BB7,J67)<30 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call D38(BB7,J67,1,100+50*DB8)
call KillUnit(BB7)
call SetUnitAnimationByIndex(BB7,3)
endif
endif
set t=null
set J67=null
set BB7=null
return false
endfunction
function L7D takes integer DB8,unit BB7,unit J67 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="LightningSeeker_Seek"
call SetUnitAnimationByIndex(BB7,2)
call SetUnitVertexColor(BB7,$FF,$FF,$FF,$96)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function L4D))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SetUnitAnimationByIndex(BB7,2)
set t=null
endfunction
function L8D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local group g
local unit J67
set LP4="L8D"
if GetTriggerEvalCount(t)>F57/.05 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(BB7)
else
set IM4=BB7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),375+25,Condition(function LQ7))
set J67=P19(g,GetUnitX(BB7),GetUnitY(BB7))
call ZH7(g)
if J67!=null then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call L7D(DB8,BB7,J67)
endif
set g=null
set J67=null
endif
set t=null
set BB7=null
return false
endfunction
function L9D takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
set LP4="L9D"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function L8D))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SetUnitAnimationByIndex(BB7,1)
set t=null
set BB7=null
return false
endfunction
function LDD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993927,x,y,270)
local integer DB8=GetUnitAbilityLevel(CP7,1093815372)
set LP4="LDD"
call SetUnitAnimationByIndex(BB7,0)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function L9D))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
set CP7=null
set BB7=null
set t=null
endfunction
function LED takes nothing returns boolean
if GetSpellAbilityId()==1093815372 then
call LDD()
endif
return false
endfunction
function SI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LED))
set t=null
endfunction
function LFD takes nothing returns nothing
set LP4="LFD"
if BP8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815609)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815609)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815617)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815617)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815374)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815374)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815608)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815608)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815888)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815888)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815891)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815891)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815890)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815890)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093815889)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093815889)
endif
endfunction
function LGD takes nothing returns nothing
set LP4="LGD"
if BP8(GetEnumUnit())then
return
endif
if F27==1 then
set F_7=1093815609
elseif F27==2 then
set F_7=1093815617
elseif F27==3 then
set F_7=1093815374
elseif F27==4 then
set F_7=1093815608
endif
if GetUnitAbilityLevel(GetEnumUnit(),F_7)==0 then
call Z27(GetEnumUnit(),F_7)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),F_7,false)
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1094935923)
if F_7==1093815609 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815604)
elseif F_7==1093815617 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815605)
elseif F_7==1093815374 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815606)
elseif F_7==1093815608 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815607)
elseif F_7==1093815888 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815885)
elseif F_7==1093815891 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815884)
elseif F_7==1093815890 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815886)
elseif F_7==1093815889 then
call UnitMakeAbilityPermanent(GetEnumUnit(),true,1093815887)
endif
endif
endfunction
function LHD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local real JID=(LoadReal(C7,(JZ7),(442)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815373)
local group LID=(LoadGroupHandle(C7,(JZ7),(340)))
local group g=ZI7()
local group g1=ZI7()
local group g2=ZI7()
set LP4="LHD"
set F27=DB8
if(TimerGetElapsed(V))>JID then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call ForGroup(LID,function LFD)
call ZH7(LID)
call ZH7(g)
call ZH7(g1)
call ZH7(g2)
return false
endif
set IM4=CP7
call GroupEnumUnitsInRange(g1,x,y,325+25,Condition(function D78))
call GroupEnumUnitsInRange(g2,x,y,325+$90,Condition(function DJ8))
call GroupAddGroup(g1,g)
call GroupAddGroup(g2,g)
call ZH7(g1)
call ZH7(g2)
call GroupRemoveGroup(g,LID)
call ForGroup(LID,function LFD)
call ForGroup(g,function LGD)
call SaveGroupHandle(C7,(JZ7),(340),(g))
call ZH7(LID)
set t=null
set CP7=null
set LID=null
set g=null
return false
endfunction
function LJD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local integer i
local integer DB8=GetUnitAbilityLevel(CP7,1093815373)
set LP4="LJD"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LHD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveGroupHandle(C7,(JZ7),(340),(ZI7()))
call SaveReal(C7,(JZ7),(6),((BC7)*1.))
call SaveReal(C7,(JZ7),(7),((B37)*1.))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V))+3+.5*DB8)*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\MagneticField04.mdl",BC7,B37)))
set i=0
loop
exitwhen i>5
call SetPlayerAbilityAvailable(Y7[i],1093815609,false)
call SetPlayerAbilityAvailable(Z7[i],1093815609,false)
call SetPlayerAbilityAvailable(Y7[i],1093815617,false)
call SetPlayerAbilityAvailable(Z7[i],1093815617,false)
call SetPlayerAbilityAvailable(Y7[i],1093815617,false)
call SetPlayerAbilityAvailable(Z7[i],1093815374,false)
call SetPlayerAbilityAvailable(Y7[i],1093815608,false)
call SetPlayerAbilityAvailable(Z7[i],1093815608,false)
set i=i+1
endloop
set CP7=null
set t=null
endfunction
function LKD takes nothing returns boolean
if GetSpellAbilityId()==1093815373 then
call LJD()
endif
return false
endfunction
function SJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LKD))
set t=null
endfunction
function LMD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815601)
local integer JTD=(LoadInteger(C7,(JZ7),(758)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local group g
set LP4="LMD"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZD8>120 or Y57(J67)then
call UnitRemoveAbility(J67,1093815383)
call UnitRemoveAbility(J67,1093815385)
call UnitRemoveAbility(J67,1110460210)
call UnitRemoveAbility(J67,1110460211)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),$E1+25,Condition(function LF7))
call GroupRemoveUnit(g,J67)
if FirstOfGroup(g)==null then
if JTD==1093815383 then
if GetUnitAbilityLevel(J67,1093815383)==0 then
call Z27(J67,1093815383)
call UnitMakeAbilityPermanent(J67,true,1093815381)
call UnitMakeAbilityPermanent(J67,true,1093815621)
endif
else
if GetUnitAbilityLevel(J67,1093815385)==0 then
call Z27(J67,1093815385)
call UnitMakeAbilityPermanent(J67,true,1093815380)
call UnitMakeAbilityPermanent(J67,true,1093815621)
endif
endif
if ModuloInteger(ZD8,$A)==0 then
call D38(CP7,J67,1,DB8*$F*.5)
endif
else
if JTD==1093815383 then
if GetUnitAbilityLevel(J67,1093815383)>0 then
call UnitRemoveAbility(J67,1093815383)
call UnitRemoveAbility(J67,1110460210)
endif
else
if GetUnitAbilityLevel(J67,1093815385)>0 then
call UnitRemoveAbility(J67,1093815385)
call UnitRemoveAbility(J67,1110460211)
endif
endif
endif
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function LND takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer JTD=1093815383
set LP4="LND"
if GetUnitTypeId(CP7)==1311788365 then
set JTD=1093815385
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815383,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815385,false)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function LMD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(758),(JTD))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\Flux3.mdx",J67,"origin")))
call TriggerEvaluate(t)
set CP7=null
set J67=null
set t=null
endfunction
function LOD takes nothing returns boolean
if GetSpellAbilityId()==1093815601 and ZG7(GetSpellTargetUnit())==false then
call LND()
endif
return false
endfunction
function SK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LOD))
set t=null
endfunction
function LPD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit LQD=(LoadUnitHandle(C7,(JZ7),(17)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call FlushChildHashtable(C7,(GetHandleId(LQD)))
call RemoveUnit(LQD)
set t=null
set LQD=null
return false
endfunction
function LRD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit LQD=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="LRD"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call FlushChildHashtable(C7,(GetHandleId(LQD)))
call ShowUnit(LQD,false)
set t=null
set LQD=null
return false
endfunction
function LSD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit LQD=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815600)
set LP4="LSD"
if GetTriggerEvalCount(t)==$C8 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(LQD)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",GetUnitX(LQD),GetUnitX(LQD)))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(LQD))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function LRD))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function LPD))
call SaveUnitHandle(C7,(JZ7),(17),(LQD))
else
call SuspendHeroXP(LQD,true)
call UnitModifySkillPoints(LQD,-25)
endif
set t=null
set CP7=null
set LQD=null
return false
endfunction
function LTD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit LQD=CreateUnit(GetOwningPlayer(CP7),1311788365,GetUnitX(CP7),GetUnitY(CP7),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093815600)
local integer i=0
local item M47
local integer LUD=1227895373
set LP4="LTD"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",LQD,"chest"))
if WM7(GetOwningPlayer(LQD))==false then
set LUD=1227903043
endif
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7)) or IsPlayerObserver(GetLocalPlayer()) then
call SetUnitVertexColor(LQD,75,75,75,100)
endif
call SelectUnitAddForPlayer(LQD,GetOwningPlayer(CP7))
call DisableTrigger(H84)
loop
exitwhen i>5
if UnitItemInSlot(CP7,i)!=null and GetItemTypeId(UnitItemInSlot(CP7,i))!=SU[T0]and GetItemTypeId(UnitItemInSlot(CP7,i))!=SU[Z2]and GetItemTypeId(UnitItemInSlot(CP7,i))!=SU[TC]and GetItemTypeId(UnitItemInSlot(CP7,i))!=SU[VC]and GetItemTypeId(UnitItemInSlot(CP7,i))!=SU[LC]then
set M47=CreateItem(GetItemTypeId(UnitItemInSlot(CP7,i)),0,0)
if GetItemCharges(UnitItemInSlot(CP7,i))>0 then
call SetItemCharges(M47,GetItemCharges(UnitItemInSlot(CP7,i)))
endif
call UnitAddItem(LQD,M47)
call SetItemPlayer(M47,GetOwningPlayer(LQD),false)
if GetItemTypeId(M47)==SU[A5]or GetItemTypeId(M47)==SU[B5]or GetItemTypeId(M47)==SU[LV]then
call SetItemDropOnDeath(M47,false)
endif
else
call UnitAddItem(LQD,CreateItem(LUD,0,0))
endif
set i=i+1
endloop
call EnableTrigger(H84)
call SetHeroLevel(LQD,GetHeroLevel(CP7),false)
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1096904043)
call SelectHeroSkill(LQD,1096904043)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1093815372)
call SelectHeroSkill(LQD,1093815372)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1093815373)
call SelectHeroSkill(LQD,1093815373)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1093815601)
call SelectHeroSkill(LQD,1093815601)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1093812788)
call SelectHeroSkill(LQD,1093812788)
set i=i+1
endloop
set i=1
loop
exitwhen i>GetUnitAbilityLevel(CP7,1093815600)
call SelectHeroSkill(LQD,1093815600)
set i=i+1
endloop
call UnitRemoveAbility(LQD,1093815600)
call UnitModifySkillPoints(LQD,-25)
call SuspendHeroXP(LQD,true)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterDeathEvent(t,LQD)
call TriggerAddCondition(t,Condition(function LSD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(LQD))
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)*(1-(.45-.15*DB8)))
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)*(1-(.45-.15*DB8)))
call SetUnitState(LQD,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE))
call SetUnitState(LQD,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA))
set CP7=null
set LQD=null
set t=null
endfunction
function LVD takes nothing returns boolean
if GetSpellAbilityId()==1093815600 then
call LTD()
endif
return false
endfunction
function SM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LVD))
set t=null
endfunction
function LWD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093686851)
set LP4="LWD"
set IM4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),375+25,Condition(function L27))
if FirstOfGroup(g)==null then
if GetUnitAbilityLevel(CP7,1093815896)!=DB8 then
call Z27(CP7,1093815896)
call SetUnitAbilityLevel(CP7,1093815896,DB8)
endif
else
if GetUnitAbilityLevel(CP7,1093815896)>0 then
call UnitRemoveAbility(CP7,1093815896)
endif
endif
call ZH7(g)
set CP7=null
set t=null
set g=null
return false
endfunction
function LXD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="LXD"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LWD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function LYD takes nothing returns boolean
if GetLearnedSkill()==1093686851 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686851)==1 then
call LXD()
endif
return false
endfunction
function SP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SP8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LYD))
set t=null
endfunction
function LZD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer DB8=GetUnitAbilityLevel(CP7,1093677625)
local integer Y8D=GetHeroAgi(CP7,true)
local real LAD=Y8D*(.1+.04*DB8)
local integer YD9=R2I(LAD/2.+.5)
local integer LBD=(LoadInteger(C7,(JZ7),(34)))
set LP4="LZD"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093677625 then
if LBD==1 then
set LBD=2
else
set LBD=1
endif
call SaveInteger(C7,(JZ7),(34),(LBD))
call UnitRemoveAbility(DA8,1093815897)
call UnitRemoveAbility(DA8,1093816115)
endif
if A47(CP7) then
call UnitRemoveAbility(DA8,1093815897)
call UnitRemoveAbility(DA8,1093816115)
else
if GetUnitAbilityLevel(DA8,1093815897)==0 then
call Z27(DA8,1093815897)
if LBD==1 then
call Z27(DA8,1093816115)
endif
endif
call SetUnitAbilityLevel(DA8,1093815897,YD9)
call SetUnitAbilityLevel(DA8,1093816115,YD9)
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
endif
set CP7=null
set t=null
return false
endfunction
function LCD takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697657174,0,0,0)
set LP4="LCD"
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LZD))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveInteger(C7,(JZ7),(34),(1))
call Z27(DA8,1093815897)
call Z27(DA8,1093816115)
set t=null
set CP7=null
endfunction
function L3D takes nothing returns boolean
if GetLearnedSkill()==1093677625 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677625)==1 then
call LCD()
endif
return false
endfunction
function SO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SO8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function L3D))
call AC7(1093815897)
call AC7(1093816115)
set t=null
endfunction
function L6D takes nothing returns boolean
local real d
set LP4="L6D"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(RD4)) and IsUnitInGroup(GetFilterUnit(),RF4)==false and LK7(GetFilterUnit(),GetOwningPlayer(RE4)) then
set d=N67(GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()),GetUnitX(RD4),GetUnitY(RD4))
if d<VZ then
set R94=GetFilterUnit()
set VZ=d
endif
endif
return false
endfunction
function LLD takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local integer X37=R47(RP7,"Level")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local group L1D=QL7(RP7,"AlreadyHit")
local real L0D=R77(RP7,"StolenMana")
local real L5D=R77(RP7,"ManaCounter")
local real L2D=R77(RP7,"DmgCounter")
local real W78
local group g
local real a
local real x
local real y
set LP4="LLD"
set a=Atan2(GetUnitY(m5)-GetUnitY(DA8),GetUnitX(m5)-GetUnitX(DA8))
if p5==m5 then
set x=GetUnitX(DA8)+25*Cos(a)
set y=GetUnitY(DA8)+25*Sin(a)
else
set x=GetUnitX(DA8)+$F*Cos(a)
set y=GetUnitY(DA8)+$F*Sin(a)
endif
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
if N67(x,y,GetUnitX(m5),GetUnitY(m5))<60 then
call SetUnitX(DA8,GetUnitX(m5))
call SetUnitY(DA8,GetUnitY(m5))
if p5==m5 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+L0D)
call KillUnit(DA8)
call ZH7(L1D)
call Q47(RP7)
call RN7(t)
else
if LG7(m5)==false or IsUnitVisible(m5,GetOwningPlayer(DA8)) then
call D38(p5,m5,1,(40+40*X37)+.25*L2D*(40+40*X37))
set L2D=L2D+1
if GetUnitState(m5,UNIT_STATE_MANA)>0 then
set W78=RMinBJ(GetUnitState(m5,UNIT_STATE_MANA),($A+$A*X37)+.25*L5D*($A+$A*X37))
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-W78)
call BY7(oI,GetUnitX(m5),GetUnitY(m5))
set L0D=L0D+W78
set L5D=L5D+1
endif
endif
call QD7(RP7,"StolenMana",(L0D)*1.)
call QD7(RP7,"DmgCounter",(L2D)*1.)
call QD7(RP7,"ManaCounter",(L5D)*1.)
set g=ZI7()
set R94=null
set RD4=m5
set RF4=L1D
set VZ=99999
set RE4=p5
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),500,Condition(function L6D))
call ZH7(g)
if R94==null or L2D==(2+X37)then
call Q97(RP7,"TargetIndex",WI7(p5))
else
call Q97(RP7,"TargetIndex",WI7(R94))
call GroupAddUnit(L1D,R94)
endif
endif
call WF7(D18)
endif
set t=null
set p5=null
set m5=null
set g=null
set DA8=null
set L1D=null
return false
endfunction
function L_D takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(p5,1093682994)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local group g=ZI7()
local real L2D=0
local real L5D=0
local real W78=0
local real L0D=0
local unit DA8=CreateUnit(GetOwningPlayer(p5),1747990832,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
set LP4="L_D"
call BY7(eI,GetUnitX(p5),GetUnitY(p5))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function LLD))
call QP7(RP7,"AlreadyHit",g)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call Q97(RP7,"Level",X37)
call Q97(RP7,"TargetIndex",WI7(m5))
call Q97(RP7,"Count",0)
call QD7(RP7,"StolenMana",(L0D)*1.)
call QD7(RP7,"DmgCounter",(L2D)*1.)
call QD7(RP7,"ManaCounter",(L5D)*1.)
call GroupAddUnit(g,m5)
set p5=null
set m5=null
set t=null
set g=null
set DA8=null
endfunction
function D4E takes nothing returns boolean
if GetSpellAbilityId()==1093682994 then
call L_D()
endif
return false
endfunction
function KC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KC8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D4E))
set t=null
endfunction
function D7E takes nothing returns nothing
call GroupAddUnit(RI4,GetEnumUnit())
call IssueTargetOrderById(RG4,$D008F,GetEnumUnit())
endfunction
function D8E takes unit CP7,unit J67 returns boolean
local real a=MY7(J67,CP7)
local real D9E=GetUnitFacing(J67)
local real c1
local real c2
local real d1=-1.
local real d2=-1.
local real e1
local real e2
local real f1=-1.
local real f2=-1.
set LP4="StoneGaze_IsFacing"
if IsUnitVisible(CP7,GetOwningPlayer(J67))==false then
return false
endif
set c1=RMaxBJ(D9E-75,0)
set c2=D9E
if D9E-75<=0 then
set d1=360-(75-(c2-c1))
set d2=360
endif
set e1=D9E
set e2=RMinBJ(D9E+75,360)
if D9E+75>=360 then
set f1=0
set f2=0+(75-(e2-e1))
endif
if a<0 then
set a=a+360
elseif a>360 then
set a=a-360
endif
if(a>c1 and a<c2)or(d1!=-1 and a>d1 and a<d2)or(a>e1 and a<e2)or(f1!=-1 and a>f1 and a<f2)then
return true
endif
return false
endfunction
function DDE takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),RI4)==false and D8E(IM4,GetFilterUnit())and GetUnitAbilityLevel(GetFilterUnit(),1110458961)==0)!=null
endfunction
function DEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local integer DB8=GetUnitAbilityLevel(CP7,1093747028)
local unit DA8=QA7(JZ7,"Caster")
local group g=ZI7()
local group DND=QL7(JZ7,"AlreadyHit")
set LP4="DEE"
set RG4=DA8
set RH4=CP7
set IM4=CP7
set RI4=DND
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),825,Condition(function DDE))
call ForGroup(g,function D7E)
call ZH7(g)
call DestroyEffect(Q17(JZ7,"FX"))
if GetTriggerEvalCount(t)>100 then
call RN7(t)
call Q47(JZ7)
call ZH7(DND)
else
call QH7(JZ7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",CP7,"chest"))
endif
set CP7=null
set DA8=null
set g=null
set t=null
set DND=null
return false
endfunction
function DFE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
set LP4="DFE"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function DEE))
call QG7(JZ7,"Source",GetTriggerUnit())
call QG7(JZ7,"Caster",DA8)
call Z27(DA8,1093677654)
call QP7(JZ7,"AlreadyHit",ZI7())
call QH7(JZ7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl",GetTriggerUnit(),"chest"))
call SetUnitAbilityLevel(DA8,1093677654,GetUnitAbilityLevel(GetTriggerUnit(),1093747028))
call TriggerEvaluate(t)
set t=null
set DA8=null
endfunction
function DGE takes nothing returns boolean
if GetSpellAbilityId()==1093747028 then
call DFE()
endif
return false
endfunction
function K38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DGE))
set t=null
endfunction
function zS takes nothing returns nothing
if IG4<=tl then
set IG4=IG4+1
call GroupAddUnit(IP4,GetEnumUnit())
endif
endfunction
function zt takes unit p5,unit m5 returns nothing
call BN7("SPLK",GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5),.1,.6,.44,.9,.6)
endfunction
function zT takes nothing returns nothing
call SetUnitState(IM4,UNIT_STATE_LIFE,GetUnitState(IM4,UNIT_STATE_LIFE)+25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call CS7(GetEnumUnit(),25)
endif
call zt(GetEnumUnit(),IM4)
endfunction
function zu takes nothing returns nothing
call D38(IN4,IM4,1,25)
if GetUnitTypeId(GetEnumUnit())!=1848657461 then
call CS7(GetEnumUnit(),25)
endif
call zt(GetEnumUnit(),IM4)
endfunction
function zU takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local group g=ZI7()
local integer zv=GetUnitAbilityLevel(Z47,1093685813)*5
set LP4="zU"
set IP4=ZI7()
set IG4=0
set tl=zv
set IM4=Z47
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),$3E8,Condition(function ny))
call GroupRemoveUnit(g,Z47)
call GroupRemoveUnit(g,GetSpellTargetUnit())
call ForGroup(g,function zS)
call ZH7(g)
set g=IP4
set IM4=GetSpellTargetUnit()
set IN4=Z47
if IsUnitAlly(IM4,GetOwningPlayer(Z47))then
call ForGroup(g,function zT)
else
call ForGroup(g,function zu)
endif
call ZH7(g)
set Z47=null
set g=null
endfunction
function DHE takes nothing returns boolean
if GetSpellAbilityId()==1093685813 and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false or GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()))then
call zU()
endif
return false
endfunction
function O38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DHE))
set t=null
endfunction
function DIE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer DJE=R47(RP7,"Last")
set LP4="DIE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(R87(RP7,"SourceDone")==false and GetTriggerUnit()==QA7(RP7,"Source"))then
call QF7(RP7,"SourceDone",true)
call SetHeroStr(QA7(RP7,"Source"),GetHeroStr(QA7(RP7,"Source"),false)-DJE,true)
elseif(R87(RP7,"TargetDone")==false and GetTriggerUnit()==QA7(RP7,"Target"))then
call QF7(RP7,"TargetDone",true)
call SetHeroStr(QA7(RP7,"Target"),GetHeroStr(QA7(RP7,"Target"),false)+DJE,true)
endif
else
if(R87(RP7,"SourceDone")==false)then
call QF7(RP7,"SourceDone",true)
call SetHeroStr(QA7(RP7,"Source"),GetHeroStr(QA7(RP7,"Source"),false)-DJE,true)
endif
if(R87(RP7,"TargetDone")==false)then
call QF7(RP7,"TargetDone",true)
call SetHeroStr(QA7(RP7,"Target"),GetHeroStr(QA7(RP7,"Target"),false)+DJE,true)
endif
call Q47(RP7)
call RN7(t)
endif
set t=null
return false
endfunction
function DKE takes nothing returns nothing
local unit p5=sZ
local unit m5=GetEnumUnit()
local integer DJE
local integer X37=tZ
local trigger t
local integer RP7
set LP4="DKE"
if IsUnitType(m5,UNIT_TYPE_HERO) and FA8(GetUnitTypeId(m5))==false then
set DJE=IMinBJ(GetHeroStr(m5,false)-1,4)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call SetHeroStr(p5,GetHeroStr(p5,false)+DJE,true)
call SetHeroStr(m5,GetHeroStr(m5,false)-DJE,true)
call TriggerRegisterTimerEvent(t,20+5*X37,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function DIE))
call QF7(RP7,"SourceDone",false)
call QF7(RP7,"TargetDone",false)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Last",DJE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",p5,"origin"))
endif
call D38(p5,m5,1,40*X37-20)
set p5=null
set m5=null
set t=null
endfunction
function DME takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=ZI7()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093743955)
local unit oA=CreateUnit(GetOwningPlayer(p5),1747990346,x,y,0)
set LP4="DME"
call DestroyEffect(AddSpecialEffect("effects\\DecayGreen_Groundonly_1.mdx",x,y))
call RemoveLocation(l)
set IM4=p5
set sZ=p5
set tZ=X37
call GroupEnumUnitsInRange(g,x,y,325+25,Condition(function LQ7))
call ForGroup(g,function DKE)
call ZH7(g)
call KillUnit(oA)
set p5=null
set l=null
set g=null
set t=null
set oA=null
endfunction
function DNE takes nothing returns boolean
if GetSpellAbilityId()==1093743955 then
call DME()
endif
return false
endfunction
function OB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DNE))
set t=null
endfunction
function DOE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local unit DPE=QA7(RP7,"Zombie")
local real SPD=GetUnitState(m5,UNIT_STATE_LIFE)
local real DQE=GetUnitState(m5,UNIT_STATE_MAX_LIFE)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call WF7(D18)
call Q47(RP7)
call RN7(t)
if GetTriggerUnit()==m5 then
call KillUnit(DPE)
endif
elseif L8 then
call WF7(D18)
call Q47(RP7)
call RN7(t)
call PauseUnit(DPE,true)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
call DisableTrigger(t)
call IssueTargetOrderById(DPE,$D000F,m5)
call EnableTrigger(t)
elseif(SPD<(100*RU4)or SPD/DQE<(.05*RU4))and GetUnitAbilityLevel(DPE,1110458702)==0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(DPE),1093744438,true)
call IssueTargetOrderById(wZ[GetPlayerId(GetOwningPlayer(DPE))],$D0085,DPE)
call SetPlayerAbilityAvailable(GetOwningPlayer(DPE),1093744438,false)
elseif IsUnitVisible(m5,GetOwningPlayer(DPE))==false then
if(R87(RP7,"VisionBuffer1")) then
if(R87(RP7,"VisionBuffer2")) then
if(R87(RP7,"VisionBuffer3")) then
call Q47(RP7)
call RN7(t)
call KillUnit(DPE)
else
call QF7(RP7,"VisionBuffer3",true)
endif
else
call QF7(RP7,"VisionBuffer2",true)
endif
else
call QF7(RP7,"VisionBuffer1",true)
endif
else
call QF7(RP7,"VisionBuffer1",false)
call QF7(RP7,"VisionBuffer2",false)
call QF7(RP7,"VisionBuffer3",false)
endif
set t=null
set m5=null
set DPE=null
return false
endfunction
function DRE takes nothing returns boolean
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit m5=GetEnumUnit()
local unit DPE=CreateUnit(TZ,1848657461,GetUnitX(m5),GetUnitY(m5),0)
set LP4="DRE"
call IssueTargetOrderById(DPE,$D000F,m5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,DPE,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,DPE,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,DPE,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,DPE,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function DOE))
call Q97(RP7,"TargetIndex",WI7(m5))
call QG7(RP7,"Zombie",DPE)
call Q97(RP7,"Level",RU4)
set t=null
set m5=null
set DPE=null
return false
endfunction
function DSE takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1848657461 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function DTE takes player p returns nothing
local group g=ZI7()
set LP4="lsv"
call GroupEnumUnitsOfPlayer(g,p,Condition(function DSE))
call ZH7(g)
set g=null
endfunction
function DUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DVE=QA7(RP7,"Acolyte1")
local unit DWE=QA7(RP7,"Acolyte2")
local unit DXE=QA7(RP7,"Acolyte3")
local integer X37=R47(RP7,"Level")
local group g
local player DYE
set LP4="DUE"
if WM7(GetOwningPlayer(p5))then
set DYE=Z7[0]
else
set DYE=Y7[0]
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(R87(RP7,"NeedsFix"))then
call BA7(DYE,.4,GetUnitX(p5),GetUnitY(p5),600)
endif
call Q47(RP7)
call RN7(t)
call ShowUnit(p5,false)
call RemoveUnit(DVE)
call RemoveUnit(DWE)
call RemoveUnit(DXE)
call DTE(GetOwningPlayer(p5))
else
if IsUnitVisible(p5,DYE)then
call QF7(RP7,"NeedsFix",true)
endif
set g=ZI7()
set IM4=p5
set TZ=GetOwningPlayer(p5)
set RU4=X37
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),25+$C8+$C8*X37,Condition(function LW7))
if L8==false then
call ForGroup(g,function DRE)
endif
call ZH7(g)
set g=null
endif
set t=null
set p5=null
set DVE=null
set DWE=null
set DXE=null
set DYE=null
return false
endfunction
function DZE takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit p5
local real WT9
local real WU9
local real DAE
local unit DVE
local unit DWE
local unit DXE
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(GetTriggerUnit(),1093743958)
local integer id
set LP4="DZE"
if X37==1 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657482,x,y,0)
elseif X37==2 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657481,x,y,0)
elseif X37==3 then
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657462,x,y,0)
else
set p5=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1848657480,x,y,0)
endif
call BY7(Y34,x,y)
set id=GetPlayerId(GetOwningPlayer(p5))
if wZ[id]==null then
set wZ[id]=CreateUnit(GetOwningPlayer(p5),1697657174,x,y,0)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093744438,false)
call Z27(wZ[id],1093744438)
endif
call SetUnitPosition(p5,AY7(x),AZ7(y))
call UnitApplyTimedLife(p5,1112820806,$A+5*X37)
call RemoveLocation(l)
call BW7(x,y,300)
set WT9=x+$C8*Cos(0*bj_DEGTORAD)
set WU9=y+$C8*Sin(0*bj_DEGTORAD)
set DAE=MZ7(WT9,WU9,x,y)
set DVE=CreateUnit(GetOwningPlayer(p5),1747990344,WT9,WU9,DAE)
call SetUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
call QueueUnitAnimation(DVE,"Stand Work Gold")
set WT9=x+$C8*Cos(120*bj_DEGTORAD)
set WU9=y+$C8*Sin(120*bj_DEGTORAD)
set DAE=MZ7(WT9,WU9,x,y)
set DWE=CreateUnit(GetOwningPlayer(p5),1747990344,WT9,WU9,DAE)
call SetUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
call QueueUnitAnimation(DWE,"Stand Work Gold")
set WT9=x+$C8*Cos($F0*bj_DEGTORAD)
set WU9=y+$C8*Sin($F0*bj_DEGTORAD)
set DAE=MZ7(WT9,WU9,x,y)
set DXE=CreateUnit(GetOwningPlayer(p5),1747990344,WT9,WU9,DAE)
call SetUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call QueueUnitAnimation(DXE,"Stand Work Gold")
call SetUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call QueueUnitAnimation(p5,"Stand Work")
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,3,true)
call TriggerAddCondition(t,Condition(function DUE))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Acolyte1",DVE)
call QG7(RP7,"Acolyte2",DWE)
call QG7(RP7,"Acolyte3",DXE)
call Q97(RP7,"Level",X37)
call QF7(RP7,"NeedsFix",false)
call TriggerEvaluate(t)
set p5=null
set DVE=null
set DWE=null
set DXE=null
set l=null
set t=null
endfunction
function DBE takes nothing returns boolean
if GetSpellAbilityId()==1093743958 then
call DZE()
endif
return false
endfunction
function OC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OC8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DBE))
set t=null
endfunction
function DCE takes unit HSD returns boolean
return(PH7(HSD,SU[FB4])!=null)
endfunction
function D3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=GetUnitAbilityLevel(p5,1093743946)
set LP4="D3E"
call SetUnitAbilityLevel(p5,1093743947,X37)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function D6E takes nothing returns nothing
if IsUnitType(IM4,UNIT_TYPE_HERO) then
if DCE(IN4)then
call SetUnitState(IN4,UNIT_STATE_LIFE,GetUnitState(IN4,UNIT_STATE_LIFE)+GetUnitState(IN4,UNIT_STATE_MAX_LIFE)*.1)
else
call SetUnitState(IN4,UNIT_STATE_LIFE,GetUnitState(IN4,UNIT_STATE_LIFE)+GetUnitState(IN4,UNIT_STATE_MAX_LIFE)*.06)
endif
else
if DCE(IN4)then
call SetUnitState(IN4,UNIT_STATE_LIFE,GetUnitState(IN4,UNIT_STATE_LIFE)+GetUnitState(IN4,UNIT_STATE_MAX_LIFE)*.03)
else
call SetUnitState(IN4,UNIT_STATE_LIFE,GetUnitState(IN4,UNIT_STATE_LIFE)+GetUnitState(IN4,UNIT_STATE_MAX_LIFE)*.02)
endif
endif
endfunction
function DLE takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer XZ9=GetHandleId(t2)
local trigger t1=Q67(XZ9,"t1")
local integer MID=GetHandleId(t1)
local unit p5=QA7(XZ9,"Source")
local unit m5
local real d
local real a
local boolean D1E=R87(XZ9,"IgnorePlague")
set LP4="DLE"
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetTriggerUnit()==p5)or(GetTriggerEventId()!=EVENT_UNIT_DAMAGED and GetTriggerEventId()!=EVENT_UNIT_DEATH)then
call Q47(MID)
call Q47(XZ9)
call RN7(t1)
call RN7(t2)
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitIllusion(GetDyingUnit())==false then
call B27(GetDyingUnit(),p5,1747990361,"D6E",600)
endif
elseif D1E==false then
set m5=GetTriggerUnit()
set d=N37(p5,m5)
if d<775 and GetEventDamage()>4 then
if DCE(p5)then
set a=20+5*WZ
else
set a=$F+5*WZ
endif
if d>$C8 then
set a=a-$F*((d-$96)/(775-$96))
endif
call QF7(XZ9,"IgnorePlague",true)
call D38(GetEventDamageSource(),GetTriggerUnit(),3,GetEventDamage()*a/ 100)
call QF7(XZ9,"IgnorePlague",false)
endif
endif
set t2=null
set t1=null
set p5=null
set m5=null
return false
endfunction
function D0E takes nothing returns boolean
local trigger t1=GetTriggeringTrigger()
local integer MID=GetHandleId(t1)
local trigger t2=Q67(MID,"t2")
local integer XZ9=GetHandleId(t2)
local unit m5=GetTriggerUnit()
local unit p5=QA7(MID,"Source")
set LP4="D0E"
if IsUnitEnemy(p5,GetOwningPlayer(m5)) and IsUnitType(m5,UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(m5,1093678162)==0 then
if R87(XZ9,"Registered"+I2S(GetHandleId(m5)))==false then
call TriggerRegisterUnitEvent(t2,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t2,m5,EVENT_UNIT_DEATH)
call QF7(XZ9,"Registered"+I2S(GetHandleId(m5)),true)
endif
endif
set t1=null
set t2=null
set m5=null
set p5=null
return false
endfunction
function D5E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t1=CreateTrigger()
local integer MID=GetHandleId(t1)
local trigger t2=CreateTrigger()
local integer XZ9=GetHandleId(t2)
local trigger t3=CreateTrigger()
local integer D2E=GetHandleId(t3)
local integer X37=GetUnitAbilityLevel(p5,1093743946)
set LP4="D5E"
set WZ=X37
call TriggerRegisterUnitInRange(t1,p5,750,Condition(function WE7))
call TriggerAddCondition(t1,Condition(function D0E))
call QI7(MID,"t2",t2)
call QG7(MID,"Source",p5)
call TriggerRegisterTimerEvent(t2,30,false)
call TriggerRegisterUnitEvent(t2,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t2,Condition(function DLE))
call QI7(XZ9,"t1",t1)
call QG7(XZ9,"Source",p5)
call QF7(XZ9,"IgnorePlague",false)
call TriggerRegisterTimerEvent(t3,.01,false)
call TriggerAddCondition(t3,Condition(function D3E))
call QG7(D2E,"Source",p5)
set p5=null
set t1=null
set t2=null
set t3=null
endfunction
function D_E takes nothing returns boolean
if GetSpellAbilityId()==1093743946 and GetUnitTypeId(GetTriggerUnit())==1211117650 then
call D5E()
endif
return false
endfunction
function O68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D_E))
call AC7(1093743947)
set t=null
endfunction
function E4E takes nothing returns nothing
local unit J67=GetEnumUnit()
local unit CP7=RW4
local real E7E=GetUnitState(J67,UNIT_STATE_LIFE)
local real E8E=GetUnitState(J67,UNIT_STATE_MAX_LIFE)
local real E9E=((.003+.003*RX4)*E8E)/2
set LP4="E4E"
if E7E<E9E then
call SetUnitState(J67,UNIT_STATE_LIFE,1)
call D38(CP7,J67,3,100)
call D38(CP7,J67,1,100)
call D38(CP7,J67,2,100)
else
call SetUnitState(J67,UNIT_STATE_LIFE,B97(GetUnitState(J67,UNIT_STATE_LIFE)-E9E,1))
endif
set J67=null
set CP7=null
endfunction
function EDE takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false and(GetUnitAbilityLevel((GetFilterUnit()),1113815395)>0)==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and GetUnitAbilityLevel(GetFilterUnit(),1110456372)>0)!=null
endfunction
function EEE takes nothing returns boolean
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit p5=QA7(RP7,"Source")
local group g
set LP4="EEE"
if A47(p5)==false then
set g=ZI7()
set IM4=p5
set RW4=p5
set RX4=GetUnitAbilityLevel(p5,1093677390)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),$401,Condition(function EDE))
call ForGroup(g,function E4E)
call ZH7(g)
endif
set g=null
set p5=null
return false
endfunction
function EFE takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="ljv"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function EEE))
call QG7(GetHandleId(t),"Source",Z47)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function EGE takes nothing returns boolean
if GetLearnedSkill()==1093677390 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677390)==1 then
call EFE(GetTriggerUnit(),false)
endif
return false
endfunction
function K08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K08"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function EGE))
set t=null
endfunction
function EHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093678640)
local real EIE=2*DB8
local real EJE=DB8
local integer Y09=(LoadInteger(C7,(JZ7),(34)))
if DB8==4 then
set EIE=$A
endif
set EJE=EJE*Y09
set EIE=EIE*Y09
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)+EIE)
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+EJE)
if GetTriggerEvalCount(t)>5 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function EKE takes nothing returns nothing
local unit CP7=GetKillingUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093678640)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",CP7,"origin"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function EHE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call SaveInteger(C7,(JZ7),(34),($A))
else
call SaveInteger(C7,(JZ7),(34),(1))
endif
set CP7=null
set t=null
endfunction
function EME takes nothing returns boolean
if GetUnitAbilityLevel(GetKillingUnit(),1110454866)>0 then
call EKE()
endif
return false
endfunction
function K68 takes nothing returns nothing
set Dk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dk,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Dk,Condition(function EME))
endfunction
function ENE takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local real YU9=R77(JZ7,"Damage")
local real JWD=R77(JZ7,"Heal")
set LP4="ENE"
if IsUnitAlly(J67,GetOwningPlayer(CP7))then
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+JWD)
else
call D38(CP7,J67,1,YU9)
endif
set CP7=null
set J67=null
endfunction
function EOE takes nothing returns nothing
local trigger t=B27(IM4,GetEnumUnit(),1747988567,"ENE",400)
local integer RP7=GetHandleId(t)
set LP4="EOE"
call QD7(RP7,"Damage",IH4)
call QD7(RP7,"Heal",IJ4)
set t=null
endfunction
function EPE takes nothing returns nothing
if IsUnitVisible(GetEnumUnit(),GetOwningPlayer(IM4))then
call EOE()
endif
endfunction
function EQE takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(ZO7,PR4)
local real r
local real YU9
local real JWD
set LP4="EQE"
if DB8==1 then
set YU9=75
set JWD=70
set r=500
elseif DB8==2 then
set YU9=125
set JWD=90
set r=500
elseif DB8==3 then
set YU9=$C8
set JWD=110
set r=500
elseif DB8==4 then
set YU9=275
set JWD=$82
set r=500
endif
set IM4=ZO7
set IH4=YU9
set IJ4=JWD
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),r,Condition(function D48))
call GroupRemoveUnit(g,ZO7)
call ForGroup(g,function EPE)
call ZH7(g)
call SetUnitState(ZO7,UNIT_STATE_LIFE,GetUnitState(ZO7,UNIT_STATE_LIFE)+JWD)
set ZO7=null
set g=null
endfunction
function ERE takes nothing returns boolean
if GetSpellAbilityId()==PR4 then
call EQE()
endif
return false
endfunction
function KL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KL8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ERE))
set t=null
endfunction
function ESE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real Y09=(LoadReal(C7,(JZ7),(680)))
local integer ETE=GetUnitAbilityLevel(CP7,1093679184)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",J67,"origin"))
if ETE>0 then
set FP7=true
call D38(CP7,J67,1,Y09*(GetUnitState(J67,UNIT_STATE_MAX_LIFE)-GetUnitState(J67,UNIT_STATE_LIFE)))
set FP7=false
else
call D38(CP7,J67,1,Y09*(GetUnitState(J67,UNIT_STATE_MAX_LIFE)-GetUnitState(J67,UNIT_STATE_LIFE)))
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function EUE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer EVE=GetUnitAbilityLevel(CP7,1093678647)
local integer EWE=GetUnitAbilityLevel(CP7,1093679184)
local real Y09
set LP4="EUE"
if EVE==1 then
set Y09=.4
elseif EVE==2 or EWE==1 then
set Y09=.6
elseif EVE==3 or EWE==2 then
set Y09=.9
elseif EWE==3 then
set Y09=1.2
endif
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),(680),((Y09)*1.))
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerAddCondition(t,Condition(function ESE))
set t=null
set CP7=null
set J67=null
endfunction
function EXE takes nothing returns boolean
if(GetSpellAbilityId()==1093678647 or GetSpellAbilityId()==1093679184)and ZG7(GetSpellTargetUnit())==false then
call EUE()
endif
return false
endfunction
function K18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EXE))
set t=null
endfunction
function EYE takes nothing returns boolean
return GetSpellAbilityId()==1093682521 or GetSpellAbilityId()==1093682760 or GetSpellAbilityId()==1093682736
endfunction
function EZE takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)!=1)!=null
endfunction
function EAE takes nothing returns nothing
call UnitDamageTarget(GetTriggerUnit(),GetEnumUnit(),75*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_DEATH,WEAPON_TYPE_WHOKNOWS)
endfunction
function EBE takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit DA8
local group YY9=ZI7()
local boolexpr NJD=Condition(function EZE)
local real ZA7=GetUnitFacing(ZO7)
local real x
local real y
set LP4="EBE"
if GetSpellAbilityId()==1093682521 then
set x=GetUnitX(ZO7)+$C8*Cos(ZA7*bj_DEGTORAD)
set y=GetUnitY(ZO7)+$C8*Sin(ZA7*bj_DEGTORAD)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1697656886,x,y,0)
call UnitApplyTimedLife(DA8,1112820806,2.)
call GroupEnumUnitsInRange(YY9,x,y,275.,NJD)
call ForGroup(YY9,function EAE)
call GroupClear(YY9)
elseif GetSpellAbilityId()==1093682760 then
set x=GetUnitX(ZO7)+450*Cos(ZA7*bj_DEGTORAD)
set y=GetUnitY(ZO7)+450*Sin(ZA7*bj_DEGTORAD)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1697656886,x,y,0)
call UnitApplyTimedLife(DA8,1112820806,2.)
call GroupEnumUnitsInRange(YY9,x,y,275.,NJD)
call ForGroup(YY9,function EAE)
call GroupClear(YY9)
elseif GetSpellAbilityId()==1093682736 then
set x=GetUnitX(ZO7)+700*Cos(ZA7*bj_DEGTORAD)
set y=GetUnitY(ZO7)+700*Sin(ZA7*bj_DEGTORAD)
set DA8=CreateUnit(GetOwningPlayer(ZO7),1697656886,x,y,0)
call UnitApplyTimedLife(DA8,1112820806,2.)
call GroupEnumUnitsInRange(YY9,x,y,275.,NJD)
call ForGroup(YY9,function EAE)
call GroupClear(YY9)
endif
call ZH7(YY9)
call DestroyBoolExpr(NJD)
set ZO7=null
set DA8=null
set YY9=null
set NJD=null
endfunction
function K28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function EBE)
call TriggerAddCondition(t,Condition(function EYE))
set t=null
endfunction
function ECE takes nothing returns nothing
if(GetLearnedSkill()==1093682521)then
if(GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682736)
call UnitAddAbility(GetTriggerUnit(),1093682760)
else
call SetUnitAbilityLevelSwapped(1093682736,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
call SetUnitAbilityLevelSwapped(1093682760,GetTriggerUnit(),GetUnitAbilityLevelSwapped(1093682521,GetTriggerUnit()))
endif
endif
if(GetLearnedSkill()==1093681746)then
if(GetUnitAbilityLevelSwapped(1093681746,GetTriggerUnit())==1)then
call UnitAddAbility(GetTriggerUnit(),1093682001)
endif
endif
endfunction
function RM takes nothing returns nothing
set DK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DK,EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(DK,function ECE)
endfunction
function E3E takes nothing returns boolean
return GetSpellAbilityId()==1093810506 or GetSpellAbilityId()==1093750096
endfunction
function E6E takes unit Z47,integer ELE returns nothing
local integer E1E=ELE
local integer Zd
local integer U8
local location Mk=GetUnitLoc(GetTriggerUnit())
local location sA
local integer X37=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if X37==0 then
return
endif
set E1E=E1E/2
set Zd=1
set U8=E1E
loop
exitwhen Zd>U8
set sA=OF7(Mk,50.,(I2R(Zd)*(360/E1E)))
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(Z47),Mk,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683271)
call SetUnitAbilityLevelSwapped(1093683271,bj_lastCreatedUnit,X37)
call UnitApplyTimedLifeBJ(2.,1112820806,bj_lastCreatedUnit)
call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D00FA,sA)
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(sA)
set Zd=Zd+1
endloop
call RemoveLocation(Mk)
set Mk=null
set Z47=null
set sA=null
endfunction
function E0E takes nothing returns nothing
local integer E1E=(LoadInteger(C7,(GetHandleId(GetTriggerUnit())),(710)))
local unit U_9=GetTriggerUnit()
call E6E(U_9,E1E)
set U_9=null
endfunction
function K_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E3E))
call TriggerAddAction(t,function E0E)
set t=null
endfunction
function E5E takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IN4
local unit J67=IM4
local integer E1E=GetUnitAbilityLevel(CP7,1093682001)
local integer E2E
local integer DB8=GetUnitAbilityLevel(CP7,1093681746)
set LP4="E5E"
if DB8==1 then
set E2E=$C
elseif DB8==2 then
set E2E=20
elseif DB8==3 then
set E2E=28
else
set E2E=36
endif
set E2E=E2E+1
if IsUnitType(J67,UNIT_TYPE_HERO)==false then
set E1E=E1E+1
else
set E1E=E1E+$C
endif
set E1E=IMinBJ(E2E,E1E)
call SetUnitAbilityLevel(CP7,1093682001,E1E)
call SaveInteger(C7,(GetHandleId(CP7)),(710),(E1E))
set CP7=null
endfunction
function E_E takes nothing returns nothing
local integer E1E
local integer DB8
local integer E2E
local trigger t
local integer JZ7
local unit CP7=GetKillingUnit()
set LP4="E_E"
if GetUnitTypeId(CP7)==1697656899 then
set CP7=G7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))]
endif
set E1E=GetUnitAbilityLevel(CP7,1093682001)
set DB8=GetUnitAbilityLevel(CP7,1093681746)
if DB8==1 then
set E2E=$C
elseif DB8==2 then
set E2E=20
elseif DB8==3 then
set E2E=28
else
set E2E=36
endif
if E1E<=E2E then
set t=B27(GetTriggerUnit(),CP7,1747993426,"E5E",500)
set JZ7=GetHandleId(t)
set t=null
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
set CP7=null
endfunction
function F4E takes nothing returns nothing
local integer F7E=(LoadInteger(C7,(GetHandleId(GetTriggerUnit())),(710)))
call SaveInteger(C7,(GetHandleId(GetTriggerUnit())),(710),(R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*.5)+1))
call SetUnitAbilityLevel(GetTriggerUnit(),1093682001,R2I(GetUnitAbilityLevel(GetTriggerUnit(),1093682001)*.5)+1)
call E6E(GetTriggerUnit(),F7E-(LoadInteger(C7,(GetHandleId(GetTriggerUnit())),(710))))
endfunction
function F8E takes nothing returns boolean
if GetUnitAbilityLevel(GetKillingUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call E_E()
elseif GetUnitAbilityLevel(G7[GetPlayerId(GetOwningPlayer(GetKillingUnit()))],1093681746)>0 and GetUnitTypeId(GetKillingUnit())==1697656899 then
call E_E()
endif
if GetUnitAbilityLevel(GetTriggerUnit(),1093681746)>0 and IsUnitIllusion(GetTriggerUnit())==false then
call F4E()
endif
return false
endfunction
function F9E takes nothing returns boolean
local unit ZO7=G7[GetPlayerId(GetTriggerPlayer())]
local integer FDE=GetUnitAbilityLevel(ZO7,1093682001)-1
local integer FEE=0
local integer DB8=GetUnitAbilityLevel(ZO7,1093681746)
set LP4="F9E"
if DB8==1 then
set FEE=$C
elseif DB8==2 then
set FEE=20
elseif DB8==3 then
set FEE=28
elseif DB8==4 then
set FEE=36
endif
set FDE=IMaxBJ(IMinBJ(FDE,FEE),0)
if GetUnitTypeId(ZO7)==1315334514 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetObjectName(1848658757)+" "+I2S(FDE)+"/"+I2S(FEE))
endif
set ZO7=null
return false
endfunction
function K58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K58"
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function F8E))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function F9E))
set t=null
endfunction
function FFE takes nothing returns boolean
return(( not(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)))and( not(GetUnitAbilityLevelSwapped(1093678162,GetFilterUnit())==1))and( not(IsUnitAliveBJ(GetFilterUnit())==false))and( not(GetUnitTypeId(GetFilterUnit())==1865429043))and( not(IsUnitEnemy(GetFilterUnit(),GetTriggerPlayer())==false))and( not(GetTriggerUnit()==GetFilterUnit()))and( not(IsUnitVisible(GetFilterUnit(),GetTriggerPlayer())==false)))!=null
endfunction
function FGE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location Mk=GetUnitLoc(Z47)
local integer X37=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if X37==0 then
set X37=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),Mk,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,X37)
call UnitApplyTimedLifeBJ(2.,1112820806,bj_lastCreatedUnit)
call IssueTargetOrderById(bj_lastCreatedUnit,$D00DD,GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(Mk)
set Mk=null
set Z47=null
endfunction
function FHE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location Mk=GetUnitLoc(Z47)
local integer X37=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if X37==0 then
set X37=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),Mk,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,X37)
call UnitApplyTimedLifeBJ(2.,1112820806,bj_lastCreatedUnit)
call IssueTargetOrderById(bj_lastCreatedUnit,$D00DD,GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(Mk)
set Mk=null
set Z47=null
endfunction
function FIE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location Mk=GetUnitLoc(Z47)
local integer X37=GetUnitAbilityLevelSwapped(1093810506,GetTriggerUnit())
if X37==0 then
set X37=GetUnitAbilityLevelSwapped(1093750096,GetTriggerUnit())
endif
call CreateNUnitsAtLoc(1,1697656899,GetOwningPlayer(GetEnumUnit()),Mk,bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,1093683272)
call SetUnitAbilityLevelSwapped(1093683272,bj_lastCreatedUnit,X37)
call UnitApplyTimedLifeBJ(2.,1112820806,bj_lastCreatedUnit)
call IssueTargetOrderById(bj_lastCreatedUnit,$D00DD,GetEnumUnit())
call SetUnitPathing(bj_lastCreatedUnit,false)
call SetUnitInvulnerable(bj_lastCreatedUnit,true)
call UnitAddAbility(bj_lastCreatedUnit,1097625443)
call RemoveLocation(Mk)
set Mk=null
set Z47=null
endfunction
function FJE takes nothing returns nothing
local location Mk=GetUnitLoc(GetTriggerUnit())
local unit Z47=GetTriggerUnit()
local group FP8
set FP8=ZI7()
call GroupEnumUnitsInRangeOfLoc(FP8,Mk,700,Condition(function FFE))
call ForGroup(FP8,function FGE)
call ZH7(FP8)
set FP8=ZI7()
call GroupEnumUnitsInRangeOfLoc(FP8,Mk,400,Condition(function FFE))
call ForGroup(FP8,function FHE)
call ZH7(FP8)
set FP8=ZI7()
call GroupEnumUnitsInRangeOfLoc(FP8,Mk,$C8,Condition(function FFE))
call ForGroup(FP8,function FIE)
call ZH7(FP8)
call RemoveLocation(Mk)
set Mk=null
set Z47=null
set FP8=null
endfunction
function M48 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E3E))
call TriggerAddAction(t,function FJE)
set t=null
endfunction
function FKE takes nothing returns boolean
return GetSpellAbilityId()==1093677640
endfunction
function FME takes nothing returns nothing
local unit oA
set LP4="FME"
if(AW7()==false)then
set oA=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call Z27(oA,1093677650)
call IssueTargetOrderById(oA,$D006B,GetSpellTargetUnit())
else
set oA=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING)
call Z27(oA,1093748785)
call IssueTargetOrderById(oA,$D006B,GetSpellTargetUnit())
endif
set oA=null
endfunction
function M88 takes nothing returns nothing
set Dm=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dm,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Dm,Condition(function FKE))
call TriggerAddAction(Dm,function FME)
endfunction
function FNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CB9=(LoadUnitHandle(C7,(YY7),(2)))
local unit FOE=(LoadUnitHandle(C7,(YY7),(19)))
set LP4="FNE"
call ResetUnitAnimation(CB9)
call RemoveUnit(FOE)
call FlushChildHashtable(C7,(YY7))
call RN7(t)
set CB9=null
set FOE=null
set t=null
return false
endfunction
function FPE takes nothing returns nothing
local unit CB9=GetTriggerUnit()
local unit FOE=CreateUnit(GetOwningPlayer(CB9),1966092617,GetUnitX(CB9),GetUnitY(CB9),GetUnitFacing(CB9))
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
set LP4="FPE"
call TriggerRegisterUnitEvent(t,CB9,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function FNE))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call SaveUnitHandle(C7,(YY7),(19),(FOE))
call SetUnitVertexColorBJ(FOE,0,0,0,75)
call SetUnitAnimation(FOE,"spell third")
set CB9=null
set FOE=null
set t=null
endfunction
function FQE takes nothing returns boolean
if GetSpellAbilityId()==1093679171 and GetUnitAbilityLevel(GetTriggerUnit(),1093679171)<5 then
call FPE()
endif
return false
endfunction
function M98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function FQE))
set t=null
endfunction
function FRE takes nothing returns boolean
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit FSE=QA7(JZ7,"NightStalker")
local unit FTE=QA7(JZ7,"VisionUnit")
set LP4="FRE"
if FSE==null or A47(FSE)or AW7()or(PH7(FSE,SU[GD4])==null and PH7(FSE,SU[GW4])==null)then
call ShowUnit(FTE,false)
else
call ShowUnit(FTE,true)
call SetUnitX(FTE,GetUnitX(FSE))
call SetUnitY(FTE,GetUnitY(FSE))
endif
if GetOwningPlayer(FTE)!=GetOwningPlayer(FSE)then
call SetUnitOwner(FTE,GetOwningPlayer(FSE),true)
endif
set FSE=null
set FTE=null
return false
endfunction
function FUE takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit FSE=QA7(RP7,"NightStalker")
set LP4="FUE"
if FSE!=null and AW7()and A47(FSE)==false then
call UnitRemoveAbility(FSE,1093742902)
call UnitRemoveAbility(FSE,1093742903)
call SetUnitAbilityLevel(FSE,1395667009,5)
call SetUnitAbilityLevel(FSE,1093679171,5)
elseif FSE!=null and AW7()==false and A47(FSE)==false then
call Z27(FSE,1093742902)
call Z27(FSE,1093742903)
call SetUnitAbilityLevel(FSE,1395667009,GetUnitAbilityLevel(FSE,1093679158))
call SetUnitAbilityLevel(FSE,1093679171,GetUnitAbilityLevel(FSE,1093679173))
endif
set FSE=null
endfunction
function FVE takes unit FSE,boolean XY9,integer FWE returns nothing
local integer JZ7=GetHandleId(FSE)
local trigger t
set LP4="LNv"
if R87(JZ7,"NightStalkerAlreadyLearned")==false or XY9 then
call QF7(JZ7,"NightStalkerAlreadyLearned",true)
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,2.)
call TriggerRegisterGameStateEventTimeOfDay(t,LESS_THAN,6.)
call TriggerRegisterGameStateEventTimeOfDay(t,GREATER_THAN,18.)
call TriggerAddAction(t,function FUE)
call QG7(GetHandleId(t),"NightStalker",FSE)
if XY9 then
if FWE==1093679173 then
set aj[GetPlayerId(GetOwningPlayer(FSE))]=t
elseif FWE==1093679158 then
set nj[GetPlayerId(GetOwningPlayer(FSE))]=t
endif
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function FRE))
call QG7(JZ7,"NightStalker",FSE)
call QG7(JZ7,"VisionUnit",CreateUnit(GetOwningPlayer(FSE),1865429313,GetUnitX(FSE),GetUnitY(FSE),0))
if XY9 then
if FWE==1093679173 then
set Rj[GetPlayerId(GetOwningPlayer(FSE))]=t
elseif FWE==1093679158 then
set Aj[GetPlayerId(GetOwningPlayer(FSE))]=t
endif
endif
endif
if(FWE==1093679158)then
call Z27(FSE,1395667009)
if(AW7())then
call SetUnitAbilityLevel(FSE,1395667009,5)
else
call SetUnitAbilityLevel(FSE,1395667009,GetUnitAbilityLevel(FSE,1093679158))
endif
endif
if(FWE==1093679173)then
call UnitAddAbility(FSE,1093679171)
if(AW7())then
call SetUnitAbilityLevel(FSE,1093679171,5)
else
call SetUnitAbilityLevel(FSE,1093679171,GetUnitAbilityLevel(FSE,1093679173))
endif
endif
set t=null
endfunction
function FXE takes nothing returns boolean
if(GetLearnedSkill()==1093679158 or GetLearnedSkill()==1093679173)and IsUnitIllusion(GetTriggerUnit())==false then
call FVE(GetTriggerUnit(),false,GetLearnedSkill())
endif
return false
endfunction
function M78 takes nothing returns nothing
set NJ=CreateTrigger()
call BT7(NJ,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(NJ,Condition(function FXE))
endfunction
function FYE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
set LP4="FYE"
call UnitRemoveAbility(p5,1093747535)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
set m5=null
return false
endfunction
function FZE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(p5,1093685324)
local trigger t
local integer RP7
call DestroyEffect(AddSpecialEffect("war3mapImported\\PhantomStrike.mdx",GetUnitX(p5),GetUnitY(p5)))
set LP4="FZE"
call SetUnitX(p5,GetUnitX(m5))
call SetUnitY(p5,GetUnitY(m5))
if IsUnitAlly(p5,GetOwningPlayer(m5))==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call Z27(p5,1093747535)
call Q97(GetHandleId(p5),"Count",0)
call QG7(GetHandleId(p5),"Target",m5)
call IssueTargetOrderById(p5,$D000F,m5)
if(GetPlayerController(GetOwningPlayer(p5))!=MAP_CONTROL_USER)then
call NX7(.01)
call IssueTargetOrderById(p5,$D000F,m5)
endif
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FYE))
call QG7(RP7,"Source",p5)
call Q97(RP7,"TargetIndex",WI7(m5))
endif
set p5=null
set m5=null
set t=null
endfunction
function FAE takes nothing returns boolean
if GetSpellAbilityId()==1093685324 then
call FZE()
endif
return false
endfunction
function FBE takes unit p5 returns nothing
local integer RP7=GetHandleId(p5)
local unit m5=QA7(RP7,"Target")
local integer VT9=R47(RP7,"Count")
set LP4="LJv"
if GetTriggerUnit()!=m5 or VT9>=4 then
call UnitRemoveAbility(p5,1093747535)
call Q47(RP7)
else
set VT9=VT9+1
call Q97(RP7,"Count",VT9)
endif
set m5=null
endfunction
function FCE takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093747535)>0 then
call FBE(GetAttacker())
endif
return false
endfunction
function MF8 takes nothing returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
set LP4="MF8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FAE))
call BT7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t2,Condition(function FCE))
set t=null
set t2=null
endfunction
function F3E takes unit CP7,boolean F6E returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093677904)
set LP4="Blur_UpdateIcon"
if F6E==false then
call UnitRemoveAbility(CP7,1093743430)
call UnitRemoveAbility(CP7,1110458674)
else
call Z27(CP7,1093743430)
endif
endfunction
function FLE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local boolean F1E=(LoadBoolean(C7,(JZ7),(674)))
set LP4="FLE"
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if CP7!=null and A47(CP7)==false and GetUnitAbilityLevel(CP7,1093677904)>0 then
set IM4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$659,Condition(function LM7))
if FirstOfGroup(g)==null then
if F1E and ZD8>$F then
set F1E=false
call SaveBoolean(C7,(JZ7),(674),(F1E))
set ZD8=0
call SaveInteger(C7,(JZ7),(34),(ZD8))
endif
if F1E==false then
set ZD8=0
call SaveInteger(C7,(JZ7),(34),(ZD8))
call SaveInteger(C7,(GetHandleId((CP7))),((4302)),(2))
call F3E(CP7,false)
call SetUnitVertexColorBJ(CP7,100,100,100,0)
if GetUnitAbilityLevel(CP7,1093808211)==0 then
call UnitSetUsesAltIcon(CP7,false)
endif
endif
else
if F1E==false and ZD8>$F then
set F1E=true
set ZD8=0
call SaveBoolean(C7,(JZ7),(674),(F1E))
call SaveInteger(C7,(JZ7),(34),(ZD8))
endif
if F1E then
set ZD8=0
call SaveInteger(C7,(JZ7),(34),(ZD8))
call SaveInteger(C7,(GetHandleId((CP7))),((4302)),(1))
call F3E(CP7,true)
call SetUnitVertexColorBJ(CP7,100,100,100,75)
if IsPlayerEnemy(GetOwningPlayer(CP7),GetLocalPlayer()) and Y27(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(CP7,true)
else
call UnitSetUsesAltIcon(CP7,false)
endif
endif
endif
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function F0E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="F0E"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function FLE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveBoolean(C7,(JZ7),(674),(false))
set t=null
set CP7=null
endfunction
function F5E takes nothing returns boolean
if GetLearnedSkill()==1093677904 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093677904)==1 then
call F0E()
endif
return false
endfunction
function MD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MD8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function F5E))
set t=null
endfunction
function F2E takes nothing returns nothing
local unit DA8
set LP4="F2E"
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
call GroupAddUnit(IP4,GetEnumUnit())
set DA8=CreateUnit(GetOwningPlayer(GetEnumUnit()),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call Z27(DA8,1093685833)
call SetUnitAbilityLevel(DA8,1093685833,GetUnitAbilityLevel(ZQ4,1093685825))
call IssueTargetOrderById(DA8,$D008A,GetEnumUnit())
call D38(ZQ4,GetEnumUnit(),1,100)
endif
set DA8=null
endfunction
function F_E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer i
local group g=QL7(RP7,"g")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local group G4E=ZI7()
local unit U_9=QA7(RP7,"UnitVar")
set LP4="F_E"
set IM4=U_9
set ZQ4=U_9
call GroupEnumUnitsInRange(G4E,x,y,300,Condition(function LF7))
set IP4=g
call ForGroup(G4E,function F2E)
call ZH7(G4E)
if GetTriggerEvalCount(t)>ZO4*$A then
set i=1
loop
exitwhen i>16
call DestroyEffect(Q17(RP7,"Effect"+I2S(i)))
set i=i+1
endloop
call ZH7(g)
call Q47(RP7)
call RN7(t)
endif
set t=null
set g=null
set G4E=null
set U_9=null
return false
endfunction
function G7E takes nothing returns nothing
local integer i=1
local location l=GetSpellTargetLoc()
local real G8E=GetLocationX(l)
local real G9E=GetLocationY(l)
local real x
local real y
local integer GDE=16
local string fx="Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl"
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local group g=ZI7()
set LP4="G7E"
call BY7(UN,G8E,G9E)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function F_E))
call QP7(JZ7,"g",g)
call QG7(JZ7,"UnitVar",GetTriggerUnit())
call QD7(JZ7,"x",G8E)
call QD7(JZ7,"y",G9E)
loop
exitwhen i>GDE
set x=G8E+ZP4*Cos(i*360/GDE*bj_DEGTORAD)
set y=G9E+ZP4*Sin(i*360/GDE*bj_DEGTORAD)
call QH7(JZ7,"Effect"+I2S(i),AddSpecialEffect(fx,x,y))
if i==1 or i==5 or i==9 or i==$D then
set x=G8E+275*Cos(i*360/GDE*bj_DEGTORAD)
set y=G9E+275*Sin(i*360/GDE*bj_DEGTORAD)
endif
set i=i+1
endloop
call RemoveLocation(l)
set l=null
set t=null
set g=null
endfunction
function GEE takes nothing returns boolean
if GetSpellAbilityId()==1093685825 then
call G7E()
endif
return false
endfunction
function OV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GEE))
set t=null
endfunction
function GFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit p5=QA7(JZ7,"Source")
local unit DA8=QA7(JZ7,"DarkRiftFXUnit")
local integer X37=R47(JZ7,"Level")
local integer GGE=90
local integer ZD8=R47(JZ7,"Count")
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093815618 then
call KillUnit(DA8)
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
else
set ZD8=ZD8+1
call Q97(JZ7,"Count",ZD8)
endif
if X37==1 then
set GGE=$A0
elseif X37==2 then
set GGE=120
endif
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
if ZD8>GGE then
call KillUnit(DA8)
call RN7(t)
call Q47(JZ7)
elseif ZD8>30 then
call UnitRemoveAbility(DA8,1097625443)
call ShowUnit(DA8,true)
call Z27(DA8,1097625443)
endif
set t=null
set DA8=null
set p5=null
return false
endfunction
function GHE takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call RR7(GetEnumUnit(),"4406",1)
call SetUnitPosition(GetEnumUnit(),IH4,IJ4)
call PanCameraToTimedForPlayer(GetOwningPlayer(GetEnumUnit()),IH4,IJ4,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call XG7(GetEnumUnit())
endfunction
function GIE takes unit p5,unit m5 returns nothing
local group g=ZI7()
set LP4="Portal_Action"
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(p5),GetUnitY(p5)))
call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\ShimmeringPortal\\ShimmeringPortal.mdl",GetUnitX(m5),GetUnitY(m5)))
set IH4=GetUnitX(m5)
set IJ4=GetUnitY(m5)
set IM4=p5
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),475,Condition(function D78))
call ForGroup(g,function GHE)
call ZH7(g)
set g=null
endfunction
function GJE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit p5=QA7(JZ7,"Source")
local unit m5=QA7(JZ7,"Target")
set LP4="GJE"
call DestroyEffect(Q17(JZ7,"FX"))
if GetTriggerEventId()==EVENT_UNIT_DEATH or m5==null or A47(m5)then
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
call AV7(GetOwningPlayer(p5),GetObjectName(1848652614))
elseif p5==null or A47(p5)then
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call AV7(GetOwningPlayer(p5),GetObjectName(1848652615))
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093815618 then
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
endif
else
call RN7(t)
call FlushChildHashtable(C7,(JZ7))
call UnitRemoveType(m5,UNIT_TYPE_PEON)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,false)
call GIE(p5,m5)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function GKE takes nothing returns boolean
local real d
set LP4="GKE"
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false or GetUnitAbilityLevel(GetFilterUnit(),1093678162)>0 or GetOwningPlayer(GetFilterUnit())==Player($F)then
return false
endif
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)or(IG4>0 and I_9(GetFilterUnit()))then
set d=N67(IJ4,IK4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IH4 then
set IH4=d
set IM4=GetFilterUnit()
endif
endif
return false
endfunction
function GME takes unit p5 returns unit
local location l
local group g
local real x
local real y
set LP4="Portal_GetNewTarget"
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
set g=ZI7()
set IG4=GetUnitAbilityLevel(p5,1093685808)
set IM4=null
set IH4=9999
set IJ4=x
set IK4=y
call GroupEnumUnitsInRange(g,x,y,$FA0,Condition(function GKE))
call ZH7(g)
call RemoveLocation(l)
set l=null
set g=null
return IM4
endfunction
function GNE takes unit p5 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit m5=GetSpellTargetUnit()
local unit u
set LP4="Portal_CreatePreEffect"
if m5==null then
set m5=GME(p5)
endif
if m5==null then
call AV7(GetOwningPlayer(p5),GetObjectName(1848652616))
return
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093685808,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815618,true)
call Z27(p5,1093815618)
call TriggerRegisterTimerEvent(t,6-GetUnitAbilityLevel(p5,1093685808),false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GJE))
call QH7(JZ7,"FX",AddSpecialEffectTarget("war3mapImported\\DarkHands.mdl",m5,"overhead"))
call QG7(JZ7,"Source",p5)
call QG7(JZ7,"Target",m5)
call UnitAddType(m5,UNIT_TYPE_PEON)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GFE))
call Q97(JZ7,"Level",GetUnitAbilityLevel(p5,1093685808))
call QG7(JZ7,"Source",p5)
set u=CreateUnit(GetOwningPlayer(p5),1747990840,GetUnitX(p5),GetUnitY(p5),0)
call QG7(JZ7,"DarkRiftFXUnit",u)
call ShowUnit(u,false)
set t=null
set m5=null
set u=null
endfunction
function GOE takes nothing returns nothing
local unit J67=GetSpellTargetUnit()
local unit ZO7=GetTriggerUnit()
set LP4="GOE"
if J67!=null then
if IsUnitAlly(J67,GetOwningPlayer(ZO7))==false then
call OD7(ZO7)
call AV7(GetOwningPlayer(ZO7),GetObjectName(1848652849))
elseif GetUnitAbilityLevel(ZO7,1093685808)>0 and I_9(J67)==false then
call OD7(ZO7)
call AV7(GetOwningPlayer(ZO7),GetObjectName(1848652849))
endif
endif
if J67==null then
set J67=GME(ZO7)
endif
if J67==null then
call OD7(ZO7)
call AV7(GetOwningPlayer(ZO7),GetObjectName(1848652848))
endif
set J67=null
set ZO7=null
endfunction
function GPE takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call GOE()
endif
return false
endfunction
function GQE takes nothing returns boolean
if GetSpellAbilityId()==1093685808 then
call GNE(GetTriggerUnit())
endif
return false
endfunction
function OT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function GPE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GQE))
set t=null
call AF7(1747990836)
call AF7(1747990837)
call AF7(1747990838)
endfunction
function GRE takes nothing returns nothing
call D38(ZS4,GetEnumUnit(),1,ZR4)
endfunction
function GSE takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+ZR4*.5)
endfunction
function GTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=QA7(JZ7,"Hero")
local real x=R77(JZ7,"x")
local real y=R77(JZ7,"y")
local group g=ZI7()
local real r1=600
local real r2=600
local unit GUE
set LP4="GTE"
set x=GetUnitX(ZO7)
set y=GetUnitY(ZO7)
call GroupEnumUnitsInRange(g,x,y,r1,Condition(function DD8))
set GUE=FirstOfGroup(g)
call ZH7(g)
if GUE==null then
if R87(JZ7,"NoCorpse1")and R87(JZ7,"NoCorpse2")then
call UnitRemoveAbility(ZO7,1093810227)
call Q47(JZ7)
call RN7(t)
else
if R87(JZ7,"NoCorpse1")==false then
call QF7(JZ7,"NoCorpse1",true)
else
call QF7(JZ7,"NoCorpse2",true)
endif
endif
else
set x=GetUnitX(GUE)
set y=GetUnitY(GUE)
call QF7(JZ7,"NoCorpse1",false)
call QF7(JZ7,"NoCorpse2",false)
call Q47(GetHandleId(GUE))
call DestroyEffect(AddSpecialEffect("war3mapImported\\CorpseExplosion.mdx",x,y))
call RemoveUnit(GUE)
set g=ZI7()
set IM4=ZO7
set ZS4=ZO7
set ZR4=20*GetUnitAbilityLevel(ZO7,1093810232)
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function LF7))
call ForGroup(g,function GRE)
set IM4=ZO7
call GroupEnumUnitsInRange(g,x,y,r2,Condition(function LA7))
call ForGroup(g,function GSE)
call ZH7(g)
endif
set g=null
set ZO7=null
set GUE=null
set t=null
return false
endfunction
function GVE takes nothing returns nothing
local real x=GetUnitX(GetTriggerUnit())
local real y=GetUnitY(GetTriggerUnit())
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="GVE"
call BY7(Y14,x,y)
call TriggerRegisterTimerEvent(t,1.5,true)
call TriggerAddCondition(t,Condition(function GTE))
call Z27(GetTriggerUnit(),1093810227)
call QG7(JZ7,"Hero",GetTriggerUnit())
call QD7(JZ7,"x",x)
call QD7(JZ7,"y",y)
call QF7(JZ7,"NoCorpse1",false)
call QF7(JZ7,"NoCorpse2",false)
set t=null
endfunction
function GWE takes nothing returns boolean
if GetSpellAbilityId()==1093810232 then
call GVE()
endif
return false
endfunction
function OU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GWE))
set t=null
endfunction
function GXE takes nothing returns nothing
endfunction
function GYE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(QA7(JZ7,"Source"))
local unit DA8=(QA7(JZ7,"Caster"))
local group g=ZI7()
set IM4=CP7
set FQ7=GetUnitAbilityLevel(CP7,1093677385)*$A+$A
call GroupEnumUnitsInRange(g,GetUnitX(DA8),GetUnitY(DA8),475,Condition(function LA7))
call ForGroup(g,function GXE)
call ZH7(g)
if GetTriggerEvalCount(t)==5 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set DA8=null
return false
endfunction
function GZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer DB8=GetUnitAbilityLevel(CP7,1093677385)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
call TriggerAddCondition(t,Condition(function GYE))
call TriggerRegisterTimerEvent(t,1,true)
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Caster",DA8)
call Z27(DA8,1093809714)
call SetUnitAbilityLevel(DA8,1093809714,DB8)
call IssuePointOrderById(DA8,$D010E,x,y)
set CP7=null
set DA8=null
endfunction
function GAE takes nothing returns boolean
if GetSpellAbilityId()==1093677385 then
call GZE()
endif
return false
endfunction
function OW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function GAE))
set t=null
endfunction
function GBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093809233)
local integer GCE
local real G3E
local real G6E=3+DB8
set LP4="GBE"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>4*G6E then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1093809242)
call UnitRemoveAbility(J67,1093809456)
call UnitRemoveAbility(J67,1093809240)
call UnitRemoveAbility(J67,1093809457)
call UnitRemoveAbility(J67,1093809241)
call UnitRemoveAbility(J67,1110459720)
else
set G3E=100*GetUnitState(J67,UNIT_STATE_LIFE)/GetUnitState(J67,UNIT_STATE_MAX_LIFE)
if G3E<20 then
set GCE=5
elseif G3E<40 then
set GCE=4
elseif G3E<60 then
set GCE=3
elseif G3E<80 then
set GCE=2
else
set GCE=1
endif
if GCE==1 then
if GetUnitAbilityLevel(J67,1093809242)==0 then
call UnitRemoveAbility(J67,1093809456)
call UnitRemoveAbility(J67,1093809240)
call UnitRemoveAbility(J67,1093809457)
call UnitRemoveAbility(J67,1093809241)
call UnitRemoveAbility(J67,1110459720)
call UnitAddAbility(J67,1093809242)
endif
elseif GCE==2 then
if GetUnitAbilityLevel(J67,1093809456)==0 then
call UnitRemoveAbility(J67,1093809242)
call UnitRemoveAbility(J67,1093809240)
call UnitRemoveAbility(J67,1093809457)
call UnitRemoveAbility(J67,1093809241)
call UnitRemoveAbility(J67,1110459720)
call UnitAddAbility(J67,1093809456)
endif
elseif GCE==3 then
if GetUnitAbilityLevel(J67,1093809240)==0 then
call UnitRemoveAbility(J67,1093809242)
call UnitRemoveAbility(J67,1093809456)
call UnitRemoveAbility(J67,1093809457)
call UnitRemoveAbility(J67,1093809241)
call UnitRemoveAbility(J67,1110459720)
call UnitAddAbility(J67,1093809240)
endif
elseif GCE==4 then
if GetUnitAbilityLevel(J67,1093809457)==0 then
call UnitRemoveAbility(J67,1093809242)
call UnitRemoveAbility(J67,1093809456)
call UnitRemoveAbility(J67,1093809240)
call UnitRemoveAbility(J67,1093809241)
call UnitRemoveAbility(J67,1110459720)
call UnitAddAbility(J67,1093809457)
endif
elseif GCE==5 then
if GetUnitAbilityLevel(J67,1093809241)==0 then
call UnitRemoveAbility(J67,1093809242)
call UnitRemoveAbility(J67,1093809456)
call UnitRemoveAbility(J67,1093809240)
call UnitRemoveAbility(J67,1093809457)
call UnitRemoveAbility(J67,1110459720)
call UnitAddAbility(J67,1093809241)
endif
endif
call D38(CP7,J67,1,.01*4*.25*GetUnitState(J67,UNIT_STATE_MAX_LIFE))
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call CreateCorpse(GetOwningPlayer(CP7),1969711215,GetUnitX(J67),GetUnitY(J67),0)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function GLE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093809233)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="GLE"
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("effects\\EntanglingBonesTarget.mdx",J67,"chest")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function GBE))
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809242,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809456,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809240,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809457,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809241,false)
set CP7=null
set J67=null
set t=null
endfunction
function G1E takes nothing returns boolean
if GetSpellAbilityId()==1093809233 and ZG7(GetSpellTargetUnit())==false then
call GLE()
endif
return false
endfunction
function OX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function G1E))
set t=null
endfunction
function G0E takes unit CP7,integer G5E returns nothing
call SaveInteger(C7,(GetHandleId(CP7)),(687),(G5E))
call UnitRemoveAbility(CP7,1093809496)
call UnitRemoveAbility(CP7,1093809497)
call UnitRemoveAbility(CP7,1093809498)
call UnitRemoveAbility(CP7,1093809492)
call UnitRemoveAbility(CP7,1093809494)
call UnitRemoveAbility(CP7,1093809493)
call UnitRemoveAbility(CP7,1093809491)
call UnitRemoveAbility(CP7,1093809490)
call UnitRemoveAbility(CP7,1093809495)
call UnitRemoveAbility(CP7,1093809712)
call UnitRemoveAbility(CP7,1093809741)
call UnitRemoveAbility(CP7,1093809740)
call UnitRemoveAbility(CP7,1093809735)
call UnitRemoveAbility(CP7,1093809736)
call UnitRemoveAbility(CP7,1093809734)
call UnitRemoveAbility(CP7,1093809733)
call UnitRemoveAbility(CP7,1093809462)
call UnitRemoveAbility(CP7,1093809737)
call UnitRemoveAbility(CP7,1093809738)
call UnitRemoveAbility(CP7,1093809739)
call UnitRemoveAbility(CP7,1093809732)
if G5E==0 then
call UnitAddAbility(CP7,1093809741)
endif
if G5E==1 then
call Z27(CP7,1093809496)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809496,false)
call UnitAddAbility(CP7,1093809740)
elseif G5E==2 then
call Z27(CP7,1093809497)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809497,false)
call UnitAddAbility(CP7,1093809735)
elseif G5E==3 then
call Z27(CP7,1093809498)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809498,false)
call UnitAddAbility(CP7,1093809736)
elseif G5E==4 then
call Z27(CP7,1093809492)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809492,false)
call UnitAddAbility(CP7,1093809734)
elseif G5E==5 then
call Z27(CP7,1093809494)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809494,false)
call UnitAddAbility(CP7,1093809733)
elseif G5E==6 then
call Z27(CP7,1093809493)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809493,false)
call UnitAddAbility(CP7,1093809462)
elseif G5E==7 then
call Z27(CP7,1093809491)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809491,false)
call UnitAddAbility(CP7,1093809737)
elseif G5E==8 then
call Z27(CP7,1093809490)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809490,false)
call UnitAddAbility(CP7,1093809738)
elseif G5E==9 then
call Z27(CP7,1093809495)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809495,false)
call UnitAddAbility(CP7,1093809739)
elseif G5E==$A then
call Z27(CP7,1093809712)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809712,false)
call UnitAddAbility(CP7,1093809732)
endif
endfunction
function G2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer G5E=(LoadInteger(C7,(GetHandleId(CP7)),(687)))
local group g
local unit GUE
local integer DB8=GetUnitAbilityLevel(CP7,1093809713)
local integer G_E=2+2*DB8
set LP4="G2E"
if G5E<G_E and A47(CP7)==false then
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),925,Condition(function DD8))
set GUE=FirstOfGroup(g)
call ZH7(g)
if GUE!=null then
set G5E=G5E+1
call G0E(CP7,G5E)
call B27((GUE),(CP7),1747993654,"CorpseCollector_FX_Nothing",400)
call RemoveUnit(GUE)
endif
endif
set t=null
set CP7=null
set GUE=null
return false
endfunction
function H4E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="H4E"
call TriggerRegisterTimerEvent(t,4,true)
call TriggerAddCondition(t,Condition(function G2E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function H7E takes nothing returns nothing
call D38(ZT4,GetEnumUnit(),1,ZU4)
endfunction
function H8E takes unit CP7,integer DB8,real BC7,real B37,integer G5E,boolean K_9 returns nothing
local group g=ZI7()
set LP4="CorpseCollector_Land"
set ZT4=CP7
set ZU4=30*G5E
if K_9 then
set ZU4=ZU4+$A*G5E
endif
set IM4=CP7
call GroupEnumUnitsInRange(g,BC7,B37,350,Condition(function LF7))
call ForGroup(g,function H7E)
call ZH7(g)
endfunction
function H9E takes unit CP7,real WP9,real WQ9 returns boolean
local real BC7=(LoadReal(C7,(GetHandleId(CP7)),(690)))
local real B37=(LoadReal(C7,(GetHandleId(CP7)),(691)))
set LP4="CorpseCollector_FindBonus"
if BC7==0 and B37==0 then
return false
endif
if N67(WP9,WQ9,BC7,B37)<425 then
return true
endif
return false
endfunction
function HDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer G5E=(LoadInteger(C7,(JZ7),(34)))
local integer DB8=GetUnitAbilityLevel(CP7,1093809713)
local integer i=1
local unit DA8
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local real x
local real y
local real a=(LoadReal(C7,(JZ7),($89)))
local boolean K_9=(LoadBoolean(C7,(JZ7),(688)))
local boolean HEE=(LoadBoolean(C7,(JZ7),(689)))
local real HFE=(LoadReal(C7,(JZ7),(549)))
local real HGE=(LoadReal(C7,(JZ7),(567)))
set LP4="HDE"
set HFE=AY7(HFE+$A*Cos(a))
set HGE=AZ7(HGE+$A*Sin(a))
call SaveReal(C7,(JZ7),(549),((HFE)*1.))
call SaveReal(C7,(JZ7),(567),((HGE)*1.))
if K_9==false then
set K_9=H9E(CP7,HFE,HGE)
if K_9 then
call SaveBoolean(C7,(JZ7),(688),(K_9))
endif
endif
if K_9 and HEE==false then
set HEE=true
call SaveBoolean(C7,(JZ7),(689),(HEE))
loop
exitwhen i>G5E
set DA8=(LoadUnitHandle(C7,(JZ7),(393+i)))
call SaveEffectHandle(C7,(JZ7),(609+i),(AddSpecialEffectTarget("war3mapImported\\CorpseFire.mdx",DA8,"origin")))
set i=i+1
endloop
endif
set i=1
if N67(HFE,HGE,BC7,B37)<$F then
loop
exitwhen i>G5E
if K_9 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(609+i))))
endif
call KillUnit((LoadUnitHandle(C7,(JZ7),(393+i))))
set i=i+1
endloop
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call H8E(CP7,DB8,BC7,B37,G5E,K_9)
else
loop
exitwhen i>G5E
set DA8=(LoadUnitHandle(C7,(JZ7),(393+i)))
set x=(LoadReal(C7,(JZ7),(549+i)))
set y=(LoadReal(C7,(JZ7),(567+i)))
set x=AY7(x+$A*Cos(a))
set y=AZ7(y+$A*Sin(a))
call SaveReal(C7,(JZ7),(549+i),((x)*1.))
call SaveReal(C7,(JZ7),(567+i),((y)*1.))
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
set i=i+1
endloop
endif
set t=null
set DA8=null
set CP7=null
return false
endfunction
function HHE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local integer DB8=GetUnitAbilityLevel(CP7,1093809713)
local integer G5E=(LoadInteger(C7,(GetHandleId(CP7)),(687)))
local integer i=1
local unit DA8
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),BC7,B37)*bj_DEGTORAD
set LP4="HHE"
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(G5E))
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveReal(C7,(JZ7),(549),((x)*1.))
call SaveReal(C7,(JZ7),(567),((y)*1.))
call SaveBoolean(C7,(JZ7),(688),(false))
call SaveBoolean(C7,(JZ7),(689),(false))
loop
exitwhen i>G5E
set DA8=CreateUnit(GetOwningPlayer(CP7),1747993655,x+GetRandomInt(-$C8,$C8),y+GetRandomInt(-$C8,$C8),0)
call SaveUnitHandle(C7,(JZ7),(393+i),(DA8))
call SaveReal(C7,(JZ7),(549+i),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(567+i),((GetUnitY(DA8))*1.))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function HDE))
call G0E(CP7,0)
set CP7=null
set t=null
set DA8=null
endfunction
function HIE takes nothing returns boolean
if GetSpellAbilityId()==1093809713 then
call HHE()
endif
return false
endfunction
function HJE takes nothing returns boolean
if GetLearnedSkill()==1093809713 and GetUnitAbilityLevel(GetTriggerUnit(),1093809713)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call H4E()
endif
return false
endfunction
function OY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HIE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function HJE))
set t=null
endfunction
function HKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit HME
if GetTriggerEventId()==EVENT_UNIT_SPELL_FINISH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(DA8)
call UnitApplyTimedLife(DA8,1112820806,.1)
elseif A47(DA8)then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call SaveReal(C7,(JZ7),(6),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(DA8))*1.))
if x!=GetUnitX(DA8)or y!=GetUnitY(DA8)then
call UnitRemoveAbility(DA8,1093815348)
else
call UnitAddAbility(DA8,1093815348)
endif
endif
return false
endfunction
function HNE takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(FR7)and GetUnitTypeId(GetFilterUnit())==1966092633
endfunction
function HOE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1966092633,GetUnitX(CP7)+100,GetUnitY(CP7)+100,0)
local group g
local integer DB8=GetUnitAbilityLevel(CP7,1093815350)
local real YJ8
local unit HPE
local unit HQE
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_SPELL_FINISH)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function HKE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveReal(C7,(JZ7),(6),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(DA8))*1.))
call UnitAddAbility(DA8,1093815348)
call SetUnitAbilityLevel(DA8,1093815349,GetUnitAbilityLevel(CP7,1093815350))
call SaveReal(C7,(GetHandleId(DA8)),(34),(((TimerGetElapsed(V)))*1.))
set FR7=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function HNE))
if CountUnitsInGroup(g)>DB8+1 then
set HQE=FirstOfGroup(g)
set YJ8=(LoadReal(C7,(GetHandleId(HQE)),(34)))
set HPE=HQE
call GroupRemoveUnit(g,HQE)
loop
exitwhen HQE==null
if YJ8>(LoadReal(C7,(GetHandleId(HQE)),(34)))then
set YJ8=(LoadReal(C7,(GetHandleId(HQE)),(34)))
set HPE=HQE
endif
set HQE=FirstOfGroup(g)
call GroupRemoveUnit(g,HQE)
endloop
call KillUnit(HPE)
endif
call ZH7(g)
set g=null
set DA8=null
set CP7=null
set t=null
endfunction
function HRE takes nothing returns boolean
if GetSpellAbilityId()==1093815350 then
call HOE()
endif
return false
endfunction
function OZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function HRE))
endfunction
function HSE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer K_9=(LoadInteger(C7,(JZ7),(34)))
call SaveInteger(C7,(GetHandleId(CP7)),(783),((LoadInteger(C7,(GetHandleId(CP7)),(783)))-K_9))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set CP7=null
set t=null
return false
endfunction
function HTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit A97=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1095328612)
local integer K_9
local integer BU8
if IsUnitInRange(CP7,A97,900+25)and A47(CP7)==false and IsUnitAlly(CP7,GetOwningPlayer(A97))==false and GetUnitTypeId(A97)!=1848657461 and IsUnitIllusion(A97)==false and FA8(GetUnitTypeId(A97))==false and GetUnitAbilityLevel(A97,1093678162)==0 then
set BU8=(LoadInteger(C7,(GetHandleId(CP7)),(783)))
if IsUnitType(A97,UNIT_TYPE_HERO) then
set K_9=30
else
set K_9=5
endif
set BU8=BU8+K_9
call SaveInteger(C7,(GetHandleId(CP7)),(783),(BU8))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,25+DB8*5,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function HSE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(K_9))
endif
set t=null
set CP7=null
set A97=null
return false
endfunction
function HUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer BU8=(LoadInteger(C7,(GetHandleId(CP7)),(783)))
local integer R1D=(LoadInteger(C7,(JZ7),($EE)))
if R1D!=BU8 then
call D28(CP7,BU8)
call SaveInteger(C7,(JZ7),($EE),(BU8))
endif
set t=null
set CP7=null
return false
endfunction
function HVE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HTE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function HUE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function HWE takes nothing returns boolean
if GetLearnedSkill()==1095328612 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1095328612)==1 then
call HVE()
endif
return false
endfunction
function OA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function HWE))
set t=null
endfunction
function HXE takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),1093678667)>0
endfunction
function HYE takes nothing returns nothing
if(GetIssuedOrderId()==$D00D1)then
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)then
call Z27(GetTriggerUnit(),1093681498)
else
call NX7(.1)
if(GetUnitAbilityLevel(GetTriggerUnit(),1110454868)>0)then
call UnitAddAbility(GetTriggerUnit(),1093681498)
endif
endif
elseif(GetIssuedOrderId()==$D00D2)then
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER)then
call UnitRemoveAbility(GetTriggerUnit(),1093681498)
else
call NX7(.1)
if(GetUnitAbilityLevel(GetTriggerUnit(),1110454868)==0)then
call UnitRemoveAbility(GetTriggerUnit(),1093681498)
endif
endif
endif
endfunction
function MG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MG8"
call ky(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function HXE))
call TriggerAddAction(t,function HYE)
set t=null
endfunction
function HZE takes nothing returns nothing
local integer JZ7=GetHandleId(GetEnumUnit())
set LP4="HZE"
if GetTriggerUnit()!=GetEnumUnit()then
call SaveInteger(C7,(JZ7),(672),((LoadInteger(C7,(JZ7),(672)))+1))
endif
endfunction
function HAE takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1429221446 and IsUnitIllusion(GetFilterUnit())==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))
endfunction
function HBE takes nothing returns boolean
local group g
set LP4="HBE"
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and FA8(GetUnitTypeId(GetTriggerUnit()))==false and IsUnitIllusion(GetTriggerUnit())==false then
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),475,Condition(function HAE))
if GetUnitTypeId(GetKillingUnit())==1429221446 then
call GroupAddUnit(g,GetKillingUnit())
endif
call ForGroup(g,function HZE)
call ZH7(g)
set g=null
endif
return false
endfunction
function HCE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="HCE"
if GetTriggerEvalCount(t)==1 then
call ShowUnit(p5,false)
elseif GetTriggerEvalCount(t)>80 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set p5=null
return false
endfunction
function H3E takes nothing returns boolean
local unit DA8
local unit p5
local unit A97
local trigger t
local integer JZ7
set LP4="H3E"
if GetUnitTypeId(GetTriggerUnit())==1429221446 then
set p5=GetTriggerUnit()
set A97=GetKillingUnit()
if p5==A97 then
set DA8=CreateUnit(GetOwningPlayer(p5),1747993154,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitTimeScale(DA8,.75)
call UnitApplyTimedLife(DA8,1112820806,1.)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodAbomination.mdl",DA8,"origin"))
set DA8=null
call SetSoundPosition(IP,GetUnitX(p5),GetUnitY(p5),50)
call SetSoundVolumeBJ(IP,100)
call PlaySoundBJ(IP)
call SetSoundPosition(JP,GetUnitX(p5),GetUnitY(p5),50)
call SetSoundVolumeBJ(JP,100)
call PlaySoundBJ(JP)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function HCE))
call SaveUnitHandle(C7,(JZ7),(2),(p5))
set t=null
endif
set p5=null
set A97=null
endif
return false
endfunction
function H6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local unit CP7=(LoadUnitHandle(C7,(GetHandleId(t)),(2)))
local integer JZ7=GetHandleId(CP7)
local integer HLE=(LoadInteger(C7,(JZ7),(672)))
local integer H1E=(LoadInteger(C7,(JZ7),(673)))
local integer DB8=GetUnitAbilityLevel(CP7,1093678660)
local integer H0E=R2I(I2R(HLE)*(.6+.3*DB8))
set LP4="H6E"
if H0E>H1E then
call ModifyHeroStat(0,CP7,bj_MODIFYMETHOD_ADD,H0E-H1E)
call SaveInteger(C7,(JZ7),(673),(H0E))
call BO7("+"+I2S(H0E-H1E)+" "+GetObjectName(1848659274),3,CP7,.023,0,$FF,0,$E6)
endif
set t=null
set CP7=null
return false
endfunction
function H5E takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="H5E"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function H6E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function H2E takes nothing returns boolean
if GetLearnedSkill()==1093678660 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678660)==1 then
call H5E()
endif
return false
endfunction
function H_E takes nothing returns boolean
if GetUnitTypeId(G7[GetPlayerId(GetTriggerPlayer())])==1429221446 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,GetObjectName(1848654162)+" "+I2S((LoadInteger(C7,(GetHandleId(G7[GetPlayerId(GetTriggerPlayer())])),(673))))+" "+GetObjectName(1848654163))
endif
return false
endfunction
function MH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MH8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function H2E))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function H_E))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function H3E))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HBE))
set t=null
endfunction
function I4E takes unit CP7,unit J67 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local unit HME=CreateUnit(GetOwningPlayer(CP7),1697657409,GetUnitX(J67),GetUnitY(J67),0)
set LP4="Hook_Ministun"
call Z27(DA8,1093685338)
call IssueTargetOrderById(DA8,$D007F,J67)
call UnitApplyTimedLife(DA8,1112820806,1)
call UnitApplyTimedLife(HME,1112820806,1)
set DA8=null
set HME=null
endfunction
function I7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer I8E=R47(RP7,"LinkNumber")
local boolean I9E=R87(RP7,"FoundTarget")
local unit m5
local unit IDE=QA7(RP7,"Link"+I2S(I8E))
set LP4="I7E"
if I9E then
set m5=QA7(RP7,"Target")
call SetUnitX(m5,GetUnitX(IDE))
call SetUnitY(m5,GetUnitY(IDE))
endif
call RemoveUnit(IDE)
set I8E=I8E-1
call Q97(RP7,"LinkNumber",I8E)
if I8E==0 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set IDE=null
return false
endfunction
function IEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer I8E=R47(RP7,"LinkNumber")
local integer X37=R47(RP7,"Level")
local real l4=R77(RP7,"Angle")
local unit Z47=QA7(RP7,"Hero")
local trigger IFE=Q67(RP7,"RetractTrigger")
local integer IGE=GetHandleId(IFE)
local group g
local unit u
local real x
local real y
set LP4="IEE"
if I8E<$A+5*X37 then
set I8E=I8E+1
call Q97(RP7,"LinkNumber",I8E)
set x=GetUnitX(Z47)+I8E*40*Cos(l4*bj_DEGTORAD)
set y=GetUnitY(Z47)+I8E*40*Sin(l4*bj_DEGTORAD)
call QG7(IGE,"Link"+I2S(I8E),CreateUnit(GetOwningPlayer(Z47),1966092360,x,y,l4))
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,125,Condition(function L_7))
call GroupRemoveUnit(g,Z47)
set u=GroupPickRandomUnit(g)
call ZH7(g)
if u!=null then
call Q47(RP7)
call RN7(t)
call TriggerRegisterTimerEvent(IFE,.03,true)
call TriggerAddCondition(IFE,Condition(function I7E))
call Q97(IGE,"LinkNumber",I8E)
call QF7(IGE,"FoundTarget",true)
call QG7(IGE,"Target",u)
if IsUnitEnemy(u,GetOwningPlayer(Z47))then
if IsUnitType(u,UNIT_TYPE_HERO) then
call E58("HA_Hits"+I2S(GetPlayerId(GetOwningPlayer(Z47))),R44[GetPlayerId(GetOwningPlayer(Z47))])
set R44[GetPlayerId(GetOwningPlayer(Z47))]=R44[GetPlayerId(GetOwningPlayer(Z47))]+1
call RR7(Z47,"4400",1.5)
endif
set R74[GetPlayerId(GetOwningPlayer(Z47))]=R74[GetPlayerId(GetOwningPlayer(Z47))]+1
call E58("HA_Total"+I2S(GetPlayerId(GetOwningPlayer(Z47))),R74[GetPlayerId(GetOwningPlayer(Z47))])
call I4E(Z47,u)
call D38(Z47,u,3,90*X37)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"origin"))
endif
endif
else
call Q47(RP7)
call RN7(t)
set R74[GetPlayerId(GetOwningPlayer(Z47))]=R74[GetPlayerId(GetOwningPlayer(Z47))]+1
call TriggerRegisterTimerEvent(IFE,.03,true)
call TriggerAddCondition(IFE,Condition(function I7E))
call Q97(IGE,"LinkNumber",I8E)
call QF7(IGE,"FoundTarget",false)
endif
set t=null
set Z47=null
set IFE=null
set g=null
set u=null
return false
endfunction
function IHE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real l4=MZ7(GetUnitX(Z47),GetUnitY(Z47),GetLocationX(l),GetLocationY(l))
local integer X37=GetUnitAbilityLevel(Z47,1093678665)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="IHE"
call QG7(RP7,"Hero",Z47)
call Q97(RP7,"Level",X37)
call QD7(RP7,"Angle",l4*1.)
call Q97(RP7,"LinkNumber",0)
call QI7(RP7,"RetractTrigger",CreateTrigger())
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function IEE))
call RemoveLocation(l)
set Z47=null
set l=null
set t=null
endfunction
function IIE takes nothing returns boolean
if GetSpellAbilityId()==1093678665 then
call IHE()
endif
return false
endfunction
function IJE takes nothing returns boolean
local integer FRD=R44[GetPlayerId(GetTriggerPlayer())]
local integer D5=R74[GetPlayerId(GetTriggerPlayer())]
set LP4="IJE"
if GetUnitTypeId(G7[GetPlayerId(GetTriggerPlayer())])==1429221446 and D5>0 then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,D9,10.,(GetObjectName((1848657228)))+" "+R2S(I2R(FRD)/ I2R(D5)*100)+"% ("+I2S(FRD)+"/"+I2S(D5)+")")
endif
return false
endfunction
function MI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IIE))
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-stats",true)
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-st",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-st",true)
call TriggerAddCondition(t,Condition(function IJE))
set t=null
endfunction
function IKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local real BD7=(25+50*X37)+(.75)*GetHeroStr(p5,true)
local integer XB8=R47(RP7,"Count")
set LP4="IKE"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST and GetSpellAbilityId()==1093747544)then
call Q47(RP7)
call RN7(t)
endif
elseif GetTriggerEvalCount(t)>4 then
call Q47(RP7)
call RN7(t)
call OD7(p5)
else
if X37>0 then
set XB8=XB8+1
if(XB8<4 and IsUnitType(m5,UNIT_TYPE_HERO))or(XB8<8 and IsUnitType(m5,UNIT_TYPE_HERO)==false)then
call SetUnitState(p5,UNIT_STATE_LIFE,GetUnitState(p5,UNIT_STATE_LIFE)+BD7)
call D38(p5,m5,1,BD7)
endif
call Q97(RP7,"Count",XB8)
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function IME takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(p5,1093747544)
set LP4="IME"
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function IKE))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call Q97(RP7,"Count",0)
call TriggerEvaluate(t)
set t=null
set p5=null
set m5=null
endfunction
function INE takes nothing returns boolean
if GetSpellAbilityId()==1093747544 and ZG7(GetSpellTargetUnit())==false then
call IME()
endif
return false
endfunction
function MJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function INE))
set t=null
endfunction
function IOE takes nothing returns boolean
return((GetUnitTypeId(GetSummonedUnit())==1865429068)or(GetUnitTypeId(GetSummonedUnit())==1865429069)or(GetUnitTypeId(GetSummonedUnit())==1865429070)or(GetUnitTypeId(GetSummonedUnit())==1865429071))
endfunction
function IPE takes nothing returns nothing
endfunction
function IQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=DA8
call GroupEnumUnitsInRange(g,GetUnitX(DA8),GetUnitY(DA8),400+300*4+25,Condition(function LF7))
call ForGroup(g,function IPE)
call ZH7(g)
set g=null
endif
set t=null
set DA8=null
return false
endfunction
function IRE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=GetSummonedUnit()
call TriggerRegisterDeathEvent(t,DA8)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function IQE))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveInteger(C7,(JZ7),(5),(GetUnitAbilityLevel(GetSummoningUnit(),1093679428)))
call SetUnitAbilityLevelSwapped(1093679188,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call SetUnitAbilityLevelSwapped(1093681990,GetSummonedUnit(),GetUnitAbilityLevelSwapped(1093679428,GetSummoningUnit()))
call IssueImmediateOrderById(GetSummonedUnit(),$D0220)
endfunction
function MM8 takes nothing returns nothing
set Do=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Do,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(Do,Condition(function IOE))
call TriggerAddAction(Do,function IRE)
endfunction
function ISE takes unit p5,unit m5 returns nothing
local real ITE=20+40*R04
local real IUE=70+30*R04
local real IVE=(ITE+IUE*R54/700)*.5
call D38(p5,m5,1,IVE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl",m5,"chest"))
endfunction
function IWE takes nothing returns nothing
local unit m5=GetEnumUnit()
local group WC9=t0
local unit p5=U0
set LP4="IWE"
if IsUnitInGroup(m5,WC9)==false then
call GroupAddUnit(WC9,m5)
call ISE(p5,m5)
endif
set m5=null
set WC9=null
set p5=null
endfunction
function IXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local group WC9=QL7(RP7,"AlreadyDamaged")
local effect fx
local integer VT9=GetTriggerEvalCount(t)
local real x
local real x0=GetUnitX(p5)
local real y
local real y0=GetUnitY(p5)
local integer i
local integer d
local group g=ZI7()
set LP4="IXE"
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
set t0=WC9
set U0=p5
set R04=GetUnitAbilityLevel(p5,1093748023)
if VT9>20 then
set d=21*36+(20-VT9)*36
set R54=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/ 36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/ 36*bj_DEGTORAD)
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,100,Condition(function LP7))
call ForGroup(g,function IWE)
set i=i+1
endloop
else
set d=VT9*36
set R54=d
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/ 36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/ 36*bj_DEGTORAD)
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,100,Condition(function LP7))
call ForGroup(g,function IWE)
set i=i+1
endloop
endif
call ZH7(g)
if VT9==40 then
call KillUnit(DA8)
call ZH7(WC9)
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
elseif VT9==20 then
call GroupClear(WC9)
set fx=null
endif
set t=null
set DA8=null
set WC9=null
set p5=null
set g=null
return false
endfunction
function IYE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1747990834,x,y,0)
local integer i=0
local group WC9=ZI7()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="IYE"
call QH7(RP7,"FX",AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",Z47,"origin"))
call QP7(RP7,"AlreadyDamaged",WC9)
call QG7(RP7,"Source",Z47)
call QG7(RP7,"Caster",DA8)
call TriggerRegisterTimerEvent(t,.06,true)
call TriggerAddCondition(t,Condition(function IXE))
set t=null
set DA8=null
set Z47=null
set WC9=null
endfunction
function IZE takes nothing returns boolean
if GetSpellAbilityId()==1093748023 then
call IYE()
endif
return false
endfunction
function OG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IZE))
set t=null
endfunction
function IAE takes integer IBE returns boolean
return IBE!=1093679446 and IBE!=1093677622 and IBE!=1093684314 and IBE!=1093685582 and IBE!=1093685065 and IBE!=1093682265 and IBE!=1093752642 and IBE!=1095263841
endfunction
function ICE takes unit I3E,unit p5,unit m5,integer X37 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(I3E),1697656901,GetUnitX(p5),GetUnitY(p5),0)
set LP4="mBv"
call Z27(DA8,1093747019)
call SetUnitAbilityLevel(DA8,1093747019,X37)
call IssueTargetOrderById(DA8,$D0097,m5)
call Z27(DA8,1093744708)
call SetUnitAbilityLevel(DA8,1093744708,X37)
call IssueTargetOrderById(DA8,$D008F,m5)
set DA8=null
endfunction
function I6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37
set LP4="I6E"
if GetSpellTargetUnit()==p5 and IAE(GetSpellAbilityId()) and IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(p5))==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
set X37=GetUnitAbilityLevel(p5,1093748022)
call ICE(p5,p5,GetTriggerUnit(),X37)
endif
set t=null
set p5=null
return false
endfunction
function ILE takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="mdv"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function I6E))
call QG7(RP7,"Source",p5)
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set p5=null
set t=null
endfunction
function I1E takes nothing returns boolean
if GetLearnedSkill()==1093748022 and GetUnitAbilityLevel(GetTriggerUnit(),1093748022)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call ILE(GetTriggerUnit(),false)
endif
return false
endfunction
function OH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OH8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function I1E))
set t=null
endfunction
function I0E takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer ED8
set LP4="StaticLink_AddDamage"
if d<1 then
call UnitRemoveAbility(u,W0[0])
call UnitRemoveAbility(u,W0[1])
call UnitRemoveAbility(u,W0[2])
call UnitRemoveAbility(u,W0[3])
call UnitRemoveAbility(u,W0[4])
call UnitRemoveAbility(u,W0[5])
call UnitRemoveAbility(u,W0[6])
call UnitRemoveAbility(u,W0[7])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set ED8=i
set i=0
loop
exitwhen i>ED8
if b[i]==1 then
call Z27(u,W0[i])
else
call UnitRemoveAbility(u,W0[i])
endif
set i=i+1
endloop
endfunction
function I5E takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer ED8
set LP4="StaticLink_RemoveDamage"
if d<1 then
call UnitRemoveAbility(u,z0[0])
call UnitRemoveAbility(u,z0[1])
call UnitRemoveAbility(u,z0[2])
call UnitRemoveAbility(u,z0[3])
call UnitRemoveAbility(u,z0[4])
call UnitRemoveAbility(u,z0[5])
call UnitRemoveAbility(u,z0[6])
call UnitRemoveAbility(u,z0[7])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set ED8=i
set i=0
loop
exitwhen i>ED8
if b[i]==1 then
call Z27(u,z0[i])
else
call UnitRemoveAbility(u,z0[i])
endif
set i=i+1
endloop
endfunction
function I2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
set LP4="I2E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if GetTriggerUnit()==p5 then
call I0E(p5,0)
call QG7(RP7,"Source",null)
else
call I5E(m5,0)
call QG7(RP7,"Target",null)
endif
else
if p5!=null then
call I0E(p5,0)
endif
if m5!=null then
call I5E(m5,0)
endif
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function I_E takes unit CP7,unit J67,unit V49 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="mGv"
if V49==null then
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
elseif V49==J67 then
call I5E(J67,0)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",null)
else
call I0E(CP7,0)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call QG7(JZ7,"Source",null)
call QG7(JZ7,"Target",J67)
endif
call TriggerRegisterTimerEvent(t,18,false)
call TriggerAddCondition(t,Condition(function I2E))
set t=null
endfunction
function J4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local unit J67=QA7(JZ7,"Target")
local lightning J7E=Q07(JZ7,"Light")
local integer DB8=R47(JZ7,"Level")
local integer ZD8=GetTriggerEvalCount(t)
local unit DA8=QA7(JZ7,"Caster")
set LP4="J4E"
call MoveLightning(J7E,true,GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
if N67(GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))>700 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(J7E)
call KillUnit(DA8)
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call I_E(CP7,J67,GetTriggerUnit())
else
call I_E(CP7,J67,null)
endif
call Q47(JZ7)
call RN7(t)
elseif ZD8>$A0 then
call DestroyLightning(J7E)
call KillUnit(DA8)
call I_E(CP7,J67,null)
call Q47(JZ7)
call RN7(t)
elseif ModuloInteger(ZD8,20)==0 or ZD8==1 then
call I0E(CP7,(DB8*7)*R2I(ZD8/ 20))
call I5E(J67,(DB8*7)*R2I(ZD8/ 20))
endif
set t=null
set CP7=null
set J67=null
set J7E=null
set DA8=null
return false
endfunction
function J8E takes unit p5,unit m5,lightning J9E,unit DA8 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093747792)
set LP4="mjv"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function J4E))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call QJ7(RP7,"Light",J9E)
call QG7(RP7,"Caster",DA8)
set t=null
endfunction
function JDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local lightning J9E=Q07(RP7,"Light")
local unit DA8=QA7(RP7,"Caster")
local real JEE=GetUnitX(p5)
local real JFE=GetUnitY(p5)
local real S4D=R77(RP7,"rRealX1")
local real S7D=R77(RP7,"rRealY1")
local real a=R77(RP7,"a")
local unit m5=null
local group g=ZI7()
set LP4="JDE"
set S4D=AY7(S4D+25*Cos(a))
set S7D=AZ7(S7D+25*Sin(a))
call QD7(RP7,"rRealX1",S4D*1.)
call QD7(RP7,"rRealY1",S7D*1.)
call MoveLightning(J9E,true,JEE,JFE,S4D,S7D)
call SetUnitX(DA8,S4D)
call SetUnitY(DA8,S7D)
set IM4=p5
call GroupEnumUnitsInRange(g,S4D,S7D,$E1,Condition(function DO8))
set m5=FirstOfGroup(g)
call ZH7(g)
if m5!=null then
call J8E(p5,m5,J9E,DA8)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEvalCount(t)>25 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyLightning(J9E)
call KillUnit(DA8)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set J9E=null
set m5=null
set g=null
set DA8=null
return false
endfunction
function JGE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t
local integer RP7
local location l
local lightning J9E=AddLightning("CLSB",true,GetUnitX(p5),GetUnitY(p5),GetUnitX(p5),GetUnitY(p5))
local unit DA8=CreateUnit(GetOwningPlayer(p5),1747990584,GetUnitX(p5),GetUnitY(p5),0)
set LP4="JGE"
call SetLightningColor(J9E,.3,.5,1,1)
if m5==null then
set l=GetSpellTargetLoc()
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function JDE))
call QG7(RP7,"Source",p5)
call QJ7(RP7,"Light",J9E)
call QG7(RP7,"Caster",DA8)
call QD7(RP7,"a",(Atan2(GetLocationY(l)-GetUnitY(p5),GetLocationX(l)-GetUnitX(p5)))*1.)
call QD7(RP7,"rRealX1",(GetUnitX(p5))*1.)
call QD7(RP7,"rRealY1",(GetUnitY(p5))*1.)
call RemoveLocation(l)
set l=null
set t=null
else
call J8E(p5,m5,J9E,DA8)
endif
set m5=null
set p5=null
set l=null
set t=null
set DA8=null
endfunction
function JHE takes nothing returns boolean
if GetSpellAbilityId()==1093747792 then
call JGE()
endif
return false
endfunction
function OI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JHE))
set t=null
set W0[0]=1093747798
set W0[1]=1093747793
set W0[2]=1093747794
set W0[3]=1093747795
set W0[4]=1093747796
set W0[5]=1093747797
set W0[6]=1093747799
set W0[7]=1093747800
set z0[0]=1093748020
set z0[1]=1093748019
set z0[2]=1093748018
set z0[3]=1093748017
set z0[4]=1093748016
set z0[5]=1093748021
set z0[6]=1093747802
set z0[7]=1093747801
endfunction
function JIE takes integer RP7 returns nothing
local integer i=1
local integer JJE=R47(RP7,"MaxIndex")
local unit m5
local integer D18
set LP4="mmv"
if JJE==0 then
return
endif
loop
exitwhen i>JJE
set D18=R47(RP7,"Target_"+I2S(i))
set m5=WG7(D18)
call WF7(D18)
call UnitRemoveAbility(m5,n1[0])
call UnitRemoveAbility(m5,n1[1])
call UnitRemoveAbility(m5,n1[2])
call UnitRemoveAbility(m5,n1[3])
call UnitRemoveAbility(m5,n1[4])
call UnitRemoveAbility(m5,n1[5])
set i=i+1
endloop
set m5=null
endfunction
function JKE takes unit m5,integer RP7 returns nothing
local integer D18=WI7(m5)
local integer JJE=R47(RP7,"MaxIndex")
set LP4="mpv"
set JJE=JJE+1
call Q97(RP7,"MaxIndex",JJE)
call Q97(RP7,"Target_"+I2S(JJE),D18)
endfunction
function JME takes unit u returns integer
return GetUnitAbilityLevel(u,n1[0])*1+GetUnitAbilityLevel(u,n1[1])*2+GetUnitAbilityLevel(u,n1[2])*4+GetUnitAbilityLevel(u,n1[3])*8+GetUnitAbilityLevel(u,n1[4])*16
endfunction
function JNE takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer ED8
set LP4="mqv"
if d<1 then
call UnitRemoveAbility(u,n1[0])
call UnitRemoveAbility(u,n1[1])
call UnitRemoveAbility(u,n1[2])
call UnitRemoveAbility(u,n1[3])
call UnitRemoveAbility(u,n1[4])
call UnitRemoveAbility(u,n1[5])
return
endif
loop
exitwhen c==0
set c=a/ 2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set ED8=i
set i=0
loop
exitwhen i>ED8
if b[i]==1 then
call Z27(u,n1[i])
else
call UnitRemoveAbility(u,n1[i])
endif
set i=i+1
endloop
endfunction
function JOE takes unit u,integer d returns nothing
if IsUnitType(u,UNIT_TYPE_STRUCTURE)==false then
call JNE(u,d+JME(u))
call JKE(u,a1)
endif
endfunction
function JPE takes unit p5,unit DA8,unit m5,integer X37 returns nothing
call IssueTargetOrderById(DA8,$D0097,m5)
call D08(p5,m5,2,(50+25*X37)/ 2,.3)
call JOE(m5,1)
endfunction
function JQE takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<o1 then
set o1=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set R24=GetFilterUnit()
endif
endif
return false
endfunction
function JRE takes nothing returns boolean
if(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4))and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false))and GetUnitTypeId(GetFilterUnit())!=1701670775 and GetUnitTypeId(GetFilterUnit())!=1970956647 and GetUnitTypeId(GetFilterUnit())!=1848651852 then
if GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<o1 then
set o1=GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)
set R24=GetFilterUnit()
endif
endif
return false
endfunction
function JSE takes unit p5,unit DA8,integer X37 returns nothing
local group g=ZI7()
set LP4="EyeOfTheStorm_Hit"
set R24=null
set o1=$F423F
set Z0=30+30*X37
set v1=p5
set IM4=p5
if GetUnitAbilityLevel(p5,1093752150)>0 then
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),525,Condition(function JRE))
else
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),525,Condition(function JQE))
endif
call ZH7(g)
if R24!=null then
call JPE(p5,DA8,R24,X37)
endif
set g=null
endfunction
function JTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local integer X37=R47(RP7,"Level")
local integer XB8=GetTriggerEvalCount(t)
local real JUE
set LP4="JTE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call JIE(RP7)
call Q47(RP7)
call RN7(t)
if GetTriggerUnit()==p5 then
call KillUnit(DA8)
endif
else
if GetUnitAbilityLevel(p5,1093752150)>0 then
if X37==1 then
set JUE=.65
elseif X37==2 then
set JUE=.55
else
set JUE=.45
endif
else
if X37==1 then
set JUE=.75
elseif X37==2 then
set JUE=.65
else
set JUE=.55
endif
endif
set JUE=JUE/.05
if ModuloInteger(XB8,R2I(JUE))==0 or XB8==1 then
set a1=RP7
call JSE(p5,DA8,X37)
endif
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
endif
set t=null
set p5=null
set DA8=null
return false
endfunction
function JVE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093747023)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1747990577,GetUnitX(p5),GetUnitY(p5),0)
set LP4="JVE"
if X37==0 then
set X37=GetUnitAbilityLevel(p5,1093752150)
endif
call UnitApplyTimedLife(DA8,1112820806,$F+5*X37)
call SetUnitAbilityLevel(DA8,1093747786,X37)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function JTE))
call QG7(RP7,"Caster",DA8)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
set p5=null
set t=null
set DA8=null
endfunction
function JWE takes nothing returns boolean
if GetSpellAbilityId()==1093747023 or GetSpellAbilityId()==1093752150 then
call JVE()
endif
return false
endfunction
function OJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function JWE))
set t=null
set n1[0]=1093747787
set n1[1]=1093747788
set n1[2]=1093747790
set n1[3]=1093747789
set n1[4]=1093747791
endfunction
function JXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer JYE=GetTriggerEvalCount(t)
local real y=(JYE-$D)*(JYE-$D)
set LP4="JXE"
if JYE<26 then
if OCD(Z47)==false then
call SetUnitFlyHeight(Z47,375-y,0)
endif
else
call PauseUnit(Z47,false)
if OCD(Z47)==false then
call SetUnitFlyHeight(Z47,GetUnitDefaultFlyHeight(Z47),0)
endif
call D38(QA7(RP7,"Source"),Z47,1,R77(RP7,"Damage"))
call DZ8(QA7(RP7,"Source"),Z47,R77(RP7,"Duration"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function JZE takes unit Z47,unit p5,real Hk,real JAE,real JBE returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="m_v"
call PauseUnit(Z47,true)
if OCD(Z47)==false then
call UnitAddAbility(Z47,1097691750)
call UnitRemoveAbility(Z47,1097691750)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl",GetUnitX(Z47),GetUnitY(Z47)))
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Source",p5)
call QD7(RP7,"Damage",JAE)
call QD7(RP7,"Duration",Hk)
call TriggerRegisterTimerEvent(t,.02/ .52*JBE,true)
call TriggerAddCondition(t,Condition(function JXE))
set t=null
endfunction
function JCE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false and Y57(GetEnumUnit())==false and RG7(GetEnumUnit(),"Omnislashing")==false then
call GroupAddUnit(IP4,GetEnumUnit())
call JZE(GetEnumUnit(),IM4,IJ4,IH4,IK4)
endif
endfunction
function J3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local real JAE=R77(RP7,"damage")
local real Hk=R77(RP7,"duration")
local real x1=R77(RP7,"x1")
local real y1=R77(RP7,"y1")
local real x2=R77(RP7,"x2")
local real y2=R77(RP7,"y2")
local real w=R77(RP7,"w")
local real J6E=R77(RP7,"TempReal")
local real a=Atan2(y2-y1,x2-x1)
local group g=QL7(RP7,"g")
local group JLE=ZI7()
local real JBE=J6E*.0625
local real J1E=R77(RP7,"LastFX_x")
local real J0E=R77(RP7,"LastFX_y")
local real J5E=R77(RP7,"FX_Interval")
local real J2E=R77(RP7,"airtime")
set LP4="J3E"
if JBE>N67(x1,y1,x2,y2)then
set x1=x2
set y1=y2
else
set x1=x1+JBE*Cos(a)
set y1=y1+JBE*Sin(a)
endif
set IM4=p5
set IH4=JAE
set IJ4=Hk
set IK4=J2E
set IP4=g
call GroupEnumUnitsInRange(JLE,x1,y1,w,Condition(function LF7))
call ForGroup(JLE,function JCE)
call ZH7(JLE)
if N67(x1,y1,J1E,J0E)>=J5E then
call QD7(RP7,"LastFX_x",x1)
call QD7(RP7,"LastFX_y",y1)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl",x1,y1))
endif
call QD7(RP7,"x1",x1)
call QD7(RP7,"y1",y1)
if x1==x2 and y1==y2 then
if R87(RP7,"destroyGroup") then
call ZH7(g)
endif
call Q47(RP7)
call RN7(t)
endif
set g=null
set JLE=null
set p5=null
set t=null
return false
endfunction
function J_E takes real K4E,real K7E returns integer
if K4E/ K7E-R2I(K4E/ K7E)>=.5 then
return R2I(K4E/ K7E)+1
endif
return R2I(K4E/ K7E)
endfunction
function K8E takes unit p5,unit m5,real JAE,real Hk,real J2E,real x1,real y1,real x2,real y2,real w,group K9E,boolean KDE,real J6E returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real KEE=N67(x1,y1,x2,y2)
local integer KFE=J_E(KEE,ON)
local real J5E=KEE/ KFE
local group g
set LP4="Impale"
call QG7(RP7,"Source",p5)
call QD7(RP7,"damage",JAE)
call QD7(RP7,"duration",Hk)
call QD7(RP7,"airtime",J2E)
call QD7(RP7,"x1",x1)
call QD7(RP7,"y1",y1)
call QD7(RP7,"x2",x2)
call QD7(RP7,"y2",y2)
call QD7(RP7,"w",w)
call QD7(RP7,"TempReal",J6E)
if K9E==null then
set g=ZI7()
if m5!=null and IsUnitIllusion(m5)==false then
call GroupAddUnit(g,m5)
endif
call QP7(RP7,"g",g)
call QF7(RP7,"destroyGroup",KDE)
else
call QP7(RP7,"g",K9E)
call QF7(RP7,"destroyGroup",KDE)
endif
call QD7(RP7,"FX_Interval",J5E)
call QD7(RP7,"LastFX_x",x1)
call QD7(RP7,"LastFX_y",y1)
call TriggerRegisterTimerEvent(t,.0625,true)
call TriggerAddCondition(t,Condition(function J3E))
set t=null
set g=null
endfunction
function KGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
set LP4="KGE"
call SetUnitPosition(Z47,x,y)
call SetUnitAnimation(Z47,"morph ALTERNATE")
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function KHE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093678671)
local location l
local real KIE
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local real KJE
local real KKE
local real KME
local real KNE
local real CasterX
local real CasterY
local integer BurrowstrikeTempInt
local unit oA
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real BD7
local real Hk=1.65
local unit m5=null
set LP4="KHE"
if X37==1 then
set BD7=100
elseif X37==2 then
set BD7=$A0
elseif X37==3 then
set BD7=$DC
elseif X37==4 then
set BD7=280
endif
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set KJE=GetLocationX(l)
set KKE=GetLocationY(l)
call RemoveLocation(l)
set KIE=MZ7(x,y,KJE,KKE)
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"x",KJE)
call QD7(RP7,"y",KKE)
call TriggerRegisterTimerEvent(t,N67(x,y,KJE,KKE)/ $7D0,false)
call TriggerAddCondition(t,Condition(function KGE))
if N67(x,y,KJE,KKE)<$96 then
set KJE=x+$96*Cos(KIE*bj_DEGTORAD)
set KKE=y+$96*Sin(KIE*bj_DEGTORAD)
endif
if GetSpellTargetUnit()!=null and ZG7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call K8E(Z47,m5,BD7,Hk,.52,x,y,KJE,KKE,$AF,null,true,$640)
set oA=null
set l=null
set Z47=null
set t=null
set m5=null
endfunction
function KOE takes nothing returns boolean
if GetSpellAbilityId()==1093678671 then
call KHE()
endif
return false
endfunction
function MN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MN8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KOE))
set t=null
endfunction
function KPE takes nothing returns nothing
call D38(e0,GetEnumUnit(),1,110)
if GetPlayerController(GetOwningPlayer(o0))==MAP_CONTROL_COMPUTER then
call UnitAddAbility(o0,1093744450)
endif
call IssueTargetOrderById(o0,$D006B,GetEnumUnit())
endfunction
function KQE takes unit p5,real x,real y,integer X37,integer KRE returns nothing
local group g=ZI7()
local real r
local string fx
set LP4="MAv"
if KRE==8 then
set r=675
elseif KRE==9 then
set r=700
elseif KRE==$A then
set r=725
else
set r=$FA+50*KRE
endif
if KRE<4 then
set fx="war3mapImported\\EpiPulse_1_4.mdx"
elseif KRE<8 then
set fx="war3mapImported\\EpiPulse_5_8.mdx"
else
set fx="war3mapImported\\EpiPulse_9_12.mdx"
endif
call DestroyEffect(AddSpecialEffect(fx,x,y))
set IM4=p5
set e0=p5
set o0=v0[GetPlayerId(GetOwningPlayer(p5))]
call GroupEnumUnitsInRange(g,x,y,r,Condition(function LF7))
call ForGroup(g,function KPE)
call ZH7(g)
call nm(.03,false,x,y,$96+100*KRE,$96+100*KRE,72,.03,512)
set g=null
endfunction
function KSE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local unit Z47=QA7(RP7,"Hero")
local real KTE=R77(RP7,"LastX")
local real KUE=R77(RP7,"LastY")
local boolean HTD=R87(RP7,"Scepter")
local integer X37=R47(RP7,"Level")
local integer KRE=R47(RP7,"Iteration")
local integer KVE=4+X37*2
local real x=KTE
local real y=KUE
set LP4="KSE"
if HTD then
set KVE=KVE+2
endif
if KRE>KVE then
call Q47(RP7)
call RN7(t)
else
if Z47!=null and A47(Z47)==false then
set x=GetUnitX(Z47)
set y=GetUnitY(Z47)
endif
call KQE(Z47,x,y,X37,KRE)
call Q97(RP7,"Iteration",KRE+1)
call QD7(RP7,"LastX",(x)*1.)
call QD7(RP7,"LastY",(y)*1.)
endif
set t=null
set p=null
set Z47=null
return false
endfunction
function KWE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local player p=GetOwningPlayer(Z47)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(Z47,1093678674)
local boolean HTD=false
set LP4="KWE"
if X37==0 then
set HTD=true
set X37=GetUnitAbilityLevel(Z47,1093747252)
endif
if WM7(p)then
set v0[GetPlayerId(p)]=CreateUnit(Z7[0],1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
else
set v0[GetPlayerId(p)]=CreateUnit(Y7[0],1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
endif
call Z27(v0[GetPlayerId(p)],1093744450)
call QG7(RP7,"Hero",Z47)
call QN7(RP7,"p",GetOwningPlayer(Z47))
call QD7(RP7,"LastX",(GetUnitX(Z47))*1.)
call QD7(RP7,"LastY",(GetUnitY(Z47))*1.)
call Q97(RP7,"Level",X37)
call Q97(RP7,"Iteration",2)
call QF7(RP7,"Scepter",HTD)
call TriggerRegisterTimerEvent(t,.35,true)
call TriggerAddCondition(t,Condition(function KSE))
call KQE(Z47,GetUnitX(Z47),GetUnitY(Z47),X37,1)
set Z47=null
set p=null
set t=null
endfunction
function KXE takes nothing returns boolean
if GetSpellAbilityId()==1093678674 or GetSpellAbilityId()==1093747252 then
call KWE()
endif
return false
endfunction
function MO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(t,Condition(function KXE))
call AC7(1093744450)
set t=null
endfunction
function KYE takes nothing returns boolean
return(GetSpellAbilityId()==1093683248)
endfunction
function KZE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),bj_UNIT_FACING)
set LP4="KZE"
call Z27(oA,1093683279)
call SetUnitAbilityLevel(oA,1093683279,GetUnitAbilityLevel(Z47,1093683248))
call IssueTargetOrderById(oA,$D0065,Z47)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set oA=null
return false
endfunction
function KAE takes nothing returns nothing
local unit KBE
local unit KCE=GetTriggerUnit()
local unit array K3E
local integer Rd
local trigger t=CreateTrigger()
set LP4="KAE"
call RI7(KCE,"Sandstorm")
set KBE=CreateUnit(GetOwningPlayer(KCE),1697656913,GetUnitX(KCE),GetUnitY(KCE),bj_UNIT_FACING)
call SetUnitPathing(KBE,false)
call SetUnitInvulnerable(KBE,true)
call UnitAddAbility(KBE,1097625443)
call UnitAddAbility(KBE,1093683277)
call SetUnitAbilityLevelSwapped(1093683277,KBE,GetUnitAbilityLevelSwapped(1093683248,KCE))
call IssueImmediateOrderById(KBE,$D00D1)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function KZE))
call QG7(GetHandleId(t),"Hero",KCE)
set Rd=1
set K3E[Rd]=CreateUnit(GetOwningPlayer(KCE),1697656913,GetUnitX(KCE)+$96,GetUnitY(KCE)+$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(K3E[Rd],.0)
call SetUnitPathing(K3E[Rd],false)
call SetUnitInvulnerable(K3E[Rd],true)
call UnitAddAbility(K3E[Rd],1097625443)
set Rd=2
set K3E[Rd]=CreateUnit(GetOwningPlayer(KCE),1697656913,GetUnitX(KCE)+$96,GetUnitY(KCE)-$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(K3E[Rd],.0)
call SetUnitPathing(K3E[Rd],false)
call SetUnitInvulnerable(K3E[Rd],true)
call UnitAddAbility(K3E[Rd],1097625443)
set Rd=3
set K3E[Rd]=CreateUnit(GetOwningPlayer(KCE),1697656913,GetUnitX(KCE)-$96,GetUnitY(KCE)+$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(K3E[Rd],.0)
call SetUnitPathing(K3E[Rd],false)
call SetUnitInvulnerable(K3E[Rd],true)
call UnitAddAbility(K3E[Rd],1097625443)
set Rd=4
set K3E[Rd]=CreateUnit(GetOwningPlayer(KCE),1697656913,GetUnitX(KCE)-$96,GetUnitY(KCE)-$96,bj_UNIT_FACING)
call SetUnitTimeScalePercent(K3E[Rd],.0)
call SetUnitPathing(K3E[Rd],false)
call SetUnitInvulnerable(K3E[Rd],true)
call UnitAddAbility(K3E[Rd],1097625443)
if WP7(GetOwningPlayer(KCE))then
call UnitApplyTimedLife(K3E[1],1112820806,20*GetUnitAbilityLevel(KCE,1093683248))
call UnitApplyTimedLife(K3E[2],1112820806,20*GetUnitAbilityLevel(KCE,1093683248))
call UnitApplyTimedLife(K3E[3],1112820806,20*GetUnitAbilityLevel(KCE,1093683248))
call UnitApplyTimedLife(K3E[4],1112820806,20*GetUnitAbilityLevel(KCE,1093683248))
endif
set t=null
set KBE=null
set KCE=null
endfunction
function sa takes nothing returns nothing
set DO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DO,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(DO,Condition(function KYE))
call TriggerAddAction(DO,function KAE)
endfunction
function K6E takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1697656913)
endfunction
function ScarabsFilter takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1966092594)or(GetUnitTypeId(GetFilterUnit())==1966092595)
endfunction
function FilterEidolons takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1752654196)or(GetUnitTypeId(GetFilterUnit())==1752658994)or(GetUnitTypeId(GetFilterUnit())==1752658995)or(GetUnitTypeId(GetFilterUnit())==1747988534)
endfunction
function KLE takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function K1E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local group g=QL7(RP7,"g")
local unit ZO7=QA7(RP7,"Hero")
set LP4="K1E"
if RG7(ZO7,"Sandstorm")==false then
call UnitRemoveAbility(ZO7,1110455378)
endif
call ForGroup(g,function KLE)
call DestroyGroup(g)
call Q47(RP7)
call RN7(t)
set t=null
set g=null
set ZO7=null
return false
endfunction
function Trig_Sand_Storm_Turn_Off_Func005001002 takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1429221451)
endfunction
function K0E takes nothing returns nothing
local unit KCE=GetTriggerUnit()
local group FP8
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="K0E"
call RK7(KCE,"Sandstorm")
set FP8=JJ7(GetOwningPlayer(KCE),Condition(function K6E))
call QP7(RP7,"g",FP8)
call QG7(RP7,"Hero",KCE)
call TriggerRegisterTimerEvent(t,GetUnitAbilityLevel(KCE,1093683248)*.3,false)
call TriggerAddCondition(t,Condition(function K1E))
set t=null
set KCE=null
set FP8=null
endfunction
function sB takes nothing returns nothing
set Dp=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Dp,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(Dp,Condition(function KYE))
call TriggerAddAction(Dp,function K0E)
endfunction
function K5E takes nothing returns nothing
call D38(m0,GetEnumUnit(),2,50*M0)
endfunction
function K2E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
local group g=ZI7()
local integer X37=GetUnitAbilityLevel(p5,1093810507)
set LP4="K2E"
call Z27(DA8,1093684537)
call SetUnitAbilityLevel(DA8,1093684537,X37)
call IssueImmediateOrderById(DA8,$D0080)
call Z27(DA8,1093677399)
call SetUnitAbilityLevel(DA8,1093677399,X37)
call IssueImmediateOrderById(DA8,$D009F)
set m0=p5
set M0=X37
call GroupEnumUnitsInRange(g,x,y,350+25,Condition(function LV7))
call ForGroup(g,function K5E)
call ZH7(g)
set p5=null
set DA8=null
set g=null
endfunction
function K_E takes nothing returns boolean
if GetSpellAbilityId()==1093810507 then
call K2E()
endif
return false
endfunction
function MP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MP8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K_E))
set t=null
endfunction
function M4E takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"UnitVar")
local unit M7E=QA7(RP7,"Owner")
local unit DA8
local real CB7=R77(RP7,"Duration")
local integer X37=GetUnitAbilityLevel(M7E,(1093683287))
local real M8E=R77(RP7,"x")
local real M9E=R77(RP7,"y")
local real DSD=GetUnitX(Z47)
local real DTD=GetUnitY(Z47)
set LP4="M4E"
if(DSD-M8E)*(DSD-M8E)+(DTD-M9E)*(DTD-M9E)>900 then
set DA8=CreateUnit(GetOwningPlayer(M7E),(1747988530),GetUnitX(Z47),GetUnitY(Z47),0)
call SetUnitAbilityLevel(DA8,(1093683506),X37)
call SetUnitAbilityLevel(DA8,(1093683289),X37)
call UnitApplyTimedLife(DA8,1112820806,7)
call QD7(RP7,"x",(DSD)*1.)
call QD7(RP7,"y",(DTD)*1.)
endif
set CB7=CB7+.2
call QD7(RP7,"Duration",(CB7)*1.)
if CB7>7 or GetUnitState(Z47,UNIT_STATE_LIFE)<1 then
call PauseTimer(t)
call Q47(RP7)
endif
set t=null
set Z47=null
set M7E=null
set DA8=null
endfunction
function MDE takes nothing returns nothing
local unit m5=GetEnumUnit()
local sound BZ7
local timer t
local integer RP7
set LP4="MDE"
call UnitDamageTarget(L7,m5,E8,true,true,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(O8,m5)
if IsUnitType(m5,UNIT_TYPE_HERO) then
set t=CreateTimer()
set RP7=GetHandleId(t)
set BZ7=CreateSound("Sounds\\Spectral Dagger.mp3",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundPosition(BZ7,GetUnitX(m5),GetUnitY(m5),0)
call SetSoundDistanceCutoff(BZ7,700)
call StartSound(BZ7)
call KillSoundWhenDone(BZ7)
call QG7(RP7,"UnitVar",m5)
call QG7(RP7,"Owner",L7)
call QD7(RP7,"x",(GetUnitX(m5))*1.)
call QD7(RP7,"y",(GetUnitY(m5))*1.)
call TimerStart(t,.2,true,function M4E)
endif
set m5=null
set t=null
set BZ7=null
endfunction
function MEE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and IsUnitInGroup(GetFilterUnit(),O8)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function MFE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local group WC9=QL7(RP7,"AlreadyDamaged")
local group FP8=ZI7()
local boolexpr X4D=Condition(function MEE)
local unit Z47=QA7(RP7,"Hero")
local unit DT8=QA7(RP7,"Projectile")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real t5=GetUnitX(DT8)
local real w5=GetUnitY(DT8)
local real l4=Atan2(Z5-w5,Y5-t5)
local real DSD=AY7(GetUnitX(DT8)+30*Cos(l4))
local real DTD=AZ7(GetUnitY(DT8)+30*Sin(l4))
local unit DA8
local integer X37=GetUnitAbilityLevel(Z47,(1093683287))
set LP4="MFE"
if R87(RP7,"TrailNext")then
call QF7(RP7,"TrailNext",false)
set DA8=CreateUnit(GetOwningPlayer(Z47),(1747988530),t5,w5,0)
call SetUnitAbilityLevel(DA8,(1093683506),X37)
call SetUnitAbilityLevel(DA8,(1093683289),X37)
call UnitApplyTimedLife(DA8,1112820806,$C)
else
call QF7(RP7,"TrailNext",true)
endif
call SetUnitX(DT8,DSD)
call SetUnitY(DT8,DTD)
call SetUnitFacing(DT8,l4*bj_RADTODEG)
set O8=WC9
set L7=Z47
set E8=50*GetUnitAbilityLevel(Z47,(1093683287))
call GroupEnumUnitsInRange(FP8,DSD,DTD,$96,X4D)
call ForGroup(FP8,function MDE)
call ZH7(FP8)
if(DSD-Y5)*(DSD-Y5)+(DTD-Z5)*(DTD-Z5)<$640 then
call PauseTimer(t)
call WF7(D18)
call Q47(RP7)
call KillUnit(DT8)
call ZH7(WC9)
endif
set t=null
set WC9=null
set FP8=null
call DestroyBoolExpr(X4D)
set X4D=null
set Z47=null
set DT8=null
set m5=null
set DA8=null
endfunction
function MGE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local group WC9=QL7(RP7,"AlreadyDamaged")
local group FP8=ZI7()
local boolexpr X4D=Condition(function MEE)
local unit Z47=QA7(RP7,"Hero")
local unit DT8=QA7(RP7,"Projectile")
local real Y5=R77(RP7,"TargetX")
local real Z5=R77(RP7,"TargetY")
local real t5=GetUnitX(DT8)
local real w5=GetUnitY(DT8)
local real l4=R77(RP7,"Angle")
local real DSD=AY7(GetUnitX(DT8)+30*Cos(l4))
local real DTD=AZ7(GetUnitY(DT8)+30*Sin(l4))
local unit DA8
local integer X37=GetUnitAbilityLevel(Z47,(1093683287))
set LP4="MGE"
if R87(RP7,"TrailNext")then
call QF7(RP7,"TrailNext",false)
set DA8=CreateUnit(GetOwningPlayer(Z47),(1747988530),t5,w5,0)
call SetUnitAbilityLevel(DA8,(1093683506),X37)
call SetUnitAbilityLevel(DA8,(1093683289),X37)
call UnitApplyTimedLife(DA8,1112820806,$C)
else
call QF7(RP7,"TrailNext",true)
endif
call SetUnitX(DT8,DSD)
call SetUnitY(DT8,DTD)
set O8=WC9
set L7=Z47
set E8=50*GetUnitAbilityLevel(Z47,(1093683287))
call GroupEnumUnitsInRange(FP8,DSD,DTD,$96,X4D)
call ForGroup(FP8,function MDE)
call ZH7(FP8)
if(DSD-Y5)*(DSD-Y5)+(DTD-Z5)*(DTD-Z5)<$640 then
call PauseTimer(t)
call Q47(RP7)
call KillUnit(DT8)
call ZH7(WC9)
endif
set t=null
set WC9=null
set FP8=null
call DestroyBoolExpr(X4D)
set X4D=null
set Z47=null
set DT8=null
set DA8=null
endfunction
function MHE takes unit Z47,integer D5 returns boolean
return(GetItemTypeId(UnitItemInSlot(Z47,D5))==1886613604)or(GetItemTypeId(UnitItemInSlot(Z47,D5))==1868983399)
endfunction
function MIE takes nothing returns nothing
local timer t=GetExpiredTimer()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real CB7=R77(RP7,"Duration")
local integer T8=0
set LP4="MIE"
loop
exitwhen T8>5
if MHE(Z47,T8)then
if GetUnitAbilityLevel(Z47,(1110455351))==0 then
call SetItemDropOnDeath(UnitItemInSlot(Z47,T8),true)
if GetItemTypeId(UnitItemInSlot(Z47,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(Z47,T8),true)
endif
else
call SetItemDropOnDeath(UnitItemInSlot(Z47,T8),false)
if GetItemTypeId(UnitItemInSlot(Z47,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(Z47,T8),false)
endif
endif
endif
set T8=T8+1
endloop
set CB7=CB7+.2
call QD7(RP7,"Duration",(CB7)*1.)
if GetUnitAbilityLevel(Z47,(1110455351))==0 then
call SetUnitPathing(Z47,true)
else
call SetUnitPathing(Z47,false)
endif
if CB7>30 then
call PauseTimer(t)
call Q47(RP7)
call SetUnitPathing(Z47,true)
set T8=0
loop
exitwhen T8>5
if MHE(Z47,T8)then
call SetItemDropOnDeath(UnitItemInSlot(Z47,T8),true)
if GetItemTypeId(UnitItemInSlot(Z47,T8))==1868983399 then
call SetItemDroppable(UnitItemInSlot(Z47,T8),true)
endif
endif
set T8=T8+1
endloop
endif
set t=null
set Z47=null
endfunction
function MJE takes nothing returns boolean
return GetSpellAbilityId()==(1093683287)
endfunction
function MKE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real t5=AY7(GetUnitX(Z47))
local real w5=AZ7(GetUnitY(Z47))
local unit DT8=CreateUnit(GetOwningPlayer(Z47),(1747988531),t5,w5,0)
local timer t=CreateTimer()
local integer RP7=GetHandleId(t)
local group WC9=ZI7()
local location MME
local real l4
local real Y5
local real Z5
set LP4="MKE"
call SetUnitPathing(DT8,false)
call QP7(RP7,"AlreadyDamaged",WC9)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Projectile",DT8)
if m5!=null then
call Q97(RP7,"TargetIndex",WI7(m5))
call TimerStart(t,.035,true,function MFE)
else
set MME=GetSpellTargetLoc()
set Y5=GetLocationX(MME)
set Z5=GetLocationY(MME)
set l4=Atan2(Z5-w5,Y5-t5)
call SetUnitFacing(DT8,l4*bj_RADTODEG)
set Y5=AY7(t5+$834*Cos(l4))
set Z5=AZ7(w5+$834*Sin(l4))
call QD7(RP7,"TargetX",(Y5)*1.)
call QD7(RP7,"TargetY",(Z5)*1.)
call QD7(RP7,"Angle",l4*1.)
call TimerStart(t,.035,true,function MGE)
endif
set t=CreateTimer()
set RP7=GetHandleId(t)
call SetUnitPathing(Z47,false)
call QG7(RP7,"Hero",Z47)
call TimerStart(t,.2,true,function MIE)
set Z47=null
set m5=null
set DT8=null
set t=null
set WC9=null
call RemoveLocation(MME)
set MME=null
endfunction
function NK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MJE))
call TriggerAddAction(t,function MKE)
call CreateSound("Sounds\\Spectral Dagger.mp3",false,false,false,$A,$A,"DefaultEAXON")
call AC7(1093683506)
call AC7(1093683289)
set t=null
endfunction
function MNE takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and GetUnitAbilityLevel(GetAttacker(),1093682776)>0)!=null
endfunction
function MOE takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunction
function MPE takes nothing returns nothing
local unit VC8=GetAttacker()
local unit sE=GetTriggerUnit()
local group FP8=ZI7()
local boolexpr hP=Condition(function MOE)
local integer RP7
set LP4="MPE"
call GroupEnumUnitsInRange(FP8,GetUnitX(sE),GetUnitY(sE),325+25,hP)
call GroupRemoveUnit(FP8,sE)
if FirstOfGroup(FP8)==null then
set RP7=GetHandleId(VC8)
if RG7(VC8,"Desolate")==false then
call UnitDamageTarget(VC8,sE,5+$F*GetUnitAbilityLevel(VC8,1093682776),true,true,ATTACK_TYPE_HERO,DAMAGE_TYPE_DIVINE,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",sE,"overhead"))
call RR7(VC8,"Desolate",.3)
endif
endif
call ZH7(FP8)
call DestroyBoolExpr(hP)
set VC8=null
set sE=null
set FP8=null
set hP=null
endfunction
function NM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NM8"
call ky(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function MNE))
call TriggerAddAction(t,function MPE)
set t=null
endfunction
function aDx takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function MQE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
local real BD7=E8
set LP4="MQE"
call UnitAddAbility(oA,1093684814)
call IssueTargetOrderById(oA,$D007F,m5)
call UnitDamageTarget(Z47,m5,BD7,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
set Z47=null
set m5=null
set oA=null
endfunction
function MRE takes nothing returns nothing
local real d=N37(GetTriggerUnit(),GetEnumUnit())-25
local real MSE=0
set LP4="MRE"
if d<300 then
set MSE=1
elseif d<$3E8 then
set MSE=($3E8-d)/700
endif
if MSE>0 then
set VL4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
call D38(GetTriggerUnit(),GetEnumUnit(),3,OS*MSE)
set VL4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=false
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function MTE takes nothing returns boolean
local unit ZO7=GetTriggerUnit()
local real YU9=GetEventDamage()
local integer DB8=GetUnitAbilityLevel(ZO7,1093684801)
local group g
set LP4="MTE"
if E38(YU9)then
set g=ZI7()
set OS=YU9*(.06+.04*DB8)
call BE7(ZO7,OS)
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),$401,Condition(function LV7))
call ForGroup(g,function MRE)
call ZH7(g)
endif
set ZO7=null
set g=null
return false
endfunction
function MUE takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="M0v"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function MTE))
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function MVE takes nothing returns boolean
if GetLearnedSkill()==1093684801 and GetUnitAbilityLevel(GetTriggerUnit(),1093684801)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call MUE(GetTriggerUnit(),false)
endif
return false
endfunction
function NN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NN8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MVE))
set t=null
endfunction
function MWE takes nothing returns boolean
return GetSpellAbilityId()==1093683257
endfunction
function MXE takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit Z47=GetTriggerUnit()
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="MXE"
call QG7(GetHandleId(oA),"HauntTarget",m5)
call Z27(oA,1093684793)
call SetUnitAbilityLevel(oA,1093684793,GetUnitAbilityLevel(Z47,1093683257))
call IssueTargetOrderById(oA,$D0132,Z47)
set m5=null
set Z47=null
set oA=null
endfunction
function MYE takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))!=null
endfunction
function MZE takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit XU=QA7(RP7,"HauntImage")
local unit m5=QA7(RP7,"HauntTarget")
local integer MAE=R47(RP7,"HauntPhase")
set LP4="MZE"
if GetTriggerEventId()!=EVENT_UNIT_DEATH and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER then
set MAE=MAE+1
call Q97(RP7,"HauntPhase",MAE)
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DisableTrigger(GetTriggeringTrigger())
call Q47(GetHandleId(GetTriggeringTrigger()))
call Q97(RP7,"HauntPhase",MAE)
if m5==GetTriggerUnit()then
call KillUnit(XU)
endif
elseif IsUnitPaused(XU)==false then
if MAE==2 then
call SetUnitVertexColor(XU,$FF,$FF,$FF,$FF)
endif
if MAE>1 then
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrderById(XU,$D000F,m5)
call EnableTrigger(GetTriggeringTrigger())
else
call DisableTrigger(GetTriggeringTrigger())
call IssueTargetOrderById(XU,$D0012,m5)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
set XU=null
set m5=null
endfunction
function MBE takes nothing returns boolean
return GetUnitAbilityLevel(GetSummonedUnit(),1110455884)>0
endfunction
function MCE takes nothing returns nothing
local unit oA=GetSummoningUnit()
local unit XU=GetSummonedUnit()
local unit m5=QA7(GetHandleId(oA),"HauntTarget")
local trigger t=CreateTrigger()
set LP4="MCE"
call SaveUnitHandle(C7,GetHandleId(G7[GetPlayerId(GetOwningPlayer(oA))]),StringHash("HauntTarget")+GetHandleId(XU),m5)
call SetUnitPathing(XU,false)
call SetUnitMoveSpeed(XU,400)
call SetUnitX(XU,GetUnitX(m5))
call SetUnitY(XU,GetUnitY(m5))
call IssueTargetOrderById(XU,$D0012,m5)
call SetUnitVertexColor(XU,$FF,$FF,$FF,50)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,XU,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function MZE)
call DestroyEffect(AddSpecialEffect("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdl",GetUnitX(XU),GetUnitY(XU)))
call QG7(GetHandleId(t),"HauntTarget",m5)
call QG7(GetHandleId(t),"HauntImage",XU)
call Q97(GetHandleId(t),"HauntPhase",0)
if(QL7(GetHandleId(GetOwningPlayer(GetSummoningUnit())),"MGrp")!=null)then
call GroupAddUnit(QL7(GetHandleId(GetOwningPlayer(GetSummoningUnit())),"MGrp"),GetSummonedUnit())
call SetUnitUserData(GetSummonedUnit(),GetPlayerId(GetOwningPlayer(QA7(GetHandleId(oA),"HauntTarget"))))
endif
call Q47(GetHandleId(oA))
set t=null
set m5=null
set XU=null
set oA=null
endfunction
function M3E takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local group FP8=ZI7()
local boolexpr hP=Condition(function MYE)
local sound HT
set LP4="M3E"
call Z27(GetTriggerUnit(),(1093683265))
if(QL7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"MGrp")!=null)then
call GroupClear(QL7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"MGrp"))
endif
call SetUnitPathing(ZO7,false)
call GroupEnumUnitsInRect(FP8,bj_mapInitialPlayableArea,hP)
call ForGroup(FP8,function MXE)
call SetUnitPathing(ZO7,true)
if FirstOfGroup(FP8)!=null then
set HT=CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,$A,$A,"DefaultEAXON")
call StartSound(HT)
call KillSoundWhenDone(HT)
endif
call DestroyBoolExpr(hP)
call ZH7(FP8)
set ZO7=null
set FP8=null
set hP=null
endfunction
function M6E takes nothing returns boolean
return GetLearnedSkill()==1093683257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093683257)==1
endfunction
function MLE takes nothing returns nothing
call Z27(GetTriggerUnit(),1093683265)
endfunction
function NO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NO8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MWE))
call TriggerAddAction(t,function M3E)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function MBE))
call TriggerAddAction(t,function MCE)
set t=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function M6E))
call TriggerAddAction(t,function MLE)
call CreateSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav",false,false,false,$A,$A,"DefaultEAXON")
call AC7(1093684793)
set t=null
endfunction
function M1E takes nothing returns boolean
return GetSpellAbilityId()==1093683265
endfunction
function M0E takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110455884)>0
endfunction
function M5E takes nothing returns nothing
local unit Z47
local real in=BF7(GetEnumUnit(),GetSpellTargetLoc())
set LP4="M5E"
if in<E8 then
set L7=GetEnumUnit()
set E8=in
endif
set Z47=null
endfunction
function M2E takes nothing returns unit
local group FP8=ZI7()
local boolexpr hP=Condition(function M0E)
set LP4="M2E"
set L7=null
set E8=$98967F
call GroupEnumUnitsOfPlayer(FP8,GetOwningPlayer(GetTriggerUnit()),hP)
call ForGroup(FP8,function M5E)
set Zz=FP8
call DestroyBoolExpr(hP)
set FP8=null
set hP=null
return L7
endfunction
function Reality_KillOtherImages takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function M_E takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=M2E()
local unit N4E=LoadUnitHandle(C7,GetHandleId(Z47),StringHash("HauntTarget")+GetHandleId(m5))
local real hN
local real ho
set LP4="M_E"
if m5==null then
call AV7(GetOwningPlayer(Z47),"Cannot find any of your Haunting illusions")
else
set hN=GetUnitX(m5)
set ho=GetUnitY(m5)
call KillUnit(m5)
call ZH7(Zz)
set Zz=null
call SetUnitX(Z47,hN)
call SetUnitY(Z47,ho)
if N67(GetCameraEyePositionX(),GetCameraEyePositionY(),GetUnitX(m5),GetUnitY(m5))>$578 then
call PanCameraToTimedForPlayer(GetOwningPlayer(Z47),hN,ho,0)
endif
call IssueTargetOrderById(Z47,$D000F,N4E)
endif
set Z47=null
set m5=null
set N4E=null
endfunction
function N7E takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=M2E()
set LP4="N7E"
if m5==null then
call OD7(Z47)
call AV7(GetOwningPlayer(Z47),"Cannot find any of your Haunting illusions")
endif
set Z47=null
set m5=null
endfunction
function NP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NP8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M1E))
call TriggerAddAction(t,function M_E)
set t=null
endfunction
function N8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=GetUnitAbilityLevel(p5,1093682515)
local integer VE9
local integer N9E
set LP4="N8E"
if X37>0 and A47(p5)==false then
set VE9=R2I(GetUnitMoveSpeed(p5)*.04*X37)
set N9E=R47(RP7,"LastBonus")
if VE9!=N9E then
call Q97(RP7,"LastBonus",VE9)
endif
endif
set t=null
set p5=null
return false
endfunction
function NDE takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="EmpoweringHaste"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function N8E))
call QG7(RP7,"Source",Z47)
call Q97(RP7,"LastBonus",0)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function NEE takes nothing returns boolean
if GetLearnedSkill()==1093682515 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093682515)==1 then
call NDE(GetTriggerUnit(),false)
endif
return false
endfunction
function MR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MR8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NEE))
set t=null
endfunction
function NFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real JID=(LoadReal(C7,(GetHandleId(CP7)),(685)))
set LP4="NFE"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if JID<(TimerGetElapsed(V))or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveReal(C7,(GetHandleId(CP7)),(685),((0)*1.))
call UnitRemoveAbility(CP7,1093809224)
call UnitRemoveAbility(CP7,1110459715)
endif
set t=null
set CP7=null
return false
endfunction
function NGE takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="Spiritbash_AddMS"
call Z27(CP7,1093809224)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809224,false)
call SaveReal(C7,(GetHandleId(CP7)),(685),(((TimerGetElapsed(V))+YS4-.01)*1.))
call TriggerRegisterTimerEvent(t,YS4,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function NFE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
endfunction
function NHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real WY9=(LoadReal(C7,(JZ7),($D)))
local real x=GetUnitX(J67)
local real y=GetUnitY(J67)
local integer ZD8=GetTriggerEvalCount(t)
local real U9D=(LoadReal(C7,(JZ7),($C1)))
local integer B59=(LoadInteger(C7,(JZ7),($C)))
set LP4="NHE"
if ZD8>35 then
call SaveReal(C7,(JZ7),($C1),((U9D*.98)*1.))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZD8>B59 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
call BW7(x,y,$96)
set x=AY7(x+U9D*Cos(WY9))
set y=AZ7(y+U9D*Sin(WY9))
if(IsPointInRegion(IT4,((x)*1.),((y)*1.)))==false then
call SetUnitX(J67,x)
call SetUnitY(J67,y)
endif
if ZD8==1 and(LoadBoolean(C7,(JZ7),(698)))==false then
call IssueTargetOrderById(CP7,$D000F,J67)
endif
endif
set t=null
set J67=null
set CP7=null
return false
endfunction
function NIE takes unit CP7,unit J67,boolean NJE,boolean NKE returns nothing
local trigger t
local integer JZ7
local real WY9=Atan2(GetUnitY(J67)-GetUnitY(CP7),GetUnitX(J67)-GetUnitX(CP7))
local integer DB8=GetUnitAbilityLevel(CP7,1093682997)
local unit DA8
set LP4="Greaterbash"
if NJE then
endif
if DB8>0 then
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call Z27(DA8,1093752657)
call SetUnitAbilityLevel(DA8,1093752657,DB8)
if IssueTargetOrderById(DA8,$D007F,J67)then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",CP7,"weapon"))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),($D),((WY9)*1.))
call SaveReal(C7,(JZ7),($C1),((2)*1.))
call SaveBoolean(C7,(JZ7),(698),(NKE))
call SaveInteger(C7,(JZ7),($C),(80+20*DB8))
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function NHE))
call D38(CP7,J67,1,GetUnitMoveSpeed(CP7)*.1*DB8)
call NGE(CP7)
endif
if NKE==false then
call RR7(CP7,"pIv",1.5)
endif
endif
set t=null
set CP7=null
set J67=null
set DA8=null
endfunction
function NME takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093682997)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))and GetRandomInt(1,100)<=17 and RG7(GetAttacker(),"pIv")==false then
call NIE(GetAttacker(),GetTriggerUnit(),false,false)
endif
return false
endfunction
function MS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MS8"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function NME))
set t=null
endfunction
function NNE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),YX4)==false then
call GroupAddUnit(YX4,GetEnumUnit())
call NIE(YU4,GetEnumUnit(),false,true)
endif
endfunction
function NOE takes integer id returns boolean
return(id==1093750840 or id==1093682515 or id==1093682996 or id==1093747768 or id==1093682997 or id==1096904043)or(id==$D0022 or id==$D0023 or id==$D0024 or id==$D0025 or id==$D0026 or id==$D0027)or(id>$F4240)
endfunction
function NPE takes nothing returns boolean
if(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(YU4)) then
if N37(YV4,GetFilterUnit())<YW4 then
set YW4=N37(YV4,GetFilterUnit())
set YT4=GetFilterUnit()
endif
endif
return false
endfunction
function NQE takes unit CP7,unit J67 returns unit
local group g=ZI7()
set LP4="ChargeOfDarkness_FindNewTarget"
set IM4=CP7
set YU4=CP7
set YT4=null
set YW4=$F423F
set YV4=J67
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),$FA0,Condition(function NPE))
call ZH7(g)
set g=null
return YT4
endfunction
function NRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real F5D=(550+50*DB8)*.02
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local real x
local real y
local real a
local real d
local string fx
local group g
if(GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==CP7)or GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or BJ8(CP7)or(LoadReal(C7,(JZ7),(442)))<(TimerGetElapsed(V))then
if(GetTriggerEventId()!=EVENT_UNIT_ISSUED_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_POINT_ORDER and GetTriggerEventId()!=EVENT_UNIT_ISSUED_TARGET_ORDER)or((GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)and NOE(GetIssuedOrderId())==false)then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call UnitRemoveAbility(J67,1093809228)
call UnitRemoveAbility(J67,1110459716)
call ZH7((LoadGroupHandle(C7,(JZ7),($BB))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitTimeScale(CP7,1)
call KillUnit(DA8)
call SetUnitPathing(CP7,true)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(CP7,1093744441)
call BW7(GetUnitX(CP7),GetUnitY(CP7),$C8)
call SaveBoolean(C7,GetHandleId(CP7),1145131595,false)
call RemoveSavedHandle(C7,GetHandleId(CP7),1145131595)
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call ResetUnitAnimation(CP7)
endif
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH and GetTriggerUnit()==J67 then
set fx=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7))or Y27(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
endif
call UnitRemoveAbility(J67,1093809228)
call UnitRemoveAbility(J67,1110459716)
set J67=NQE(CP7,J67)
if J67!=null then
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget(fx,J67,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget(fx,J67,"overhead")))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V))+50)*1.))
call TriggerRegisterDeathEvent(t,J67)
call SaveUnitHandle(C7,GetHandleId(CP7),1145131595,J67)
else
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call UnitRemoveAbility(J67,1093809228)
call UnitRemoveAbility(J67,1110459716)
call ZH7((LoadGroupHandle(C7,(JZ7),($BB))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitTimeScale(CP7,1)
call KillUnit(DA8)
call SetUnitPathing(CP7,true)
call ResetUnitAnimation(CP7)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(CP7,1093744441)
call SetUnitPosition(CP7,GetUnitX(CP7),GetUnitY(CP7))
call BW7(GetUnitX(CP7),GetUnitY(CP7),500)
call SaveBoolean(C7,GetHandleId(CP7),1145131595,false)
call RemoveSavedHandle(C7,GetHandleId(CP7),1145131595)
endif
else
set d=N67(GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))
if d<100 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call UnitRemoveAbility(J67,1093809228)
call UnitRemoveAbility(J67,1110459716)
call ZH7((LoadGroupHandle(C7,(JZ7),($BB))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitTimeScale(CP7,1)
call KillUnit(DA8)
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1093683027)
call SetUnitAbilityLevel(DA8,1093683027,DB8)
call IssueTargetOrderById(DA8,$D007F,J67)
call SetUnitPathing(CP7,true)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call UnitRemoveAbility(CP7,1093744441)
call SetUnitPosition(CP7,GetUnitX(CP7),GetUnitY(CP7))
call BW7(GetUnitX(CP7),GetUnitY(CP7),$C8)
call SaveBoolean(C7,GetHandleId(CP7),1145131595,false)
call RemoveSavedHandle(C7,GetHandleId(CP7),1145131595)
set YY4=DB8
call IssueTargetOrderById(CP7,$D000F,J67)
if WQ7(GetOwningPlayer(CP7))then
set hq[832+GetPlayerId(GetOwningPlayer(CP7))]=0
endif
else
if GetTriggerEvalCount(t)==1 then
call DisableTrigger(t)
call IssueImmediateOrderById(CP7,$D0019)
call EnableTrigger(t)
endif
if ModuloInteger(GetTriggerEvalCount(t),65)==0 then
if GetUnitTypeId(CP7)==1160786520 then
call SetUnitAnimationByIndex(CP7,1)
else
call SetUnitAnimationByIndex(CP7,2)
endif
endif
set a=MY7(CP7,J67)*bj_DEGTORAD
call SetUnitFacing(CP7,a*bj_RADTODEG)
set x=WN9+F5D*Cos(a)
set y=WO9+F5D*Sin(a)
call SetUnitX(CP7,x)
call SetUnitY(CP7,y)
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
call SaveReal(C7,(JZ7),(23),((x)*1.))
call SaveReal(C7,(JZ7),(24),((y)*1.))
set YX4=(LoadGroupHandle(C7,(JZ7),($BB)))
set g=ZI7()
set IM4=CP7
set YU4=CP7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LF7))
call GroupRemoveUnit(g,J67)
set YY4=DB8
call ForGroup(g,function NNE)
call ZH7(g)
set g=null
if d<$BB8 and GetUnitAbilityLevel(J67,1093809228)==0 then
endif
if WQ7(GetOwningPlayer(CP7))then
set hq[832+GetPlayerId(GetOwningPlayer(CP7))]=Bz+1
endif
endif
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function NSE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1865429073,GetUnitX(J67),GetUnitY(J67),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093750840)
local string fx=""
set LP4="NSE"
call SaveBoolean(C7,GetHandleId(CP7),1145131595,true)
call SaveUnitHandle(C7,GetHandleId(CP7),1145131595,J67)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7))or Y27(GetLocalPlayer())then
set fx="Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl"
call PingMinimapEx(GetUnitX(J67),GetUnitY(J67),2,$FF,$FF,$FF,false)
endif
call IssueTargetOrderById(CP7,$D0012,J67)
call SetUnitPathing(CP7,false)
if GetUnitTypeId(CP7)==1160786520 then
call SetUnitAnimationByIndex(CP7,1)
else
call SetUnitAnimationByIndex(CP7,2)
endif
call SetUnitTimeScale(CP7,2.5)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093744441,false)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,100)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V))+50)*1.))
call SaveReal(C7,(JZ7),(23),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(CP7))*1.))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget(fx,J67,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget(fx,J67,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B1),(AddSpecialEffectTarget("war3mapImported\\ShockwaveMissilePurple.mdx",CP7,"origin")))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(t,Condition(function NRE))
set t=null
set CP7=null
set J67=null
set DA8=null
endfunction
function NTE takes nothing returns boolean
if GetSpellAbilityId()==1093750840 and ZG7(GetSpellTargetUnit())==false then
call NSE()
endif
return false
endfunction
function MQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MQ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NTE))
set t=null
call AC7(1093687350)
endfunction
function NUE takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local real l4=Atan2(GetUnitY(J67)-GetUnitY(CP7),GetUnitX(J67)-GetUnitX(CP7))
local integer DB8=4
set LP4="NetherStrike_GreaterBash"
call NIE(CP7,J67,true,true)
set t=null
endfunction
function NVE takes nothing returns nothing
call NUE(WF4,GetEnumUnit())
endfunction
function NWE takes unit CP7,unit J67 returns nothing
local group g=ZI7()
set LP4="NetherStrike_AffectArea"
set IM4=CP7
set WF4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),275,Condition(function LF7))
call ForGroup(g,function NVE)
call ZH7(g)
set g=null
endfunction
function NXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=GetTriggerEvalCount(t)
local integer NYE
local integer DB8
local real WY9
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local real x=GetUnitX(J67)
local real y=GetUnitY(J67)
local real d=N67(x,y,WN9,WO9)
set LP4="NXE"
call SaveReal(C7,(JZ7),(23),((x)*1.))
call SaveReal(C7,(JZ7),(24),((y)*1.))
if GetTriggerEventId()==EVENT_UNIT_DEATH or ZD8==$C8 or d>$708 then
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call UnitShareVision(J67,GetOwningPlayer(CP7),false)
call UnitRemoveAbility(CP7,1093744441)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if ZD8<100 then
set NYE=ZD8
else
set NYE=$C8-ZD8
endif
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF*(100-NYE)/100)
if ZD8==100 then
set DB8=(LoadInteger(C7,(JZ7),(5)))
set WY9=Atan2(GetUnitY(J67)-GetUnitY(CP7),GetUnitX(J67)-GetUnitX(CP7))
call SetUnitPosition(CP7,GetUnitX(J67)+80*Cos(WY9),GetUnitY(J67)+80*Sin(WY9))
call SetUnitAnimation(CP7,"attack")
call IssueTargetOrderById(CP7,$D000F,J67)
if GetUnitAbilityLevel(CP7,1093682996)>0 then
call NUE(CP7,J67)
else
call NWE(CP7,J67)
endif
call D38(CP7,J67,1,50+100*DB8)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function NZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093682996)
set LP4="NZE"
if DB8==0 then
set DB8=GetUnitAbilityLevel(CP7,1093747768)
endif
call UnitShareVision(J67,GetOwningPlayer(CP7),true)
call IssueImmediateOrder(CP7,"halt")
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveReal(C7,(JZ7),(23),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(J67))*1.))
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NXE))
call Z27(CP7,1093744441)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093744441,false)
set t=null
set CP7=null
set J67=null
endfunction
function NAE takes nothing returns boolean
if(GetSpellAbilityId()==1093682996 or GetSpellAbilityId()==1093747768)and ZG7(GetSpellTargetUnit())==false then
call NZE()
endif
return false
endfunction
function MT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NAE))
set t=null
endfunction
function NBE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093809973)
set LP4="NBE"
if DB8==1 then
call Z27(CP7,1093809974)
elseif DB8==2 then
call UnitRemoveAbility(CP7,1093809974)
call Z27(CP7,1093809977)
elseif DB8==3 then
call UnitRemoveAbility(CP7,1093809974)
call UnitRemoveAbility(CP7,1093809977)
call Z27(CP7,1093809975)
elseif DB8==4 then
call UnitRemoveAbility(CP7,1093809974)
call UnitRemoveAbility(CP7,1093809977)
call UnitRemoveAbility(CP7,1093809975)
call Z27(CP7,1093809976)
endif
set CP7=null
endfunction
function NCE takes nothing returns boolean
if GetLearnedSkill()==1093809973 and IsUnitIllusion(GetTriggerUnit())==false then
call NBE()
endif
return false
endfunction
function MW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MW8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NCE))
set t=null
endfunction
function N3E takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real N6E=R77(RP7,"SourceLifePercent")
local real NLE=R77(RP7,"TargetLifePercent")
local integer X37=GetUnitAbilityLevel(p5,1093678929)
local real N1E=.33
set LP4="N3E"
if X37==2 then
set N1E=.28
elseif X37==3 then
set N1E=.23
endif
if GetSpellTargetUnit()==p5 then
call SetUnitState(p5,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(p5,UNIT_STATE_MAX_LIFE)*NLE*.01,GetUnitState(p5,UNIT_STATE_MAX_LIFE)*N1E))
endif
if GetSpellTargetUnit()==m5 then
call SetUnitLifePercentBJ(m5,N6E)
if GetUnitLifePercent(m5)<33. and X37==1 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,33.)
endif
if GetUnitLifePercent(m5)<28. and X37==2 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,28.)
endif
if GetUnitLifePercent(m5)<23. and X37==3 and GetUnitState(m5,UNIT_STATE_LIFE)>1 then
call SetUnitLifePercentBJ(m5,23.)
endif
endif
if GetTriggerEvalCount(t)==2 then
call Q47(RP7)
call RN7(t)
endif
set p5=null
set m5=null
set t=null
endfunction
function N0E takes nothing returns boolean
if GetSpellAbilityId()==1093678930 then
call N3E()
endif
return false
endfunction
function N5E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit DA8
set LP4="N5E"
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QD7(RP7,"SourceLifePercent",(GetUnitLifePercent(p5))*1.)
call QD7(RP7,"TargetLifePercent",(GetUnitLifePercent(m5))*1.)
call TriggerAddCondition(t,Condition(function N0E))
set DA8=CreateUnit(GetOwningPlayer(m5),1697656921,GetUnitX(m5),GetUnitY(m5),0)
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_SPELL_EFFECT)
call Z27(DA8,1093678930)
call IssueTargetOrderById(DA8,$D007F,p5)
call ShowUnit(DA8,false)
call SetUnitPathing(DA8,false)
call SetUnitInvulnerable(DA8,true)
call UnitApplyTimedLife(DA8,1112820806,.2)
set DA8=CreateUnit(GetOwningPlayer(p5),1697656921,GetUnitX(p5),GetUnitY(p5),0)
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_SPELL_EFFECT)
call Z27(DA8,1093678930)
call IssueTargetOrderById(DA8,$D007F,m5)
call ShowUnit(DA8,false)
call SetUnitPathing(DA8,false)
call SetUnitInvulnerable(DA8,true)
call UnitApplyTimedLife(DA8,1112820806,.2)
set t=null
set p5=null
set m5=null
set DA8=null
endfunction
function N2E takes nothing returns boolean
if GetSpellAbilityId()==1093678929 then
call N5E()
endif
return false
endfunction
function MU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function N2E))
set t=null
endfunction
function N_E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit YX8=(LoadUnitHandle(C7,(JZ7),(335)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="N_E"
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerUnit()!=YX8 then
call KillUnit(YX8)
endif
else
call IssueTargetOrderById(YX8,$D000F,J67)
endif
set t=null
set YX8=null
set J67=null
return false
endfunction
function O4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit YX8
set LP4="O4E"
if GetSummoningUnit()==DA8 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set YX8=GetSummonedUnit()
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterDeathEvent(t,YX8)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function N_E))
call SaveUnitHandle(C7,(JZ7),(335),(YX8))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call UnitAddAbility(YX8,1097625443)
call SetUnitPosition(YX8,GetUnitX(J67)+100,GetUnitY(J67)+100)
call IssueTargetOrderById(YX8,$D000F,J67)
call SetUnitMoveSpeed(YX8,522)
call SetUnitVertexColorBJ(YX8,100,100,100,60)
endif
set t=null
set J67=null
set CP7=null
set DA8=null
return false
endfunction
function O7E takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093815130)
local integer id
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
local trigger t
local integer JZ7
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809751,false)
if BP8(J67)==false then
call CA7(J67,1093809751,1,5,1110459722)
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function O4E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call Z27(DA8,1093809227)
call SetUnitAbilityLevel(DA8,1093809227,DB8)
call IssueTargetOrderById(DA8,$D0132,J67)
call BY7(YA4,GetUnitX(J67),GetUnitY(J67))
set CP7=null
set J67=null
set DA8=null
set t=null
endfunction
function O8E takes nothing returns boolean
if GetSpellAbilityId()==1093815130 then
call O7E()
endif
return false
endfunction
function MV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O8E))
set t=null
endfunction
function O9E takes nothing returns nothing
local unit CP7=GetSummoningUnit()
local unit YX8=GetSummonedUnit()
set LP4="O9E"
call SelectUnitAddForPlayer(YX8,GetOwningPlayer(CP7))
call UnitAddAbility(YX8,1093815129)
call UnitRemoveAbility(YX8,1093815129)
call SetUnitState(YX8,UNIT_STATE_LIFE,GetUnitState(YX8,UNIT_STATE_MAX_LIFE))
call SetUnitPosition(YX8,GetUnitX(YX8),GetUnitY(YX8))
set CP7=null
set YX8=null
endfunction
function ODE takes nothing returns boolean
if GetUnitAbilityLevel(GetSummonedUnit(),1110459721)>0 then
call O9E()
endif
return false
endfunction
function OEE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit DA8
local integer DB8=GetUnitAbilityLevel(CP7,1093815128)
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call Z27(DA8,1093679185)
call SetUnitAbilityLevel(DA8,1093679185,DB8)
call IssueTargetOrderById(DA8,$D0132,CP7)
set CP7=null
set DA8=null
endfunction
function OFE takes nothing returns boolean
if GetSpellAbilityId()==1093815128 and GetUnitTypeId(GetTriggerUnit())==1164277353 then
call OEE()
endif
return false
endfunction
function MZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OFE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function ODE))
set t=null
endfunction
function OGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>(4*(4+DB8))or Y57(J67)or N37(CP7,J67)>700 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(DA8)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetTriggerEvalCount(t)>1 and GetSpellAbilityId()==1093751361 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750856,true)
call KillUnit(DA8)
endif
elseif IsUnitVisible(J67,GetOwningPlayer(CP7))==false then
if(LoadInteger(C7,(JZ7),(34)))==1 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(DA8)
else
call SaveInteger(C7,(JZ7),(34),(1))
endif
else
call SaveInteger(C7,(JZ7),(34),(0))
if IsUnitAlly(CP7,GetOwningPlayer(J67))==false then
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+DB8*25./4.)
else
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+DB8*50./4.)
endif
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function OHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(CP7,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750856,true)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if GetTriggerEvalCount(t)==1 then
call IssueImmediateOrderById(CP7,$D0019)
endif
if IsUnitAlly(CP7,GetOwningPlayer(J67))==false then
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
else
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
endif
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function OIE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093750856)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8
if IsUnitAlly(CP7,GetOwningPlayer(J67))==false then
set DA8=CreateUnit(GetOwningPlayer(CP7),1966092615,0,0,0)
call Z27(DA8,1093678156)
call SetUnitAbilityLevel(DA8,1093678156,DB8)
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
call IssueTargetOrderById(DA8,$D0207,J67)
else
call Z27(CP7,1093751361)
call UnitMakeAbilityPermanent(CP7,true,1093751361)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093750856,false)
set DA8=CreateUnit(A7,1966092615,0,0,0)
call Z27(DA8,1093678156)
call SetUnitAbilityLevel(DA8,1093678156,DB8)
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
call IssueTargetOrderById(DA8,$D0207,CP7)
endif
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OGE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function OHE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
set CP7=null
set J67=null
set t=null
endfunction
function OJE takes nothing returns boolean
if GetSpellAbilityId()==1093750856 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or ZG7(GetSpellTargetUnit())==false)then
call OIE()
endif
return false
endfunction
function MY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OJE))
endfunction
function OKE takes nothing returns boolean
return GetSpellAbilityId()==1093683252
endfunction
function OME takes nothing returns nothing
local unit U_9=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(U_9,1093683252)
local unit DA8=CreateUnit(GetOwningPlayer(U_9),1697656901,GetUnitX(U_9),GetUnitY(U_9),0)
call UnitAddAbility(DA8,1093814862)
call SetUnitAbilityLevel(DA8,1093814862,DB8)
call IssueTargetOrderById(DA8,$D0132,U_9)
endfunction
function MX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OKE))
call TriggerAddAction(t,function OME)
endfunction
function ONE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=GetEventDamageSource()
local real d=GetEventDamage()
local real UJ8=R77(RP7,"KrakenShell|Damage")
local real OOE=R77(RP7,"KrakenShell|LastTime")
set LP4="ONE"
if WO7(GetOwningPlayer(m5))then
if(OOE+M2)<(O97())then
set UJ8=0
endif
set OOE=(O97())
set UJ8=UJ8+d
if UJ8>p2 and GetUnitAbilityLevel(p5,1112433775)==0 then
set UJ8=0
call BW8(p5)
call BT8(p5,0,0)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",p5,"origin"))
endif
call QD7(RP7,"KrakenShell|Damage",UJ8)
call QD7(RP7,"KrakenShell|LastTime",OOE)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function OPE takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="pPv"
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ONE))
call QG7(RP7,"Source",p5)
call QD7(RP7,"KrakenShell|Damage",0)
call QD7(RP7,"KrakenShell|LastTime",O97())
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
endfunction
function OQE takes nothing returns boolean
if GetLearnedSkill()==1093678149 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093678149)==1 then
call OPE(GetTriggerUnit(),false)
endif
return false
endfunction
function MA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MA8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function OQE))
set t=null
endfunction
function ORE takes nothing returns boolean
return GetSpellAbilityId()==1093678134 and ZG7(GetSpellTargetUnit())==false
endfunction
function OSE takes nothing returns nothing
local unit t=GetSpellTargetUnit()
local real OTE=(60.+(50.*I2R(GetUnitAbilityLevelSwapped(1093678134,GetTriggerUnit()))))
set LP4="OSE"
call UnitDamageTargetBJ(GetTriggerUnit(),t,OTE,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_COLD)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",t,"chest"))
set t=null
endfunction
function MB8 takes nothing returns nothing
set DQ=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(DQ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(DQ,Condition(function ORE))
call TriggerAddAction(DQ,function OSE)
endfunction
function OUE takes nothing returns boolean
return GetSpellAbilityId()==1093685074
endfunction
function OVE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)!=null
endfunction
function OWE takes nothing returns nothing
call D38(L7,GetEnumUnit(),2,E8)
endfunction
function OXE takes unit CP7,unit J67,real YU9 returns nothing
local group YY9=ZI7()
local boolexpr NJD=Condition(function OVE)
set LP4="Healing_DamageUnitsAround"
set L7=CP7
set E8=YU9
call GroupEnumUnitsInRange(YY9,GetUnitX(J67),GetUnitY(J67),$B9+25,NJD)
call ForGroup(YY9,function OWE)
call DestroyBoolExpr(NJD)
call ZH7(YY9)
set YY9=null
set NJD=null
endfunction
function OYE takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),O8)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false and GetFilterUnit()!=DD7)!=null
endfunction
function OZE takes group OAE,unit OBE,unit CP7,unit pzv returns unit
local group YY9=ZI7()
local boolexpr NJD=Condition(function OYE)
local unit OCE=null
local unit O3E
set LP4="Healing_FindBestTarget"
set O8=OAE
set L7=CP7
call GroupEnumUnitsInRange(YY9,GetUnitX(OBE),GetUnitY(OBE),500,NJD)
set O3E=FirstOfGroup(YY9)
set OCE=O3E
loop
exitwhen O3E==null
if GetUnitState(O3E,UNIT_STATE_LIFE)!=GetUnitState(O3E,UNIT_STATE_MAX_LIFE)then
if O3E!=CP7 and IsUnitType(O3E,UNIT_TYPE_HERO) and IsUnitType(OCE,UNIT_TYPE_HERO)==false then
set OCE=O3E
elseif O3E!=CP7 and GetUnitState(O3E,UNIT_STATE_LIFE)<GetUnitState(OCE,UNIT_STATE_LIFE)and IsUnitType(O3E,UNIT_TYPE_HERO) and IsUnitType(OCE,UNIT_TYPE_HERO) then
set OCE=O3E
elseif O3E!=CP7 and IsUnitType(OCE,UNIT_TYPE_HERO)==false and GetUnitState(O3E,UNIT_STATE_LIFE)<GetUnitState(OCE,UNIT_STATE_LIFE)then
set OCE=O3E
elseif O3E==CP7 then
set OCE=O3E
endif
endif
call GroupRemoveUnit(YY9,O3E)
set O3E=FirstOfGroup(YY9)
endloop
call ZH7(YY9)
call DestroyBoolExpr(NJD)
set YY9=null
set NJD=null
set O3E=null
set DG7=OCE
return DG7
endfunction
function O6E takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local string OLE="Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl"
local string O1E="origin"
local unit array O0E
local integer x
local integer i=1
local integer DB8=GetUnitAbilityLevel(ZO7,1093685074)
local real YU9=60+DB8*20
local group OAE=ZI7()
local integer O5E
local boolean O2E=false
set LP4="O6E"
set DD7=ZO7
if DB8==3 then
set O5E=4
elseif DB8==4 then
set O5E=5
else
set O5E=3
endif
call SetUnitState(ZO7,UNIT_STATE_LIFE,GetUnitState(ZO7,UNIT_STATE_LIFE)+YU9)
call OXE(ZO7,ZO7,YU9)
call GroupAddUnit(OAE,ZO7)
call BJ7(OLE,ZO7,O1E,2)
if J67==ZO7 then
set O0E[i]=OZE(OAE,ZO7,ZO7,J67)
else
set O0E[i]=J67
endif
if O0E[i]==null then
call ZH7(OAE)
return
endif
call SetUnitState(O0E[i],UNIT_STATE_LIFE,GetUnitState(O0E[i],UNIT_STATE_LIFE)+YU9)
call OXE(ZO7,O0E[i],YU9)
call GroupAddUnit(OAE,O0E[i])
call BJ7(OLE,O0E[i],O1E,2)
call BN7("SPLK",GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(O0E[i]),GetUnitY(O0E[i]),.3,.5,.9,1.,.7)
set i=2
loop
exitwhen i>O5E or O2E
set O0E[i]=OZE(OAE,O0E[i-1],ZO7,J67)
if O0E[i]==null then
set O2E=true
else
call GroupAddUnit(OAE,O0E[i])
call BJ7(OLE,O0E[i],O1E,2)
call SetUnitState(O0E[i],UNIT_STATE_LIFE,GetUnitState(O0E[i],UNIT_STATE_LIFE)+YU9)
call OXE(ZO7,O0E[i],YU9)
call BN7("SPLK",GetUnitX(O0E[i-1]),GetUnitY(O0E[i-1]),GetUnitX(O0E[i]),GetUnitY(O0E[i]),.3,.5,.9,1.,.7)
set i=i+1
endif
endloop
loop
set i=i-1
set O0E[i]=null
exitwhen i<2
endloop
call ZH7(OAE)
set ZO7=null
set J67=null
set OAE=null
endfunction
function O98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="O98"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OUE))
call TriggerAddAction(t,function O6E)
set t=null
endfunction
function O_E takes nothing returns boolean
return GetSpellAbilityId()==(1093684817)and ZG7(GetSpellTargetUnit())==false
endfunction
function P4E takes unit p5,unit m5,integer X37 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="BlowDart_Slow"
call Z27(oA,1093684810)
call SetUnitAbilityLevel(oA,1093684810,X37)
call IssueTargetOrderById(oA,$D006B,m5)
set oA=null
endfunction
function P7E takes unit p5,unit m5 returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="BlowDart_Stun"
call Z27(oA,1093684811)
call IssueTargetOrderById(oA,$D007F,m5)
set oA=null
endfunction
function P8E takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local unit J67=QA7(JZ7,"Target")
local integer DB8=GetUnitAbilityLevel(CP7,1093684817)
local integer P9E=GetTriggerExecCount(t)
local real YU9=8*DB8
local unit DA8=QA7(JZ7,"Caster")
set LP4="P8E"
if DB8==1 then
call Z27(J67,1093685079)
call D38(DA8,J67,2,YU9)
if P9E==8 then
call UnitRemoveAbility(J67,1093685079)
call Q47(JZ7)
call RN7(t)
endif
endif
if DB8==2 then
if P9E==1 then
call P4E(CP7,J67,2)
endif
if P9E>1 then
call Z27(J67,1093685079)
call D38(DA8,J67,2,YU9)
endif
if P9E==9 then
call UnitRemoveAbility(J67,1093685079)
call Q47(JZ7)
call RN7(t)
endif
endif
if DB8==3 then
if P9E==1 then
call P4E(CP7,J67,2)
endif
if P9E==2 then
call P7E(CP7,J67)
endif
if P9E>2 then
call Z27(J67,1093685079)
call D38(DA8,J67,2,YU9)
endif
if P9E==$A then
call UnitRemoveAbility(J67,1093685079)
call Q47(JZ7)
call RN7(t)
endif
endif
if DB8==4 then
if P9E==1 then
call P4E(CP7,J67,2)
endif
if P9E==2 then
call P7E(CP7,J67)
endif
if P9E>2 then
call Z27(J67,1093685079)
call D38(DA8,J67,2,YU9)
endif
if P9E==$A then
call UnitRemoveAbility(J67,1093685079)
call Q47(JZ7)
call RN7(t)
endif
endif
set t=null
set DA8=null
set CP7=null
set J67=null
endfunction
function PDE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656901,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),0)
set LP4="PDE"
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddAction(t,function P8E)
call QG7(RP7,"Source",GetTriggerUnit())
call QG7(RP7,"Target",GetSpellTargetUnit())
call QG7(RP7,"Caster",(DA8))
call P4E(GetTriggerUnit(),GetSpellTargetUnit(),1)
set t=null
set DA8=null
endfunction
function OD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OD8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O_E))
call TriggerAddAction(t,function PDE)
call AC7(1093684810)
call AC7(1093684811)
set t=null
endfunction
function PEE takes string BQ7,unit J67,unit ZO7 returns nothing
local texttag tt=CreateTextTag()
set LP4="ShallowGrave_TextTag"
call SetTextTagText(tt,BQ7,.033)
call SetTextTagPosUnit(tt,J67,64)
call SetTextTagColor(tt,$A0,0,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.65)
if IsUnitAlly(ZO7,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function PFE takes real DY8 returns string
if DY8>4.5 then
return"5.0"
elseif DY8>4. then
return"4.5"
elseif DY8>3.5 then
return"4.0"
elseif DY8>3. then
return"3.5"
elseif DY8>2.5 then
return"3.0"
elseif DY8>2. then
return"2.5"
elseif DY8>1.5 then
return"2.0"
elseif DY8>1. then
return"1.5"
elseif DY8>.5 then
return"1.0"
elseif DY8>.0 then
return"0.5"
else
return"0.0"
endif
return" "
endfunction
function PGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=QA7(JZ7,"Target")
local integer ZD8=GetTriggerEvalCount(t)
set LP4="PGE"
if ZD8>$B then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call PEE(PFE(5.5-.5*ZD8),J67,J67)
endif
set t=null
set J67=null
return false
endfunction
function PHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real PIE=R77(RP7,"Damage")
local real PJE=B97(GetUnitState(m5,UNIT_STATE_LIFE)-PIE,1)
local real PKE=R77(GetHandleId(m5),"ShallowGrave|FakeLife")
set LP4="PHE"
call SetUnitState(m5,UNIT_STATE_LIFE,PJE)
call QD7(GetHandleId(m5),"ShallowGrave|FakeLife",PKE-PIE)
call Q47(RP7)
call RN7(t)
set t=null
set m5=null
return false
endfunction
function PME takes unit m5,real PIE returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real PKE=R77(GetHandleId(m5),"ShallowGrave|FakeLife")
set LP4="Pav"
call QG7(RP7,"Target",m5)
call QD7(RP7,"Damage",PIE)
call QD7(GetHandleId(m5),"ShallowGrave|FakeLife",PKE+PIE)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function PHE))
set t=null
endfunction
function PNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5
local real Wx
local real PIE
local integer iX=GetTriggerEvalCount(t)
local real PKE
local real POE=R77(RP7,"LastFrame")
local real PPE=R77(RP7,"FrameDamage")
set LP4="PNE"
if POE!=O97()then
set POE=O97()
set PPE=0
call QD7(RP7,"LastFrame",POE)
call QD7(RP7,"FrameDamage",PPE)
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set m5=GetTriggerUnit()
set PKE=R77(GetHandleId(m5),"ShallowGrave|FakeLife")
set Wx=GetUnitState(m5,UNIT_STATE_LIFE)
set PIE=GetEventDamage()
if((Wx-PKE-PPE)-PIE)<1 then
call SetUnitState(m5,UNIT_STATE_LIFE,Wx+PIE+PPE)
call PME(m5,PIE)
else
set PPE=PPE+PIE
call QD7(RP7,"FrameDamage",PPE)
endif
else
call RK7(QA7(RP7,"Target"),"ShallowGrave|Active")
call DestroyEffect(Q17(RP7,"FX"))
call UnitRemoveAbility((QA7(RP7,"Target")),1093808457)
call UnitRemoveAbility((QA7(RP7,"Target")),1110456132)
call Q47(RP7)
call RN7(t)
endif
set m5=null
set t=null
return false
endfunction
function PQE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="PQE"
call Z27(J67,1093808457)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function PNE))
call QH7(JZ7,"FX",AddSpecialEffectTarget("war3mapImported\\DarkHands.mdx",J67,"overhead"))
call QD7(GetHandleId(J67),"ShallowGrave|FakeLife",0)
call QD7(JZ7,"LastFrame",O97())
call QD7(JZ7,"FrameDamage",0)
call QG7(JZ7,"Target",J67)
call RI7(J67,"ShallowGrave|Active")
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function PGE))
call QG7(JZ7,"Target",J67)
set t=null
set p5=null
set J67=null
endfunction
function PRE takes nothing returns boolean
if GetSpellAbilityId()==1093742668 then
call PQE()
endif
return false
endfunction
function OE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PRE))
set t=null
endfunction
function PSE takes nothing returns nothing
local unit m5=GetEnumUnit()
set LP4="PSE"
if A47(m5)==false then
call UnitRemoveAbility(m5,1093684821)
call UnitRemoveAbility(m5,1093684823)
elseif IsUnitType(m5,UNIT_TYPE_HERO) then
call C47(m5,1093684821,5.1)
call C47(m5,1093684823,5.1)
endif
set m5=null
endfunction
function PTE takes nothing returns nothing
local unit m5=GetEnumUnit()
set LP4="PTE"
if A47(m5)==false then
if IsUnitAlly(m5,IQ4)==false then
if IG4==0 then
call Z27(m5,1093684821)
else
call SetUnitAbilityLevel(m5,1093684821,IG4+1)
endif
else
if IG4==0 then
call Z27(m5,1093684823)
else
call SetUnitAbilityLevel(m5,1093684823,IG4+1)
endif
endif
endif
set m5=null
endfunction
function PUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local group g=QL7(RP7,"g")
local player p=QC7(RP7,"p")
local integer XB8=GetTriggerEvalCount(t)
local integer CB7=R47(RP7,"Duration")
set LP4="PUE"
set IQ4=p
set IG4=XB8
if XB8==CB7/1. then
call ForGroup(g,function PSE)
call ZH7(g)
call Q47(RP7)
call RN7(t)
else
call ForGroup(g,function PTE)
endif
set t=null
set g=null
set p=null
return false
endfunction
function PVE takes nothing returns nothing
call BJ7(IR4,GetEnumUnit(),"chest",3)
call BJ7(IR4,GetEnumUnit(),"chest",3)
call BJ7(IR4,GetEnumUnit(),"right hand",3)
call BJ7(IR4,GetEnumUnit(),"left hand",3)
endfunction
function PWE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local group g=ZI7()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(Z47,1093742673)
local integer CB7=6+6*X37
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1747988535,x,y,0)
local boolean HTD=false
set LP4="PWE"
if X37==0 then
set X37=GetUnitAbilityLevel(Z47,1093747778)
set CB7=6+6*X37+6
set HTD=true
endif
call RemoveLocation(l)
set IR4="Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl"
call SetUnitVertexColor(DA8,$FF,$FF,$FF,$FF)
call UnitApplyTimedLife(DA8,1112820806,5)
if HTD then
call GroupEnumUnitsInRange(g,x,y,800,Condition(function D98))
else
call GroupEnumUnitsInRange(g,x,y,600,Condition(function D98))
endif
call ForGroup(g,function PVE)
call QP7(RP7,"g",g)
call QN7(RP7,"p",GetOwningPlayer(Z47))
call Q97(RP7,"Duration",CB7)
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function PUE))
call TriggerEvaluate(t)
set Z47=null
set l=null
set g=null
set t=null
set DA8=null
endfunction
function PXE takes nothing returns boolean
if GetSpellAbilityId()==1093742673 or GetSpellAbilityId()==1093747778 then
call PWE()
endif
return false
endfunction
function OF8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="OF8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PXE))
call AC7(1093684821)
call AC7(1093684823)
set t=null
endfunction
function PYE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
set vZ=CreateUnit(GetOwningPlayer(IM4),1697656901,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
call Z27(vZ,1093744462)
call SetUnitAbilityLevel(vZ,1093744462,R84)
call IssueTargetOrderById(vZ,$D022F,GetEnumUnit())
call GroupAddUnit(IP4,GetEnumUnit())
endif
endfunction
function PZE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local group g=QL7(RP7,"g")
local unit oA=QA7(RP7,"Caster")
local integer X37=R47(RP7,"Level")
local real RK=R77(RP7,"Angle")
local group FP8
local real x
local real y
local real PAE
local real PBE
local real PCE=30
local unit P3E
set R84=X37
if GetTriggerEvalCount(t)>28 then
call ZH7(g)
call Q47(RP7)
call RN7(t)
call ShowUnit(oA,false)
call KillUnit(oA)
else
set x=GetUnitX(oA)
set y=GetUnitY(oA)
set FP8=ZI7()
set IP4=g
set IM4=oA
set IH4=X37*70
call GroupEnumUnitsInRange(FP8,x,y,$96,Condition(function DF8))
call ForGroup(FP8,function PYE)
call ZH7(FP8)
set PAE=AY7(x+PCE*Cos(RK*bj_DEGTORAD))
set PBE=AZ7(y+PCE*Sin(RK*bj_DEGTORAD))
call SetUnitX(oA,PAE)
call SetUnitY(oA,PBE)
if ModuloInteger(GetTriggerEvalCount(t),3)==0 then
set P3E=CreateUnit(GetOwningPlayer(oA),1865429335,PAE,PBE,0)
call KillUnit(P3E)
endif
endif
set t=null
set g=null
set FP8=null
set oA=null
return false
endfunction
function P6E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local group g=ZI7()
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real x2=GetLocationX(l)
local real y2=GetLocationY(l)
local real RK=MZ7(x1,y1,x2,y2)
local integer X37=GetUnitAbilityLevel(Z47,1093744435)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1747990347,x1,y1,RK)
set LP4="P6E"
call BY7(QR,x1,y1)
call QG7(RP7,"Caster",oA)
call Q97(RP7,"Level",X37)
call QP7(RP7,"g",g)
call QD7(RP7,"Angle",RK)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function PZE))
call RemoveLocation(l)
set t=null
set oA=null
set g=null
set Z47=null
set l=null
endfunction
function PLE takes nothing returns boolean
if GetSpellAbilityId()==1093744435 then
call P6E()
endif
return false
endfunction
function M68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function PLE))
set t=null
endfunction
function P1E takes nothing returns nothing
local unit oA=CreateUnit(GetOwningPlayer(IM4),1865429065,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),0)
set LP4="P1E"
call UnitApplyTimedLife(oA,1112820806,2)
set oA=null
endfunction
function P0E takes nothing returns boolean
return LF7()and GetUnitAbilityLevel(GetFilterUnit(),1110454840)==0
endfunction
function P5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer P2E=R47(RP7,"NovaLevel")
local real r=R77(RP7,"r")
local group g
set LP4="P5E"
if GetTriggerEvalCount(t)>$D then
call Q47(RP7)
call RN7(t)
else
set r=r+53
call QD7(RP7,"r",r)
set g=ZI7()
set IM4=Z47
set IG4=P2E
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),r,Condition(function P0E))
call ForGroup(g,function P1E)
call ZH7(g)
endif
set t=null
set Z47=null
set g=null
return false
endfunction
function P_E takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer P2E
local integer i=1
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local unit oA
set LP4="P_E"
if GetSpellAbilityId()==1093677363 then
set P2E=GetUnitAbilityLevel(Z47,1093677363)
else
set P2E=GetUnitAbilityLevel(Z47,1093681462)+1
endif
loop
exitwhen i>18
set oA=CreateUnit(GetOwningPlayer(Z47),1697657143,x,y,0)
if(GetPlayerController(GetOwningPlayer(Z47))==MAP_CONTROL_COMPUTER)then
call RemoveGuardPosition(oA)
endif
call Z27(oA,1093678391)
call SetUnitAbilityLevel(oA,1093678391,P2E)
call IssuePointOrderById(oA,$D0012,x+675*Cos(i*20*bj_DEGTORAD),y+675*Sin(i*20*bj_DEGTORAD))
call UnitApplyTimedLife(oA,1112820806,1.15)
set i=i+1
endloop
set Z47=null
set oA=null
endfunction
function Q4E takes nothing returns boolean
if GetSpellAbilityId()==1093677363 or GetSpellAbilityId()==1093681462 then
call P_E()
endif
return false
endfunction
function ML8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="ML8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q4E))
set t=null
endfunction
function Q7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="Q7E"
call D28(p5,0)
call RK7(p5,"4277")
set t=null
set p5=null
return false
endfunction
function Q8E takes unit VC8,unit m5 returns nothing
local real Q9E=100*GetUnitState(m5,UNIT_STATE_LIFE)/ GetUnitState(m5,UNIT_STATE_MAX_LIFE)
local real QDE=2.5*GetUnitAbilityLevel(VC8,1093746995)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer FinalBonus
call RI7(VC8,"4277")
call TriggerRegisterTimerEvent(t,.35,false)
call TriggerAddCondition(t,Condition(function Q7E))
call QG7(RP7,"Source",VC8)
if IsUnitType(m5,UNIT_TYPE_HERO)==false then
set QDE=QDE/ 2
endif
if Q9E>80 then
call D28(VC8,R2I(QDE))
elseif Q9E>60 then
call D28(VC8,R2I(QDE*2))
elseif Q9E>40 then
call D28(VC8,R2I(QDE*2*2))
elseif Q9E>20 then
call D28(VC8,R2I(QDE*2*2*2))
else
call D28(VC8,R2I(QDE*2*2*2*2))
endif
set t=null
endfunction
function QEE takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
if GetSpellAbilityId()==1093679446 and GetUnitAbilityLevel(GetTriggerUnit(),1093746995)>0 then
call Q8E(GetTriggerUnit(),GetSpellTargetUnit())
endif
else
if GetUnitAbilityLevel(GetAttacker(),1093746995)>0 and IsUnitIllusion(GetAttacker())==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit())) and RG7(GetAttacker(),"4277")==false then
call Q8E(GetAttacker(),GetTriggerUnit())
endif
endif
return false
endfunction
function M18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M18"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function QEE))
set t=null
endfunction
function QFE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real JID=(LoadReal(C7,(GetHandleId(J67)),(684)))
set LP4="QFE"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JID<(TimerGetElapsed(V))or Y57(J67)then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveReal(C7,(GetHandleId(J67)),(684),((0)*1.))
call UnitRemoveAbility(J67,1093808983)
call UnitRemoveAbility(J67,1093808981)
call UnitRemoveAbility(J67,1093808982)
call UnitRemoveAbility(J67,1093808984)
call UnitRemoveAbility(J67,1110459713)
else
call D38(CP7,J67,1,5+5*DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function QGE takes nothing returns nothing
local trigger t
local integer JZ7
local unit CP7=GetTriggerUnit()
local unit J67=GetAttacker()
local real JID=(LoadReal(C7,(GetHandleId(J67)),(684)))
local integer DB8=GetUnitAbilityLevel(CP7,1093684557)
set LP4="QGE"
if JID>(TimerGetElapsed(V))then
call SaveReal(C7,(GetHandleId(J67)),(684),(((TimerGetElapsed(V))+FS7)*1.))
else
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveReal(C7,(GetHandleId(J67)),(684),(((TimerGetElapsed(V))+FS7)*1.))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function QFE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
if BP8(J67)==false then
if DB8==1 then
call Z27(J67,1093808983)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093808983,false)
elseif DB8==2 then
call Z27(J67,1093808981)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093808981,false)
elseif DB8==3 then
call Z27(J67,1093808982)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093808982,false)
elseif DB8==4 then
call Z27(J67,1093808984)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093808984,false)
endif
endif
endif
set t=null
set CP7=null
set J67=null
endfunction
function QHE takes nothing returns boolean
if GetUnitAbilityLevel(GetTriggerUnit(),1093684557)>0 and GetUnitAbilityLevel(GetAttacker(),1093678162)==0 and IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and Y57(GetAttacker())==false then
call QGE()
endif
return false
endfunction
function M08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M08"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function QHE))
set t=null
endfunction
function QIE takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
set LP4="QIE"
call UnitRemoveAbility(m5,1111847784)
call UnitRemoveAbility(m5,1110458705)
set m5=null
endfunction
function QJE takes nothing returns boolean
if GetSpellAbilityId()==1093679152 or GetSpellAbilityId()==1093752154 then
call QIE()
endif
return false
endfunction
function M58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M58"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QJE))
set t=null
endfunction
function QKE takes nothing returns boolean
return GetSpellAbilityId()==1093679192
endfunction
function QME takes nothing returns nothing
local location FY9=GetUnitLoc(GetSpellAbilityUnit())
set LP4="QME"
call CreateNUnitsAtLocFacingLocBJ(1,1697656901,GetOwningPlayer(GetSpellAbilityUnit()),FY9,FY9)
call RemoveLocation(FY9)
call UnitAddAbility(bj_lastCreatedUnit,1093679427)
call SetUnitAbilityLevelSwapped(1093679427,bj_lastCreatedUnit,GetUnitAbilityLevelSwapped(1093679192,GetSpellAbilityUnit()))
call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,GetSpellAbilityUnit())
endfunction
function M_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function QKE))
call TriggerAddAction(t,function QME)
set t=null
endfunction
function QNE takes unit p5,integer X37,integer QOE returns nothing
call UnitRemoveAbility(p5,1093749586)
call UnitRemoveAbility(p5,1093749587)
call UnitRemoveAbility(p5,1093749585)
call UnitRemoveAbility(p5,1093749584)
call UnitRemoveAbility(p5,1093749553)
call UnitRemoveAbility(p5,1093749591)
call UnitRemoveAbility(p5,1093749592)
call UnitRemoveAbility(p5,1093749593)
call UnitRemoveAbility(p5,1093749812)
call UnitRemoveAbility(p5,1093749811)
call UnitRemoveAbility(p5,1093749810)
call UnitRemoveAbility(p5,1093749809)
call UnitRemoveAbility(p5,1093749816)
call UnitRemoveAbility(p5,1093749815)
call UnitRemoveAbility(p5,1093749817)
call UnitRemoveAbility(p5,1093749826)
if X37==1 then
if QOE==1 then
call Z27(p5,1093749586)
elseif QOE==2 then
call Z27(p5,1093749587)
elseif QOE==3 then
call Z27(p5,1093749585)
elseif QOE==4 then
call Z27(p5,1093749584)
endif
elseif X37==2 then
if QOE==1 then
call Z27(p5,1093749553)
elseif QOE==2 then
call Z27(p5,1093749591)
elseif QOE==3 then
call Z27(p5,1093749592)
elseif QOE==4 then
call Z27(p5,1093749593)
endif
elseif X37==3 then
if QOE==1 then
call Z27(p5,1093749812)
elseif QOE==2 then
call Z27(p5,1093749811)
elseif QOE==3 then
call Z27(p5,1093749810)
elseif QOE==4 then
call Z27(p5,1093749809)
endif
elseif X37==4 then
if QOE==1 then
call Z27(p5,1093749816)
elseif QOE==2 then
call Z27(p5,1093749815)
elseif QOE==3 then
call Z27(p5,1093749817)
elseif QOE==4 then
call Z27(p5,1093749826)
endif
endif
endfunction
function QPE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer QQE=R47(RP7,"ShellCache")
local unit p5=QA7(QQE,"Source")
local integer QOE=R47(QQE,"ShellCounter")
local integer X37=GetUnitAbilityLevel(p5,1093686872)
set LP4="QPE"
set QOE=A_7(QOE+1,4)
call Q97(QQE,"ShellCounter",QOE)
call QNE(p5,X37,QOE)
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function QRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer QOE=R47(RP7,"ShellCounter")
local integer X37=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
set LP4="QRE"
if GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and WO7(GetOwningPlayer(GetEventDamageSource()))then
if QOE>0 then
endif
set QOE=B47(QOE-1,0)
call Q97(RP7,"ShellCounter",QOE)
call QNE(p5,X37,QOE)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,$E-X37,false)
call TriggerAddCondition(t,Condition(function QPE))
call Q97(RP7,"ShellCache",GetHandleId(GetTriggeringTrigger()))
endif
set t=null
set p5=null
return false
endfunction
function QSE takes nothing returns nothing
local trigger t
local integer RP7
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(GetTriggerUnit(),1093686872)
set LP4="QSE"
if X37==1 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function QRE))
call QG7(RP7,"Source",p5)
call Q97(RP7,"ShellCounter",4)
endif
call QNE(p5,X37,4)
set t=null
set p5=null
endfunction
function QTE takes nothing returns boolean
if GetLearnedSkill()==1093686872 and IsUnitIllusion(GetTriggerUnit())==false then
call QSE()
endif
return false
endfunction
function QUE takes player p returns nothing
call SetPlayerAbilityAvailable(p,1093749586,false)
call SetPlayerAbilityAvailable(p,1093749587,false)
call SetPlayerAbilityAvailable(p,1093749585,false)
call SetPlayerAbilityAvailable(p,1093749584,false)
call SetPlayerAbilityAvailable(p,1093749589,false)
call SetPlayerAbilityAvailable(p,1093749590,false)
call SetPlayerAbilityAvailable(p,1093749553,false)
call SetPlayerAbilityAvailable(p,1093749591,false)
call SetPlayerAbilityAvailable(p,1093749592,false)
call SetPlayerAbilityAvailable(p,1093749593,false)
call SetPlayerAbilityAvailable(p,1093749594,false)
call SetPlayerAbilityAvailable(p,1093749588,false)
call SetPlayerAbilityAvailable(p,1093749812,false)
call SetPlayerAbilityAvailable(p,1093749811,false)
call SetPlayerAbilityAvailable(p,1093749810,false)
call SetPlayerAbilityAvailable(p,1093749809,false)
call SetPlayerAbilityAvailable(p,1093749808,false)
call SetPlayerAbilityAvailable(p,1093749813,false)
call SetPlayerAbilityAvailable(p,1093749816,false)
call SetPlayerAbilityAvailable(p,1093749815,false)
call SetPlayerAbilityAvailable(p,1093749817,false)
call SetPlayerAbilityAvailable(p,1093749826,false)
call SetPlayerAbilityAvailable(p,1093749825,false)
call SetPlayerAbilityAvailable(p,1093749814,false)
call SetPlayerAbilityAvailable(p,1093749832,false)
call SetPlayerAbilityAvailable(p,1093750067,false)
call SetPlayerAbilityAvailable(p,1093750068,false)
call SetPlayerAbilityAvailable(p,1093750083,false)
call SetPlayerAbilityAvailable(p,1093750071,false)
call SetPlayerAbilityAvailable(p,1093750072,false)
call SetPlayerAbilityAvailable(p,1093750073,false)
call SetPlayerAbilityAvailable(p,1093750081,false)
call SetPlayerAbilityAvailable(p,1093750069,false)
call SetPlayerAbilityAvailable(p,1093750082,false)
call SetPlayerAbilityAvailable(p,1093750070,false)
endfunction
function N78 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
set LP4="N78"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function QTE))
loop
exitwhen i>5
call QUE(Y7[i])
call QUE(Z7[i])
set i=i+1
endloop
set t=null
endfunction
function QVE takes nothing returns nothing
local integer DB8
local unit CP7=GetTriggerUnit()
local unit DA8
set LP4="QVE"
if GetUnitTypeId(CP7)==1966092599 or GetUnitTypeId(CP7)==1966092601 or GetUnitTypeId(CP7)==1966092600 or GetUnitTypeId(CP7)==1966092609 or GetUnitTypeId(CP7)==1966092610 or GetUnitTypeId(CP7)==1966092611 or GetUnitTypeId(CP7)==1966092629 or GetUnitTypeId(CP7)==1966092630 or GetUnitTypeId(CP7)==1966092631 then
return
endif
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
if GetUnitTypeId(CP7)==1966092596 or GetUnitTypeId(CP7)==1966092612 or GetUnitTypeId(CP7)==1966092626 then
set DB8=1
elseif GetUnitTypeId(CP7)==1966092597 or GetUnitTypeId(CP7)==1966092613 or GetUnitTypeId(CP7)==1966092627 then
set DB8=2
else
set DB8=3
endif
call Z27(DA8,1093750342)
call SetUnitAbilityLevel(DA8,1093750342,DB8)
call IssueImmediateOrderById(DA8,$D009F)
set CP7=null
set DA8=null
endfunction
function QWE takes unit QXE,integer A58,integer DB8 returns nothing
local integer QYE
set LP4="Gargoyle_SetDamage"
if DB8==1 then
set QYE=8
elseif DB8==2 then
set QYE=$E
elseif DB8==3 then
set QYE=22
endif
call D28(QXE,A58*QYE)
endfunction
function QZE takes nothing returns boolean
local integer A58
local integer WB7
local integer DB8
local unit QXE=GetAttacker()
local integer id=GetUnitTypeId(QXE)
set LP4="QZE"
if id==1966092596 or id==1966092597 or id==1966092598 or id==1966092612 or id==1966092613 or id==1966092614 or id==1966092626 or id==1966092627 or id==1966092628 then
set WB7=GetHandleId(QXE)
set DB8=R47(WB7,"Level")
set A58=R47(WB7,"Remaining")
set A58=IMaxBJ(A58-1,0)
call Q97(WB7,"Remaining",A58)
call QWE(QXE,A58,DB8)
endif
set QXE=null
return false
endfunction
function QAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit QXE=QA7(JZ7,"Source")
local unit CP7=QXE
local integer DB8=R47(JZ7,"Level")
local integer B09=R47(JZ7,"Counter")
local integer A58=R47(GetHandleId(QXE),"Remaining")
set LP4="QAE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(JZ7)
call RN7(t)
else
set B09=B09+1
call Q97(JZ7,"Counter",B09)
if ModuloInteger(B09,$F)==0 then
set A58=IMinBJ(A58+1,7)
call Q97(GetHandleId(QXE),"Remaining",A58)
endif
if GetUnitTypeId(CP7)==1966092599 or GetUnitTypeId(CP7)==1966092601 or GetUnitTypeId(CP7)==1966092600 or GetUnitTypeId(CP7)==1966092609 or GetUnitTypeId(CP7)==1966092610 or GetUnitTypeId(CP7)==1966092611 or GetUnitTypeId(CP7)==1966092629 or GetUnitTypeId(CP7)==1966092630 or GetUnitTypeId(CP7)==1966092631 then
set A58=7
call Q97(GetHandleId(QXE),"Remaining",A58)
endif
call QWE(QXE,A58,DB8)
if GetUnitTypeId(QXE)==1966092599 or GetUnitTypeId(QXE)==1966092601 or GetUnitTypeId(QXE)==1966092600 or GetUnitTypeId(QXE)==1966092609 or GetUnitTypeId(QXE)==1966092610 or GetUnitTypeId(QXE)==1966092611 or GetUnitTypeId(QXE)==1966092629 or GetUnitTypeId(QXE)==1966092630 or GetUnitTypeId(QXE)==1966092631 then
call SetUnitState(QXE,UNIT_STATE_LIFE,GetUnitState(QXE,UNIT_STATE_LIFE)+31.25+18.75*DB8)
endif
endif
set t=null
set QXE=null
return false
endfunction
function QBE takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==1966092596 or GetUnitTypeId(GetFilterUnit())==1966092597 or GetUnitTypeId(GetFilterUnit())==1966092598 or GetUnitTypeId(GetFilterUnit())==1966092612 or GetUnitTypeId(GetFilterUnit())==1966092613 or GetUnitTypeId(GetFilterUnit())==1966092614 or GetUnitTypeId(GetFilterUnit())==1966092626 or GetUnitTypeId(GetFilterUnit())==1966092627 or GetUnitTypeId(GetFilterUnit())==1966092628 or GetUnitTypeId(GetFilterUnit())==1966092599 or GetUnitTypeId(GetFilterUnit())==1966092601 or GetUnitTypeId(GetFilterUnit())==1966092600 or GetUnitTypeId(GetFilterUnit())==1966092609 or GetUnitTypeId(GetFilterUnit())==1966092610 or GetUnitTypeId(GetFilterUnit())==1966092611 or GetUnitTypeId(GetFilterUnit())==1966092629 or GetUnitTypeId(GetFilterUnit())==1966092630 or GetUnitTypeId(GetFilterUnit())==1966092631 then
call KillUnit(GetFilterUnit())
endif
return false
endfunction
function QCE takes nothing returns nothing
local group g=ZI7()
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local integer DB8=GetUnitAbilityLevel(CP7,1093750341)
local unit Q3E
local unit Q6E
local unit QLE
local trigger t
local integer JZ7
local boolean TXD=false
set LP4="QCE"
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(CP7),Condition(function QBE))
call ZH7(g)
if DB8==0 then
set DB8=GetUnitAbilityLevel(CP7,1093814599)
set TXD=true
endif
if DB8==1 then
set Q3E=CreateUnit(GetOwningPlayer(CP7),1966092596,x+75,y+75,GetUnitFacing(CP7))
set Q6E=CreateUnit(GetOwningPlayer(CP7),1966092612,x-75,y-75,GetUnitFacing(CP7))
elseif DB8==2 then
set Q3E=CreateUnit(GetOwningPlayer(CP7),1966092597,x+75,y+75,GetUnitFacing(CP7))
set Q6E=CreateUnit(GetOwningPlayer(CP7),1966092613,x-75,y-75,GetUnitFacing(CP7))
elseif DB8==3 then
set Q3E=CreateUnit(GetOwningPlayer(CP7),1966092598,x+75,y+75,GetUnitFacing(CP7))
set Q6E=CreateUnit(GetOwningPlayer(CP7),1966092614,x-75,y-75,GetUnitFacing(CP7))
endif
call SelectUnitAddForPlayer(Q3E,GetOwningPlayer(CP7))
call SelectUnitAddForPlayer(Q6E,GetOwningPlayer(CP7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",Q3E,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",Q6E,"origin"))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,Q3E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QAE))
call QG7(JZ7,"Source",Q3E)
call Q97(JZ7,"Level",DB8)
call Q97(JZ7,"Counter",0)
call Q97(GetHandleId(Q3E),"Remaining",7)
call Q97(GetHandleId(Q3E),"Level",DB8)
call QWE(Q3E,7,DB8)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,Q6E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QAE))
call QG7(JZ7,"Source",Q6E)
call Q97(JZ7,"Level",DB8)
call Q97(JZ7,"Counter",0)
call Q97(GetHandleId(Q6E),"Remaining",7)
call Q97(GetHandleId(Q6E),"Level",DB8)
call QWE(Q6E,7,DB8)
if TXD then
if DB8==1 then
set QLE=CreateUnit(GetOwningPlayer(CP7),1966092626,x+75,y,GetUnitFacing(CP7))
elseif DB8==2 then
set QLE=CreateUnit(GetOwningPlayer(CP7),1966092627,x+75,y,GetUnitFacing(CP7))
elseif DB8==3 then
set QLE=CreateUnit(GetOwningPlayer(CP7),1966092628,x+75,y,GetUnitFacing(CP7))
endif
call SelectUnitAddForPlayer(QLE,GetOwningPlayer(CP7))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",QLE,"origin"))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,QLE,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function QAE))
call QG7(JZ7,"Source",QLE)
call Q97(JZ7,"Level",DB8)
call Q97(JZ7,"Counter",0)
call Q97(GetHandleId(QLE),"Remaining",7)
call Q97(GetHandleId(QLE),"Level",DB8)
call QWE(QLE,7,DB8)
endif
set g=null
set CP7=null
set Q3E=null
set Q6E=null
set QLE=null
endfunction
function Q1E takes nothing returns boolean
if GetSpellAbilityId()==1093750341 or GetSpellAbilityId()==1093814599 then
call QCE()
elseif GetSpellAbilityId()==1093750338 or GetSpellAbilityId()==1093750339 or GetSpellAbilityId()==1093750340 or GetSpellAbilityId()==1093750348 or GetSpellAbilityId()==1093750349 or GetSpellAbilityId()==1093750350 or GetSpellAbilityId()==1093814618 or GetSpellAbilityId()==1093814832 or GetSpellAbilityId()==1093814833 then
call QVE()
endif
return false
endfunction
function M28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q1E))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function QZE))
set t=null
endfunction
function Q0E takes unit CP7,integer Q5E,integer Q2E returns nothing
local string c1="|c0000cc00"
local string c="||"
local string p=" "
local string s=c1+"|||r"
local string Q_E
local boolean R4E=false
local texttag tt=QB7(GetHandleId(CP7),"SoulAssumption|Text")
set LP4="SoulAssumption_UpdateText"
if Q5E==0 then
set Q_E=" "
elseif Q2E==1 then
if Q5E==0 then
set Q_E=c+p+c+p+c
elseif Q5E==1 then
set Q_E=s+p+c+p+c
elseif Q5E==2 then
set Q_E=s+p+s+p+c
elseif Q5E==3 then
set Q_E=s+p+s+p+s
endif
elseif Q2E==2 then
if Q5E==0 then
set Q_E=c+p+c+p+c+p+c
elseif Q5E==1 then
set Q_E=s+p+c+p+c+p+c
elseif Q5E==2 then
set Q_E=s+p+s+p+c+p+c
elseif Q5E==3 then
set Q_E=s+p+s+p+s+p+c
elseif Q5E==4 then
set Q_E=s+p+s+p+s+p+s
endif
elseif Q2E==3 then
if Q5E==0 then
set Q_E=c+p+c+p+c+p+c+p+c
elseif Q5E==1 then
set Q_E=s+p+c+p+c+p+c+p+c
elseif Q5E==2 then
set Q_E=s+p+s+p+c+p+c+p+c
elseif Q5E==3 then
set Q_E=s+p+s+p+s+p+c+p+c
elseif Q5E==4 then
set Q_E=s+p+s+p+s+p+s+p+c
elseif Q5E==5 then
set Q_E=s+p+s+p+s+p+s+p+s
endif
elseif Q2E==4 then
if Q5E==0 then
set Q_E=c+p+c+p+c+p+c+p+c+p+c
elseif Q5E==1 then
set Q_E=s+p+c+p+c+p+c+p+c+p+c
elseif Q5E==2 then
set Q_E=s+p+s+p+c+p+c+p+c+p+c
elseif Q5E==3 then
set Q_E=s+p+s+p+s+p+c+p+c+p+c
elseif Q5E==4 then
set Q_E=s+p+s+p+s+p+s+p+c+p+c
elseif Q5E==5 then
set Q_E=s+p+s+p+s+p+s+p+s+p+c
elseif Q5E==6 then
set Q_E=s+p+s+p+s+p+s+p+s+p+s
endif
endif
call SetTextTagText(tt,Q_E,.023)
if GetOwningPlayer(CP7)==GetLocalPlayer()then
set R4E=true
endif
if A47(CP7)then
set R4E=false
endif
call SetTextTagPosUnit(tt,CP7,0)
call SetTextTagVisibility(tt,R4E)
call SetTextTagPermanent(tt,true)
endfunction
function R7E takes unit Z47,integer X37 returns nothing
local integer R8E=GetUnitAbilityLevel(Z47,1093750337)
set LP4="PZv"
call Q0E(Z47,X37,R8E)
if X37==0 or RG7(Z47,"SoulAssumptionState") then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call Z27(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
call UnitRemoveAbility(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
elseif X37==1 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093750577)
call Z27(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
call Z27(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
elseif X37==2 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call Z27(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
call UnitRemoveAbility(Z47,1093684306)
call Z27(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
elseif X37==3 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call Z27(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
if R8E==1 then
call Z27(Z47,1093750583)
else
call Z27(Z47,1093750329)
endif
elseif X37==4 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call Z27(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
if R8E==2 then
call Z27(Z47,1093750584)
else
call Z27(Z47,1093750361)
endif
elseif X37==5 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call Z27(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
call UnitRemoveAbility(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call Z27(Z47,1093684806)
call UnitRemoveAbility(Z47,1093684548)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call UnitRemoveAbility(Z47,1093750579)
if R8E==3 then
call Z27(Z47,1093750585)
else
call Z27(Z47,1093750576)
endif
elseif X37==6 then
call UnitRemoveAbility(Z47,1093750583)
call UnitRemoveAbility(Z47,1093750584)
call UnitRemoveAbility(Z47,1093750585)
call UnitRemoveAbility(Z47,1093750577)
call UnitRemoveAbility(Z47,1093750578)
call UnitRemoveAbility(Z47,1093750362)
call UnitRemoveAbility(Z47,1093750329)
call UnitRemoveAbility(Z47,1093750361)
call UnitRemoveAbility(Z47,1093750576)
call Z27(Z47,1093750579)
call UnitRemoveAbility(Z47,1093684306)
call UnitRemoveAbility(Z47,1093687632)
call UnitRemoveAbility(Z47,1093685063)
call UnitRemoveAbility(Z47,1093687631)
call UnitRemoveAbility(Z47,1093684806)
call Z27(Z47,1093684548)
endif
if(GetUnitAbilityLevel(Z47,1093750337)+2)==X37 then
call Z27(Z47,1093750346)
else
call UnitRemoveAbility(Z47,1093750346)
endif
endfunction
function R9E takes unit p5,real BD7 returns nothing
local integer X37=0
local real RDE=110
set LP4="SoulAssumption_AdjustLevel"
if BD7>RDE*6 then
set X37=6
elseif BD7>RDE*5 then
set X37=5
elseif BD7>RDE*4 then
set X37=4
elseif BD7>RDE*3 then
set X37=3
elseif BD7>RDE*2 then
set X37=2
elseif BD7>RDE*1 then
set X37=1
endif
set X37=A_7(X37,2+GetUnitAbilityLevel(p5,1093750337))
call Q97(GetHandleId(p5),"Level",X37)
call R7E(p5,X37)
endfunction
function REE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=GetUnitAbilityLevel(p5,1093750337)
set LP4="REE"
call Q0E(p5,R47(GetHandleId(p5),"Level"),X37)
call R9E(p5,R77(GetHandleId(p5),"RecentDamage"))
set t=null
set p5=null
return false
endfunction
function RFE takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit p5=IM4
local unit m5=IN4
local real BD7=R77(RP7,"Damage")
set LP4="RFE"
if IsUnitAlly(m5,GetOwningPlayer(p5))==false then
set f3=true
call D38(p5,m5,1,BD7)
set f3=false
else
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+BD7)
endif
set p5=null
set m5=null
endfunction
function RGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="RGE"
call R9E(p5,R77(GetHandleId(p5),"RecentDamage"))
call Q47(RP7)
call RN7(t)
set t=null
set p5=null
return false
endfunction
function RHE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=R47(GetHandleId(p5),"Level")
local trigger t=B27(p5,m5,1747993157,"RFE",$3E8)
local integer RP7=GetHandleId(t)
set LP4="RHE"
call QD7(RP7,"Damage",(20+X37*65)*1.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AntiMagicShell\\AntiMagicShell.mdl",p5,"chest"))
call QD7(GetHandleId(p5),"RecentDamage",0*1.)
call R9E(p5,0)
call RR7(p5,"SoulAssumptionState",4)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function RGE))
call TriggerRegisterTimerEvent(t,4,false)
call QG7(RP7,"Source",p5)
set p5=null
set m5=null
set t=null
endfunction
function RIE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local real BD7=R77(RP7,"Damage")
set LP4="RIE"
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750337)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call QD7(GetHandleId(p5),"RecentDamage",(R77(GetHandleId(p5),"RecentDamage")-BD7)*1.)
endif
call R9E(p5,R77(GetHandleId(p5),"RecentDamage"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
return false
endfunction
function RJE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer RP7=GetHandleId(p5)
local texttag tt=CreateTextTag()
local boolean R4E=false
local trigger t=CreateTrigger()
set LP4="RJE"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function REE))
call QG7(GetHandleId(t),"Source",p5)
if GetOwningPlayer(p5)==GetLocalPlayer()then
set R4E=true
endif
call SetTextTagText(tt," ",.023)
call SetTextTagPosUnit(tt,p5,0)
call SetTextTagVisibility(tt,R4E)
call SetTextTagPermanent(tt,true)
set D3[GetPlayerId(GetOwningPlayer(p5))]=p5
call QD7(RP7,"RecentDamage",0*1.)
call R9E(p5,0)
call QS7(RP7,"SoulAssumption|Text",tt)
set p5=null
set t=null
set tt=null
endfunction
function RKE takes unit RME,unit RNE returns nothing
local real BD7=GetEventDamage()
local integer X37=GetUnitAbilityLevel(RME,1093750337)
local real ROE=R77(GetHandleId(RME),"RecentDamage")
local trigger t
local integer RP7
set LP4="P7v"
if N37(RME,RNE)<$578 and f3==false then
if E38(BD7)and GetEventDamage()>2 and GetEventDamageSource()!=GetTriggerUnit()and(WO7(GetOwningPlayer(GetEventDamageSource()))or GetUnitTypeId(GetEventDamageSource())==1848651852)then
set ROE=ROE+BD7
call QD7(GetHandleId(RME),"RecentDamage",ROE*1.)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",RME)
call QD7(RP7,"Damage",BD7*1.)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerRegisterUnitEvent(t,RME,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,RME,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RIE))
call R9E(RME,ROE)
endif
endif
set t=null
endfunction
function RPE takes nothing returns nothing
local integer i=0
set LP4="RPE"
loop
exitwhen i>$C
if D3[i]!=null then
call RKE(D3[i],GetTriggerUnit())
endif
set i=i+1
endloop
endfunction
function RQE takes nothing returns boolean
if GetLearnedSkill()==1093750337 and GetUnitAbilityLevel(GetTriggerUnit(),1093750337)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call RJE()
endif
return false
endfunction
function RRE takes nothing returns boolean
if GetSpellAbilityId()==1093750337 then
call RHE()
endif
return false
endfunction
function N48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N48"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function RQE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RRE))
set t=null
call VL8("RPE")
endfunction
function RSE takes nothing returns boolean
return GetSpellAbilityId()==1093678672
endfunction
function RTE takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(L7))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function RUE takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit oA=CreateUnit(GetOwningPlayer(L7),1697656899,GetUnitX(m5),GetUnitY(m5),0)
set LP4="RUE"
call Z27(oA,1093683781)
call SetUnitAbilityLevel(oA,1093683781,D8)
call IssueTargetOrderById(oA,$D006B,m5)
call UnitApplyTimedLifeBJ(2.,1112820806,oA)
call UnitAddAbility(oA,1097625443)
set oA=null
set m5=null
endfunction
function RVE takes unit DA8,unit Z47 returns nothing
local group FP8=ZI7()
local boolexpr hP=Condition(function RTE)
set LP4="qNv"
set L7=Z47
call GroupEnumUnitsInRange(FP8,GetUnitX(DA8),GetUnitY(DA8),675,hP)
call ForGroup(FP8,function RUE)
call ZH7(FP8)
call DestroyBoolExpr(hP)
set FP8=null
set hP=null
endfunction
function RWE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47
local unit oA=QA7(RP7,"Caster")
set LP4="RWE"
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call KillUnit(oA)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEvalCount(t)>22 then
call KillUnit(oA)
call Q47(RP7)
call RN7((t))
call OD7(QA7(RP7,"Hero"))
else
call SetUnitAnimation(oA,"birth")
set Z47=QA7(RP7,"Hero")
set D8=GetTriggerExecCount(t)*GetUnitAbilityLevel(Z47,1093678672)/2
call RVE(oA,Z47)
endif
set t=null
set oA=null
set Z47=null
endfunction
function RXE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location Mk=GetSpellTargetLoc()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real x=GetLocationX(Mk)
local real y=GetLocationY(Mk)
local unit oA=CreateUnit(GetOwningPlayer(Z47),1697657159,x,y,0)
set LP4="RXE"
call RemoveLocation(Mk)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function RWE)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",oA)
set Z47=null
set Mk=null
set t=null
set oA=null
endfunction
function N68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N68"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(t,function RXE)
call TriggerAddCondition(t,Condition(function RSE))
call AC7(1093683781)
set t=null
endfunction
function RYE takes nothing returns boolean
return GetSpellAbilityId()==1093683765
endfunction
function RZE takes nothing returns nothing
call Z27(GetEnumUnit(),1093685298)
endfunction
function RAE takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093685298)
endfunction
function RBE takes unit RCE,unit R3E returns nothing
if RCE!=null and R3E!=null then
call BN7("CLPB",GetUnitX(RCE),GetUnitY(RCE),GetUnitX(R3E),GetUnitY(R3E),.7,.1,.9,1,.3)
endif
endfunction
function R6E takes nothing returns nothing
local unit Z47=QA7(GetHandleId(GetTriggeringTrigger()),"Hero")
local real BD7=.2*GetEventDamage()
set LP4="R6E"
set BD7=B87(BD7,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE))
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>1 and GetEnumUnit()!=GetTriggerUnit()then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)<BD7 then
call D38(Z47,GetEnumUnit(),3,BD7)
else
call CS7(GetEnumUnit(),BD7)
endif
endif
set Z47=null
endfunction
function RLE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local group FP8=QL7(RP7,"Group")
set LP4="RLE"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call ForGroup(FP8,function RAE)
call Q47(RP7)
call ZH7(FP8)
call RN7(t)
elseif GetEventDamage()>$A and GetEventDamage()<6000 then
call DisableTrigger(t)
call ForGroup(FP8,function R6E)
call EnableTrigger(t)
endif
set t=null
set FP8=null
endfunction
function R1E takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>1)!=null
endfunction
function R0E takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local group FP8=ZI7()
local integer X37=GetUnitAbilityLevel(Z47,1093683765)
local boolexpr hP=Condition(function R1E)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer i=2
local group R5E=ZI7()
local unit array R2E
local string R_E="Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl"
set LP4="R0E"
call QG7(RP7,"Hero",Z47)
call RBE(Z47,m5)
call BJ7(R_E,m5,"overhead",25)
set R2E[1]=m5
call QG7(RP7,"Unit1",R2E[1])
call TriggerRegisterUnitEvent(t,R2E[1],EVENT_UNIT_DAMAGED)
call GroupEnumUnitsInRange(FP8,GetUnitX(m5),GetUnitY(m5),600,hP)
call GroupRemoveUnit(FP8,m5)
call GroupAddUnit(R5E,m5)
call QP7(RP7,"Group",R5E)
loop
exitwhen i>(2+X37)or FirstOfGroup(FP8)==null
set R2E[i]=FirstOfGroup(FP8)
call RBE(R2E[i-1],R2E[i])
call TriggerRegisterUnitEvent(t,R2E[i],EVENT_UNIT_DAMAGED)
call GroupAddUnit(R5E,R2E[i])
call GroupRemoveUnit(FP8,R2E[i])
call BJ7(R_E,R2E[i],"overhead",25)
set i=i+1
endloop
call Q97(RP7,"FXCount",i-1)
set D8=GetUnitAbilityLevel(Z47,1093683765)
call ForGroup(R5E,function RZE)
call TriggerRegisterTimerEvent(t,25,false)
call TriggerAddAction(t,function RLE)
call DestroyBoolExpr(hP)
set Z47=null
set m5=null
call ZH7(FP8)
set FP8=null
set hP=null
set t=null
set R5E=null
endfunction
function NL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NL8"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RYE))
call TriggerAddAction(t,function R0E)
call AC7(1093683769)
set t=null
endfunction
function S4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer DB8=GetUnitAbilityLevel(p5,1093681491)
set LP4="S4E"
if GetTriggerEvalCount(t)>9 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(Q17(RP7,"FX"))
call UnitRemoveAbility(m5,1093744459)
call UnitRemoveAbility(m5,1110458704)
call Q47(RP7)
call RN7(t)
else
call D38(p5,m5,1,DB8*$A+5)
endif
set p5=null
set m5=null
set t=null
return false
endfunction
function S7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=GetUnitAbilityLevel(p5,1093681491)
set LP4="S7E"
if GetTriggerEvalCount(t)>9 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(Q17(RP7,"FX"))
call UnitRemoveAbility(m5,1093685296)
call UnitRemoveAbility(m5,1110456115)
call Q47(RP7)
call RN7(t)
else
call BH7(m5,X37*$A+5)
endif
set p5=null
set m5=null
set t=null
return false
endfunction
function S8E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="S8E"
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
if IsUnitAlly(m5,GetOwningPlayer(p5))then
call TriggerAddCondition(t,Condition(function S7E))
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl",m5,"chest"))
call Z27(m5,1093685296)
elseif ZG7(GetSpellTargetUnit())==false then
call TriggerAddCondition(t,Condition(function S4E))
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl",m5,"overhead"))
call Z27(m5,1093744459)
endif
set p5=null
set m5=null
set t=null
endfunction
function S9E takes nothing returns boolean
if GetSpellAbilityId()==1093681491 then
call S8E()
endif
return false
endfunction
function N18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S9E))
call AC7(1093685296)
call AC7(1093744459)
set t=null
endfunction
function SDE takes nothing returns nothing
call D38(WD4,GetEnumUnit(),1,20+$A*WE4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl",GetEnumUnit(),"head"))
endfunction
function SEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8
local integer XZ7=GetUnitTypeId(CP7)
local group g
set LP4="SEE"
if XZ7==1848651861 or XZ7==1848658773 then
set DB8=1
elseif XZ7==1848651865 or XZ7==1848658774 then
set DB8=2
elseif XZ7==1848651866 or XZ7==1848658775 then
set DB8=3
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set IM4=CP7
set WD4=CP7
set WE4=DB8
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),275,Condition(function LF7))
call ForGroup(g,function SDE)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function SFE takes unit u returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="RainOfChaos_Add"
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function SEE))
call SaveUnitHandle(C7,(JZ7),(2),(u))
set t=null
endfunction
function SGE takes nothing returns boolean
    local integer XZ7=GetUnitTypeId(GetTriggerUnit())
    set LP4="SGE"
    if XZ7==1848651861 or XZ7==1848658773 or XZ7==1848651865 or XZ7==1848658774 or XZ7==1848651866 or XZ7==1848658775 then
	    // 地狱火
        call SFE(GetTriggerUnit())
    endif
return false
endfunction
function SHE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local real SIE=(LoadReal(C7,(JZ7),($BF)))
local real SJE=(LoadReal(C7,(JZ7),($C0)))
local integer DB8=GetUnitAbilityLevel(CP7,1395667029)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,SIE,SJE,0)
set LP4="SHE"
call Z27(DA8,1395667029)
call SetUnitAbilityLevel(DA8,1395667029,DB8)
call IssuePointOrderById(DA8,$D0100,x,y)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set CP7=null
set DA8=null
set t=null
return false
endfunction
function SKE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="SKE"
call TriggerRegisterTimerEvent(t,.3,false)
call TriggerAddCondition(t,Condition(function SHE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((GetSpellTargetX())*1.))
call SaveReal(C7,(JZ7),(7),((GetSpellTargetY())*1.))
call SaveReal(C7,(JZ7),($BF),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),($C0),((GetUnitY(CP7))*1.))
set CP7=null
set t=null
endfunction
function SME takes nothing returns boolean
if GetSpellAbilityId()==1395667029 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call SKE()
endif
return false
endfunction
function N08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N08"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SME))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetEntireMapRect())
call TriggerAddCondition(t,Condition(function SGE))// 地狱火
set t=null
endfunction
function SNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="SNE"
if GetUnitAbilityLevel(Z47,1112041075)==0 then
call UnitRemoveAbility(Z47,1093681977)
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function SOE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
set LP4="SOE"
call Z27(Z47,1093681977)
call SetUnitAbilityLevel(Z47,1093681977,GetUnitAbilityLevel(Z47,1093681985))
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function SNE))
set Z47=null
set t=null
endfunction
function SPE takes nothing returns boolean
if GetSpellAbilityId()==1093681985 then
call SOE()
endif
return false
endfunction
function N88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N88"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SPE))
set t=null
endfunction
function SQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="SQE"
call SetUnitState(QA7(RP7,"Unit"),UNIT_STATE_MANA,R77(RP7,"Mana"))
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function SRE takes unit u,real SSE returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="qQv"
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function SQE))
call QG7(RP7,"Unit",u)
call QD7(RP7,"Mana",SSE)
set t=null
endfunction
function STE takes nothing returns boolean
return GetSpellAbilityId()==1093682004
endfunction
function SUE takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggerUnit())
local real Wx=B97(R77(RP7,"TLLife1"),1)
local real Tw=B97(R77(RP7,"TLMana1"),1)
local real x=R77(RP7,"TLX1")
local real y=R77(RP7,"TLY1")
local unit Z47=GetTriggerUnit()
set LP4="SUE"
if R77(RP7,"TLLife1")>1 and GetUnitState(Z47,UNIT_STATE_LIFE)>1 then
call AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(Z47),GetUnitY(Z47))
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
call SetUnitState(Z47,UNIT_STATE_LIFE,Wx)
call SetUnitState(Z47,UNIT_STATE_MANA,Tw)
call UnitRemoveBuffs(Z47,false,true)
call BW8(Z47)
call SRE(Z47,Tw)
endif
set Z47=null
endfunction
function N98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N98"
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function STE))
call TriggerAddAction(t,function SUE)
set t=null
endfunction
function SVE takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit Z47=QA7(GetHandleId(t),"UnitVar")
local integer RP7=GetHandleId(Z47)
local integer T8=1
local integer U8=$A
set LP4="SVE"
loop
exitwhen T8>U8
call QD7(RP7,"TLX"+I2S(T8-1),R77(RP7,"TLX"+I2S(T8)))
call QD7(RP7,"TLY"+I2S(T8-1),R77(RP7,"TLY"+I2S(T8)))
call QD7(RP7,"TLLife"+I2S(T8-1),R77(RP7,"TLLife"+I2S(T8)))
call QD7(RP7,"TLMana"+I2S(T8-1),R77(RP7,"TLMana"+I2S(T8)))
set T8=T8+1
endloop
call QD7(RP7,"TLX10",GetUnitX(Z47))
call QD7(RP7,"TLY10",GetUnitY(Z47))
call QD7(RP7,"TLLife10",GetUnitState(Z47,UNIT_STATE_LIFE))
call QD7(RP7,"TLMana10",GetUnitState(Z47,UNIT_STATE_MANA))
set t=null
set Z47=null
endfunction
function SWE takes nothing returns nothing
local unit U_9=IM4
local trigger t
set LP4="SWE"
set t=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(t,.5)
call TriggerAddAction(t,function SVE)
call QG7(GetHandleId(t),"UnitVar",U_9)
set t=null
endfunction
function ND8 takes nothing returns nothing
endfunction
function SXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(YY7),(2)))
local unit J67=(LoadUnitHandle(C7,(YY7),(17)))
set LP4="SXE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(J67,1093751130)
call SaveInteger(C7,(GetHandleId((J67))),((4290)),(2))
call FlushChildHashtable(C7,(YY7))
call RN7(t)
if GetTriggerUnit()==J67 then
call KillUnit(CP7)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call SetUnitAbilityLevel(J67,1093751130,GetUnitAbilityLevel(J67,1093751130)+1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",J67,"chest"))
endif
else
call SetUnitX(CP7,GetUnitX(J67)-40)
call SetUnitY(CP7,GetUnitY(J67)-40)
if LG7(J67)and IsUnitVisible(J67,GetOwningPlayer(CP7))==false then
call KillUnit(CP7)
elseif ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call IssueTargetOrderById(CP7,$D000F,J67)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function SYE takes unit SZE,unit J67,integer DB8 returns nothing
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
set LP4="TheSwarm_Func5"
call UnitRemoveAbility(SZE,1098282348)
call SaveUnitHandle(C7,(YY7),(2),(SZE))
call SaveUnitHandle(C7,(YY7),(17),(J67))
call Z27(J67,1093751130)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,SZE,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function SXE))
call TriggerEvaluate(t)
call UnitApplyTimedLife(SZE,1112820806,4+4*DB8)
set t=null
endfunction
function SAE takes nothing returns boolean
return((IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and((LoadInteger(C7,(GetHandleId((GetFilterUnit()))),((4290))))==1)==false and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4)) or LG7(GetFilterUnit())==false))!=null
endfunction
function SBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local group g
local integer i=1
local unit CB9=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local real a=(LoadReal(C7,(JZ7),($89)))
local unit SCE
local unit CW9
local real B0D=(LoadReal(C7,(JZ7),(47)))
local real B5D=(LoadReal(C7,(JZ7),(48)))
set LP4="SBE"
set x=AY7(x+18*Cos(a))
set y=AZ7(y+18*Sin(a))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
if GetTriggerEvalCount(t)>$A6 then
loop
exitwhen i>$C
if(LoadBoolean(C7,(JZ7),(511+i-1)))==false then
call KillUnit((LoadUnitHandle(C7,(JZ7),(393+i-1))))
endif
set i=i+1
endloop
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CB9
call GroupEnumUnitsInRange(g,x,y,400,Condition(function SAE))
loop
exitwhen i>$C
if(LoadBoolean(C7,(JZ7),(511+i-1)))==false then
set SCE=(LoadUnitHandle(C7,(JZ7),(393+i-1)))
set x=(LoadReal(C7,(JZ7),(549+i-1)))
set y=(LoadReal(C7,(JZ7),(567+i-1)))
set x=AY7(x+18*Cos(a))
set y=AZ7(y+18*Sin(a))
call SaveReal(C7,(JZ7),(549+i-1),((x)*1.))
call SaveReal(C7,(JZ7),(567+i-1),((y)*1.))
call SetUnitX(SCE,x)
call SetUnitY(SCE,y)
set CW9=FirstOfGroup(g)
if CW9!=null then
call GroupRemoveUnit(g,CW9)
call SaveInteger(C7,(GetHandleId((CW9))),((4290)),(1))
call SaveBoolean(C7,(JZ7),(511+i-1),(true))
call SYE(SCE,CW9,GetUnitAbilityLevel(CB9,1093751127))
endif
endif
set i=i+1
endloop
call ZH7(g)
set g=null
set SCE=null
set CW9=null
endif
set t=null
set CB9=null
return false
endfunction
function S3E takes nothing returns nothing
local location l=GetSpellTargetLoc()
local real S6E=GetLocationX(l)
local real SLE=GetLocationY(l)
local unit CB9=GetTriggerUnit()
local real x=GetUnitX(CB9)
local real y=GetUnitY(CB9)
local real a=MZ7(x,y,S6E,SLE)*bj_DEGTORAD
local unit JPD
local real C7D=AY7(x+$BB8*Cos(a))
local real C8D=AZ7(y+$BB8*Sin(a))
local integer i=1
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
local real KQD
local integer O87=GetUnitAbilityLevel(CB9,1093751127)
local integer S1E
set LP4="S3E"
call RemoveLocation(l)
if O87==1 then
set S1E=1966092619
elseif O87==2 then
set S1E=1966092616
elseif O87==3 then
set S1E=1966092618
elseif O87==4 then
set S1E=1966092620
endif
loop
exitwhen i>$C
set JPD=CreateUnit(GetOwningPlayer(CB9),S1E,x+GetRandomInt(-300,300),y+GetRandomInt(-300,300),a*bj_RADTODEG)
call SaveUnitHandle(C7,(YY7),(393+i-1),(JPD))
call SaveBoolean(C7,(YY7),(511+i-1),(false))
call SaveReal(C7,(YY7),(549+i-1),((GetUnitX(JPD))*1.))
call SaveReal(C7,(YY7),(567+i-1),((GetUnitY(JPD))*1.))
set i=i+1
endloop
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function SBE))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call SaveReal(C7,(YY7),(6),((x)*1.))
call SaveReal(C7,(YY7),(7),((y)*1.))
call SaveReal(C7,(YY7),($89),((a)*1.))
call SaveReal(C7,(YY7),(47),((C7D)*1.))
call SaveReal(C7,(YY7),(48),((C8D)*1.))
set CB9=null
set JPD=null
set l=null
set t=null
endfunction
function S0E takes nothing returns boolean
if GetSpellAbilityId()==1093751127 then
call S3E()
endif
return false
endfunction
function NE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S0E))
call AF7(1966092619)
call AF7(1966092616)
call AF7(1966092618)
call AF7(1966092620)
call AC7(1093751130)
set t=null
endfunction
function S5E takes unit p5,unit NY,unit S2E,integer X37,boolean S_E returns real
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(NY),GetUnitY(NY),0)
set LP4="qYv"
if S_E then
call Z27(oA,1093687129)
else
call Z27(oA,1093684812)
endif
call IssueTargetOrderById(oA,$D007F,S2E)
if IsUnitType(S2E,UNIT_TYPE_HERO)==false then
call D58(p5,S2E,1,50+25*X37,.4)
else
call D58(p5,S2E,1,50,.4)
endif
if S_E then
return((GetUnitX(S2E)-GetUnitX(NY))*(GetUnitX(S2E)-GetUnitX(NY))+(GetUnitY(S2E)-GetUnitY(NY))*(GetUnitY(S2E)-GetUnitY(NY)))/$F4240
endif
set oA=null
return((GetUnitX(S2E)-GetUnitX(NY))*(GetUnitX(S2E)-GetUnitX(NY))+(GetUnitY(S2E)-GetUnitY(NY))*(GetUnitY(S2E)-GetUnitY(NY)))/$57E40
endfunction
function T4E takes unit p5,unit NY returns unit
local group g=ZI7()
set LP4="q_v"
set IM4=p5
call GroupEnumUnitsInRange(g,GetUnitX(NY),GetUnitY(NY),600,Condition(function LW7))
call GroupRemoveUnit(g,NY)
set IM4=GroupPickRandomUnit(g)
call ZH7(g)
set g=null
return IM4
endfunction
function T7E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local unit NY=QA7(RP7,"Old")
local integer iX=R47(RP7,"Count")
local unit S2E
local real Hk
set LP4="T7E"
call Q47(RP7)
call RN7(t)
if iX<(X37*2+1)then
set S2E=T4E(p5,NY)
if S2E!=null then
set Hk=S5E(p5,NY,S2E,X37,false)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Old",S2E)
call Q97(RP7,"Count",iX+1)
call TriggerRegisterTimerEvent(t,Hk+.4,false)
call TriggerAddCondition(t,Condition(function T7E))
endif
endif
set t=null
set p5=null
set NY=null
set S2E=null
return false
endfunction
function T8E takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit T9E=GetSpellTargetUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093684813)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real Hk=S5E(Z47,Z47,T9E,X37,true)
set LP4="T8E"
call QG7(RP7,"Source",Z47)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Old",T9E)
call Q97(RP7,"Count",1)
call TriggerRegisterTimerEvent(t,Hk,false)
call TriggerAddCondition(t,Condition(function T7E))
set Z47=null
set T9E=null
set t=null
endfunction
function TDE takes nothing returns boolean
if GetSpellAbilityId()==1093684813 and ZG7(GetSpellTargetUnit())==false then
call T8E()
endif
return false
endfunction
function NQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NQ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TDE))
set t=null
endfunction
function TEE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer X37=GetUnitAbilityLevel(Z47,1093684805)
set LP4="TEE"
call UnitRemoveAbility(Z47,1093684805)
call Z27(Z47,1093684805)
call SetUnitAbilityLevel(Z47,1093684805,X37)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function TFE takes unit m5,integer X37 returns nothing
local real TGE=(8+X37*8)/ 3
set LP4="q5v"
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+TGE)
endfunction
function THE takes nothing returns boolean
if ji()then
call TFE(GetFilterUnit(),IG4)
endif
return false
endfunction
function TIE takes unit Z47 returns nothing
local integer X37=GetUnitAbilityLevel(Z47,1093684805)
local group g=ZI7()
set LP4="q8v"
set IM4=Z47
set IG4=X37
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),375,Condition(function THE))
call ZH7(g)
set g=null
endfunction
function TJE takes unit Z47 returns nothing
local integer DB8=GetUnitAbilityLevel(Z47,1093684805)
local real TKE=2+6*DB8
set LP4="q9v"
call SetUnitState(Z47,UNIT_STATE_MANA,GetUnitState(Z47,UNIT_STATE_MANA)-(TKE/3))
if GetUnitState(Z47,UNIT_STATE_MANA)<TKE then
if RG7(Z47,"DeathWardOn")==false then
call IssueImmediateOrderById(Z47,$D00D2)
endif
endif
endfunction
function TME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="TME"
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==$D00D2 then
call Q47(RP7)
call RN7(t)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function TEE))
endif
else
call TIE(Z47)
call TJE(Z47)
endif
set t=null
set Z47=null
return false
endfunction
function TNE takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TNE"
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.33,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function TME))
set Z47=null
set t=null
endfunction
function TOE takes nothing returns boolean
if GetSpellAbilityId()==1093684805 then
call TNE()
endif
return false
endfunction
function NS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TOE))
set t=null
endfunction
function TPE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=GetUnitAbilityLevel(p5,1093684815)
local integer iX=GetTriggerEvalCount(t)
local real TQE=R77(RP7,"StartingHP")
local real TRE=0
set LP4="TPE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
else
if iX==4 or iX==8 or iX==$C then
call DestroyEffect(Q17(RP7,"FX"))
if iX==$C then
call Q47(RP7)
call RN7(t)
elseif iX==4 or iX==8 then
call QH7(RP7,"FX",AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
endif
set TRE=(.08+X37*.08)*B97(TQE-GetUnitState(m5,UNIT_STATE_LIFE),0)
if TRE>0 then
call BO7("+"+I2S(R2I(TRE)),2,m5,.023,68,0,$BB,$D8)
endif
endif
call D38(p5,m5,1,5*X37+TRE)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function TSE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
set LP4="TSE"
call DestroyEffect(AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TPE))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call QD7(RP7,"StartingHP",GetUnitState(m5,UNIT_STATE_LIFE))
call QH7(RP7,"FX",AddSpecialEffectTarget("effects\\NetherInferno.mdx",m5,"origin"))
set t=null
set p5=null
set m5=null
endfunction
function TTE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local group g=ZI7()
local integer X37=GetUnitAbilityLevel(p5,1093684815)
set LP4="TTE"
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L07))
call ForGroup(g,function TSE)
call ZH7(g)
call RemoveLocation(l)
set l=null
set g=null
set p5=null
endfunction
function TUE takes nothing returns boolean
if GetSpellAbilityId()==1093684815 then
call TTE()
endif
return false
endfunction
function NR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NR8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TUE))
set t=null
endfunction
function TVE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="TVE"
call Q47(RP7)
call RN7(t)
if GetTriggerEventId()!=EVENT_UNIT_SPELL_ENDCAST then
call OD7(p5)
endif
set p5=null
set t=null
return false
endfunction
function TWE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="TWE"
call QG7(RP7,"Source",p5)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function TVE))
set t=null
set p5=null
endfunction
function TXE takes nothing returns boolean
if GetSpellAbilityId()==1093684820 or GetSpellAbilityId()==1093684824 then
call TWE()
endif
return false
endfunction
function TYE takes nothing returns boolean
if GetUnitTypeId(GetSummonedUnit())==1865429040 or GetUnitTypeId(GetSummonedUnit())==1865429041 or GetUnitTypeId(GetSummonedUnit())==1865429057 or GetUnitTypeId(GetSummonedUnit())==1865429080 then
call RR7(GetSummoningUnit(),"DeathWardOn",8)
endif
return false
endfunction
function NT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NT8"
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function TYE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TXE))
set t=null
endfunction
function TZE takes nothing returns boolean
local integer id=0
local unit m5
local real EO8=(TimerGetElapsed(V))
local real mp
local real hp
loop
exitwhen id>$C
set m5=G7[id]
if m5!=null and GetUnitAbilityLevel(m5,1110459204)==0 and SV4[id]>EO8 then
set SV4[id]=0
endif
if m5!=null and GetUnitAbilityLevel(m5,1110459204)>0 then
if SV4[id]>EO8 and A47(m5)==false then
set hp=GetUnitState(m5,UNIT_STATE_LIFE)
set mp=GetUnitState(m5,UNIT_STATE_MANA)
if hp<SW4[id]then
set SW4[id]=hp
endif
if mp<SX4[id]then
set SX4[id]=mp
endif
call SetUnitState(m5,UNIT_STATE_LIFE,SW4[id])
set SZ4[id]=SZ4[id]+1
if SZ4[id]==$A then
set SZ4[id]=0
if SA4[id]==1 then
call D38(SY4[id],m5,1,12.5)
elseif SA4[id]==2 then
call D38(SY4[id],m5,1,20)
elseif SA4[id]==3 then
call D38(SY4[id],m5,1,32)
endif
endif
elseif SV4[id]>EO8 and A47(m5) then
set SV4[id]=0
set SW4[id]=9999
set SX4[id]=9999
endif
if GetUnitAbilityLevel(m5,1110459204)>0 and SV4[id]<EO8 then
call UnitRemoveAbility(m5,1093749313)
call UnitRemoveAbility(m5,1110459204)
call UnitRemoveAbility(m5,1093749828)
endif
endif
set id=id+1
endloop
set m5=null
return false
endfunction
function TAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit J67=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local unit DA8
set LP4="TAE"
if GetUnitAbilityLevel(J67,1110459204)==0 then
call Q47(RP7)
call RN7(t)
elseif GetOwningPlayer(J67)!=GetOwningPlayer(GetEventDamageSource())and GetUnitState(J67,UNIT_STATE_MAX_LIFE)*(.09+.01*X37)>GetUnitState(J67,UNIT_STATE_LIFE)and RG7(J67,"ShallowGrave|Active")==false then
call Q47(RP7)
call RN7(t)
call UnitRemoveAbility(J67,1093749313)
call UnitRemoveAbility(J67,1110459204)
call UnitRemoveAbility(J67,1093749828)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"origin"))
set DA8=CreateUnit(GetOwningPlayer(GetEventDamageSource()),1697656901,0,0,0)
call UnitRemoveBuffs(J67,true,true)
call UnitRemoveAbility(J67,1097167980)
call UnitDamageTarget(DA8,J67,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set DA8=null
endif
set t=null
set J67=null
return false
endfunction
function TBE takes unit p5,unit m5 returns nothing
local integer X37=GetUnitAbilityLevel(p5,1093750089)
local integer id=GetPlayerId(GetOwningPlayer(m5))
local trigger t
local integer RP7
set LP4="Gust_Register"
if X37>0 and IsUnitType(m5,UNIT_TYPE_HERO) and IsUnitIllusion(m5)==false and FA8(GetUnitTypeId(m5))==false then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function TAE))
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call Z27(m5,1093749313)
call Z27(m5,1093749828)
set SV4[id]=(TimerGetElapsed(V))+7+X37
set SW4[id]=GetUnitState(m5,UNIT_STATE_LIFE)
set SX4[id]=GetUnitState(m5,UNIT_STATE_MANA)
set SY4[id]=p5
set SA4[id]=X37
endif
set t=null
endfunction
function QR8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer id=0
local integer i=0
local player p
set LP4="QR8"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function TZE))
loop
exitwhen id>$C
set SW4[id]=9999
set SX4[id]=9999
set id=id+1
endloop
loop
exitwhen i>5
set p=Y7[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093749828,false)
set i=i+1
endloop
set t=null
set p=null
endfunction
function TCE takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093748826)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749044)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749043)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093749046)
call UnitRemoveAbility(GetEnumUnit(),1110459189)
endif
endfunction
function T3E takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if Y57(GetEnumUnit())==false then
if a3==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093748826)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call Z27(GetEnumUnit(),1093748826)
endif
elseif a3==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749044)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call Z27(GetEnumUnit(),1093749044)
endif
elseif a3==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749043)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call Z27(GetEnumUnit(),1093749043)
endif
elseif a3==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093749046)==0 then
call UnitRemoveAbility(GetEnumUnit(),1110459189)
call Z27(GetEnumUnit(),1093749046)
endif
endif
endif
endfunction
function T6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local group TLE=QL7(RP7,"ActiveGroup")
local real x=GetUnitX(DA8)
local real y=GetUnitY(DA8)
local group g=ZI7()
local group g2
set LP4="T6E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ForGroup(TLE,function TCE)
call ZH7(g)
call ZH7(TLE)
call Q47(RP7)
call RN7(t)
call ShowUnit(DA8,false)
set t=null
set p5=null
set DA8=null
set TLE=null
return false
endif
set n3=p5
set a3=GetUnitAbilityLevel(p5,1093748819)
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,300,Condition(function LF7))
call GroupRemoveGroup(g,TLE)
call ForGroup(TLE,function TCE)
call ForGroup(g,function T3E)
call QP7(RP7,"ActiveGroup",g)
call ZH7(TLE)
set t=null
set p5=null
set DA8=null
set TLE=null
set g=null
return false
endfunction
function T1E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local integer X37=GetUnitAbilityLevel(p5,1093748819)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1848658001,x,y,0)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="T1E"
call UnitApplyTimedLife(DA8,1112820806,$C)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function T6E))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call QP7(RP7,"ActiveGroup",ZI7())
set p5=null
call RemoveLocation(l)
set l=null
set DA8=null
set t=null
endfunction
function T0E takes nothing returns boolean
if GetSpellAbilityId()==1093748819 then
call T1E()
endif
return false
endfunction
function QO8 takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
local player p
set LP4="QO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T0E))
set t=null
loop
exitwhen i>5
set p=Y7[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093748826,false)
call SetPlayerAbilityAvailable(p,1093749044,false)
call SetPlayerAbilityAvailable(p,1093749043,false)
call SetPlayerAbilityAvailable(p,1093749046,false)
set i=i+1
endloop
set p=null
endfunction
function T5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local integer X37=R47(RP7,"Level")
local unit DA8
local real BD7=(100+50*X37)/ 4
set LP4="T5E"
if GetTriggerEventId()==EVENT_UNIT_DEATH or N67(x,y,GetUnitX(m5),GetUnitY(m5))>765 or GetUnitAbilityLevel(m5,1110459203)==0 then
call DestroyEffect(Q17(RP7,"FX"))
call DestroyEffect(Q17(RP7,"fx2"))
call UnitRemoveAbility(m5,1093749305)
call UnitRemoveAbility(m5,1110459203)
call Q47(RP7)
call RN7(t)
elseif GetTriggerEvalCount(t)==($A*.8)then
call DestroyEffect(Q17(RP7,"FX"))
call QH7(RP7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call D38(p5,m5,1,BD7)
elseif GetTriggerEvalCount(t)==($A*1.6)then
call DestroyEffect(Q17(RP7,"FX"))
call QH7(RP7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call D38(p5,m5,1,BD7)
elseif GetTriggerEvalCount(t)==($A*2.5)then
call DestroyEffect(Q17(RP7,"FX"))
call QH7(RP7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call D38(p5,m5,1,BD7)
elseif GetTriggerEvalCount(t)==($A*3.4)then
call DestroyEffect(Q17(RP7,"FX"))
call D38(p5,m5,1,BD7)
elseif GetTriggerEvalCount(t)>($A*3.9)then
call DestroyEffect(Q17(RP7,"fx2"))
call UnitRemoveAbility(m5,1093749305)
call UnitRemoveAbility(m5,1110459203)
call Q47(RP7)
call RN7(t)
set DA8=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(DA8,1093750090)
call SetUnitAbilityLevel(DA8,1093750090,X37)
call IssueTargetOrderById(DA8,$D007F,m5)
set DA8=null
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function T2E takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093750087)
local string s="Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"
set LP4="T2E"
if GetLocalPlayer()==GetOwningPlayer(m5)then
endif
call Z27(m5,1093749305)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QD7(RP7,"x",GetUnitX(m5)*1.)
call QD7(RP7,"y",GetUnitY(m5)*1.)
call Q97(RP7,"Level",X37)
call QH7(RP7,"FX",AddSpecialEffectTarget("war3mapImported\\ShivasEnchantment.mdx",m5,"overhead"))
call QH7(RP7,"fx2",AddSpecialEffect(s,GetUnitX(m5),GetUnitY(m5)))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function T5E))
set p5=null
set m5=null
set t=null
endfunction
function T_E takes nothing returns boolean
if GetSpellAbilityId()==1093750087 and ZG7(GetSpellTargetUnit())==false then
call T2E()
endif
return false
endfunction
function QP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QP8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T_E))
set t=null
endfunction
function U4E takes nothing returns nothing
local unit p5=E3
local unit m5=GetEnumUnit()
local integer X37=V3
set LP4="U4E"
call TBE(p5,m5)
call D38(p5,m5,1,$96+100*X37)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\PlasmaShot.mdl",m5,"chest"))
set p5=null
set m5=null
endfunction
function U7E takes nothing returns nothing
local unit p5=E3
local unit m5=GetEnumUnit()
local integer X37=V3
set LP4="U7E"
call TBE(p5,m5)
set p5=null
set m5=null
endfunction
function U8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=QA7(RP7,"Projectile")
local real Y5=R77(RP7,"TargetX")
local real Z5=R77(RP7,"TargetY")
local real l4=R77(RP7,"Angle")
local real U9E=R77(RP7,"AOE")
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local real x=GetUnitX(DT8)+30*Cos(l4)
local real y=GetUnitY(DT8)+30*Sin(l4)
local group g
local fogmodifier UDE
set LP4="U8E"
if N67(x,y,Y5,Z5)<35 or x!=AY7(x)or y!=AZ7(y)then
set x=Y5
set y=Z5
call SetUnitX(DT8,x)
call SetUnitY(DT8,y)
call DestroyEffect(Q17(RP7,"FX"))
set UDE=QY7(RP7,"Fog")
call FogModifierStop(UDE)
call DestroyFogModifier(UDE)
set UDE=null
if LQ4 then
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=R47(RP7,"FUN|EffNum")
loop
exitwhen bj_forLoopAIndex>=bj_forLoopAIndexEnd
call DestroyEffect(Q17(RP7,"FUN|Eff"+I2S(bj_forLoopAIndex)))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
call Q47(RP7)
call RN7(t)
call KillUnit(DT8)
set IM4=p5
set E3=p5
set V3=X37
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,U9E+25,Condition(function LF7))
call ForGroup(g,function U4E)
call ZH7(g)
set g=null
else
call SetUnitX(DT8,x)
call SetUnitY(DT8,y)
set IM4=p5
set E3=p5
set V3=X37
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,300,Condition(function LF7))
call ForGroup(g,function U7E)
call ZH7(g)
set g=null
endif
set t=null
set DT8=null
set p5=null
return false
endfunction
function UEE takes unit p5,real x,real y,real UFE,effect FX,fogmodifier UDE returns nothing
local real l4=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=CreateUnit(GetOwningPlayer(p5),1747993142,GetUnitX(p5),GetUnitY(p5),l4*bj_RADTODEG)
local integer X37=GetUnitAbilityLevel(p5,1093750089)
local real U9E=B87($E1+25*UFE*2,$3E8)
local real DAE=N67(GetUnitX(p5),GetUnitY(p5),x,y)
set LP4="QKv"
if IsUnitEnemy(DT8,GetLocalPlayer())and Y27(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(DT8,true)
endif
call TriggerRegisterTimerEvent(t,B87(2./(DAE/ 30),.04),true)
call TriggerAddCondition(t,Condition(function U8E))
call QG7(RP7,"Projectile",DT8)
call QD7(RP7,"TargetX",x*1.)
call QD7(RP7,"TargetY",y*1.)
call QD7(RP7,"Angle",l4*1.)
call QD7(RP7,"AOE",U9E*1.)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Source",p5)
call QK7(RP7,"Fog",UDE)
call QH7(RP7,"FX",FX)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750089,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,false)
if LQ4 then
set L74=""
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(p5))then
set L74="Doodads\\Icecrown\\Water\\BubbleGeyserSteam\\BubbleGeyserSteam.mdx"
endif
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=R2I(U9E/100)+$A
loop
exitwhen bj_forLoopAIndex>=bj_forLoopAIndexEnd
set L84=I2R(bj_forLoopAIndex)*(6.2831853/I2R(bj_forLoopAIndexEnd))
call QH7(RP7,"FUN|Eff"+I2S(bj_forLoopAIndex),AddSpecialEffect(L74,x+Cos(L84)*U9E,y+Sin(L84)*U9E))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call Q97(RP7,"FUN|EffNum",bj_forLoopAIndexEnd)
endif
set t=null
set DT8=null
endfunction
function UGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=QA7(RP7,"Projectile")
local unit p5=QA7(RP7,"Source")
local real l4=R77(RP7,"Angle")
local real x
local real y
local real UFE=TimerGetElapsed(V)-R77(RP7,"CastTime")
local string s
local fogmodifier UDE
local effect FX
local real UHE=GetUnitX(DT8)+30*Cos(l4)
local real UIE=GetUnitY(DT8)+30*Sin(l4)
local boolean J4
local integer i
set LP4="UGE"
set x=AY7(UHE)
set y=AZ7(UIE)
call SetUnitX(DT8,x)
call SetUnitY(DT8,y)
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093750094)or x!=UHE or y!=UIE then
call Q47(RP7)
call RN7(t)
call RemoveUnit(DT8)
set s=""
if IsPlayerAlly(GetOwningPlayer(p5),GetLocalPlayer())or Y27(GetLocalPlayer())then
set s="war3mapImported\\IceWindGroundFX.mdl"
endif
set UDE=CreateFogModifierRadius(GetOwningPlayer(p5),FOG_OF_WAR_VISIBLE,x,y,500,true,true)
call FogModifierStart(UDE)
set FX=AddSpecialEffect(s,x,y)
call UEE(p5,x,y,UFE,FX,UDE)
set UDE=null
set FX=null
elseif WQ7(GetOwningPlayer(p5))then
set L84=N67(x,y,R77(RP7,"AI|TgtX"),R77(RP7,"AI|TgtY"))
if L84>R77(RP7,"AI|MaxDist")or R87(RP7,"AI|Blast")then
if OV7(p5)then
call PC7(p5,$D022E,1093750094)
else
call QF7(RP7,"AI|Blast",true)
endif
else
call QD7(RP7,"AI|MaxDist",L84)
if Bz>R77(RP7,"AI|NextUp")then
call QD7(RP7,"AI|NextUp",Bz+1)
set J4=false
set i=R47(GetHandleId(p5),"AI|IBClose")
if(i==1)then
set J4=(ZR7(p5,QA7(GetHandleId(p5),"AI|IBTgt"),500.,.02,1500.)!=null)
elseif(i==0)then
set J4=(ZR7(p5,QA7(GetHandleId(p5),"AI|IBTgt"),1500.,2.02,99999.)!=null)
elseif(i==2)then
call PU7(QA7(GetHandleId(p5),"AI|IBTgt"))
call MoveLocation(DF7,GetLocationX(HA),GetLocationY(HA))
endif
if J4 then
call QD7(RP7,"AI|TgtX",GetLocationX(DF7))
call QD7(RP7,"AI|TgtY",GetLocationY(DF7))
call QD7(RP7,"AI|MaxDist",99999.)
endif
endif
endif
endif
set t=null
set DT8=null
set p5=null
return false
endfunction
function UJE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=CreateUnit(GetOwningPlayer(p5),1211122232,GetUnitX(p5),GetUnitY(p5),a*bj_RADTODEG)
set LP4="UJE"
if IsUnitEnemy(DT8,GetLocalPlayer())and Y27(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(DT8,true)
endif
call QG7(RP7,"Projectile",DT8)
call QG7(RP7,"Source",p5)
call QD7(RP7,"Angle",a*1.)
call QD7(RP7,"CastTime",TimerGetElapsed(V)*1.)
if WQ7(GetOwningPlayer(p5))then
call QD7(RP7,"AI|TgtX",x)
call QD7(RP7,"AI|TgtY",y)
call QD7(RP7,"AI|MaxDist",99999.)
call QD7(RP7,"AI|NextUp",Bz+1)
endif
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UGE))
call SetUnitColor(DT8,GetPlayerColor(Player($E)))
call RemoveLocation(l)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750089,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,true)
call Z27(p5,1093750094)
if WQ7(GetOwningPlayer(p5))then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093750094,false)
endif
set p5=null
set l=null
set t=null
set DT8=null
endfunction
function UKE takes nothing returns boolean
if GetSpellAbilityId()==1093750089 then
call UJE()
endif
return false
endfunction
function QQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QQ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UKE))
set t=null
endfunction
function UME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local integer UNE=R47(GetHandleId(p5),"ChillingCounter")
set LP4="UME"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and GetEventDamage()>1 then
call DisableTrigger(t)
if UNE>0 then
call Q97(GetHandleId(p5),"ChillingCounter",UNE-1)
call BO7("+"+I2S(40+$A*X37),1,p5,.024,100,$C8,$FF,$FF)
call D38(p5,m5,1,40+$A*X37)
endif
call Q47(RP7)
call RN7(t)
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function UOE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=X3
set LP4="UOE"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
set p5=GetAttacker()
endif
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED or(R47(GetHandleId(p5),"ChillingCounter")==0 and GetUnitAbilityLevel(p5,1093748814)>0)then
call DestroyEffect(Q17(GetHandleId(p5),"fx1"))
call DestroyEffect(Q17(GetHandleId(p5),"fx2"))
call Q97(GetHandleId(p5),"ChillingCounter",0)
call Q47(RP7)
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call RN7(t)
endif
call UnitRemoveAbility(p5,1093748814)
call UnitRemoveAbility(p5,1110459210)
call UnitRemoveAbility(p5,1093749072)
elseif GetUnitAbilityLevel(p5,1093748814)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and RG7(p5,"ChillingTouchState")==false then
call RR7(p5,"ChillingTouchState",.4)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.,false)
call TriggerAddCondition(t,Condition(function UME))
call QG7(RP7,"Target",GetTriggerUnit())
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
endif
set t=null
set p5=null
return false
endfunction
function UPE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093748817)
set LP4="UPE"
set X3=X37
call Z27(m5,1093748814)
call Z27(m5,1093749072)
call Q97(GetHandleId(m5),"ChillingCounter",2+X37)
call QG7(RP7,"Source",m5)
call QH7(GetHandleId(m5),"fx1",AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",m5,"right,hand"))
call QH7(GetHandleId(m5),"fx2",AddSpecialEffectTarget("war3mapImported\\FrostHands.mdx",m5,"left,hand"))
call TriggerRegisterTimerEvent(t,30,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UOE))
set p5=null
set m5=null
set t=null
endfunction
function UQE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=ZI7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
set LP4="UQE"
call RemoveLocation(l)
call DestroyEffect(AddSpecialEffect("war3mapImported\\IcyWind.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,525+25,Condition(function D88))
call ForGroup(g,function UPE)
call ZH7(g)
set p5=null
set g=null
set l=null
endfunction
function URE takes nothing returns boolean
if GetSpellAbilityId()==1093748817 then
call UQE()
endif
return false
endfunction
function QS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function URE))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function UOE))
set t=null
endfunction
function USE takes nothing returns nothing
call D38(A3,GetEnumUnit(),1,(GetUnitAbilityLevel(A3,1093749069)*75)/$A)
endfunction
function UTE takes unit CP7 returns nothing
local real IVE=(GetUnitAbilityLevel(CP7,1093749069)*75)/2
set LP4="DarkPact_SelfDamage"
set IVE=IVE/10.
if GetUnitState(CP7,UNIT_STATE_LIFE)<=IVE*.75 then
set IVE=GetUnitState(CP7,UNIT_STATE_LIFE)/.75-$A
endif
call D38(CP7,CP7,1,IVE)
endfunction
function UUE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit CP7=QA7(RP7,"Source")
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local group g
local real BD7
local unit DA8
local integer X37=0
local integer ZD8=GetTriggerEvalCount(t)
set LP4="UUE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(RP7)
call RN7(t)
return false
else
if GetTriggerEvalCount(t)==1 then
set DA8=CreateUnit(GetOwningPlayer(CP7),1747993138,x,y,0)
call UnitApplyTimedLife(DA8,1112820806,1)
set DA8=null
call TriggerRegisterTimerEvent(t,.1,true)
set g=ZI7()
set A3=CP7
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,350,Condition(function LF7))
call ForGroup(g,function USE)
call UTE(CP7)
call ZH7(g)
else
if ZD8==$A then
call Q47(RP7)
call RN7(t)
endif
set g=ZI7()
set A3=CP7
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,350,Condition(function LF7))
call ForGroup(g,function USE)
call UTE(CP7)
call ZH7(g)
call BW8(CP7)
call BT8(CP7,0,0)
endif
endif
set t=null
set g=null
set CP7=null
return false
endfunction
function UVE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real BD7=(GetUnitAbilityLevel(p5,1093749069)*75)/ 2
set LP4="UVE"
call TriggerRegisterTimerEvent(t,1.5,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UUE))
call QG7(RP7,"Source",p5)
set t=null
set p5=null
endfunction
function UWE takes nothing returns boolean
if GetSpellAbilityId()==1093749069 then
call UVE()
endif
return false
endfunction
function QW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UWE))
set t=null
endfunction
function UXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local player UYE
local integer X37=GetUnitAbilityLevel(p5,1093749070)
local integer MainLevel=GetUnitAbilityLevel(p5,1093749070)
local real EO8=TimerGetElapsed(V)
local real UZE=R77(RP7,"Buffer1")
local real UAE=R77(RP7,"Buffer2")
set LP4="UXE"
if A47(p5)then
set t=null
set p5=null
return false
endif
if WM7(GetOwningPlayer(p5))then
set UYE=Z7[1]
else
set UYE=Y7[1]
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetOwningPlayer(GetEventDamageSource())==A7 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)>0 then
call UnitRemoveAbility(p5,1093749063)
call UnitRemoveAbility(p5,1110459193)
endif
call QD7(RP7,"NightcrawlerTime",(EO8+2)*1.)
set t=null
set p5=null
return false
endif
if R77(RP7,"NightcrawlerTime")>EO8 then
set t=null
set p5=null
return false
endif
if IsUnitVisible(p5,UYE)or GetUnitAbilityLevel(p5,1112433775)>0 then
set UAE=0
if GetUnitAbilityLevel(p5,1093749061)>0 or GetUnitAbilityLevel(p5,1093749062)>0 or GetUnitAbilityLevel(p5,1093749063)>0 then
set UZE=UZE+.1
if UZE>.4 then
set UZE=0
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)>0 then
call UnitRemoveAbility(p5,1093749063)
call UnitRemoveAbility(p5,1110459193)
endif
endif
endif
call QD7(RP7,"Buffer1",UZE*1.)
call QD7(RP7,"Buffer2",UAE*1.)
elseif IsUnitVisible(p5,UYE)==false then
set UZE=0
if(X37==1 and GetUnitAbilityLevel(p5,1093749061)==0)or(X37==2 and GetUnitAbilityLevel(p5,1093749062)==0)or(X37==3 and GetUnitAbilityLevel(p5,1093749063)==0)then
set UAE=UAE+.1
if UAE>.6 then
set UAE=0
if X37==1 then
if GetUnitAbilityLevel(p5,1093749061)==0 then
call Z27(p5,1093749061)
endif
endif
if X37==2 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)==0 then
call Z27(p5,1093749062)
endif
endif
if X37==3 then
if GetUnitAbilityLevel(p5,1093749061)>0 then
call UnitRemoveAbility(p5,1093749061)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749062)>0 then
call UnitRemoveAbility(p5,1093749062)
call UnitRemoveAbility(p5,1110459193)
endif
if GetUnitAbilityLevel(p5,1093749063)==0 then
call Z27(p5,1093749063)
endif
endif
endif
endif
call QD7(RP7,"Buffer1",UZE*1.)
call QD7(RP7,"Buffer2",UAE*1.)
endif
set t=null
set p5=null
set UYE=null
return false
endfunction
function UBE takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="Q_v"
call QD7(RP7,"Buffer1",0*1.)
call QD7(RP7,"Buffer2",0*1.)
call QD7(RP7,"NightcrawlerTime",TimerGetElapsed(V)*1.)
call QG7(RP7,"Source",Z47)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function UXE))
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749061,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749062,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093749063,false)
set t=null
endfunction
function UCE takes nothing returns boolean
if GetLearnedSkill()==1093749070 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093749070)==1 then
call UBE(GetTriggerUnit(),false)
endif
return false
endfunction
function QV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QV8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function UCE))
set t=null
endfunction
function U3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=GetDyingUnit()
set LP4="U3E"
if GetOwningPlayer(GetKillingUnit())==GetOwningPlayer(CP7)and IsUnitType(J67,UNIT_TYPE_HERO) and IsUnitIllusion(J67)==false then
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function U6E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ULE=(LoadInteger(C7,(JZ7),(422)))
local integer U1E=(LoadInteger(C7,(JZ7),(423)))
local integer VSD=(LoadInteger(C7,(JZ7),(424)))
set LP4="U6E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if(LoadBoolean(C7,(JZ7),(276)))==false and GetTriggerUnit()==CP7 then
call SaveBoolean(C7,(JZ7),(276),(true))
call SetHeroAgi(CP7,GetHeroAgi(CP7,false)-ULE-U1E-VSD,true)
elseif(LoadBoolean(C7,(JZ7),(277)))==false and GetTriggerUnit()==J67 then
call SaveBoolean(C7,(JZ7),(277),(true))
call SetHeroAgi(J67,GetHeroAgi(J67,false)+ULE,true)
call SetHeroStr(J67,GetHeroStr(J67,false)+U1E,true)
call SetHeroInt(J67,GetHeroInt(J67,false)+VSD,true)
endif
else
if(LoadBoolean(C7,(JZ7),(276)))==false then
call SaveBoolean(C7,(JZ7),(276),(true))
call SetHeroAgi(CP7,GetHeroAgi(CP7,false)-ULE-U1E-VSD,true)
endif
if(LoadBoolean(C7,(JZ7),(277)))==false then
call SaveBoolean(C7,(JZ7),(277),(true))
call SetHeroAgi(J67,GetHeroAgi(J67,false)+ULE,true)
call SetHeroStr(J67,GetHeroStr(J67,false)+U1E,true)
call SetHeroInt(J67,GetHeroInt(J67,false)+VSD,true)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function U0E takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093748818)
local integer CJ9=Y_7(J67)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer ULE
local integer U1E
local integer VSD
local real DY8
set LP4="EssenceShift_SuccessfulAttack"
if CJ9==2 then
set ULE=IMinBJ(GetHeroAgi(J67,false)-1,1)
set U1E=IMinBJ(GetHeroStr(J67,false)-1,1)
set VSD=IMinBJ(GetHeroInt(J67,false)-1,1)
elseif CJ9==3 then
set ULE=IMinBJ(GetHeroAgi(J67,false)-1,1)
set U1E=IMinBJ(GetHeroStr(J67,false)-1,1)
set VSD=IMinBJ(GetHeroInt(J67,false)-1,1)
elseif CJ9==1 then
set ULE=IMinBJ(GetHeroAgi(J67,false)-1,1)
set U1E=IMinBJ(GetHeroStr(J67,false)-1,1)
set VSD=IMinBJ(GetHeroInt(J67,false)-1,1)
endif
call SetHeroAgi(CP7,GetHeroAgi(CP7,false)+ULE+VSD+U1E,true)
call SetHeroAgi(J67,GetHeroAgi(J67,false)-ULE,true)
call SetHeroStr(J67,GetHeroStr(J67,false)-U1E,true)
call SetHeroInt(J67,GetHeroInt(J67,false)-VSD,true)
call SaveInteger(C7,(JZ7),(422),(ULE))
call SaveInteger(C7,(JZ7),(424),(VSD))
call SaveInteger(C7,(JZ7),(423),(U1E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveBoolean(C7,(JZ7),(276),(false))
call SaveBoolean(C7,(JZ7),(277),(false))
if DB8==1 then
set DY8=$F
elseif DB8==2 then
set DY8=30
elseif DB8==3 then
set DY8=60
elseif DB8==4 then
set DY8=120
endif
call TriggerRegisterTimerEvent(t,DY8,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function U6E))
set t=null
endfunction
function U5E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="U5E"
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call U0E(CP7,J67)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
set J67=null
return false
endfunction
function U2E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer W99=(LoadInteger(C7,(JZ7),(30)))
local unit J67=WG7(W99)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="U2E"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerAddCondition(t,Condition(function U5E))
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
else
call WF7(W99)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function U_E takes nothing returns nothing
local trigger t=CreateTrigger()
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
local integer JZ7=GetHandleId(t)
set LP4="U_E"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function U2E))
call SaveInteger(C7,(JZ7),(30),(WI7(J67)))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set J67=null
set CP7=null
set t=null
endfunction
function V4E takes nothing returns nothing
local unit CP7=GetAttacker()
set LP4="V4E"
if RG7(CP7,"CooldownState")==false then
call RR7(CP7,"CooldownState",.45-GetUnitAbilityLevel(GetAttacker(),1093748818)*.05)
call U_E()
endif
endfunction
function V7E takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093748818)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),($E)))and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call V4E()
endif
return false
endfunction
function V8E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7
set LP4="V8E"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function V7E))
call SaveUnitHandle(C7,(GetHandleId(t)),($E),(GetTriggerUnit()))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call BT7(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function U3E))
call SaveUnitHandle(C7,(JZ7),(2),(GetTriggerUnit()))
set t=null
endfunction
function V9E takes nothing returns boolean
if GetLearnedSkill()==1093748818 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093748818)==1 then
call V8E()
endif
return false
endfunction
function QT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QT8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function V9E))
set t=null
endfunction
function VDE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local integer X37=R47(RP7,"Level")
set LP4="VDE"
if GetTriggerEvalCount(t)>5.5/.03 then
call KillUnit(DA8)
call Q47(RP7)
call RN7(t)
else
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
endif
set t=null
set p5=null
set DA8=null
return false
endfunction
function VEE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093749070)
local real d=5.5
local unit DA8=CreateUnit(GetOwningPlayer(p5),1747993137,GetUnitX(p5),GetUnitY(p5),0)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="VEE"
call CW7(p5,1093748823,1,d)
call CW7(p5,1093748824,1,d)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function VDE))
call QG7(RP7,"Caster",DA8)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
set p5=null
set DA8=null
set t=null
endfunction
function VFE takes nothing returns boolean
if GetSpellAbilityId()==1093749070 then
call VEE()
endif
return false
endfunction
function QU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VFE))
set t=null
endfunction
function VGE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer VT9=GetTriggerEvalCount(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local lightning VHE=Q07(RP7,"Lightning")
local integer X37=R47(RP7,"Level")
local real t5=R77(RP7,"SourceX")
local real w5=R77(RP7,"SourceY")
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real VIE
local real VJE
local real KTE=R77(RP7,"LastX")
local real KUE=R77(RP7,"LastY")
local real l4
local real DAE=N67(KTE,KUE,Y5,Z5)
set LP4="VGE"
call QD7(RP7,"LastX",Y5)
call QD7(RP7,"LastY",Z5)
if DAE>100 or VT9>(3.5/ .03)or Y57(m5) then
call DestroyLightning(VHE)
call Q47(RP7)
call RN7(t)
else
call MoveLightning(VHE,true,t5,w5,Y5,Z5)
if N67(t5,w5,Y5,Z5)>325 then
set l4=Atan2(Z5-w5,Y5-t5)
set VIE=t5+(325)*Cos(l4)
set VJE=w5+(325)*Sin(l4)
call SetUnitX(m5,VIE)
call SetUnitY(m5,VJE)
endif
endif
set t=null
set p5=null
set m5=null
set VHE=null
return false
endfunction
function VKE takes unit CP7,unit J67,integer DB8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local lightning J7E=AddLightning("PONC",true,GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))
set LP4="Pounce_Latch"
call SetLightningColor(J7E,1,1,1,1)
call SaveLightningHandle(C7,(JZ7),StringHash("Lightning"),(J7E))
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
call Q97(JZ7,"Level",DB8)
call QD7(JZ7,"SourceX",GetUnitX(CP7)*1.)
call QD7(JZ7,"SourceY",GetUnitY(CP7)*1.)
call QD7(JZ7,"LastX",GetUnitX(J67)*1.)
call QD7(JZ7,"LastY",GetUnitY(J67)*1.)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function VGE))
call D38(CP7,J67,1,70*DB8)
call IssueTargetOrderById(CP7,$D000F,J67)
set t=null
set J7E=null
endfunction
function VME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=GetTriggerEvalCount(t)
local integer DB8=R47(JZ7,"Level")
local unit CP7=QA7(JZ7,"Source")
local real WY9=R77(JZ7,"Angle")
local real SIE=R77(JZ7,"SourceX")
local real SJE=R77(JZ7,"SourceY")
local real BC7=R77(JZ7,"TargetX")
local real B37=R77(JZ7,"TargetY")
local real B17=SIE+(30*(20+4*2)/30)*ZD8*Cos(WY9*bj_DEGTORAD)
local real B07=SJE+(30*(20+4*2)/30)*ZD8*Sin(WY9*bj_DEGTORAD)
local real VNE=SquareRoot((B17-BC7)*(B17-BC7)+(B07-B37)*(B07-B37))
local real VOE=700
local real VPE=$AF
local real VQE=(1-VNE/ VOE)*VPE*2
local group g=ZI7()
local unit J67
set LP4="VME"
if ZD8==1 then
call SetUnitAnimationByIndex(CP7,5)
call SetUnitTimeScale(CP7,1.5)
endif
if VQE>VPE then
call SetUnitAnimationByIndex(CP7,5)
set VQE=VPE*2-VQE
endif
call SetUnitFlyHeight(CP7,B97(VQE,0),0)
call SetUnitX(CP7,AY7(B17))
call SetUnitY(CP7,AZ7(B07))
call SetUnitFacing(CP7,WY9)
set IM4=CP7
call GroupEnumUnitsInRange(g,B17,B07,120,Condition(function LC7))
set J67=FirstOfGroup(g)
call ZH7(g)
if VNE<30 or J67!=null or GetTriggerEvalCount(t)>75 then
call SetUnitFlyHeight(CP7,0,0)
call SetUnitFacing(CP7,WY9)
call SetUnitTimeScale(CP7,1)
call SetUnitAnimation(CP7,"stand")
call SetUnitPathing(CP7,true)
call UnitRemoveAbility(CP7,1093749302)
call BW7(GetUnitX(CP7),GetUnitY(CP7),100)
if J67!=null and Y57(J67)==false then
call RR7(J67,"4408",5)
call VKE(CP7,J67,DB8)
endif
call Q47(JZ7)
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
set g=null
return false
endfunction
function VRE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093749303)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real CFD=700
local real WY9=GetUnitFacing(CP7)
local real LN9=GetUnitX(CP7)
local real LO9=GetUnitY(CP7)
local real BC7=AY7(LN9+CFD*Cos(WY9*bj_DEGTORAD))
local real B37=AZ7(LO9+CFD*Sin(WY9*bj_DEGTORAD))
set LP4="VRE"
call Z27(CP7,1097691750)
call UnitRemoveAbility(CP7,1097691750)
call SetUnitPathing(CP7,false)
call Z27(CP7,1093749302)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function VME))
call QG7(JZ7,"Source",CP7)
call Q97(JZ7,"Level",DB8)
call QD7(JZ7,"Angle",WY9*1.)
call QD7(JZ7,"SourceX",LN9*1.)
call QD7(JZ7,"SourceY",LO9*1.)
call QD7(JZ7,"TargetX",BC7*1.)
call QD7(JZ7,"TargetY",B37*1.)
set CP7=null
set t=null
endfunction
function VSE takes nothing returns boolean
if GetSpellAbilityId()==1093749303 then
call VRE()
endif
return false
endfunction
function QX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VSE))
set t=null
endfunction
function VTE takes nothing returns nothing
local integer RP7=GetHandleId(GetTriggeringTrigger())
local unit p5=IM4
local unit m5=IN4
local real BD7=R77(RP7,"Damage")
set LP4="VTE"
call D38(p5,m5,1,BD7)
set p5=null
set m5=null
endfunction
function VUE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local trigger t=B27(p5,m5,1747993168,"VTE",700)
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(p5,1093678145)
local real YU9
set LP4="VUE"
if DB8==1 then
set YU9=85
elseif DB8==2 then
set YU9=$A5
elseif DB8==3 then
set YU9=$E1
elseif DB8==4 then
set YU9=300
endif
call QD7(JZ7,"Damage",YU9)
set p5=null
set m5=null
set t=null
endfunction
function VVE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093678145)
set LP4="VVE"
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),500,Condition(function LV7))
call ForGroup(g,function VUE)
call ZH7(g)
call PlaySoundOnUnitBJ(KP,100,CP7)
set CP7=null
set g=null
endfunction
function VWE takes nothing returns boolean
if GetSpellAbilityId()==1093678145 then
call VVE()
endif
return false
endfunction
function QY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VWE))
set t=null
endfunction
function VXE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="VXE"
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call Q47(RP7)
call RN7(t)
else
call Q47(RP7)
call RN7(t)
call OD7(p5)
endif
set t=null
set p5=null
return false
endfunction
function VYE takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093677136)
set LP4="VYE"
call TriggerRegisterTimerEvent(t,1+1.75+.75*X37,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function VXE))
call QG7(RP7,"Source",p5)
set p5=null
set t=null
endfunction
function VZE takes nothing returns boolean
if GetSpellAbilityId()==1093677136 then
call VYE()
endif
return false
endfunction
function QZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VZE))
set t=null
endfunction
function VAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)==4 or Y57(J67)then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call UnitRemoveAbility(J67,1093816119)
call UnitRemoveAbility(J67,1110460227)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call D38(CP7,J67,1,20*DB8-$A)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function VBE takes unit CP7,unit J67,integer DB8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="Dash_Add"
call Z27(J67,1093816119)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function VAE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",J67,"chest")))
set t=null
endfunction
function VCE takes nothing returns boolean
set LP4="VCE"
if IsUnitInGroup(GetEnumUnit(),W34)==false and Y57(GetEnumUnit())==false then
call GroupAddUnit(W34,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireBlast.mdx",GetEnumUnit(),"chest"))
call VBE(WL4,GetEnumUnit(),W64)
endif
return false
endfunction
function V3E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real LN9=(LoadReal(C7,(JZ7),($BD)))
local real LO9=(LoadReal(C7,(JZ7),($BE)))
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local real a=(LoadReal(C7,(JZ7),($D)))
local real V6E=(1-I2R(ZD8)/50)*bj_PI
local real VLE=W14/2*Cos(V6E)
local real V1E=500/2*Sin(V6E)
local real x=AY7(BC7+VLE*Cos(a)-V1E*Sin(a))
local real y=AZ7(B37+VLE*Sin(a)+V1E*Cos(a))
local group W19=(LoadGroupHandle(C7,(JZ7),($85)))
local group g
local integer DB8=GetUnitAbilityLevel(CP7,1093751370)
set LP4="V3E"
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and ZD8>0 and(GetSpellAbilityId()==1093808206 or GetSpellAbilityId()==1093751371))or ZD8>100 then
call BW7(x,y,300)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093751370 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093751370,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808206,false)
call SetUnitPathing(CP7,true)
call ZH7(W19)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if ModuloInteger(ZD8,$A)==0 then
call BW7(x,y,$C8)
endif
call SaveInteger(C7,(JZ7),(34),(ZD8+1))
call SetUnitX(CP7,x)
call SetUnitY(CP7,y)
call SetUnitFacing(CP7,(a+V6E-bj_PI/2)*bj_RADTODEG)
set g=ZI7()
set W34=W19
set IM4=CP7
set WL4=CP7
set W64=GetUnitAbilityLevel(CP7,1093751370)
call GroupEnumUnitsInRange(g,x,y,$C8+25,Condition(function LQ7))
call ForGroup(g,function VCE)
call ZH7(g)
endif
set t=null
set CP7=null
set g=null
set W19=null
return false
endfunction
function V0E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real LN9=GetUnitX(CP7)
local real LO9=GetUnitY(CP7)
local real a=MZ7(LN9,LO9,GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real BC7=LN9+$578/2*Cos(a)
local real B37=LO9+$578/2*Sin(a)
set LP4="V0E"
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)-GetUnitState(CP7,UNIT_STATE_LIFE)*.15)
call RR7(CP7,"DashState1",2)
call RR7(CP7,"DashState2",2)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V3E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),($BD),((LN9)*1.))
call SaveReal(C7,(JZ7),($BE),((LO9)*1.))
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
call SaveReal(C7,(JZ7),($D),((a)*1.))
call SaveGroupHandle(C7,(JZ7),($85),(ZI7()))
call SetUnitPathing(CP7,false)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,50)
call Z27(CP7,1093808206)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093751370,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808206,true)
set t=null
set CP7=null
endfunction
function V5E takes nothing returns boolean
if GetSpellAbilityId()==1093751370 then
call V0E()
endif
return false
endfunction
function QA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QA8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function V5E))
set t=null
endfunction
function V2E takes nothing returns nothing
local unit CP7=XE4
local unit J67=GetEnumUnit()
set LP4="V2E"
call D38(CP7,J67,1,40+20*XF4)
call BJ7("Doodads\\Cinematic\\FireTrapUp\\FireTrapUp.mdl",J67,"origin",1)
set CP7=null
set J67=null
endfunction
function V_E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093751371)
local group g
set LP4="V_E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set IM4=CP7
set XE4=CP7
set XF4=DB8
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$3E8+25,Condition(function LF7))
call ForGroup(g,function V2E)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function W4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit W7E=(LoadUnitHandle(C7,(JZ7),(589)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
set LP4="W4E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if IsUnitIllusion(GetEventDamageSource()) then
call BE7(W7E,GetEventDamage())
endif
else
if GetUnitX(W7E)!=x or GetUnitY(W7E)!=y then
call SetUnitPosition(W7E,x,y)
endif
if GetUnitY(CP7)!=x or GetUnitY(CP7)!=y then
call SetUnitPosition(CP7,x,y)
endif
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
endif
if GetTriggerEvalCount(t)==1 then
call PauseUnit(CP7,true)
endif
set t=null
set W7E=null
set CP7=null
set DA8=null
return false
endfunction
function W8E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit W9E=(LoadUnitHandle(C7,(JZ7),(588)))
local unit W7E=(LoadUnitHandle(C7,(JZ7),(589)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit DKD=(LoadUnitHandle(C7,(JZ7),($EF)))
local integer DB8=GetUnitAbilityLevel(CP7,1093751371)
local group g
local unit DA8
local integer WDE
set LP4="W8E"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call StopSound(V44,false,false)
call ShowUnit(W9E,false)
call ShowUnit(DKD,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call ShowUnit(CP7,true)
call RK7(CP7,"4326")
call UnitRemoveAbility(CP7,1093678162)
call SetUnitInvulnerable(CP7,false)
call PauseUnit(CP7,false)
if GetLocalPlayer()==GetOwningPlayer(CP7)then
call ClearSelection()
call SelectUnit(CP7,true)
endif
call SetUnitState(CP7,UNIT_STATE_LIFE,1)
set DA8=CreateUnit(GetOwningPlayer(GetKillingUnit()),1697656901,0,0,0)
call UnitRemoveBuffs(CP7,true,true)
call UnitRemoveAbility(CP7,1097167980)
call UnitDamageTarget(DA8,CP7,100000000.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set DA8=null
else
if GetTriggerEvalCount(t)==1 then
call SetUnitFlyHeight(W7E,0,$C8)
elseif GetTriggerEvalCount(t)==2 then
call PauseUnit(W7E,false)
call UnitApplyTimedLife(W7E,1112820806,.1)
call StopSound(V44,false,false)
call StartSound(V74)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireNova2.mdx",GetUnitX(W9E),GetUnitY(W9E)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call ShowUnit(CP7,true)
call RK7(CP7,"4326")
call UnitRemoveAbility(CP7,1093678162)
call SetUnitInvulnerable(CP7,false)
call SetUnitAnimationByIndex(CP7,8)
call QueueUnitAnimation(CP7,"idle")
call PauseUnit(CP7,false)
if GetLocalPlayer()==GetOwningPlayer(CP7)then
call ClearSelection()
call SelectUnit(CP7,true)
endif
call ShowUnit(W9E,false)
call ShowUnit(DKD,false)
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_MAX_LIFE))
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MAX_MANA))
set WDE=GetUnitAbilityLevel(CP7,1093751370)
if WDE>0 then
call UnitRemoveAbility(CP7,1093751370)
call UnitAddAbility(CP7,1093751370)
call SetUnitAbilityLevel(CP7,1093751370,WDE)
endif
set WDE=GetUnitAbilityLevel(CP7,1093753176)
if WDE>0 then
call UnitRemoveAbility(CP7,1093753176)
call UnitAddAbility(CP7,1093753176)
call SetUnitAbilityLevel(CP7,1093753176,WDE)
endif
set WDE=GetUnitAbilityLevel(CP7,1093753177)
if WDE>0 then
call UnitRemoveAbility(CP7,1093753177)
call UnitAddAbility(CP7,1093753177)
call SetUnitAbilityLevel(CP7,1093753177,WDE)
endif
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call Z27(DA8,1093753428)
call SetUnitAbilityLevel(DA8,1093753428,DB8)
call IssueImmediateOrderById(DA8,$D009F)
set DA8=null
endif
endif
set t=null
set CP7=null
set W9E=null
set DKD=null
set W7E=null
return false
endfunction
function WEE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit W9E
local unit W7E
local unit DKD=CreateUnit(GetOwningPlayer(CP7),1747993420,GetUnitX(CP7),GetUnitY(CP7),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093751371)
local unit DA8
local unit WFE=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="WEE"
set W9E=CreateUnit(GetOwningPlayer(CP7),1747993176,x,y,0)
if DB8==1 then
set W7E=CreateUnit(GetOwningPlayer(CP7),1747993430,x,y,0)
elseif DB8==2 then
set W7E=CreateUnit(GetOwningPlayer(CP7),1747993432,x,y,0)
elseif DB8==3 then
set W7E=CreateUnit(GetOwningPlayer(CP7),1747993431,x,y,0)
endif
call AddSpecialEffectTarget("war3mapImported\\PhoenixDown_2.mdl",W9E,"origin")
if GetLocalPlayer()==GetOwningPlayer(CP7)then
call ClearSelection()
call SelectUnit(W7E,true)
endif
call BW7(x,y,400)
call ShowUnit(CP7,false)
call RI7(CP7,"4326")
call Z27(CP7,1093678162)
call BT8(CP7,0,0)
call SetUnitInvulnerable(CP7,true)
call UnitRemoveBuffs(CP7,true,true)
call StartSound(V44)
call UnitRemoveAbility(W7E,1098015094)
call UnitApplyTimedLife(W9E,1112820806,6.1)
call UnitApplyTimedLife(DKD,1112820806,6.1)
call UnitApplyTimedLife(W7E,1112820806,6.1)
call TriggerRegisterTimerEvent(t,5.2,false)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function W8E))
call TriggerRegisterUnitEvent(t,W7E,EVENT_UNIT_DEATH)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(588),(W9E))
call SaveUnitHandle(C7,(JZ7),(589),(W7E))
call SaveUnitHandle(C7,(JZ7),($EF),(DKD))
call SaveReal(C7,(JZ7),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(CP7))*1.))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,W7E,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function V_E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,W7E,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,W7E,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function W4E))
call SaveUnitHandle(C7,(JZ7),(589),(W7E))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(CP7))*1.))
call SaveUnitHandle(C7,(JZ7),(19),(WFE))
if PD7(CP7,1227899192)then
call UnitAddAbility(WFE,1093678153)
endif
set t=null
set CP7=null
set W9E=null
set W7E=null
endfunction
function WGE takes nothing returns boolean
if GetSpellAbilityId()==1093751371 then
call WEE()
endif
return false
endfunction
function Q18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WGE))
call AC7(1093687350)
call AC7(1093753428)
set t=null
endfunction
function WHE takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+Z34)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BirdShitTarget_1.mdx",GetEnumUnit(),"origin"))
endfunction
function WIE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local group g
local integer DB8=GetUnitAbilityLevel(CP7,1093809986)
set LP4="WIE"
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set g=ZI7()
set Z34=50+75*DB8
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function LA7))
call ForGroup(g,function WHE)
call ZH7(g)
set t=null
set CP7=null
set g=null
return false
endfunction
function WJE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
set LP4="WJE"
call TriggerRegisterTimerEvent(t,3,false)
call TriggerAddCondition(t,Condition(function WIE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
if IsPlayerAlly(GetOwningPlayer(CP7),GetLocalPlayer())or Y27(GetLocalPlayer())then
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\BirdShit_1.mdx",x,y)))
else
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("",x,y)))
endif
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7))or Y27(GetLocalPlayer())then
call PingMinimapEx(x,y,3,$FF,0,0,false)
call BY7(WZ4,x,y)
endif
call BA7(GetOwningPlayer(CP7),4,x,y,500)
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)*.9)
set t=null
set CP7=null
endfunction
function WKE takes nothing returns boolean
if GetSpellAbilityId()==1093809986 then
call WJE()
endif
return false
endfunction
function QC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QC8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WKE))
set t=null
endfunction
function WME takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
set LP4="WME"
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitRemoveAbility(J67,1093809968)
call UnitRemoveAbility(J67,1110459723)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEvalCount(t)>4 then
call UnitRemoveAbility(J67,1093809968)
call UnitRemoveAbility(J67,1110459723)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call D38(CP7,J67,1,16+$C*DB8)
else
call D38(CP7,J67,1,16+$C*DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function WNE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real x=WN9+$C*Cos(a)
local real y=WO9+$C*Sin(a)
set LP4="WNE"
call SetUnitX(J67,x)
call SetUnitY(J67,y)
call SaveReal(C7,(JZ7),(23),((x)*1.))
call SaveReal(C7,(JZ7),(24),((y)*1.))
if GetTriggerEvalCount(t)>25 then
call BW7(x,y,100)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function WOE takes unit CP7,unit J67,real x,real y,real a returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093809969)
set LP4="SweepingFlame_Hit"
call SetUnitPosition(J67,GetUnitX(J67),GetUnitY(J67))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),($89),((a*bj_DEGTORAD)*1.))
call SaveReal(C7,(JZ7),(23),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(J67))*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function WNE))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",J67,"chest")))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function WME))
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093809968,false)
call Z27(J67,1093809968)
set t=null
endfunction
function WPE takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),Z64)==false then
if N37(Z14,GetEnumUnit())<24 or RAbsBJ(Cos(MY7(Z14,GetEnumUnit())-Z24))<.26 then
call GroupAddUnit(Z64,GetEnumUnit())
if Sin((MY7(Z14,GetEnumUnit())-Z24)*bj_DEGTORAD)<0 then
call WOE(ZL4,GetEnumUnit(),Z04,Z54,Z24-90)
else
call WOE(ZL4,GetEnumUnit(),Z04,Z54,Z24+90)
endif
endif
endif
endfunction
function WQE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local group g
set LP4="WQE"
if GetTriggerEvalCount(t)>125 then
call KillUnit(BB7)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set x=x+8*Cos(a)
set y=y+8*Sin(a)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
set IM4=CP7
set Z04=x
set Z54=y
set Z24=a*bj_RADTODEG
set Z64=DND
set ZL4=CP7
set Z14=BB7
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,$E1,Condition(function LF7))
call ForGroup(g,function WPE)
call ZH7(g)
endif
set t=null
set CP7=null
return false
endfunction
function WRE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local real WY9=Atan2(B37-GetUnitY(CP7),BC7-GetUnitX(CP7))
local integer DB8=GetUnitAbilityLevel(CP7,1093809969)
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993665,GetUnitX(CP7),GetUnitY(CP7),WY9*bj_RADTODEG)
set LP4="WRE"
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function WQE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveReal(C7,(JZ7),($89),((WY9)*1.))
call SaveReal(C7,(JZ7),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(CP7))*1.))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
set t=null
set CP7=null
endfunction
function WSE takes nothing returns boolean
if GetSpellAbilityId()==1093809969 then
call WRE()
endif
return false
endfunction
function QL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QL8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WSE))
set t=null
endfunction
function WTE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer C97=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(C97),(2)))
local real WUE=(LoadReal(C7,(GetHandleId(CP7)),(681)))
set LP4="WTE"
call FlushChildHashtable(C7,(C97))
call RN7(t)
if((TimerGetElapsed(V))-WUE<.49)==false or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(CP7,1093753396)
call UnitRemoveAbility(CP7,1093753409)
call UnitRemoveAbility(CP7,1093753410)
call UnitRemoveAbility(CP7,1093753401)
call UnitRemoveAbility(CP7,1110459478)
endif
set t=null
set CP7=null
return false
endfunction
function WVE takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer WWE
set LP4="Sunray_Slow"
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WTE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(GetHandleId(CP7)),(681),(((TimerGetElapsed(V)))*1.))
if X44==1 then
set WWE=1093753396
call UnitRemoveAbility(CP7,1093753409)
call UnitRemoveAbility(CP7,1093753410)
call UnitRemoveAbility(CP7,1093753401)
elseif X44==2 then
set WWE=1093753409
call UnitRemoveAbility(CP7,1093753396)
call UnitRemoveAbility(CP7,1093753410)
call UnitRemoveAbility(CP7,1093753401)
elseif X44==3 then
set WWE=1093753410
call UnitRemoveAbility(CP7,1093753396)
call UnitRemoveAbility(CP7,1093753409)
call UnitRemoveAbility(CP7,1093753401)
elseif X44==4 then
set WWE=1093753401
call UnitRemoveAbility(CP7,1093753396)
call UnitRemoveAbility(CP7,1093753409)
call UnitRemoveAbility(CP7,1093753410)
endif
call Z27(CP7,WWE)
call UnitMakeAbilityPermanent(CP7,true,WWE)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),WWE,false)
set t=null
endfunction
function WXE takes nothing returns nothing
local unit J67=GetEnumUnit()
local real WYE=X94
local real WZE=XD4
local real YU9=WYE+WZE*GetUnitState(J67,UNIT_STATE_MAX_LIFE)
set LP4="WXE"
set YU9=YU9/5
if IsUnitEnemy(J67,GetOwningPlayer(X74)) then
call D38(X74,J67,3,YU9)
if Y57(J67)==false then
call WVE(J67)
endif
else
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+YU9*.5)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FireRayTarget.mdx",J67,"origin"))
call BA7(GetOwningPlayer(J67),2,GetUnitX(X74),GetUnitY(X74),500)
set J67=null
endfunction
function WAE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real WBE=GetUnitFacing(CP7)
local real a=WBE*bj_DEGTORAD
local location l1=GetUnitLoc(CP7)
local real WCE=GetLocationZ(l1)
local location l2=Location(GetUnitX(CP7)+W04*Cos(a),GetUnitY(CP7)+W04*Sin(a))
local real W3E=GetLocationZ(l2)
local lightning W6E=(LoadLightningHandle(C7,(JZ7),(676)))
local lightning WLE=(LoadLightningHandle(C7,(JZ7),(677)))
local lightning W1E=(LoadLightningHandle(C7,(JZ7),(678)))
local lightning W0E=(LoadLightningHandle(C7,(JZ7),(679)))
local lightning W5E=(LoadLightningHandle(C7,(JZ7),(680)))
local real W2E=1
local real LN9
local real LO9
local real W_E
local real X4E
local real X7E
local real X8E
local real X9E
local real XDE
local real XEE
local real XFE
local real XGE
local real XHE
local real XIE
local real XJE
local real XKE
local real XME
local real XNE
local real XOE
local real XPE
local real XQE
local real XRE
local real XSE
local real XTE
local real XUE
local real XVE
local real XWE
local real XXE
local real XYE
local real XZE
local real XAE
local real XBE
local real XCE
local real X3E
local group g
local real x
local real y
local integer i
local real X6E
local real XLE
local real X1E
local boolean X0E=FALSE
local boolean X5E=false
local unit X2E=(LoadUnitHandle(C7,(JZ7),(17)))
local unit CT4=null
local unit DriftTarget=null
local real X_E
local real Y4E
local real Y7E
local real Y8E=(LoadReal(C7,(JZ7),(688)))
local boolean Y9E=(LoadBoolean(C7,(JZ7),(689)))
local boolean YDE=(LoadBoolean(C7,(JZ7),(672)))
local real YEE
local ubersplat YFE
local real O32=(LoadReal(C7,(JZ7),(23)))
local real O42=(LoadReal(C7,(JZ7),(24)))
local real WYE
local real WZE
local real YGE
local real YHE=5
set LP4="WAE"
if GetUnitCurrentOrder(CP7)==$D0021 then
call DisableTrigger(t)
call OD7(CP7)
call EnableTrigger(t)
endif
call RemoveLocation(l1)
call RemoveLocation(l2)
if IsUnitPaused(CP7)==false and(GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER)then
set LN9=GetUnitX(CP7)
set LO9=GetUnitY(CP7)
if GetIssuedOrderId()!=$D020A and GetIssuedOrderId()!=$D00D9 and GetIssuedOrderId()!=$D0278 then
call DisableTrigger(t)
call OD7(CP7)
call EnableTrigger(t)
endif
if GetIssuedOrderId()==$D0003 then
if GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER then
set x=GetUnitX(GetOrderTargetUnit())
set y=GetUnitY(GetOrderTargetUnit())
else
set x=GetOrderPointX()
set y=GetOrderPointY()
endif
set X6E=MZ7(x,y,LN9,LO9)
if X6E<0 then
set X6E=X6E+360
endif
set X1E=WBE-X6E
if X1E<0 then
set X1E=X1E+360
endif
if X1E<$B4 then
set X0E=true
set XLE=WBE+6
else
set X5E=true
set XLE=WBE-6
endif
set Y8E=MZ7(x,y,LN9,LO9)+$B4
call SaveReal(C7,(JZ7),(688),((Y8E)*1.))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT or GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==-1 or ZD8>=6./.02 or BI8(CP7)or XT7(CP7)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and(GetSpellAbilityId()==1093753395 or GetSpellAbilityId()==1093751371 or GetSpellAbilityId()==1093809992))then
call RK7(CP7,"SunRay|Disarmed")
call L97(CP7)
call SetUnitPathing(CP7,true)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093808181)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753395,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808181,false)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093753177 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753177,true)
endif
call DestroyLightning(W6E)
call DestroyLightning(WLE)
call DestroyLightning(W1E)
call DestroyLightning(W0E)
call DestroyLightning(W5E)
call StopSound(WY4,false,true)
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==852177then
set Y9E=true
endif
if GetIssuedOrderId()==852178then
set Y9E=false
endif
call SaveBoolean(C7,(JZ7),(689),(Y9E))
else
set X6E=WBE-Y8E
if X6E<-$B4 then
set X6E=X6E+360
elseif X6E>$B4 then
set X6E=X6E-360
endif
set YEE=1
if ZD8<35 and YDE then
set YEE=7
endif
if X6E<(-1*YEE)then
set WBE=WBE+YEE
elseif X6E>YEE then
set WBE=WBE-YEE
else
set YDE=false
call SaveBoolean(C7,(JZ7),(672),(YDE))
set WBE=Y8E
endif
if RG7(CP7,"DashState1")==false then
call SetUnitFacing(CP7,WBE)
endif
set a=WBE*bj_DEGTORAD
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
set W_E=W04
set LN9=GetUnitX(CP7)+50*Cos(a)
set LO9=GetUnitY(CP7)+50*Sin(a)
if Y9E and C27(CP7)==false and BI8(CP7)==false then
if((LoadInteger(C7,(GetHandleId((CP7))),((4331))))==1) then
set YHE=YHE*2
endif
set Y7E=a
set X_E=AY7(GetUnitX(CP7)+YHE*Cos(Y7E))
set Y4E=AZ7(GetUnitY(CP7)+YHE*Sin(Y7E))
call BW7(X_E,Y4E,$C8)
call SetUnitX(CP7,X_E)
call SetUnitY(CP7,Y4E)
endif
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)-GetUnitState(CP7,UNIT_STATE_LIFE)*.03*.02)
call BW7(LN9,LO9,$C8)
if ModuloInteger(ZD8,$A)==0 then
set X84=ZI7()
set IM4=CP7
set i=0
loop
exitwhen i*50>W04
set x=LN9+i*50*Cos(a)
set y=LO9+i*50*Sin(a)
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,$82+25,Condition(function LF7))
call GroupAddGroup(g,X84)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function LA7))
call GroupAddGroup(g,X84)
call ZH7(g)
if ModuloInteger(i,3)==0 then
call BA7(GetOwningPlayer(CP7),2,x,y,$E1)
endif
set i=i+1
endloop
set X74=CP7
set X44=GetUnitAbilityLevel(CP7,1093753177)
set YGE=(I2R(ZD8)/50.)/6
set X94=(5*X44+$A)+(5*X44+$A)*YGE
set XD4=(X44+YGE*(X44))/100
call GroupRemoveUnit(X84,CP7)
call ForGroup(X84,function WXE)
call ZH7(X84)
set g=null
set X84=null
endif
if A47(CP7)==false then
if X2E!=null then
set W_E=N37(CP7,X2E)
endif
set X4E=LN9
set X7E=LO9
set X8E=WCE+$C8
set X9E=X4E+W_E*Cos(a)
set XDE=X7E+W_E*Sin(a)
set XEE=W3E
set XFE=LN9+W54*Cos((WBE-90)*bj_DEGTORAD)
set XGE=LO9+W24*Cos((WBE-90)*bj_DEGTORAD)
set XHE=WCE+$C8
set XIE=XFE+W_E*Cos(a)
set XJE=XGE+W_E*Sin(a)
set XKE=W3E
set XME=LN9+W54*Cos((WBE+90)*bj_DEGTORAD)
set XNE=LO9+W24*Cos((WBE+90)*bj_DEGTORAD)
set XOE=WCE+$C8
set XPE=XME+W_E*Cos(a)
set XQE=XNE+W_E*Sin(a)
set XRE=W3E
set XSE=LN9
set XTE=LO9
set XUE=WCE+$C8+W_4
set XVE=XSE+W_E*Cos(a)
set XWE=XTE+W_E*Sin(a)
set XXE=W3E
set XYE=LN9
set XZE=LO9
set XAE=WCE+$C8-W_4
set XBE=XYE+W_E*Cos(a)
set XCE=XZE+W_E*Sin(a)
set X3E=W3E
if ModuloInteger(ZD8,$A)==0 and W_E==W04 then
set x=GetUnitX(CP7)+(W04)*Cos(a)
set y=GetUnitY(CP7)+(W04)*Sin(a)
call DestroyEffect(AddSpecialEffect("war3mapImported\\FireRayTarget.mdx",x,y))
endif
if ModuloInteger(ZD8,$A)==0 then
call SetSoundPosition(WY4,GetUnitX(CP7),GetUnitY(CP7),100)
set x=GetUnitX(CP7)+(W_E)*Cos(a)
set y=GetUnitY(CP7)+(W_E)*Sin(a)
set YFE=CreateUbersplat(x,y,"SRAY",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(YFE,true)
call P69(YFE,$A)
set YFE=null
endif
call MoveLightningEx(W6E,false,X4E,X7E,X8E,X9E,XDE,XEE)
call MoveLightningEx(WLE,false,XFE,XGE,XHE,XIE,XJE,XKE)
call MoveLightningEx(W1E,false,XME,XNE,XOE,XPE,XQE,XRE)
call MoveLightningEx(W0E,false,XSE,XTE,XUE,XVE,XWE,XXE)
call MoveLightningEx(W5E,false,XYE,XZE,XAE,XBE,XCE,X3E)
if Y27(GetLocalPlayer())then
set W2E=1
endif
call SetLightningColor(W6E,1.,1.,1.,W2E)
call SetLightningColor(WLE,1.,1.,1.,W2E)
call SetLightningColor(W1E,1.,1.,1.,W2E)
call SetLightningColor(W0E,1.,1.,1.,W2E)
call SetLightningColor(W5E,1.,1.,1.,W2E)
endif
endif
set t=null
set CP7=null
set W6E=null
set WLE=null
set W1E=null
set W0E=null
set W5E=null
set l1=null
set l2=null
return false
endfunction
function YIE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local real BC7=AY7(GetUnitX(CP7)+W04*Cos(a))
local real B37=AZ7(GetUnitY(CP7)+W04*Sin(a))
local lightning W6E=AddLightning("SRAY",false,GetUnitX(CP7),GetUnitY(CP7),BC7,B37)
local lightning WLE=AddLightning("SRAY",false,GetUnitX(CP7),GetUnitY(CP7),BC7,B37)
local lightning W1E=AddLightning("SRAY",false,GetUnitX(CP7),GetUnitY(CP7),BC7,B37)
local lightning W0E=AddLightning("SRAY",false,GetUnitX(CP7),GetUnitY(CP7),BC7,B37)
local lightning W5E=AddLightning("SRAY",false,GetUnitX(CP7),GetUnitY(CP7),BC7,B37)
set LP4="YIE"
call SetUnitFacing(CP7,a*bj_RADTODEG)
call StartSound(WY4)
call SetSoundPosition(WY4,GetUnitX(CP7),GetUnitY(CP7),100)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WAE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),($D),((a)*1.))
call SaveReal(C7,(JZ7),(688),((a*bj_RADTODEG)*1.))
call SaveLightningHandle(C7,(JZ7),(676),(W6E))
call SaveLightningHandle(C7,(JZ7),(677),(WLE))
call SaveLightningHandle(C7,(JZ7),(678),(W1E))
call SaveLightningHandle(C7,(JZ7),(679),(W0E))
call SaveLightningHandle(C7,(JZ7),(680),(W5E))
call SaveBoolean(C7,(JZ7),(689),(false))
call SaveBoolean(C7,(JZ7),(672),(true))
call SaveReal(C7,(JZ7),(688),((a*bj_RADTODEG)*1.))
call SaveReal(C7,(JZ7),(23),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(CP7))*1.))
call L77(CP7)
call RI7(CP7,"SunRay|Disarmed")
call SetUnitPathing(CP7,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753395,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808181,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753177,false)
call Z27(CP7,1093753395)
call UnitMakeAbilityPermanent(CP7,true,1093753395)
call Z27(CP7,1093808181)
call UnitMakeAbilityPermanent(CP7,true,1093808181)
call TriggerEvaluate(t)
set t=null
set CP7=null
set CP7=null
set W6E=null
set WLE=null
set W1E=null
set W0E=null
set W5E=null
endfunction
function YJE takes nothing returns boolean
if GetSpellAbilityId()==1093753177 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
else
call YIE()
endif
endif
return false
endfunction
function Q68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function YJE))
call P09(1093753396)
call P09(1093753409)
call P09(1093753410)
call P09(1093753401)
set t=null
endfunction
function YKE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093753176)
set LP4="YKE"
if GetTriggerEventId()==EVENT_UNIT_DEATH or(TimerGetElapsed(V))>=(LoadReal(C7,(GetHandleId(J67)),(757)))or Y57(J67) then
call UnitRemoveAbility(J67,1093815352)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
if ModuloInteger(GetTriggerEvalCount(t),4)==0 then
call D38(CP7,J67,1,20*DB8)
endif
set t=null
set CP7=null
return false
endfunction
function YME takes nothing returns nothing
local unit CP7=XG4
local unit J67=GetEnumUnit()
local trigger t
local integer JZ7
set LP4="YME"
call SaveReal(C7,(GetHandleId(J67)),(757),(((TimerGetElapsed(V))+4)*1.))
if GetUnitAbilityLevel(J67,1093815352)==0 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function YKE))
call TriggerRegisterDeathEvent(t,J67)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",J67,"chest")))
if BP8(J67)==false then
call UnitAddAbility(J67,1093815352)
call UnitMakeAbilityPermanent(J67,true,1093815352)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815352,false)
endif
set CP7=null
set J67=null
set t=null
endfunction
function YNE takes unit CP7,unit BB7,real G3E,unit DA8,unit J67 returns nothing
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local group g=ZI7()
set LP4="Firespirits_Detonate"
set IM4=CP7
set XG4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF+25,Condition(function LQ7))
call ForGroup(g,function YME)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Firaga_2.mdx",x,y))
call KillUnit(BB7)
call ShowUnit(BB7,false)
set g=null
endfunction
function YOE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit YPE=(LoadUnitHandle(C7,(JZ7),(393)))
local real G3E=(LoadReal(C7,(JZ7),(685)))
local real BC7
local real B37
local real x
local real y
local real a
local real r=18
local integer DB8=GetUnitAbilityLevel(CP7,1093753176)
set LP4="YOE"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
set BC7=GetUnitX(J67)
set B37=GetUnitY(J67)
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
call RemoveSavedHandle(C7,(JZ7),(17))
call SaveUnitHandle(C7,(JZ7),(17),(null))
elseif J67==null then
set BC7=(LoadReal(C7,(JZ7),(47)))
set B37=(LoadReal(C7,(JZ7),(48)))
else
set BC7=GetUnitX(J67)
set B37=GetUnitY(J67)
endif
set a=MZ7(GetUnitX(YPE),GetUnitY(YPE),BC7,B37)
call SetUnitFacing(YPE,a)
set x=GetUnitX(YPE)+r*Cos(a*bj_DEGTORAD)
set y=GetUnitY(YPE)+r*Sin(a*bj_DEGTORAD)
call SetUnitX(YPE,x)
call SetUnitY(YPE,y)
if N67(x,y,BC7,B37)<r*2 then
call YNE(CP7,YPE,G3E,DA8,J67)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
set YPE=null
set DA8=null
return false
endfunction
function YQE takes unit CP7,unit YPE,unit J67,real G3E,unit DA8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local group g
local unit NewTarget
set LP4="Firespirits_Launch"
if CP7==J67 then
call KillUnit(YPE)
call ShowUnit(YPE,false)
else
call SetUnitVertexColor(YPE,$FF,$FF,$FF,$FF)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YOE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(393),(YPE))
call SaveReal(C7,(JZ7),(47),((GetSpellTargetX())*1.))
call SaveReal(C7,(JZ7),(48),((GetSpellTargetY())*1.))
call SaveReal(C7,(JZ7),(685),((G3E)*1.))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
endif
set t=null
endfunction
function YRE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real LN9=GetUnitX(CP7)
local real LO9=GetUnitY(CP7)
local unit YSE=(LoadUnitHandle(C7,(JZ7),(393)))
local unit YTE=(LoadUnitHandle(C7,(JZ7),(394)))
local unit YUE=(LoadUnitHandle(C7,(JZ7),(395)))
local unit YVE=(LoadUnitHandle(C7,(JZ7),(396)))
local integer DB8=GetUnitAbilityLevel(CP7,1093753176)
local real a=GetUnitFacing(CP7)
local real x
local real y
local group g
local group g2
local real F5D=-1*360*.02/4
local real a2
local real S19
local real G3E=(LoadReal(C7,(JZ7),(685)))
local real YWE
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local integer YXE=GetHandleId(CP7)
local player pl=GetOwningPlayer(CP7)
local integer YYE=800
set LP4="YRE"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093753394 then
if A47(YSE)==false then
call YQE(CP7,YSE,GetSpellTargetUnit(),G3E,DA8)
call RemoveSavedHandle(C7,(JZ7),(393))
elseif A47(YTE)==false then
call YQE(CP7,YTE,GetSpellTargetUnit(),G3E,DA8)
call RemoveSavedHandle(C7,(JZ7),(394))
elseif A47(YUE)==false then
call YQE(CP7,YUE,GetSpellTargetUnit(),G3E,DA8)
call RemoveSavedHandle(C7,(JZ7),(395))
elseif A47(YVE)==false then
call YQE(CP7,YVE,GetSpellTargetUnit(),G3E,DA8)
call RemoveSavedHandle(C7,(JZ7),(396))
if(WQ7(pl))then
call Q77(YXE,"Bird4")
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753394,false)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753176,true)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
elseif GetSpellAbilityId()==1093751371 then
if YSE!=null and A47(YSE)==false then
call YQE(CP7,YSE,CP7,G3E,DA8)
endif
if YTE!=null and A47(YTE)==false then
call YQE(CP7,YTE,CP7,G3E,DA8)
endif
if YUE!=null and A47(YUE)==false then
call YQE(CP7,YUE,CP7,G3E,DA8)
endif
if YVE!=null and A47(YVE)==false then
call YQE(CP7,YVE,CP7,G3E,DA8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753394,false)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753176,true)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if(WQ7(pl))then
call Q77(YXE,"Bird4")
call Q97(YXE,"BirdsCounter",0)
endif
endif
else
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if(WQ7(pl))then
call Q97(YXE,"BirdsCounter",ZD8)
endif
if YSE!=null and A47(YSE)==false then
set S19=360*4/4.
set a2=S19+F5D*ZD8
set x=AY7(LN9+$C8*Cos(a2*bj_DEGTORAD))
set y=AZ7(LO9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YSE,a2-90)
call SetUnitX(YSE,x)
call SetUnitY(YSE,y)
endif
if YTE!=null and A47(YTE)==false then
set S19=360*3/4.
set a2=S19+F5D*ZD8
set x=AY7(LN9+$C8*Cos(a2*bj_DEGTORAD))
set y=AZ7(LO9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YTE,a2-90)
call SetUnitX(YTE,x)
call SetUnitY(YTE,y)
endif
if YUE!=null and A47(YUE)==false then
set S19=360*2/4.
set a2=S19+F5D*ZD8
set x=AY7(LN9+$C8*Cos(a2*bj_DEGTORAD))
set y=AZ7(LO9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YUE,a2-90)
call SetUnitX(YUE,x)
call SetUnitY(YUE,y)
endif
if YVE!=null and A47(YVE)==false then
set S19=360*1/4.
set a2=S19+F5D*ZD8
set x=AY7(LN9+$C8*Cos(a2*bj_DEGTORAD))
set y=AZ7(LO9+$C8*Sin(a2*bj_DEGTORAD))
call SetUnitFacing(YVE,a2-90)
call SetUnitX(YVE,x)
call SetUnitY(YVE,y)
endif
if ZD8>YYE or GetTriggerEventId()==EVENT_UNIT_DEATH then
if YSE!=null and A47(YSE)==false then
call YQE(CP7,YSE,CP7,G3E,DA8)
endif
if YTE!=null and A47(YTE)==false then
call YQE(CP7,YTE,CP7,G3E,DA8)
endif
if YUE!=null and A47(YUE)==false then
call YQE(CP7,YUE,CP7,G3E,DA8)
endif
if YVE!=null and A47(YVE)==false then
call YQE(CP7,YVE,CP7,G3E,DA8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753394,false)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093753176 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753176,true)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if(WQ7(pl))then
call Q77(YXE,"Bird4")
call Q97(YXE,"BirdsCounter",0)
endif
else
set G3E=RMinBJ(.25+.75*(I2R(ZD8)/500.),1)
call SaveReal(C7,(JZ7),(685),((G3E)*1.))
set YWE=.25+(1-.2)*2.5
call SetUnitScale(YSE,YWE,YWE,YWE)
call SetUnitScale(YTE,YWE,YWE,YWE)
call SetUnitScale(YUE,YWE,YWE,YWE)
call SetUnitScale(YVE,YWE,YWE,YWE)
if ZD8==(YYE-$AF)then
call CK7(WZ4,GetOwningPlayer(CP7))
endif
if ZD8>(YYE-$C8)then
if ModuloInteger(ZD8,$A)==0 or ModuloInteger(ZD8,$A)==1 or ModuloInteger(ZD8,$A)==2 or ModuloInteger(ZD8,$A)==3 or ModuloInteger(ZD8,$A)==4 then
call SetUnitVertexColor(YSE,$FF,0,0,$FF)
call SetUnitVertexColor(YTE,$FF,0,0,$FF)
call SetUnitVertexColor(YUE,$FF,0,0,$FF)
call SetUnitVertexColor(YVE,$FF,0,0,$FF)
else
call SetUnitVertexColor(YSE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(YTE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(YUE,$FF,$FF,$FF,$FF)
call SetUnitVertexColor(YVE,$FF,$FF,$FF,$FF)
endif
endif
endif
endif
set t=null
set CP7=null
set YSE=null
set YTE=null
set YUE=null
set YVE=null
set DA8=null
return false
endfunction
function YZE takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real LN9=GetUnitX(CP7)
local real LO9=GetUnitY(CP7)
local real x
local real y
local unit YSE
local unit YTE
local unit YUE
local unit YVE
local real a=GetUnitFacing(CP7)
local unit DA8=null
local integer YXE=GetHandleId(CP7)
local player pl=GetOwningPlayer(CP7)
set LP4="YZE"
call P37(DA8)
call UnitAddAbility(DA8,1093808469)
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)-GetUnitState(CP7,UNIT_STATE_LIFE)*.15)
call Z27(CP7,1093753394)
call UnitMakeAbilityPermanent(CP7,true,1093753394)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753394,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093753176,false)
set x=GetUnitX(CP7)+$C8*Cos(bj_DEGTORAD*360*4/4.*-1.)
set y=GetUnitY(CP7)+$C8*Sin(bj_DEGTORAD*360*4/4.*-1.)
set YSE=CreateUnit(GetOwningPlayer(CP7),1747993429,x,y,360*4/4.*-1.)
set x=GetUnitX(CP7)+$C8*Cos(bj_DEGTORAD*360*3/4.*-1.)
set y=GetUnitY(CP7)+$C8*Sin(bj_DEGTORAD*360*3/4.*-1.)
set YTE=CreateUnit(GetOwningPlayer(CP7),1747993429,x,y,360*3/4.*-1.)
set x=GetUnitX(CP7)+$C8*Cos(bj_DEGTORAD*360*2/4.*-1.)
set y=GetUnitY(CP7)+$C8*Sin(bj_DEGTORAD*360*2/4.*-1.)
set YUE=CreateUnit(GetOwningPlayer(CP7),1747993429,x,y,360*2/4.*-1.)
set x=GetUnitX(CP7)+$C8*Cos(bj_DEGTORAD*360*1/4.*-1.)
set y=GetUnitY(CP7)+$C8*Sin(bj_DEGTORAD*360*1/4.*-1.)
set YVE=CreateUnit(GetOwningPlayer(CP7),1747993429,x,y,360*1/4.*-1.)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function YRE))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(393),(YSE))
call SaveUnitHandle(C7,(JZ7),(394),(YTE))
call SaveUnitHandle(C7,(JZ7),(395),(YUE))
call SaveUnitHandle(C7,(JZ7),(396),(YVE))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
if(WQ7(pl))then
call QG7(YXE,"Bird4",YVE)
endif
set CP7=null
set YSE=null
set YTE=null
set YUE=null
set YVE=null
set DA8=null
endfunction
function YAE takes nothing returns boolean
if GetSpellAbilityId()==1093753176 then
call YZE()
endif
return false
endfunction
function Q38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YAE))
set t=null
endfunction
function YBE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093815345)
set LP4="YBE"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>4 then
call UnitRemoveAbility(J67,1093815352)
call RK7(J67,"IcarusDive|Disarmed")
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
call D38(CP7,J67,1,20*DB8)
set t=null
set CP7=null
return false
endfunction
function YCE takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="YCE"
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YBE))
call TriggerRegisterDeathEvent(t,J67)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",J67,"chest")))
call UnitAddAbility(J67,1093815352)
call UnitMakeAbilityPermanent(J67,true,1093815352)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815352,false)
call RI7(J67,"IcarusDive|Disarmed")
set CP7=null
set J67=null
set t=null
endfunction
function Y3E takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local group g=ZI7()
set LP4="Y3E"
call DestroyEffect(AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y))
call GroupEnumUnitsInRange(g,x,y,275+25,Condition(function LV7))
call ForGroup(g,function YCE)
call ZH7(g)
set g=null
set CP7=null
endfunction
function Y6E takes nothing returns boolean
if GetSpellAbilityId()==1093815345 then
call Y3E()
endif
return false
endfunction
function QB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y6E))
set t=null
endfunction
function YLE takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit hn=QA7(RP7,"Hero")
local unit DA8=QA7(RP7,"Caster")
set LP4="YLE"
call Q47(RP7)
call RN7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call KillUnit(DA8)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",hn,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",hn,"origin"))
call UnitRemoveAbility(hn,1093687875)
call UnitRemoveAbility(hn,1110454358)
set t=null
set hn=null
set DA8=null
return false
endfunction
function Y1E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit hn=QA7(RP7,"Hero")
local unit DA8=QA7(RP7,"Caster")
set LP4="Y1E"
call Q47(RP7)
call RN7(t)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl",hn,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",hn,"origin"))
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,18-.1,false)
call TriggerRegisterDeathEvent(t,hn)
call TriggerAddCondition(t,Condition(function YLE))
call QG7(RP7,"Hero",hn)
call QG7(RP7,"Caster",DA8)
set t=null
set hn=null
set DA8=null
return false
endfunction
function Y0E takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit Y5E=CreateUnit(GetOwningPlayer(hn),1697657174,0,0,0)
local real Y2E=18
set LP4="Y0E"
call Z27(Y5E,1093687875)
call UnitApplyTimedLife(Y5E,1112820806,Y2E)
call AK7(hn,Y2E,$AF)
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function Y1E))
call QG7(RP7,"Hero",hn)
call QG7(RP7,"Caster",Y5E)
set t=null
set Y5E=null
set hn=null
endfunction
function Y_E takes nothing returns boolean
if GetSpellAbilityId()==1093679411 and GetUnitTypeId(GetTriggerUnit())==1429221432 then
call Y0E()
endif
return false
endfunction
function PB8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PB8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y_E))
set t=null
endfunction
function OT9 takes nothing returns nothing
local unit p5=B2
local unit m5=C2
local unit DA8=QA7(GetHandleId(p5),"FeralHeartCaster")
set LP4="OT9"
call QG7(GetHandleId(m5),"FeralHeartCaster",DA8)
call SetUnitOwner(DA8,GetOwningPlayer(m5),true)
set p5=null
set m5=null
set DA8=null
endfunction
function AD8 takes nothing returns nothing
local unit ZO7=IS4
local unit DA8=QA7(GetHandleId(ZO7),"FeralHeartCaster")
set LP4="AD8"
if DA8!=null and GetUnitTypeId(DA8)==1697657174 then
call RemoveUnit(DA8)
endif
set ZO7=null
set DA8=null
endfunction
function Z4E takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if DA8!=null and GetUnitTypeId(DA8)==1697657174 then
if A47(CP7)==false then
call SetUnitX(DA8,GetUnitX(CP7))
call SetUnitY(DA8,GetUnitY(CP7))
endif
endif
set t=null
set DA8=null
set CP7=null
return false
endfunction
function Z7E takes unit ZO7,boolean XY9 returns nothing
local integer DB8=GetUnitAbilityLevel(ZO7,1093677893)
local unit DA8
local trigger t
local integer JZ7
set LP4="FeralHeart"
if DB8==1 or XY9 then
set DA8=CreateUnit(GetOwningPlayer(ZO7),1697657174,0,0,0)
call Z27(DA8,1093687882)
call QG7(GetHandleId(ZO7),"FeralHeartCaster",DA8)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerAddCondition(t,Condition(function Z4E))
call TriggerRegisterTimerEvent(t,.2,true)
call SaveUnitHandle(C7,(JZ7),(2),(ZO7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
else
set DA8=QA7(GetHandleId(ZO7),"FeralHeartCaster")
endif
if DB8==2 then
call UnitRemoveAbility(DA8,1093687882)
call Z27(DA8,1093687881)
elseif DB8==3 then
call UnitRemoveAbility(DA8,1093687882)
call UnitRemoveAbility(DA8,1093687881)
call Z27(DA8,1093687880)
elseif DB8==4 then
call UnitRemoveAbility(DA8,1093687882)
call UnitRemoveAbility(DA8,1093687881)
call UnitRemoveAbility(DA8,1093687880)
call Z27(DA8,1093687879)
endif
set DA8=null
endfunction
function Z8E takes nothing returns boolean
if GetLearnedSkill()==1093677893 and IsUnitIllusion(GetTriggerUnit())==false then
call Z7E(GetTriggerUnit(),false)
endif
return false
endfunction
function PC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PC8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Z8E))
set t=null
endfunction
function Z9E takes nothing returns nothing
local unit hn=GetTriggerUnit()
local unit Y5E
local integer i=1
local boolean ZDE=WM7(GetOwningPlayer(hn))
local player p
local integer ZEE
local integer ZFE
local integer ZGE=GetUnitAbilityLevel(hn,1093687878)
set LP4="Z9E"
if ZGE==1 then
set ZEE=1093742644
set ZFE=1093742647
elseif ZGE==2 then
set ZEE=1093742641
set ZFE=1093742646
elseif ZGE==3 then
set ZEE=1093742642
set ZFE=1093742645
elseif ZGE==4 then
set ZEE=1093742643
set ZFE=1093742648
endif
loop
exitwhen i>5
if ZDE then
set p=Y7[i]
else
set p=Z7[i]
endif
set Y5E=CreateUnit(p,1697657174,0,0,0)
call Z27(Y5E,ZEE)
call Z27(Y5E,ZFE)
call UnitApplyTimedLife(Y5E,1112820806,$C)
set i=i+1
endloop
set hn=null
set Y5E=null
set p=null
endfunction
function ZHE takes nothing returns boolean
if GetSpellAbilityId()==1093687878 then
call Z9E()
endif
return false
endfunction
function P38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZHE))
set t=null
endfunction
function ZIE takes nothing returns nothing
call B98()
call BE8()
endfunction
function NC9 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=OW7(S2I(SubString(VH,3,StringLength(VH))))
set LP4="NC9"
if((pl!=null)and(WR7(pl))and(IsPlayerInForce(pl,QW4)))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r creepstats:   K: "+I2S(S7[GetPlayerId(pl)])+"   D: "+I2S(T7[GetPlayerId(pl)]))
endif
set pl=null
endfunction
function N39 takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=OW7(S2I(SubString(VH,3,StringLength(VH))))
set LP4="N39"
if((pl!=null)and(WR7(pl))and(IsPlayerInForce(pl,QW4)))then
if(G7[GetPlayerId(pl)]==null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r has no Hero")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r movespeed is "+I2S(R2I(GetUnitMoveSpeed(G7[GetPlayerId(pl)]))))
endif
endif
set pl=null
endfunction
function ZJE takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetTriggerPlayer()))and(not IsUnitIllusion(GetFilterUnit()))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not O37(GetFilterUnit()))and(OV7(GetFilterUnit())))!=null
endfunction
function ZKE takes unit j5,unit m5 returns boolean
if((GetUnitAbilityLevel(j5,1093678665)!=0)and(Bz>hq[16+GetPlayerId(GetOwningPlayer(j5))]))then
set L84=$C8+($C8*GetUnitAbilityLevel(j5,1093678665))
return((ZR7(j5,m5,40/.03,0,L84)!=null)and(ZN7(j5,m5,GetLocationX(DF7),GetLocationY(DF7),125,Condition(function L_7)))and(IssuePointOrderByIdLoc(j5,$D0278,DF7)))
endif
return false
endfunction
function ZME takes unit j5,unit m5 returns boolean
if((GetUnitAbilityLevel(j5,1093684280)!=0)and(Bz>hq[32+GetPlayerId(GetOwningPlayer(j5))]))then
return((ZR7(j5,m5,30/.035,0,3000.)!=null)and(ZN7(j5,m5,GetLocationX(DF7),GetLocationY(DF7),$8C,Condition(function uj)))and(IssuePointOrderByIdLoc(j5,$D02B6,DF7)))
endif
return false
endfunction
function ZNE takes unit it,unit m5,boolean ZOE returns boolean
local integer i1=GetUnitTypeId(it)
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="(AI_Disable)"+LP4
if not(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
return false
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if(i1==1211117653)then
set J4=(((GetUnitState(it,UNIT_STATE_MANA))>290)and(WZ7(it,1093686861)or(Bz>TB4[O5]))and(W27(it,A14,A04,A54,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5))))or(((GetUnitState(it,UNIT_STATE_MANA))>350)and(WZ7(it,1093686859)or(Bz>TB4[O5]))and(Bz>TB4[96+O5])and W27(it,A04,A04,A14,1093686859)and IssuePointOrderById(it,$D020B,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786505)then
set J4=(IssueTargetOrderById(it,$D00D9,m5))
elseif(i1==1429221424)then
set J4=PW7(it,$D024B,1093687351,m5)
elseif(i1==1432646245)then
set J4=((i2(m5))or(ZOE))and(PW7(it,$D007F,1093677640,m5))
elseif(i1==1430468913)then
set J4=(IsUnitInRange(it,m5,200.))and(PC7(it,$D009F,1093810507))
elseif(i1==1430467634)then
set J4=((i2(m5))or(ZOE))and(PW7(it,$D0107,1093679412,m5))
elseif(i1==1313026096)then
set J4=PW7(it,$D007F,1095267426,m5)
elseif(i1==1211117617)then
set J4=PW7(it,$D02B6,1093744944,m5)
elseif(i1==1430466872)then
set J4=(PW7(it,$D024B,1093687349,m5))or((not ZOE)and(PW7(it,$D0216,1093684558,m5)))
elseif(i1==1164666213)then
set J4=PW7(it,$D0100,1093678679,m5)
elseif(i1==1430466865)then
set J4=(IsUnitInRange(it,m5,300.))and(PC7(it,$D009F,1093810508))
elseif(i1==1429221441)then
set J4=PW7(it,$D0107,1093678389,m5)
elseif(i1==1332766568)then
set J4=(not ZOE)and(i2(m5))and(IsUnitInRange(it,m5,500.))and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1429221451)then
set J4=IssueTargetOrderById(it,$D00FA,m5)
elseif(i1==1429221446)then
set J4=((IsUnitInRange(it,m5,300.))and(PY7(it,$D0200,1093682764,1093747544,m5)))or(((i2(m5))or(ZOE))and(ZKE(it,m5)))
elseif(i1==1429221445)then
set J4=(GetUnitLifePercent(m5)<60.)and(PY7(it,$D007F,1093678647,1093679184,m5))
elseif(i1==1160786241)then
set J4=PW7(it,$D00FA,1093684813,m5)
elseif(i1==1429221456)then
set J4=(i2(m5))and(PW7(it,$D0097,1093685066,m5))
elseif(i1==1430468406)then
set J4=(not ZOE)and(i2(m5))and(PW7(it,$D0270,kS(it),m5))
elseif(i1==1311780946)then
set J4=PW7(it,$D0208,1093685825,m5)
elseif(i1==1211117646)then
set J4=(i2(m5))and(PW7(it,$D010E,1093685573,m5))
elseif(i1==1160785973)then
set J4=((i2(m5))or(ZOE))and(PW7(it,$D0107,1093678130,m5))
elseif(i1==1332963428)then
set J4=((not ZOE)and(PW7(it,$D0103,1093678169,m5)))or((GetUnitState(it,UNIT_STATE_MANA)>hq[272+GetPlayerId(GetOwningPlayer(it))])and(PW7(it,$D0200,1093677649,m5)))
elseif(i1==1332109682)then
set J4=(IsUnitInRange(it,m5,500.))and(PC7(it,$D026C,1093810505))
elseif(i1==1315988077)then
set J4=(IsUnitInRange(it,m5,200.))and(PC7(it,$D0080,1093678669))
elseif(i1==1211117616)then
set J4=((IsUnitInRange(it,m5,200.))and(PC7(it,$D009F,1093677139)))or((i2(m5))and(PW7(it,$D0107,1093677132,m5)))
elseif(i1==1315074670)then
set J4=(not ZOE)and(i2(m5))and(PW7(it,$D0270,1093685570,m5))
elseif(i1==1215063922)then
set J4=(IsUnitInRange(it,m5,300.))and(PW7(it,$D007F,1093681490,m5))
elseif(i1==1315007329)then
set J4=((i2(m5))or(ZOE))and(PW7(it,$D007F,1093677108,m5))
elseif(i1==1332898670)then
set J4=(PW7(it,$D0216,1093685848,m5))or((IsUnitInRange(it,m5,400)or BK8(m5))and(PW7(it,$D0200,1093677136,m5)))
elseif(i1==1215128178)then
set J4=(i2(m5))and(PW7(it,$D007F,1093683779,m5))
elseif(i1==1215723364)then
set J4=PW7(it,$D007F,1093677633,m5)
elseif(i1==1433105516)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1212363833)then
set J4=(not ZOE)and(((i2(m5))and(IssueImmediateOrderById(it,$D0278)))or(PW7(it,$D007F,1093809220,m5)))
elseif(i1==1214931305)then
set J4=PW7(it,$D00CB,1093678147,m5)
elseif(i1==1311787088)then
set J4=PW7(it,$D0278,1093750087,m5)
elseif(i1==1212365106)then
set J4=(i2(m5))and(PW7(it,$D0079,1093685831,m5))
elseif(i1==1211117620)then
set J4=PX7(it,$D0108,1093677623,ZT7(it,m5,.95,600.))
elseif(i1==1333027688)then
set J4=PW7(it,$D0278,1093686091,m5)
elseif(i1==1332179560)then
set J4=((i2(m5))or(ZOE))and(PW7(it,$D02B6,1093742660,m5))
elseif(i1==1432580716)then
set J4=PW7(it,$D0079,1093684300,m5)
elseif(i1==1215130471)then
set J4=PW7(it,$D007F,S27(it),m5)or(R87(GetHandleId(it),"AI|Magi2Blast")and PW7(it,$D0278,1093815121,m5))
elseif(i1==1160786000)then
set J4=PX7(it,$D0264,1093685046,ZR7(it,m5,2000.,.65,1100.))
elseif(i1==1311781206)then
set J4=ZME(it,m5)
elseif(i1==1311780930)then
set J4=(i2(m5))and((IsUnitInRange(it,m5,350.))and(IssueImmediateOrderById(it,$D0278)))
elseif(i1==1211119187)then
set J4=PW7(it,$D0079,1093743414,m5)
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set J4=(RG7(it,"AlcheBrew"))and(IssueTargetOrderById(it,$D0278,m5))
elseif(i1==1211117651)then
set J4=(PW7(it,$D0097,1093743698,m5))
elseif(i1==1311786311)then
set J4=(not OV7(m5))and(PW7(it,$D0097,1093743178,m5))
elseif(i1==1328558390)then
set J4=(PW7(it,$D0097,1093744975,m5))or(PW7(it,$D00FA,1093744982,m5))
elseif(i1==1160786504)then
set J4=PW7(it,$D0097,1093751608,m5)
elseif(i1==1160786520)then
set J4=PW7(it,$D00F6,1093809990,m5)
elseif(i1==1160786507)then
set J4=(not ZOE)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
if(not J4)and(PD7(it,SU[P1]))then
set J4=(not ZOE)and((i2(m5))or(O37(it)))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(it,SU[D44]))then
set J4=(not ZOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(it,SU[R3]))then
set J4=(not ZOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(it,SU[DQ4])and(BI8(m5)==false)and(XT7(m5)==false))then
set J4=(not ZOE)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(it,SU[DO4]))then
set J4=(not ZOE)and(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if(i1==1160786520)and(not J4)and(hq[816+O5]>Bz)then
set G0[288+O5]=true
set J4=ZNE(it,m5,ZOE)
endif
return J4
endfunction
function ZPE takes unit it,boolean ZQE returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="(Tqv)"+LP4
set GZ[512+O5]=ZQE
if(Q14[64+O5]!=null)then
call TriggerExecute(Q14[64+O5])
endif
endfunction
function ZRE takes nothing returns boolean
return((GetFilterUnit()!=bj_lastLoadedUnit)and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(OA7(GetFilterUnit()))and(not O37(GetFilterUnit())))or((GetWidgetLife(GetFilterUnit())>0)and(S37(GetFilterUnit())))))!=null
endfunction
function ZSE takes integer O5,unit m5,boolean ZTE,boolean ZUE returns nothing
local unit MQ7=null
local integer RX7=0
local boolean J4=false
if not(G0[$80+O5]or GZ[$D0+O5]or ZTE)then
if(h4[O5]==null)then
call ZPE(G7[O5],false)
endif
return
elseif h4[O5]==m5 and(Bz<hq[928+O5])then
return
endif
set h4[O5]=m5
set hq[928+O5]=Bz+1
call GroupClear(H8)
set bj_lastLoadedUnit=G7[O5]
if ZUE then
call GroupEnumUnitsInRange(H8,GetUnitX(m5),GetUnitY(m5),$960,Condition(function ZRE))
else
call GroupEnumUnitsInRange(H8,GetUnitX(m5),GetUnitY(m5),$4B0,Condition(function ZRE))
endif
set J4=(QX4[O5]and ZNE(G7[O5],m5,false))
loop
set MQ7=FirstOfGroup(H8)
exitwhen MQ7==null
call GroupRemoveUnit(H8,MQ7)
set RX7=GetPlayerId(GetOwningPlayer(MQ7))
if RX7!=0 and RX7!=6 and RX7<$C and(h4[RX7]==null or OA7(h4[RX7])==false)and QX4[O5]then
if(IsUnitType(MQ7,UNIT_TYPE_HERO))then
if(not GZ[$A0+O5])then
set h4[RX7]=m5
set hq[928+RX7]=Bz+1
if is(MQ7)then
call IssueTargetOrderById(MQ7,$D000F,m5)
set J4=(J4 or(ZNE(MQ7,m5,false)))
endif
endif
elseif is(MQ7)then
call IssueTargetOrderById(MQ7,$D000F,m5)
endif
endif
endloop
if(is(G7[O5]))then
call IssueTargetOrderById(G7[O5],$D000F,m5)
endif
set MQ7=null
endfunction
function ZVE takes integer O5,boolean ZWE returns boolean
local integer i=0
local integer j=0
set h4[O5]=null
set hq[928+O5]=0
set hq[480+O5]=0
if ZWE and(G0[$90+O5])and(not O37(G7[O5]))then
set i=1
set j=-1
set L84=$F423F
loop
exitwhen i>$B
if IsPlayerAlly(Player(i),Player(O5))and h4[i]!=null and IsUnitInRange(G7[O5],h4[i],1100.)then
set L94=GetWidgetLife(h4[i])
if j==-1 or L94<L84 then
set j=i
set L84=L94
endif
endif
endloop
if(j==-1)then
set bj_lastLoadedUnit=G7[O5]
set bj_lastReplacedUnit=VY7(800.,G7[O5])
if(bj_lastReplacedUnit!=null)then
set h4[O5]=bj_lastReplacedUnit
endif
else
set h4[O5]=h4[j]
endif
endif
if h4[O5]!=null then
call BJDebugMsg("Greenpa:  aiCancelKill -respond "+GetUnitName(G7[O5])+" h4[O5]!=null")
call ZSE(O5,h4[O5],false,false)
endif
return false
endfunction
function ZXE takes nothing returns nothing
local unit it=GetEnumUnit()
local unit m5=G7[GetPlayerId(GetTriggerPlayer())]
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local boolean J4
set LP4="ZXE"
set GZ[64+O5]=true
if(i1==1430466609)then
set J4=(IsUnitInRange(it,m5,300.))and(PC7(it,$D022E,1093678145))
elseif(i1==1430467634)then
set J4=(P87(500.,m5,Condition(function k8))>0)and(PC7(it,$D022E,1093750608))
elseif(i1==1211117653)then
set J4=(IsUnitInRange(it,m5,650.))and W27(it,A04,A04,A54,1093686865)and PW7(it,$D020A,1093686865,m5)
elseif(i1==1160786505)then
set J4=(IsUnitInRange(it,m5,560.))and(IssueImmediateOrderById(it,$D0272))
elseif(i1==1164666213)then
set J4=(IsUnitInRange(it,m5,500.))and(P87(500.,m5,Condition(function k8))>0)and(PC7(it,$D0272,1093677877))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
set J4=((GetUnitLifePercent(it)-30.)>GetUnitLifePercent(m5))and(PW7(it,$D00DD,1093678929,m5))
elseif(i1==1433168227)then
set J4=PW7(it,$D0101,1093679186,m5)
elseif(i1==1430466865)then
set J4=PW7(it,$D0062,1093677879,m5)
elseif(i1==1429221432)then
set J4=(IsUnitInRange(it,m5,500.))and(PC7(it,$D0278,1093687878))
elseif(i1==1432642913)then
set J4=(IssueTargetOrderById(it,$D0097,m5))or(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1332766568)then
set J4=(IsUnitInRange(it,m5,400.))and(P87(400.,m5,Condition(function k8))>0)and(IssueImmediateOrderById(it,$D0080))
elseif(i1==1429221445)then
set J4=(IsUnitInRange(it,m5,500.))and(PC7(it,$D022E,1093678422))
elseif(i1==1211117617)then
set J4=(IsUnitInRange(it,m5,430.))and(PC7(it,$D022E,1093814611))
elseif(i1==1311787088)then
set J4=(IsUnitInRange(it,m5,760.))and(PW7(it,$D0084,1093748817,m5))
elseif(i1==1211117640)then
set J4=(IsUnitInRange(it,m5,400.))and(P87(400.,m5,Condition(function k8))>0)and(IssuePointOrderById(it,$D0079,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786241)then
if((GetUnitManaPercent(it)>50.)and(IsUnitInRange(it,m5,300.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093684805,true)
set J4=(GetUnitAbilityLevel(it,1110455882)==0)and(IssueImmediateOrderById(it,$D00D1))
endif
elseif(i1==1160786243)then
set J4=IssueTargetOrderById(it,$D0118,m5)
elseif(i1==1311781207)then
set J4=((GetUnitLifePercent(it)<40.)and(IssueTargetOrderById(it,$D0238,m5)))or(IssueTargetOrderById(it,$D0105,m5))
elseif((i1==1211117650)or(i1==1211119433))then
set IM4=it
set J4=(P87(1000.,it,Condition(function ny))>2)and(IssueTargetOrderById(it,$D02DB,m5))
elseif(i1==1211117646)then
set J4=(PW7(it,$D0085,1093685815,m5))or((P87(350.,m5,Condition(function k8))>0)and(IssueTargetOrderById(it,$D007F,m5)))
elseif(i1==1211117624)then
set J4=(IsUnitInRange(it,m5,500.))and(P87(500.,m5,Condition(function k8))>0)and(PC7(it,$D022E,1093683024))
elseif(i1==1433631084)then
set J4=(P87(500.,m5,Condition(function k8))>0)and(PW7(it,$D0079,1093678644,m5))
elseif(i1==1214345830)then
set J4=PW7(it,$D0101,1093679182,m5)
elseif(i1==1215723364)then
set J4=(IsUnitInRange(it,m5,500.))and(P87(500.,m5,Condition(function k8))>0)and(PW7(it,$D02BD,1093744463,m5))
elseif(i1==1164799855)then
set J4=(IsUnitInRange(it,m5,500.))and(PC7(it,$D024C,1093677378))
elseif(i1==1433105516)then
set J4=(P87(500.,m5,Condition(function k8))>0)and(IssueTargetOrderById(it,$D0278,m5))
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set J4=PW7(it,$D00D9,1093742898,m5)
elseif(i1==1212363833)then
set J4=(IsUnitInRange(it,m5,500.))and(P87(500.,m5,Condition(function k8))>0)and(PC7(it,$D009B,1093678643))
elseif(i1==1212365106)then
set J4=(P87(500.,m5,Condition(function k8))>0)and(PW7(it,$D0079,1093685831,m5))
elseif(i1==1211117633)then
set J4=(GetUnitLifePercent(m5)<50.)and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1211117620)then
set J4=(P87(150.,m5,Condition(function k6))>0)and(PX7(it,$D0108,1093677623,ZT7(it,m5,.95,600.)))
elseif(i1==1432580716)then
set J4=(P87(400.,m5,Condition(function k8))>0)and(PW7(it,$D0079,1093684300,m5))
elseif(i1==1214344551)then
set J4=((K6(m5))and(IssueTargetOrderById(it,$D0065,m5)))
if not J4 then
set J4=IssueTargetOrderById(it,$D0118,m5)
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set J4=(P87(400.,m5,Condition(function k8))>0)and(PW7(it,$D0079,1093683532,m5))
elseif(i1==1211117649)then
set J4=(GetUnitLifePercent(m5)<95.)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
if(PD7(it,SU[R1]))then
set J4=(IsUnitInRange(it,m5,300.))and(UnitUseItem(it,PH7(it,SU[R1])))
elseif(PD7(it,SU[F44]))then
set J4=(IsUnitInRange(it,m5,590.))and(UnitUseItem(it,PH7(it,SU[F44])))
elseif(PD7(it,SU[D94]))then
set J4=(IsUnitInRange(it,m5,590.))and(UnitUseItem(it,PH7(it,SU[D94])))
elseif(PD7(it,SU[Z3]))then
set J4=(IsUnitInRange(it,m5,500.))and(UnitUseItem(it,PH7(it,SU[Z3])))
endif
endif
if((not J4)and(GetHeroLevel(it)>5))then
set m5=P47(800.,PU7(m5),Condition(function k6))
if(m5!=null)then
if(i1==1160786506)and(IsUnitInRange(it,m5,895.))then
if(BM7(it,m5))or(not IsUnitInRange(m5,it,800))then
call ZT7(it,m5,1.2,900)
else
call MoveLocation(DF7,GetUnitX(m5),GetUnitY(m5))
endif
set J4=(NW7(O5)and(J8(O5,IssuePointOrderByIdLoc(it,$D0079,DF7))))
endif
if(not J4)then
call IssueTargetOrderById(it,$D000F,m5)
endif
if(h4[O5]==null)then
call ZSE(O5,m5,false,false)
endif
endif
endif
set GZ[64+GetPlayerId(GetOwningPlayer(it))]=false
set m5=null
set it=null
endfunction
function N69 takes nothing returns nothing
if((G7[GetPlayerId(GetTriggerPlayer())]!=null)and(OA7(G7[GetPlayerId(GetTriggerPlayer())])))then
call ju(J97(1100.,PU7(G7[GetPlayerId(GetTriggerPlayer())]),Condition(function ZJE)),function ZXE)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,8.,"AI Allies nearby will assist you")
set hq[464+GetPlayerId(GetTriggerPlayer())]=Bz+5.
endif
endfunction
function ZYE takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function ZZE takes nothing returns nothing
if(GetWidgetLife(GetEnumUnit())>.405)then
call SetWidgetLife(GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)+8.)
else
call GroupRemoveUnit(ij,GetEnumUnit())
endif
endfunction
function ZAE takes nothing returns nothing
call ForGroup(ij,function ZZE)
call SetWidgetLife(JE4,GetUnitState(JE4,UNIT_STATE_LIFE)+12.)
call SetWidgetLife(JC4,GetUnitState(JC4,UNIT_STATE_LIFE)+12.)
endfunction
function RV9 takes nothing returns nothing
local trigger t=CreateTrigger()
local boolexpr Ig=Condition(function ZYE)
set LP4="RV9"
set ij=ZI7()
call GroupEnumUnitsInRect(ij,bj_mapInitialPlayableArea,Ig)
call TriggerRegisterTimerEventPeriodic(t,1.)
call TriggerAddAction(t,function ZAE)
set XT=true
call DestroyBoolExpr(Ig)
set Ig=null
endfunction
function RW9 takes nothing returns nothing
set ZT=true
call EnableTrigger(QB4)
endfunction
function ZBE takes nothing returns boolean
return GetDyingUnit()==G7[GetPlayerId(GetTriggerPlayer())]
endfunction
function ZCE takes nothing returns nothing
local integer O5=1
local integer i
local integer a
loop
exitwhen O5>$B
if WQ7(Player(O5))then
set a=FU[O5]-X_4[64+O5]
if a>0 then
set i=1
loop
exitwhen i>a
set X_4[96+O5]=R2I(Bz+CS4)
if LT then
call SetPlayerHandicapXPBJ(Player(O5),X_4[16+O5]+(GetPlayerHandicapXPBJ(Player(O5))-X_4[16+O5])*.75)
endif
if EU then
set X_4[48+O5]=X_4[32+O5]+R2I((X_4[48+O5]-X_4[32+O5])*.75)
endif
set i=i+1
endloop
set X_4[64+O5]=FU[O5]
endif
endif
set O5=O5+1
endloop
endfunction
function Z3E takes nothing returns nothing
local player p=GetOwningPlayer(GetDyingUnit())
local player pl=GetOwningPlayer(GetKillingUnit())
if IsUnitInForce(GetDyingUnit(),QW4)and GetDyingUnit()!=GetKillingUnit()then
set X_4[96+GetPlayerId(p)]=R2I(Bz+CS4)
if LT then
if GetPlayerHandicapXP(p)*100<X_4[16+GetPlayerId(p)]then
call SetPlayerHandicapXP(p,X_4[16+GetPlayerId(p)]*.01)
else
call SetPlayerHandicapXP(p,GetPlayerHandicapXP(p)+.35)
if GetPlayerHandicapXP(p)*100>(X_4[16+GetPlayerId(p)]+2.*100)then
call SetPlayerHandicapXP(p,(X_4[16+GetPlayerId(p)])*.01+2.)
endif
endif
endif
if EU then
if X_4[48+GetPlayerId(p)]<X_4[32+GetPlayerId(p)]then
set X_4[48+GetPlayerId(p)]=X_4[32+GetPlayerId(p)]
else
set X_4[48+GetPlayerId(p)]=X_4[48+GetPlayerId(p)]+5
if X_4[48+GetPlayerId(p)]>72 then
set X_4[48+GetPlayerId(p)]=72
endif
endif
endif
endif
if GetKillingUnit()!=null and IsUnitInForce(GetKillingUnit(),QW4)and GetDyingUnit()!=GetKillingUnit()then
set X_4[96+GetPlayerId(pl)]=R2I(Bz+CS4)
if LT then
call SetPlayerHandicapXPBJ(pl,X_4[16+GetPlayerId(pl)]+(GetPlayerHandicapXPBJ(pl)-X_4[16+GetPlayerId(pl)])*.33)
endif
if EU then
set X_4[48+GetPlayerId(pl)]=X_4[32+GetPlayerId(pl)]+R2I((X_4[48+GetPlayerId(pl)]-X_4[32+GetPlayerId(pl)])*.33)
endif
endif
call TimerStart(CQ4,.5,false,function ZCE)
set p=null
set pl=null
endfunction
function Z6E takes nothing returns nothing
local integer O5=1
local player p
if Bz<300+CS4+Q94 then
return
endif
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if IsPlayerInForce(Player(O5),QW4)then
if(Bz>X_4[96+O5])then
set p=Player(O5)
if LT then
if GetPlayerHandicapXP(p)*100<X_4[16+GetPlayerId(p)]then
call SetPlayerHandicapXP(p,X_4[16+GetPlayerId(p)]*.01)
else
call SetPlayerHandicapXP(p,GetPlayerHandicapXP(p)+.35/2)
if GetPlayerHandicapXP(p)*100>(X_4[16+GetPlayerId(p)]+2.*100)then
call SetPlayerHandicapXP(p,(X_4[16+GetPlayerId(p)])/100+2.)
endif
endif
endif
if EU then
if X_4[48+GetPlayerId(p)]<X_4[32+GetPlayerId(p)]then
set X_4[48+GetPlayerId(p)]=X_4[32+GetPlayerId(p)]
else
set X_4[48+GetPlayerId(p)]=X_4[48+GetPlayerId(p)]+5/2
if X_4[48+GetPlayerId(p)]>72 then
set X_4[48+GetPlayerId(p)]=72
endif
endif
endif
set X_4[96+O5]=R2I(Bz+CS4)
endif
endif
set O5=O5+1
endloop
endfunction
function ZLE takes nothing returns nothing
local integer i
local integer m
local integer n
local trigger t=null
set CP4=CreateTrigger()
call ky(CP4,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(CP4,Condition(function ZBE))
call TriggerAddAction(CP4,function Z3E)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddAction(t,function Z6E)
set t=null
set CQ4=CreateTimer()
endfunction
function RX9 takes nothing returns nothing
if CP4==null then
call ZLE()
endif
set LT=true
endfunction
function RY9 takes nothing returns nothing
if CP4==null then
call ZLE()
endif
set EU=true
endfunction
function Z1E takes integer Z0E,integer Z5E,integer Z2E,integer Z_E,integer A4E,integer A7E,integer A8E,integer A9E,integer ADE,integer AEE,integer AFE,integer AGE,integer AHE,integer AIE,integer AJE,integer AKE,integer AME returns nothing
call SaveInteger(CU4,Z0E,0,Z5E)
call SaveInteger(CU4,Z0E,1,Z2E)
call SaveInteger(CU4,Z0E,2,Z_E)
call SaveInteger(CU4,Z0E,3,A4E)
call SaveInteger(CU4,Z0E,4,A7E)
call SaveInteger(CU4,Z0E,5,A8E)
call SaveInteger(CU4,Z0E,6,A9E)
call SaveInteger(CU4,Z0E,7,ADE)
call SaveInteger(CU4,Z0E,8,AEE)
call SaveInteger(CU4,Z0E,9,AFE)
call SaveInteger(CU4,Z0E,$A,AGE)
call SaveInteger(CU4,Z0E,$B,AHE)
call SaveInteger(CU4,Z0E,$C,AIE)
call SaveInteger(CU4,Z0E,$D,AJE)
call SaveInteger(CU4,Z0E,$E,AKE)
call SaveInteger(CU4,Z0E,$F,AME)
if(bj_forLoopBIndex<=2)then
set eY[336+16*bj_forLoopBIndex+bj_forLoopAIndex]=Z0E
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endfunction
function ANE takes unit MQ7,integer Z0E,integer APE returns integer
set bj_forLoopBIndex=GetUnitAbilityLevel(MQ7,Z0E)
if bj_forLoopBIndex==0 then
return 0
endif
return LoadInteger(CU4,Z0E,APE+bj_forLoopBIndex-1)
endfunction
function AQE takes integer ARE returns nothing
set bj_forLoopBIndex=0
if ARE==1215723364 then
call Z1E(1093677633,$A,$A,$A,$A,110,120,$82,$8C,500,500,500,500,0,0,0,0)
call Z1E(1093744463,$F,$F,$F,$F,40,40,40,40,$6A4,$6A4,$6A4,$6A4,0,0,0,0)
call Z1E(1094934883,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093683534,45,45,45,$B,100,$96,$C8,110,600,900,$4B0,600,125,125,125,125)
call Z1E(1093747031,$A,$A,$A,$B,100,$96,$C8,110,600,900,$4B0,600,125,125,125,125)
elseif ARE==1215128178 then
call Z1E(1093677616,2,2,2,2,65,70,75,80,700,700,700,700,500,500,500,500)
call Z1E(1093683779,6,6,6,6,75,95,115,$87,700,700,700,700,0,0,0,0)
call Z1E(1093684789,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093810503,90,90,90,0,$E1,325,450,0,0,0,0,0,0,0,0,0)
call Z1E(1093810504,90,90,90,0,$E1,325,450,0,0,0,0,0,0,0,0,0)
elseif ARE==1164799855 then
call Z1E(1093682263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682264,30,25,20,$F,65,65,65,65,700,700,700,700,0,0,0,0)
call Z1E(1093677378,45,45,45,45,125,$8C,$9B,$AA,0,0,0,0,300,300,300,300)
call Z1E(1093682265,0,0,0,0,55,60,65,0,550,550,550,0,0,0,0,0)
call Z1E(1093752642,0,0,0,0,55,60,65,0,715,715,715,0,0,0,0,0)
elseif ARE==1328558160 then
call Z1E(1093682766,$B,$B,$B,$B,$8C,$9B,$A0,$A5,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call Z1E(1093682998,$A,$A,$A,$A,100,100,100,100,600,700,800,900,0,0,0,0)
call Z1E(1093684056,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093683000,80,80,80,0,25,25,25,0,700,$44C,$5DC,0,$C8,$C8,$C8,0)
elseif ARE==1214931305 then
call Z1E(1093748025,$F,$F,$F,$F,100,120,$8C,$A0,700,700,700,700,400,400,400,400)
call Z1E(1093678147,$A,$A,$A,$A,115,125,$8C,$96,500,500,500,500,0,0,0,0)
call Z1E(1095262562,0,0,0,0,0,0,0,0,0,0,0,0,99999,99999,99999,99999)
call Z1E(1093677906,$96,120,90,0,$C8,400,600,0,500,500,500,500,0,0,0,0)
call Z1E(1093681494,$96,120,90,0,$C8,400,600,0,500,500,500,500,0,0,0,0)
elseif ARE==1211117617 then
call Z1E(1093744944,$F,$F,$F,$F,$8C,$8C,$8C,$8C,600,600,600,600,$FF,$FF,$FF,$FF)
call Z1E(1093677387,0,0,0,0,0,0,0,0,0,0,0,0,$C8,$C8,$C8,$C8)
call Z1E(1093814611,36,30,24,18,25,25,25,25,0,0,0,0,0,0,0,0)
call Z1E(1093752648,80,80,80,30,100,$96,$C8,25,0,0,0,0,0,0,0,0)
elseif ARE==1212363833 then
call Z1E(1093678643,40,40,40,40,70,80,90,100,$80,$80,$80,$80,$3E8,$3E8,$3E8,$3E8)
call Z1E(1093809220,$E,$E,$E,$E,75,85,95,115,650,650,650,650,0,0,0,0)
call Z1E(1093815125,19,16,$D,$A,80,90,100,110,0,0,0,0,0,0,0,0)
call Z1E(1093678933,$B4,120,60,0,100,100,100,0,500,500,500,500,0,0,0,0)
elseif ARE==1333027688 then
call Z1E(1093686091,$F,$F,$F,$F,125,$8C,$9B,$AA,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call Z1E(1093682252,5,5,5,5,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093682250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682248,$96,$82,110,9,$91,$CD,265,100,0,0,0,0,500,500,500,475)
call Z1E(1093750594,$96,$82,110,9,$91,$CD,265,100,0,0,0,0,500,500,500,475)
elseif ARE==1212365106 then
call Z1E(1093685831,$D,$D,$D,$D,75,80,85,90,425,425,425,425,$FA,275,300,325)
call Z1E(1093684025,20,$F,$A,5,50,50,50,50,700,700,700,700,0,0,0,0)
call Z1E(1093682266,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677130,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1311781199 then
call Z1E(1093681461,$B4,$A0,$8C,120,75,75,75,75,0,0,0,0,$C8,$C8,$C8,$C8)
call Z1E(1093748038,30,30,30,30,50,50,50,50,0,0,0,0,400,450,475,500)
call Z1E(1093681464,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093681479,0,0,0,0,25,25,25,0,0,0,0,0,0,0,0,0)
elseif ARE==1211117620 then
call Z1E(1093677382,9,9,9,9,90,105,125,$8C,800,800,800,800,275,275,275,275)
call Z1E(1093677623,7,7,7,7,90,100,110,125,600,600,600,600,$E1,$E1,$E1,$E1)
call Z1E(1093744728,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677392,70,60,50,9,280,420,680,120,600,600,600,700,0,0,0,500)
call Z1E(1093679450,70,60,50,9,280,420,640,120,900,900,900,700,0,0,0,500)
elseif ARE==1315070563 then
call Z1E(1093678407,30,28,26,24,110,110,110,110,0,0,0,0,$FA,$FA,$FA,$FA)
call Z1E(1093678135,60,60,60,60,80,100,120,$8C,350,350,350,350,0,0,0,0)
call Z1E(1093677131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684529,$82,120,110,9,$C8,275,350,75,450,450,450,600,0,0,0,0)
call Z1E(1093747032,110,100,90,9,$C8,275,350,75,450,450,450,600,0,0,0,0)
elseif ARE==1311781185 then
call Z1E(1093743692,20,18,16,$E,75,95,115,$87,800,800,800,800,350,350,350,350)
call Z1E(1093684314,0,0,0,0,$F,$F,$F,$F,600,600,600,600,0,0,0,0)
call Z1E(1093815892,36,28,20,$C,115,115,115,115,900,900,900,900,0,0,0,0)
call Z1E(1093684275,$8C,$8C,$8C,0,$FA,350,450,0,500,500,500,500,0,0,0,0)
elseif ARE==1214344551 then
call Z1E(1093677402,$A,8,6,4,90,80,70,60,300,300,300,300,0,0,0,0)
call Z1E(1093809742,16,$E,$C,$A,$8C,$8C,$8C,$8C,350,350,350,350,0,0,0,0)
call Z1E(1093815628,$F,$F,$F,$F,25,25,25,25,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093678938,70,70,70,0,$96,$AF,$C8,0,500,500,500,500,0,0,0,0)
elseif ARE==1433105516 then
call Z1E(1093683511,$F,$F,$F,$F,110,$82,$96,$A0,600,600,600,600,0,0,0,0)
call Z1E(1093744688,35,35,35,35,$AA,$AA,$AA,$AA,700,700,700,700,0,0,0,0)
call Z1E(1093681713,25,25,25,25,95,110,125,$8C,700,700,700,700,400,400,400,400)
call Z1E(1093747288,$C8,$BE,$B4,0,$FA,350,450,0,$FA,$FA,$FA,500,375,375,375,0)
elseif ARE==1214409837 then
call Z1E(1093679157,$A,$A,$A,$A,$96,$96,$96,$96,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call Z1E(1093742680,16,16,16,16,75,75,75,75,550,700,850,$3E8,0,0,0,0)
call Z1E(1093742898,19,18,17,16,25,45,65,85,900,900,900,900,0,0,0,0)
call Z1E(1093742932,80,70,60,120,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif ARE==1215657064 then
call Z1E(1093677913,6,6,6,6,75,75,75,75,0,0,0,0,385,385,385,385)
call Z1E(1093750841,$A,$A,$A,$A,45,55,65,75,0,0,0,0,0,0,0,0)
call Z1E(1095657827,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684291,25,25,25,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1215130471 then
call Z1E(1093678167,$C,$C,$C,$C,75,85,95,105,600,600,600,600,0,0,0,0)
call Z1E(1093677361,$F,$F,$F,$F,95,105,115,125,700,700,700,700,0,0,0,0)
call Z1E(1093679155,20,20,20,20,75,75,75,75,600,600,600,600,0,0,0,0)
call Z1E(1093679160,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093815121,20,$F,$F,0,400,$8C,$9B,0,600,$4B0,$4B0,500,0,0,0,0)
call Z1E(1093679172,6,6,6,6,$B9,$C3,$CD,$D7,600,600,600,600,0,0,0,0)
call Z1E(1093679169,8,8,8,8,$91,$9B,$A5,$AF,600,600,600,600,0,0,0,0)
call Z1E(1093679161,$A,$A,$A,$A,105,115,125,$87,600,600,600,600,0,0,0,0)
call Z1E(1093677126,$F,$F,$F,$F,95,105,115,125,700,700,700,700,450,450,450,450)
call Z1E(1093677396,$F,$F,$F,$F,95,105,115,125,700,700,700,700,300,300,300,300)
call Z1E(1093677111,$F,$F,$F,$F,95,105,115,125,700,700,700,700,$96,$96,$96,$96)
call Z1E(1093679177,5,5,5,5,75,75,75,75,600,600,600,600,0,0,0,0)
call Z1E(1093679175,$A,$A,$A,$A,75,75,75,75,600,600,600,600,0,0,0,0)
call Z1E(1093679174,$F,$F,$F,$F,75,75,75,75,600,600,600,600,0,0,0,0)
elseif ARE==1316252014 then
call Z1E(1093678137,$E,$E,$E,$E,95,120,$91,$AA,550,550,550,550,0,0,0,0)
call Z1E(1093678405,25,25,25,25,120,$8C,$A0,$B4,0,0,0,0,$9C4,$9C4,$9C4,$9C4)
call Z1E(1093681745,35,35,35,35,$91,$96,$A5,$BE,300,300,300,300,300,300,300,300)
call Z1E(1093678645,0,0,0,0,$96,$FA,350,0,500,500,500,500,0,0,0,0)
elseif ARE==1164799603 then
call Z1E(1093808453,$B,$A,9,8,100,120,$8C,$A0,600,600,600,600,110,110,110,110)
call Z1E(1093677391,50,40,30,20,50,50,50,50,99999,99999,99999,99999,0,0,0,0)
call Z1E(1095067246,37,37,37,37,$A0,$A0,$A0,$A0,750,750,750,750,$96,$E1,300,375)
call Z1E(1093752632,90,75,60,0,$96,$C8,$FA,0,99999,99999,99999,500,0,0,0,0)
call Z1E(1093752633,90,75,60,0,$96,$C8,$FA,0,99999,99999,99999,500,0,0,0,0)
elseif ARE==1332179560 then
call Z1E(1093742660,7,7,7,7,125,$82,$87,$8C,750,750,750,750,0,0,0,0)
call Z1E(1093682231,30,25,20,$F,$96,120,90,60,0,0,0,0,0,0,0,0)
call Z1E(1093682242,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093687627,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1432580716 then
call Z1E(1093684300,17,17,17,17,120,120,120,120,600,600,600,600,275,275,275,275)
call Z1E(1093681754,$A,$A,$A,$A,120,120,120,120,700,900,$44C,$514,300,300,300,300)
call Z1E(1093744977,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682009,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,900)
elseif ARE==1211117643 then
call Z1E(1093678410,25,20,$F,$A,125,$96,$AF,$CD,100,100,100,100,$C8,$C8,$C8,$C8)
call Z1E(1093678664,20,16,$D,$A,80,110,$8C,$A0,$96,$96,$96,$96,0,0,0,0)
call Z1E(1093678658,$B4,$AA,$A0,$96,100,125,$96,$AF,0,0,0,0,0,0,0,0)
call Z1E(1093681483,$A,$A,$A,7,$C8,$F0,300,30,500,500,500,500,0,0,0,0)
call Z1E(1093748313,$A,$A,$A,7,$C8,$F0,300,30,700,700,700,500,0,0,0,0)
elseif ARE==1211117633 then
call Z1E(1093684045,$E,$E,$E,$E,100,100,100,100,600,600,600,600,0,0,0,0)
call Z1E(1093684310,24,24,24,24,$AF,$AF,$AF,$AF,600,600,600,600,0,0,0,0)
call Z1E(1093810260,30,26,22,18,100,100,100,100,900,900,900,900,0,0,0,0)
call Z1E(1093684308,$8C,$82,120,0,$C8,300,400,0,500,500,500,500,0,0,0,0)
call Z1E(1093747539,30,30,30,0,$C8,300,400,0,500,500,500,500,0,0,0,0)
call Z1E(1093815619,24,24,24,24,$C8,$C8,$C8,$C8,600,600,600,600,0,0,0,0)
elseif ARE==1160785973 then
call Z1E(1093678130,6,6,6,6,90,100,110,120,800,800,800,800,0,0,0,0)
call Z1E(1093678129,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093678642,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093678388,$A0,$96,$8C,0,$96,$C8,$FA,0,500,500,500,500,0,0,0,0)
call Z1E(1093677141,$A0,$96,$8C,0,$96,$C8,$FA,0,500,500,500,500,0,0,0,0)
elseif ARE==1433631084 then
call Z1E(1093678644,$F,$F,$F,$F,120,120,120,120,$708,$708,$708,$708,350,350,350,350)
call Z1E(1093677907,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677909,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093678160,20,$F,$A,9,$AF,275,375,75,$7D0,$9C4,$BB8,600,0,0,0,0)
elseif ARE==1311781174 then
call Z1E(1093681733,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093808461,20,20,20,20,50,50,50,50,900,900,900,900,0,0,0,0)
call Z1E(1093685040,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093748042,20,20,20,9,75,75,75,100,0,0,0,0,400,450,475,475)
call Z1E(1093808462,$C,$C,$C,$C,50,50,50,50,700,700,700,700,0,0,0,0)
elseif ARE==1332898670 then
call Z1E(1093677360,8,8,8,8,95,105,$87,$A0,600,600,600,600,$C8,$C8,$C8,$C8)
call Z1E(1093685848,$D,$D,$D,$D,110,$8C,$AA,$C8,500,500,500,500,0,0,0,0)
call Z1E(1093677136,16,16,16,16,110,$82,$9B,$B9,400,400,400,400,0,0,0,0)
call Z1E(1093677128,110,110,110,7,$C8,350,600,30,550,550,550,500,0,0,0,0)
call Z1E(1093681457,110,110,110,7,$C8,350,600,30,600,600,600,500,0,0,0,0)
elseif ARE==1211117624 then
call Z1E(1093682775,2,2,2,2,30,30,30,30,600,600,600,600,0,0,0,0)
call Z1E(1093683024,3,3,3,3,35,35,35,35,0,0,0,0,700,700,700,700)
call Z1E(1093684531,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682774,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1315988077 then
call Z1E(1093678669,$C,$C,$C,$C,90,105,$82,$96,0,0,0,0,400,400,400,400)
call Z1E(1097032808,8,8,8,8,50,50,50,50,850,850,850,850,$A,$A,$A,$A)
call Z1E(1093684568,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684561,$B4,$A0,$8C,$B4,125,$96,$AF,$96,0,0,0,0,$80,$80,$80,$80)
call Z1E(1093747254,$A0,$8C,120,$B4,125,$96,$AF,$96,0,0,0,0,$80,$80,$80,$80)
elseif ARE==1211117616 then
call Z1E(1093677139,$D,$D,$D,$D,85,100,115,$82,0,0,0,0,315,315,315,315)
call Z1E(1093816142,8,8,8,8,0,0,0,0,$96,$96,$96,$96,0,0,0,0)
call Z1E(1093677142,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call Z1E(1093816118,120,90,60,0,80,80,80,0,0,0,0,0,0,0,0,0)
elseif ARE==1315007329 then
call Z1E(1093677108,$A,$A,$A,$A,90,115,$87,$9B,650,650,650,650,0,0,0,0)
call Z1E(1093749073,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093678913,$F,$F,$F,$F,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093681716,$A,7,5,0,70,60,50,0,900,$41A,$4B0,0,0,0,0,0)
elseif ARE==1215063922 then
call Z1E(1093677894,$C,$C,$C,$C,100,110,120,$82,500,500,500,500,$96,$96,$96,$96)
call Z1E(1093681490,9,9,9,9,100,100,100,75,$96,$96,$96,600,0,0,0,0)
call Z1E(1093681996,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677895,115,115,115,$B4,50,50,50,$96,0,0,0,0,0,0,0,0)
elseif ARE==1164207469 then
call Z1E(1093677618,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1095066220,$C,9,7,5,60,60,60,60,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093684057,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682483,70,70,70,9,125,$C8,275,75,600,600,600,600,0,0,0,0)
elseif ARE==1315074670 then
call Z1E(1093677622,0,0,0,0,$C,$C,$C,$C,625,625,625,625,0,0,0,0)
call Z1E(1093685570,$D,$D,$D,$D,90,90,90,90,900,900,900,900,300,300,300,300)
call Z1E(1093677625,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093686851,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1214345830 then
call Z1E(1093679182,$A,$A,$A,$A,100,120,$8C,$A0,700,700,700,700,0,0,0,0)
call Z1E(1093679190,$E,$E,$E,$E,50,50,50,50,500,500,500,500,0,0,0,0)
call Z1E(1093678657,0,0,0,0,0,0,0,0,0,0,0,0,300,300,300,300)
call Z1E(1093682514,$96,$96,$96,25,125,$AF,$FA,50,0,0,0,0,600,600,600,650)
elseif ARE==1211117636 then
call Z1E(1093685041,$D,$D,$D,$D,120,120,120,120,$514,$514,$514,$514,100,100,100,100)
call Z1E(1093685071,40,40,40,40,25,25,25,25,0,0,0,0,$C8,$C8,$C8,$C8)
call Z1E(1093681732,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call Z1E(1093685042,80,75,70,9,$96,$AF,$C8,75,600,600,600,600,0,0,0,0)
call Z1E(1093810233,45,45,45,9,$96,$AF,$C8,75,950,950,950,600,0,0,0,0)
elseif ARE==1160786000 then
call Z1E(1093685047,$A,$A,$A,$A,$87,$8C,$9B,$AA,500,500,500,500,0,0,0,0)
call Z1E(1093685046,$C,$B,$A,9,90,90,90,90,$44C,$44C,$44C,$44C,0,0,0,0)
call Z1E(1093685048,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093685045,60,60,60,8,$DC,330,440,100,850,850,850,700,0,0,0,125)
call Z1E(1093747249,60,60,60,8,$DC,330,440,100,$47E,$47E,$47E,700,0,0,0,125)
elseif ARE==1311781193 then
call Z1E(1093683532,22,22,22,22,$82,$8C,$96,$A0,900,900,900,900,625,625,625,625)
call Z1E(1093750345,16,16,16,16,120,120,120,120,0,0,0,0,0,0,0,0)
call Z1E(1093685043,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1095656306,45,45,45,30,50,100,$96,25,0,0,0,0,0,0,0,0)
elseif ARE==1311781206 then
call Z1E(1093684054,$C,$C,$C,$C,100,120,$8C,$A0,500,500,500,500,0,0,0,0)
call Z1E(1093684280,17,17,17,17,100,100,100,100,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call Z1E(1093684302,30,26,22,18,40,35,30,20,0,0,0,0,0,0,0,0)
call Z1E(1093684053,$A0,$8C,120,0,75,75,75,0,500,500,500,500,0,0,0,0)
elseif ARE==1211117651 then
call Z1E(1093743696,4,4,4,4,70,80,90,100,0,0,0,0,400,450,475,500)
call Z1E(1093743698,20,20,20,20,100,110,120,$82,300,300,300,300,500,500,500,500)
call Z1E(1093685591,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093743695,0,0,0,0,0,0,0,0,99999,99999,99999,0,0,0,0,0)
elseif ARE==1211117649 then
call Z1E(1093685584,25,25,25,25,$AA,$AA,$AA,$AA,400,400,400,400,0,0,0,0)
call Z1E(1093685582,0,0,0,0,0,0,0,0,450,450,450,450,0,0,0,0)
call Z1E(1093685585,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093685586,45,30,$F,0,0,0,0,0,550,550,550,500,0,0,0,0)
call Z1E(1093747251,4,4,4,0,0,0,0,0,550,550,550,500,0,0,0,0)
elseif ARE==1160786265 then
call Z1E(1093748033,17,17,17,17,100,100,100,100,0,0,0,0,0,0,0,0)
call Z1E(1093685846,7,7,7,7,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093685839,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093685840,$B,9,7,0,$F,$F,$F,0,$7D0,$7D0,$7D0,500,300,300,300,0)
elseif ARE==1311780930 then
call Z1E(1093686073,$C,$C,$C,$C,$96,$96,$96,$96,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call Z1E(1093686083,16,16,16,16,100,110,120,$82,500,500,500,500,0,0,0,0)
call Z1E(1093686082,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093686072,85,85,85,6,100,$96,$C8,75,750,750,750,800,375,375,375,$C8)
call Z1E(1093751120,85,85,85,6,100,$96,$C8,75,750,750,750,800,375,375,375,$C8)
elseif ARE==1211117652 then
call Z1E(1093687860,32,28,24,20,75,75,75,75,500,500,500,500,0,0,0,0)
call Z1E(1093687861,$F,$F,$F,$F,50,60,70,80,500,500,500,500,0,0,0,0)
call Z1E(1093687862,20,18,16,$E,50,50,50,50,99999,99999,99999,99999,575,575,575,575)
call Z1E(1093687864,70,55,40,0,$96,$96,$96,0,$7D0,$9C4,$BB8,500,0,0,0,0)
call Z1E(1093747542,$C,$C,$C,0,$96,$96,$96,0,$7D0,$9C4,$BB8,500,0,0,0,0)
elseif ARE==1211119187 then
call Z1E(1093743414,$C,$C,$C,$C,120,120,120,120,$5DC,$5DC,$5DC,$5DC,$D7,$D7,$D7,$D7)
call Z1E(1093743444,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093742926,16,16,16,16,80,90,100,110,500,650,800,950,0,0,0,0)
call Z1E(1093742923,60,50,40,0,$96,$C8,$FA,0,$3E8,$3E8,$3E8,0,0,0,0,0)
elseif ARE==1311786311 then
call Z1E(1093743178,$C,$C,$C,$C,90,100,110,120,800,800,800,800,500,500,500,500)
call Z1E(1093743179,9,9,9,9,90,100,110,120,$6A4,$6A4,$6A4,$6A4,0,0,0,0)
call Z1E(1093743689,$F,$F,$F,$F,100,100,100,100,0,0,0,0,400,450,475,500)
call Z1E(1093743184,60,60,60,0,$C8,300,400,0,600,600,600,500,0,0,0,0)
call Z1E(1093747766,$F,$F,$F,0,$C8,300,400,0,600,600,600,500,0,0,0,0)
elseif ARE==1164277353 then
call Z1E(1093815130,22,18,$E,$A,50,50,50,50,$FA,$FA,$FA,$FA,0,0,0,0)
call Z1E(1093683252,16,16,16,16,80,80,80,80,0,0,0,0,0,0,0,0)
call Z1E(1093751369,$8C,$8C,$8C,$8C,40,40,40,40,0,0,0,0,0,0,0,0)
call Z1E(1093678929,$A0,110,60,0,$C8,100,0,0,$FA,$FA,$FA,0,0,0,0,0)
elseif ARE==1164666213 then
call Z1E(1093678679,9,9,9,9,100,125,$8C,$A0,750,750,750,750,$96,$AF,$C8,$E1)
call Z1E(1093677877,22,22,22,22,95,120,$87,$9B,0,0,0,0,0,0,0,0)
call Z1E(1093678678,6,6,6,6,100,115,$82,$91,700,700,700,700,650,650,650,650)
call Z1E(1093808454,1,1,1,0,110,110,110,0,0,0,0,0,0,0,0,0)
call Z1E(1093808455,1,1,1,0,110,110,110,0,0,0,0,0,0,0,0,0)
elseif ARE==1433168227 then
call Z1E(1093678918,9,9,9,8,125,$96,$AA,$BE,600,600,600,600,$C8,$C8,$C8,$C8)
call Z1E(1093679186,5,5,5,5,50,50,50,50,800,800,800,800,0,0,0,0)
call Z1E(1093678387,35,30,25,20,25,25,25,25,400,400,400,400,0,0,0,0)
call Z1E(1093678420,$91,115,60,6,$C8,325,500,50,750,750,750,800,0,0,0,0)
call Z1E(1093679176,$91,115,60,6,$C8,325,500,50,850,850,850,800,0,0,0,0)
elseif ARE==1430468406 then
call Z1E(1093677645,8,8,8,8,105,120,$8C,$A5,600,600,600,600,110,110,110,110)
call Z1E(1093685302,$F,$F,$F,$F,80,80,80,80,900,900,900,900,$C8,275,350,350)
call Z1E(1093677635,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093678899,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call Z1E(1093678904,4,4,4,4,80,95,115,$8C,600,600,600,600,110,110,110,110)
call Z1E(1093678900,5,5,5,5,85,100,120,$91,600,600,600,600,110,110,110,110)
call Z1E(1093678898,6,6,6,6,90,105,125,$96,600,600,600,600,110,110,110,110)
call Z1E(1093678670,7,7,7,7,95,110,$82,$9B,600,600,600,600,110,110,110,110)
call Z1E(1093678925,$B,$B,$B,$B,55,55,55,55,900,900,900,900,$C8,275,350,350)
call Z1E(1093678922,$C,$C,$C,$C,60,60,60,60,900,900,900,900,$C8,275,350,350)
call Z1E(1093678921,$D,$D,$D,$D,65,65,65,65,900,900,900,900,$C8,275,350,350)
call Z1E(1093678920,$E,$E,$E,$E,70,70,70,70,900,900,900,900,$C8,275,350,350)
call Z1E(1093678158,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call Z1E(1093678157,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call Z1E(1093678154,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
call Z1E(1093677898,100,100,100,$B4,$C8,300,400,$96,0,0,0,0,700,700,700,800)
elseif ARE==1430466872 then
call Z1E(1093687349,$C,$C,$C,$C,100,120,$91,$AA,500,500,500,500,0,0,0,0)
call Z1E(1093684558,$F,$F,$F,$F,125,$96,$AF,$C8,500,500,500,500,0,0,0,0)
call Z1E(1093677646,25,20,$F,$A,$A,$A,$A,$A,600,650,700,750,800,800,800,800)
call Z1E(1093679413,$A0,100,40,9,$C8,420,650,120,900,900,900,0,500,500,500,500)
call Z1E(1093679447,$A0,100,40,9,$C8,420,625,120,900,900,900,0,500,500,500,500)
elseif ARE==1162032439 then
call Z1E(1093744435,22,22,22,22,125,125,125,125,800,800,800,800,0,0,0,0)
call Z1E(1093684569,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684563,5,5,5,5,20,20,20,20,850,850,850,850,0,0,0,0)
call Z1E(1093677363,$8C,120,100,40,$C8,300,400,125,0,0,0,0,$C8,$C8,$C8,$C8)
call Z1E(1093681462,$8C,120,60,40,$C8,300,400,125,0,0,0,0,$C8,$C8,$C8,$C8)
elseif ARE==1430466865 then
call Z1E(1093677651,$A,9,8,7,90,90,90,90,500,500,500,500,$96,$96,$96,$96)
call Z1E(1093677879,$C,$C,$C,$A,40,40,40,40,800,800,800,800,0,0,0,0)
call Z1E(1093751364,30,30,30,30,80,80,80,80,600,800,$3E8,$4B0,100,100,100,100)
call Z1E(1093810508,120,110,100,0,$C8,$FA,300,0,0,0,0,0,0,0,0,0)
elseif ARE==1430468144 then
call Z1E(1093679192,$A,$A,$A,$A,70,80,90,100,700,700,700,700,0,0,0,0)
call Z1E(1093750337,4,4,4,4,$AA,$A0,$96,$8C,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call Z1E(1093686872,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093750341,$B4,$A0,$8C,9,$96,$96,$96,100,0,0,0,0,0,0,0,475)
call Z1E(1093814599,$B4,$A0,$8C,9,$96,$96,$96,100,0,0,0,0,0,0,0,475)
elseif ARE==1429221441 then
call Z1E(1093678389,$A,$A,$A,$A,$8C,$8C,$8C,$8C,500,500,500,500,0,0,0,0)
call Z1E(1093685847,24,18,$C,6,70,70,70,70,550,600,650,700,0,0,0,0)
call Z1E(1093677902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677903,$8C,$8C,$8C,3,125,$C8,275,$96,$80,$80,$80,$80,$3E8,$3E8,$3E8,$3E8)
elseif ARE==1429221432 then
call Z1E(1093677892,30,30,30,30,125,125,125,125,800,800,800,800,$C8,$C8,$C8,$C8)
call Z1E(1093687878,50,45,40,35,$F,20,25,30,500,500,500,500,0,0,0,0)
call Z1E(1093677893,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093679411,100,70,40,$B4,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif ARE==1429221430 then
call Z1E(1093681736,$A,$A,$A,$A,120,120,120,120,700,700,700,700,0,0,0,0)
call Z1E(1093681735,30,30,30,30,50,50,50,50,600,600,600,600,650,650,650,650)
call Z1E(1093681739,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093687121,45,45,45,0,100,100,100,0,500,500,500,500,0,0,0,0)
elseif ARE==1165451634 then
call Z1E(1093687629,8,8,8,8,30,25,20,$F,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call Z1E(1093685324,$E,$B,8,5,50,50,50,50,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call Z1E(1093677904,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677905,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1211117654 then
call Z1E(1093747504,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682994,$B,$B,$B,$B,$8C,$96,$A0,$AA,800,800,800,800,500,500,500,500)
call Z1E(1093684560,0,0,0,0,0,0,0,0,$80,$80,$80,$80,0,0,0,0)
call Z1E(1093747028,$8C,100,60,0,$C8,100,0,0,500,500,500,500,0,0,0,0)
elseif ARE==1432646245 then
call Z1E(1093677640,8,8,8,8,80,90,100,110,525,525,525,525,0,0,0,0)
call Z1E(1093679173,0,0,0,0,0,0,0,0,500,500,500,500,0,0,0,0)
call Z1E(1093679158,0,0,0,0,0,0,0,0,500,500,500,500,0,0,0,0)
call Z1E(1093677899,$B4,$96,120,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093747248,$B4,$96,120,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1313026096 then
call Z1E(1095267426,8,8,8,8,$8C,$8C,$8C,$8C,525,525,525,525,0,0,0,0)
call Z1E(1096114550,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1095721842,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677401,260,$A0,60,$F0,$8C,$8C,$8C,0,0,0,0,0,0,0,0,0)
elseif ARE==1430467634 then
call Z1E(1093742674,70,60,50,40,60,50,40,30,300,300,300,300,0,0,0,0)
call Z1E(1093750608,60,55,50,45,60,65,70,75,0,0,0,0,0,0,0,0)
call Z1E(1093679412,8,8,8,8,110,110,110,110,600,600,600,600,0,0,0,0)
call Z1E(1093684565,110,110,110,120,$96,$C8,$FA,125,550,550,550,400,0,0,0,0)
call Z1E(1093681458,110,110,110,120,$96,$C8,$FA,125,550,550,550,400,0,0,0,0)
elseif ARE==1429221424 then
call Z1E(1093687351,$B,$B,$B,$B,95,115,$87,$9B,500,500,500,500,0,0,0,0)
call Z1E(1093748789,28,20,$C,4,90,110,$82,$96,600,600,600,600,0,0,0,0)
call Z1E(1093815119,$A,$A,$A,$A,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093679445,70,60,50,5,$A0,$D2,260,75,0,0,0,0,0,0,0,0)
elseif ARE==1430468913 then
call Z1E(1093678403,40,40,40,40,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093810507,8,8,8,8,80,95,105,115,0,0,0,0,0,0,0,0)
call Z1E(1093683786,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093677876,$A,$A,$A,0,25,25,25,0,700,700,700,0,0,0,0,0)
elseif ARE==1430466609 then
call Z1E(1093685559,20,16,$C,8,80,100,120,$8C,400,400,400,400,0,0,0,0)
call Z1E(1093684549,$C,$A,8,6,60,60,60,60,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093678145,7,7,7,7,110,120,$82,$8C,0,0,0,0,500,500,500,500)
call Z1E(1093810258,$87,$87,$87,8,$FA,360,500,100,700,700,700,700,100,100,100,125)
call Z1E(1093810259,100,70,40,8,$FA,360,500,100,700,700,700,700,100,100,100,125)
elseif ARE==1160785972 then
call Z1E(1093677872,60,50,40,30,90,90,90,90,0,0,0,0,0,0,0,0)
call Z1E(1095263841,0,0,0,0,8,8,8,8,600,600,600,600,0,0,0,0)
call Z1E(1093677621,20,20,20,20,75,75,75,75,0,0,0,0,0,0,0,0)
call Z1E(1093678161,45,45,45,0,100,100,100,0,400,400,400,0,0,0,0,0)
elseif ARE==1162032181 then
call Z1E(1093684299,19,17,$F,$D,120,120,120,120,700,900,$44C,$514,0,0,0,0)
call Z1E(1093682010,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093679153,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093683761,120,110,100,6,$96,$AF,$C8,70,600,600,600,800,400,400,400,$C8)
call Z1E(1093747767,60,60,60,6,$96,$AF,$C8,70,600,600,600,800,400,400,400,$C8)
elseif ARE==1162032951 then
call Z1E(1093679446,4,3,0,0,20,20,20,20,600,600,600,600,0,0,0,0)
call Z1E(1093746995,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684557,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093679152,80,50,30,8,125,$AF,$FA,65,500,500,500,0,0,0,0,0)
call Z1E(1093752154,$C,$C,$C,0,125,125,125,0,900,900,900,0,0,0,0,0)
elseif ARE==1160785970 then
call Z1E(1093748023,$E,$E,$E,$E,125,125,125,125,0,0,0,0,0,0,0,0)
call Z1E(1093747792,25,25,25,25,20,30,40,50,600,600,600,600,0,0,0,0)
call Z1E(1093748022,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093747023,80,70,60,0,100,$96,$C8,0,600,600,600,500,0,0,0,0)
call Z1E(1093752150,80,70,60,0,100,$96,$C8,0,600,600,600,500,0,0,0,0)
elseif ARE==1429221443 then
call Z1E(1093686322,$F,$F,$F,$F,75,75,75,75,0,0,0,0,0,0,0,0)
call Z1E(1093686099,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093744948,24,20,16,$C,110,110,110,110,700,700,700,700,500,500,500,500)
call Z1E(1093686103,100,100,100,0,50,50,50,0,$96,$96,$96,500,0,0,0,0)
elseif ARE==1211117640 then
call Z1E(1093684564,6,6,6,6,85,105,125,$91,400,400,400,400,400,400,400,400)
call Z1E(1093681989,$C,$A,8,6,100,100,100,100,700,700,700,700,0,0,0,0)
call Z1E(1093679428,35,35,35,35,80,80,80,80,0,0,0,0,100,100,100,100)
call Z1E(1093681987,22,22,22,8,125,$AF,$E1,75,850,850,850,500,850,850,850,800)
call Z1E(1093677658,0,0,0,8,125,$AF,$E1,75,900,900,900,500,900,900,900,800)
elseif ARE==1332109682 then
call Z1E(1093678134,$C,$C,$C,$C,120,120,120,120,700,700,700,700,0,0,0,0)
call Z1E(1093678149,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093808694,7,6,5,4,30,40,50,60,0,0,0,0,0,0,0,0)
call Z1E(1093810505,$96,$96,$96,$C,$96,$E1,325,75,0,0,0,0,0,0,0,500)
elseif ARE==1332963428 then
call Z1E(1093816137,$C,$C,$C,$C,95,105,115,125,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call Z1E(1093683019,$E,$E,$E,$E,125,$96,$AF,$C8,600,600,600,600,500,500,500,500)
call Z1E(1093678169,$F,$F,$F,$F,$A5,$A5,$A5,$A5,500,550,600,650,0,0,0,0)
call Z1E(1093677649,100,100,100,0,$C8,300,400,0,625,625,625,0,0,0,0,0)
call Z1E(1093747769,100,100,100,0,$C8,300,400,0,625,625,625,0,0,0,0,0)
elseif ARE==1429221445 then
call Z1E(1093678422,8,7,6,5,125,$91,$A5,$B9,0,0,0,0,400,450,475,500)
call Z1E(1093677390,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call Z1E(1093678640,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093678647,100,85,70,9,$AF,340,500,75,600,600,600,600,0,0,0,0)
call Z1E(1093679184,70,70,70,9,$96,340,500,75,600,600,600,600,0,0,0,0)
elseif ARE==1429221446 then
call Z1E(1093678665,$E,$D,$C,$B,110,120,$82,$8C,600,800,$3E8,$4B0,0,0,0,0)
call Z1E(1093678667,0,0,0,0,0,0,0,0,0,0,0,0,$FA,$FA,$FA,$FA)
call Z1E(1093678660,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682764,30,30,30,0,100,$82,$AA,0,$A0,$A0,$A0,0,0,0,0,0)
call Z1E(1093747544,30,30,30,0,100,$82,$AA,0,$A0,$A0,$A0,0,0,0,0,0)
elseif ARE==1328558154 then
call Z1E(1093750840,35,35,35,35,100,100,100,100,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093682515,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093682997,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682996,75,75,75,0,125,$96,$AF,0,400,550,700,500,0,0,0,0)
call Z1E(1093747768,20,20,20,0,125,$96,$AF,0,550,700,850,500,0,0,0,0)
elseif ARE==1432510828 then
call Z1E(1093751127,36,33,30,27,100,100,100,100,$BB8,$BB8,$BB8,$BB8,0,0,0,0)
call Z1E(1093681985,$C,$A,8,6,60,60,60,60,0,0,0,0,0,0,0,0)
call Z1E(1093681991,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682004,60,50,40,0,$96,75,0,0,0,0,0,500,0,0,0,0)
elseif ARE==1315334514 then
call Z1E(1093682521,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
call Z1E(1093681746,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093682773,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093810506,120,110,100,0,$96,$AF,$C8,0,0,0,0,0,0,0,0,0)
call Z1E(1093682736,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
call Z1E(1093682760,$A,$A,$A,$A,75,75,75,75,0,0,0,0,0,0,0,0)
elseif ARE==1429221451 then
call Z1E(1093678671,$B,$B,$B,$B,110,120,$82,$8C,350,450,550,650,0,0,0,0)
call Z1E(1093683248,40,30,20,$A,60,50,40,30,500,500,500,500,0,0,0,0)
call Z1E(1093682753,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093678674,$8C,120,100,0,$AF,$FA,325,0,500,500,500,500,0,0,0,0)
call Z1E(1093747252,120,100,80,0,$AF,$FA,325,0,500,500,500,500,0,0,0,0)
elseif ARE==1332766568 then
call Z1E(1093683510,$A,$A,$A,$A,80,90,100,110,500,500,500,500,0,0,0,0)
call Z1E(1093686065,20,$F,$A,5,75,85,95,105,900,900,900,900,0,0,0,0)
call Z1E(1093681974,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093682482,75,65,55,9,120,$A0,$C8,120,$96,$96,$96,700,$96,$96,$96,500)
call Z1E(1093750098,6,6,6,9,120,$A0,$C8,120,$96,$96,$96,700,$96,$96,$96,500)
elseif ARE==1215722344 then
call Z1E(1093682499,$C,$A,8,6,80,80,80,80,800,800,800,800,0,0,0,0)
call Z1E(1093684293,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093683512,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684296,70,60,50,0,$96,$C8,$FA,0,$3E8,$3E8,$3E8,500,0,0,0,0)
elseif ARE==1432642913 then
call Z1E(1093683507,6,6,6,6,75,75,75,75,800,800,800,800,0,0,0,0)
call Z1E(1093684550,$E,$C,$A,8,100,105,110,115,500,500,500,500,1,1,1,1)
call Z1E(1093684551,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684819,60,60,60,5,0,0,0,75,0,0,0,0,0,0,0,0)
call Z1E(1093747777,60,60,60,5,0,0,0,75,0,0,0,0,0,0,0,0)
elseif ARE==1160786242 then
call Z1E(1093683287,16,16,16,16,$82,$8C,$96,$A0,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call Z1E(1093682776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684801,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093683257,120,120,120,0,$96,$96,$96,0,0,0,0,500,0,0,0,0)
elseif ARE==1160786241 then
call Z1E(1093684813,20,18,16,$E,110,120,$82,$8C,700,700,700,700,500,500,500,500)
call Z1E(1093684805,0,0,0,0,$F,40,65,90,0,0,0,0,340,340,340,340)
call Z1E(1093684815,35,35,35,35,120,120,120,120,400,400,400,400,$96,$96,$96,$96)
call Z1E(1093684820,80,80,80,0,$C8,$C8,$C8,$96,300,350,400,700,0,0,0,0)
call Z1E(1093684824,80,80,80,0,$C8,$C8,$C8,$96,300,350,400,700,0,0,0,0)
elseif ARE==1429221456 then
call Z1E(1093685065,0,0,0,0,100,100,100,100,450,450,450,450,0,0,0,0)
call Z1E(1093685066,18,16,$E,$C,120,$8C,$A0,$B4,550,550,550,550,500,500,500,500)
call Z1E(1093683526,0,0,0,0,0,0,0,0,0,0,0,0,$3E8,$3E8,$3E8,$3E8)
call Z1E(1093685067,$A0,$A0,$A0,0,$AF,$FA,325,0,600,650,700,0,375,475,575,0)
call Z1E(1093752407,$A0,$A0,$A0,0,$AF,$FA,325,0,700,750,800,0,375,475,575,0)
elseif ARE==1160786243 then
call Z1E(1093683765,25,25,25,25,120,120,120,120,800,800,800,800,0,0,0,0)
call Z1E(1093681491,16,16,16,16,90,110,$82,$96,500,500,500,500,0,0,0,0)
call Z1E(1093678672,50,50,50,50,100,110,120,$82,700,700,700,700,650,650,650,650)
call Z1E(1395667000,$A5,$A5,$A5,30,$C8,$FA,300,100,$4B0,$4B0,$4B0,900,600,600,600,$FA)
call Z1E(1395667029,$A5,$A5,$A5,30,$C8,$FA,300,100,$4B0,$4B0,$4B0,900,600,600,600,$FA)
elseif ARE==1211117641 then
call Z1E(1093684802,20,16,$C,8,100,100,100,100,500,750,$3E8,$4E2,$DC,$DC,$DC,$DC)
call Z1E(1093684792,$C,$A,8,6,80,80,80,80,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093684791,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093684567,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093809987,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1311781207 then
call Z1E(1093684817,$F,$D,$B,7,100,115,$82,$91,600,600,600,600,0,0,0,0)
call Z1E(1093742668,60,45,30,$F,$8C,$82,120,110,550,700,850,$3E8,0,0,0,0)
call Z1E(1093685074,$C,$A,8,6,80,90,100,110,900,900,900,900,0,0,0,0)
call Z1E(1093742673,40,40,40,0,100,100,100,0,$7D0,$7D0,$7D0,0,575,575,575,0)
call Z1E(1093747778,40,40,40,0,100,100,100,0,$7D0,$7D0,$7D0,0,775,775,775,0)
elseif ARE==1311780946 then
call Z1E(1093677385,16,16,16,16,100,110,120,$82,775,775,775,775,450,450,450,450)
call Z1E(1093685825,24,21,18,$F,100,115,$82,$91,750,750,750,750,275,275,275,275)
call Z1E(1095328612,0,0,0,0,0,0,0,0,900,900,900,900,0,0,0,0)
call Z1E(1093685808,$82,$82,$82,0,75,$96,$E1,0,99999,99999,99999,500,0,0,0,0)
elseif ARE==1211117650 then
call Z1E(1093743955,$A,8,6,4,70,90,110,$82,625,625,625,625,300,300,300,300)
call Z1E(1093685813,25,20,$F,$A,50,75,100,125,650,650,650,650,0,0,0,0)
call Z1E(1093743958,60,60,60,60,120,$82,$8C,$96,600,600,600,600,0,0,0,0)
call Z1E(1093743946,75,75,75,$B4,100,100,100,$96,0,0,0,0,0,0,0,0)
elseif ARE==1211117646 then
call Z1E(1093685573,22,22,22,22,100,$82,$A0,$BE,500,500,500,500,$FA,350,450,550)
call Z1E(1093685575,$A,$A,$A,$A,70,90,110,$82,600,600,600,600,0,0,0,0)
call Z1E(1093685815,$C,$B,$A,9,20,30,40,50,600,600,600,600,0,0,0,0)
call Z1E(1093685579,100,100,100,0,$C8,300,400,0,500,900,$514,500,300,300,300,0)
call Z1E(1093808465,100,100,100,0,$C8,300,400,0,500,900,$514,500,300,300,300,0)
elseif ARE==1211117653 then
call Z1E(1093808471,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093808472,0,0,0,9,0,0,0,100,0,0,0,0,0,0,0,475)
call Z1E(1093808470,0,0,0,25,0,0,0,50,0,0,0,0,0,0,0,650)
call Z1E(1093808473,22,17,$C,5,20,40,60,80,0,0,0,0,0,0,0,0)
call Z1E(1093748565,16,8,4,2,0,0,0,0,0,0,0,0,0,0,0,0)
elseif ARE==1311787088 then
call Z1E(1093750087,$F,$D,$B,9,$96,$96,$96,$96,700,700,700,700,0,0,0,0)
call Z1E(1093748819,6,6,6,6,80,90,100,110,$5DC,$5DC,$5DC,$5DC,$FA,$FA,$FA,$FA)
call Z1E(1093748817,50,46,42,38,110,120,$82,$8C,800,800,800,800,525,525,525,525)
call Z1E(1093750089,45,45,45,0,100,125,$96,0,99999,99999,99999,500,0,0,0,0)
elseif ARE==1328558389 then
call Z1E(1093747009,$F,$F,$F,$F,100,115,$82,$91,500,500,500,500,0,0,0,0)
call Z1E(1093747000,16,16,16,16,110,110,110,110,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call Z1E(1093747524,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093746993,100,100,100,0,$AF,$AF,$AF,0,$640,$640,$640,500,0,0,0,0)
elseif ARE==1211119409 then
call Z1E(1093749069,$A,9,8,7,55,50,45,40,0,0,0,0,0,0,0,0)
call Z1E(1093749303,20,16,$C,8,75,75,75,75,500,500,500,500,0,0,0,0)
call Z1E(1093748818,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093749070,25,25,25,5,120,120,120,75,0,0,0,0,0,0,0,0)
elseif ARE==1328558390 then
call Z1E(1093748044,3,3,3,3,20,20,20,20,700,700,700,700,375,375,375,375)
call Z1E(1093744982,$B,$B,$B,$B,80,100,120,$8C,$5DC,$5DC,$5DC,$5DC,375,375,375,375)
call Z1E(1093744986,40,40,40,40,100,100,100,100,0,0,0,0,-1,-1,-1,-1)
call Z1E(1093744975,90,70,50,9,$96,$96,$96,120,$AF,$AF,$AF,700,500,500,500,500)
elseif ARE==1160786505 then
call Z1E(1093753167,18,16,$E,$C,120,120,120,120,$5DC,$5DC,$5DC,$5DC,0,0,0,0)
call Z1E(1093751607,24,24,24,24,75,75,75,75,$4E2,$4E2,$4E2,$4E2,0,0,0,0)
call Z1E(1093753170,50,50,50,50,75,75,75,75,0,0,0,0,100,100,100,100)
call Z1E(1093753169,30,24,18,9,50,75,100,100,0,0,0,0,0,0,0,475)
elseif ARE==1160786510 then
call Z1E(1093751631,7,7,6,6,90,90,90,90,500,500,500,500,0,0,0,0)
call Z1E(1093751633,20,17,$E,$B,120,$82,$8C,$96,$41A,$41A,$41A,$41A,500,500,500,500)
call Z1E(1093808697,20,20,20,20,50,50,50,50,0,0,0,0,0,0,0,0)
call Z1E(1093751861,55,50,45,6,125,125,125,75,$3E8,$3E8,$3E8,800,450,450,450,$C8)
call Z1E(1093808949,55,50,45,6,125,125,125,75,99999,99999,99999,800,450,450,450,$C8)
elseif ARE==1160786506 then
call Z1E(1093751894,16,16,16,16,$82,$82,$82,$82,800,800,800,800,0,0,0,0)
call Z1E(1093751639,60,50,40,30,$A0,$82,100,70,600,$3E8,$578,$708,500,500,500,500)
call Z1E(1093751637,$E,$E,$E,$E,70,70,70,70,900,900,900,900,300,300,300,300)
call Z1E(1093752118,85,85,85,0,125,$AF,$E1,0,800,800,800,500,375,375,375,0)
elseif ARE==1328558406 then
call Z1E(1093751873,$C,$C,$C,$C,40,40,40,40,$708,$708,$708,$708,1,1,1,1)
call Z1E(1093751864,20,18,16,$E,120,$82,$8C,$96,0,0,0,0,0,0,0,0)
call Z1E(1093810257,2,2,2,2,0,0,0,0,$80,$80,$80,$80,0,0,0,0)
call Z1E(1093751874,90,75,60,0,100,100,100,0,99999,99999,99999,500,0,0,0,0)
elseif ARE==1160786504 then
call Z1E(1093751608,25,22,19,16,120,120,120,120,600,600,600,600,500,500,500,500)
call Z1E(1093751618,$D,$D,$D,$D,50,60,70,80,600,600,600,600,500,500,500,500)
call Z1E(1093751604,3,3,3,3,50,50,50,50,$5DC,$5DC,$5DC,$5DC,0,0,0,0)
call Z1E(1093751617,50,50,50,0,$C8,$C8,$C8,0,800,800,800,0,0,0,0,0)
elseif ARE==1160786502 then
call Z1E(1093751370,36,36,36,36,0,0,0,0,99999,99999,99999,99999,0,0,0,0)
call Z1E(1093753176,45,40,35,30,80,80,100,110,$578,$578,$578,$578,0,0,0,0)
call Z1E(1093753177,20,20,20,20,100,100,100,100,$514,$514,$514,$514,0,0,0,0)
call Z1E(1093751371,110,110,110,0,$C8,$C8,$C8,0,700,700,700,500,0,0,0,0)
elseif ARE==1160786520 then
call Z1E(1093809990,18,18,18,18,120,120,120,120,550,575,600,625,0,0,0,0)
call Z1E(1093809991,16,$E,$C,$A,$96,$96,$96,$96,800,800,800,800,0,0,0,0)
call Z1E(1093810006,0,0,0,0,0,0,0,0,0,0,0,0,900,900,900,900)
call Z1E(1093809992,20,18,16,0,25,25,25,0,$3E8,$3E8,$3E8,500,0,0,0,0)
elseif ARE==1311788336 then
call Z1E(1093814323,$E,$C,$A,8,110,110,110,110,0,0,0,0,0,0,0,0)
call Z1E(1093814320,30,22,$E,6,50,50,50,50,700,700,700,700,$FA,350,450,550)
call Z1E(1093814355,35,35,35,35,80,90,100,110,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call Z1E(1093814859,0,0,0,0,0,0,0,0,$5DC,$5DC,$5DC,500,0,0,0,0)
elseif ARE==1160786507 then
call Z1E(1093814850,18,18,18,18,100,100,100,100,$3E8,$3E8,$3E8,$3E8,315,315,315,315)
call Z1E(1093814834,16,$F,$E,$D,80,90,100,110,800,800,800,800,0,0,0,0)
call Z1E(1093813593,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093813065,50,50,50,0,75,75,75,0,100,100,100,500,0,0,0,0)
elseif ARE==1211122767 then
call Z1E(1093812805,5,4,3,2,70,70,70,70,800,800,800,800,500,500,500,500)
call Z1E(1093814612,20,18,16,$E,110,110,110,110,0,0,0,0,0,0,0,0)
call Z1E(1093814350,$B,$B,$B,$B,80,90,100,110,700,700,700,700,0,0,0,0)
call Z1E(1093812807,60,40,20,0,350,575,800,0,$4B0,$4B0,$4B0,500,$AA,$AA,$AA,0)
elseif ARE==1160786738 then
call Z1E(1093813835,8,8,8,8,70,80,90,100,0,0,0,0,0,0,0,0)
call Z1E(1093813555,4,4,4,4,60,70,80,90,800,$3E8,$4B0,$578,0,0,0,0)
call Z1E(1093813556,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
call Z1E(1093813557,8,8,8,0,125,$96,$AF,0,$4B0,$4B0,$4B0,500,$C8,$C8,$C8,0)
elseif ARE==1311788343 then
call Z1E(1093815877,60,50,40,30,120,110,100,90,0,0,0,0,0,0,0,0)
call Z1E(1093815361,8,8,8,8,120,$82,$8C,$96,$4B0,$4B0,$4B0,$4B0,0,0,0,0)
call Z1E(1093815362,17,16,$F,$E,75,75,75,75,$3E8,$3E8,$3E8,$3E8,0,0,0,0)
call Z1E(1093687856,90,80,70,0,$FA,$FA,$FA,0,800,800,800,0,0,0,0,0)
elseif ARE==1311788363 then
call Z1E(1093815601,20,20,20,20,75,75,75,75,600,700,800,900,0,0,0,0)
call Z1E(1093815372,4,4,4,4,50,50,50,50,$7D0,$7D0,$7D0,$7D0,0,0,0,0)
call Z1E(1093815373,50,50,50,50,75,75,75,75,900,900,900,900,350,350,350,350)
call Z1E(1093815600,65,60,55,0,0,0,0,0,0,0,0,0,0,0,0,0)
endif
endfunction
function ASE takes integer O5,integer o6,integer n6,integer ATE,integer AUE,integer AVE,integer AWE,integer AXE returns nothing
set eY[$80+O5]=o6
set eY[$90+O5]=n6
set eY[$A0+O5]=ATE
set eY[$AC+O5]=AUE
set eY[$BC+O5]=AVE
set hG[$90+O5]=AWE
set hG[$A0+O5]=AXE
endfunction
function AYE takes unit it returns boolean
local integer i1=GetUnitTypeId(it)
return((i1==1211117636)or(i1==1333027688)or(i1==1311787088)or(i1==1211117653)or(i1==1315988077)or(i1==1211117617)or(i1==1432580716)or(i1==1214344551)or(i1==1215063922)or(i1==1429221451)or(i1==1328558154)or(i1==1332109682)or(i1==1332766568)or(i1==1429221441)or(i1==1429221443)or(i1==1432642913)or(i1==1313026096)or(i1==1430468913)or(i1==1160785970)or(i1==1215657064)or(i1==1429221430)or(i1==1429221424)or(i1==1162032439)or(i1==1162032951)or(i1==1311780930)or(i1==1211117620)or(i1==1430468144)or(i1==1215130471)or(i1==1160786000)or(i1==1211117646)or(i1==1430468406)or(i1==1430466872)or(i1==1433105516)or(i1==1433168227)or(i1==1429221445)or(i1==1160786243))
endfunction
function AZE takes integer O5,unit it,integer i1 returns nothing
if(i1==1211117654)then
call ASE(O5,1093684560,1093682994,1093747504,1093747028,0,$C,$D)
elseif(i1==1429221443)then
call ASE(O5,1093686322,1093686099,1093744948,1093686103,0,101,101)
elseif(i1==1162032951)then
call ASE(O5,1093684557,1093679446,1093746995,1093679152,1093752154,7,3)
elseif(i1==1162032181)then
call ASE(O5,1093682010,1093679153,1093684299,1093683761,1093747767,9,9)
elseif(i1==1429221424)then
call ASE(O5,1093687351,1093748789,1093815119,1093679445,0,21,17)
elseif(i1==1160785972)then
call ASE(O5,1095263841,1093677872,1093677621,1093678161,0,9,$B)
elseif(i1==1432646245)then
call ASE(O5,1093679158,1093677640,1093679173,1093677899,1093747248,1,$B)
elseif(i1==1430466609)then
call ASE(O5,1093678145,1093685559,1093684549,1093810258,1093810259,$D,20)
elseif(i1==1430468913)then
call ASE(O5,1093678403,1093810507,1093683786,1093677876,0,8,1)
elseif(i1==1430467634)then
call ASE(O5,1093742674,1093679412,1093750608,1093684565,1093681458,$F,16)
elseif(i1==1313026096)then
call ASE(O5,1095267426,1096114550,1095721842,1093677401,0,$B,6)
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
call ASE(O5,1093815130,1093683252,1093751369,1093678929,0,$A,$D)
elseif(i1==1164666213)then
call ASE(O5,1093678678,1093678679,1093677877,1093808454,1093808455,102,23)
elseif(i1==1433168227)then
call ASE(O5,1093678918,1093678387,1093679186,1093678420,1093679176,25,25)
elseif(i1==1429221430)then
call ASE(O5,1093681736,1093681735,1093681739,1093687121,0,$E,16)
elseif(i1==1430466872)then
call ASE(O5,1093687349,1093684558,1093677646,1093679413,1093679447,23,17)
elseif(i1==1162032439)then
call ASE(O5,1093744435,1093684569,1093684563,1093677363,1093681462,8,8)
elseif(i1==1430466865)then
call ASE(O5,1093677651,1093677879,1093751364,1093810508,0,8,$B)
elseif(i1==1430468144)then
call ASE(O5,1093679192,1093750337,1093686872,1093750341,1093814599,107,107)
elseif(i1==1429221432)then
call ASE(O5,1093677893,1093677892,1093687878,1093679411,0,1,6)
elseif(i1==1429221441)then
call ASE(O5,1093678389,1093685847,1093677902,1093677903,0,$A,1)
elseif(i1==1165451634)then
call ASE(O5,1093687629,1093685324,1093677904,1093677905,0,3,$B)
elseif(i1==1432642913)then
call ASE(O5,1093684550,1093683507,1093684551,1093684819,1093747777,4,4)
elseif(i1==1215722344)then
call ASE(O5,1093684293,1093683512,1093682499,1093684296,0,1,$B)
elseif(i1==1432510828)then
call ASE(O5,1093751127,1093681985,1093681991,1093682004,0,6,6)
elseif(i1==1332766568)then
call ASE(O5,1093681974,1093686065,1093683510,1093682482,1093750098,104,4)
elseif(i1==1429221451)then
call ASE(O5,1093678671,1093682753,1093683248,1093678674,1093747252,8,$B)
elseif(i1==1315334514)then
call ASE(O5,1093681746,1093682521,1093682773,1093810506,0,7,8)
elseif(i1==1328558154)then
call ASE(O5,1093750840,1093682515,1093682997,1093682996,1093747768,1,1)
elseif(i1==1429221446)then
call ASE(O5,1093678665,1093678667,1093678660,1093682764,1093747544,103,4)
elseif(i1==1429221445)then
call ASE(O5,1093678422,1093678640,1093677390,1093678647,1093679184,21,25)
elseif(i1==1332963428)then
call ASE(O5,1093683019,1093678169,1093816137,1093677649,1093747769,18,17)
elseif(i1==1332109682)then
call ASE(O5,1093678134,1093678149,1093808694,1093810505,0,$B,$F)
elseif(i1==1211117640)then
call ASE(O5,1093684564,1093681989,1093679428,1093681987,1093677658,21,21)
elseif(i1==1430468406)then
call ASE(O5,0,1093677635,0,0,0,25,25)
elseif(i1==1160786242)then
call ASE(O5,1093683287,1093682776,1093684801,1093683257,0,$A,6)
elseif(i1==1160786241)then
call ASE(O5,1093684813,1093684815,1093684805,1093684820,1093684824,105,23)
elseif(i1==1429221456)then
call ASE(O5,1093683526,1093685065,1093685066,1093685067,1093752407,23,22)
elseif(i1==1160786243)then
if(P17(not IsPlayerAlly(Player(O5),Y7[0]))>2)then
call ASE(O5,1093681491,1093678672,1093683765,1395667000,1395667029,17,20)
else
call ASE(O5,1093681491,1093683765,1093678672,1395667000,1395667029,17,20)
endif
elseif(i1==1211117641)then
call ASE(O5,1093684791,1093684792,1093684802,1093684567,1093809987,106,106)
elseif(i1==1311781207)then
call ASE(O5,1093685074,1093742668,1093684817,1093742673,1093747778,17,18)
elseif(i1==1311780946)then
call ASE(O5,1093677385,1093685825,1095328612,1093685808,0,$F,16)
elseif(i1==1211117650)then
call ASE(O5,1093743955,1093685813,1093743958,1093743946,0,5,5)
elseif(i1==1211117646)then
call ASE(O5,1093685575,1093685573,1093685815,1093685579,1093808465,5,5)
elseif(i1==1211117624)then
call ASE(O5,1093682775,1093683024,1093684531,1093682774,0,4,4)
elseif(i1==1160785973)then
call ASE(O5,1093678642,1093678129,1093678130,1093678388,1093677141,$9A,$9A)
elseif(i1==1315988077)then
call ASE(O5,1093678669,1093684568,1097032808,1093684561,1093747254,6,$A)
elseif(i1==1211117616)then
call ASE(O5,1093677139,1093816142,1093677142,1093816118,0,6,$A)
elseif(i1==1315074670)then
call ASE(O5,1093677622,1093677625,1093685570,1093686851,0,9,7)
elseif(i1==1215063922)then
call ASE(O5,1093677894,1093812553,1093681996,1093677895,0,$F,6)
elseif(i1==1164207469)then
call ASE(O5,1093677618,1093684057,1095066220,1093682483,0,9,3)
elseif(i1==1433631084)then
call ASE(O5,1093677907,1093677909,1093678644,1093678160,0,3,$D)
elseif(i1==1214345830)then
call ASE(O5,1093679182,1093679190,1093678657,1093682514,0,18,5)
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
call ASE(O5,1093681733,1093808460,1093685040,1093748042,0,$C,9)
elseif(i1==1315007329)then
call ASE(O5,1093677108,1093749073,1093678913,1093681716,0,1,3)
elseif(i1==1332898670)then
call ASE(O5,1093677136,1093677360,1093685848,1093677128,1093681457,17,23)
elseif(i1==1215723364)then
call ASE(O5,1093677633,1094934883,1093744463,1093683534,1093747031,$E,4)
elseif(i1==1215128178)then
call ASE(O5,1093683779,1093677616,1093684789,1093810503,1093810504,16,20)
elseif(i1==1164799855)then
call ASE(O5,1093682263,1093682264,1093677378,1093682265,1093752642,26,22)
elseif(i1==1433105516)then
call ASE(O5,1093683511,1093744688,1093681713,1093747288,0,18,25)
elseif(i1==1214409837)then
call ASE(O5,1093679157,1093742898,1093742680,1093742932,0,19,19)
elseif(i1==1316252014)then
call ASE(O5,1093678405,1093678137,1093681745,1093678645,0,$9D,19)
elseif(i1==1164799603)then
call ASE(O5,1093808453,1095067246,1093677391,1093752632,1093752633,18,19)
elseif(i1==1328558160)then
call ASE(O5,1093682766,1093682998,1093684056,1093683000,0,1,$C)
elseif(i1==1212363833)then
call ASE(O5,1093678643,1093809220,1093815125,1093678933,0,$A,9)
elseif(i1==1315070563)then
call ASE(O5,1093678407,1093677131,1093678135,1093684529,1093747032,1,$B)
elseif(i1==1214931305)then
call ASE(O5,1093748025,1093678147,1095262562,1093677906,1093681494,8,17)
elseif(i1==1212365106)then
call ASE(O5,1093682266,1093684025,1093685831,1093677130,0,1,$A)
elseif(i1==1211117617)then
call ASE(O5,1093744944,1093677387,1093814611,1093752648,0,$B,4)
elseif(i1==1211117633)then
call ASE(O5,1093810260,1093684045,1093684310,1093684308,1093747539,$99,$99)
elseif(i1==1211117620)then
call ASE(O5,1093677382,1093677623,1093744728,1093677392,1093679450,16,23)
elseif(i1==1432580716)then
call ASE(O5,1093681754,1093684300,1093744977,1093682009,0,$F,16)
elseif(i1==1333027688)then
call ASE(O5,1093686091,1093682250,1093682252,1093682248,1093750594,$F,16)
if IsPlayerAlly(Player(O5),Y7[0])then
set DI7=true
else
set DJ7=true
endif
elseif(i1==1311781185)then
call ASE(O5,1093743692,1093684314,1093815892,1093684275,0,26,22)
elseif(i1==1311788343)then
call ASE(O5,1093815877,1093815361,1093815362,1093687856,0,25,22)
elseif(i1==1311788363)then
call ASE(O5,1093815601,1093815372,1093815373,1093815600,0,25,22)
elseif(i1==1211117643)then
call ASE(O5,1093678410,1093678658,1093678664,1093681483,1093748313,$97,$97)
elseif(i1==1215657064)then
call ASE(O5,1095657827,1093750841,1093677913,1093684291,0,$9C,$9C)
elseif(i1==1332179560)then
call ASE(O5,1093682242,1093742660,1093682231,1093687627,0,$A,9)
elseif(i1==1214344551)then
call ASE(O5,1093677402,1093809742,1093815628,1093678938,0,$98,20)
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
call ASE(O5,1093681461,1093681464,0,1093681479,0,3,$B)
elseif(i1==1215130471)then
call ASE(O5,0,0,0,1093679160,0,16,23)
elseif(i1==1211117636)then
call ASE(O5,1093685041,1093685071,1093681732,1093685042,1093810233,$9B,16)
elseif(i1==1160786000)then
call ASE(O5,1093685046,1093685047,1093685048,1093685045,1093747249,19,25)
elseif(i1==1311781193)then
call ASE(O5,1093685043,1093750345,1093683532,1095656306,0,6,$B)
elseif(i1==1311781206)then
call ASE(O5,1093684054,1093684280,1093684302,1093684053,0,$E,$C)
elseif(i1==1211117649)then
call ASE(O5,1093685584,1093685582,1093685585,1093685586,1093747251,$B,$B)
elseif(i1==1160786265)then
call ASE(O5,1093685839,1093748033,1093685846,1093685840,0,9,$A)
elseif(i1==1311780930)then
call ASE(O5,1093686073,1093686083,1093686082,1093686072,1093751120,$D,18)
elseif(i1==1311787088)then
call ASE(O5,1093750087,1093748819,1093748817,1093750089,48,1,1)
elseif(i1==1211119409)then
call ASE(O5,1093749069,1093749303,1093748818,1093749070,48,1,1)
elseif(i1==1160785970)then
call ASE(O5,1093748023,1093747792,1093748022,1093747023,1093752150,1,1)
elseif(i1==1160786506)then
call ASE(O5,1093751894,1093751639,1093751637,1093752118,48,1,1)
elseif(i1==1160786505)then
call ASE(O5,1093753167,1093751607,1093753170,1093753169,48,1,1)
elseif(i1==1160786502)then
call ASE(O5,1093751370,1093753176,1093753177,1093751371,48,1,1)
elseif(i1==1160786520)then
call ASE(O5,1093809990,1093809991,1093810006,1093809992,48,1,1)
if WQ7(Player(O5))then
set DH7=true
endif
elseif(i1==1211117652)then
call ASE(O5,1093687860,1093687861,1093687862,1093687864,1093747542,1,1)
elseif(i1==1211117653)then
call ASE(O5,1093808471,1093808472,1093808470,1093808473,1093748565,1,1)
elseif(i1==1311786311)then
call ASE(O5,1093743178,1093743179,1093743689,1093743184,1093747766,1,1)
elseif(i1==1160786510)then
call ASE(O5,1093751631,1093751633,1093808697,1093751861,1093808949,1,1)
elseif(i1==1328558406)then
call ASE(O5,1093751873,1093751864,1093810257,1093751874,0,1,1)
elseif(i1==1211117651)then
call ASE(O5,1093743696,1093743698,1093685591,1093743695,0,1,1)
elseif(i1==1328558390)then
call ASE(O5,1093748044,1093744982,1093744986,1093744975,0,1,1)
elseif(i1==1160786504)then
call ASE(O5,1093751608,1093751618,1093751604,1093751617,0,1,1)
elseif(i1==1311788336)then
call ASE(O5,1093814323,1093814320,1093814355,1093814859,0,1,1)
elseif(i1==1160786507)then
call ASE(O5,1093814850,1093814834,1093813593,1093813065,0,1,1)
elseif(i1==1211122767)then
call ASE(O5,1093812805,1093814612,1093814350,1093812807,0,1,1)
elseif(i1==1160786738)then
call ASE(O5,1093813835,1093813555,1093813556,1093813557,0,1,1)
else
call ASE(O5,HK4[GetUnitPointValue(it)],HM4[GetUnitPointValue(it)],HN4[GetUnitPointValue(it)],HO4[GetUnitPointValue(it)],HP4[GetUnitPointValue(it)],1,1)
endif
set bj_forLoopAIndex=O5
call AQE(i1)
endfunction
function AAE takes nothing returns nothing
call JO9(GetTriggerUnit())
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)then
if(GetUnitTypeId(GetTriggerUnit())!=1211117642)then
call ExecuteFunc("UD")
else
call ExecuteFunc("xh")
endif
elseif(GetUnitTypeId(GetTriggerUnit())!=1211117642)then
if not(((QZ4!=null)and(IsTriggerEnabled(QZ4)))and(((GetOwningPlayer(GetTriggerUnit())==QS4)and(QU4!=null))or((GetOwningPlayer(GetTriggerUnit())==QT4)and(QV4!=null))))then
set bj_lastLoadedUnit=GetTriggerUnit()
call AZE(GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)),bj_lastLoadedUnit,GetUnitTypeId(bj_lastLoadedUnit))
call ExecuteFunc("ABE")
endif
endif
endfunction
function ACE takes integer O5,integer NE7 returns nothing
local integer A3E=0
local real x
local real y
local integer A6E=K64
local integer ALE=K04
local integer kg=0
local player pl=Player(O5)
local integer i=0
set LP4="AI_DraftAIPlayers"
if(WR7(pl)and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(G7[GetPlayerId(pl)]==null))then
if(((WM7(pl))and(not O4))or((O4)and(GetRandomInt(1,2)==1)))then
set A6E=K64
set ALE=KL4
else
set A6E=K14
set ALE=K04
endif
if(WM7(pl))then
set x=GetRandomReal(GetRectMinX(L9),GetRectMaxX(L9))
set y=GetRandomReal(GetRectMinY(L9),GetRectMaxY(L9))
else
set x=GetRandomReal(GetRectMinX(C9),GetRectMaxX(C9))
set y=GetRandomReal(GetRectMinY(C9),GetRectMaxY(C9))
endif
set eY[GetPlayerId(pl)]=0
loop
set A3E=GetRandomInt(A6E,ALE)
if((not G[A3E])and(ND7(KC4[A3E],NE7)or i>20))then
set G7[GetPlayerId(pl)]=CreateUnit(pl,KC4[A3E],x,y,bj_UNIT_FACING)
endif
set i=i+1
exitwhen(G7[GetPlayerId(pl)]!=null)
endloop
if(not(D4 or E4 or Z8 or HC4))then
call AdjustPlayerStateBJ(-$FA,pl,PLAYER_STATE_RESOURCE_GOLD)
endif
endif
set pl=null
endfunction
function SEv takes nothing returns nothing
if(IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))then
if(GetUnitTypeId(GetEnumUnit())==1429221430)then
call ExecuteFunc("ZI8")
endif
elseif((GetUnitTypeId(GetEnumUnit())==1848651828)or(GetUnitTypeId(GetEnumUnit())==1848652088)or(GetUnitTypeId(GetEnumUnit())==1848652099)or(GetUnitTypeId(GetEnumUnit())==1848652103))then
call RemoveUnit(GetEnumUnit())
endif
endfunction
function A1E takes player pl,boolean A0E returns nothing
local integer A6E
local integer ALE
local integer A3E
local integer O5=GetPlayerId(pl)
local integer NE7=R47(GetHandleId(pl),"AI|Class")
local integer i=0
set LP4="SXv"
if(((WM7(pl))and(not O4))or((O4)and(GetRandomInt(1,2)==1)))then
set A6E=K64
set ALE=KL4
else
set A6E=K14
set ALE=K04
endif
if(A0E)then
if O4 or X8 then
set W4=100
endif
call AdjustPlayerStateBJ(-1*W4,pl,PLAYER_STATE_RESOURCE_GOLD)
endif
call GroupClear(H8)
set bj_groupEnumOwningPlayer=pl
call GroupEnumUnitsInRect(H8,GetWorldBounds(),filterGetUnitsInRectOfPlayer)
call ForGroup(H8,function OI9)
call A57(G7[O5])
set G7[O5]=null
set I[O5]=true
loop
set A3E=GetRandomInt(A6E,ALE)
if(G[A3E]==false and(ND7(KC4[A3E],NE7)or i>20))then
set G[A3E]=true
if(WM7(pl))then
set G7[O5]=CreateUnit(pl,KC4[A3E],GetRectCenterX(GD),GetRectCenterY(GD),bj_UNIT_FACING)
else
set G7[O5]=CreateUnit(pl,KC4[A3E],GetRectCenterX(FD),GetRectCenterY(FD),bj_UNIT_FACING)
endif
call XH7(KC4[A3E])
endif
set i=i+1
exitwhen G7[O5]!=null
endloop
endfunction
function A5E takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local player pl=OW7(S2I(SubString(VH,9,StringLength(VH))))
set LP4="A5E"
if((pl!=null)and(WR7(pl))and(IsPlayerInForce(pl,QW4)))then
if((IsPlayerAlly(GetTriggerPlayer(),pl))or(P27(not IsPlayerAlly(GetTriggerPlayer(),Y7[0]))==null))then
if((I[GetPlayerId(pl)])or(G7[GetPlayerId(pl)]==null))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Cannot repick")
elseif(Bz>60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Too late to repick")
else
call A1E(pl,false)
endif
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Cannot force repick on enemies with human ally")
endif
endif
set pl=null
endfunction
function A2E takes nothing returns nothing
local string VH=GetEventPlayerChatString()
local integer A_E=1
local boolean O6=IsPlayerAlly(GetTriggerPlayer(),Y7[0])
local boolean B4E
set LP4="A2E"
if((O)and((VH=="-pa")or(VH=="-pe"))and oo[GetPlayerId(GetTriggerPlayer())]==false)then
set Gs=true
if(VH=="-pa")then
set B4E=O6
else
set B4E=not O6
endif
loop
if(WQ7(P57(A_E,B4E))and G7[GetPlayerId(P57(A_E,B4E))]==null)then
exitwhen true
endif
set A_E=A_E+1
exitwhen(A_E>5)
endloop
if((A_E<=5)and(P_7(O6)==null))then
if((G7[GetPlayerId(P27(O6))]==null)and(not oo[GetPlayerId(P27(O6))]))then
if(O6)then
set QU4=P57(A_E,B4E)
else
set QV4=P57(A_E,B4E)
endif
if(not O4)then
call SetUnitOwner(h4[512+GetPlayerId(P27(O6))],P_7(O6),false)
call SetUnitOwner(h4[512+GetPlayerId(P_7(O6))],P27(O6),false)
if VH=="-pe" then
set nc=CreateUnitAtLoc(P27(O6),1848651843,GetRectCenter(pr),0)
set Vc=CreateUnitAtLoc(P27(O6),1848651843,GetRectCenter(qr),0)
if not O4 then
call XK7(GetTriggerPlayer())
endif
endif
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,"Pick a hero for "+P[GetPlayerId(P_7(O6))]+GetPlayerName(P_7(O6))+"|r. Type "+"|c00dd8dff"+"-px|r to cancel.")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"You should pick heroes for the AI before choosing your own hero. Randomized instead.")
call ACE(GetPlayerId(P57(A_E,B4E)),0)
endif
elseif(P_7(O6)!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"Already picking for "+P[GetPlayerId(P_7(O6))]+GetPlayerName(P_7(O6))+"|r")
endif
elseif(VH=="-px")then
if not O4 then
call XM7(GetTriggerPlayer())
endif
if(P_7(O6)!=null)then
call SetUnitOwner(h4[512+GetPlayerId(P27(O6))],P27(O6),false)
call SetUnitOwner(h4[512+GetPlayerId(P_7(O6))],P_7(O6),false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
if(O6)then
set QU4=null
else
set QV4=null
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"Picking cancelled")
endif
elseif((not O)and((VH=="-pa")or(VH=="-pe")))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,5.,"|c00888888Too early to pick a hero.|r")
endif
endfunction
function B7E takes nothing returns boolean
local integer O5=1
set LP4="B7E"
loop
exitwhen O5>5
if(WP7(Y7[O5])and(G7[GetPlayerId(Y7[O5])]==null))then
return true
elseif(WP7(Z7[O5])and(G7[GetPlayerId(Z7[O5])]==null))then
return true
endif
set O5=O5+1
endloop
return false
endfunction
function B8E takes nothing returns nothing
local integer O5=1
local boolean array B9E
local integer i
local integer j
set LP4="B8E"
if(Bz<68.)then
if(((V8)or(not Gs))and(Bz>43.))then
elseif(B7E()or Bz<30.)then
return
else
call NX7(1.)
endif
endif
call DestroyTrigger(GetTriggeringTrigger())
call DisableTrigger(QZ4)
if(QU4!=null)then
call DisplayTimedTextToPlayer(QS4,0,0,5.,"Picking for AI has ended.")
call SetUnitOwner(h4[512+GetPlayerId(QS4)],QS4,false)
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set QU4=null
endif
if(QV4!=null)then
call DisplayTimedTextToPlayer(QT4,0,0,5.,"Picking for AI has ended.")
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
call RemoveUnit(nc)
call RemoveUnit(Vc)
set nc=null
set Vc=null
set QV4=null
endif
if((D4)or(Z8)or(E4)or(HC4)or(O14)or(G9)or(RY4)or(SM4))then
return
endif
set O5=1
loop
exitwhen O5>5
if G7[GetPlayerId(Y7[O5])]!=null then
set B9E[N87(GetUnitTypeId(G7[GetPlayerId(Y7[O5])]))]=true
endif
if G7[GetPlayerId(Z7[O5])]!=null then
set B9E[6+N87(GetUnitTypeId(G7[GetPlayerId(Z7[O5])]))]=true
endif
set O5=O5+1
endloop
if HA4<=4 then
set B9E[3]=true
endif
if HA4<=3 then
if GetRandomInt(0,2)==0 then
set B9E[4]=true
else
set B9E[5]=true
endif
endif
if HA4<=2 then
if B9E[4]then
set B9E[5]=true
else
set B9E[4]=true
endif
endif
if HB4<=4 then
set B9E[6+3]=true
endif
if HB4<=3 then
if GetRandomInt(0,2)==0 then
set B9E[6+4]=true
else
set B9E[6+5]=true
endif
endif
if HB4<=2 then
if B9E[4]then
set B9E[6+5]=true
else
set B9E[6+4]=true
endif
endif
set O5=1
loop
exitwhen O5>5
if(WQ7(Y7[O5])and(G7[GetPlayerId(Y7[O5])]==null))then
set j=0
loop
exitwhen j>5
set i=GetRandomInt(1,5)
if B9E[i]then
set i=0
else
exitwhen true
endif
set j=j+1
endloop
if i==0 then
set i=5
loop
exitwhen(not B9E[i])or i==0
set i=i-1
endloop
endif
call ACE(GetPlayerId(Y7[O5]),i)
if not(i==0 or ND7(GetUnitTypeId(G7[GetPlayerId(Y7[O5])]),i))then
set i=N87(GetUnitTypeId(G7[GetPlayerId(Y7[O5])]))
endif
set B9E[i]=true
call Q97(GetHandleId(Y7[O5]),"AI|Class",i)
call NX7(1.)
endif
if(WQ7(Z7[O5])and(G7[GetPlayerId(Z7[O5])]==null))then
set j=0
loop
exitwhen j>5
set i=GetRandomInt(1,5)
if B9E[6+i]then
set i=0
else
exitwhen true
endif
set j=j+1
endloop
if i==0 then
set i=5
loop
exitwhen(not B9E[6+i])or i==0
set i=i-1
endloop
endif
call ACE(GetPlayerId(Z7[O5]),i)
if not(i==0 or ND7(GetUnitTypeId(G7[GetPlayerId(Z7[O5])]),i))then
set i=N87(GetUnitTypeId(G7[GetPlayerId(Z7[O5])]))
endif
set B9E[6+i]=true
call Q97(GetHandleId(Z7[O5]),"AI|Class",i)
call NX7(1.)
endif
set O5=O5+1
endloop
endfunction
function BDE takes unit it,integer BEE returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(it),BEE,true)
call SelectHeroSkill(it,BEE)
endfunction
function BFE takes integer i1 returns boolean
return(((i1==1311781174)or(i1==1311781175)or(i1==1311781442)))
endfunction
function BGE takes integer i1 returns boolean
return((i1==1430468406)or(i1==1316252014)or(i1==1429221456)or(i1==1432646245)or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(i1==1215657064)or(i1==1311781207)or(i1==1311780946)or(i1==1315074670)or(i1==1164666213)or(i1==1429221441))
endfunction
function BHE takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer BIE=0
local integer BJE=0
local integer BKE=0
local integer BME=0
local integer kt=0
local integer UP
local player BNE=GetOwningPlayer(it)
local integer BOE=0
set LP4="BHE"
if(X_4[GetPlayerId(BNE)]==1)then
set BOE=1
elseif(X_4[GetPlayerId(BNE)]==3)then
set BOE=2
elseif(X_4[GetPlayerId(BNE)]==5)then
set BOE=3
endif
loop
call TriggerSleepAction(.1)
set BKE=GetHeroSkillPoints(it)
exitwhen((BIE>$A)or(BKE==0)or(BJE>25)or(not OA7(it)))
set kt=GetHeroLevel(it)+1-BKE
if((kt<=$E)and(BIE<7))then
set BME=GetRandomInt(0,2)
else
set BME=GetRandomInt(0,4)
endif
if(BIE==0)then
set BME=0
if((kt==6)or(kt==$B)or(kt==16))then
set BME=3
elseif(kt>=$F)then
set BME=4
endif
endif
if(BME==3)then
if((BGE(i1))and(kt<$A))then
set BME=GetRandomInt(0,1)
elseif((i1==1311781199)and(kt<$E))then
set BME=GetRandomInt(0,2)
endif
elseif(BIE==0)then
if((BGE(i1))and(kt==$A))then
set BME=3
elseif((i1==1311781199)and((kt==$E)or(kt==$F)))then
set BME=3
endif
endif
if((BME==2)and(kt<$A))then
set BME=GetRandomInt(0,1)
endif
if(((i1==1215722344)or(i1==1311781207))and(BIE<2))then
if((kt==2)or(kt==5))then
set BME=2
elseif(((kt==$A)or(kt==$C))and(BME==2))then
set BME=GetRandomInt(0,1)
endif
elseif(((i1==1430466609)or(i1==1164207469)or(i1==1162032181)or(i1==1429221456)or(i1==1164799603)or(i1==1212365106)or(i1==1311781206)or(i1==1311780930))and(BIE<2))then
if(kt==1)then
set BME=2
elseif((kt==$A)and(BME==2))then
set BME=GetRandomInt(0,1)
endif
elseif((i1==1432642913)and(kt==2)and(BIE<3))then
set BME=2
endif
if((i1==1160786241)and(BIE<3))then
if((kt<=16)and(BME==2))then
set BME=4
elseif(((kt==17)or(kt==18)or(kt==19)or(kt==20))and(BME==4))then
set BME=2
endif
elseif((i1==1432510828)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==8)or(kt==$C))then
set BME=0
elseif((kt==2)or(kt==5)or(kt==9)or(kt==$D))then
set BME=1
elseif((kt==3)or(kt==7)or(kt==$A)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1332179560)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==6)or(kt==17))then
set BME=2
elseif((kt==9)or(kt==$B)or(kt==16))then
set BME=3
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
else
set BME=4
endif
elseif((i1==1429221430)and(BIE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==$A)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$C))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117641)and(BIE<3))then
if((kt==1)or(kt==8)or(kt==$A)or(kt==18))then
set BME=0
elseif((kt==3)or(kt==$F)or(kt==19)or(kt==25))then
set BME=2
elseif((kt==7)or(kt==9)or(kt==$C)or(kt==$D))then
set BME=1
elseif((kt<=$E)and(BME!=3))then
set BME=4
endif
elseif((i1==1214344551)and(BIE<3))then
if((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==1)or(kt==5)or(kt==8)or(kt==$A))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1165451634)and(BIE<3))then
if((kt==1)or(kt==23)or(kt==24)or(kt==25))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==7)or(kt==8))then
set BME=1
elseif((kt==$D)or(kt==$E)or(kt==$F)or(kt==17))then
set BME=2
elseif((kt<=17)and(BME!=3))then
set BME=4
endif
elseif((i1==1160785972)and(BIE<3))then
if((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1313026096)and(BIE<3))then
if((kt==$C)or(kt==$D)or(kt==$E)or(kt==$F))then
set BME=1
elseif((kt==17)or(kt==18)or(kt==19)or(kt==20))then
set BME=2
elseif((kt<=$C)and(BME!=3)and(BME!=0))then
set BME=4
endif
elseif((i1==1430468913)and(BIE<3))then
if((kt==$A)or(kt==$B)or(kt==$C)or(kt==$D))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
endif
elseif((i1==1215657064)and(BIE<3))then
if((kt==2)or(kt==8)or(kt==9)or(kt==25))then
set BME=1
elseif((kt==4)or(kt==$A)or(kt==$B)or(kt==$C))then
set BME=2
elseif((kt==6)or(kt==$F)or(kt==16))then
set BME=3
elseif((kt<=20)and(BME!=0))then
set BME=4
endif
elseif((i1==1160785973)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1332766568)and(BIE<3))then
if(BOE==1)then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==21)or(kt==22)or(kt==23)or(kt==24))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(BOE==2)then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(BOE==3)then
if((kt==2)or(kt==8)or(kt==9)or(kt==$C))then
set BME=0
elseif((kt==3)or(kt==5)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
else
if((kt==2)or(kt==8)or(kt==9)or(kt==$C))then
set BME=0
elseif((kt==3)or(kt==5)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
endif
elseif((i1==1328558160)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==6)or(kt==8))then
set BME=0
elseif((kt==$A)or(kt==16)or(kt==17)or(kt==18))then
set BME=1
elseif((kt==$C)or(kt==23)or(kt==24)or(kt==25))then
set BME=2
elseif((kt==$B)or(kt==19)or(kt==20))then
set BME=3
else
set BME=4
endif
elseif((i1==1214931305)and(BIE<3))then
if((kt==4)or(kt==18)or(kt==19)or(kt==20))then
set BME=0
elseif((kt==1)or(kt==$D)or(kt==$E)or(kt==$F))then
set BME=1
elseif((kt==2)or(kt==3)or(kt==6)or(kt==9))then
set BME=2
elseif((kt==$B)or(kt==16)or(kt==17))then
set BME=3
else
set BME=4
endif
elseif((i1==1162032439)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==9)or(kt==$C)or(kt==$E))then
set BME=1
elseif((kt==4)or(kt==8)or(kt==$A)or(kt==$D))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1311781185)and(BIE<3))then
if((kt==1)or(kt==8)or(kt==9)or(kt==$E))then
set BME=0
elseif((kt==4)or(kt==$A)or(kt==$C)or(kt==$D))then
set BME=1
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1162032181)and(BIE<3))then
if((kt==3)or(kt==5)or(kt==7)or(kt==9))then
set BME=0
elseif((kt==$C)or(kt==$D)or(kt==$E)or(kt==$F))then
set BME=1
elseif((kt==1)or(kt==17)or(kt==18)or(kt==19))then
set BME=2
elseif((kt==$A)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(((i1==1311781199)or(i1==1311781171))or((i1==1311781172)or(i1==1311781173))and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==$A))then
set BME=1
elseif((kt==17)or(kt==18)or(kt==19)or(kt==20))then
set BME=2
elseif((kt==$B)or(kt==$C)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1215128178)and(BIE<3))then
if((kt==3)or(kt==4)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==18)or(kt==19)or(kt==20))then
set BME=1
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==17))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))and(BIE<3)then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$B))then
set BME=1
elseif((kt==4)or(kt==8)or(kt==$C)or(kt==$D))then
set BME=2
elseif((kt==6)or(kt==$F)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))and(BIE<3))then
if((kt==4)or(kt==5)or(kt==$C)or(kt==$D))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==7)or(kt==9))then
set BME=1
elseif((kt==17)or(kt==18)or(kt==19)or(kt==20))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221446)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==7)or(kt==$D))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==$C))then
set BME=1
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117643)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==7)or(kt==9))then
set BME=0
elseif((kt==3)or(kt==$D)or(kt==$F)or(kt==17))then
set BME=1
elseif((kt==2)or(kt==18)or(kt==20)or(kt==22))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1311787088)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$C)or(kt==17)or(kt==18)or(kt==19))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117653)and(BIE<3))then
if((kt==4)or(kt==$E)or(kt==$F)or(kt==16)or(kt==18)or(kt==20)or(kt==21))then
set BME=0
elseif((kt==6)or(kt==$A)or(kt==19)or(kt==22)or(kt==23)or(kt==24)or(kt==25))then
set BME=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==8)or(kt==9)or(kt==$B)or(kt==$D))then
set BME=2
elseif((kt==2)or(kt==7)or(kt==$C)or(kt==17))then
set BME=3
endif
elseif(((i1==1211117620)or(i1==1160786505))and(BIE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211119409)and(BIE<3))then
if((kt==3)or(kt==4)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786502)and(BIE<3))then
if((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(((i1==1211119187)or(i1==1211117636))and(BIE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1433105516)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117616)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==8)or(kt==9)or(kt==$C)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==$A)or(kt==$D))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1333027688)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1214345830)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==4)or(kt==8)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==9)or(kt==$A)or(kt==$C))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1315988077)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==$C))then
set BME=1
elseif((kt==$D)or(kt==$E)or(kt==$F)or(kt==17))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117617)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==8)or(kt==9)or(kt==$A)or(kt==$C))then
set BME=1
elseif((kt==2)or(kt==$D)or(kt==$E)or(kt==$F))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1432580716)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==6)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==8))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1328558389)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1162032951)and(BIE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117649)and(BIE<3))then
if((kt==9)or(kt==$B)or(kt==$C)or(kt==$D))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$F)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221445)and(BIE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==9)or(kt==$A)or(kt==$C))then
set BME=1
elseif((kt==4)or(kt==8)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1315074670)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==8)or(kt==$A))then
set BME=0
elseif((kt==5)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1315007329)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==3)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==1)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1433631084)and(BIE<3))then
if((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==7)or(kt==9))then
set BME=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==8))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1311780946)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==7)or(kt==9))then
set BME=1
elseif((kt==5)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221441)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==6)or(kt==8))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==$C)or(kt==$D)or(kt==$E)or(kt==$F))then
set BME=2
elseif((kt==$A)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1315070563)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==$A)or(kt==$D)or(kt==$F)or(kt==17))then
set BME=1
elseif((kt==8)or(kt==9)or(kt==$C)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221451)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1332963428)and(BIE<3))then
if((kt==4)or(kt==8)or(kt==$A)or(kt==$D))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==2)or(kt==9)or(kt==$C)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117646)and(BIE<3))then
if((kt==2)or(kt==6)or(kt==8)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1430468406)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==6)or(kt==8))then
set BME=2
elseif((kt==9)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221424)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1215723364)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786242)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==4)or(kt==9)or(kt==$C)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==8)or(kt==$A)or(kt==$D))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1430466865)and(BIE<3))then
if((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1430468144)and(BIE<3))then
if((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==4)or(kt==7))then
set BME=1
elseif((kt==5)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(((i1==1211117650)or(i1==1211119433))and(BIE<3))then
if((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set BME=1
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((((i1==1311781174)or(i1==1311781175)or(i1==1311781442)))and(BIE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==$C))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==9)or(kt==$A)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786506)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160785970)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1429221443)and(BIE<3))then
if((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1328558154)and(BIE<3))then
if((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1164799855)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=0
elseif((kt==9)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==8)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1430467634)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==8)or(kt==9))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786520)and(BIE<3))then
if((kt==1)or(kt==4)or(kt==8)or(kt==9))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif(((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==4)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==2)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1212363833)and(BIE<3))then
if((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==2)or(kt==$B)or(kt==$C)or(kt==$D))then
set BME=0
elseif((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$E)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117652)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==9))then
set BME=0
elseif((kt==$A)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==1)or(kt==3)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1211117651)and(BIE<3))then
if((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==1)or(kt==8)or(kt==9)or(kt==$A))then
set BME=1
elseif((kt==2)or(kt==4)or(kt==5)or(kt==7))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1328558390)and(BIE<3))then
if((kt==2)or(kt==5)or(kt==8)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==7)or(kt==9))then
set BME=1
elseif((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786504)and(BIE<3))then
if((kt==2)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=0
elseif((kt==3)or(kt==5)or(kt==8)or(kt==$A))then
set BME=1
elseif((kt==1)or(kt==4)or(kt==7)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1160786510)and(BIE<3))then
if((kt==2)or(kt==5)or(kt==8)or(kt==$A))then
set BME=0
elseif((kt==1)or(kt==$C)or(kt==$E)or(kt==17))then
set BME=1
elseif((kt==3)or(kt==4)or(kt==7)or(kt==9))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1328558406)and(BIE<3))then
if((kt==1)or(kt==19)or(kt==21)or(kt==23))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==9)or(kt==$B)or(kt==$D)or(kt==16))then
set BME=2
elseif((kt==6)or(kt==$E)or(kt==17))then
set BME=3
else
set BME=4
endif
elseif(((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))and(BIE<3))then
if((kt==4)or(kt==8)or(kt==9)or(kt==$A))then
set BME=0
elseif((kt==2)or(kt==3)or(kt==5)or(kt==7))then
set BME=1
elseif((kt==1)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
elseif((i1==1311788336)and(BIE<3))then
if((kt==2)or(kt==5)or(kt==8)or(kt==$C))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set BME=1
elseif((kt==3)or(kt==9)or(kt==$D)or(kt==$E))then
set BME=0
else
set BME=4
endif
elseif((i1==1160786507)and(BIE<3))then
if((kt==2)or(kt==5)or(kt==8)or(kt==$C))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
elseif((kt==1)or(kt==4)or(kt==7)or(kt==$A))then
set BME=1
elseif((kt==3)or(kt==9)or(kt==$D)or(kt==$E))then
set BME=0
else
set BME=4
endif
elseif((i1==1211122767)and(BIE<3))then
if((kt==3)or(kt==7)or(kt==$A)or(kt==$E))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
elseif((kt==2)or(kt==5)or(kt==9)or(kt==$D))then
set BME=1
elseif((kt==1)or(kt==4)or(kt==8)or(kt==$C))then
set BME=0
else
set BME=4
endif
elseif((i1==1160786738)and(BIE<3))then
if((kt==2)or(kt==4)or(kt==8)or(kt==$A))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
elseif((kt==3)or(kt==$C)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==1)or(kt==5)or(kt==7)or(kt==9))then
set BME=0
else
set BME=4
endif
elseif((i1==1211117624)and(BIE<3))then
if((kt==2)or(kt==9)or(kt==$A)or(kt==$C))then
set BME=0
elseif((kt==1)or(kt==4)or(kt==$D)or(kt==$E))then
set BME=1
elseif((kt==3)or(kt==5)or(kt==7)or(kt==8))then
set BME=2
elseif((kt==6)or(kt==$B)or(kt==16))then
set BME=3
else
set BME=4
endif
endif
if(i1==1430468406)then
if(BME==0)then
call BDE(it,kT(it))
elseif(BME==1)then
call SelectHeroSkill(it,1093677635)
elseif(BME==2)then
call BDE(it,kS(it))
elseif(BME==3)then
call BDE(it,S57(it))
endif
elseif(i1==1215130471)then
if(BME==0)then
call BDE(it,S27(it))
elseif(BME==1)then
call BDE(it,S_7(it))
elseif(BME==2)then
call BDE(it,T47(it))
elseif(BME==3)then
call SelectHeroSkill(it,1093679160)
endif
else
if(BME==0)then
call BDE(it,eY[$80+O5])
if(i1==1315007329)then
set UP=GetUnitAbilityLevel(it,1093677108)
if(UP<=2)then
set hq[272+O5]=I2R(75*UP)
else
set hq[272+O5]=I2R($F+(57*UP))
endif
endif
elseif(BME==1)then
if(i1==1315334514)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682760,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682736,true)
endif
call BDE(it,eY[$90+O5])
if(i1==1214344551)then
set UP=GetUnitAbilityLevel(it,1093748535)
if(UP==1)then
set hq[272+O5]=85.
elseif(UP==2)then
set hq[272+O5]=70.
elseif(UP==3)then
set hq[272+O5]=55.
else
set hq[272+O5]=40.
endif
endif
elseif(BME==2)then
if((i1==1311781199)or(i1==1311781171))or((i1==1311781172)or(i1==1311781173))then
call SelectHeroSkill(it,1093748039)
call SelectHeroSkill(it,1093748041)
call SelectHeroSkill(it,1093748040)
call SelectHeroSkill(it,1093748037)
call SelectHeroSkill(it,1093748038)
elseif(BFE(i1))then
call SelectHeroSkill(it,1096904043)
else
call BDE(it,eY[$A0+O5])
endif
elseif(BME==3)then
call BDE(it,eY[$AC+O5])
if(eY[$BC+O5]!=0)then
call BDE(it,eY[$BC+O5])
endif
if(i1==1214931305)then
set UP=GetUnitAbilityLevel(it,1093677906)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093681494)
endif
if(UP<=2)then
set hq[272+O5]=I2R($C8+(100*UP))
else
set hq[272+O5]=600.
endif
elseif(i1==1332963428)then
set hq[272+O5]=I2R(85+(GetUnitAbilityLevel(it,1093677649)*$87))
elseif(i1==1332898670)then
set UP=GetUnitAbilityLevel(it,1093677128)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093681457)
endif
if(UP<=2)then
set hq[272+O5]=I2R(50+($96*UP))
else
set hq[272+O5]=610.
endif
elseif(i1==1162032951)then
set UP=GetUnitAbilityLevel(it,1093679152)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093752154)
set hq[272+O5]=125.
else
if(UP<=2)then
set hq[272+O5]=I2R(105+(30*UP))
else
set hq[272+O5]=250.
endif
endif
elseif(i1==1328558154)then
set UP=GetUnitAbilityLevel(it,1093682996)
if(UP>0)then
if(UP==1)then
set TB4[64+O5]=400.
elseif(UP==2)then
set TB4[64+O5]=550.
else
set TB4[64+O5]=700.
endif
else
set UP=GetUnitAbilityLevel(it,1093747768)
if(UP>0)then
if(UP==1)then
set TB4[64+O5]=550.
elseif(UP==2)then
set TB4[64+O5]=700.
else
set TB4[64+O5]=850.
endif
endif
endif
endif
endif
endif
if(BME==4)then
if((i1==1315334514)or(i1==1328558160)or(i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173)or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or(i1==1211117643)or(i1==1160786502)or(i1==1328558406)or(i1==1160786520)or(i1==1211122243)or(i1==1211119191)or(i1==1211119192)or(i1==1211119193)or(i1==1328558390)or(i1==1328558391)or(i1==1430468144)or(i1==1430467634)or(i1==1328558160)or(i1==1211117650)or(i1==1211119433))then
call SelectHeroSkill(it,1093684818)
elseif((BFE(i1))and(kt>21))then
call BDE(it,eY[$A0+O5])
call SelectHeroSkill(it,1096904043)
else
call SelectHeroSkill(it,1096904043)
endif
endif
set BIE=BIE+1
set BJE=BJE+1
if(BKE!=GetHeroSkillPoints(it))then
set BIE=0
endif
endloop
if(i1==1430468406)then
set eY[336+O5]=kT(it)
set eY[368+O5]=kS(it)
set eY[$AC+O5]=S57(it)
elseif(i1==1215130471)then
set eY[336+O5]=S27(it)
set eY[352+O5]=S_7(it)
set eY[368+O5]=T47(it)
endif
set it=null
set BNE=null
endfunction
function BPE takes unit it returns integer
local integer i1=GetUnitTypeId(it)
set LP4="tVv"
if((i1==1214344551)or(i1==1429221430)or(PD7(it,1952936552))or(PD7(it,1227894833))or(PD7(it,1868983399)))then
return 2
elseif((i1==1215722344)or(i1==1315007329)or(i1==1430468913)or(i1==1311781185))then
return 1
endif
return 0
endfunction
function BQE takes unit it returns boolean
local integer O5=1
local integer UP
local integer BRE=0
local boolean J4=false
local boolean BSE=false
local integer Iz
set LP4="tXv"
loop
if(IsUnitAlly(it,Y7[0]))then
set UP=GetPlayerId(Y7[O5])
else
set UP=GetPlayerId(Z7[O5])
endif
if((IsPlayerInForce(Player(UP),QW4))and(G7[UP]!=null))then
set Iz=BPE(G7[UP])
if(Iz==2)then
set BRE=BRE+1
set J4=true
elseif(Iz==1)then
set BRE=BRE+1
endif
set BSE=(BSE)or((Iz==0)and(PD7(G7[UP],1953265005))and(not PE7(G7[UP])))
endif
set O5=O5+1
exitwhen O5>5
endloop
if((BSE)and(not PD7(G7[UP],1953265005)))then
return false
endif
if(P17(IsUnitAlly(it,Y7[0]))==1)then
return((BRE==0)and(R87(Q_4,SK7(it)+"|G")))
else
return(((not J4)and(R87(Q_4,SK7(it)+"|G")))or(BRE<R2I(P17(IsUnitAlly(it,Y7[0]))/2)))
endif
endfunction
function BTE takes unit u returns boolean
local integer id=GetUnitTypeId(u)
set LP4="RestrictedItems_Exception"
return id==1164277353 or id==1164277357 or id==1160786518 or id==1160786519 or id==1160786517
endfunction
function BUE takes unit ZO7,item M47 returns nothing
local unit u=ZO7
local integer EM8=GetUnitTypeId(u)
local integer B58=OM7(M47)
set LP4="RestrictedItems_UpdateMeleeRange"
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER) or IsUnitType(u,UNIT_TYPE_HERO)==false then
if B58==W2 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[T2])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==BA then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[ZA])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==EZ then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[DZ])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DW4 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[DV4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==D84 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[D74])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==E_4 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[E24])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==Y0 then
if BTE(u)==false then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[X0])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
elseif B58==X0 then
if BTE(u) then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[Y0])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
elseif B58==QB then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[JB])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
else
if B58==T2 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[W2])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==ZA then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[BA])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DZ then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[EZ])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DV4 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[DW4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==D74 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[D84])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==E24 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[E_4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==X0 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[Y0])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==JB then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[QB])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
endif
set u=null
endfunction
function BVE takes unit ZO7,item M47 returns nothing
local unit u=ZO7
local integer EM8=GetUnitTypeId(u)
local integer B58=OM7(M47)
set LP4="RestrictedItems_UpdateMeleeRange2"
if IsUnitType(u,UNIT_TYPE_MELEE_ATTACKER)==false or IsUnitType(u,UNIT_TYPE_HERO)==false then
if B58==W2 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[T2])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==BA then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[ZA])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==EZ then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[DZ])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DW4 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[DV4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==D84 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[D74])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==E_4 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[E24])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==Y0 then
if BTE(u)==false then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[X0])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
elseif B58==QB then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[JB])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
else
if B58==T2 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[W2])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==ZA then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[BA])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DZ then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[EZ])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==DV4 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[DW4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==D74 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[D84])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==E24 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[E_4])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==X0 then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[Y0])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif B58==JB then
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=UnitAddItemById(u,SU[QB])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
endif
set u=null
endfunction
function BWE takes unit ZO7 returns nothing
local integer i=0
local item M47
set LP4="RestrictedItems_UpdateMeleeRange_All"
call DisableTrigger(H84)
loop
exitwhen i>5
set M47=UnitItemInSlot(ZO7,i)
if M47!=null then
call BVE(ZO7,M47)
endif
set i=i+1
endloop
call EnableTrigger(H84)
set M47=null
endfunction
function BXE takes unit S4 returns integer
local integer i=0
local integer n=0
local integer ED8=UnitInventorySize(S4)-1
loop
exitwhen i>ED8
if UnitItemInSlot(S4,i)==null then
set n=n+1
endif
set i=i+1
endloop
return n
endfunction
function BYE takes integer i1 returns boolean
return((i1==LV or i1==EW)or i1==AX or i1==UY or i1==YX or i1==OZ or i1==W3 or(i1>=UZ and i1<=WA)or(i1==A5 or i1==B5))
endfunction
function BZE takes integer B58 returns boolean
return B58==PC or B58==QC or B58==VC or B58==XC
endfunction
function BAE takes integer i1 returns boolean
return((i1==SY)or(i1==JV)or(i1==NV)or(i1==GY)or(i1==ZA)or(i1==FV)or(i1==QV)or(i1==WX)or(i1==GB)or(i1==QW)or(i1==HZ)or(i1==TV))or((i1==WC or i1==XC)or(i1==YA)or(i1==UY)or(i1==DZ or i1==EZ)or(i1==AX)or(i1==YX)or(i1==NX)or(i1==HW)or(i1==UW)or(i1==BV)or(i1==EV)or(i1==E24))
endfunction
function BBE takes integer O5,unit it returns boolean
local integer i=0
local integer i1=0
loop
exitwhen i>5
set i1=GetItemTypeId(UnitItemInSlot(it,i))
if i1==0 then
elseif(i1==SU[BC])or(i1==SU[VC])or(i1==SU[LV])or(i1==SU[EW])then
return true
elseif(i1==AU[BC])or(i1==AU[VC])or(i1==AU[LV])or(i1==AU[EW])then
return true
endif
set i1=GetItemTypeId(UnitItemInSlot(KT4[32+O5],i))
if i1==0 then
elseif(i1==SU[BC])or(i1==SU[VC])or(i1==SU[LV])or(i1==SU[EW])then
return true
elseif(i1==AU[BC])or(i1==AU[VC])or(i1==AU[LV])or(i1==AU[EW])then
return true
endif
set i=i+1
endloop
return false
endfunction
function BCE takes integer O5,unit it,item ON7,integer i1,boolean B3E returns integer
set bj_forLoopAIndex=R47(1128887405,"Prio|"+I2S(GetHandleId(G7[O5]))+I2S(i1))
if bj_forLoopAIndex!=0 then
return bj_forLoopAIndex
endif
if(i1==T0)or(i1==A5 or i1==B5)or(BU[i1]==BU[FQ4])then
return 101
elseif(ON7!=null)and(GetItemPlayer(ON7)!=Player(O5))and(i1!=G77[O5]and i1!=G77[16+O5])and(B3E or(B28(i1)==false and BYE(i1)==false))then
return-1
elseif(not B3E)and(i1==G77[O5]or i1==G77[16+O5])and(IsUnitType(it,UNIT_TYPE_HERO))then
if(i1==NC)and(GetUnitState(it,UNIT_STATE_MAX_MANA)>500)then
return-1
elseif((i1==PC)or(i1==QC))and(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8)then
return-1
endif
return 97
elseif(i1==M3)or(i1==RL or i1==WL)or(i1==ZL)or(i1==AL or i1==DD4)or(i1>=LL and i1<=F1)or(i1==O1)or(i1==S2)or(i1==P1)or(i1==Q1)or(i1==T1)or(i1==U1)or(i1==V1)or(i1>=A1 and i1<=O0)or(i1==X0 or i1==Y0)or(i1==B0)or(i1>=C0 and i1<=M5)or(i1==N5 or i1==R5 or i1==S5)or(i1==T5 or i1==W5)or(i1==C5)or(i1==L5 or i1==E2)or(i1==F2 or i1==H2)or(i1==P2 or i1==R2)or(i1==T2 or i1==W2)or(i1==X2)or(i1==Z2)or(i1==D44)or(i1==DF4)or(i1==DG4)or(i1==DH4)or(i1==DI4)or(i1==DJ4 or i1==DK4 or i1==DM4 or i1==DN4)or(i1==DO4 or i1==DP4)or(i1==DQ4)or(i1==DT4)or(i1==DU4)or(i1==DZ4)or(i1==E54)or(i1==EC)or(i1==N3)or(i1==R3)then
return 100
elseif(i1==QW or i1==RW)or(i1==X1)or(i1==H1 or i1==J1)then
return 99
elseif(i1==E6 or i1==F6 or i1==G6 or i1==H6 or i1==DR4 or i1==YB or i1==LB or i1==F44)then
if G47[304+O5]!=null and GetWidgetLife(G47[304+O5])>0 and G87[304+O5]!=i1 and IsUnitType(it,UNIT_TYPE_HERO)then
return-1
else
return 100
endif
elseif(i1==EV)then
if G47[304+O5]!=null and G87[304+O5]!=i1 and IsUnitType(it,UNIT_TYPE_HERO)then
return-1
else
return 99
endif
elseif(i1==WC or i1==XC)then
if B3E or G97[64+O5]then
return 1
else
return 98
endif
elseif(i1==N6 or i1==S6)then
return 98
elseif(i1==D74 or i1==D84)then
return 23
elseif(i1==LV or i1==EW)then
if B3E then
return 2
else
return 22
endif
elseif(i1==TC)or(i1==VC)or(i1==BC)or(i1==LC)then
if B3E then
return 1
else
return $F
endif
elseif(i1==HY)then
return 21
elseif(i1==AV)or(i1==VW)or(i1==ZW)then
return 20
elseif(i1==W3)then
return 19
elseif(i1==R1)or(i1==DX4 or i1==DY4)then
return 18
elseif(i1==HL or i1==OL)then
return 17
elseif(i1==XV)or(i1==NW)or(i1==HZ)then
return 16
elseif(i1==RB or i1==VB)then
return $F
elseif(i1==NX)then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)>1500.)then
return $A
else
return $F
endif
elseif(i1>=UZ and i1<=IA)then
return $E
elseif(i1==H3)then
return $D
elseif(i1==YW)or(i1==RZ)or(i1==GB)or(i1==V6)then
return $C
elseif(i1==UV)or(i1==RX)then
return $B
elseif(i1==SV)or(i1==SX)then
return $A
elseif(i1==BV)or(i1==NZ)or(i1==YX)or(i1==OZ)then
return 9
elseif(i1==YA)or(i1==DS4)or(i1==E04)then
if(GetUnitState(it,UNIT_STATE_MAX_MANA)>500.)then
return 8
else
return $C
endif
elseif(i1==OV)or(i1==GX)or(i1==ZY)or(i1==HW)or(i1==UW)or(i1==WX)or(i1==GC or i1==JC)then
return 9
elseif(i1==ZA)or(i1==B3 or i1==C3)or(i1==DV4 or i1==DW4)then
return 8
elseif(i1==E24 or i1==E_4)then
return 7
elseif(i1==W6 or i1==A6 or i1==DL)then
return 6
elseif(i1==Y3)or(i1==Z3)then
return 5
elseif(i1==FV)or(i1==JV)or(i1==NV)or(i1==GY)or(i1==QV)or(i1==TV)then
return 4
elseif(i1==BA)or(i1==AX)or(i1==UY)or(i1==DZ or i1==EZ)then
return 3
elseif(i1==MV)or(i1==CV)or(i1==TW)or(i1==SY)or(i1==ZX)then
return 2
elseif(i1==NC)or(i1==PC)or(i1==QC)or(i1==YC)or(i1==ZC)or(i1==DE4)then
return 1
elseif(i1==OW)then
return 0
elseif(i1>=DA4 and i1<=FF4)then
return-1
elseif(i1==JB or i1==QB)or(i1==OC)or(i1==AC)or(i1==CC)or(i1==D94)then
return-1
endif
return-1
endfunction
function B6E takes integer O5,unit it,boolean BLE returns integer
local integer i=0
local integer j=0
local item ON7=null
loop
exitwhen i>5
set ON7=UnitItemInSlot(it,i)
if ON7==null then
set j=j+1
elseif BLE then
if(BCE(O5,it,ON7,OK7(ON7),false)<99)then
set j=j+1
endif
endif
set i=i+1
endloop
set ON7=null
return j
endfunction
function B1E takes integer O5,unit it,item ON7,integer i1 returns boolean
if(IsItemPowerup(ON7))then
if i1==0 then
set i1=OK7(ON7)
endif
set bj_lastCreatedItem=CreateItem(SU[i1],GetUnitX(it),GetUnitY(it))
call SetItemVisible(bj_lastCreatedItem,false)
call SetItemPlayer(bj_lastCreatedItem,Player(O5),false)
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(ON7))
call RemoveItem(ON7)
set ON7=bj_lastCreatedItem
endif
set LE4=UnitAddItem(it,ON7)
return LE4
endfunction
function B0E takes nothing returns nothing
local item TS8=GetEnumItem()
local unit u=OH4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(TS8)>0 and GetItemPlayer(TS8)==p then
call SetItemPosition(TS8,KU4[id],KV4[id])
call SetItemVisible(TS8,false)
call B1E(id,KT4[id],TS8,0)
endif
set TS8=null
set u=null
set p=null
endfunction
function B5E takes nothing returns boolean
return OG7(GetFilterUnit())or OH7(GetFilterUnit())
endfunction
function B2E takes integer O5 returns nothing
local integer i=0
local unit u=null
local item ON7=null
set LP4="B_E"
call GroupEnumUnitsInRange(H8,GetUnitX(KT4[32+O5]),GetUnitY(KT4[32+O5]),$514,Condition(function B5E))
loop
set u=FirstOfGroup(H8)
exitwhen u==null
call GroupRemoveUnit(H8,u)
set i=0
loop
exitwhen i>5
set ON7=UnitItemInSlot(u,i)
if ON7!=null and GetItemPlayer(ON7)==Player(O5)then
call UnitRemoveItem(u,ON7)
call SetItemPosition(ON7,KU4[O5],KV4[O5])
if not UnitAddItem(KT4[32+O5],ON7)then
call SetItemVisible(ON7,false)
endif
endif
set i=i+1
endloop
endloop
set OH4=KT4[32+O5]
if IsPlayerAlly(Player(O5),Y7[0])then
call EnumItemsInRect(ND,Condition(function WE7),function B0E)
else
call EnumItemsInRect(OD,Condition(function WE7),function B0E)
endif
set u=null
set ON7=null
endfunction
function C4E takes integer O5,integer j returns nothing
local integer i
set i=0
loop
exitwhen i>23
if G47[O5*24+i]!=null then
call SetItemUserData(G47[O5*24+i],j)
endif
set i=i+1
endloop
endfunction
function C7E takes nothing returns nothing
local integer i
local integer j
local integer i1
local unit it=GJ7
local integer O5=GK7
if it==null then
set it=G7[O5]
endif
set i=$C
set j=B6E(O5,KT4[32+O5],false)
set eY[512+O5]=1
loop
exitwhen(i>=G77[$80+O5])or(j<=0)
if(G47[O5*24+i]!=null)then
if(GetWidgetLife(G47[O5*24+i])>0)and(not IsItemOwned(G47[O5*24+i]))then
call B1E(O5,KT4[32+O5],G47[O5*24+i],G87[O5*24+i])
set j=j-1
endif
set G47[O5*24+i]=null
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
set G47[O5*24+i]=UnitItemInSlot(it,i)
set G87[O5*24+i]=OK7(G47[O5*24+i])
if(G47[304+O5]==null or GetWidgetLife(G47[304+O5])<=0 or G87[O5*24+i]==E6)and(G87[O5*24+i]==EV or G87[O5*24+i]==F6 or G87[O5*24+i]==G6 or G87[O5*24+i]==H6 or G87[O5*24+i]==DR4 or G87[O5*24+i]==YB or G87[O5*24+i]==LB or G87[O5*24+i]==F44 or G87[O5*24+i]==E6)and(IsUnitType(it,UNIT_TYPE_HERO))then
set G47[304+O5]=G47[O5*24+i]
set G87[304+O5]=G87[O5*24+i]
endif
set G47[O5*24+6+i]=UnitItemInSlot(KT4[32+O5],i)
set G87[O5*24+6+i]=OK7(G47[O5*24+6+i])
set i=i+1
endloop
set i=$C
set j=$C
loop
exitwhen i>23
if G47[O5*24+i]!=null then
if i!=j then
set G47[O5*24+j]=G47[O5*24+i]
set G87[O5*24+j]=G87[O5*24+i]
set G47[O5*24+i]=null
endif
set j=j+1
endif
set i=i+1
endloop
if j<$C then
set G77[$80+O5]=$C
else
set G77[$80+O5]=j
endif
set it=null
endfunction
function C8E takes integer O5,unit it returns nothing
set GJ7=it
set GK7=O5
call ExecuteFunc("C7E")
endfunction
function C9E takes integer O5 returns integer
local integer i=0
local integer j=6
call C8E(O5,G7[O5])
loop
exitwhen(i>=G77[$80+O5])
if(G47[O5*24+i]!=null)and(GetWidgetLife(G47[O5*24+i])>0)and(BCE(O5,G7[O5],G47[O5*24+i],G87[O5*24+i],false)>=99)then
set j=j-1
endif
set i=i+1
endloop
return j
endfunction
function CDE takes unit it,integer i1 returns boolean
return((i1==AL or i1==DD4)or(i1>=LL and i1<=F1)or(i1==H1 or i1==J1)or(i1==O1)or(i1==S2)or(i1==U1)or((i1==T2 or i1==W2)and IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER))or(i1==ZA or i1==BA))
endfunction
function CEE takes unit it,integer i1 returns boolean
return((i1>=LL and i1<=F1)or(i1==U1)or(i1==T2 or i1==W2)or(i1==E24 or i1==E_4))
endfunction
function CFE takes integer O5,unit it,integer i1 returns boolean
local boolean CGE=CDE(it,i1)
local boolean CHE=CEE(it,i1)
local integer i=GetUnitTypeId(it)
if(i==1162032951)or(i==1160785972)or(i==1429221456)or(i==1315074670)or(i==1164799855)or(i==1311781185)or(i==1211117649)or(i==1429221430 or i==1429221451 or i==1215657064)then
return(not(CGE or CHE))
elseif(i==1164207469 or i==1432510828)then
return(not(CGE))
elseif(i==1432642913 or i==1211117641)then
return(not(CHE))
elseif(G97[16+O5]and CGE)then
return false
elseif(G97[32+O5]and CHE)then
return false
elseif(i1==QW or i1==RW)and(i==1215723364 or i==1429221446)then
return false
elseif(i1==ZA or i1==BA)and(i==1211119187)then
return false
elseif CGE and R87(1128887405,"Orb|"+I2S(GetHandleId(it)))then
return false
elseif CHE and R87(1128887405,"Buff|"+I2S(GetHandleId(it)))then
return false
endif
return true
endfunction
function CIE takes integer i1 returns boolean
return((i1==M3)or(i1==N5 or i1==R5 or i1==S5)or(i1==F2 or i1==H2)or(i1==DF4)or(i1==DG4)or(i1==DO4 or i1==DP4)or(i1==DU4)or(i1==R1)or(i1==DX4 or i1==DY4))
endfunction
function CJE takes integer i1 returns boolean
return((i1==V1))
endfunction
function CKE takes integer O5,integer i1 returns boolean
if(i1==D74 or i1==D84)then
return true
elseif(i1==TC)or(i1==VC)or(i1==LV or i1==EW)or(i1==WC or i1==XC)or(i1==BC)or(i1==LC)or(i1==NC)or(i1==PC)or(i1==QC)or(i1==YC)or(i1==ZC)or(i1==DE4)then
if(i1==G77[O5]or i1==G77[16+O5])then
else
return true
endif
elseif(i1==N6 or i1==S6)or(i1==R1)or(i1==DX4 or i1==DY4)then
return true
elseif(i1==RB or i1==VB)then
return true
elseif(i1>=UZ and i1<=IA)then
return true
elseif(i1==H3)then
return true
elseif(i1==YA)or(i1==DS4)or(i1==E04)then
return true
elseif(i1==ZA or i1==BA)or(i1==DV4 or i1==DW4)then
return true
elseif(i1==W6 or i1==A6 or i1==DL)then
return true
endif
return false
endfunction
function CME takes unit it,boolean CNE returns unit
local integer O5=GetPlayerId(GetOwningPlayer(it))
local unit u
if(not G97[112+O5])then
return null
endif
set u=QA7(GetHandleId(Player(O5)),"MyBear")
if CNE then
if(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
call SelectHeroSkill(it,1093681461)
call NX7(.1)
if IssueImmediateOrderById(it,$D0272)then
call NX7(1.)
set u=QA7(GetHandleId(Player(O5)),"MyBear")
endif
elseif GetUnitTypeId(u)!=1848651828 then
call SetUnitX(u,GetUnitX(it))
call SetUnitY(u,GetUnitY(it))
endif
call IssueTargetOrderById(u,$D0012,it)
endif
if(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
set u=QA7(GetHandleId(Player(O5)),"BearItemHolder")
if u==null then
if WM7(GetOwningPlayer(it))then
set u=CreateUnit(Player(O5),1697657158,-6390,-5615,0)
else
set u=CreateUnit(Player(O5),1697657158,5875,5000,0)
endif
call QG7(GetHandleId(Player(O5)),"BearItemHolder",u)
endif
endif
set bj_lastReplacedUnit=u
set u=null
return bj_lastReplacedUnit
endfunction
function COE takes integer O5,unit it,boolean CPE returns unit
local unit MQ7
local unit u
if(not G97[112+O5])then
return null
endif
set MQ7=QA7(GetHandleId(Player(O5)),"aiBearDummy")
if(MQ7==null)then
if WM7(GetOwningPlayer(it))then
set MQ7=CreateUnit(Player(O5),1697657158,-6390,-5615,0)
else
set MQ7=CreateUnit(Player(O5),1697657158,5875,5000,0)
endif
call QG7(GetHandleId(Player(O5)),"aiBearDummy",MQ7)
call ShowUnit(MQ7,true)
endif
if not(G97[48+O5])then
set u=CME(it,CPE)
if not(u==null or GetUnitState(u,UNIT_STATE_LIFE)<=0)then
call SetUnitPosition(MQ7,GetUnitX(u),GetUnitY(u))
endif
endif
set bj_lastReplacedUnit=MQ7
set u=null
set MQ7=null
return bj_lastReplacedUnit
endfunction
function CQE takes integer O5,unit it returns nothing
local unit u=CME(it,false)
local item ON7
local integer i=0
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>0 then
loop
exitwhen i>5
set bj_lastCreatedItem=UnitItemInSlot(it,i)
if bj_lastCreatedItem!=null then
set ON7=UnitItemInSlot(u,i)
if ON7==null or GetItemTypeId(bj_lastCreatedItem)!=GetItemTypeId(ON7)then
call RemoveItem(ON7)
set ON7=CreateItem(GetItemTypeId(bj_lastCreatedItem),GetUnitX(u),GetUnitY(u))
call SetItemVisible(ON7,false)
call SetItemPlayer(ON7,Player(O5),false)
call SetItemCharges(ON7,GetItemCharges(bj_lastCreatedItem))
call SetItemUserData(ON7,0)
call UnitAddItem(u,ON7)
endif
else
call RemoveItem(UnitItemInSlot(u,i))
endif
set i=i+1
endloop
endif
set u=null
set ON7=null
endfunction
function CRE takes integer O5,unit it returns nothing
local unit u
local integer i=0
if(not G97[$C0+O5])or(G97[48+O5])then
return
endif
if(it!=null)then
if GetUnitTypeId(it)==1697657158 then
set u=QA7(GetHandleId(Player(O5)),"MyBear")
if u!=null and GetUnitState(u,UNIT_STATE_LIFE)>0 then
call SetUnitPosition(it,GetUnitX(u),GetUnitY(u))
endif
endif
else
set u=QA7(GetHandleId(Player(O5)),"aiBearDummy")
if WM7(Player(O5))then
call SetUnitPosition(u,-6390,-5615)
else
call SetUnitPosition(u,5875,5000)
endif
call CQE(O5,u)
endif
set u=null
endfunction
function CSE takes integer O5,boolean CTE,boolean CUE returns integer
local integer i=999
local integer CVE=5
local integer j=0
local integer NN7=0
local integer CWE=0
local integer i1
if not CTE then
set CVE=23
endif
loop
exitwhen(j>CVE)
if(G47[O5*24+j]!=null)then
if(G87[O5*24+j]==DS4 and G77[$90+O5]!=2)then
else
set CWE=BCE(O5,G7[O5],G47[O5*24+j],G87[O5*24+j],false)
if(CWE<=i)and(CWE!=-1)and(CWE<99)and(not R87(1128887405,"NoSell|"+I2S(GetHandleId(G7[O5]))+I2S(G87[O5*24+j])))and(LoadInteger(CU4,G77[$E0+O5],GetHandleId(G47[O5*24+j]))==0)and(not LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+j])))then
set i=CWE
set NN7=j
endif
endif
endif
set j=j+1
endloop
if i<99 and((not CUE)or(CKE(O5,G87[O5*24+NN7])))then
return NN7
endif
return-1
endfunction
function CXE takes integer O5,boolean CYE returns integer
local integer i=0
local integer j=0
local integer k=0
local item ON7=null
loop
exitwhen i>23
set ON7=G47[O5*24+i]
set k=G87[O5*24+i]
if ON7==null or(GetWidgetLife(ON7)<=0)then
set ON7=null
set k=0
if i<=5 then
set ON7=UnitItemInSlot(G7[O5],i)
elseif i<=$B then
set ON7=UnitItemInSlot(KT4[32+O5],i-6)
endif
endif
if(ON7!=null)and(CYE or(not B28(k)))and(LoadInteger(CU4,G77[$E0+O5],GetHandleId(G47[O5*24+i]))==0)and(not LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+i])))then
set j=j+1
endif
set i=i+1
endloop
set ON7=null
return j
endfunction
function CZE takes integer O5,unit it returns integer
local integer i=0
local integer CVE=0
local integer j=0
local integer NN7=999
local item ON7
loop
exitwhen i>5
set ON7=UnitItemInSlot(it,i)
if ON7!=null then
set j=BCE(O5,null,null,OK7(ON7),false)
if j<99 and j<NN7 then
set NN7=j
set CVE=i
endif
else
set bj_lastCreatedItem=null
set bj_forLoopBIndexEnd=-2
set ON7=null
return i
endif
set i=i+1
endloop
set ON7=null
if NN7<999 then
set bj_lastCreatedItem=UnitItemInSlot(it,CVE)
set bj_forLoopBIndexEnd=NN7
return CVE
endif
return-1
endfunction
function CAE takes integer O5,unit it returns boolean
local boolean PN7=false
local boolean J4
set bj_lastCreatedItem=null
if(G77[O5]!=0)and(BCE(O5,it,null,G77[O5],true)>BCE(O5,it,null,G77[16+O5],true))then
return PD7(it,SU[G77[O5]])
elseif(G77[16+O5]!=0)then
return PD7(it,SU[G77[16+O5]])
endif
return false
endfunction
function CBE takes integer O5,unit it,integer i1,item ON7,boolean CCE,boolean C3E,boolean C6E returns integer
local integer i
local integer CVE=BCE(O5,it,ON7,i1,false)
local integer j=0
local integer NN7=0
local integer k=0
local integer CWE=0
local item CLE=null
local boolean PN7=false
set CWE=0
set i=999
set LH4=null
loop
exitwhen(j>5)
set CLE=G47[O5*24+j+k]
if GetWidgetLife(CLE)<=0 then
set CLE=null
endif
if(CLE!=null)then
if(UnitHasItem(it,CLE))then
set CWE=BCE(O5,G7[O5],CLE,G87[O5*24+j+k],(not C3E))
if(CWE<=i)then
set i=CWE
set LH4=CLE
set NN7=j+k
endif
endif
else
if UnitItemInSlot(it,j+k)==null then
set NN7=j+k
set LH4=null
set CCE=true
exitwhen true
endif
endif
set j=j+1
endloop
set CLE=null
if(CVE>i)or CCE then
set CVE=GetItemTypeId(ON7)
set CLE=LH4
if CLE!=null then
set G47[O5*24+G77[$80+O5]]=CLE
set G87[O5*24+G77[$80+O5]]=OK7(CLE)
set G77[$80+O5]=G77[$80+O5]+1
set G47[O5*24+NN7]=null
endif
call CRE(O5,it)
if CLE!=null then
call UnitRemoveItem(it,CLE)
call SetItemPosition(CLE,GetUnitX(KT4[32+O5]),GetUnitY(KT4[32+O5]))
call SetItemVisible(CLE,false)
if not IsUnitType(it,UNIT_TYPE_HERO)then
call SaveBoolean(CU4,G77[256+O5],GetHandleId(CLE),true)
endif
endif
call UnitAddItem(it,ON7)
set PN7=true
if false and(not C6E)then
if(CVE!=RU[i1])and((i1!=EW)and(i1!=S6)and(i1!=J1)and(i1!=DM4 and i1!=DN4)and(i1!=DP4)and(not B28(i1)))then
call UnitAddItem(it,ON7)
set PN7=true
else
set C6E=true
endif
endif
if false and C6E then
if CVE!=RU[i1]then
set bj_lastCreatedItem=CreateItem(RU[i1],GetUnitX(it),GetUnitY(it))
call SetItemVisible(bj_lastCreatedItem,false)
call SetItemPlayer(bj_lastCreatedItem,Player(O5),false)
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(ON7))
call RemoveItem(ON7)
set ON7=bj_lastCreatedItem
endif
set eY[512+O5]=0
call UnitAddItem(it,ON7)
loop
exitwhen eY[512+O5]!=0
call TriggerSleepAction(.1)
endloop
if not IsUnitType(it,UNIT_TYPE_HERO)then
call SaveBoolean(CU4,G77[256+O5],GetHandleId(G47[288+O5]),true)
endif
if(eY[512+O5]==1)then
set PN7=true
elseif(eY[512+O5]==2)or(eY[512+O5]==3)then
loop
if eY[512+O5]==3 then
set ON7=G47[288+O5]
exitwhen true
endif
call TriggerSleepAction(.1)
endloop
endif
endif
endif
if PN7 then
return NN7
else
set bj_forLoopAIndex=GetItemUserData(ON7)
call SetItemPosition(ON7,GetUnitX(KT4[32+O5]),GetUnitY(KT4[32+O5]))
call SetItemUserData(ON7,bj_forLoopAIndex)
call SetItemVisible(ON7,false)
set G47[O5*24+G77[$80+O5]]=ON7
set G87[O5*24+G77[$80+O5]]=OK7(ON7)
set G77[$80+O5]=G77[$80+O5]+1
endif
return-1
endfunction
function C1E takes integer O5,unit it,item ON7,integer i1 returns nothing
if B28(i1)then
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+(GetItemCharges(ON7)/C48(i1))*(HJ4[i1]/2))
else
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+HJ4[i1]/2)
endif
call OJ7(ON7)
call DestroyEffect(AddSpecialEffectTarget("UI\\Feedback\\GoldCredit\\GoldCredit.mdl",it,"overhead"))
endfunction
function C0E takes integer O5,integer B58 returns integer
if IsUnitType(G7[O5],UNIT_TYPE_MELEE_ATTACKER) or IsUnitType(G7[O5],UNIT_TYPE_HERO)==false then
if B58==W2 then
return T2
elseif B58==BA then
return ZA
elseif B58==EZ then
return DZ
elseif B58==DW4 then
return DV4
elseif B58==D84 then
return D74
elseif B58==E_4 then
return E24
elseif B58==Y0 then
if BTE(G7[O5])==false then
return X0
endif
elseif B58==X0 then
if BTE(G7[O5]) then
return Y0
endif
elseif B58==QB then
return JB
endif
else
if B58==T2 then
return W2
elseif B58==ZA then
return BA
elseif B58==DZ then
return EZ
elseif B58==DV4 then
return DW4
elseif B58==D74 then
return D84
elseif B58==E24 then
return E_4
elseif B58==X0 then
return Y0
elseif B58==JB then
return QB
endif
endif
return B58
endfunction
function C5E takes player p,unit it,integer C2E,integer C_E,integer GUD,integer GVD,integer GWD,integer L4E,integer L7E returns nothing
local item ON7
set LP4="aiCombineItems"
call DisableTrigger(SU4)
if C_E>0 then
set ON7=UnitItemInSlot(it,0)
call RemoveItem(ON7)
endif
if GUD>0 then
set ON7=UnitItemInSlot(it,1)
call RemoveItem(ON7)
endif
if GVD>0 then
set ON7=UnitItemInSlot(it,2)
call RemoveItem(ON7)
endif
if GWD>0 then
set ON7=UnitItemInSlot(it,3)
call RemoveItem(ON7)
endif
if L4E>0 then
set ON7=UnitItemInSlot(it,4)
call RemoveItem(ON7)
endif
if L7E>0 then
set ON7=UnitItemInSlot(it,5)
call RemoveItem(ON7)
endif
set C2E=C0E(GetPlayerId(p),C2E)
set GE7=C2E
set GD7=p
set ON7=UnitAddItemById(it,SU[C2E])
call SetItemPlayer(ON7,p,true)
call SetItemUserData(ON7,1)
if IsPlayerInForce(p,QW4)and(it==QA7(GetHandleId(p),"aiBearDummy"))then
set GM7=QA7(GetHandleId(p),"MyBear")
if GM7!=null and GetUnitState(GM7,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GM7,"origin"))
endif
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",it,"origin"))
endif
if OK7(ON7)==DH4 then
call SetItemCharges(ON7,6)
endif
call EnableTrigger(SU4)
if IsPlayerAlly(GetLocalPlayer(),p) then
if C2E==R1 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(p)]+(KY4[GetPlayerId((p))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")
elseif C2E==A5 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(p)]+(KY4[GetPlayerId((p))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")
endif
endif
set G47[288+GetPlayerId(p)]=ON7
set ON7=null
endfunction
function L8E takes player p,unit it,integer i1,integer L9E returns boolean
local integer i
local integer x
local integer y
local integer array LDE
local boolean array LEE
local integer array LFE
local boolean array LGE
local boolean array LHE
local integer array LIE
local player LJE
local integer k
local player array LKE
local integer m
local item LME
local item LNE
local item LOE
local item LPE
local item LQE
local item LRE
local player LSE
local player LTE
local player LUE
local player LVE
local player LWE
local player LXE
local integer LYE
local integer LZE
local integer LAE
local integer LBE
local integer LCE
local integer L3E
local integer L6E
local integer LLE
local integer L1E
local integer L0E
local integer L5E
local integer L2E
local boolean L_E=true
set LP4=LP4+"(CheckRecipes)"
set LME=UnitItemInSlot(it,0)
set LNE=UnitItemInSlot(it,1)
set LOE=UnitItemInSlot(it,2)
set LPE=UnitItemInSlot(it,3)
set LQE=UnitItemInSlot(it,4)
set LRE=UnitItemInSlot(it,5)
set LSE=GetItemPlayer(LME)
set LTE=GetItemPlayer(LNE)
set LUE=GetItemPlayer(LOE)
set LVE=GetItemPlayer(LPE)
set LWE=GetItemPlayer(LQE)
set LXE=GetItemPlayer(LRE)
set LYE=GetItemUserData(LME)
set LZE=GetItemUserData(LNE)
set LAE=GetItemUserData(LOE)
set LBE=GetItemUserData(LPE)
set LCE=GetItemUserData(LQE)
set L3E=GetItemUserData(LRE)
set L6E=OK7(LME)
set LLE=OK7(LNE)
set L1E=OK7(LOE)
set L0E=OK7(LPE)
set L5E=OK7(LQE)
set L2E=OK7(LRE)
set LKE[1]=p
set i=0
if LME!=null and LYE==1 and(LSE==p or PJ4 or(GetPlayerSlotState((LSE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L6E
else
set LDE[i+1]=0
endif
set i=1
if LNE!=null and LZE==1 and(LTE==p or PJ4 or(GetPlayerSlotState((LTE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=LLE
else
set LDE[i+1]=0
endif
set i=2
if LOE!=null and LAE==1 and(LUE==p or PJ4 or(GetPlayerSlotState((LUE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L1E
else
set LDE[i+1]=0
endif
set i=3
if LPE!=null and LBE==1 and(LVE==p or PJ4 or(GetPlayerSlotState((LVE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L0E
else
set LDE[i+1]=0
endif
set i=4
if LQE!=null and LCE==1 and(LWE==p or PJ4 or(GetPlayerSlotState((LWE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L5E
else
set LDE[i+1]=0
endif
set i=5
if LRE!=null and L3E==1 and(LXE==p or PJ4 or(GetPlayerSlotState((LXE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L2E
else
set LDE[i+1]=0
endif
set LDE[0]=i1
set i=1
loop
exitwhen i>(FP4)
if FI4[i]==L9E or FJ4[i]==L9E or FK4[i]==L9E or FM4[i]==L9E or FN4[i]==L9E then
set LFE[0]=FI4[i]
set LFE[1]=FJ4[i]
set LFE[2]=FK4[i]
set LFE[3]=FM4[i]
set LFE[4]=FN4[i]
if L_E then
set LGE[0]=true
set LGE[1]=true
set LGE[2]=true
set LGE[3]=true
set LGE[4]=true
set LGE[5]=true
set LGE[6]=true
set LEE[0]=true
set LEE[1]=true
set LEE[2]=true
set LEE[3]=true
set LEE[4]=true
set LEE[5]=true
set LEE[6]=true
set LIE[0]=0
set LIE[1]=0
set LIE[2]=0
set LIE[3]=0
set LIE[4]=0
set LIE[5]=0
set LIE[6]=0
set L_E=false
endif
set LHE[0]=false
set LHE[1]=false
set LHE[2]=false
set LHE[3]=false
set LHE[4]=false
set x=0
loop
exitwhen x==5
if LFE[x]==0 then
set LHE[x]=true
else
set y=0
loop
exitwhen y==7
if LDE[y]==LFE[x]and LEE[y]and LGE[x]then
set LEE[y]=false
set LGE[x]=false
set LHE[x]=true
set LIE[y]=1
set y=7
set L_E=true
else
set y=y+1
endif
endloop
endif
if LHE[x] then
set x=x+1
else
set x=5
endif
endloop
if LHE[0]and LHE[1]and LHE[2]and LHE[3]and LHE[4]then
call C5E(p,it,FO4[i],LIE[1],LIE[2],LIE[3],LIE[4],LIE[5],LIE[6])
call L8E(p,it,0,FO4[i])
set i=FP4+2
else
set i=i+1
endif
else
set i=i+1
endif
endloop
set EL=LIE[0]==1
if i==(FP4+2)then
set LME=null
set LNE=null
set LOE=null
set LPE=null
set LQE=null
set LRE=null
return true
endif
set LME=null
set LNE=null
set LOE=null
set LPE=null
set LQE=null
set LRE=null
return false
endfunction
function D4F takes unit it,item ON7 returns nothing
local integer n5
local integer D7F
local integer BU7
set n5=I19(it)
set D7F=I09(it)
if D7F!=0 then
call UnitAddAbility(it,D7F)
call UnitMakeAbilityPermanent(it,true,D7F)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),D7F,false)
if GetUnitTypeId(it)==1211117653 then
set IM4=it
call ExecuteFunc("D8F")
elseif GetUnitTypeId(it)==1215130471 then
set IM4=it
call ExecuteFunc("HAD")
endif
endif
set BU7=B68(it,4)
if n5==GW4 and HP4[BU7]!=0 then
call UnitRemoveAbility(it,HT4[BU7])
call UnitAddAbility(it,HU4[BU7])
call SetPlayerAbilityAvailable(GetOwningPlayer(it),HU4[BU7],false)
endif
call OJ7(ON7)
set ON7=UnitAddItemById(it,SU[n5])
call SetItemPlayer(ON7,GetOwningPlayer(it),false)
call SetItemUserData(ON7,1)
set G47[288+GetPlayerId(GetOwningPlayer(it))]=ON7
set ON7=null
endfunction
function D9F takes integer O5,unit it returns nothing
local integer i=0
local integer CVE=0
set G97[64+O5]=true
set G77[384+O5]=0
if PD7(it,SU[XC])then
call C1E(O5,it,bj_lastCreatedItem,XC)
endif
if PD7(KT4[32+O5],SU[XC])then
call C1E(O5,it,bj_lastCreatedItem,XC)
endif
call C8E(O5,it)
set i=0
loop
exitwhen(i>23)
set CVE=G87[O5*24+i]
if(CVE==EV or CVE==F6 or CVE==G6 or CVE==H6 or CVE==DR4 or CVE==YB or CVE==LB or CVE==F44)then
call C1E(O5,it,G47[O5*24+i],CVE)
exitwhen true
endif
set i=i+1
endloop
endfunction
function DDF takes player p,unit it,integer i1,integer L9E returns boolean
local integer CVE=0
local integer C2E=0
local item ON7=null
if i1==EM4 and PM7(it,SU[C0])then
set ON7=bj_lastCreatedItem
set CVE=OK7(ON7)
if CVE==C0 then
set C2E=F5
elseif CVE==F5 then
set C2E=G5
elseif CVE==G5 then
set C2E=J5
elseif CVE==J5 then
set C2E=M5
endif
elseif i1==EN4 and PM7(it,SU[N5])then
set ON7=bj_lastCreatedItem
set CVE=OK7(ON7)
if CVE==N5 then
set C2E=R5
elseif CVE==R5 then
set C2E=S5
endif
endif
if C2E!=0 then
set GE7=C2E
set GD7=p
call DisableTrigger(SU4)
call RemoveItem(ON7)
set ON7=UnitAddItemById(it,SU[C2E])
call SetItemPlayer(ON7,p,true)
call SetItemUserData(ON7,1)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",it,"origin"))
call EnableTrigger(SU4)
set G47[288+GetPlayerId(p)]=ON7
set ON7=null
return true
endif
return false
endfunction
function DEF takes integer O5,unit it,integer i1,item ON7,boolean CCE returns boolean
local player JI7=Player(O5)
local boolean PN7=false
local integer j=HJ4[i1]
set GE7=i1
set GD7=JI7
if(G77[432+O5]==2 and DDF(JI7,it,i1,i1))or L8E(JI7,it,i1,i1)then
if ON7!=null then
call RemoveItem(ON7)
endif
set ON7=G47[288+O5]
set PN7=true
else
if BXE(it)==0 then
if ON7==null then
set ON7=CreateItem(SU[i1],GetUnitX(it),GetUnitY(it))
call SetItemPlayer(ON7,JI7,false)
call SetItemUserData(ON7,1)
endif
set PN7=(CBE(O5,it,i1,ON7,CCE,false,false)!=-1)
else
if ON7==null then
set ON7=UnitAddItemById(it,SU[i1])
call SetItemPlayer(ON7,JI7,false)
call SetItemUserData(ON7,1)
else
call UnitAddItem(it,ON7)
call SetItemUserData(ON7,1)
endif
set PN7=true
endif
if B28(i1)then
call SetItemCharges(ON7,C48(i1))
elseif i1==BC then
call SetItemCharges(ON7,2)
endif
endif
if ON7!=null then
set G47[288+O5]=ON7
if(i1==E6 or i1==DC4)then
call D9F(O5,it)
endif
if IsUnitType(it,UNIT_TYPE_HERO)and GetItemTypeId(ON7)==SU[FQ4]then
call D4F(it,ON7)
endif
endif
if(G77[432+O5]!=2)then
call TriggerSleepAction(0)
endif
set JI7=null
set ON7=null
return PN7
endfunction
function DFF takes integer O5,unit it,integer i1,boolean CCE returns boolean
local player JI7=Player(O5)
local boolean PN7=false
local integer j=HJ4[i1]
set LP4="UnitBuyItem"
if(i1==PC or i1==QC or i1==XC)and(X_4[O5]>=3)then
set j=j/2
endif
if GetPlayerState(JI7,PLAYER_STATE_RESOURCE_GOLD)>=j then
call SetPlayerState(JI7,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(JI7,PLAYER_STATE_RESOURCE_GOLD)-j)
if G97[48+O5]then
set G77[$C0+O5]=G77[$C0+O5]+j
endif
call CRE(O5,it)
if B28(i1)and PD7(it,SU[i1])then
call SetItemCharges(bj_lastCreatedItem,GetItemCharges(bj_lastCreatedItem)+C48(i1))
set PN7=true
else
set PN7=DEF(O5,it,i1,null,CCE)
endif
set G77[96+O5]=0
endif
set JI7=null
return PN7
endfunction
function DGF takes integer O5 returns nothing
local integer j
local integer NN7
local integer k
local unit u
local player JI7=Player(O5)
call C8E(O5,null)
if G97[48+O5]then
return
endif
set j=6
set k=G77[$80+O5]-1
loop
exitwhen j>k
if G47[O5*24+j]!=null and((not G97[$C0+O5])or(not LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+j]))))then
if IsItemOwned(G47[O5*24+j])then
call UnitRemoveItem(KT4[32+O5],G47[O5*24+j])
endif
set NN7=CBE(O5,G7[O5],G87[O5*24+j],G47[O5*24+j],false,true,false)
if NN7!=-1 and NN7<6 then
set G47[O5*24+NN7]=G47[O5*24+j]
if(G47[O5*24+NN7]==null)or(GetWidgetLife(G47[O5*24+NN7])<=0)then
set G47[O5*24+NN7]=G47[288+O5]
endif
set G87[O5*24+NN7]=G87[O5*24+j]
endif
call SetItemVisible(G47[O5*24+j],false)
set G47[O5*24+j]=null
endif
set j=j+1
endloop
if G97[$C0+O5]then
set j=GetUnitTypeId(G7[O5])
if(j==1311781199 or j==1311781171 or j==1311781172 or j==1311781173)then
set u=COE(O5,G7[O5],false)
endif
if u!=null then
call C8E(O5,u)
set j=6
set k=G77[$80+O5]-1
loop
exitwhen j>k
if G47[O5*24+j]!=null and(LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+j])))then
set NN7=CBE(O5,u,G87[O5*24+j],G47[O5*24+j],false,true,false)
if NN7!=-1 and NN7<6 then
set G47[O5*24+NN7]=G47[O5*24+j]
if(G47[O5*24+NN7]==null)or(GetWidgetLife(G47[O5*24+NN7])<=0)then
set G47[O5*24+NN7]=G47[288+O5]
endif
set G87[O5*24+NN7]=G87[O5*24+j]
endif
call SetItemVisible(G47[O5*24+j],false)
set G47[O5*24+j]=null
endif
set j=j+1
endloop
endif
set u=null
endif
call C8E(O5,null)
set j=$C
loop
exitwhen j>G77[$80+O5]-1
if G47[O5*24+j]!=null then
call C1E(O5,G7[O5],G47[O5*24+j],G87[O5*24+j])
set G47[O5*24+j]=null
endif
set j=j+1
endloop
set JI7=null
set u=null
endfunction
function DHF takes integer O5,unit it,integer DIF,integer i1 returns boolean
local integer i
local integer j
local integer CVE
local integer L9E=0
local item ON7=null
local boolean PN7=true
local integer DJF
local boolean DKF=false
local boolean DMF=IsUnitType(it,UNIT_TYPE_HERO)
set LP4="AIBuy_Core"
if(it==null)or((not OA7(it))and(not G97[48+O5]))then
return false
elseif(G97[48+O5])and PE7(KT4[32+O5])then
set G97[$80+O5]=true
return false
endif
if(G77[432+O5]==1)and(PE7(it)and G77[320+O5]<=0)then
set G77[96+O5]=i1
return false
endif
if(not IsUnitType(it,UNIT_TYPE_HERO))then
set L9E=DV
if false then
set G97[288+O5]=true
if(G77[432+O5]==1)then
return false
endif
endif
endif
if DIF>=0 or DIF==-2 then
endif
if(DIF==-1)then
set G77[64+O5]=G77[64+O5]+1
else
set G77[64+O5]=0
endif
set DJF=G77[64+O5]
if(G97[112+O5])then
if(DJF==0)then
call C8E(O5,it)
call C4E(O5,0)
endif
set i=0
loop
exitwhen(i>23)
if(G47[O5*24+i]!=null)then
set PN7=false
if(G87[O5*24+i]==i1)then
set PN7=true
elseif PJ7(i1,G87[O5*24+i],false)then
set PN7=true
endif
if PN7 then
set CVE=LoadInteger(CU4,G77[368+O5],i1+L9E)
if(DJF==0)and(CVE==0)then
set CVE=LoadInteger(CU4,G77[352+O5],i1+L9E)
if CVE==0 then
set CVE=1
endif
call SaveInteger(CU4,G77[368+O5],i1+L9E,CVE)
endif
set CVE=LoadInteger(CU4,G77[$E0+O5],GetHandleId(G47[O5*24+i]))
if CVE==0 then
set CVE=G77[48+O5]
endif
if(GetItemPlayer(G47[O5*24+i])==Player(O5))and((not G97[48+O5])or((CVE==G77[48+O5])and(not LoadBoolean(CU4,G77[$D0+O5],GetHandleId(G47[O5*24+i])))))then
if(DJF==0)then
call SaveInteger(CU4,G77[368+O5],i1+L9E,LoadInteger(CU4,G77[368+O5],i1+L9E)-1)
endif
if(DJF!=0)or(LoadInteger(CU4,G77[368+O5],i1+L9E)<=0)then
set ON7=G47[O5*24+i]
if((not G97[$C0+O5])or(DMF==(not LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+i])))))then
set G47[O5*24+i]=null
exitwhen true
endif
endif
endif
endif
endif
set i=i+1
endloop
if ON7!=null and G97[48+O5]then
call SaveBoolean(CU4,G77[$D0+O5],GetHandleId(ON7),true)
call SaveInteger(CU4,G77[$E0+O5],GetHandleId(ON7),G77[48+O5])
endif
set PN7=true
if(DJF==0)then
set G97[272+O5]=true
if(not G97[96+O5])and(G97[48+O5]or(G77[32+O5]>=G77[48+O5]))then
if CIE(i1)then
if IsPlayerAlly(Player(O5),Y7[0])then
call Q97(1128887405,"Sent|"+I2S(i1),R47(1128887405,"Sent|"+I2S(i1))+1)
else
call Q97(1128887405,"Scrg|"+I2S(i1),R47(1128887405,"Scrg|"+I2S(i1))+1)
endif
endif
call Q97(1128877176,I2S(GetHandleId(it))+"|"+I2S(i1),R47(1128877176,I2S(GetHandleId(it))+"|"+I2S(i1))+1)
if CDE(it,i1)then
call QF7(1128887405,"Orb|"+I2S(GetHandleId(it)),true)
endif
if CEE(it,i1)then
call QF7(1128887405,"Buff|"+I2S(GetHandleId(it)),true)
endif
set G97[96+O5]=true
endif
endif
endif
if G77[64+O5]<99 then
if ON7!=null then
call SetItemUserData(ON7,1)
if(not UnitHasItem(it,ON7))then
set G97[272+O5]=false
if(not G97[48+O5])and(G77[432+O5]!=1)then
call DEF(O5,it,i1,ON7,true)
endif
elseif not G97[48+O5]then
call UnitRemoveItem(it,ON7)
call DEF(O5,it,i1,ON7,true)
endif
else
set i=1
loop
exitwhen(i>FP4 or FO4[i]==i1)
set i=i+1
endloop
if i<=FP4 then
if PN7 and(FI4[i]!=0)then
set PN7=(DHF(O5,it,-1,FI4[i]))
endif
if PN7 and(FJ4[i]!=0)then
set PN7=(DHF(O5,it,-1,FJ4[i]))
endif
if PN7 and(FK4[i]!=0)then
set PN7=(DHF(O5,it,-1,FK4[i]))
endif
if PN7 and(FM4[i]!=0)then
set PN7=(DHF(O5,it,-1,FM4[i]))
endif
if PN7 and(FN4[i]!=0)then
set PN7=(DHF(O5,it,-1,FN4[i]))
endif
if PN7 then
if(G97[48+O5])then
call SaveBoolean(CU4,G77[$D0+O5],GetHandleId(G47[288+O5]),true)
else
if(i1==C3)then
call UnitUseItem(it,G47[288+O5])
endif
endif
if DIF==-1 then
set G97[$90+O5]=true
endif
endif
set DKF=true
else
if(G97[112+O5])then
if G77[432+O5]==2 then
set PN7=false
elseif G97[48+O5]then
set PN7=DFF(O5,KT4[32+O5],i1,false)
if PN7 then
call SaveInteger(CU4,G77[$E0+O5],GetHandleId(G47[288+O5]),G77[48+O5])
endif
elseif(G77[432+O5]==1)then
if(not BAE(i1))then
set PN7=false
elseif(G77[320+O5]>0)and IsUnitType(it,UNIT_TYPE_HERO)and PE7(it)and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HJ4[i1])and PD7(it,SU[OW])then
call C1E(O5,it,bj_lastCreatedItem,OW)
set G77[320+O5]=G77[320+O5]-1
endif
set PN7=DFF(O5,it,i1,true)
else
set PN7=DFF(O5,it,i1,true)
endif
if not PN7 then
set G77[96+O5]=i1
endif
endif
endif
if PN7 and(not DMF)then
call SaveBoolean(CU4,G77[256+O5],GetHandleId(G47[288+O5]),true)
endif
endif
if DJF==0 then
if(not PN7)then
set G77[112+O5]=i1
elseif(not(G77[32+O5]<G77[48+O5]))or(G97[48+O5])then
set G77[112+O5]=0
endif
endif
if(not G97[$80+O5])and(G97[48+O5])and PE7(KT4[32+O5])then
set G97[$80+O5]=true
endif
if DJF==0 and PN7 then
if not(G77[$90+O5]==0)then
if(not G97[48+O5])and((G77[432+O5]!=1)or(G97[272+O5]))then
set G77[32+O5]=G77[32+O5]+1
else
if DKF then
set G97[$80+O5]=true
call Q97(1128887405,I2S(GetHandleId(it))+"|s"+I2S(G77[48+O5]),i1)
endif
set G77[48+O5]=G77[48+O5]+1
endif
endif
set G97[96+O5]=false
if(not G97[48+O5])and DMF then
if(i1==E6)then
call D9F(O5,it)
elseif(i1==F6)then
set G77[384+O5]=1
set G77[400+O5]=1
elseif(i1==G6)then
set G77[384+O5]=2
set G77[400+O5]=2
elseif(i1==H6)then
set G77[384+O5]=3
set G77[400+O5]=3
endif
if G77[336+O5]!=0 then
set i=0
loop
exitwhen(i>23)
if(G87[O5*24+i]==G77[336+O5])then
call C1E(O5,it,G47[O5*24+i],G77[336+O5])
exitwhen true
endif
set i=i+1
endloop
set G77[336+O5]=0
endif
endif
if(G97[112+O5])and(not G97[48+O5])and(G77[432+O5]!=2)and DMF then
set CVE=CXE(O5,false)-6
loop
set i=CSE(O5,false,false)
exitwhen(i==-1)or(CVE<=0)
call C1E(O5,it,G47[O5*24+i],G87[O5*24+i])
set G47[O5*24+i]=null
set CVE=CVE-1
endloop
endif
if(not G97[$80+O5])and(G97[48+O5])and(BCE(O5,it,null,i1,true)>=99)then
set G97[$80+O5]=true
endif
if(G97[$C0+O5])and(not G97[48+O5])and(GetUnitTypeId(it)==1697657158)then
call CQE(O5,it)
endif
endif
endif
if(not G97[112+O5])then
return true
endif
if(DJF==0)and(not G97[80+O5])and PN7 and(DIF==G77[$F0+O5])then
if(not G97[48+O5])then
set G77[$90+O5]=2
else
set G97[$A0+O5]=true
endif
endif
return PN7
endfunction
function DNF takes nothing returns nothing
local integer i=GetHandleId(GetTriggeringTrigger())
local integer O5=R47(i,"p")
set G97[$D0+O5]=DHF(O5,QA7(i,"u"),R47(i,"i"),R47(i,"id"))
set G77[272+O5]=0
endfunction
function DOF takes integer O5 returns boolean
return(not(Bz>=G77[$A0+O5]))or(G97[$E0+O5]and G77[432+O5]!=2)
endfunction
function DPF takes unit u,integer DQF returns integer
local player p=GetOwningPlayer(u)
local integer i=0
local integer DRF=0
local integer DSF=0
loop
exitwhen i>$F
set DSF=GetUnitTypeId(G7[i])
if G7[i]!=null and IsUnitEnemy(G7[i],p)and(ND7(DSF,DQF))then
set DRF=DRF+1
endif
set i=i+1
endloop
return DRF
endfunction
function DTF takes integer O5,unit it,integer DIF,integer i1 returns boolean
local integer i
local integer L9E=0
if(G77[432+O5]==2 and(IF4[O5]or Bz<G77[272+O5]))or(G97[$E0+O5]and G77[432+O5]!=2)then
return false
endif
if(not G97[112+O5])then
if DIF>=0 and(G77[$F0+O5]<=DIF)then
set G77[$F0+O5]=DIF
endif
if(not IsUnitType(it,UNIT_TYPE_HERO))then
set L9E=DV
endif
call SaveInteger(CU4,G77[352+O5],i1+L9E,LoadInteger(CU4,G77[352+O5],i1+L9E)+1)
return true
endif
if(G97[112+O5])and(DIF>=0)and(((not G97[48+O5])and(G77[32+O5]!=DIF))or((G97[48+O5])and(G77[48+O5]!=DIF)))then
return false
endif
if Bz<G77[272+O5]then
set i=R2I(Bz)+$A
loop
call TriggerSleepAction(1)
exitwhen(Bz>i or Bz>G77[272+O5])
endloop
if Bz<G77[272+O5]then
return false
endif
endif
set i=GetHandleId(Q14[112+O5])
call QG7(i,"u",it)
call Q97(i,"i",DIF)
call Q97(i,"id",i1)
if(IsUnitType(it,UNIT_TYPE_HERO))then
set L9E=GetUnitTypeId(it)
if(R87(Q_4,SK7(it)+"|D"))then
if(i1==T1)then
call Q97(i,"id",N3)
endif
elseif(R87(Q_4,SK7(it)+"|Xb"))then
if(i1==DS4)and DPF(it,7)<3 and((L9E==1164799855)or(L9E==1212365106)or(L9E==1164799603)or(L9E==1160785973)or(L9E==1315007329)or(L9E==1164207469)or(L9E==1429221443)or(L9E==1215722344)or(L9E==1429221456)or(L9E==1211117643)or(L9E==1162032181)or(L9E==1160785972)or(L9E==1211119409))then
call Q97(i,"id",N6)
elseif(i1==H1)and DPF(it,6)<3 and((L9E==1162032181)or(L9E==1328558160)or(L9E==1211117617))then
call Q97(i,"id",O1)
endif
endif
endif
set G77[272+O5]=R2I(Bz)+$F
set G97[$D0+O5]=false
call TriggerExecute(Q14[112+O5])
if(G77[432+O5]!=2)then
loop
call TriggerSleepAction(.2)
exitwhen Bz>G77[272+O5]
endloop
endif
return G97[$D0+O5]
endfunction
function DUF takes integer O5,unit it,integer i1,boolean DVF returns boolean
local boolean DWF=PD7(it,SU[i1])or PD7(KT4[32+O5],SU[i1])or((KT4[32+O5]!=KT4[O5])and PD7(KT4[O5],SU[i1]))
if R87(1129146739,I2S(GetHandleId(it))+"|"+I2S(i1))then
set DVF=false
endif
if DVF and(IsItemOwned(bj_lastCreatedItem)or(not PE7(it)))then
if not((G77[O5]==i1 or G77[16+O5]==i1)and DWF)then
if G77[O5]==0 and G77[16+O5]!=i1 then
set G77[O5]=i1
elseif G77[16+O5]==0 and G77[O5]!=i1 then
set G77[16+O5]=i1
endif
if not DWF then
return DFF(O5,it,i1,true)
endif
endif
else
if DWF then
if(G77[O5]==i1)then
set G77[O5]=0
elseif(G77[16+O5]==i1)then
set G77[16+O5]=0
endif
endif
endif
return false
endfunction
function DXF takes integer O5 returns nothing
local integer i=0
local item ON7=null
local integer i1
loop
exitwhen i>5
set ON7=UnitItemInSlot(KT4[32+O5],i)
if ON7!=null then
set bj_forLoopAIndex=GetItemTypeId(ON7)
set i1=-1
if(bj_forLoopAIndex==SU[G77[O5]])then
set i1=G77[O5]
set G77[O5]=0
elseif(bj_forLoopAIndex==SU[G77[16+O5]])then
set i1=G77[16+O5]
set G77[16+O5]=0
elseif(bj_forLoopAIndex==SU[XC])then
call C1E(O5,G7[O5],ON7,XC)
endif
if i1!=-1 then
call QF7(1129146739,I2S(GetHandleId(G7[O5]))+"|"+I2S(i1),true)
call C1E(O5,G7[O5],ON7,i1)
endif
endif
set i=i+1
endloop
set ON7=null
endfunction
function DYF takes integer O5 returns boolean
local integer JZ7=GetHandleId(KT4[16+O5])
local integer i=0
local boolean DZF=false
if(Bz<hq[896+O5])or(not R87(JZ7,"aiCrow|Alive"))then
return false
endif
if(N37(G7[O5],h9[16+O5])<$4B0)then
return false
endif
if(R87(JZ7,"aiCrow|Active"))and(N37(KT4[16+O5],h9[16+O5])<800)and(Bz>R77(JZ7,"aiCrow|Move"))then
call HI9(KT4[16+O5])
set DZF=true
endif
set i=R47(JZ7,"aiCrow|CurrentOwner")
if(R87(JZ7,"aiCrow|Active"))then
if(i==O5)then
if R87(JZ7,"aiCrow|Away")then
call IssueNeutralImmediateOrderById(Player(O5),KT4[16+O5],1747990581)
else
call IssueImmediateOrderById(KT4[16+O5],$D0117)
endif
endif
return false
endif
if(i!=O5)and((not true)or((WM7(Player(O5))and(i!=GetPlayerId(Y7[0])))or(WN7(Player(O5))and(i!=GetPlayerId(Z7[0])))))then
return false
endif
if(not DZF)then
call HI9(KT4[16+O5])
set DZF=true
endif
if(true)and(GetOwningPlayer(KT4[16+O5])!=Player(O5))then
call SetUnitOwner(KT4[16+O5],Player(O5),false)
endif
if IssueNeutralImmediateOrderById(Player(O5),KT4[16+O5],1747990581)then
call Q97(JZ7,"aiCrow|CurrentOwner",O5)
call QF7(JZ7,"aiCrow|Active",true)
call QD7(JZ7,"aiCrow|Move",Bz+$F)
call QF7(JZ7,"aiCrow|Away",true)
set G97[$E0+O5]=true
set i=0
set LH4=null
call DisableTrigger(H84)
loop
exitwhen i>5
set LH4=UnitItemInSlot(KT4[O5],i)
if LH4!=null then
call UnitAddItem(KT4[16+O5],LH4)
endif
set i=i+1
endloop
call EnableTrigger(H84)
return true
endif
return false
endfunction
function DAF takes integer O5,boolean DBF returns boolean
return(GQ7 and(KT4[16+O5]!=null)and G77[432+O5]==0 and DBF and(G97[$80+O5]or G97[$90+O5]))
endfunction
function DCF takes integer O5,unit it,boolean DBF returns nothing
local integer i1=GetUnitTypeId(it)
local integer array D3F
local boolean PN7=false
local boolean D6F=false
local boolean DLF=false
local boolean J4=false
local string D1F
local integer i
local integer CVE
local integer j
local integer NN7
local integer D0F
local integer k
local integer CWE
local unit u
if DOF(O5)then
return
endif
if(G77[432+O5]==2)then
if R47(GetHandleId(KT4[16+O5]),"aiCrow|CurrentOwner")!=O5 then
return
endif
set KT4[32+O5]=KT4[16+O5]
else
set KT4[32+O5]=KT4[O5]
endif
if(not G97[112+O5])then
set G77[$90+O5]=1
else
set G77[$A0+O5]=R2I(Bz)+30
call C8E(O5,it)
endif
set G97[48+O5]=DBF
set G97[$A0+O5]=(DBF and G97[$B0+O5])
set i=G77[$90+O5]
if(G77[$90+O5]==0)and(not DBF)then
if(PX4)then
else
call DUF(O5,it,PC,true)
endif
call DFF(O5,it,QC,true)
endif
set CVE=R47(GetHandleId(Player(O5)),"AI|Class")
if(G77[$90+O5]==0)and(not DBF)then
set NN7=Y_7(it)
if CVE==4 then
call DTF(O5,it,-2,QC)
else
if IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER)then
call DFF(O5,it,DZ,false)
if i1!=1211119187 then
call DFF(O5,it,ZA,false)
endif
else
call DFF(O5,it,ZX,false)
if NN7==1 then
call DTF(O5,it,-2,DL)
elseif NN7==2 then
call DTF(O5,it,-2,A6)
else
call DTF(O5,it,-2,W6)
endif
endif
endif
set G77[$90+O5]=1
set G77[112+O5]=0
endif
if(i1==1211117636)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,D74)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,S5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
endif
elseif(i1==1211122767)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,EC)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,DT4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=D44
set D3F[2]=M5
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,RB)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,X1)
call DTF(O5,it,5,T1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=S2
endif
elseif(i1==1214345830)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,R1)
call DTF(O5,it,3,DX4)
call DTF(O5,it,4,RB)
call DTF(O5,it,5,P1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=D44
set D3F[2]=T1
endif
elseif(i1==1315007329)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,T1)
call DTF(O5,it,4,RB)
call DTF(O5,it,5,L5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=X2
set D3F[1]=S2
set D3F[2]=C5
endif
elseif(i1==1429221456)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,M3)
call DTF(O5,it,5,DQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1316252014)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DH4)
call DTF(O5,it,4,DO4)
call DTF(O5,it,5,C0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=M5
set D3F[1]=D44
endif
elseif(i1==1432646245)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,DK4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,H1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=C5
set D3F[2]=A1
endif
elseif(i1==1160785972)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,DQ4)
call DTF(O5,it,4,T5)
call DTF(O5,it,5,L5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=A1
endif
elseif(i1==1429221443)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DK4)
call DTF(O5,it,3,RL)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
set D3F[1]=R3
endif
elseif(i1==1311781185)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,EC)
call DTF(O5,it,4,DQ4)
call DTF(O5,it,5,T5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1215657064)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,B0)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
set D3F[1]=R3
endif
elseif(i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,JC)
call DTF(O5,it,2,DS4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,X0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=L5
set D3F[1]=S2
endif
elseif(i1==1211117651)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,T5)
call DTF(O5,it,3,DQ4)
call DTF(O5,it,4,EC)
call DTF(O5,it,5,DH4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1430466609)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DQ4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,T5)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1164799855)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,DQ4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1211117620)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,M3)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=W2
set D3F[1]=M5
endif
elseif(i1==1160786520)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,N5)
call DTF(O5,it,5,EC)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=W2
set D3F[2]=M5
endif
elseif(i1==1311787088)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,DT4)
call DTF(O5,it,5,EC)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=DO4
set D3F[2]=M5
endif
elseif(i1==1315334514)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,T5)
call DTF(O5,it,5,Y0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=X2
endif
elseif(i1==1315074670)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,H1)
call DTF(O5,it,5,Y0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=C5
set D3F[2]=X2
endif
elseif(i1==1311780946)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,D74)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=F2
set D3F[1]=D44
endif
elseif(i1==1429221451)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,M3)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
endif
elseif(i1==1430466865)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,RB)
call DTF(O5,it,5,QW)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=S2
set D3F[2]=P2
endif
elseif(i1==1211117650)or(i1==1211119433)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,D74)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
endif
elseif(i1==1215723364)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,DT4)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=B0
set D3F[1]=Y0
endif
elseif(i1==1332109682)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,QW)
call DTF(O5,it,5,DI4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=Z2
set D3F[1]=DU4
endif
elseif(i1==1211117641)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,R1)
call DTF(O5,it,3,DI4)
call DTF(O5,it,4,RB)
call DTF(O5,it,5,DF4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
set D3F[1]=FQ4
endif
elseif(i1==1432642913)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,DF4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,X0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
endif
elseif(i1==1429221432)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,RL)
call DTF(O5,it,5,T1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
set D3F[1]=R3
endif
elseif(i1==1429221430)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,A1)
call DTF(O5,it,4,DQ4)
call DTF(O5,it,5,X2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=L5
endif
elseif(i1==1215128178)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=P1
set D3F[2]=M5
endif
elseif(i1==1328558160)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,T5)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,Y0)
call DTF(O5,it,5,E54)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=W2
endif
elseif(i1==1214931305)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,YB)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,P1)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=M5
endif
elseif(i1==1211117617)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,H1)
call DTF(O5,it,5,A1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
set D3F[1]=S2
set D3F[2]=C5
endif
elseif(i1==1212363833)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,RB)
call DTF(O5,it,4,LL)
call DTF(O5,it,5,X0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=L5
endif
elseif(i1==1212365106)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,LL)
call DTF(O5,it,4,HL)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=X0
set D3F[2]=X2
set D3F[3]=R3
endif
elseif(i1==1333027688)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,DT4)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=Z2
endif
elseif(i1==1332179560)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,LL)
call DTF(O5,it,4,X0)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=F2
set D3F[2]=R3
endif
elseif(i1==1315070563)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,B0)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=X0
set D3F[1]=S2
set D3F[2]=X2
endif
elseif(i1==1214344551)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,N5)
call DTF(O5,it,4,F2)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=Z2
endif
elseif(i1==1160785973)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,Y0)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=C5
endif
elseif(i1==1433631084)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,Y0)
call DTF(O5,it,5,C5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=W2
endif
elseif(i1==1215130471)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DH4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,C0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=M5
endif
elseif(i1==1164799603)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,N5)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=Y0
endif
elseif(i1==1432580716)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,RB)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,HL)
call DTF(O5,it,5,X1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=X0
endif
elseif(i1==1214409837)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,YB)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=M5
set D3F[2]=D44
endif
elseif(i1==1433105516)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,DT4)
call DTF(O5,it,5,T5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=F2
endif
elseif(i1==1211117643)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,P1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=D44
endif
elseif(i1==1211117633)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,R1)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=P1
endif
elseif(i1==1332898670)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,P1)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=Z2
set D3F[1]=S5
endif
elseif(i1==1211117624)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
endif
elseif(i1==1315988077)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=X0
endif
elseif(i1==1211117616)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,DR4)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,F2)
call DTF(O5,it,5,DI4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
set D3F[1]=DG4
endif
elseif(i1==1215063922)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=S2
endif
elseif(i1==1164207469)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,X0)
call DTF(O5,it,4,RL)
call DTF(O5,it,5,X1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=C5
set D3F[1]=X2
set D3F[2]=R3
endif
elseif(i1==1160786000)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=M5
set D3F[2]=DO4
endif
elseif(i1==1311781206)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,Y0)
call DTF(O5,it,3,LL)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,L5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=X2
endif
elseif(i1==1311781193)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,V1)
call DTF(O5,it,5,T1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
endif
elseif(i1==1162032439)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,Y0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=D44
endif
elseif(i1==1430466872)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,DH4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=M5
endif
elseif(i1==1430468406)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DH4)
call DTF(O5,it,4,DI4)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
set D3F[1]=P2
endif
elseif(i1==1164666213)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DH4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
endif
elseif(i1==1433168227)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,YB)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,DH4)
call DTF(O5,it,5,Z2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1311786311)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DQ4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,LL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=L5
endif
elseif(i1==1160786265)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,GC)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,D84)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
set D3F[1]=C5
endif
elseif(i1==1311780930)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=T5
endif
elseif(i1==1211117649)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,DK4)
call DTF(O5,it,4,H1)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=DG4
set D3F[2]=A1
endif
elseif(i1==1211119187)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,V1)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
set D3F[1]=DG4
endif
elseif(i1==1429221446)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,D74)
call DTF(O5,it,4,DI4)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
set D3F[1]=DO4
endif
elseif(i1==1211117652)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,D74)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
set D3F[1]=DG4
endif
elseif(i1==1313026096)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,DK4)
call DTF(O5,it,4,U1)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
endif
elseif(i1==1328558154)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,DK4)
call DTF(O5,it,4,H1)
call DTF(O5,it,5,T1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=FQ4
endif
elseif(i1==1429221441)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DF4)
call DTF(O5,it,3,LL)
call DTF(O5,it,4,X0)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=DG4
set D3F[2]=R3
endif
elseif(i1==1211117654)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,Y0)
call DTF(O5,it,4,W2)
call DTF(O5,it,5,L5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=X2
endif
elseif(i1==1162032951)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,Y0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,E54)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=X2
endif
elseif(i1==1160785970)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,X1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
set D3F[1]=S2
set D3F[2]=C5
endif
elseif(i1==1160786510)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,LL)
call DTF(O5,it,5,Y0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=X2
endif
elseif(i1==1432510828)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,T5)
call DTF(O5,it,3,Y0)
call DTF(O5,it,4,F2)
call DTF(O5,it,5,X2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=W2
endif
elseif(i1==1165451634)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,V1)
call DTF(O5,it,4,X0)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=L5
set D3F[2]=R3
endif
elseif(i1==1162032181)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,H1)
call DTF(O5,it,3,X0)
call DTF(O5,it,4,X1)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=V1
set D3F[2]=C5
endif
elseif(i1==1215722344)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,B0)
call DTF(O5,it,3,T1)
call DTF(O5,it,4,H1)
call DTF(O5,it,5,X1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=C5
set D3F[2]=F2
endif
elseif(i1==1160786242)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,LL)
call DTF(O5,it,4,X0)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D1
set D3F[1]=X2
endif
elseif(i1==1311788336)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,JC)
call DTF(O5,it,3,T1)
call DTF(O5,it,4,V1)
call DTF(O5,it,5,F2)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
set D3F[1]=P2
endif
elseif(i1==1211119409)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,H1)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S2
set D3F[1]=DG4
set D3F[2]=R3
endif
elseif(i1==1332766568)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,DR4)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,ZL)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
endif
elseif(i1==1160786738)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,D74)
call DTF(O5,it,4,V1)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
endif
elseif(i1==1160786507)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,T1)
call DTF(O5,it,4,V1)
call DTF(O5,it,5,RL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
set D3F[1]=R3
endif
elseif(i1==1430467634)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
endif
elseif(i1==1160786505)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,V1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DO4
endif
elseif(i1==1430468913)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=P2
endif
elseif(i1==1328558389)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,G6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,RB)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,U1)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
endif
elseif(i1==1211117646)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,F2)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DG4
endif
elseif(i1==1429221424)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,C0)
call DTF(O5,it,3,N5)
call DTF(O5,it,4,T1)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=S5
set D3F[2]=M5
endif
elseif(i1==1160786502)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,N5)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=S5
set D3F[2]=M5
endif
elseif(i1==1328558406)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,DI4)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=DU4
set D3F[2]=M5
endif
elseif(i1==1429221445)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,D74)
call DTF(O5,it,3,DI4)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,FQ4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=F2
set D3F[1]=DU4
set D3F[2]=M5
endif
elseif(i1==1211117640)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=S5
set D3F[2]=M5
endif
elseif(i1==1311781207)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,R1)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,EC)
call DTF(O5,it,5,DI4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
endif
elseif(i1==1160786241)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DT4)
call DTF(O5,it,2,C0)
call DTF(O5,it,3,B0)
call DTF(O5,it,4,FQ4)
call DTF(O5,it,5,A1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=M5
endif
elseif(i1==1160786243)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DT4)
call DTF(O5,it,2,FQ4)
call DTF(O5,it,3,N5)
call DTF(O5,it,4,Z2)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
endif
elseif(i1==1332963428)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DT4)
call DTF(O5,it,2,N5)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,C0)
call DTF(O5,it,5,D44)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=M5
set D3F[1]=S5
endif
elseif(i1==1430468144)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DX4)
call DTF(O5,it,2,D84)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,F2)
call DTF(O5,it,5,DO4)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
endif
elseif(i1==1160786506)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DX4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,EC)
call DTF(O5,it,5,D44)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=W2
set D3F[1]=M5
endif
elseif(i1==1160786504)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DX4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,C0)
call DTF(O5,it,4,EC)
call DTF(O5,it,5,U1)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=M5
endif
elseif(i1==1328558390)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,QW)
call DTF(O5,it,4,D84)
call DTF(O5,it,5,C0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=DU4
set D3F[1]=D44
set D3F[2]=M5
endif
elseif(i1==1211117653)then
if MU[O5]==1 then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,DQ4)
call DTF(O5,it,5,D44)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=A1
endif
else
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,H6)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DT4)
call DTF(O5,it,3,FQ4)
call DTF(O5,it,4,N5)
call DTF(O5,it,5,HL)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=Y0
endif
endif
elseif(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)then
if G97[112+O5]then
set u=COE(O5,it,(not DBF))
set G97[$C0+O5]=true
else
set u=null
endif
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F6)
call DTF(O5,u,1,DR4)
call DTF(O5,it,2,DS4)
call NX7(1.)
call DTF(O5,u,3,F2)
call DTF(O5,it,4,D74)
call DTF(O5,it,5,RL)
call DTF(O5,u,6,DF4)
call DTF(O5,u,7,DG4)
call DTF(O5,it,8,T1)
call DTF(O5,u,9,T1)
call DTF(O5,u,$A,L5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=U1
set D3F[1]=R3
endif
set u=null
elseif(i1==1311788363)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,N6)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,N5)
call DTF(O5,it,5,C0)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=D44
set D3F[1]=S5
set D3F[2]=M5
set D3F[3]=EC
endif
elseif(i1==1311788343)then
if(G77[$90+O5]==1)and(not G97[$A0+O5])then
call DTF(O5,it,0,F44)
call DTF(O5,it,1,DS4)
call DTF(O5,it,2,DX4)
call DTF(O5,it,3,DT4)
call DTF(O5,it,4,P1)
call DTF(O5,it,5,N5)
endif
if(G77[$90+O5]==2)or(G97[$A0+O5])then
set D3F[0]=S5
set D3F[1]=T1
set D3F[2]=M5
endif
else
set J4=true
endif
if(not G97[112+O5])then
set G97[112+O5]=true
set G77[32+O5]=0
set G77[$90+O5]=0
set Q14[112+O5]=CreateTrigger()
call TriggerAddAction(Q14[112+O5],function DNF)
call Q97(GetHandleId(Q14[112+O5]),"p",O5)
return
endif
if(not J4)and((G77[$90+O5]==2)or(G97[$A0+O5]))and(OA7(it))then
if DBF then
set G97[$B0+O5]=true
else
if not G97[80+O5]then
call DGF(O5)
set G97[80+O5]=true
set G97[$B0+O5]=true
endif
endif
set PN7=true
if G77[112+O5]!=0 and G77[432+O5]!=2 then
set CVE=-1
else
set CVE=0
endif
if(G77[464+O5]<G77[480+O5]+CVE)and(not G97[48+O5])then
loop
exitwhen(G77[464+O5]>=G77[480+O5]+CVE)
set PN7=false
set CWE=LoadInteger(CU4,G77[448+O5],G77[464+O5])
set i=0
loop
exitwhen(i>23)or PN7
if(G87[O5*24+i]==CWE)then
set PN7=true
elseif PJ7(CWE,G87[O5*24+i],false)then
set PN7=true
endif
if PN7 then
exitwhen true
endif
set i=i+1
endloop
if PN7 then
set PN7=DEF(O5,it,CWE,G47[O5*24+i],true)
else
set PN7=DTF(O5,it,-2,CWE)
endif
if(PN7)then
set G77[464+O5]=G77[464+O5]+1
else
exitwhen true
endif
endloop
endif
if G77[112+O5]==0 and PN7 then
if IsPlayerAlly(Player(O5),Y7[0])then
set D1F="Sent|"
else
set D1F="Scrg|"
endif
set DLF=false
loop
set D6F=false
set CVE=1
if G97[64+O5]then
set CVE=0
endif
set PN7=true
loop
set i=C9E(O5)
exitwhen((i<=CVE)or(PN7==false))
set k=0
set i=0
set NN7=0
set D0F=0
loop
exitwhen i>9
if D3F[i]!=0 then
set NN7=i+1
endif
if D3F[$A+i]!=0 then
set D0F=i+1
endif
set i=i+1
endloop
set i=0
set PN7=false
loop
exitwhen(((not G97[64+O5])and(i>=NN7+NN7))or(i>=NN7+NN7+D0F+D0F))
if i<NN7 then
set j=GetRandomInt(0,NN7)
elseif i<NN7+NN7 then
set j=i-NN7
elseif i<NN7+NN7+D0F then
set j=$A+GetRandomInt(0,D0F)
else
set j=$A+(i-(NN7+NN7+D0F))
endif
if D3F[j]!=0 then
if(D3F[j]==S2 and(R87(Q_4,SK7(it)+"|Xb")))then
set D3F[j]=0
else
set k=R47(1128887405,D1F+I2S(D3F[j]))
set CWE=R47(1128877176,I2S(GetHandleId(it))+"|"+I2S(D3F[j]))
if(k>=1)or(((not CJE(D3F[j]))and(CWE>0))or(CWE>1))or(CFE(O5,it,D3F[j])==false and(D3F[j]==S2 and PD7(it,H1))==false)then
set D3F[j]=0
else
set PN7=DTF(O5,it,-2,D3F[j])
call SaveInteger(CU4,G77[448+O5],G77[480+O5],D3F[j])
set G77[480+O5]=G77[480+O5]+1
exitwhen true
endif
endif
endif
set i=i+1
endloop
endloop
call DGF(O5)
if G77[112+O5]==0 and(not DLF)then
set DLF=true
set PN7=true
loop
exitwhen PN7==false
set i=0
set j=0
set NN7=0
set k=0
set CWE=-1
set PN7=false
loop
exitwhen(i>5)
set bj_lastCreatedItem=UnitItemInSlot(it,i)
set CVE=OK7(bj_lastCreatedItem)
set j=0
if(LoadInteger(CU4,G77[$E0+O5],GetHandleId(bj_lastCreatedItem))!=0)or(R87(1129085013,I2S(GetHandleId(it))+"|"+I2S(CVE)))then
elseif(CVE==NX)then
set j=$A
elseif(CVE==DI4)then
if(R47(1128887405,D1F+I2S(DU4))<=1)then
set j=$A
else
set j=1
endif
elseif(CVE==H1)then
set j=8
elseif((CVE==RB or CVE==VB)and(not PD7(it,SU[DG4]))and(R47(1128887405,D1F+I2S(DG4))<=1))then
set j=8
elseif(CVE==N5 or CVE==R5)then
set j=7
elseif(CVE==C0 or CVE==F5 or CVE==G5 or CVE==J5)then
set j=6
elseif((CVE==LL and GetItemCharges(bj_lastCreatedItem)<=3)or CVE==E1)or(CVE==DJ4 or CVE==DK4)or(CVE==D74 or CVE==D84)then
set j=5
elseif(CVE==X1)then
set j=4
elseif(CVE==RL)then
set j=4
elseif(CVE==EV or CVE==F6 or CVE==G6 or CVE==H6 or CVE==DR4 or CVE==YB or CVE==LB or CVE==F44)and(not G97[64+O5])then
set j=3
endif
if j>NN7 then
set NN7=j
set k=i
set CWE=CVE
endif
set i=i+1
endloop
if NN7!=0 then
if DBF then
call SaveInteger(CU4,G77[$E0+O5],GetHandleId(bj_lastCreatedItem),G77[48+O5])
endif
call QF7(1129085013,I2S(GetHandleId(it))+"|"+I2S(CWE),true)
call C8E(O5,it)
if(CWE==NX)then
set PN7=DTF(O5,it,-2,DI4)
set CWE=DI4
elseif(CWE==DI4)and(R47(1128887405,D1F+I2S(DU4))<=1)then
set PN7=DTF(O5,it,-2,DU4)
set CWE=DU4
elseif(CWE==H1)then
set PN7=DTF(O5,it,-2,S2)
set CWE=S2
elseif(CWE==N5 or CWE==R5)then
set PN7=DTF(O5,it,-2,S5)
set CWE=S5
elseif(CWE==C0 or CWE==F5 or CWE==G5 or CWE==J5)then
set PN7=DTF(O5,it,-2,M5)
set CWE=M5
elseif(CWE==LL or CWE==E1)then
set PN7=DTF(O5,it,-2,D1)
set CWE=D1
elseif(CWE==X1)then
set PN7=DTF(O5,it,-2,C5)
set CWE=C5
elseif(CWE==RL)then
set PN7=DTF(O5,it,-2,R3)
set CWE=R3
elseif(CWE==EV or CWE==F6 or CWE==G6 or CWE==H6 or CWE==DR4 or CWE==YB or CWE==LB or CWE==F44)then
set PN7=DTF(O5,it,-2,E6)
if PN7 then
set D6F=true
endif
set CWE=E6
elseif(CWE==DI4)then
set PN7=DTF(O5,it,-2,DU4)
set CWE=DU4
elseif(CWE==RB or CWE==VB)then
set G77[336+O5]=CWE
set PN7=DTF(O5,it,-2,DG4)
set CWE=DG4
elseif(CWE==DJ4 or CWE==DK4)or(CVE==D74 or CVE==D84)then
set G77[336+O5]=CWE
set PN7=DTF(O5,it,-2,P2)
set CWE=P2
endif
call SaveInteger(CU4,G77[448+O5],G77[480+O5],CWE)
set G77[480+O5]=G77[480+O5]+1
endif
endloop
endif
exitwhen(not D6F)
endloop
endif
endif
if(not J4)and(i!=0)and(not G97[64+O5])and(not DBF)and(not PD7(it,SU[XC]))and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HJ4[XC])then
set CVE=CXE(O5,false)-5
if CVE>0 then
set j=CSE(O5,false,false)
if j!=-1 then
call C1E(O5,it,G47[O5*24+j],G87[O5*24+j])
endif
endif
endif
if(not J4)and(i==0)then
call DGF(O5)
set CVE=B6E(O5,it,false)
if GetHeroLevel(it)>=6 and G97[64+O5]==false then
set CVE=CVE-1
endif
if CVE>0 and true then
call SetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)+HJ4[AX])
call DFF(O5,it,AX,false)
set CVE=CVE-1
endif
if PD7(it,SU[QC])then
call DFF(O5,it,QC,false)
endif
set G77[320+O5]=CVE
loop
exitwhen(CVE<=0)
call DFF(O5,it,OW,false)
set CVE=CVE-1
endloop
endif
set G97[48+O5]=false
if not DBF then
if G77[48+O5]<G77[32+O5]then
set G77[48+O5]=G77[32+O5]
endif
if G97[$C0+O5]then
call CRE(O5,null)
endif
call FlushChildHashtable(CU4,G77[$E0+O5])
endif
call FlushChildHashtable(CU4,G77[$D0+O5])
call FlushChildHashtable(CU4,G77[368+O5])
set G77[$A0+O5]=0
if DAF(O5,DBF)then
call DYF(O5)
elseif G77[432+O5]==2 then
call DGF(O5)
set G77[$C0+O5]=0
set G97[$80+O5]=false
set G97[$90+O5]=false
set KT4[32+O5]=KT4[O5]
endif
if((i1==1164277353)or(i1==1164277357))or((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
call BWE(it)
endif
endfunction
function D5F takes unit it returns nothing
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local integer i
local integer j
local item ON7=null
local boolean PN7=true
local boolean D2F=false
local boolean D_F=(not DOF(O5))
set LP4="E4F"
if(not((Bz>=Q94-30.)and(Bz>G77[$B0+O5])and(i1!=1211117642)))or G97[$E0+O5]then
return
endif
set G77[$B0+O5]=R2I(Bz)+30
set hq[592+O5]=Bz+180.
set G0[320+O5]=false
if(GetUnitState(it,UNIT_STATE_LIFE)>1000. or GetUnitState(it,UNIT_STATE_LIFE)/GetUnitState(it,UNIT_STATE_MAX_LIFE)>.8)==false and G77[96+O5]!=0 then
if(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HJ4[G77[96+O5]])then
call DCF(O5,it,true)
endif
endif
loop
exitwhen GetUnitState(it,UNIT_STATE_LIFE)>1000. or GetUnitState(it,UNIT_STATE_LIFE)/GetUnitState(it,UNIT_STATE_MAX_LIFE)>.8
if GetUnitState(it,UNIT_STATE_LIFE)<=.405 or IF4[O5]then
set G77[$B0+O5]=0
return
endif
call TriggerSleepAction(1.)
endloop
if(T64 and T54[O5])then
if(UnitHasItem(it,T_4[O5]))then
call DisableTrigger(H84)
call UnitRemoveItem(it,T_4[O5])
call RemoveItem(T_4[O5])
call SetItemVisible(T_4[O5],false)
call EnableTrigger(H84)
endif
if(T24[O5]!=null)then
call NX7(.2)
call UnitAddItem(it,T24[O5])
endif
set T_4[O5]=null
set T24[O5]=null
endif
if(U84[O5])then
if(PD7(it,SU[XC]))then
set U74[O5]=bj_lastCreatedItem
call DisableTrigger(H84)
call UnitRemoveItem(it,U74[O5])
call SetItemPosition(U74[O5],9999,-9999)
call SetItemVisible(U74[O5],false)
call EnableTrigger(H84)
set U74[O5]=null
endif
if(U44[O5]!=null)then
call NX7(.2)
call UnitAddItem(it,U44[O5])
endif
set U84[O5]=false
set U44[O5]=null
endif
if(PD7(it,SU[DJ4])and(RG7(it,"ArmletOfMordigan|Active")))then
call UnitUseItem(it,bj_lastCreatedItem)
endif
loop
call TriggerSleepAction(.1)
exitwhen Bz>G77[$A0+O5]
if GetWidgetLife(it)<.405 then
set ON7=null
set G77[$B0+O5]=0
return
endif
endloop
if((P4)and(hG[$80+O5]>0))then
set UP=GetPlayerState(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD)
if(UP>=hG[$80+O5])then
call SetPlayerStateBJ(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD,UP-hG[$80+O5])
set hG[$80+O5]=0
else
call SetPlayerStateBJ(GetOwningPlayer(it),PLAYER_STATE_RESOURCE_GOLD,0)
set hG[$80+O5]=hG[$80+O5]-UP
endif
endif
set UP=0
set LG4=null
loop
set ON7=UnitItemInSlot(it,UP)
set i=GetPlayerId(GetItemPlayer(ON7))
if((ON7!=null)and((i!=O5))and(i!=$F))then
if IsUnitEnemy(it,Player(i))then
set i=O5
else
if LG4==null then
set LG4=CreateForce()
call ForceEnumAllies(LG4,Player(O5),null)
endif
set bj_forLoopAIndex=GetPlayerId(GetItemPlayer(ON7))
call S97(it,LG4,GetObjectName(1496331312)+P[bj_forLoopAIndex]+GetPlayerName(Player(bj_forLoopAIndex))+GetObjectName(1496331313)+GetItemName(ON7)+GetObjectName(1496331314))
endif
set j=OK7(ON7)
set LH4=CreateItem(RU[j],GetUnitX(KT4[i]),GetUnitY(KT4[i]))
call SetItemPlayer(LH4,GetItemPlayer(ON7),false)
call SetItemCharges(LH4,GetItemCharges(ON7))
call RemoveItem(ON7)
set ON7=null
endif
set UP=UP+1
exitwhen(UP>=bj_MAX_INVENTORY)
endloop
if LG4!=null then
call DestroyForce(LG4)
set LG4=null
endif
call TriggerSleepAction(.1)
set G97[48+O5]=false
set G47[304+O5]=null
if PN7 and D_F and(G77[32+O5]<G77[48+O5])then
loop
set UP=R47(1128887405,I2S(GetHandleId(it))+"|s"+I2S(G77[32+O5]))
if UP!=0 then
if G77[32+O5]>G77[$F0+O5]then
set i=-2
else
set i=G77[32+O5]
endif
set PN7=DTF(O5,it,i,UP)
endif
exitwhen G77[32+O5]==G77[48+O5]or UP==0 or(not PN7)
endloop
elseif(not D_F)then
set PN7=false
endif
call B2E(O5)
set G77[320+O5]=0
if PN7 and G77[96+O5]!=0 and(not G97[$90+O5])then
set PN7=(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HJ4[G77[96+O5]])
endif
if PN7 and G77[112+O5]!=0 and G77[$90+O5]!=1 and(not DOF(O5))then
set PN7=DTF(O5,it,-2,G77[112+O5])
call DGF(O5)
endif
if D_F then
if(not GT7)and((R87(Q_4,SK7(it)+"|W"))and(GetHeroLevel(it)>6))and(not BBE(O5,it))then
if((PD7(it,SU[E6]))or(i1==1164799603)or(i1==1160786242)or(i1==1211117641)or(i1==1311780946)or(BQE(it)))then
if(R87(Q_4,SK7(it)+"|G"))and(GetHeroLevel(it)>$B)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)>1500.)and(Bz>=R77(Q_4,SK7(it)+"|GTimer"))and(DUF(O5,it,LV,true))then
call QD7(Q_4,SK7(it)+"|GTimer",Bz+480.)
elseif((i1!=1315007329)and(i1!=1215722344)and(i1!=1430468913)and(i1!=1311781185))then
if(N87(i1)<=2 or GetRandomInt(1,3)==1)and(R47(Q_4,SK7(it)+"|DustCount")<R2I(.5*I2R(R47(Q_4,SK7(it)+"|SentryCount"))))then
if DUF(O5,it,BC,true)then
call Q97(Q_4,SK7(it)+"|DustCount",R47(Q_4,SK7(it)+"|DustCount")+1)
endif
else
if DUF(O5,it,VC,true)then
call Q97(Q_4,SK7(it)+"|SentryCount",R47(Q_4,SK7(it)+"|SentryCount")+1)
endif
endif
endif
endif
endif
if(not D2F)and((not G97[64+O5])and((GetHeroLevel(it)>8)or(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8))and(i1!=1164799603)and(i1!=1160786242)and(i1!=1211117641)and(i1!=1311780946))then
if not(PD7(it,SU[XC])or PD7(KT4[O5],SU[XC]))and(not PE7(it))then
call DFF(O5,it,XC,true)
set D2F=true
endif
endif
call DUF(O5,it,NX,(((GetHeroLevel(it)<17)and(R87(Q_4,SK7(it)+"|X"))and(i1!=1429221446)and(i1!=1164207469)and(i1!=1162032951))and((not PD7(it,SU[DI4]))and(not PD7(it,SU[DU4])))))
if PN7 or(G77[32+O5]<G77[48+O5])then
call DCF(O5,it,false)
endif
set G77[$C0+O5]=0
set G97[$80+O5]=false
set G97[$90+O5]=false
set G97[320+O5]=true
call DGF(O5)
set G47[304+O5]=null
if(not D2F)and((not G97[64+O5])and((GetHeroLevel(it)>$A)or(GetUnitState(it,UNIT_STATE_MAX_LIFE)>$3E8))and(i1!=1164799603)and(i1!=1160786242)and(i1!=1211117641)and(i1!=1311780946))and(not PE7(it))then
if not(PD7(it,SU[XC])or PD7(KT4[O5],SU[XC]))and(not PE7(it))then
call DFF(O5,it,XC,true)
set D2F=true
endif
endif
if(PX4)then
call DUF(O5,it,QC,(GetHeroLevel(it)<8)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)<$3E8))
else
call DUF(O5,it,PC,(GetHeroLevel(it)<8)and(GetUnitState(it,UNIT_STATE_MAX_LIFE)<$3E8))
endif
call C4E(O5,1)
if PD7(it,SU[XC])and GetItemCharges(bj_lastCreatedItem)==1 then
call DFF(O5,it,XC,false)
endif
if PD7(it,SU[VC])and GetItemCharges(bj_lastCreatedItem)==1 then
call DFF(O5,it,VC,false)
endif
if PD7(it,SU[QC])and GetItemCharges(bj_lastCreatedItem)==1 then
call DFF(O5,it,QC,false)
endif
if PD7(it,SU[PC])and GetItemCharges(bj_lastCreatedItem)==1 then
call DFF(O5,it,PC,false)
endif
if PD7(it,SU[VB])then
call DFF(O5,it,F74,false)
endif
call C4E(O5,0)
call B2E(O5)
call DXF(O5)
call C8E(O5,it)
call CRE(O5,null)
endif
set G77[$B0+O5]=0
set it=null
set ON7=null
endfunction
function E4F takes nothing returns nothing
local unit u
local integer j
local integer NN7
local integer k
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)then
call D5F(GetTriggerUnit())
elseif false and(Bz>=G77[$A0+O5])and(Bz>G77[$B0+O5])and(LR7(GetTriggerUnit()))then
set u=GetTriggerUnit()
set G77[$A0+O5]=R2I(Bz)+30
call C8E(O5,u)
set j=6
set k=G77[$80+O5]-1
loop
exitwhen j>k
if G47[O5*24+j]!=null and(LoadBoolean(CU4,G77[256+O5],GetHandleId(G47[O5*24+j])))then
set NN7=CBE(O5,u,G87[O5*24+j],G47[O5*24+j],false,true,false)
if NN7!=-1 and NN7<6 then
set G47[O5*24+NN7]=G47[O5*24+j]
set G87[O5*24+NN7]=G87[O5*24+j]
endif
call SetItemVisible(G47[O5*24+j],false)
set G47[O5*24+j]=null
endif
set j=j+1
endloop
set u=null
set G77[$A0+O5]=0
endif
endfunction
function E7F takes nothing returns nothing
local integer O5=1
local integer E8F=$B
local boolean PN7=false
local boolean J4=true
local integer i=R2I(Bz)+30
set LP4="E7F"
loop
exitwhen O5>E8F
if O5==6 then
set O5=7
endif
set PN7=true
set J4=false
if WQ7(Player(O5))and G7[O5]!=null and(Bz>G77[$A0+O5])and(Bz>G77[$B0+O5])and(N37(G7[O5],h9[16+O5])>$4B0)then
if PN7 and G77[96+O5]!=0 then
set PN7=(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>=HJ4[G77[96+O5]])
endif
if((PN7)and(G77[96+O5]!=0)and(G77[$90+O5]==1)and(eY[O5]==1)and(eY[80+O5]==1 or eY[80+O5]==2)and(G77[32+O5]==G77[48+O5])and(BAE(G77[96+O5]))and(not GZ[$A0+O5])and((not PE7(G7[O5]))or(G77[320+O5]>0)))and(not G97[288+O5])then
set G97[$F0+O5]=true
set PN7=false
elseif G97[$F0+O5]then
set G97[$F0+O5]=false
set bj_forLoopAIndex=GetUnitUserData(h8[O5])
if bj_forLoopAIndex>100 then
call XG7(G7[O5])
endif
endif
if PN7 and G77[112+O5]!=0 and G77[$90+O5]!=1 and(not DOF(O5))then
set G77[$A0+O5]=i
set G77[$B0+O5]=i
set G97[48+O5]=true
set PN7=DTF(O5,G7[O5],-2,G77[112+O5])
if PN7 then
set G77[112+O5]=0
endif
set G77[$A0+O5]=0
set G77[$B0+O5]=0
set G97[48+O5]=false
set J4=true
endif
if PN7 then
set G77[$B0+O5]=i
call DCF(O5,G7[O5],true)
set G77[$B0+O5]=0
elseif J4 then
call FlushChildHashtable(CU4,G77[$D0+O5])
endif
if(G77[$C0+O5]>GF7)and(G97[$90+O5])then
set G97[$80+O5]=true
endif
if DAF(O5,true)then
call DYF(O5)
endif
endif
set O5=O5+1
endloop
endfunction
function E9F takes nothing returns nothing
set LP4=LP4+"(tNv)"
if(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_USER and QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false)then
if((GetItemPlayer(GetManipulatedItem())!=null)and(GetItemPlayer(GetManipulatedItem())!=Player($F))and(GetItemPlayer(GetManipulatedItem())!=GetOwningPlayer(GetTriggerUnit()))and((GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP)or(N37(GetTriggerUnit(),PL7(GetTriggerUnit()))<=2000.)))then
call UnitAddItem(G7[GetPlayerId(GetItemPlayer(GetManipulatedItem()))],GetManipulatedItem())
elseif((GetItemPlayer(GetManipulatedItem())==null)or(GetItemPlayer(GetManipulatedItem())==Player($F)))then
call SetItemPlayer(GetManipulatedItem(),GetOwningPlayer(GetTriggerUnit()),false)
endif
endif
endfunction
function EDF takes integer O5,real x,real y returns nothing
local unit it=CreateUnit(Player($F),1697656899,x,y,270.)
local texttag t=null
set LP4="tbv"
call UnitAddAbility(it,1097625443)
call UnitAddAbility(it,1093678162)
call UnitAddAbility(it,1093685300)
call SetUnitUserData(it,O5)
set h7[O5]=it
call SetUnitX(it,x)
call SetUnitY(it,y)
if(((O5>$A)and(O5<18))or((O5>30)and(O5<40))or((O5>50)and(O5<60)))then
call GroupAddUnit(ii,it)
endif
set it=null
endfunction
function EEF takes integer O5,integer X97,integer XD7,real x,real y returns nothing
call EDF(O5,x,y)
set hj[O5]=X97
set hj[256+O5]=XD7
endfunction
function EFF takes integer i,boolean NK7,real EGF returns integer
if i>5 and i<$B then
set i=$B
elseif i>17 and i<25 then
set i=17
elseif i>25 and i<31 then
set i=31
elseif i>39 and i<45 then
set i=39
elseif i>45 and i<51 then
set i=51
elseif i>59 and i<100 then
set i=59
endif
if EGF>$7D0 then
return i
endif
if i>=$B and i<=17 then
if NK7 then
if i>$F and PL4==0 then
set i=$F
elseif i>16 and PL4<=1 then
set i=16
endif
else
if i<$D and PC4==0 then
set i=$D
elseif i<$C and PC4<=1 then
set i=$C
endif
endif
elseif i>=31 and i<=39 then
if NK7 then
if i>35 and P14==0 then
set i=35
elseif i>37 and P14<=1 then
set i=37
endif
else
if i<34 and P34==0 then
set i=34
elseif i<33 and P34<=1 then
set i=33
endif
endif
elseif i>=51 and i<=59 then
if NK7 then
if i>57 and P04==0 then
set i=57
elseif i>58 and P04<=1 then
set i=58
endif
else
if i<55 and P64==0 then
set i=55
elseif i<52 and P64<=1 then
set i=52
endif
endif
endif
return i
endfunction
function EHF takes integer O5,integer i,integer k,boolean NK7 returns integer
if(i==31)or(i==32)then
return 334
elseif(i==33)then
return 328
elseif(i==34)then
if(h8[96+O5]==null or(GetUnitX(h7[35])-GetUnitY(h8[96+O5]))<=2100.)and G0[$D0+O5]then
return 329
else
set G0[$D0+O5]=false
return 326
endif
elseif(i==35)or(i==36)then
return 329
elseif(i==37)or(i==38)or(i==39)then
return 330
elseif(i==51)or(i==52)or(i==53)then
return 331
elseif(i==54)or(i==55)or(i==56)then
return 332
elseif(i==57)then
if(h8[96+O5]==null or(GetUnitY(h8[96+O5])-GetUnitX(h7[55]))<=2850.)and G0[$D0+O5]then
return 332
else
set G0[$D0+O5]=false
return 327
endif
elseif(i==58)or(i==59)then
return 333
elseif(k==1)then
if(i==$B)or(i==$C)then
return 334
elseif(i==$D)then
return 335
elseif(i==$E)then
if NK7 then
return 336
else
return 335
endif
elseif(i==$F)then
return 336
elseif(i==16)or(i==17)then
return 337
endif
elseif(k==2)then
if(i==$B)or(i==$C)then
return 338
elseif(i==$D)then
return 339
elseif(i==$E)then
if NK7 then
return 341
else
return 340
endif
elseif(i==$F)or(i==16)then
return 341
elseif(i==17)then
return 342
endif
endif
return 0
endfunction
function EIF takes integer O5,integer i,integer j returns boolean
if i==j then
return true
elseif(i==328 or i==334 or i==335 or i==326)and(j==328 or j==334 or j==335 or j==326)then
return true
elseif(i==329 or i==330 or i==326)and(j==329 or j==330 or j==326)then
return true
elseif(i==331 or i==332 or i==327)and(j==331 or j==332 or j==327)then
return true
elseif eY[272+O5]==0 then
if(i==338 or i==339 or i==340 or i==331 or i==332)and(j==338 or j==339 or j==340 or j==331 or j==332)then
return true
elseif(i==329 or i==330 or i==336 or i==337)and(j==329 or j==330 or j==336 or j==337)then
return true
endif
endif
return false
endfunction
function EJF takes unit MQ7,integer O5 returns boolean
return((not DOF(O5))and(not G97[64+O5])and(GetUnitLevel(MQ7)>5)and PD7(MQ7,SU[XC])==false and PE7(MQ7)==false and G97[320+O5]and GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>$C8)
endfunction
function EKF takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer UP=R47(GetHandleId(GetTriggeringTrigger()),"SentNum")
local integer i
local boolean EMF=false
set LP4="EKF"
if GetPlayerController(Player(O5))==MAP_CONTROL_USER and MQ7==G7[O5]then
if(IsUnitAlly(MQ7,Y7[0]))then
set UP=R47(GetHandleId(GetTriggeringTrigger()),"SentNum")
else
set UP=R47(GetHandleId(GetTriggeringTrigger()),"ScrgNum")
endif
set h8[O5]=h7[UP+1]
set h8[80+O5]=h7[UP]
set h9[O5]=h7[UP-1]
set h9[16+O5]=h7[hj[UP]]
set h8[16+O5]=h7[hj[256+UP]]
endif
if((GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)and(IsUnitType(MQ7,UNIT_TYPE_HERO)))then
if(IsUnitAlly(MQ7,Y7[0]))then
set UP=R47(GetHandleId(GetTriggeringTrigger()),"SentNum")
else
set UP=R47(GetHandleId(GetTriggeringTrigger()),"ScrgNum")
endif
if(eY[O5]==9)then
if(not OY7(MQ7))then
set G0[$B0+O5]=true
endif
if((h8[$80+O5]==h7[UP])and(eY[272+O5]==0))then
set h8[O5]=h7[UP]
set eY[O5]=1
elseif((h8[48+O5]==h7[UP]and(eY[272+O5]<=1))or((eY[272+O5]==1)and(G0[$B0+O5])))then
if eY[272+O5]==1 then
set h8[32+O5]=h7[EHF(O5,R47(GetHandleId(GetTriggeringTrigger()),"SentNum"),eY[304+O5],(IsUnitAlly(MQ7,Y7[0])))]
endif
set h8[48+O5]=h8[32+O5]
set h9[O5]=PL7(MQ7)
if(iU(MQ7))then
if OV7(MQ7)then
if G0[$B0+O5]then
call PV7(MQ7,$D0012,h8[48+O5])
else
if hq[640+O5]<=Bz then
call PV7(MQ7,$D0012,h9[O5])
else
call PV7(MQ7,$D000F,h9[O5])
endif
endif
endif
endif
elseif eY[272+O5]>=4 then
set LE4=true
if(h8[$80+O5]==h7[UP])then
set eY[O5]=1
elseif(h8[48+O5]==h7[UP])and(eY[272+O5]==5)then
set h8[48+O5]=h8[$80+O5]
elseif(h8[112+O5]==h7[UP])and(eY[272+O5]==4)then
set eY[272+O5]=5
set i=GetUnitUserData(h8[112+O5])
if IsUnitAlly(MQ7,Y7[0])then
if(i>35 and i<40)then
set h8[48+O5]=h7[35]
elseif(i>55 and i<60)then
set h8[48+O5]=h7[55]
endif
else
if(i>30 and i<35)then
set h8[48+O5]=h7[35]
elseif(i>50 and i<55)then
set h8[48+O5]=h7[55]
endif
endif
set h8[32+O5]=h8[48+O5]
else
set LE4=false
endif
if LE4 then
if h8[96+O5]!=null then
call ZSE(O5,h8[96+O5],true,true)
endif
if OV7(MQ7)then
if(h8[96+O5]!=null and OY7(h8[96+O5]))then
call IssueTargetOrderById(MQ7,$D000F,h8[96+O5])
else
call PV7(MQ7,$D000F,h8[48+O5])
endif
endif
endif
endif
elseif eY[O5]==1 and(((UP==34 and P24>4)or UP==35 or(UP==56 and P_4>6)or UP==57)or((UP==$87 and P24<=4)or UP==$88 or(UP==$99 and P_4<=6)or UP==$9A))and(G97[$F0+O5]or EJF(MQ7,O5))then
set bj_lastLoadedUnit=MQ7
set bj_lastLoadedUnit=P47($4B0,PU7(MQ7),Condition(function TD7))
if(bj_lastLoadedUnit==null)then
if UP==34 or UP==35 or UP==$88 or UP==$87 then
set h8[O5]=h7[353]
elseif UP==56 or UP==57 or UP==$9A or UP==$99 then
set h8[O5]=h7[354]
endif
set G97[256+O5]=true
call PV7(MQ7,$D0012,h8[O5])
endif
elseif eY[O5]==1 and is(MQ7)and h4[O5]==null then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=UP-$A
if(P54==i)then
set EMF=true
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=UP-30
if(P24==i)then
set EMF=true
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set i=UP-50
if(P_4==i)then
set EMF=true
endif
endif
set bj_lastLoadedUnit=MQ7
if EMF and PD7(MQ7,SU[VC])and P47(2000.,PU7(h7[UP]),Condition(function VI7))==null and P47(800.,PU7(h7[UP]),Condition(function P97))==null then
call UnitUseItemPoint(MQ7,bj_lastCreatedItem,GetUnitX(h7[UP]),GetUnitY(h7[UP]))
endif
endif
if((h8[O5]==h7[UP])or(h9[O5]==h7[UP])or((h8[16+O5]==h7[hj[256+UP]])and(h9[16+O5]==h7[hj[UP]]))or(h8[16+O5]==h7[hj[UP]])or(h9[16+O5]==h7[hj[256+UP]]))and(not G97[256+O5])then
call XE7(MQ7,UP)
endif
if((O37(MQ7))and(not Id(O5))and(GetUnitCurrentOrder(MQ7)==$D0012))then
if((UP==38)or(UP==37)or(UP==36))then
call XE7(MQ7,32)
elseif((UP==$8A)or(UP==$89)or(UP==$88))then
call XE7(MQ7,$84)
elseif((UP==58)or(UP==57)or(UP==56))then
call XE7(MQ7,52)
elseif((UP==$9E)or(UP==$9D)or(UP==$9C))then
call XE7(MQ7,$98)
endif
endif
elseif(O5==GetPlayerId(Y7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=UP-$A
if(P54+1==i)then
set P54=i
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=UP-30
if(P24+1==i)then
set P24=i
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set i=UP-50
if(P_4+1==i)then
set P_4=i
endif
endif
elseif(O5==GetPlayerId(Z7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=UP-$A
if(P54-1==i)then
set P54=i
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=UP-30
if(P24-1==i)then
set P24=i
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set i=UP-50
if(P_4-1==i)then
set P_4=i
endif
endif
endif
set MQ7=null
endfunction
function ENF takes nothing returns boolean
return((((GetOwningPlayer(GetTriggerUnit())==Y7[0])or(GetOwningPlayer(GetTriggerUnit())==Z7[0]))and(not OI7(GetTriggerUnit()))and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)))or((not IsUnitIllusion(GetTriggerUnit()))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))))!=null
endfunction
function EOF takes nothing returns boolean
return((GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)))!=null
endfunction
function EPF takes integer EQF,integer ERF returns nothing
local trigger t
local integer i=EQF
local boolexpr Ig=Condition(function ENF)
set LP4="thv"
loop
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],400.,Q54)
call Q97(GetHandleId(t),"SentNum",i)
call Q97(GetHandleId(t),"ScrgNum",hj[512+i])
call TriggerAddCondition(t,Ig)
call TriggerAddAction(t,function EKF)
set i=i+1
exitwhen i>ERF
endloop
set t=null
set Ig=null
endfunction
function ESF takes integer O5,integer UP,integer i,boolean NK7 returns integer
local integer j
local integer k
if UP==326 then
if i==34 then
set j=34
else
set j=EHF(O5,i,1,NK7)
endif
elseif UP==327 then
if i==57 then
set j=57
else
set j=EHF(O5,i,2,NK7)
endif
else
set k=eY[304+O5]
set j=EHF(O5,i,k,NK7)
if(j!=0)and(UP!=j)then
if EIF(O5,UP,j)then
elseif(k==1)then
set j=326
elseif(k==2)then
set j=327
endif
else
set j=i
endif
endif
return j
endfunction
function ETF takes integer O5,boolean NK7,integer UP returns nothing
local integer i
local integer j
local boolexpr EUF=null
local unit MQ7=null
set LP4="(aiGank_CheckBegin)"+LP4
if eY[272+O5]>3 then
return
endif
set eY[272+O5]=3
set i=1
set LE4=true
set bj_lastLoadedUnit=h7[M17(NK7,0,100)]
if h8[96+O5]!=null and OA7(h8[96+O5])then
set j=GetPlayerId(GetOwningPlayer(h8[96+O5]))
endif
if((hq[656+O5]<Bz)or((h8[96+O5]!=null)and(N37(h8[96+O5],h8[j])+400<N37(h8[96+O5],h9[j]))))then
loop
exitwhen i>5
if NK7 then
set j=GetPlayerId(Y7[i])
else
set j=GetPlayerId(Z7[i])
endif
if((G7[j]!=null)and(GetWidgetLife(G7[j])>.405)and(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])and(O37(G7[j])==false))then
if eY[272+j]<3 then
set LE4=false
endif
endif
set i=i+1
endloop
endif
if LE4 then
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and(eY[32+GetPlayerId(GetOwningPlayer(h8[96+O5]))]>0))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
set EUF=Condition(function TX7)
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(G7[O5]),GetUnitY(G7[O5]),1800.,EUF)
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit),1800.,EUF)
call DestroyBoolExpr(EUF)
call GroupAddGroup(H8,iA)
set EUF=null
set j=0
loop
set MQ7=FirstOfGroup(iA)
exitwhen MQ7==null
call GroupRemoveUnit(iA,MQ7)
if GetUnitTypeId(MQ7)!=1211117642 and GetUnitLifePercent(MQ7)>50 then
if IsUnitAlly(MQ7,Player(O5))then
set j=j+1
elseif eY[32+GetPlayerId(GetOwningPlayer(MQ7))]>0 then
set j=j-1
endif
endif
endloop
if NK7 then
set LG4=W7
else
set LG4=X7
endif
if j>=0 then
if NK7 then
set bj_lastLoadedUnit=null
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],Y7[0]))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
else
if(h8[96+O5]!=null and GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],Z7[0]))then
set bj_lastLoadedUnit=h8[96+O5]
else
set bj_lastLoadedUnit=h8[112+O5]
endif
endif
call SG7(LG4,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit),O5)
set h8[48+O5]=h8[112+O5]
set h8[32+O5]=h8[48+O5]
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set i=1
loop
exitwhen i>5
if NK7 then
set j=GetPlayerId(Y7[i])
else
set j=GetPlayerId(Z7[i])
endif
if(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])then
set h8[96+j]=h8[96+O5]
if GetWidgetLife(h8[96+O5])>.405 and IsUnitVisible(h8[96+O5],Player(O5))then
call ZSE(j,h8[96+j],true,true)
endif
set h8[48+j]=h8[48+O5]
set h8[32+j]=h8[32+O5]
if not OV7(G7[j])then
if h4[j]!=null then
call IssueTargetOrderById(G7[j],$D000F,h4[j])
else
call PV7(G7[j],$D000F,h8[48+j])
endif
endif
set eY[272+j]=4
set hq[624+j]=Bz+20.
set GZ[$80+j]=true
set G0[$80+j]=true
set G0[256+j]=true
call SH7(G7[j],LG4)
if h8[96+O5]!=null then
call S97(G7[j],LG4,GetObjectName(1496330544)+P[bj_forLoopAIndex]+GetUnitName(h8[96+O5])+"|r")
else
call S97(G7[j],LG4,GetObjectName(1496330297)+NG7(eY[288+O5],false)+"|r")
endif
endif
set i=i+1
endloop
else
set bj_lastLoadedUnit=h7[ESF(O5,GetUnitUserData(h8[32+O5]),GetUnitUserData(h8[$80+O5]),NK7)]
if h8[32+O5]==bj_lastLoadedUnit then
set h8[32+O5]=h8[$80+O5]
else
set h8[32+O5]=bj_lastLoadedUnit
endif
set i=1
loop
exitwhen i>5
if NK7 then
set j=GetPlayerId(Y7[i])
else
set j=GetPlayerId(Z7[i])
endif
if(eY[272+j]!=0)and(eY[j]==9)and(eY[288+j]==eY[288+O5])then
set eY[272+j]=0
set h8[$80+j]=h8[$80+O5]
set h8[32+j]=h8[32+O5]
set h8[48+j]=h8[32+j]
if OV7(G7[O5])then
call PV7(G7[O5],$D0012,h8[32+j])
endif
call SH7(G7[j],LG4)
call S97(G7[j],LG4,GetObjectName(1496330296))
endif
set i=i+1
endloop
endif
else
if not G0[$C0+O5]then
set hq[656+O5]=Bz+15.
set G0[$C0+O5]=true
endif
set h8[48+O5]=h7[UP]
if OV7(G7[O5])then
call IssueImmediateOrderById(G7[O5],$D0019)
endif
endif
set MQ7=null
endfunction
function EVF takes boolean NK7,integer O5,unit m5 returns nothing
local integer i=0
local integer j=0
local real EWF=N37(G7[O5],m5)
local real ZQ7
set i=1
loop
exitwhen i>$B
if NK7 then
set j=GetPlayerId(Y7[i])
else
set j=GetPlayerId(Z7[i])
endif
if((G7[j]!=null)and(GetWidgetLife(G7[j])>.405)and(h4[j]!=null)and(eY[j]==1 or eY[j]>9)and(eY[64+j]==eY[288+O5]or eY[80+j]==eY[288+O5])and(O37(G7[j])==false))then
set ZQ7=N37(G7[j],m5)
if ZQ7>EWF-400 then
set h4[j]=m5
set hq[624+j]=Bz+20.
if is(G7[j])then
call IssueTargetOrderById(G7[j],$D000F,m5)
endif
endif
endif
set i=i+1
endloop
endfunction
function EXF takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
return((GetTriggerUnit()==G7[O5])and(eY[O5]==9)and(WQ7(Player(O5))))
endfunction
function EYF takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer UP
local integer i
local integer j
local integer k
local boolean NK7
set UP=R47(GetHandleId(GetTriggeringTrigger()),"Num")
set NK7=IsUnitAlly(MQ7,Y7[0])
if(eY[272+O5]==0)or((eY[272+O5]<=3)and(h8[48+O5]==h7[UP]))then
if eY[272+O5]==0 then
set i=GetUnitUserData(h8[$80+O5])
else
set i=GetUnitUserData(h8[112+O5])
endif
set j=ESF(O5,UP,i,NK7)
if(eY[272+O5]==0)then
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
if OV7(G7[O5])then
call PV7(G7[O5],$D000F,h8[48+O5])
endif
else
if j<100 then
call ETF(O5,NK7,UP)
else
set eY[272+O5]=2
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
if is(G7[O5])then
call PV7(G7[O5],$D000F,h8[48+O5])
endif
endif
endif
endif
set MQ7=null
endfunction
function EZF takes integer k,integer j returns nothing
local trigger t
local integer i=k
local boolexpr EAF=Condition(function EXF)
set LP4="aiRegisterGankPoint"
loop
exitwhen i>j
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],400.,Q54)
call Q97(GetHandleId(t),"Num",i)
call TriggerAddCondition(t,EAF)
call TriggerAddAction(t,function EYF)
set i=i+1
endloop
set EAF=null
set t=null
endfunction
function EBF takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
return((GetTriggerUnit()==G7[O5])and(WQ7(Player(O5))))
endfunction
function ECF takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=R47(GetHandleId(GetTriggeringTrigger()),"Num")
if WM7(Player(O5))then
if UP==353 then
call XE7(it,34)
elseif UP==354 then
call XE7(it,56)
endif
else
if UP==353 then
call XE7(it,$87)
elseif UP==354 then
call XE7(it,$99)
endif
endif
if(is(it))then
set bj_lastLoadedUnit=it
set bj_lastLoadedUnit=P47(700,PU7(h8[O5]),Condition(function TD7))
if(bj_lastLoadedUnit!=null)then
call PV7(it,$D0012,h9[O5])
else
call PV7(it,$D000F,h8[O5])
endif
endif
if(EJF(it,O5))then
set G97[320+O5]=DUF(O5,it,XC,true)
endif
if(G97[$F0+O5])then
if(G77[$90+O5]==1)and(G97[$E0+O5]==false)then
set G77[432+O5]=1
set G77[$B0+O5]=R2I(Bz)+30
call DCF(O5,it,false)
set G77[$B0+O5]=0
set G77[432+O5]=0
endif
set G97[$F0+O5]=false
set G97[256+O5]=false
endif
set it=null
endfunction
function E3F takes integer k,integer j returns nothing
local trigger t
local integer i=k
local boolexpr EAF=Condition(function EBF)
set LP4="aiRegisterSideShop"
loop
exitwhen i>j
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,h7[i],200.,Q54)
call Q97(GetHandleId(t),"Num",i)
call TriggerAddCondition(t,EAF)
call TriggerAddAction(t,function ECF)
set i=i+1
endloop
set EAF=null
set t=null
endfunction
function E6F takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local integer UP=R47(GetHandleId(GetTriggeringTrigger()),"Num")
set LP4="E6F"
if(((UP==311)or(UP==312))and(eY[O5]==1))then
if(IsUnitAlly(GetTriggerUnit(),Y7[0]))then
if(h8[O5]==h7[36])then
call XE7(GetTriggerUnit(),34)
endif
else
if(h8[O5]==h7[$88])then
call XE7(GetTriggerUnit(),$86)
endif
endif
elseif(UP==313)then
if(IsUnitAlly(GetTriggerUnit(),Z7[0]))then
if(h8[O5]==h7[$88])then
set h9[O5]=h7[$87]
endif
endif
elseif(UP==314)then
if(IsUnitAlly(GetTriggerUnit(),Y7[0]))then
if(h8[O5]==h7[36])then
set h9[O5]=h7[35]
endif
else
if(h8[O5]==h7[$88])then
call XE7(GetTriggerUnit(),$87)
endif
endif
elseif(((UP==321)or(UP==322))and(eY[O5]==1))then
if(IsUnitAlly(GetTriggerUnit(),Y7[0]))then
if(h8[O5]==h7[56])then
call XE7(GetTriggerUnit(),54)
endif
else
if(h8[O5]==h7[$9C])then
call XE7(GetTriggerUnit(),$9A)
endif
endif
elseif((UP==315)and(h8[32+O5]==h7[315])and(eY[O5]==$A))then
set h8[32+O5]=h9[32+O5]
call PV7(GetTriggerUnit(),$D0012,h8[32+O5])
elseif((UP==325)and(h8[32+O5]==h7[325])and(eY[O5]==$A))then
set h8[32+O5]=h9[32+O5]
call PV7(GetTriggerUnit(),$D0012,h8[32+O5])
endif
endfunction
function ELF takes integer EQF returns nothing
local trigger t=CreateTrigger()
set LP4="tkv"
call TriggerRegisterUnitInRange(t,h7[EQF],400.,Q54)
call Q97(GetHandleId(t),"Num",EQF)
call TriggerAddCondition(t,Condition(function EOF))
call TriggerAddAction(t,function E6F)
endfunction
function E1F takes nothing returns nothing
call EDF(0,-7100,-6985)
call EDF(100,6644,6239)
call EDF(1,-5088.,-6426.)
call EDF(101,4826.,4177.)
call EDF(2,-4290.,-4302.)
call EDF(3,-3288.,-6529.)
call EDF(4,-6238.,-3594.)
call EDF(102,3493.,3180.)
call EDF(103,3041.,5967.)
call EDF(104,6041.,2585.)
set h7[$A]=h7[0]
set h7[118]=h7[1]
call EEF($B,$A,$E,-4166.,-4124.)
call EEF($C,$A,$E,-2897.,-2633.)
call EEF($D,$A,$E,-1363.,-1425.)
call EEF($E,$A,18,-594.,-602.)
call EEF($F,$E,18,553.,-55.)
call EEF(16,$E,18,1858.,1109.)
call EEF(17,$E,18,3207.,2741.)
call X87(111,17,110,114)
call X87(112,16,110,114)
call X87(113,$F,110,114)
call X87(114,$E,110,118)
call X87(115,$D,114,118)
call X87(116,$C,114,118)
call X87(117,$B,114,118)
set h7[18]=h7[101]
set h7[110]=h7[100]
set h7[30]=h7[0]
set h7[$8C]=h7[1]
call EEF(31,30,35,-6267.,-3320.)
call EEF(32,30,35,-6377.,-1771.)
call EEF(33,30,35,-6066.,273.)
call EEF(34,30,35,-6241.,2786.)
call EEF(35,30,40,-6056.,5347.)
call EEF(36,35,40,-3254.,5752.)
call EEF(37,35,40,-819.,5859.)
call EEF(38,35,40,1086.,5572.)
call EEF(39,35,40,2675.,6207.)
call X87($83,39,$82,$87)
call X87($84,38,$82,$87)
call X87($85,37,$82,$87)
call X87($86,36,$82,$87)
call X87($87,35,$82,$8C)
call X87($88,34,$87,$8C)
call X87($89,33,$87,$8C)
call X87($8A,32,$87,$8C)
call X87($8B,31,$87,$8C)
set h7[40]=h7[101]
set h7[$82]=h7[100]
set h7[50]=h7[0]
set h7[$A0]=h7[1]
call EEF(51,50,55,-3196.,-6567.)
call EEF(52,50,55,-237.,-6939.)
call EEF(53,50,55,1811.,-6860.)
call EEF(54,50,55,3727.,-6784.)
call EEF(55,50,60,5532.,-6495.)
call EEF(56,55,60,5943.,-5216.)
call EEF(57,55,60,6186.,-3270.)
call EEF(58,55,60,6040.,-646.)
call EEF(59,55,60,6018.,2213.)
call X87($97,59,$96,$9B)
call X87($98,58,$96,$9B)
call X87($99,57,$96,$9B)
call X87($9A,56,$96,$9B)
call X87($9B,55,$96,$A0)
call X87($9C,54,$9B,$A0)
call X87($9D,53,$9B,$A0)
call X87($9E,52,$9B,$A0)
call X87($9F,51,$9B,$A0)
set h7[60]=h7[101]
set h7[$96]=h7[100]
set h7[$D3]=h7[$C]
set h7[$D4]=h7[$D]
set h7[$D5]=h7[16]
call EDF($DD,-6220.,3550.)
set h7[$DE]=h7[36]
set h7[$DF]=h7[37]
set h7[$E7]=h7[53]
set h7[$E8]=h7[54]
set h7[$E9]=h7[56]
call EDF($EA,6070.,-3550.)
set h7[$EB]=h7[58]
call EDF($FA,GetRectCenterX(MD),GetRectCenterY(MD))
call EDF($FB,GetRectCenterX(Br),GetRectCenterY(Br))
call EDF($FC,GetRectCenterX(cr),GetRectCenterY(cr))
call EDF($FD,GetRectCenterX(Cr),GetRectCenterY(Cr))
call EDF($FE,GetRectCenterX(fr),GetRectCenterY(fr))
call EDF($FF,GetRectCenterX(Fr),GetRectCenterY(Fr))
call EDF(256,GetRectCenterX(Hr),GetRectCenterY(Hr))
call EDF(257,GetRectCenterX(jr),GetRectCenterY(jr))
call EDF(258,GetRectCenterX(Jr),GetRectCenterY(Jr))
call EDF(259,GetRectCenterX(lr),GetRectCenterY(lr))
call EDF(260,GetRectCenterX(mr),GetRectCenterY(mr))
call EDF(261,GetRectCenterX(Ni),GetRectCenterY(Ni))
call EDF(262,GetRectCenterX(Bi),GetRectCenterY(Bi))
call EDF(311,-5232.,3757.)
call EDF(312,-3490.,4685.)
call EDF(313,-6209.,4324.)
call EDF(314,-5024.,5571.)
call EDF(315,-1717.,894.)
call EDF(321,3995.,-5720.)
call EDF(322,4976.,-5129.)
call EDF(325,2222.,-2405.)
call EDF(326,-2300.,1600.)
call EDF(327,3000.,-1820.)
call EDF(328,-4250.,-110.)
call EDF(329,-3950.,4100.)
call EDF(330,150.,2460.)
call EDF(331,2100.,-5600.)
call EDF(332,4350.,-4750.)
call EDF(333,4650.,-1050.)
call EDF(334,-3300.,-1450.)
call EDF(335,-1750.,-100.)
call EDF(336,-250.,700.)
call EDF(337,890.,2100.)
call EDF(338,-2100.,-4200.)
call EDF(339,-310.,-2900.)
call EDF(340,800.,-2200.)
call EDF(341,1900.,-1300.)
call EDF(342,3600.,-100.)
call EDF(351,-5210,5660)
call EDF(352,5260,-6470)
call EDF(353,-7080,4280)
call EDF(354,7210,-4230)
endfunction
function E0F takes nothing returns nothing
local trigger t
set LP4="E0F"
call EPF($B,17)
if(not PD4)then
call EPF(31,39)
call EPF(51,59)
endif
call ELF(311)
call ELF(312)
call ELF(313)
call ELF(314)
call ELF(315)
call ELF(321)
call ELF(322)
call ELF(325)
call EZF(326,342)
call E3F(353,354)
endfunction
function E5F takes integer o6,integer A_E,integer n6 returns integer
if(A_E<o6)then
return o6
elseif(A_E>n6)then
return n6
endif
return A_E
endfunction
function E2F takes unit it,integer o6 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
local integer E_F
set LP4="tpv"
if(IsUnitAlly(it,Y7[0]))then
if(((o6==-1)and((hj[256+UP]==18)or(hj[UP]==$A)))or(o6==0))then
set E_F=9+P54
call XE7(it,E5F($B,E_F,17))
elseif(((o6==-1)and((hj[256+UP]==40)or(hj[UP]==30)))or(o6==1))then
set E_F=29+P24
call XE7(it,E5F(31,E_F,39))
elseif(((o6==-1)and((hj[256+UP]==60)or(hj[UP]==50)))or(o6==2))then
set E_F=49+P_4
call XE7(it,E5F(51,E_F,59))
endif
else
set UP=hj[512+UP]
if(((o6==-1)and((hj[256+UP]==118)or(hj[UP]==110)))or(o6==0))then
set E_F=117-P54
call XE7(it,E5F(111,E_F,117))
elseif(((o6==-1)and((hj[256+UP]==$8C)or(hj[UP]==$82)))or(o6==1))then
set E_F=$8B-P24
call XE7(it,E5F($83,E_F,$8B))
elseif(((o6==-1)and((hj[256+UP]==$A0)or(hj[UP]==$96)))or(o6==2))then
set E_F=$9F-P_4
call XE7(it,E5F($97,E_F,$9F))
endif
endif
endfunction
function F4F takes unit it,unit F7F returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local real NC7=Bz+$A
set LP4="(aiHealOnFountain_tsv)"+LP4
if(i1!=1211117642)then
set h9[16+O5]=PL7(it)
set h9[O5]=PL7(it)
call NP7(it,O5)
set G0[32+O5]=true
set GZ[O5]=false
set G0[48+O5]=false
set G0[O5]=false
set GZ[$A0+O5]=false
set hq[864+O5]=GetRandomReal(-LN4,LN4)
call SaveBoolean(C7,GetHandleId(it),1145131595,false)
call RemoveSavedHandle(C7,GetHandleId(it),1145131595)
if Bz>Q94 then
call EnableTrigger(Q14[$80+O5])
endif
endif
call RemoveGuardPosition(it)
loop
exitwhen((GetUnitLifePercent(it)>95.)and(GetUnitManaPercent(it)>95.)and(Bz>NC7 or(Bz>G77[$A0+O5])))
if(((PT4)and(IsUnitAlly(it,Y7[0])))or((PU4)and(IsUnitAlly(it,Z7[0]))))then
exitwhen((GetUnitLifePercent(it)>75.)and(GetUnitManaPercent(it)>25.))
endif
if(not OA7(it))then
set eY[O5]=1
exitwhen true
endif
if(IsUnitInRange(it,F7F,600.))then
call SetUnitLifePercentBJ(it,RMinBJ(GetUnitLifePercent(it)+5.,100.))
call SetUnitManaPercentBJ(it,RMinBJ(GetUnitManaPercent(it)+5.,100.))
if(is(it))then
call IssueTargetOrderById(it,$D0003,F7F)
endif
elseif(not OA7(F7F))then
exitwhen true
endif
call TriggerSleepAction(1.)
endloop
endfunction
function F8F takes integer O5,unit F9F,unit FDF,unit FEF returns boolean
local integer i=0
local boolean PN7=false
set LP4="tTv"
set bj_lastReplacedUnit=null
if(O5==0)then
set bj_lastReplacedUnit=F9F
elseif(O5==1)then
set bj_lastReplacedUnit=FDF
elseif(O5==2)then
set bj_lastReplacedUnit=FEF
else
return false
endif
set i=R47(GetHandleId(bj_lastReplacedUnit),"AI|TowerDef_Require")
if(i>0)then
call Q97(GetHandleId(bj_lastReplacedUnit),"AI|TowerDef_Require",i-1)
return true
endif
return false
endfunction
function FFF takes unit XD7 returns boolean
call MoveLocation(Ha,GetUnitX(XD7),GetUnitY(XD7))
return((P77(1800.,Ha,Condition(function TJ7))-(P77(1400.,Ha,Condition(function TI7))*4))>5)
endfunction
function FGF takes nothing returns nothing
local integer i=1
local integer j=0
loop
exitwhen j>$A
if(LS4[112+j]!=0)then
set LS4[$90+j]=R2I(Bz)+30
endif
set LS4[112+j]=0
set LS4[$80+j]=0
set j=j+1
endloop
set i=1
loop
exitwhen i>$B
if(G7[i]!=null)then
call N07(i)
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set j=GetPlayerId(Y7[i])
if((eY[80+j]==3)and(eY[64+j]<3))or(eY[64+j]==5)then
set LS4[112+eY[64+j]]=LS4[112+eY[64+j]]+1
else
set LS4[112+eY[80+j]]=LS4[112+eY[80+j]]+1
endif
if eY[32+j]>0 then
set LS4[$80+eY[80+j]]=LS4[$80+eY[80+j]]+1
endif
set j=GetPlayerId(Z7[i])
if((eY[80+j]==4)and(eY[64+j]<3))or(eY[64+j]==5)then
set LS4[112+6+eY[64+j]]=LS4[112+6+eY[64+j]]+1
else
set LS4[112+6+eY[80+j]]=LS4[112+6+eY[80+j]]+1
endif
if eY[32+j]>0 then
set LS4[$80+6+eY[80+j]]=LS4[$80+6+eY[80+j]]+1
endif
set i=i+1
endloop
endfunction
function FKF takes unit it returns integer
local integer j=3
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="aiChooseLaneScourge_tzv"
if(G3>=0)then
set j=G3
elseif(GetHeroLevel(it)<6)then
set j=eY[64+O5]
elseif(GetHeroLevel(it)>=PB4)then
if(PU4 and LS4[64+O5]>=0)then
set j=M17(LS4[64+O5]==3,0,LS4[64+O5])
elseif(G1>=0)then
set j=G1
endif
endif
if(j==3)then
set bj_lastLoadedUnit=it
if(F8F(PL4,J64,J04,J_4))then
set LP4=LP4+" a"
set j=0
elseif(F8F(P04,JL4,J54,K44))then
set LP4=LP4+" c"
set j=2
elseif(F8F(P14,J34,J14,J24))then
set LP4=LP4+" b"
set j=1
elseif(IC(O5))then
if(LS4[112+6+0]==1)then
set LP4=LP4+" d"
set j=0
elseif(LS4[112+6+1]==1)then
set LP4=LP4+" 3"
if((LS4[112+6+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
endif
elseif(((LS4[112+6+0]==0)and(LS4[$80+0]>0))or((LS4[$80+0]-LS4[112+6+0])>1))then
set LP4=LP4+" f"
set j=0
elseif((LS4[$80+1]-LS4[112+6+1])>1)then
set LP4=LP4+" g"
set j=1
elseif((LS4[$80+2]-LS4[112+6+2])>1)then
set LP4=LP4+" h"
set j=2
elseif((LS4[112+6+1]==0)and(LS4[$80+1]>0))then
set LP4=LP4+" i"
if((LS4[112+6+2]>0)or(LS4[$80+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif((LS4[112+6+2]==0)and(LS4[$80+2]>0))then
set LP4=LP4+" j"
set j=2
elseif(LS4[112+6+0]==0)then
set LP4=LP4+" k"
set j=0
elseif(LS4[112+6+1]==0)then
set LP4=LP4+" l"
if((LS4[112+6+2]>0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif(LS4[112+6+2]==0)then
set LP4=LP4+" m"
set j=2
endif
elseif((GetHeroLevel(it)>$D)and(G3<0)and(G1>=0)and(j==G1)and((LS4[$80+j])-LS4[112+6+j]>=0))then
if((j!=0)and(PL4>=2)and(FFF(h7[17])))then
set LP4=LP4+" n"
set j=0
elseif((j!=1)and(P14>=2)and(FFF(h7[39])))then
set LP4=LP4+" o"
set j=1
elseif((j!=2)and(P04>=2)and(FFF(h7[59])))then
set LP4=LP4+" p"
set j=2
endif
endif
if(j>=3)then
set LP4=LP4+" q"
set j=eY[64+O5]
if(j>=3)then
set j=GetRandomInt(0,2)
endif
endif
return j
endfunction
function FMF takes unit MQ7 returns nothing
local unit OC7=null
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer i
local boolean J4=false
local integer NM7=M17(IsUnitAlly(MQ7,Y7[0]),0,24)
set LP4="aiDef_Actions_u8v"
set hq[528+O5]=Bz+5.
if((is(MQ7))and(not O37(MQ7))and(not G0[32+O5]))and(h4[O5]==null)then
call GroupClear(H8)
set bj_lastLoadedUnit=MQ7
call GroupEnumUnitsInRange(H8,GetUnitX(MQ7),GetUnitY(MQ7),700.,LV4)
set i=(RT7(H8))
if G0[48+O5]and Bz>hq[768+O5]then
set J4=(i>2)
if not J4 then
set G0[48+O5]=false
endif
if not J4 then
endif
endif
if(not J4)and OV7(MQ7)then
set bj_lastLoadedUnit=MC7(IsUnitAlly(MQ7,Y7[0]),IY4,JZ4)
set L84=N37(MQ7,bj_lastLoadedUnit)
if G0[$F0+O5]then
if(L84>3500.)then
call PV7(MQ7,$D0012,h9[O5])
set J4=true
else
set G0[$F0+O5]=false
endif
endif
if(not J4)then
if(L84>6000.)then
call PV7(MQ7,$D0012,h9[O5])
elseif L84<700. and i>0 then
set J4=PV7(MQ7,$D000F,h8[64+O5])
else
if(not J4)and G0[$E0+O5]then
set OC7=LT4[48+O5]
if OC7!=null and GetWidgetLife(OC7)>.405 then
set J4=IssueTargetOrderById(MQ7,$D000F,OC7)
endif
if not J4 then
set G0[$E0+O5]=false
endif
endif
if not J4 then
set OC7=LT4[NM7+LS4[64+O5]]
if OC7!=null and GetWidgetLife(OC7)>.405 then
set J4=IssueTargetOrderById(MQ7,$D000F,OC7)
endif
endif
if not J4 then
set OC7=LT4[NM7+16+LS4[64+O5]]
if OC7==null or GetWidgetLife(OC7)<.405 then
set OC7=FirstOfGroup(H8)
if OC7!=null then
set LT4[NM7+16+LS4[64+O5]]=OC7
else
set OC7=LT4[NM7+$C+LS4[64+O5]]
if OC7==null or GetWidgetLife(OC7)<.405 then
set OC7=h8[64+O5]
endif
endif
endif
if(N37(MQ7,OC7)>700.)then
set J4=PV7(MQ7,$D0012,OC7)
elseif GetUnitCurrentOrder(MQ7)!=$D000F then
set J4=PV7(MQ7,$D000F,OC7)
endif
endif
endif
endif
endif
endif
set MQ7=null
set OC7=null
endfunction
function FNF takes unit FOF,integer O5,boolean FPF returns nothing
local integer j
local integer NM7
set LP4="(tZv)"+LP4
set G0[32+O5]=false
set G0[352+O5]=false
if(FPF)then
set NM7=M17(IsUnitAlly(FOF,Y7[0]),0,24)
if LS4[64+O5]>=0 and LS4[NM7+LS4[64+O5]]>2 then
set eY[O5]=M17((not GZ[480+O5]),3,4)
else
set j=NJ7(IsUnitAlly(FOF,Y7[0]))
if j!=-1 then
set LS4[64+O5]=j
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
call NP7(FOF,O5)
set eY[O5]=M17((not GZ[480+O5]),3,4)
endif
endif
endif
if(eY[O5]==3 or eY[O5]==4)then
call FMF(FOF)
else
if(Bz>Q94)and(is(FOF))then
call PV7(FOF,$D000F,h8[O5])
endif
set eY[O5]=1
endif
endfunction
function FQF takes integer FIF,integer FRF returns integer
if((PD4)or((PG4)and(PE4)))then
return 0
elseif((PF4)and(PE4))then
return 1
elseif((PF4)and(PG4))then
return 2
elseif((FRF>$F)or((FIF==0)and(not PF4))or((FIF==1)and(not PG4))or((FIF==2)and(not PE4)))then
return FIF
elseif((not PF4)and(((PG4)and(PE4))or(GetRandomInt(1,2)==1)))then
return 0
elseif((not PG4)and((PE4)or(GetRandomInt(1,2)==1)))then
return 1
elseif(not PE4)then
return 2
endif
return GetRandomInt(0,2)
endfunction
function FSF takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer j=0
set LP4="FTF"
if(GetUnitTypeId(it)!=1211117642)then
if(eY[O5]==2)then
set it=null
return
else
set eY[O5]=2
set h8[O5]=h7[111]
endif
endif
call F4F(it,JZ4)
if(GetUnitTypeId(it)!=1211117642)then
if Bz>Q94 then
set j=eY[64+O5]
set eY[64+O5]=5
call FGF()
endif
set eY[64+O5]=j
set j=FQF(FKF(it),GetHeroLevel(it))
if(j==0)then
set h8[O5]=h7[111]
set h8[16+O5]=h7[114]
elseif(j==1)then
set h8[O5]=h7[$83]
set h8[16+O5]=h7[$87]
else
set h8[O5]=h7[$97]
set h8[16+O5]=h7[$9B]
endif
set eY[64+O5]=j
set hq[576+O5]=Bz+10.
call FNF(it,O5,PU4)
endif
set it=null
endfunction
function FTF takes nothing returns nothing
call FSF(GetTriggerUnit())
endfunction
function FUF takes unit it returns integer
local integer j=3
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="aiChooseLaneSent_t3v"
if(G4>=0)then
set j=G4
elseif(GetHeroLevel(it)<6)then
set j=eY[64+O5]
elseif(GetHeroLevel(it)>=PA4)then
if(PT4 and LS4[64+O5]>=0)then
set j=M17(LS4[64+O5]==3,0,LS4[64+O5])
elseif(G1>=0)then
set j=G2
endif
endif
if(j==3)then
set bj_lastLoadedUnit=it
if(F8F(PC4,JG4,JJ4,JN4))then
set j=0
elseif(F8F(P34,JF4,JI4,JM4))then
set j=1
elseif(F8F(P64,JH4,JK4,JO4))then
set j=2
elseif(IC(O5))then
if(LS4[112+0]==1)then
set j=0
elseif(LS4[112+1]==1)then
if((LS4[112+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
endif
elseif(((LS4[112+0]==0)and(LS4[$80+6+0]>0))or((LS4[$80+6+0]-LS4[112+0])>1))then
set j=0
elseif((LS4[$80+6+1]-LS4[112+1])>1)then
set j=1
elseif((LS4[$80+6+2]-LS4[112+2])>1)then
set j=2
elseif((LS4[112+1]==0)and(LS4[$80+6+1]>0))then
if((LS4[112+2]>0)or(LS4[$80+6+2]==0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif((LS4[112+2]==0)and(LS4[$80+6+2]>0))then
set j=2
elseif(LS4[112+0]==0)then
set j=0
elseif(LS4[112+1]==0)then
if((LS4[112+2]>0)or(GetRandomInt(1,2)==1))then
set j=1
else
set j=2
endif
elseif(LS4[112+2]==0)then
set j=2
endif
elseif((GetHeroLevel(it)>$D)and(G4<0)and(G2>=0)and(j==G2)and((LS4[$80+6+j]-LS4[112+j])>=0))then
if((j!=0)and(PC4>=2)and(FFF(h7[$B])))then
set j=0
elseif((j!=1)and(P34>=2)and(FFF(h7[31])))then
set j=1
elseif((j!=2)and(P64>=2)and(FFF(h7[51])))then
set j=2
endif
endif
if(j>=3)then
set j=eY[64+O5]
if(j>=3)then
set j=GetRandomInt(0,2)
endif
endif
return j
endfunction
function FVF takes unit it returns nothing
local integer j=0
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="FWF"
if(GetUnitTypeId(it)!=1211117642)then
if(eY[O5]==2)then
set it=null
return
else
set eY[O5]=2
set h8[O5]=h7[$B]
endif
endif
call F4F(it,IY4)
if(GetUnitTypeId(it)!=1211117642)then
if Bz>Q94 then
set j=eY[64+O5]
set eY[64+O5]=5
call FGF()
endif
set eY[64+O5]=j
set j=FQF(FUF(it),GetHeroLevel(it))
if(j==0)then
set h8[O5]=h7[$B]
set h8[16+O5]=h7[$E]
elseif(j==1)then
set h8[O5]=h7[31]
set h8[16+O5]=h7[35]
else
set h8[O5]=h7[51]
set h8[16+O5]=h7[55]
endif
set eY[64+O5]=j
set hq[576+O5]=Bz+10.
call FNF(it,O5,PT4)
endif
set it=null
endfunction
function FWF takes nothing returns nothing
call FVF(GetTriggerUnit())
endfunction
function FXF takes nothing returns nothing
local unit it=QA7(GetHandleId(GetTriggeringTrigger()),"u")
call DisableTrigger(GetTriggeringTrigger())
if IsUnitAlly(it,Y7[0])then
if(N37(it,IY4)<700)then
call FVF(it)
endif
else
if(N37(it,JZ4)<700)then
call FSF(it)
endif
endif
set it=null
endfunction
function FAF takes integer O5,boolean NK7 returns nothing
local integer i=1
local integer FBF=M17(NK7,0,6)
local integer NM7=M17(NK7,0,24)
if(eY[O5]==3 and WQ7(Player(O5))and GetWidgetLife(G7[O5])>.405)then
set G0[48+O5]=false
if GetUnitLifePercent(G7[O5])<70. or GetUnitManaPercent(G7[O5])<50. then
set eY[O5]=1
set G0[352+O5]=true
call SJ7(G7[O5],true)
call QG7(Q_4,"OB|U",G7[O5])
call ExecuteFunc("FCF")
else
if(N67(GetUnitX(G7[O5]),GetUnitY(G7[O5]),LU4[NM7],LU4[NM7+1])<12000.)then
if(h9[16+O5]==h7[35])then
set h8[16+O5]=h7[35]
set h8[O5]=h7[35]
elseif(h9[16+O5]==h7[55])then
set h8[16+O5]=h7[55]
set h8[O5]=h7[55]
elseif(h9[16+O5]==h7[$E])then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$E]
elseif(N67(GetUnitX(G7[O5]),GetUnitY(G7[O5]),LU4[NM7],LU4[NM7+1])>5000.)then
if(eY[80+O5]==0)then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$E]
elseif(eY[80+O5]==1)then
set h8[16+O5]=h7[35]
set h8[O5]=h7[35]
elseif(eY[80+O5]==2)then
set h8[16+O5]=h7[55]
set h8[O5]=h7[55]
endif
endif
set h9[16+O5]=PL7(G7[O5])
set h9[O5]=PL7(G7[O5])
endif
if(is(G7[O5]))then
call PV7(G7[O5],$D000F,h8[O5])
endif
set eY[O5]=1
endif
endif
endfunction
function F3F takes boolean NK7 returns boolean
local group g=CreateGroup()
local unit MQ7=null
local integer O5=0
local integer FBF=M17(NK7,0,6)
local integer NM7=M17(NK7,0,24)
local integer i
local integer j
local boolean bIsDef=false
set LP4="aiDefTimer"+M27(NK7,"Sent","Scourge")
set i=0
loop
exitwhen i>18
set LS4[NM7+i]=0
set i=i+1
endloop
set LS4[NM7+19]=-1
set LS4[NM7+20]=-1
set LS4[NM7+21]=-1
set LS4[NM7+22]=-1
set LS4[NM7+23]=-1
call GroupEnumUnitsInRange(g,LU4[NM7],LU4[NM7+1],6000.,Q54)
loop
set MQ7=FirstOfGroup(g)
exitwhen MQ7==null
call GroupRemoveUnit(g,MQ7)
set O5=GetPlayerId(GetOwningPlayer(MQ7))
set i=GetUnitTypeId(MQ7)
if((GetUnitAbilityLevel(MQ7,1093678162)!=0 and((i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398))==false)or GetUnitAbilityLevel(MQ7,1097625443)!=0 or GetWidgetLife(MQ7)<50.)then
elseif(IsUnitAlly(MQ7,Y7[0])==NK7)or O5==$C or O5>$E then
elseif not(IsUnitType(MQ7,UNIT_TYPE_MELEE_ATTACKER)or IsUnitType(MQ7,UNIT_TYPE_RANGED_ATTACKER))then
else
set j=-1
if(NK7 and(PV4==false or P64>2 or PC4>2 or P34>2))or(NK7==false and(PW4==false or P04>2 or PL4>2 or P14>2))then
if N67(GetUnitX(MQ7),GetUnitY(MQ7),LU4[NM7+2],LU4[NM7+3])<=1400. then
set j=3
endif
endif
if j==-1 then
set i=R2I(Atan2(GetUnitY(MQ7)-LU4[NM7+1],GetUnitX(MQ7)-LU4[NM7])*bj_RADTODEG)
if i>360 then
set i=i-360
elseif i<0 then
set i=i+360
endif
if NK7 then
if i<25 and P64>=2 then
set j=2
elseif i>65 and P34>=2 then
set j=1
elseif PC4>=2 then
set j=0
endif
else
if i>$F5 and P04>=2 then
set j=2
elseif i<$CD and P14>=2 then
set j=1
elseif PL4>=2 then
set j=0
endif
endif
endif
if j!=-1 and((j!=0 or(not PF4))and(j!=1 or(not PG4))and(j!=2 or(not PE4)))then
set i=GetUnitTypeId(MQ7)
if IsUnitType(MQ7,UNIT_TYPE_HERO)and i!=1211117642 then
set LS4[NM7+4+j]=LS4[NM7+4+j]+1
set LS4[NM7+19+O5-FBF-1]=j
set LS4[NM7+j]=LS4[NM7+j]+LZ4
if(LT4[NM7+$C+j]==null or GetWidgetLife(LT4[NM7+$C+j])<.405)or(GetWidgetLife(MQ7)<GetWidgetLife(LT4[NM7+$C+j]))then
set LT4[NM7+$C+j]=MQ7
endif
elseif O5!=GetPlayerId(Y7[0])and O5!=GetPlayerId(Z7[0])then
set LS4[NM7+j]=LS4[NM7+j]+3
else
if(i==1969711215 or i==1970169187)or(i==1966092337 or i==1966092338)or(i==1702061422 or i==1701081721)or(i==1697656918 or i==1697656919)then
set LS4[NM7+j]=LS4[NM7+j]+1
if LT4[NM7+16+j]==null or GetWidgetLife(LT4[NM7+16+j])<.405 then
set LT4[NM7+16+j]=MQ7
endif
elseif(i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398)then
set LS4[NM7+j]=LS4[NM7+j]+3
if LT4[NM7+4+j]==null or GetWidgetLife(LT4[NM7+4+j])<.405 then
set LT4[NM7+4+j]=MQ7
endif
else
set LS4[NM7+j]=LS4[NM7+j]+5
if LT4[NM7+8+j]==null or GetWidgetLife(LT4[NM7+8+j])<.405 then
set LT4[NM7+8+j]=MQ7
endif
endif
endif
endif
endif
endloop
call DestroyGroup(g)
set g=null
if((NK7 and PT4)or((not NK7)and PU4))then
if LS4[NM7+0]<=2 and LS4[NM7+1]<=2 and LS4[NM7+2]<=2 and LS4[NM7+3]<=2 then
return false
endif
endif
if NK7 then
if P64>2 and LS4[NM7+2]>2 then
set LS4[NM7+2]=LS4[NM7+2]+4
endif
if P34>2 and LS4[NM7+1]>2 then
set LS4[NM7+1]=LS4[NM7+1]+4
endif
if PC4>2 and LS4[NM7+0]>2 then
set LS4[NM7+0]=LS4[NM7+0]+4
endif
if GetWidgetLife(JP4)<.405 and LS4[NM7+3]>2 then
set LS4[NM7+3]=LS4[NM7+3]+4
endif
if GetWidgetLife(JQ4)<.405 and LS4[NM7+3]>2 then
set LS4[NM7+3]=LS4[NM7+3]+4
endif
else
if P04>2 and LS4[NM7+2]>2 then
set LS4[NM7+2]=LS4[NM7+2]+4
endif
if P14>2 and LS4[NM7+1]>2 then
set LS4[NM7+1]=LS4[NM7+1]+4
endif
if PL4>2 and LS4[NM7+0]>2 then
set LS4[NM7+0]=LS4[NM7+0]+4
endif
if GetWidgetLife(K74)<.405 and LS4[NM7+3]>2 then
set LS4[NM7+3]=LS4[NM7+3]+4
endif
if GetWidgetLife(K84)<.405 and LS4[NM7+3]>2 then
set LS4[NM7+3]=LS4[NM7+3]+4
endif
endif
if LS4[NM7+0]<=8 and LS4[NM7+1]<=8 and LS4[NM7+2]<=8 and LS4[NM7+3]<=8 then
return false
endif
set j=0
set i=0
loop
exitwhen j>4
set LS4[NM7+8+j]=LS4[NM7+4+j]
if GetWidgetLife(LT4[NM7+$C+j])>.405 then
elseif GetWidgetLife(LT4[NM7+8+j])>.405 then
set LT4[NM7+j]=LT4[NM7+8+j]
elseif GetWidgetLife(LT4[NM7+4+j])>.405 then
set LT4[NM7+j]=LT4[NM7+4+j]
else
if GetWidgetLife(LT4[NM7+$C+j])>.405 then
set LT4[NM7+j]=LT4[NM7+$C+j]
else
set LT4[NM7+j]=null
endif
endif
set j=j+1
endloop
if NK7 then
if LS4[NM7+1]>2 and LS4[NM7+9]==0 then
set LS4[NM7+9]=1
endif
if LS4[NM7+0]>2 and LS4[NM7+8]==0 then
set LS4[NM7+8]=1
endif
if LS4[NM7+2]>2 and LS4[NM7+$A]==0 then
set LS4[NM7+$A]=1
endif
set hD=IMaxBJ(1,LS4[NM7+4]+LS4[NM7+5]+LS4[NM7+6]+LS4[NM7+7])
else
if LS4[NM7+1]>2 and LS4[NM7+9]==0 then
set LS4[NM7+9]=1
endif
if LS4[NM7+0]>2 and LS4[NM7+8]==0 then
set LS4[NM7+8]=1
endif
if LS4[NM7+2]>2 and LS4[NM7+$A]==0 then
set LS4[NM7+$A]=1
endif
set hE=IMaxBJ(1,LS4[NM7+4]+LS4[NM7+5]+LS4[NM7+6]+LS4[NM7+7])
endif
if LS4[NM7+3]>2 and LS4[NM7+$B]==0 then
set LS4[NM7+$B]=1
endif
set i=1
loop
exitwhen i>5
set O5=LS4[80+FBF+i]
if(O5!=-1)and(eY[O5]==2 or eY[O5]==3 or eY[O5]==4)==false and(O37(G7[O5])or GetWidgetLife(G7[O5])<.405)==false then
set LS4[48+FBF+i]=LS4[80+FBF+i]
else
set LS4[48+FBF+i]=-1
endif
set LS4[96+O5]=0
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set O5=LS4[80+FBF+i]
if(O5!=-1)and G7[O5]!=null then
if(eY[O5]==3 or eY[O5]==4)and LS4[64+O5]!=-1 and(O37(G7[O5])or GetWidgetLife(G7[O5])<.405)==false then
if LS4[NM7+8+LS4[64+O5]]>0 then
set LS4[48+FBF+i]=-1
set LS4[NM7+8+LS4[64+O5]]=LS4[NM7+8+LS4[64+O5]]-1
set LS4[NM7+$C+LS4[64+O5]]=LS4[NM7+$C+LS4[64+O5]]+1
else
set LS4[48+FBF+i]=O5
endif
endif
endif
set i=i+1
endloop
if LS4[NM7+$B]>0 and LS4[NM7+$F]==0 then
set i=1
loop
exitwhen i>$A
if i>5 then
set j=j-5
else
set j=i
endif
set O5=LS4[80+FBF+j]
if(O5!=-1)and(LS4[48+FBF+j]==-1)then
if(eY[O5]==3 or eY[O5]==4)and((LS4[48+FBF+j]!=-1)or(LS4[64+O5]==-1)or(LS4[NM7+8+LS4[64+O5]]<=0)or((LS4[NM7+$C+LS4[64+O5]]>1)or(i>5)))then
set LS4[64+O5]=3
set LS4[NM7+$B]=LS4[NM7+$B]-1
set LS4[NM7+$F]=LS4[NM7+$F]+1
set LS4[96+O5]=1
endif
endif
set LS4[96+O5]=0
set i=i+1
endloop
endif
set i=1
loop
exitwhen i>5
set O5=LS4[48+FBF+i]
if O5!=-1 and(eY[O5]==3 or eY[O5]==4)then
set j=NJ7(NK7)
if j==-1 then
set bj_forLoopAIndex=0
set bj_forLoopBIndex=2
loop
exitwhen bj_forLoopAIndex>3
if LS4[NM7+bj_forLoopAIndex]>bj_forLoopBIndex and LS4[NM7+8+j]>-1 then
set bj_forLoopBIndex=LS4[NM7+bj_forLoopAIndex]
set j=bj_forLoopAIndex
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
if j!=-1 then
if j!=LS4[64+O5]then
set G0[$F0+O5]=true
set LS4[96+O5]=1
set LS4[64+O5]=j
endif
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
set LS4[48+FBF+i]=-1
else
call FAF(O5,NK7)
endif
endif
set i=i+1
endloop
if LS4[NM7+8]<=0 and LS4[NM7+9]<=0 and LS4[NM7+$A]<=0 and LS4[NM7+$B]<=0 then
return true
endif
set i=1
loop
exitwhen i>5
set O5=LS4[48+FBF+i]
if(O5!=-1)then
set j=N17(G7[O5])
if LS4[NM7+8+j]+LS4[NM7+$C+j]>0 then
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
set LS4[64+O5]=j
set LS4[96+O5]=1
set LS4[48+FBF+i]=-1
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5 or(LS4[NM7+8]<=0 and LS4[NM7+9]<=0 and LS4[NM7+$A]<=0 and LS4[NM7+$B]<=0)
set O5=LS4[48+FBF+i]
if(O5!=-1)then
if Bz>hq[528+O5]then
set L84=N67(GetUnitX(G7[O5]),GetUnitY(G7[O5]),LU4[NM7],LU4[NM7+1])
if L84<=$2EE0 then
set j=NJ7(NK7)
if j!=-1 then
if L84>5000 then
set G0[$F0+O5]=true
endif
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
set LS4[64+O5]=j
set LS4[96+O5]=1
set LS4[48+FBF+i]=-1
endif
endif
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5 or(LS4[NM7+8]<=0 and LS4[NM7+9]<=0 and LS4[NM7+$A]<=0 and LS4[NM7+$B]<=0)
set O5=LS4[48+FBF+i]
if(O5!=-1)then
if true and N67(GetUnitX(G7[O5]),GetUnitY(G7[O5]),LU4[M17(NK7,24,0)],LU4[M17(NK7,25,1)])>6000 then
set j=NJ7(NK7)
if j!=-1 then
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
set LS4[64+O5]=j
set LS4[96+O5]=1
set LS4[48+FBF+i]=-1
endif
endif
endif
set i=i+1
endloop
set bj_forLoopAIndex=LS4[NM7+4]+LS4[NM7+5]+LS4[NM7+6]+LS4[NM7+7]
if(bj_forLoopAIndex>=M17(NK7,HB4,HA4)-1 and bj_forLoopAIndex>=3)then
set i=1
loop
exitwhen i>5
set O5=LS4[80+FBF+i]
if(O5!=-1)and G7[O5]!=null then
if GetWidgetLife(G7[O5])<.405 then
if((TimerGetRemaining(T[O5])>20.)and(TimerGetElapsed(T[O5])>4.))then
set j=0
loop
exitwhen NK4[j]==GetEnumUnit()or j>NO4
set j=j+1
endloop
if NK4[j]!=null and GetUnitAbilityLevel(KT4[O5],1093808213)==0 then
if IssueImmediateOrderById(KT4[O5],V9[O5])then
set j=NJ7(NK7)
if j!=-1 then
set LS4[NM7+8+j]=LS4[NM7+8+j]-1
set LS4[NM7+$C+j]=LS4[NM7+$C+j]+1
set LS4[64+O5]=j
set LS4[96+O5]=1
endif
endif
endif
endif
endif
endif
set i=i+1
endloop
endif
if NK7 then
set LG4=W7
else
set LG4=X7
endif
set i=1
loop
exitwhen i>5
if NK7 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i])
endif
if WQ7(Player(O5))and LS4[96+O5]!=0 then
call NP7(G7[O5],O5)
call J3(G7[O5],OV7(G7[O5]))
call SH7(G7[O5],LG4)
if eY[O5]==3 or eY[O5]==4 then
call S97(G7[O5],LG4,GetObjectName(1496330549)+NG7(LS4[64+O5],true))
else
call S97(G7[O5],LG4,GetObjectName(1496330548)+NG7(LS4[64+O5],true))
endif
set eY[O5]=3
set LS4[96+O5]=0
endif
set i=i+1
endloop
set MQ7=null
set LG4=null
return true
endfunction
function F6F takes boolean NK7 returns boolean
local unit MQ7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer FBF=M17(NK7,0,6)
local integer NM7=M17(NK7,0,24)
local integer i
local integer j
set LP4="aiDefTurnOn "+M27(NK7,"Sent","Scourge")
if((NK7 and P34<2 and PC4<2 and P64<2)or(NK7==false and P14<2 and PL4<2 and P04<2))then
return false
elseif O5!=GetPlayerId(Y7[0])and O5!=GetPlayerId(Z7[0])then
return false
elseif(IsUnitAlly(MQ7,Y7[0])==NK7)or SC7(MQ7)==false then
return false
endif
set i=R2I(Atan2(GetUnitY(MQ7)-LU4[NM7+1],GetUnitX(MQ7)-LU4[NM7])*bj_RADTODEG)
set j=-1
if i>360 then
set i=i-360
elseif i<0 then
set i=i+360
endif
if NK7 then
if i<25 and P64>=2 then
set j=2
elseif i>65 and P34>=2 then
set j=1
elseif PC4>=2 then
set j=0
endif
else
if i>$F5 and P04>=2 then
set j=2
elseif i<$CD and P14>=2 then
set j=1
elseif PL4>=2 then
set j=0
endif
endif
if j==-1 then
return false
endif
return F3F(NK7)
endfunction
function FLF takes boolean NK7 returns nothing
local integer i=1
local integer O5
loop
exitwhen i>5
if NK7 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i])
endif
call FAF(O5,NK7)
set i=i+1
endloop
endfunction
function F1F takes nothing returns boolean
if F6F(false)then
call DisableTrigger(Q34)
call EnableTrigger(QL4)
set PU4=true
endif
return false
endfunction
function F0F takes nothing returns boolean
if not F3F(false)then
call EnableTrigger(Q34)
call DisableTrigger(QL4)
set PU4=false
call FLF(false)
endif
return false
endfunction
function F5F takes nothing returns boolean
if F6F(true)then
call DisableTrigger(QC4)
call EnableTrigger(Q64)
set PT4=true
endif
return false
endfunction
function F2F takes nothing returns boolean
if not F3F(true)then
call EnableTrigger(QC4)
call DisableTrigger(Q64)
set PT4=false
call FLF(true)
endif
return false
endfunction
function TRv takes nothing returns boolean
if((IsUnitEnemy(GetFilterUnit(),Y7[0]))and(S37(GetFilterUnit()))and((IsUnitVisible(GetFilterUnit(),Y7[0]))or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)and(GetUnitLifePercent(GetFilterUnit())>30.))then
set hD=hD+1
endif
return true
endif
return false
endfunction
function F_F takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(GetWidgetLife(GetFilterUnit())>.405)and(SC7(GetFilterUnit())))!=null
endfunction
function G4F takes real K1,unit u returns unit
local unit X77=null
local unit G7F=null
local boolexpr Ig=Condition(function F_F)
local real IW=N37(u,h9[16+GetPlayerId(GetOwningPlayer(u))])
local real G8F
set LP4="TNv"
call GroupClear(iE)
call GroupEnumUnitsInRange(iE,GetUnitX(u),GetUnitY(u),K1,Ig)
loop
set X77=FirstOfGroup(iE)
exitwhen(X77==null)
if((IsUnitVisible(X77,GetOwningPlayer(u)))and(X77!=u))then
set G8F=N37(X77,h9[16+GetPlayerId(GetOwningPlayer(u))])
if(G8F<IW)then
set G7F=X77
set IW=G8F
endif
endif
call GroupRemoveUnit(iE,X77)
endloop
call DestroyBoolExpr(Ig)
set Ig=null
set X77=null
set hr=G7F
set G7F=null
return hr
endfunction
function G9F takes nothing returns boolean
return((IsHeroUnitId(GetUnitTypeId(GetFilterUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetFilterUnit()!=GetEnumUnit()))
endfunction
function GDF takes unit it returns integer
local integer i1=GetUnitTypeId(it)
set LP4="TCv"
if((i1==1164207469)or(i1==1332766568)or(i1==1328558160)or(i1==1211117616)or(i1==1212363833)or(i1==1315988077)or(i1==1332179560)or(i1==1429221441)or(PD7(it,SU[P2]))or(PD7(it,SU[X0])))then
return 3
elseif(kq(i1))then
return 2
else
return 1
endif
endfunction
function GEF takes real K1,unit u returns unit
local unit X77=null
local unit G7F=null
local boolexpr Ig=Condition(function G9F)
local real GFF=0
local real GGF=0
set LP4="Tdv"
call GroupClear(iE)
call GroupEnumUnitsInRange(iE,GetUnitX(u),GetUnitY(u),K1,Ig)
loop
set X77=FirstOfGroup(iE)
exitwhen(X77==null)
set GFF=GetUnitState(X77,UNIT_STATE_LIFE)
if(GetUnitLifePercent(X77)<60.)then
elseif((G7F==null)or(GDF(X77)>GDF(G7F)))then
set G7F=X77
set GGF=GFF
elseif((GDF(X77)==GDF(G7F))and(GGF<GFF))then
set G7F=X77
set GGF=GFF
endif
call GroupRemoveUnit(iE,X77)
endloop
call DestroyBoolExpr(Ig)
set Ig=null
set X77=null
set hr=G7F
set G7F=null
return hr
endfunction
function GHF takes unit it,boolean J2 returns boolean
local integer kt=GetUnitAbilityLevel(it,1093684302)
local real kl=GetUnitFacing(it)*bj_DEGTORAD
local real GIF=GetUnitX(it)+(350.+I2R(50*kt))*Cos(kl)
local real GJF=GetUnitY(it)+(350.+I2R(50*kt))*Sin(kl)
set LP4="TFv"
if((kJ(GIF,GJF))and((J2)or(N67(GIF,GJF,GetUnitX(h9[16+GetPlayerId(GetOwningPlayer(it))]),GetUnitY(h9[16+GetPlayerId(GetOwningPlayer(it))]))<N37(it,h9[16+GetPlayerId(GetOwningPlayer(it))]))))then
set GZ[GetPlayerId(GetOwningPlayer(it))]=true
return J8(GetPlayerId(GetOwningPlayer(it)),PC7(it,$D00A1,1093684302))
endif
return false
endfunction
function GKF takes unit it,boolean J2 returns boolean
local integer kt=GetUnitAbilityLevel(it,1093749303)
local real kl=GetUnitFacing(it)*bj_DEGTORAD
local real GIF=GetUnitX(it)+(300.+I2R(100*kt))*Cos(kl)
local real GJF=GetUnitY(it)+(300.+I2R(100*kt))*Sin(kl)
set LP4="TFv"
if((kJ(GIF,GJF))and((J2)or(N67(GIF,GJF,GetUnitX(h9[16+GetPlayerId(GetOwningPlayer(it))]),GetUnitY(h9[16+GetPlayerId(GetOwningPlayer(it))]))<N37(it,h9[16+GetPlayerId(GetOwningPlayer(it))]))))then
set GZ[GetPlayerId(GetOwningPlayer(it))]=true
return J8(GetPlayerId(GetOwningPlayer(it)),IssueImmediateOrderById(it,$D0278))
endif
return false
endfunction
function GMF takes unit it returns boolean
local integer i1=GetUnitTypeId(it)
local boolean J4=false
local location b5=null
local unit m5=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="AIQuickmoveUnit"
if(N37(it,h9[16+O5])<600)or(GetUnitLifePercent(it)>80 and G0[$90+O5])then
return false
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
endif
if(i1==1162032181)then
set b5=kk(it,I2R(400+($C8*GetUnitAbilityLevel(it,1093684299))),h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D00FA,b5))
elseif((i1==1430466609)or(i1==1164207469))then
set b5=kk(it,800.,h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D022D,b5))
elseif((i1==1165451634)or(i1==1212365106))then
if(i1==1165451634)then
set L84=600+GetUnitAbilityLevel(it,1093685324)*100
else
set L84=700.
endif
set m5=G4F(L84,it)
if((m5!=null)and(it!=m5))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IsUnitInRange(m5,it,400.))and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1429221451)then
set b5=kk(it,I2R(280+(100*GetUnitAbilityLevel(it,1093678671))),h9[16+O5])
set J4=(b5!=null)and(IssuePointOrderByIdLoc(it,$D00FA,b5))
elseif(i1==1328558160)then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682766,true)
set GZ[O5]=true
if(GetUnitLifePercent(it)<48.)then
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D00FA,b5))
endif
endif
elseif(i1==1430466865)then
set b5=kk(it,800.,h9[16+O5])
if(b5!=null)and(Bz>TB4[32+O5])then
set J4=PX7(it,$D00FA,1093751364,b5)
endif
elseif(i1==1311781206)then
set J4=GHF(it,false)
elseif(i1==1160786502)then
set b5=kk(it,550.,h9[16+O5])
if(b5!=null)then
if(GetUnitLifePercent(it)<35.)then
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D0278,b5))
endif
endif
if((not J4)and(GetUnitLifePercent(it)<35.))then
set J4=IssueImmediateOrderById(it,$D02B6)
endif
elseif(i1==1211117651)then
if(GetUnitManaPercent(it)>15.)then
set b5=kk(it,1200.,h9[16+O5])
if(b5!=null)then
set J4=PX7(it,$D00FA,1093743695,b5)
endif
if not J4 then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
set J4=PX7(it,$D00FA,1093743695,b5)
endif
endif
if J4 then
set h9[O5]=h9[16+O5]
endif
endif
elseif(i1==1311788336)then
if(GetUnitState(it,UNIT_STATE_MANA)>100.)and(LoadInteger(C7,GetHandleId(it),(747))>0)and(not RG7(it,"AI|EmberEscape"))then
set b5=kk(it,1500.,h9[16+O5])
if(b5!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,b5)
endif
if not J4 then
set b5=kk(it,600.,h9[16+O5])
if(b5!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,b5)
endif
endif
if J4 then
set h9[O5]=h9[16+O5]
call RI7(it,"AI|EmberEscape")
endif
endif
elseif(i1==1160786738)then
if GetUnitAbilityLevel(it,1093813555)!=0 then
set b5=kk(it,600+$C8*GetUnitAbilityLevel(it,1093813555),h9[16+O5])
if(b5!=null)and(W87(b5,300))then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V14),GetDestructableY(V14))
endif
if(not J4)then
set b5=kk(it,800.,h9[16+O5])
if(b5!=null)and(W87(b5,300))then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V14),GetDestructableY(V14))
endif
endif
endif
elseif(i1==1211119409)then
set J4=GKF(it,false)
elseif(i1==1328558406)then
set m5=G4F(1800.,it)
if((m5!=null)and(it!=m5))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IsUnitInRange(m5,it,1000.))and(PW7(it,$D0097,1093751873,m5))
endif
endif
if(i1==1160786520)and(not J4)and(hq[816+O5]>Bz)then
set G0[288+O5]=true
set J4=GMF(it)
set G0[304+O5]=false
endif
if(not J4)and(not G0[304+O5])then
set bj_lastLoadedUnit=it
if(not J4)and((PD7(it,SU[X0]))and(O37(it))and(P87(800.,it,Condition(function TD7))>0))then
set GZ[$E0+O5]=true
set J4=(i1!=1164277357)and(UnitUseItem(it,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(not J4)and(PD7(it,SU[QW]))then
set b5=kk(it,700.,h9[16+O5])
set J4=(b5!=null)and(UnitUseItemPointLoc(it,bj_lastCreatedItem,b5))
endif
if(not J4)and(PD7(it,SU[DT4]))then
if NA7(it,h9[16+O5],20)then
set b5=kk(it,600.,h9[16+O5])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
if J4 then
set h9[O5]=h9[16+O5]
endif
elseif(NA7(it,h9[O5],20))and(h9[O5]!=h9[16+O5])then
set b5=kk(it,600.,h9[O5])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
endif
endif
set b5=null
set m5=null
return J4
endfunction
function GNF takes nothing returns boolean
if(((GetOwningPlayer(GetFilterUnit())==Y7[0])or(GetOwningPlayer(GetFilterUnit())==Z7[0]))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(hr)))and(GetWidgetLife(GetFilterUnit())>.405))then
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and(true))then
set hF=hF+1
endif
return true
endif
return false
endfunction
function GOF takes real GPF,unit it,boolean GQF,boolean GRF returns integer
local real GSF
local real GTF
local real GIF=GetUnitX(it)
local real GJF=GetUnitY(it)
local integer kc=0
local integer UP=0
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="TJv"
if(GPF>0)then
set GSF=Bz+GPF
loop
set GTF=GSF-Bz
exitwhen GTF<=0
call TriggerSleepAction(.5)
set hr=it
if((GetWidgetLife(it)<=.405)or(GetUnitCurrentOrder(it)==$D000F)or(not is(it)))then
set GSF=Bz
elseif(not GRF)then
set DK7=LoadUnitHandle(C7,(GetHandleId(it)),(652))
set DM7=QA7((GetHandleId(it)),"AI|TetherSource")
if OV7(it)and(not O37(it))then
if(DK7!=null)and(not IsUnitInRange(it,DK7,700)and(IsUnitType(DK7,UNIT_TYPE_HERO)))then
call PV7(it,$D0012,DK7)
elseif(DM7!=null)and(not IsUnitInRange(it,DM7,700))then
call PV7(it,$D0012,DM7)
else
call PV7(it,$D0012,h9[O5])
endif
endif
set hF=0
set UP=P87(700.,it,Condition(function GNF))
if((GPF-GTF>1.)and(hF>0))then
set GSF=Bz
set kc=2
elseif((GQF)and(GPF-GTF>1.)and(UP>1))then
set GSF=Bz
set kc=1
elseif(((GPF-GTF>2.)or((GPF-GTF>1.)and(GQF))))then
call MoveLocation(Ha,GIF,GJF)
if(P77(700.,Ha,Condition(function GNF))>1)then
set GSF=Bz
set kc=3
endif
elseif((GPF-GTF>=2.)and(iy(it)))then
set GSF=Bz
set kc=1
endif
endif
endloop
endif
return kc
endfunction
function GUF takes nothing returns nothing
local unit it=QA7(GetHandleId(GetTriggeringTrigger()),"Unit")
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean ZQE=GZ[512+O5]
local integer GVF
set LP4="(TMv)"+LP4
if O67(O5)then
return
endif
set G0[48+O5]=true
if(OV7(it))then
call PV7(it,$D0012,h9[O5])
endif
if(GetUnitTypeId(it)==1211117642)then
call TriggerSleepAction(1.)
set GVF=0
elseif eY[O5]==$B then
set GVF=GOF(1.,it,true,false)
elseif(ZQE)then
set GVF=GOF(5.,it,true,false)
else
set GVF=GOF(3.,it,false,false)
endif
set G0[48+O5]=false
if((GetWidgetLife(it)<=.405)or(not is(it)))then
elseif(not OV7(it))then
elseif((GVF==2)and(not O37(it))and(not G0[32+O5]))then
call IssueImmediateOrderById(it,$D0019)
elseif((ZQE)or(GVF==3))then
if((not O37(it))and(not G0[32+O5])and(G0[$80+O5]))then
call PV7(it,$D000F,h8[O5])
else
call SJ7(it,false)
endif
endif
set it=null
endfunction
function GWF takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP=GetUnitUserData(h8[O5])
local integer E_F=0
local real X47=.0
set LP4="TQv"
if(IsUnitAlly(it,Y7[0]))then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set E_F=$B+P54
if(UP>E_F)then
call E2F(it,0)
endif
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set E_F=31+P24
if(UP>E_F)then
call E2F(it,1)
endif
elseif((hj[256+UP]==60)or(hj[UP]==50))then
set E_F=51+P_4
if(UP>E_F)then
call E2F(it,2)
endif
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set E_F=119-P54
if(UP>E_F)then
call E2F(it,0)
endif
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set E_F=$8D-P24
if(UP>E_F)then
call E2F(it,1)
endif
elseif((hj[256+UP]==$A0)or(hj[UP]==$96))then
set E_F=$A1-P_4
if(UP>E_F)then
call E2F(it,2)
endif
endif
endif
if false and((eY[O5]==1)and(h4[O5]!=null)and((not Id(O5))and(GetUnitLifePercent(it)<70.)))then
set X47=N37(it,h8[O5])
if(((X47>2000.)and(N37(it,PL7(it))>N37(h8[O5],PL7(it))))or((X47>1400.)and((GZ[400+O5])and(Bz>hq[544+O5]))))then
call ZVE(O5,true)
call PV7(it,$D0012,h9[O5])
call ZPE(it,true)
endif
endif
endfunction
function GXF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and(GetIssuedOrderId()>$D0020))!=null
endfunction
function GYF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="GYF"
set GZ[16+O5]=true
set eY[256+O5]=GetIssuedOrderId()
set hq[448+O5]=Bz+3.
endfunction
function GZF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function GAF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function GBF takes unit MQ7,unit OC7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer UP
local integer j
local integer k
local integer FIF=NL7(GetUnitUserData(OC7))
local boolean NK7=IsUnitAlly(MQ7,Y7[0])
set LP4="aiChangeHeroLane"
set h4[$90+O5]=null
set G0[32+O5]=false
set G0[$A0+O5]=false
set G0[$B0+O5]=false
set h4[O5]=null
set GZ[$80+O5]=false
set eY[272+O5]=0
set UP=GetUnitUserData(OC7)
if IsUnitAlly(MQ7,Y7[0])then
set UP=UP-1
else
set UP=UP+1
endif
set UP=EFF(UP,IsUnitAlly(MQ7,Y7[0]),MP7(MQ7))
set k=N17(MQ7)
if(N37(MQ7,PL7(MQ7))<5000.)then
if(FIF==0)then
set h8[O5]=h7[$E]
set h8[16+O5]=h7[$E]
elseif(FIF==1)then
set h8[O5]=h7[35]
set h8[16+O5]=h7[35]
else
set h8[O5]=h7[55]
set h8[16+O5]=h7[55]
endif
set eY[O5]=1
set h9[O5]=PL7(MQ7)
set h9[16+O5]=PL7(MQ7)
set hq[576+O5]=Bz+L24
if OV7(MQ7)then
call PV7(MQ7,$D000F,h8[O5])
endif
return
endif
set h8[$80+O5]=h7[UP]
set eY[288+O5]=FIF
if eY[288+O5]!=0 then
set eY[304+O5]=eY[288+O5]
else
set eY[304+O5]=k
if eY[304+O5]==0 then
set eY[304+O5]=GetRandomInt(1,2)
endif
endif
set UP=EFF(GetUnitUserData(h9[O5]),IsUnitAlly(MQ7,Y7[0]),MP7(MQ7))
set h8[48+O5]=h7[UP]
set UP=EHF(O5,UP,eY[304+O5],NK7)
set h8[32+O5]=h7[UP]
set eY[O5]=9
set hq[576+O5]=Bz+L24
set hq[592+O5]=Bz+180.
set G0[$B0+O5]=((not OY7(MQ7))and(h8[48+O5]==h8[32+O5]))
set eY[$D0+O5]=GetUnitUserData(OC7)
set h8[$90+O5]=OC7
if OV7(MQ7)then
if h8[48+O5]!=h8[32+O5]or G0[$B0+O5]then
call PV7(MQ7,$D000F,h8[48+O5])
else
call PV7(MQ7,$D000F,h9[O5])
endif
endif
endfunction
function GCF takes unit MQ7,unit OC7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer SN7=GetPlayerId(GetOwningPlayer(OC7))
local boolean NK7=IsUnitAlly(MQ7,Y7[0])
local integer UP
local integer G3F
local integer FIF=NL7(GetUnitUserData(OC7))
local integer i
set LP4="aiGank"
call ZPE(G7[O5],false)
set G0[$A0+O5]=true
set h4[$90+O5]=G7[SN7]
set G0[32+O5]=false
set h4[O5]=null
set GZ[$80+O5]=false
set G0[$C0+O5]=false
set G0[$D0+O5]=true
set hq[640+O5]=Bz+10.
set h8[96+O5]=OC7
set h8[$A0+O5]=h8[80+SN7]
set eY[288+O5]=N17(OC7)
if eY[288+O5]!=0 then
set eY[304+O5]=eY[288+O5]
else
set eY[304+O5]=N17(MQ7)
if eY[304+O5]==0 then
set eY[304+O5]=GetRandomInt(1,2)
endif
endif
set eY[272+O5]=1
set G3F=EFF(GetUnitUserData(h8[80+SN7])+M17(NK7,1,-1),NK7,MP7(MQ7))
set h8[112+O5]=h7[G3F]
set UP=GetUnitUserData(h8[80+O5])
set G3F=EHF(O5,UP,eY[304+O5],NK7)
set h8[32+O5]=h7[G3F]
set h8[48+O5]=h8[32+O5]
set UP=N17(MQ7)
set i=M17(IsUnitAlly(MQ7,Y7[0]),-1,1)
if(UP==0)then
if(N37(MQ7,PL7(MQ7))>N37(h7[$E],PL7(MQ7)))then
set h8[48+O5]=h7[$E+i]
endif
elseif(UP==1)then
if(N37(MQ7,PL7(MQ7))>N37(h7[34],PL7(MQ7)))then
set h8[48+O5]=h7[34+i]
endif
elseif(UP==2)then
if(N37(MQ7,PL7(MQ7))>N37(h7[57],PL7(MQ7)))then
set h8[48+O5]=h7[57+i]
endif
endif
set UP=GetUnitUserData(h8[112+O5])
if(NK7)then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set i=IMaxBJ($A+P54,$B)
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set i=IMaxBJ(30+P24,31)
else
set i=IMaxBJ(50+P_4,51)
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set i=IMaxBJ(118-P54,111)
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set i=IMaxBJ($8C-P24,$83)
else
set i=IMaxBJ($A0-P_4,$97)
endif
endif
set h8[$80+O5]=h7[i]
set eY[O5]=9
set hq[576+O5]=Bz+L24
set hq[592+O5]=Bz+180.
set G0[$B0+O5]=((not OY7(MQ7))and(h8[48+O5]==h8[32+O5]))
if OV7(MQ7)and GetUnitCurrentOrder(MQ7)==$D000F then
if h8[48+O5]!=h8[32+O5]or G0[$B0+O5]then
call PV7(MQ7,$D000F,h8[48+O5])
else
call PV7(MQ7,$D000F,h9[O5])
endif
endif
endfunction
function G6F takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local real GLF=GetUnitX(it)
local real G1F=GetUnitY(it)
set LP4="G6F"
if(i1==1211117642)then
if(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
call J3(it,false)
endif
return
endif
if(GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)then
if((GetHeroSkillPoints(it)>0)and(Bz>Q94)and(OV7(it)))then
call ExecuteFunc("BHE")
endif
if((N37(it,h8[O5])<150.)and(h8[O5]!=h7[1])and(h8[O5]!=h7[101]))then
if(IsUnitAlly(it,Y7[0]))then
set hF=GetUnitUserData(h8[O5])
else
set hF=hj[512+GetUnitUserData(h8[O5])]
endif
if(hF>0)then
call XE7(it,hF)
elseif(h8[O5]!=h9[O5])then
set h8[O5]=h9[O5]
else
set h8[O5]=PL7(it)
endif
elseif(eY[O5]==1)then
call GWF(it)
endif
if(PD4)then
set hF=GetUnitUserData(h8[O5])
if(((hF>30)and(hF<40))or((hF>50)and(hF<60)))then
call E2F(it,0)
endif
endif
if((h4[80+O5]!=null)and(GetWidgetLife(h4[80+O5])<=.405))then
set h4[80+O5]=null
endif
if((h4[96+O5]!=null)and(GetWidgetLife(h4[96+O5])<=.405))then
set h4[96+O5]=null
endif
if((h4[$80+O5]!=null)and((GetWidgetLife(h4[$80+O5])<=.405)))then
set h4[$80+O5]=null
endif
if((h4[$A0+O5]!=null)and((GetWidgetLife(h4[$A0+O5])<=.405)or(not IsUnitInRange(it,h4[$A0+O5],1000.))))then
set h4[$A0+O5]=null
endif
if((h4[48+O5]!=null)and(((eY[O5]!=3)and(eY[O5]!=4))or(GetWidgetLife(h4[48+O5])<=.405)))then
set h4[48+O5]=null
endif
if((N67(GLF,G1F,GetLocationX(HC[32+O5]),GetLocationY(HC[32+O5]))<20.)and(Bz>Q94))then
set G0[48+O5]=false
if(eY[O5]!=2)then
if((GZ[$90+O5])and(OV7(it))and(P87(700.,it,Condition(function KX))==0)and(((eY[O5]!=9 or eY[272+O5]!=3)and eY[O5]!=$A and eY[O5]!=$B)or(P87(700.,it,Condition(function KA))==0)))then
call ExecuteFunc("G0F")
else
set GZ[$90+O5]=true
if((eY[O5]==3)or(eY[O5]==4))then
call NP7(it,O5)
endif
if(iU(it))then
call J3(it,true)
endif
endif
elseif((GetUnitLifePercent(it)>90)and(GetUnitManaPercent(it)>90))then
if(GZ[$90+O5])then
if(IsUnitAlly(it,Y7[0]))then
call FNF(it,O5,PT4)
else
call FNF(it,O5,PU4)
endif
else
set GZ[$90+O5]=true
endif
endif
elseif(GZ[$90+O5])then
set GZ[$90+O5]=false
endif
call MoveLocation(HC[32+O5],GLF,G1F)
if((eY[O5]==$A)and(hq[432+O5]<Bz))then
set eY[O5]=1
set h4[64+O5]=null
endif
if((GZ[480+O5])and(eY[O5]!=4)and(eY[O5]!=2))then
set GZ[480+O5]=false
endif
if((GZ[16+O5])and(hq[448+O5]<Bz)and(eY[256+O5]==GetUnitCurrentOrder(it)))then
call J3(it,true)
set GZ[16+O5]=false
endif
elseif((GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_NONE)and(IsUnitInForce(it,QW4)))then
if((is(it))and(GetUnitCurrentOrder(it)!=$D000F))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1097690998,true)
call SetPlayerController(GetOwningPlayer(it),MAP_CONTROL_COMPUTER)
call J3(it,true)
endif
endif
set GZ[32+O5]=false
set GZ[400+O5]=false
endfunction
function G5F takes nothing returns nothing
local integer O5=1
local integer RX7
local integer i=0
local integer j=0
local real G2F
local real G_F
local boolean H4F=false
local string H7F=""
local boolean H8F=(Bz>Q94)
local boolean H9F=(Bz>Q94)
set LP4="G5F"
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
call GroupClear(iE)
call GroupEnumUnitsOfPlayer(iE,Player(O5),ip)
call ForGroup(iE,function G6F)
if G7[O5]!=null then
set G2F=2+GetHeroAgi(G7[O5],true)*.14
set G_F=1
set i=0
loop
exitwhen i>5
set j=GetItemTypeId(UnitItemInSlot(G7[O5],i))
if((j==SU[TV])or(j==SU[ZL])or(j==SU[Z3])or(j==SU[R1])or(j==SU[HW])or(j==SU[M3])or(j==SU[H1])or(j==SU[S2])or(j==SU[DJ4])or(j==SU[DK4]))then
set G2F=G2F+5
elseif((j==SU[RX])or(j==SU[DG4])or(j==SU[DO4]))then
set G2F=G2F+$A
elseif(j==SU[GB])then
set G_F=G_F+.25
elseif(j==SU[X2])then
set G_F=G_F+.3
endif
set i=i+1
endloop
set G2F=(.06*G2F)/(1.+.06*G2F)
set hq[752+O5]=(1/(1-G2F))*(G_F)
endif
if G7[O5]!=null and GetHeroLevel(G7[O5])<$B then
if IsPlayerAlly(Player(O5),Y7[0])then
set H9F=false
else
set H8F=false
endif
endif
endif
set O5=O5+1
endloop
if H8F and(not B54)then
set B54=true
set LE4=false
set O5=1
loop
exitwhen O5>5
if WQ7(Y7[O5])then
set LE4=true
endif
set O5=O5+1
endloop
if LE4 then
set O5=1
loop
exitwhen O5>5
set RX7=GetPlayerId(Y7[O5])
if B04[16+RX7]then
set B04[16+RX7]=false
call RY7(IY4,GetObjectName(1496331829)+"
"+GetObjectName(1497445941)+"|c00dd8dff"+GetObjectName(1496331830),Y7[O5])
endif
set O5=O5+1
endloop
endif
endif
if H9F and(not B24)then
set B24=true
set LE4=false
set O5=1
loop
exitwhen O5>5
if WQ7(Z7[O5])then
set LE4=true
endif
set O5=O5+1
endloop
if LE4 then
set O5=1
loop
exitwhen O5>5
set RX7=GetPlayerId(Z7[O5])
if B04[16+RX7]then
set B04[16+RX7]=false
call RY7(JZ4,GetObjectName(1496331829)+"
"+GetObjectName(1497445941)+"|c00dd8dff"+GetObjectName(1496331830),Z7[O5])
endif
set O5=O5+1
endloop
endif
endif
if((G1==0)and(not Ev)and(not Av))then
set G1=GetRandomInt(1,2)
elseif((G1==1)and(not Rv)and(not av))then
if((Nv)or(Ov))then
set G1=2
else
set G1=-1
endif
elseif((G1==2)and(not Nv)and(not Ov))then
if((Rv)or(av))then
set G1=1
else
set G1=-1
endif
endif
if((G2==0)and(not Bv)and(not Dv))then
set G2=GetRandomInt(1,2)
elseif((G2==1)and(not bv)and(not Cv))then
if((cv)or(fv))then
set G2=2
else
set G2=-1
endif
elseif((G2==2)and(not cv)and(not fv))then
if((bv)or(Cv))then
set G2=1
else
set G2=-1
endif
endif
set L24=120.-.05*Bz
if L24<60. then
set L24=60.
endif
call FGF()
if PY4 and G4==-1 then
set LG4=W7
set i=1
loop
exitwhen i>5
set O5=LS4[80+i]
if O5!=-1 and G7[O5]!=null and GetUnitLifePercent(G7[O5])>70. and eY[O5]==1 and h4[O5]==null and(eY[544+O5]==0 and Bz>hq[576+O5])and(GetHeroLevel(G7[O5])<PA4)and(GetHeroLevel(G7[O5])>=8)then
set j=FQF(FUF(G7[O5]),GetHeroLevel(G7[O5]))
if(j!=eY[64+O5])and(j==0 or eY[64+O5]==0)and((LS4[112+j]!=0)or(LS4[$90+j]<Bz))then
set LS4[112+eY[64+O5]]=LS4[112+eY[64+O5]]-1
if(j==1)then
call GBF(G7[O5],h7[29+P24])
call S97(G7[O5],LG4,GetObjectName(1496330293))
elseif(j==2)then
call GBF(G7[O5],h7[49+P_4])
call S97(G7[O5],LG4,GetObjectName(1496330294))
else
call GBF(G7[O5],h7[9+P54])
call S97(G7[O5],LG4,GetObjectName(1496330292))
endif
call SH7(G7[O5],LG4)
set LS4[112+j]=LS4[112+j]+1
set eY[64+O5]=j
endif
endif
set i=i+1
endloop
endif
if PZ4 and G3==-1 then
set LG4=X7
set i=1
loop
exitwhen i>5
set O5=LS4[86+i]
if O5!=-1 and G7[O5]!=null and GetUnitLifePercent(G7[O5])>70. and eY[O5]==1 and h4[O5]==null and(eY[544+O5]==0 and Bz>hq[576+O5])and(GetHeroLevel(G7[O5])<PA4)and(GetHeroLevel(G7[O5])>=8)then
set j=FQF(FKF(G7[O5]),GetHeroLevel(G7[O5]))
if(j!=eY[64+O5])and(j==0 or eY[64+O5]==0)and((LS4[118+j]!=0)or(LS4[$90+j]<Bz))then
set LS4[118+eY[64+O5]]=LS4[118+eY[64+O5]]-1
if(j==1)then
call GBF(G7[O5],h7[$8B-P24])
call S97(G7[O5],LG4,GetObjectName(1496330293))
elseif(j==2)then
call GBF(G7[O5],h7[$9F-P_4])
call S97(G7[O5],LG4,GetObjectName(1496330294))
else
call GBF(G7[O5],h7[117-P54])
call S97(G7[O5],LG4,GetObjectName(1496330292))
endif
call SH7(G7[O5],LG4)
set LS4[118+j]=LS4[118+j]+1
set eY[64+O5]=j
endif
endif
set i=i+1
endloop
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
set H4F=false
if G7[O5]!=null and GetWidgetLife(G7[O5])>.405 then
if OY7(G7[O5])then
if h4[$B0+O5]==null or N37(G7[O5],h4[$B0+O5])>3000. or GetWidgetLife(h4[$B0+O5])>0 then
set L64=null
set i=1
loop
exitwhen L64!=null or i>5
if IsPlayerAlly(Player(O5),Y7[0])then
set RX7=GetPlayerId(Z7[i])
else
set RX7=GetPlayerId(Y7[i])
endif
if G7[RX7]!=null and GetWidgetLife(G7[RX7])>.405 and WQ7(Player(RX7))then
if N37(G7[RX7],G7[O5])<1800. then
set L64=G7[RX7]
endif
endif
set i=i+1
endloop
if L64!=null then
set h4[$B0+O5]=L64
endif
endif
set LU4[48+O5]=GetUnitX(G7[O5])
set LU4[64+O5]=GetUnitY(G7[O5])
set eY[336+O5]=eY[80+O5]
if eY[$F0+O5]<R2I(Bz)then
set L64=h4[$B0+O5]
if L64==null then
set L64=h4[$C0+O5]
endif
if L64!=null then
set RX7=GetPlayerId(GetOwningPlayer(L64))
set H4F=true
set H7F="|r"+P[RX7]+KY4[RX7]+GetObjectName(1496331064)+NG7(eY[80+O5],true)+" - "+P[O5]+GetUnitName(G7[O5])+"|r"
set h4[$C0+O5]=null
endif
endif
set eY[$F0+O5]=R2I(Bz)+20
elseif eY[$F0+O5]<R2I(Bz)and h4[$B0+O5]!=null then
set RX7=GetPlayerId(GetOwningPlayer(h4[$B0+O5]))
set H4F=true
set H7F="|r"+P[RX7]+KY4[RX7]+GetObjectName(1496331065)+NG7(eY[336+RX7],true)+" - "+P[O5]+GetUnitName(G7[O5])+"|r"
set h4[$C0+O5]=h4[$B0+O5]
set h4[$B0+O5]=null
endif
else
set h4[$B0+O5]=null
endif
if H4F then
call TriggerSleepAction(.4)
if IsPlayerAlly(Player(O5),Y7[0])then
set LG4=X7
else
set LG4=W7
endif
if B04[16+GetPlayerId(GetLocalPlayer())]and IsPlayerInForce(GetLocalPlayer(),LG4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,H7F)
call SG7(LG4,LU4[48+O5],LU4[64+O5],RX7)
endif
endif
endif
set O5=O5+1
endloop
set LG4=null
endfunction
function HFF takes integer O5,unit MQ7,unit HGF,boolean HHF returns boolean
local boolean PN7=false
if(not PN7)and((GetUnitAbilityLevel(MQ7,1093677391)>0)and(Bz>TB4[32+O5]))then
set PN7=IssuePointOrderById(MQ7,$D022D,GetUnitX(HGF)+GetRandomReal(-200.,200.),GetUnitY(HGF)+GetRandomReal(-200.,200.))
endif
if(not PN7)and HHF and(GetUnitAbilityLevel(MQ7,1093683257)>0 and(Bz>TB4[O5]))then
set bj_lastLoadedUnit=HGF
set bj_lastReplacedUnit=P47(800.,PU7(HGF),Condition(function TD7))
if(bj_lastReplacedUnit!=null)then
set PN7=IssueImmediateOrderById(MQ7,$D020A)
endif
endif
if(not PN7)and HHF and(GetUnitAbilityLevel(MQ7,1093685808)>0 and(Bz>TB4[O5]))then
set PN7=IssuePointOrderById(MQ7,$D0278,GetUnitX(HGF),GetUnitY(HGF))
endif
if(not PN7)and HHF and(GetUnitAbilityLevel(MQ7,1093751874)>0 and(Bz>TB4[O5]))then
if(Bz>TB4[16+O5])then
set bj_lastReplacedUnit=VK7(1800.,MQ7,false)
if bj_lastReplacedUnit!=null then
set PN7=PW7(MQ7,$D0097,1093751873,bj_lastReplacedUnit)
set h8[$A0+O5]=HGF
endif
endif
if(not PN7)then
set PN7=IssuePointOrderById(MQ7,$D02B6,GetUnitX(HGF)+GetRandomReal(-200.,200.),GetUnitY(HGF)+GetRandomReal(-200.,200.))
endif
endif
set bj_lastLoadedUnit=HGF
if(not PN7)and HHF and(GetPlayerController(GetOwningPlayer(HGF))==MAP_CONTROL_COMPUTER)and((GetUnitTypeId(HGF)==1214409837 and PC7(HGF,$D00D4,1093742932))or((GetUnitAbilityLevel(HGF,1093742938)+GetUnitAbilityLevel(HGF,1093742677)+GetUnitAbilityLevel(HGF,1093742937))>0))and(P87(800.,MQ7,Condition(function TD7))==0)and(OV7(HGF))and(OV7(MQ7))then
if(IssueTargetOrderById(HGF,$D0118,MQ7))then
set PN7=true
call ZPE(MQ7,true)
endif
endif
if(not PN7)and(eY[$E0+O5]<R2I(Bz)and GetUnitState(MQ7,UNIT_STATE_MANA)>75)then
set PN7=SQ7(MQ7,HGF)
endif
return PN7
endfunction
function HIF takes unit MQ7,boolean NK7,integer NH7 returns integer
local unit HJF=null
local integer O5=0
local integer UP=0
local integer i=0
local integer CWE=0
local integer k=0
local real EWF=0
if R77(GetHandleId(MQ7),"AI|TowerDef_CountCD")>R2I(Bz)then
return R47(GetHandleId(MQ7),"AI|TowerDef_Require")
endif
set LE4=false
set bj_lastLoadedUnit=null
set EWF=$98967F
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(MQ7),GetUnitY(MQ7),1800.,Q54)
loop
set HJF=FirstOfGroup(H8)
exitwhen HJF==null
call GroupRemoveUnit(H8,HJF)
set O5=GetPlayerId(GetOwningPlayer(HJF))
set i=GetUnitTypeId(HJF)
if((GetUnitAbilityLevel(HJF,1093678162)!=0 and((i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398))==false)or GetUnitAbilityLevel(HJF,1097625443)!=0 or GetWidgetLife(HJF)<50.)then
elseif O5==$C or O5>$E then
elseif not(IsUnitType(HJF,UNIT_TYPE_MELEE_ATTACKER)or IsUnitType(HJF,UNIT_TYPE_RANGED_ATTACKER))then
else
set i=GetUnitTypeId(HJF)
set UP=0
if IsUnitType(HJF,UNIT_TYPE_HERO)and i!=1211117642 then
if(IsUnitAlly(HJF,Y7[0])==NK7)then
set LE4=true
set L84=N37(MQ7,HJF)
if L84<EWF and WQ7(Player(O5))then
set bj_lastLoadedUnit=HJF
set EWF=L84
endif
else
set k=k+1
endif
elseif O5!=GetPlayerId(Y7[0])and O5!=GetPlayerId(Z7[0])then
set UP=3
else
if(i==1969711215 or i==1970169187)or(i==1966092337 or i==1966092338)or(i==1702061422 or i==1701081721)or(i==1697656918 or i==1697656919)then
set UP=1
elseif(i==1970107511 or i==1966092370)or(i==1700946284 or i==1697657398)then
set UP=3
else
set UP=5
endif
endif
if(IsUnitAlly(HJF,Y7[0])==NK7)then
set CWE=CWE-UP
else
set CWE=CWE+UP
endif
endif
endloop
if NK7 then
set k=R2I(L44*I2R(k))
else
set k=R2I(C_4*I2R(k))
endif
set CWE=CWE+IMaxBJ(600-R2I(GetWidgetLife(MQ7)),0)/30
if(not LE4)and(k==0)and(CWE>8)then
set k=k+1
endif
call FGF()
set k=k-LS4[112+M17(NK7,0,6)+NH7]
call Q97(GetHandleId(MQ7),"AI|TowerDef_Require",k)
call QD7(GetHandleId(MQ7),"AI|TowerDef_CountCD",Bz+1)
return k
endfunction
function HKF takes nothing returns nothing
local unit MQ7=QA7(GetHandleId(GetTriggeringTrigger()),"Unit")
local unit HJF=null
local boolean NK7=IsUnitAlly(MQ7,Y7[0])
local integer O5=0
local integer j=0
local integer i=0
local integer k=0
local integer CWE=0
local integer UP
local boolean PN7=false
set LP4="HKF"
if(GetWidgetLife(MQ7)<.405 or BR8(MQ7))or((not((NK7 and PY4)or((not NK7)and PZ4))))or(PD4)or(MQ7==null)or(R77(GetHandleId(MQ7),"DefCD")>Bz)then
set MQ7=null
return
endif
set j=R47(GetHandleId(MQ7),"AI|Lane")
set k=HIF(MQ7,NK7,j)
call QD7(GetHandleId(MQ7),"DefCD",Bz+1.)
if k<=0 then
set MQ7=null
return
endif
if bj_lastLoadedUnit!=null and GetWidgetLife(MQ7)<425 then
if Bz>R77(GetHandleId(MQ7),"PingCD")then
call QD7(GetHandleId(MQ7),"PingCD",Bz+30.)
if NK7 then
call SG7(W7,GetUnitX(MQ7),GetUnitY(MQ7),GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)))
else
call SG7(X7,GetUnitX(MQ7),GetUnitY(MQ7),GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit)))
endif
endif
endif
set HJF=h7[R47(GetHandleId(MQ7),"AI|Wpt")]
set i=1
set CWE=M17(NK7,0,6)
set PN7=false
loop
exitwhen(i>5)
set O5=LS4[80+CWE+i]
if O5!=-1 and GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER then
set LS4[96+O5]=0
set LS4[$B0+O5]=0
set UP=N17(G7[O5])
set bj_lastLoadedUnit=G7[O5]
if(G7[O5]==null)or((eY[O5]!=1 or(GetUnitCurrentOrder(G7[O5])==$D0012 and G0[48+O5]==false))and eY[O5]!=$A)or(IF4[O5])or(O37(G7[O5]))then
elseif(UP==j)then
set eY[544+O5]=1
set h9[64+O5]=MQ7
set hq[320+O5]=Bz+20.
elseif(eY[544+O5]!=0)or(eY[O5]==3 or eY[O5]==4)or(Bz<hq[528+O5])or(h4[O5]!=null)or(X_4[O5]==1)or(GetHeroLevel(G7[O5])<6)or(GetUnitLifePercent(G7[O5])<50.)then
else
set LS4[96+O5]=1
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen(i>$F or k<=0)
if i>$A then
set O5=LS4[80+CWE+i-$A]
elseif i>5 then
set O5=LS4[80+CWE+i-5]
else
set O5=LS4[80+CWE+i]
endif
if O5!=-1 and LS4[96+O5]==1 and GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER then
set UP=N17(G7[O5])
if(i<5)and(Bz>hq[576+O5])then
elseif(i<=$A)and((NK7 and((LS4[112+UP]-LS4[118+UP]<0)or(LS4[112+UP]<=1)))or((not NK7)and((LS4[118+UP]-LS4[112+UP]<0)or(LS4[118+UP]<=1))))then
elseif(LS4[$B0+O5]==0)then
set LS4[$B0+O5]=1
set bj_lastCreatedUnit=P47(1200.,PU7(G7[O5]),Condition(function P97))
if((bj_lastCreatedUnit==null)or(GetWidgetLife(bj_lastCreatedUnit)>200.))then
set LE4=false
if(i<=$A)and(eY[$E0+O5]<R2I(Bz)and GetUnitState(MQ7,UNIT_STATE_MANA)>75)and PD7(MQ7,XC)then
if(P87(1500.,G7[O5],Condition(function TD7))==0)and(SQ7(G7[O5],MQ7))then
call GBF(G7[O5],HJF)
else
call ZPE(G7[O5],true)
set h8[$90+O5]=MQ7
endif
set LE4=true
endif
if(not LE4)and(i>$A)then
set LE4=((j!=UP)and(j==0 or UP==0))
if(LE4)then
call GBF(G7[O5],HJF)
set h4[$90+O5]=MQ7
set h8[$90+O5]=MQ7
endif
endif
if(LE4)then
set k=k-1
set hq[528+O5]=Bz+10.
set eY[544+O5]=1
set h9[64+O5]=MQ7
set LS4[112+CWE+UP]=LS4[112+CWE+UP]-1
if eY[O5]!=9 then
set eY[O5]=1
endif
set PN7=true
endif
endif
endif
endif
set i=i+1
endloop
if PN7 then
call QD7(GetHandleId(MQ7),"DefCD",Bz+10.)
endif
set MQ7=null
set HJF=null
endfunction
function HMF takes nothing returns boolean
return((GetWidgetLife(GetTriggerUnit())>50.)and(SC7(GetTriggerUnit()))and(IsUnitEnemy(GetTriggerUnit(),Y7[0])))
endfunction
function HNF takes nothing returns boolean
return((GetWidgetLife(GetTriggerUnit())>50.)and(SC7(GetTriggerUnit()))and(IsUnitEnemy(GetTriggerUnit(),Z7[0])))
endfunction
function HOF takes unit MQ7,integer HPF,integer NH7 returns trigger
local trigger t=CreateTrigger()
if GetOwningPlayer(MQ7)==Y7[0]then
call TriggerRegisterUnitInRange(t,MQ7,1200.,Condition(function HMF))
call Q97(GetHandleId(MQ7),"AI|WptClear",HPF+1)
else
call TriggerRegisterUnitInRange(t,MQ7,1200.,Condition(function HNF))
call Q97(GetHandleId(MQ7),"AI|WptClear",HPF-1)
endif
call TriggerAddAction(t,function HKF)
call QG7(GetHandleId(t),"Unit",MQ7)
call Q97(GetHandleId(MQ7),"AI|Wpt",HPF)
call Q97(GetHandleId(MQ7),"AI|Lane",NH7)
return t
endfunction
function HQF takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer k=0
local integer CWE=0
local integer i=0
local integer j=0
local boolean HRF=false
local unit MQ7=null
local player pl=GetOwningPlayer(it)
local boolean HSF=false
local integer HTF
local boolean HUF=false
local boolean PN7=false
local boolean HVF=IsUnitInRange(it,PL7(it),5000.)
local boolean HWF=false
set i=GetUnitTypeId(it)
if WQ7(pl)and((i==1211117650)or(i==1211119433)or(i==1429221430)or(i==1433105516))then
set HWF=true
set GZ[O5]=true
endif
set i=0
set GZ[320+O5]=false
call GroupClear(H8)
call GroupClear(iA)
call GroupClear(H9)
call GroupEnumUnitsInRange(iA,GetUnitX(it),GetUnitY(it),1800.,null)
loop
set MQ7=FirstOfGroup(iA)
exitwhen MQ7==null
call GroupRemoveUnit(iA,MQ7)
if not IsUnitIllusion(MQ7)then
call GroupAddUnit(H8,MQ7)
endif
if(not HSF)and IsUnitType(MQ7,UNIT_TYPE_HERO)and IsUnitEnemy(MQ7,pl)and GetWidgetLife(MQ7)>.405 and eY[32+GetPlayerId(GetOwningPlayer(MQ7))]>0 then
set HSF=true
call GroupEnumUnitsInRange(H9,GetUnitX(MQ7),GetUnitY(MQ7),1200.,null)
call GroupAddGroup(H9,H8)
endif
endloop
set h4[304+O5]=null
loop
set MQ7=FirstOfGroup(H8)
exitwhen(MQ7==null)
if(GetWidgetLife(MQ7)<=.405)then
elseif O37(MQ7)then
elseif(IsUnitType(MQ7,UNIT_TYPE_HERO))then
if(IsUnitEnemy(MQ7,pl))then
if((not IsUnitInRange(it,MQ7,600.))or(kD(MQ7)))and(eY[32+GetPlayerId(GetOwningPlayer(MQ7))]==0)then
elseif(GetUnitTypeId(MQ7)!=1211117642)then
set CWE=CWE-1
set PN7=true
if(HWF)and(GetUnitTypeId(MQ7)==1333027688)then
set GZ[O5]=false
endif
elseif(not HUF)then
set HUF=true
endif
elseif IsUnitInRange(MQ7,it,1200.)or HVF then
if((GetUnitTypeId(MQ7)!=1211117642)and(not O37(MQ7)))then
set k=k+1
set i=i+1
endif
if IsUnitInRange(MQ7,it,800)then
set GZ[320+O5]=true
endif
endif
elseif((IsUnitType(MQ7,UNIT_TYPE_STRUCTURE)and IsUnitType(MQ7,UNIT_TYPE_RANGED_ATTACKER))and(N37(MQ7,it)<800.)and(MP7(it)<2000.))then
if(IsUnitEnemy(MQ7,pl))then
set j=j-1
set h4[304+O5]=MQ7
elseif IsUnitAlly(MQ7,pl)then
set j=j+1
endif
endif
call GroupRemoveUnit(H8,MQ7)
endloop
if(HUF)then
set CWE=CWE-1
set HRF=true
endif
if not PN7 then
set h4[304+O5]=null
endif
if IsPlayerAlly(pl,Y7[0])then
set eY[320+O5]=R2I(k*C_4+CWE*L44)+j
set GZ[$D0+O5]=((R2I(i*C_4)>=3)and(k<=0))
else
set eY[320+O5]=R2I(k*L44+CWE*C_4)+j
set GZ[$D0+O5]=((R2I(i*L44)>=3)and(k<=0))
endif
return HRF
endfunction
function HXF takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer kc=0
local boolean J4=false
local boolean HRF=false
local player pl=GetOwningPlayer(it)
local integer UP
set LP4="(T8v)"+LP4
set HRF=HQF(it)
if O67(O5)then
set pl=null
return false
endif
if(N37(it,PL7(it))<600.)then
set kc=0
else
set kc=-eY[320+O5]
if(not G0[$80+O5])then
set kc=kc+1
endif
if((GetUnitLifePercent(it)<70.)or(IC(O5)))then
set kc=kc+1
endif
if(eY[O5]==3 or eY[O5]==4)then
set kc=kc-1
endif
endif
set G0[$90+O5]=HRF
if(kc>2)and(eY[O5]<9)and(h4[O5]==null or(not OB7(h4[O5],it)))then
set h4[O5]=null
set GZ[$80+O5]=false
set G0[$80+O5]=false
set G0[256+O5]=false
if h4[304+O5]==null or kc>=3 then
set hq[496+O5]=Bz+3.
else
set hq[496+O5]=Bz+1.
endif
if(is(it))then
call PV7(it,$D0012,h9[O5])
endif
set J4=true
elseif kc>1 then
set G0[256+O5]=false
else
set G0[$80+O5]=true
set G0[256+O5]=true
endif
set pl=null
return J4
endfunction
function HYF takes nothing returns boolean
return((not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and(SC7(GetFilterUnit())))!=null
endfunction
function HZF takes nothing returns nothing
local unit it=QA7(GetHandleId(GetTriggeringTrigger()),"Unit")
local unit m5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local string H7F
set LP4="HZF"
if(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set UP=P87(1250.,m5,Condition(function HYF))
if(eY[O5]==9)then
call XG7(it)
endif
if((GetHeroLevel(it)<6)or((MP7(it)<500)and(not Id(O5))and(Bz>hq[512+O5])))then
if((R2I(GetUnitState(it,UNIT_STATE_LIFE))<(400+(GetHeroLevel(it)*40)))and(UP<3))then
call ZVE(O5,false)
set GZ[$80+O5]=false
call ZPE(it,false)
elseif((GetUnitLifePercent(m5)>20.)and((UP<1)or(((S67(it))or(GetHeroLevel(it)<$A))and(UP<2))))then
call ZPE(it,true)
endif
elseif(O37(it))then
call ZVE(O5,false)
set GZ[$80+O5]=false
call ZPE(it,false)
endif
if(GetUnitAbilityLevel(m5,1098282348)>0)then
call E2F(it,-1)
else
set h4[$80+O5]=m5
endif
elseif(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitVisible(m5,Player(O5)))then
call HXF(it)
if(iy(it))then
set h4[$A0+O5]=m5
endif
set UP=GetPlayerId(GetOwningPlayer(m5))
if(WQ7(Player(O5)))and(eY[$F0+UP]<R2I(Bz))then
set H7F="|r"+P[O5]+KY4[O5]+GetObjectName(1496331064)+NG7(N07(O5),true)+" - "+P[UP]+GetUnitName(m5)+"|r"
set h4[$C0+UP]=null
set eY[$F0+UP]=R2I(Bz)+20
call TriggerSleepAction(.4)
if IsUnitAlly(it,Y7[0])then
set LG4=W7
else
set LG4=X7
endif
if B04[16+GetPlayerId(GetLocalPlayer())]and IsPlayerInForce(GetLocalPlayer(),LG4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,H7F)
call SG7(LG4,GetUnitX(m5),GetUnitY(m5),O5)
endif
endif
endif
set it=null
set m5=null
endfunction
function HAF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(OA7(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Y7[0])))!=null
endfunction
function HBF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(OA7(GetTriggerUnit()))and(IsUnitAlly(GetTriggerUnit(),Z7[0])))!=null
endfunction
function HCF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(OA7(GetTriggerUnit()))and(GetOwningPlayer(GetTriggerUnit())==Y7[0])and((GetUnitTypeId(GetTriggerUnit())==1697656914)or(GetUnitTypeId(GetTriggerUnit())==1697657137)or(GetUnitTypeId(GetTriggerUnit())==1697656915)or(GetUnitTypeId(GetTriggerUnit())==1697657145)))!=null
endfunction
function H3F takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(OA7(GetTriggerUnit()))and(GetOwningPlayer(GetTriggerUnit())==Z7[0])and((GetUnitTypeId(GetTriggerUnit())==1966092365)or(GetUnitTypeId(GetTriggerUnit())==1966092356)or(GetUnitTypeId(GetTriggerUnit())==1966092366)or(GetUnitTypeId(GetTriggerUnit())==1966092372)))!=null
endfunction
function H6F takes unit it returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="uav"
if(Q14[32+O5]!=null)then
call Q47(GetHandleId(Q14[32+O5]))
call DestroyTrigger(Q14[32+O5])
endif
set Q14[32+O5]=CreateTrigger()
call QG7(GetHandleId(Q14[32+O5]),"Unit",it)
if(IsUnitAlly(it,Y7[0]))then
call TriggerRegisterUnitInRange(Q14[32+O5],it,1000.,Condition(function HBF))
call TriggerRegisterUnitInRange(Q14[32+O5],it,1000.,Condition(function H3F))
else
call TriggerRegisterUnitInRange(Q14[32+O5],it,1000.,Condition(function HAF))
call TriggerRegisterUnitInRange(Q14[32+O5],it,1000.,Condition(function HCF))
endif
call TriggerAddAction(Q14[32+O5],function HZF)
if(Q14[64+O5]!=null)then
call Q47(GetHandleId(Q14[64+O5]))
call DestroyTrigger(Q14[64+O5])
endif
set Q14[64+O5]=CreateTrigger()
call QG7(GetHandleId(Q14[64+O5]),"Unit",it)
call TriggerAddAction(Q14[64+O5],function GUF)
set Q14[$80+O5]=CreateTrigger()
call TriggerRegisterTimerEvent(Q14[$80+O5],30.,true)
call TriggerAddAction(Q14[$80+O5],function FXF)
call QG7(GetHandleId(Q14[$80+O5]),"u",it)
call DisableTrigger(Q14[$80+O5])
endfunction
function HLF takes nothing returns nothing
call HQF(QA7(GetHandleId(GetTriggeringTrigger()),"Unit"))
endfunction
function ABE takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
if(Q14[32+O5]!=null)then
call Q47(GetHandleId(Q14[32+O5]))
call DestroyTrigger(Q14[32+O5])
endif
set Q14[32+O5]=CreateTrigger()
call QG7(GetHandleId(Q14[32+O5]),"Unit",MQ7)
if(IsUnitAlly(MQ7,Y7[0]))then
call TriggerRegisterUnitInRange(Q14[32+O5],MQ7,1000.,Condition(function HBF))
else
call TriggerRegisterUnitInRange(Q14[32+O5],MQ7,1000.,Condition(function HAF))
endif
call TriggerAddAction(Q14[32+O5],function HLF)
set MQ7=null
endfunction
function xh takes nothing returns nothing
local trigger t=CreateTrigger()
local unit it=GetTriggerUnit()
set LP4="xh"
call QG7(GetHandleId(t),"Unit",it)
if(IsUnitAlly(it,Y7[0]))then
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function HBF))
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function H3F))
else
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function HAF))
call TriggerRegisterUnitInRange(t,it,1000.,Condition(function HCF))
endif
call TriggerAddAction(t,function HZF)
set it=null
endfunction
function H1F takes player H0F,string kf returns nothing
if(Q67(GetHandleId(H0F),kf)!=null)then
call Q47(GetHandleId(Q67(GetHandleId(H0F),kf)))
call DestroyTrigger(Q67(GetHandleId(H0F),kf))
call QG7(GetHandleId(H0F),kf,null)
endif
endfunction
function H5F takes unit it returns nothing
local player pl=GetOwningPlayer(it)
local integer kg=1
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer H2F=0
local boolean H_F=false
set LP4="s4v"
call AZE(O5,it,i1)
if(i1==1211117654)or(i1==1162032951)or(i1==1160785972)or(i1==1429221456)or(i1==1315074670)or(i1==1164799855)or(i1==1311781185)or(i1==1211117649)then
call ExecuteFunc("I4F")
elseif(i1==1160786242)then
call QP7(GetHandleId(GetOwningPlayer(it)),"MGrp",CreateGroup())
elseif(i1==1211117641)then
call ExecuteFunc("I7F")
elseif(i1==1214409837)then
call ExecuteFunc("I8F")
elseif(i1==1328558160)then
call ExecuteFunc("I9F")
elseif(i1==1211117633)then
call ExecuteFunc("IDF")
elseif(i1==1214344551)then
set HC[$F0+O5]=Location(.0,.0)
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
set hG[256+O5]=0
call ExecuteFunc("IEF")
elseif(i1==1212365106)then
call AX7("IFF",GetPlayerController(pl)==MAP_CONTROL_COMPUTER)
endif
if false then
if(i1==1333027688)then
call A67(it,1093686091)
endif
if(i1==1214409837)then
call A67(it,1093679157)
endif
if(i1==1164799603)then
call A67(it,1093752632)
endif
if(i1==1430466872)then
call A67(it,1093687349)
endif
if(i1==1429221424)then
call A67(it,1093687351)
endif
if(i1==1160785970)then
call A67(it,1093747792)
endif
if(i1==1429221446)then
call A67(it,1093678665)
endif
if(i1==1429221451)then
call A67(it,1093678671)
endif
if(i1==1160786242)then
call A67(it,1093683287)
endif
if(i1==1211117641)then
call A67(it,1093684792)
endif
if(i1==1311780946)then
call A67(it,1093685808)
endif
endif
call Q97(GetHandleId(Player(O5)),"AI|Class",N87(i1))
set G97[O5]=true
set G97[112+O5]=false
call DCF(O5,it,false)
if(GQ7 and X_4[O5]==5)then
if(true)then
if(WM7(Player(O5)))then
if(GR7==null)then
set GR7=CreateUnit(Y7[0],HF9(Player(O5)),GetUnitX(IY4)-200.,GetUnitY(IY4)-200.,0)
call HM9(GetPlayerId(Y7[0]),GR7)
endif
set KT4[16+O5]=GR7
else
if(GS7==null)then
set GS7=CreateUnit(Z7[0],HF9(Player(O5)),GetUnitX(JZ4)+200.,GetUnitY(JZ4)+200.,0)
call HM9(GetPlayerId(Z7[0]),GS7)
endif
set KT4[16+O5]=GS7
endif
else
set KT4[16+O5]=CreateUnit(Player(O5),HF9(Player(O5)),GetUnitX(KT4[O5]),GetUnitY(KT4[O5]),0)
call HM9(O5,KT4[16+O5])
endif
endif
if((not L)and GetUnitName(it)!="Bloodrune")then
if(T34==false)then
if(not AL4)then
set KY4[GetPlayerId(pl)]=I2S(i5(pl))+MA7(pl)+Y67(it)
call SetPlayerName(pl,YJ7(pl))
endif
else
if(SubString(KY4[GetPlayerId(pl)],3,$B)=="Computer" or SubString(KY4[GetPlayerId(pl)],4,$C)=="Computer")then
loop
if(AYE(it))then
set H2F=GetRandomInt(1,25)
else
set H2F=GetRandomInt(26,119)
endif
if(TC4[H2F]!="")then
set KY4[GetPlayerId(pl)]="+"+TC4[H2F]
call SetPlayerName(pl,YJ7(pl)+" ("+Y37(it)+")")
set TC4[H2F]=""
set H_F=true
endif
exitwhen(H_F)
endloop
endif
endif
elseif(Bz<150.)and GetUnitName(it)!="Bloodrune" then
set KY4[GetPlayerId(pl)]=I2S(i5(pl))+MA7(pl)+" Computer"
call SetPlayerName(pl,YJ7(pl)+" ("+Y37(G7[GetPlayerId(pl)])+")")
else
set pl=null
return
endif
if(WM7(pl))then
loop
exitwhen(M7[kg]==pl)or(kg>5)
set kg=kg+1
endloop
call MultiboardSetItemValueBJ(R4,1,(kg+2),(P[GetPlayerId(pl)]+(YJ7(pl)+"|r")))
else
loop
exitwhen(O7[kg]==pl)or(kg>5)
set kg=kg+1
endloop
call MultiboardSetItemValueBJ(R4,1,(kg+3+HA4),(P[GetPlayerId(pl)]+(YJ7(pl)+"|r")))
endif
set pl=null
endfunction
function UD takes nothing returns nothing
local unit X77=GetTriggerUnit()
set LP4="UD"
call H1F(GetOwningPlayer(X77),"HasAtkM")
call H1F(GetOwningPlayer(X77),"HasMM")
call H1F(GetOwningPlayer(X77),"HasAM")
call H1F(GetOwningPlayer(X77),"HasOrb")
call H5F(X77)
call H6F(X77)
set X77=null
endfunction
function Uf takes nothing returns nothing
local unit X77=QA7(Q_4,"AIHSwap|U")
set LP4="Uf"
call H1F(GetOwningPlayer(X77),"HasAtkM")
call H1F(GetOwningPlayer(X77),"HasMM")
call H1F(GetOwningPlayer(X77),"HasAM")
call H1F(GetOwningPlayer(X77),"HasOrb")
call H5F(X77)
call H6F(X77)
set X77=null
endfunction
function IGF takes nothing returns boolean
local integer O5=1
local unit m5=null
if not IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)then
return false
endif
set m5=GetDyingUnit()
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if WQ7(Player(O5))then
if h4[O5]==m5 then
set h4[O5]=null
call IssueImmediateOrderById(G7[O5],$D0004)
if GZ[$D0+O5]or G0[256+O5]then
call ZSE(O5,VX7(800.,G7[O5]),false,false)
endif
call J3(G7[O5],false)
endif
endif
set O5=O5+1
endloop
set m5=null
return false
endfunction
function IHF takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE))and(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(GetUnitTypeId(GetAttacker())!=1970107511)and(GetUnitTypeId(GetAttacker())!=1700946284)and(GetUnitTypeId(GetAttacker())!=1966092370)and(GetUnitTypeId(GetAttacker())!=1697657398)and(SC7(GetTriggerUnit())))!=null
endfunction
function IIF takes nothing returns nothing
local unit m5=GetTriggerUnit()
local unit HEF=GetAttacker()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
local integer i1=GetUnitTypeId(m5)
set LP4="IIF"
if O67(O5)then
set m5=null
set HEF=null
return
endif
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(not G0[O5])and(i1!=1211117642))then
if(((GetUnitLifePercent(HEF)>10.)or(P87(800.,HEF,Condition(function k0))>1)or(R2I(GetWidgetLife(m5))<(500+(GetHeroLevel(m5)*30)))or(not Id(O5)))and(not O67(O5)))then
set bj_lastLoadedUnit=m5
if((eY[320+O5]>=0)and(hq[720+O5]>-.05))then
elseif((not OV7(m5))and(((i1!=1214409837)and(i1!=1332898670))or(GetUnitCurrentOrder(m5)!=$D0278))and((i1!=1160786243)or(GetUnitCurrentOrder(m5)!=$D0079))and((i1!=1430466872)or(GetUnitCurrentOrder(m5)!=$D0207)))then
elseif(((MP7(m5)>1500.)and(hq[720+O5]>-.05)and(GetHeroLevel(m5)>$A))or(((i1==1162032181)or(i1==1429221451))and(GZ[384+O5])and(not O37(m5)))or(GZ[256+O5]))then
elseif((GetHeroLevel(m5)>6)and(GetUnitAbilityLevel(HEF,1098282348)==0)and(Id(O5))and(GetUnitState(m5,UNIT_STATE_LIFE)>500+(GetHeroLevel(m5)*30)))then
elseif(h4[O5]!=null and O37(h4[O5])and G0[$80+O5]and MP7(m5)>300. and hq[944+O5]<Bz and P87(600.,m5,Condition(function TI7))>0)then
else
call PV7(m5,$D0012,h9[O5])
if((h4[O5]!=null)and((GetHeroLevel(m5)<6)or(O37(m5))or(not Id(O5))))then
call ZVE(O5,false)
endif
set G0[O5]=true
call TriggerSleepAction(1.)
if((OA7(m5))and(OA7(HEF))and(IsUnitInRange(m5,HEF,1200.))and(G0[O5]))then
call TriggerSleepAction(1.)
endif
set G0[O5]=false
if((OA7(m5))and(OA7(HEF))and(GetUnitCurrentOrder(m5)==$D0012)and(not IsUnitInRange(m5,HEF,1300.))and(P87(800.,HEF,Condition(function k5))>1))then
call J3(m5,true)
endif
endif
elseif((not Id(O5))and(OV7(m5)))then
call IssueTargetOrderById(m5,$D000F,HEF)
endif
elseif((i1==1211117642)or(i1==1966092596)or(i1==1966092597)or(i1==1966092598)or(i1==1966092612)or(i1==1966092613)or(i1==1966092614)or(i1==1697656907)or(i1==1697656905)or(i1==1697656908)or(i1==1848652343)or((GetUnitTypeId(G7[O5])==1211117633)and(i1!=1211117633)))then
call PV7(m5,$D0012,h9[16+O5])
set G0[16+O5]=true
call NX7(1.)
if((OA7(m5))and(OA7(HEF))and(IsUnitInRange(m5,HEF,1300.)))then
call PV7(m5,$D0012,h9[16+O5])
endif
set G0[16+O5]=false
endif
set m5=null
set HEF=null
endfunction
function IJF takes nothing returns boolean
return((QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(IsUnitAlly(GetTriggerUnit(),Y7[0]))and(SC7(GetTriggerUnit())))
endfunction
function IKF takes nothing returns boolean
return((QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])and(IsUnitAlly(GetTriggerUnit(),Z7[0]))and(SC7(GetTriggerUnit())))
endfunction
function IMF takes unit F7F returns nothing
loop
call PV7(GetTriggerUnit(),$D0012,h9[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call TriggerSleepAction(.3)
exitwhen((not OA7(GetTriggerUnit()))or(not OA7(F7F))or(not IsUnitInRange(GetTriggerUnit(),F7F,1200.)))
endloop
endfunction
function INF takes nothing returns nothing
if((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit())))then
set GZ[$80+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
set h4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=null
if(IsUnitAlly(GetTriggerUnit(),Z7[0]))then
call IMF(IY4)
else
call IMF(JZ4)
endif
elseif(not IsUnitIllusion(GetTriggerUnit()))then
call PV7(GetTriggerUnit(),$D0012,h9[16+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endif
endfunction
function IOF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(GetUnitCurrentOrder(GetTriggerUnit())!=$D0012)and(not IsUnitType(GetAttacker(),UNIT_TYPE_STRUCTURE))and(not IsUnitType(GetAttacker(),UNIT_TYPE_HERO)))!=null
endfunction
function IPF takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
set LP4="IPF"
if((Bz<hq[288+O5])or(not is(it))or((G0[$E0+O5]or Bz<hq[672+O5])and O37(it)==false))then
set it=null
return
elseif O67(O5)then
set it=null
return
endif
set hq[288+O5]=Bz+1.
set hq[496+O5]=Bz+1.5
call MoveLocation(Ha,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
set bj_lastLoadedUnit=MC7(IsUnitAlly(it,Y7[0]),IY4,JZ4)
set L84=N37(it,bj_lastLoadedUnit)
if P77(150.,Ha,Condition(function k0))>6 then
call ZPE(it,true)
elseif(L84<900. and L84+NO7(it)>650.)and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER))then
call PV7(it,$D0012,bj_lastLoadedUnit)
else
if(((eY[O5]==3)or(eY[O5]==4))and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER))and(not GZ[$80+O5])and(h4[O5]==null)and(GetUnitCurrentOrder(it)==$D000F)and(not GZ[48+O5])and(N37(it,PL7(it))<6500.))then
if((Bz<hq[784+O5])or(hq[720+O5]<-.1)or((P77(1000.,Ha,Condition(function T87))==0)and(P77(700.,Ha,Condition(function k5))==0)and(P77(600.,Ha,Condition(function k0))>3)))then
call PV7(it,$D0012,bj_lastLoadedUnit)
set G0[48+O5]=true
set hq[768+O5]=Bz+1.
set hq[784+O5]=Bz+5.
endif
endif
if((not(IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER)))and(not GZ[$80+O5])and(h4[O5]==null)and(iU(it))and(hq[512+O5]<Bz))then
if(not O37(it))then
if((eY[O5]<$A)and((R2I(GetUnitState(it,UNIT_STATE_LIFE))<(550+(GetHeroLevel(it)*40)))or((GetHeroLevel(it)<$A)and(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)))))then
call ZPE(it,true)
endif
else
call SJ7(it,false)
endif
elseif((IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER))and(not GZ[$80+O5])and(h4[O5]==null)and(iU(it))and(hq[512+O5]<Bz))then
if(not O37(it))then
if((eY[O5]<$A)and(GetUnitLifePercent(it)<60.)and((P87(300.,GetTriggerUnit(),Condition(function k5))<3)))then
if(not(PD7(it,SU[S2]))and(not(PD7(it,SU[H1])))and(not(PD7(it,SU[O1])))and((GetUnitAbilityLevel(it,1112891766)==0)or(GetUnitAbilityLevel(it,1110454838)==0)or(GetUnitAbilityLevel(it,1110454597)==0))and((P87(1000.,it,Condition(function T87))>0)or(P87(900.,it,Condition(function TK7))>0)))then
call ZPE(it,true)
endif
endif
else
call SJ7(it,false)
endif
elseif((O37(it))and(not Id(O5)))then
call SJ7(it,true)
elseif((GetHeroLevel(it)<6)or((GetUnitLifePercent(it)<60.)and(R2I(GetUnitState(it,UNIT_STATE_LIFE))<(400+(GetHeroLevel(it)*50)))and((h4[O5]==null)or(GetUnitState(h4[O5],UNIT_STATE_LIFE)>(GetUnitState(it,UNIT_STATE_LIFE)+(15.*GetHeroLevel(it)))))))then
if((GetHeroLevel(it)<3)or(P87(500.,GetTriggerUnit(),Condition(function k0))>2))then
set GZ[$80+O5]=false
call ZPE(it,true)
endif
elseif(GetUnitTypeId(it)==1211117643)and(h4[O5]==null)and(N37(it,h9[48+O5])>700)then
set UP=GetUnitCurrentOrder(it)
if(UP==$D0136 or UP==$D0092 or UP==$D0218)then
call ZPE(it,true)
endif
endif
endif
set it=null
endfunction
function IQF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetAttacker()))
set LP4="IQF"
if(WQ7(Player(O5)))and(GetUnitAbilityLevel(GetAttacker(),1110455884)>0)and(Bz>TB4[64+O5])and(h4[O5]==GetTriggerUnit())then
call IssuePointOrderById(G7[O5],$D00D9,GetUnitX(GetAttacker()),GetUnitY(GetAttacker()))
endif
endfunction
function IRF takes nothing returns boolean
if not((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))))then
return false
else
if IsUnitIllusion(GetAttacker())then
call IQF()
return false
endif
endif
return(IsUnitType(GetAttacker(),UNIT_TYPE_HERO))!=null
endfunction
function ISF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(hz)))and(hZ!=GetFilterUnit())and(hz!=GetFilterUnit())and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not O37(GetFilterUnit())))!=null
endfunction
function ITF takes nothing returns nothing
if((not IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO))and(S37(GetEnumUnit()))and(GetUnitCurrentOrder(GetEnumUnit())!=$D0012)and(IsUnitInRange(GetEnumUnit(),hz,1200.)))then
call IssueTargetOrderById(GetEnumUnit(),$D000F,hz)
endif
endfunction
function IUF takes unit MQ7,unit IVF returns nothing
local integer RX7=GetPlayerId(GetOwningPlayer(MQ7))
local integer O5
local unit HJF=null
local boolean J4=false
local integer i=0
local integer FBF=0
local integer j=0
local integer k=0
local boolean IWF=false
local unit IXF=null
local boolean PN7=false
local boolean NK7
set LP4="(udv)"+LP4
if((GetWidgetLife(IVF)>1.)and(MQ7!=null)and(Bz>hq[416+RX7]or(Bz+2.>hq[416+RX7]and(O37(MQ7)or O67(RX7)))))then
set hq[416+RX7]=Bz+5.
set k=GetRandomInt(-1,1)
if k<0 then
set k=0
endif
if O37(MQ7)then
set k=k+1
endif
set NK7=IsUnitAlly(MQ7,Y7[0])
set FBF=M17(NK7,0,6)
set IXF=MC7(NK7,IY4,JZ4)
set IWF=IsUnitInRange(MQ7,IXF,6000.)
set i=1
loop
exitwhen(i>5)
set O5=LS4[80+FBF+i]
if(O5!=-1)and(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)then
set HJF=G7[O5]
set bj_lastLoadedUnit=HJF
set hq[416+O5]=Bz+2.
set J4=false
set PN7=false
if(HJF==null)or(O37(HJF))or(IF4[O5])or(eY[544+O5]!=0)then
elseif(hq[480+O5]>Bz)or(h4[O5]!=null and h4[O5]!=IVF and(N37(MQ7,h4[O5])+300<N37(MQ7,IVF)))then
elseif(not IWF)and(eY[O5]==3 or eY[O5]==4 or Bz<hq[528+O5])then
elseif(IWF and eY[O5]!=2 and IsUnitInRange(HJF,IXF,6000.))then
set J4=true
elseif((IsUnitInRange(MQ7,HJF,3600.))or(eY[80+O5]==eY[80+RX7]))and((hq[624+RX7]>Bz)or(GetUnitLifePercent(MQ7)<80.)or(eY[320+RX7]+j<=k))then
set J4=true
elseif(Bz>hq[320+O5]and(eY[O5]!=9 or(GetUnitLifePercent(MQ7)<70.)))and(eY[320+RX7]+j<=k)and(GetHeroLevel(HJF)>=6)and(N37(MQ7,HJF)>$BB8)and(GetUnitLifePercent(HJF)>70.)and(GetUnitManaPercent(HJF)>30.)and((X_4[O5]==3 and GetRandomInt(1,3)==1)or(X_4[O5]==5))then
set PN7=HFF(O5,HJF,MQ7,true)
endif
if J4 then
if(h4[O5]==IVF)then
if((GetUnitAbilityLevel(IVF,1110454854)==0)and(is(HJF))and(GetUnitCurrentOrder(HJF)!=$D000F))then
call IssueTargetOrderById(HJF,$D000F,IVF)
set PN7=true
endif
elseif((h4[O5]==null)or(hq[464+GetPlayerId(GetOwningPlayer(MQ7))]>Bz)or((GetUnitLifePercent(IVF)+10.)<GetUnitLifePercent(h4[O5])and(GetWidgetLife(IVF)<GetWidgetLife(h4[O5]))))then
set h4[O5]=IVF
if((is(HJF))and(GetUnitAbilityLevel(IVF,1110454854)==0))then
call IssueTargetOrderById(HJF,$D000F,IVF)
set PN7=true
endif
endif
if(hq[624+RX7]>Bz)then
set hq[624+O5]=Bz+20.
endif
endif
if PN7 then
set eY[544+O5]=2
set h9[64+O5]=MQ7
set h4[O5]=IVF
set j=j+1
set hq[576+O5]=Bz+10.
if eY[O5]==9 or eY[O5]==$A then
call XF7(HJF,MQ7)
set eY[O5]=1
endif
endif
endif
set i=i+1
endloop
if(IsUnitInForce(MQ7,QW4))then
call GroupClear(iH)
call GroupEnumUnitsOfPlayer(iH,GetOwningPlayer(MQ7),Q54)
call ForGroup(iH,function ITF)
endif
if eY[320+RX7]+j<0 and Bz>hq[800+RX7]and WQ7(Player(RX7))and O37(MQ7)then
if NK7 then
set LG4=W7
else
set LG4=X7
endif
call SG7(LG4,GetUnitX(MQ7),GetUnitY(MQ7),GetPlayerId(GetOwningPlayer(MQ7)))
set hq[800+RX7]=Bz+15.
endif
endif
set LG4=null
endfunction
function IYF takes nothing returns nothing
local unit J37=GetAttacker()
local unit it=GetTriggerUnit()
local integer O5=0
local real NC7=.0
if GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER and OV7(it)then
set O5=GetPlayerId(GetOwningPlayer(it))
if h4[O5]!=null then
if J37!=h4[O5]then
set hq[944+O5]=Bz+2.
endif
set NC7=NO7(it)
if O37(h4[O5])then
set NC7=NC7+200.
endif
if(N37(it,h4[O5])>NC7-100.)then
call ZVE(O5,true)
endif
endif
endif
if(not IsUnitInForce(J37,QW4))then
call TriggerSleepAction(.2)
call IUF(J37,it)
endif
if(not IsUnitInForce(it,QW4))then
call TriggerSleepAction(.2)
call IUF(it,J37)
endif
set J37=null
set it=null
endfunction
function IZF takes nothing returns boolean
return((GetSpellTargetUnit()!=null)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(not IsUnitInForce(GetSpellTargetUnit(),QW4)))!=null
endfunction
function IAF takes nothing returns nothing
call IUF(GetSpellTargetUnit(),GetTriggerUnit())
endfunction

function IBF takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local unit IVF=GetAttacker()
local unit HJF=null
local player pl=null
local integer RX7
local integer i=0
local integer j
local integer k=0
local real ICF
local integer O5
set LP4="IBF"
set RX7=GetPlayerId(GetOwningPlayer(IVF))
if RX7==GetPlayerId(Y7[0])or RX7==GetPlayerId(Z7[0])then
set j=-1
if((MQ7==JM4)or(MQ7==JR4)or(MQ7==JU4))or((MQ7==J24)or(MQ7==K94)or(MQ7==KF4))then
set j=1
elseif((MQ7==JN4)or(MQ7==JS4)or(MQ7==JV4))or((MQ7==J_4)or(MQ7==KD4)or(MQ7==KG4))then
set j=0
elseif((MQ7==JO4)or(MQ7==JT4)or(MQ7==JW4))or((MQ7==K44)or(MQ7==KE4)or(MQ7==KH4))then
set j=2
elseif((MQ7==JP4)or(MQ7==JP4)or(MQ7==JE4))or((MQ7==K74)or(MQ7==K74)or(MQ7==JC4))then
set j=3
endif
if(j!=-1 or GetWidgetLife(MQ7)<=L34)then
set LE4=IsUnitAlly(MQ7,Y7[0])
set pl=Player(RX7)
if(R77(GetHandleId(MQ7),"AI|Glyph|CD")>Bz)then
elseif(Bz>R77(Q_4,"AI|Glyph|"+M27(LE4,"Sent","Scrg")))then
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(MQ7),GetUnitY(MQ7),900.,null)
loop
set HJF=FirstOfGroup(H8)
exitwhen HJF==null
call GroupRemoveUnit(H8,HJF)
if GetWidgetLife(HJF)<.405 then
elseif IsUnitType(HJF,UNIT_TYPE_HERO)and GetUnitTypeId(HJF)!=1211117642 then
if IsUnitAlly(HJF,pl)then
set k=k+1
else
set k=k-1
endif
elseif MQ7!=HJF and SC7(HJF)and IsUnitInRange(HJF,MQ7,300.)then
if IsUnitAlly(HJF,pl)then
set k=GetUnitTypeId(HJF)
if(k==1969711215 or k==1970169187)or(k==1966092337 or k==1966092338)or(k==1702061422 or k==1701081721)or(k==1697656918 or k==1697656919)then
set i=i+1
elseif(k==1970107511 or k==1966092370)or(k==1700946284 or k==1697657398)then
set i=i+2
else
set i=i+2
endif
else
set i=-99999
endif
endif
endloop
if((LE4 and LA4)or((not LE4)and LB4))then
set bj_forLoopAIndex=425
else
set bj_forLoopAIndex=L34
endif
if(i>0 and i+k*3>8-IMaxBJ(bj_forLoopAIndex-R2I(GetWidgetLife(MQ7)),-100)/25)then
if LE4 then
set LG4=W7
else
set LG4=X7
endif
set i=1
set k=-1
set ICF=99999.
loop
exitwhen i>5
if LE4 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i])
endif
if WQ7(Player(O5))then
if((LE4 and LA4)or((not LE4)and LB4))then
call IssueImmediateOrderById(KT4[O5],$D0114)
exitwhen true
else
if k==-1 then
set k=O5
if G7[O5]!=null and GetWidgetLife(G7[O5])>.405 then
set ICF=N37(MQ7,G7[O5])
endif
else
if G7[O5]!=null and GetWidgetLife(G7[O5])>.405 then
set L84=N37(MQ7,G7[O5])
if L84<ICF then
set k=O5
set ICF=L84
endif
elseif ICF==99999. and GetRandomInt(1,i)==1 then
set k=O5
endif
endif
endif
endif
set i=i+1
endloop
if k!=-1 then
call S97(G7[k],LG4,GetObjectName(1496330547))
call SG7(LG4,GetUnitX(MQ7),GetUnitY(MQ7),k)
call QD7(GetHandleId(MQ7),"AI|Glyph|CD",Bz+60.)
endif
endif
endif
endif
set O5=GetUnitTypeId(IVF)
if j!=-1 and((O5==1969711215 or O5==1970169187)or(O5==1966092337 or O5==1966092338)or(O5==1702061422 or O5==1701081721)or(O5==1697656918 or O5==1697656919))then
set i=1
set L84=99999.
set bj_forLoopAIndex=-1
loop
exitwhen i>5
if RX7==GetPlayerId(Y7[0])then
set O5=GetPlayerId(Z7[i])
else
set O5=GetPlayerId(Y7[i])
endif
if((G7[O5]!=null)and(not O37(G7[O5]))and(GetWidgetLife(G7[O5])>400.)and(eY[O5]==3 or eY[O5]==4)and(LS4[64+O5]==j)and(Bz>hq[672+O5]))then
set ICF=N37(G7[O5],MQ7)
if ICF<L84 then
set L84=ICF
set bj_forLoopAIndex=O5
endif
endif
set i=i+1
endloop
if bj_forLoopAIndex!=-1 then
set O5=bj_forLoopAIndex
set G0[$E0+O5]=true
set LT4[48+O5]=GetAttacker()
if OV7(G7[O5])then
call IssueTargetOrderById(G7[O5],$D000F,LT4[48+O5])
endif
endif
endif
endif
set MQ7=null
set IVF=null
set HJF=null
set pl=null
endfunction

function I3F takes nothing returns boolean
local real I6F=.0
local integer O5
if IsUnitType(GetAttacker(),UNIT_TYPE_HERO)then
set O5=GetPlayerId(GetOwningPlayer(GetAttacker()))
if G0[$E0+O5]and GetTriggerUnit()==LT4[48+O5]then
set G0[$E0+O5]=false
set hq[672+O5]=Bz+2.
endif
elseif IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)and Bz>LC4 then
set LC4=Bz+1.
call IBF()
endif
if(Bz<600.)then
set I6F=130.
elseif(Bz<1200.)then
set I6F=140.
elseif(Bz>1200.)then
set I6F=150.
endif
if(not GZ[320+O5])then
set I6F=I6F/2+$F
endif
return((not IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))and(GetWidgetLife(GetTriggerUnit())<I6F))!=null
endfunction
function ILF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set LP4="(uHv)"+LP4
set h4[96+O5]=GetTriggerUnit()
call DisableTrigger(Q14[O5])
call IssueTargetOrderById(GetEnumUnit(),$D000F,GetTriggerUnit())
call EnableTrigger(Q14[O5])
endfunction
function I1F takes nothing returns boolean
local integer O5
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))then
set O5=GetPlayerId(GetOwningPlayer(GetFilterUnit()))
if((O67(O5))or((h4[304+O5]!=null)and(NO7(GetFilterUnit())+N37(GetTriggerUnit(),h4[304+O5])<N37(GetFilterUnit(),h4[304+O5]))))then
elseif((iU(GetFilterUnit()))and(not Id(O5))and(not O37(GetFilterUnit()))and((h4[96+O5]==null)or(not OA7(h4[96+O5]))or((h4[96+O5]!=null)and(OA7(h4[96+O5]))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(h4[96+O5]))))))then
return((Jw(GetFilterUnit()))and(G0[$80+O5])and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(Bz>hq[496+O5])and((not S67(GetFilterUnit()))or(IsUnitInRange(GetFilterUnit(),GetTriggerUnit(),500.)))and((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))or(GetHeroLevel(GetFilterUnit())<$F)))
endif
endif
return false
endfunction
function I0F takes nothing returns nothing
call GroupClear(iG)
call GroupEnumUnitsInRange(iG,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),800.,Q24)
call ForGroup(iG,function ILF)
endfunction
function I5F takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
if GetKillingUnit()==G7[O5]and(eY[O5]==3 or eY[O5]==4)then
call FMF(G7[O5])
endif
return false
endfunction
function I2F takes nothing returns boolean
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function I_F takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="I_F"
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(i1==1852010091))
endfunction
function J4F takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="J4F"
return((GetOwningPlayer(GetFilterUnit())==Player($C))and(GetWidgetLife(GetFilterUnit())>.405)and(i1==1852534636))
endfunction
function J7F takes nothing returns nothing
if((h0==null)or(GetUnitLevel(GetEnumUnit())>GetUnitLevel(h0))or((GetUnitLevel(GetEnumUnit())==GetUnitLevel(h0))and(GetUnitState(h0,UNIT_STATE_LIFE)<GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE))))then
set h0=GetEnumUnit()
endif
endfunction
function J8F takes unit XD7 returns unit
local boolexpr Ig=Condition(function I2F)
set LP4="AINeutralCampScan"
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(XD7),GetUnitY(XD7),600.,Ig)
call ForGroup(H8,function J7F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function J9F takes unit XD7,integer NS7,integer JDF returns unit
local boolexpr Ig=null
set LP4="AIDoomBringerNeutralCampScan"
if(JDF==1852010091)then
set Ig=Condition(function I_F)
elseif(JDF==1852534636)then
set Ig=Condition(function J4F)
else
set Ig=Condition(function I_F)
endif
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(XD7),GetUnitY(XD7),600.,Ig)
call ForGroup(H8,function J7F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function JEF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(eY[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==1)and(GetHeroLevel(GetTriggerUnit())>3)and(not O37(GetTriggerUnit()))and(not IsUnitIllusion(GetTriggerUnit()))and(GetUnitAbilityLevel(GetTriggerUnit(),1110454874)==0))!=null
endfunction
function JFF takes unit XD7 returns boolean
local integer O5=1
local boolean O6=IsUnitAlly(GetTriggerUnit(),Y7[0])
local boolean JGF=false
local integer JHF=0
local integer JIF=0
set LP4="umv"
if((O6)and(GetHeroLevel(GetTriggerUnit())>$F)and(G2>=0))then
set JIF=P87(1200.,GetTriggerUnit(),Condition(function TN7))
set JGF=JIF>0
elseif((not O6)and(GetHeroLevel(GetTriggerUnit())>$F)and(G1>=0))then
set JIF=P87(1200.,GetTriggerUnit(),Condition(function TN7))
set JGF=JIF>0
endif
loop
if((eY[GetPlayerId(Y7[O5])]==$A)and(h8[48+GetPlayerId(Y7[O5])]==XD7))then
return true
endif
if((eY[GetPlayerId(Z7[O5])]==$A)and(h8[48+GetPlayerId(Z7[O5])]==XD7))then
return true
endif
if((JGF)and(eY[80+GetPlayerId(P57(O5,not O6))]==eY[80+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))then
set JHF=JHF+1
endif
set O5=O5+1
exitwhen O5>5
endloop
if(JGF)then
return JHF>=JIF
endif
return false
endfunction
function JJF takes unit it returns boolean
local integer JKF=0
local boolean J4=true
local unit X77=null
local player pl=GetOwningPlayer(it)
set LP4="uqv"
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(it),GetUnitY(it),1600.,Q54)
loop
set X77=FirstOfGroup(H8)
exitwhen((X77==null)or(not J4))
if((not OA7(X77))or(not S37(X77)))then
elseif(IsUnitEnemy(X77,pl))then
if((IsUnitType(X77,UNIT_TYPE_HERO))or(IsUnitType(X77,UNIT_TYPE_STRUCTURE)))then
set J4=false
elseif(((GetOwningPlayer(X77)==Y7[0])or(GetOwningPlayer(X77)==Z7[0]))and(IsUnitInRange(X77,it,1200.)))then
set JKF=JKF+1
set J4=JKF<=3
endif
endif
call GroupRemoveUnit(H8,X77)
endloop
set pl=null
return J4
endfunction
function JMF takes unit JNF,unit WU7 returns unit
local integer O5=GetPlayerId(GetOwningPlayer(WU7))
set LP4="AIDoomBringerJungleFarm"
if(JNF==h7[$D3]or JNF==h7[$D4])then
if(GetHeroLevel(WU7)>7)then
if(J9F(h7[262],O5,1852010091)!=null)then
return h7[262]
elseif(J9F(h7[260],O5,1852010091)!=null)then
return h7[260]
elseif(J9F(h7[$FD],O5,1852010091)!=null)then
return h7[$FD]
elseif(J9F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[262]
endif
else
if(J9F(h7[262],O5,1852534636)!=null)then
return h7[262]
elseif(J9F(h7[260],O5,1852534636)!=null)then
return h7[260]
elseif(J9F(h7[$FD],O5,1852534636)!=null)then
return h7[$FD]
elseif(J9F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[260]
endif
endif
elseif(JNF==h7[$D5])then
if(GetHeroLevel(WU7)>7)then
if(J9F(h7[257],O5,1852010091)!=null)then
return h7[257]
elseif(J9F(h7[259],O5,1852010091)!=null)then
return h7[259]
elseif(J9F(h7[261],O5,1852010091)!=null)then
return h7[261]
else
return h7[257]
endif
else
if(J9F(h7[261],O5,1852534636)!=null)then
return h7[261]
elseif(J9F(h7[259],O5,1852534636)!=null)then
return h7[259]
else
return h7[261]
endif
endif
elseif((JNF==h7[$DD])or(JNF==h7[$DE]))then
if(GetHeroLevel(WU7)>7)then
if(J9F(h7[$FE],O5,1852010091)!=null)then
return h7[$FE]
elseif(J9F(h7[$FF],O5,1852010091)!=null)then
return h7[$FF]
else
return h7[$FE]
endif
else
if(J9F(h7[$FE],O5,1852534636)!=null)then
return h7[$FE]
elseif(J9F(h7[$FF],O5,1852534636)!=null)then
return h7[$FF]
else
return h7[$FE]
endif
endif
elseif(JNF==h7[$DF])then
if(GetHeroLevel(WU7)>7)then
if((IsUnitAlly(WU7,Z7[0])))then
if(J9F(h7[$FE],O5,1852010091)!=null)then
return h7[$FE]
elseif(J9F(h7[$FF],O5,1852010091)!=null)then
return h7[$FF]
else
return h7[$FF]
endif
endif
else
if((IsUnitAlly(WU7,Z7[0])))then
if(J9F(h7[$FE],O5,1852534636)!=null)then
return h7[$FE]
elseif(J9F(h7[$FF],O5,1852534636)!=null)then
return h7[$FF]
else
return h7[$FF]
endif
endif
endif
elseif(JNF==h7[$E7])then
if(GetHeroLevel(WU7)>7)then
if((IsUnitAlly(WU7,Y7[0])))then
if(J9F(h7[$FD],O5,1852010091)!=null)then
return h7[$FD]
elseif(J9F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[$FD]
endif
endif
else
if((IsUnitAlly(WU7,Y7[0])))then
if(J9F(h7[$FD],O5,1852534636)!=null)then
return h7[$FD]
elseif(J9F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[$FD]
endif
endif
endif
elseif((JNF==h7[$E8])or(JNF==h7[$E9]))then
if(GetHeroLevel(WU7)>7)then
if((IsUnitAlly(WU7,Y7[0])))then
if(J9F(h7[256],O5,1852010091)!=null)then
return h7[256]
elseif(J9F(h7[258],O5,1852010091)!=null)then
return h7[258]
else
return h7[256]
endif
endif
else
if((IsUnitAlly(WU7,Y7[0])))then
if(J9F(h7[256],O5,1852534636)!=null)then
return h7[256]
elseif(J9F(h7[258],O5,1852534636)!=null)then
return h7[258]
else
return h7[256]
endif
endif
endif
elseif(JNF==h7[$EA])then
if(GetHeroLevel(WU7)>7)then
if(J9F(h7[258],O5,1852010091)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852010091)!=null)then
return h7[256]
else
return h7[258]
endif
else
if(J9F(h7[258],O5,1852534636)!=null)then
return h7[258]
elseif(J9F(h7[256],O5,1852534636)!=null)then
return h7[256]
else
return h7[258]
endif
endif
endif
return null
endfunction
function JOF takes unit it,unit JPF,integer j returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1=GetUnitTypeId(it)
local integer UP
local unit JQF=null
local unit m5=null
local boolean JRF=false
local boolean JSF=false
local boolean JTF=(i1==1211117633)or(i1==1429221443)or(i1==1332766568)or(i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194)or(i1==1430467634)
set LP4="JUF"
if O37(it)or((Bz>hq[528+O5]and Bz>hq[320+O5]and Bz>hq[480+O5]and Bz>hq[576+O5]))==false then
return false
endif
call MoveLocation(Ha,GetUnitX(it),GetUnitY(it))
if((not iy(it))or(not JJF(it))or((GetHeroLevel(it)<7)and(i1!=1429221443)and(i1!=1332766568)and(i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517)and(i1!=1430467634)))then
set JRF=false
elseif(i1==1211117633)then
set UP=IH(GetOwningPlayer(it),Condition(function ZV9))
set JRF=(Bz>hq[O5])and(GetUnitManaPercent(it)>20.)and(UP<(GetUnitAbilityLevel(it,1093810260)-1))
set JSF=(UP>0)and(GetHeroLevel(it)>$C)and(GetUnitLifePercent(it)>75.)
elseif(((IsUnitAlly(it,Y7[0]))and(not Gv))or((IsUnitAlly(it,Z7[0]))and(not Gw))or(Bz<hq[528+O5]))then
set JRF=false
elseif(i1==1429221443)then
if(GetHeroLevel(it)<18)then
set JRF=true
else
set JRF=(GetRandomInt(1,6)==1 or(j!=0))
endif
set JSF=GetHeroLevel(it)>$A
elseif((i1==1432646245)and(not AW7()))then
set JRF=false
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set JRF=(GetUnitManaPercent(it)>50.)and(Bz>hq[O5])
elseif(PD7(it,SU[N6]))then
set JRF=(Bz>hq[$90+O5])and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
if((not JRF)and(i1==1164799855))then
if(GetHeroLevel(it)<18)then
set JRF=(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
else
set JRF=(GetRandomInt(1,8)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
endif
endif
elseif((i1==1160786241)or(i1==1211117643)or(i1==1332963428)or(i1==1433105516)or(X_4[GetPlayerId(GetOwningPlayer(it))]==1)or((GetHeroLevel(it)>20)and(Bz>2700.))or(GetHeroLevel(it)>=25))then
set JRF=false
elseif(i1==1164799855)then
if(GetHeroLevel(it)<18)then
set JRF=(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
else
set JRF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)and(Bz>hq[O5])
endif
elseif(i1==1430467634)then
if(((GetUnitAbilityLevel(it,1093750832)==0)and(GetHeroLevel(it)>7))or(((GetUnitAbilityLevel(it,1395667021)==0)and(GetHeroLevel(it)<8))))then
set JRF=true
else
if(GetHeroLevel(it)<$D)then
set JRF=(GetRandomInt(1,3)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
elseif(GetHeroLevel(it)<16)then
set JRF=(GetRandomInt(1,5)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
else
set JRF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>75.)
endif
endif
if((JRF)and(Bz<TB4[16+O5])or((TB4[16+O5]-Bz)>5))then
set JRF=false
endif
elseif(i1==1214409837)then
set JRF=(GetHeroLevel(it)<$F)and(GetRandomInt(1,2)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(Bz>hq[O5])and(GetUnitLifePercent(it)>85.)
elseif(i1==1164666213)then
if(GetHeroLevel(it)<18)then
set JRF=(GetRandomInt(1,2)==1 or(j!=0))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.)and(GetUnitLifePercent(it)>70.)and(Bz>hq[O5])
else
set JRF=(GetRandomInt(1,$A)==1 or(j!=0))and(GetUnitManaPercent(it)>40.)and(GetUnitLifePercent(it)>70.)and(Bz>hq[O5])
endif
elseif((i1==1215722344)or(i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)or(i1==1215657064)or((i1==1313026096)and(GetHeroLevel(it)>$B))or(PD7(it,SU[H1]))or(PD7(it,SU[S2]))or(PD7(it,SU[O1]))or(PD7(it,SU[DF4])))then
if(GetHeroLevel(it)<18)then
set JRF=(GetRandomInt(1,2)==1 or(j!=0))
else
set JRF=(GetRandomInt(1,6)==1 or(j!=0))
endif
set JSF=(GetHeroLevel(it)>$A)and(i1!=1164277353)and(i1!=1164277357)and(i1!=1160786518)and(i1!=1160786519)and(i1!=1160786517)
elseif((GetHeroLevel(it)>8)and(GetUnitLifePercent(it)>90.)and(GetUnitManaPercent(it)>50.))then
if(GetHeroLevel(it)>=18)then
set JRF=false
elseif(((kq(i1))and(i1!=1160786242)and(i1!=1433631084)and(i1!=1212365106)and(i1!=1332179560))or(i1==1211117640)or(i1==1429221445))then
set JRF=(GetRandomInt(1,3)==1 or(j!=0))
else
set JRF=(GetHeroLevel(it)>$B)and(GetRandomInt(1,5)==1 or(j!=0))
endif
endif
if(JRF)then
if(j!=0)then
set JQF=h7[j]
elseif(JPF==h7[$D3])then
if((IsUnitAlly(it,Y7[0]))or(JTF))then
set JQF=h7[262]
endif
elseif(JPF==h7[$D4])then
if(((JSF)and(GetHeroLevel(it)>$F))or((GetHeroLevel(it)>20)and(GetUnitLifePercent(it)>80.)))then
set JSF=true
set JQF=h7[$FC]
set m5=J8F(JQF)
if(m5==null)then
set JQF=h7[260]
endif
elseif((IsUnitAlly(it,Y7[0]))or(JTF))then
set JQF=h7[260]
endif
elseif(JPF==h7[$D5])then
if((IsUnitAlly(it,Z7[0]))or(JTF))then
set JQF=h7[261]
set m5=J8F(JQF)
if(m5==null)then
set JQF=h7[259]
endif
endif
elseif((JPF==h7[$DD])or(JPF==h7[$DE]))then
set JQF=h7[$FE]
elseif(JPF==h7[$DF])then
if((IsUnitAlly(it,Z7[0]))or(JTF))then
set JQF=h7[257]
set m5=J8F(JQF)
if((m5==null)or((not JSF)and((IsUnitType(m5,UNIT_TYPE_ANCIENT))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)))))then
set JQF=h7[$FF]
endif
endif
elseif(JPF==h7[$E7])then
if((IsUnitAlly(it,Y7[0]))or(JTF))then
set JQF=h7[$FD]
endif
elseif((JPF==h7[$E8])or(JPF==h7[$E9]))then
set JQF=h7[256]
elseif(JPF==h7[$EA])then
if((IsUnitAlly(it,Z7[0]))or(JTF))then
set JQF=h7[258]
endif
elseif(JPF==h7[$EB])then
set JQF=h7[$FB]
set JSF=((JSF)and(GetHeroLevel(it)>$F))or((GetHeroLevel(it)>20)and(GetUnitLifePercent(it)>80.))
else
set JQF=null
endif
if((i1==1430467634)and(((GetHeroLevel(it)>7)and(GetUnitAbilityLevel(it,1093750832)==0))or((GetHeroLevel(it)<8)and(GetUnitAbilityLevel(it,1395667021)==0))))then
set JQF=JMF(JPF,it)
endif
set m5=J8F(JQF)
if((m5==null)or(JFF(JQF)))then
set JRF=false
elseif((IsUnitType(m5,UNIT_TYPE_ANCIENT))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)))then
set JRF=JSF
endif
set JRF=((JQF!=null)and(JRF))
if JRF then
set h8[48+O5]=JQF
set h8[32+O5]=JPF
set h4[64+O5]=m5
call SI7(it,"Jungling")
set eY[O5]=$A
set hq[432+O5]=Bz+40.
if j==0 then
if GetRandomInt(0,1)==0 then
set eY[384+O5]=-1
else
set eY[384+O5]=1
endif
endif
endif
endif
set it=null
set JPF=null
set m5=null
set JQF=null
return JRF
endfunction
function JUF takes nothing returns nothing
call JOF(GetTriggerUnit(),QA7(GetHandleId(GetTriggeringTrigger()),"CrpRect"),0)
endfunction
function JVF takes integer EQF returns nothing
local trigger t=CreateTrigger()
set LP4="uUv"
call TriggerRegisterUnitInRange(t,h7[EQF],400.,Q54)
call QG7(GetHandleId(t),"CrpRect",h7[EQF])
call TriggerAddCondition(t,Condition(function JEF))
call TriggerAddAction(t,function JUF)
endfunction
function JWF takes nothing returns nothing
call JVF($D3)
call JVF($D4)
call JVF($D5)
call JVF($DD)
call JVF($DE)
call JVF($DF)
call JVF($E7)
call JVF($E8)
call JVF($E9)
call JVF($EA)
call JVF($EB)
endfunction
function JXF takes nothing returns boolean
return((GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and((CC7(GetFilterUnit()))or(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)))and IsUnitIllusion(GetFilterUnit())==false)!=null
endfunction
function JYF takes unit XD7 returns unit
local boolexpr Ig=Condition(function I2F)
set LP4="AINeutralCampScan"
set h0=null
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(XD7),GetUnitY(XD7),500.,Ig)
call ForGroup(H8,function J7F)
call DestroyBoolExpr(Ig)
set Ig=null
return h0
endfunction
function JZF takes nothing returns boolean
local integer JAF=GetHandleId(GetTriggeringTrigger())
local unit u
local unit m5
local boolean J4
local real dT
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if eY[O5]!=$A then
return false
else
set u=GetTriggerUnit()
set m5=MC7(h4[64+O5]!=null and IsUnitInRange(u,h4[64+O5],600),h4[64+O5],JYF(h7[LW4[JAF-IC7]]))
if m5==null then
call JOF(u,h7[LW4[JAF-IC7]],0)
set m5=h4[64+O5]
endif
set J4=(m5!=null)and IssueTargetOrderById(u,$D000F,m5)
if J4 and(not IsUnitVisible(m5,GetOwningPlayer(u)))then
set dT=TimerGetElapsed(V)
loop
exitwhen(TimerGetElapsed(V)-dT)>=4+N77(LH7(u)==false,2,6)or eY[O5]!=$A or(IssueTargetOrderById(u,$D000F,m5)and LH7(u)==false and IsUnitVisible(m5,GetOwningPlayer(u)))
call TriggerSleepAction(1)
set J4=IssueTargetOrderById(u,$D0278,m5)or IssueTargetOrderById(u,$D000F,m5)
if GetUnitAbilityLevel(u,1093677130)>0 or GetUnitTypeId(u)==1212365106 then
call BJDebugMsg("Debuf for SA jungling")
call BJDebugMsg("Zero Point "+R2S(dT)+" CurrentTime: "+R2S(TimerGetElapsed(V)))
call BJDebugMsg("TargetName "+GetUnitName(m5)+" Range: "+R2S(N37(m5,u)))
call BJDebugMsg("IsTargetVisible "+M27(IsUnitVisible(m5,GetOwningPlayer(u)),"Yes","No"))
endif
endloop
endif
set u=null
set m5=null
endif
return false
endfunction
function JBF takes nothing returns nothing
local integer i=0
loop
exitwhen i>9
call TriggerAddCondition(IB7[i],Condition(function JZF))
call TriggerRegisterUnitInRange(IB7[i],h7[LW4[i]],$E1,Condition(function JXF))
set i=i+1
endloop
endfunction
function JCF takes nothing returns nothing
local item ON7=GetEnumItem()
local integer i1
if(GetWidgetLife(ON7)<=.405)then
else
set LF4=GetItemPlayer(ON7)
set i1=OK7(ON7)
if(not IsVisibleToPlayer(GetItemX(ON7),GetItemY(ON7),Player(GI7)))and(i1!=T0 and i1!=A5 and i1!=B5 and i1!=LV)then
elseif IsPlayerAlly(LF4,Player(GI7))and((IsUnitInRangeLoc(h9[16+GI7],PU7(ON7),700)and(i1!=A5 and i1!=B5 and i1!=LV))or(IsUnitInRangeLoc(KT4[GetPlayerId(LF4)],PU7(ON7),100))or((LF4!=Player(GI7))and(not IF4[GetPlayerId(LF4)])and(IsUnitInRangeXY(G7[GetPlayerId(LF4)],GetItemX(ON7),GetItemY(ON7),700))))then
elseif IsUnitInRangeLoc(GG7,PU7(ON7),700)and(IsUnitType(bj_lastCreatedUnit,UNIT_TYPE_MELEE_ATTACKER))then
else
set L94=N37(G7[GI7],ON7)
if(Hu==null)or(i1==T0 or i1==A5 or i1==B5)or(L94<L84 and(GH7!=T0 and GH7!=A5 and GH7!=B5))then
set Hu=ON7
set GH7=i1
set L84=L94
endif
endif
endif
set ON7=null
endfunction
function J3F takes unit it returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
local boolean J6F=false
local integer i1=0
local integer L9E=0
set LP4="aiRespondDroppedItem_uyv"
if eY[528+O5]>3 or Bz<G77[$A0+O5]then
set G47[336+O5]=null
set eY[528+O5]=0
return false
elseif((G47[336+O5]!=null)and((not IsItemVisible(G47[336+O5]))or(GetWidgetLife(G47[336+O5])<=.405)or(not IsUnitInRangeXY(it,GetItemX(G47[336+O5]),GetItemY(G47[336+O5]),800.))))then
set G47[336+O5]=null
endif
if G47[320+O5]!=null and GetWidgetLife(G47[320+O5])<=0 then
set G47[320+O5]=null
endif
if(G47[336+O5]==null)then
set eY[528+O5]=1
if G47[320+O5]==null then
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set Hu=null
set bj_lastCreatedUnit=it
set GI7=O5
set GH7=0
set L84=$F423F
if IsUnitAlly(it,Y7[0])then
set GG7=JZ4
else
set GG7=IY4
endif
call EnumItemsInRect(He,Q54,function JCF)
set G47[336+O5]=Hu
else
set Hu=G47[320+O5]
endif
else
set Hu=G47[336+O5]
set eY[528+O5]=eY[528+O5]+1
endif
if((Hu!=null)and(iU(it)))then
set i1=GH7
set L9E=GetItemTypeId(Hu)
set LF4=GetItemPlayer(Hu)
if((L9E==1227894859)or(L9E==1227894838)or(L9E==1227894840)or(L9E==1227894858)or(L9E==1227894839))then
elseif Hu==G47[320+O5]then
set J6F=true
elseif(i1==T0 or i1==A5 or i1==B5)and(CZE(O5,it)!=-1 and bj_forLoopBIndexEnd<100)then
elseif IsPlayerEnemy(Player(O5),LF4)and(not B28(i1))and(i1!=LV and i1!=EW)then
set J6F=true
elseif LF4!=Player(O5)and(not B28(i1))and(not BYE(i1))and(HJ4[i1]<500)then
set J6F=true
elseif(i1==LV or i1==EW)and(PM7(it,SU[LV]))then
set J6F=true
elseif(not PE7(it))then
elseif(CZE(O5,it)!=-1)then
if(BCE(O5,null,Hu,i1,false)<BCE(O5,null,bj_lastCreatedItem,OK7(bj_lastCreatedItem),false))then
set J6F=true
endif
elseif CAE(O5,it)then
else
set J6F=true
endif
if(not J6F)then
if IsUnitInRangeLoc(GG7,PU7(Hu),700)then
else
set J4=(IssueTargetOrderById(it,$D0003,Hu))
set G77[288+O5]=i1
endif
else
if IsUnitInRangeLoc(GG7,PU7(Hu),700)and(IsUnitType(it,UNIT_TYPE_MELEE_ATTACKER))then
else
set J4=(IssueTargetOrderById(it,$D000F,Hu))
endif
endif
if J4 then
set hq[832+O5]=Bz+(N67(GetUnitX(it),GetUnitY(it),GetItemX(Hu),GetItemY(Hu))/GetUnitMoveSpeed(it))+1.
endif
if(not J4)then
set G47[336+O5]=null
endif
endif
set Hu=null
return J4
endfunction
function JLF takes nothing returns nothing
set L94=N37(GetEnumDestructable(),LD4)
if((H0==null or L94<L84)and(GetWidgetLife(GetEnumDestructable())>.5))then
set H0=GetEnumDestructable()
set L84=L94
endif
endfunction
function J1F takes unit it returns boolean
set H0=null
set LD4=it
set L84=$F423F
call SetRect(He,GetUnitX(it)-450.,GetUnitY(it)-450.,GetUnitX(it)+450.,GetUnitY(it)+450.)
call EnumDestructablesInRect(He,Condition(function K8),function JLF)
return((H0!=null)and(UnitUseItemTarget(it,PH7(it,SU[QC]),H0)))
endfunction
function J0F takes integer O5,boolean O6 returns nothing
if(not O6)then
if(h8[32+O5]==h7[$D5])then
set h8[32+O5]=h7[17]
elseif(h8[32+O5]==h7[$D4])then
if(h8[48+O5]==h7[$FC])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[$F]
else
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[$F]
endif
elseif(h8[32+O5]==h7[$D3])then
set h8[32+O5]=h7[$D]
elseif(h8[32+O5]==h7[$DF])then
set h8[32+O5]=h7[38]
elseif(h8[32+O5]==h7[$DE])then
set h8[32+O5]=h7[37]
elseif(h8[32+O5]==h7[$DD])then
set h8[32+O5]=h7[36]
call XE7(GetEnumUnit(),$87)
elseif(h8[32+O5]==h7[$EB])then
set h8[32+O5]=h7[59]
elseif(h8[32+O5]==h7[$EA])then
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[58]
elseif(h8[32+O5]==h7[$E9])then
set h8[32+O5]=h7[$EA]
elseif(h8[32+O5]==h7[$E8])then
set h8[32+O5]=h7[56]
call XE7(GetEnumUnit(),$9B)
elseif(h8[32+O5]==h7[$E7])then
set h8[32+O5]=h7[54]
endif
elseif(O6)then
if(h8[32+O5]==h7[$D5])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[$D]
elseif(h8[32+O5]==h7[$D4])then
set h8[32+O5]=h7[$C]
elseif(h8[32+O5]==h7[$D3])then
set h8[32+O5]=h7[$B]
elseif(h8[32+O5]==h7[$DF])then
set h8[32+O5]=h7[36]
elseif(h8[32+O5]==h7[$DE])then
set h8[32+O5]=h7[$DD]
call XE7(GetEnumUnit(),35)
elseif(h8[32+O5]==h7[$DD])then
set h8[32+O5]=h7[315]
set h9[32+O5]=h7[33]
elseif(h8[32+O5]==h7[$EB])then
set h8[32+O5]=h7[325]
set h9[32+O5]=h7[56]
elseif(h8[32+O5]==h7[$EA])then
set h9[32+O5]=h7[56]
elseif(h8[32+O5]==h7[$E9])then
set h8[32+O5]=h7[54]
call XE7(GetEnumUnit(),55)
elseif(h8[32+O5]==h7[$E8])then
set h8[32+O5]=h7[53]
elseif(h8[32+O5]==h7[$E7])then
set h8[32+O5]=h7[52]
endif
endif
endfunction
function J5F takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(not kD(GetFilterUnit()))and(GetWidgetLife(GetFilterUnit())>.405))!=null
endfunction
function J2F takes location b5 returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local unit m5=h4[64+O5]
local integer i1
local boolean J4=false
local integer J_F=0
local integer i
local integer j
local integer k
local integer K4F
set LP4="aiJungleAct_u3v"
if(P87(900.,h8[32+O5],Condition(function J5F))>0)then
call J0F(O5,IsUnitAlly(it,Y7[0]))
endif
if((O37(it))or(P77(900.,b5,Condition(function k6))>0))then
set eY[O5]=1
set hq[544+O5]=Bz+30.
set h4[64+O5]=null
call J0F(O5,IsUnitAlly(it,Y7[0]))
call J3(it,false)
if((not O37(it))and(h4[O5]==null)and(G0[256+O5]))then
set LK4=P47(900.,b5,Condition(function k6))
if(LK4!=null)then
call ZSE(O5,LK4,true,false)
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
endif
set it=null
set m5=null
return
endif
set J_F=P87(600.,h8[48+O5],Condition(function I2F))
if J_F==0 then
set i1=GetUnitTypeId(it)
set j=GetHeroLevel(it)
if ND7(i1,1)or ND7(i1,2)then
if j<$C then
set i=0
else
set i=GetRandomInt(0,(j-$C)/2)
endif
elseif ND7(i1,3)then
set i=GetRandomInt(0,2)
else
set i=GetRandomInt(0,3)
endif
if i==0 then
set i=0
loop
exitwhen(i>9)or(h8[48+O5]==h7[LW4[i]])
set i=i+1
endloop
set K4F=i
set j=0
set k=eY[384+O5]
loop
if i==0 or i==4 or i==5 or i==9 then
set k=-k
set eY[384+O5]=k
set i=K4F
endif
set i=i+k
exitwhen(j>5)or(JOF(it,h8[48+O5],LW4[i]))
set j=j+1
endloop
set J_F=P87(600.,h8[48+O5],Condition(function I2F))
endif
endif
if(J_F==0)then
set GZ[336+O5]=false
if(h8[48+O5]!=h8[32+O5])then
set h8[48+O5]=h8[32+O5]
call J3(it,false)
endif
if(N37(h8[32+O5],it)<400.)then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
endif
elseif(h8[48+O5]!=h8[32+O5])and(N37(h8[48+O5],it)<400.)then
set bj_lastLoadedUnit=P47(600.,PU7(h8[48+O5]),Condition(function I2F))
set LP4="(J01)"+LP4
if(not GZ[336+O5])and is(it)then
set GZ[336+O5]=IssueTargetOrderById(it,$D000F,bj_lastLoadedUnit)
endif
set J4=true
endif
if(J_F==0)or J4 then
elseif((m5!=null)and(OA7(m5))and(GetOwningPlayer(m5)==GetOwningPlayer(it)))then
set LP4="(J02)"+LP4
if(is(it))then
call PV7(it,$D000F,h8[48+O5])
endif
call PV7(m5,$D000F,h8[48+O5])
elseif(GetUnitTypeId(GetEnumUnit())==1211117633)then
if((m5==null)or(not OA7(m5)))then
call PV7(it,$D000F,h8[48+O5])
elseif(GetOwningPlayer(m5)!=GetOwningPlayer(it))then
set J4=((not IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0003,m5)))or(PW7(it,$D00A3,1093810260,m5))or(PV7(it,$D000F,h8[48+O5]))
endif
elseif(GetUnitTypeId(GetEnumUnit())==1164799855)then
if((m5==null)or(not OA7(m5)))then
call PV7(it,$D000F,h8[48+O5])
elseif(GetOwningPlayer(m5)!=GetOwningPlayer(it))then
set J4=((not IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0003,m5)))or(PW7(it,$D006B,1093682264,m5)or(PV7(it,$D000F,h8[48+O5])))
endif
elseif(is(it))then
if((h4[64+O5]==null)or(not OA7(h4[64+O5]))or(not IsUnitInRange(it,h4[64+O5],800.)))then
set h4[64+O5]=O27(800.,b5,Condition(function I2F))
endif
set m5=h4[64+O5]
if((m5!=null)and(GetWidgetLife(m5)>.405)and(PD7(it,SU[H1])))then
set LP4="(J06)"+LP4
set i1=GetUnitTypeId(m5)
set J4=(((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(UnitUseItemTarget(it,PH7(it,SU[H1]),m5)))
elseif((m5!=null)and(GetWidgetLife(m5)>.405)and(PD7(it,SU[N6])))then
set LP4="(J07)"+LP4
set i1=GetUnitTypeId(m5)
set J4=((i1!=1852534626)and(i1!=1852272243)and(i1!=1852534644)and(UnitUseItemTarget(it,PH7(it,SU[N6]),m5)))
endif
if(not J4)then
set LP4="(J08)"+LP4
set J4=((m5!=null)and(IssueTargetOrderById(it,$D000F,m5)))or(PV7(it,$D000F,h8[48+O5]))
endif
endif
set it=null
set m5=null
endfunction
function K7F takes unit u returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(u))
local integer UP=0
set LP4="ynv"
if(O37(u))then
if OV7(u)then
call PV7(u,$D0012,h9[O5])
endif
else
if(N37(u,PL7(u))<12000.)then
if(not IsUnitAlly(u,Y7[0]))then
set UP=100
endif
if(h9[16+O5]==h7[35])then
set h8[16+O5]=h7[35+UP]
set h8[O5]=h7[35+UP]
elseif(h9[16+O5]==h7[55])then
set h8[16+O5]=h7[55+UP]
set h8[O5]=h7[55+UP]
elseif(h9[16+O5]==h7[$E])then
set h8[16+O5]=h7[$E+UP]
set h8[O5]=h7[$E+UP]
endif
set h9[O5]=PL7(u)
set h9[16+O5]=PL7(u)
endif
if OV7(u)then
call PV7(u,$D000F,h8[O5])
endif
set eY[O5]=1
set G0[32+O5]=false
set hq[528+O5]=Bz+60.
set hq[592+O5]=Bz+180.
endif
endfunction
function K8F takes nothing returns nothing
if(GetItemTypeId(GetEnumItem())==RU[T0])and(GetWidgetLife(GetEnumItem())>.405)then
set Hu=GetEnumItem()
endif
endfunction
function K9F takes nothing returns nothing
local real NC7=Bz+3.
local unit m5=null
local integer i=1
local integer j
local integer NN7
local integer k
local integer O5=0
local unit MQ7=null
local unit HJF=null
local item ON7=null
local player pl=null
local boolean PN7=true
local boolean J4=true
if not(GetUnitTypeId(GetDyingUnit())==1848651852)then
return
endif
set MQ7=GetKillingUnit()
set pl=GetOwningPlayer(MQ7)
set m5=GetDyingUnit()
loop
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i-5])
endif
if(G7[O5]!=null)and(GetWidgetLife(G7[O5])>.405)and(IsUnitInRange(G7[O5],m5,1200.))then
if(IsUnitEnemy(G7[O5],pl))and(IsUnitVisible(G7[O5],pl))then
set NC7=.1
exitwhen true
endif
endif
set i=i+1
endloop
exitwhen Bz>NC7
call TriggerSleepAction(.3)
endloop
call SetRect(He,GetUnitX(m5)-600.,GetUnitY(m5)-600.,GetUnitX(m5)+600.,GetUnitY(m5)+600.)
set Hu=null
call EnumItemsInRect(He,Q54,function K8F)
if Hu!=null then
set MQ7=null
set HJF=null
set j=0
set NN7=0
set k=0
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i-5])
endif
if(G7[O5]!=null)and(GetWidgetLife(G7[O5])>.405)and(WQ7(Player(O5)))and(IsUnitInRange(G7[O5],m5,1000.)and(IsVisibleToPlayer(GetItemX(Hu),GetItemY(Hu),Player(O5))))then
set NN7=Q[O5]+FU[O5]
if(IsUnitAlly(G7[O5],pl))then
if MQ7==null or(j<NN7)then
if(not PE7(G7[O5]))or(CAE(O5,G7[O5]))then
set PN7=false
set MQ7=G7[O5]
set j=NN7
elseif PN7 then
set MQ7=G7[O5]
set j=NN7
endif
endif
else
if HJF==null or(k<NN7)then
if(not PE7(G7[O5]))or(CAE(O5,G7[O5]))then
set J4=false
set HJF=G7[O5]
set k=NN7
elseif J4 then
set HJF=G7[O5]
set k=NN7
endif
endif
endif
endif
set i=i+1
endloop
endif
set i=1
loop
exitwhen i>$A
if i<=5 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i-5])
endif
if eY[O5]==$B then
call K7F(G7[O5])
endif
set i=i+1
endloop
if Hu!=null then
set G47[336+GetPlayerId(GetOwningPlayer(MQ7))]=Hu
set G47[336+GetPlayerId(GetOwningPlayer(HJF))]=Hu
set DN7=Bz+3.
loop
exitwhen IsItemOwned(Hu)or GetWidgetLife(Hu)<.405 or((MQ7!=null and GetWidgetLife(MQ7)<.405)and(HJF!=null and GetWidgetLife(HJF)<.405))
if MQ7!=null and GetWidgetLife(MQ7)>.405 then
if PN7 then
call IssueTargetOrderById(MQ7,$D000F,Hu)
else
call IssueTargetOrderById(MQ7,$D0003,Hu)
endif
endif
if HJF!=null and GetWidgetLife(HJF)>.405 then
if J4 then
call IssueTargetOrderById(HJF,$D000F,Hu)
else
call IssueTargetOrderById(HJF,$D0003,Hu)
endif
endif
call TriggerSleepAction(.5)
endloop
endif
set m5=null
set MQ7=null
set HJF=null
set ON7=null
set pl=null
endfunction
function KDF takes location b5 returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set LP4="u4v"
set hq[544+O5]=Bz+30.
if((O37(it))or(P77(900.,b5,Condition(function k6))>0))then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
if((not O37(it))and(h4[O5]==null)and(G0[256+O5]))then
set LK4=P47(900.,b5,Condition(function k6))
if(LK4!=null)then
call ZSE(O5,h4[O5],true,false)
call IssueTargetOrderById(it,$D000F,LK4)
endif
endif
elseif GetWidgetLife(T4)<.405 and Bz>DN7 then
set eY[O5]=1
set h4[64+O5]=null
call J3(it,false)
elseif((j1(it,MD)>2000.)or(G0[O5]))then
if((IsUnitAlly(it,Z7[0]))or(GetUnitX(it)>2300.))then
call PV7(it,$D0012,h7[$FA])
else
call IssuePointOrderById(it,$D0012,2736.,-2656.)
endif
else
if G0[48+O5]then
elseif hq[704+O5]<-.05 then
call ZPE(it,false)
elseif not IsUnitInRegion(ow,it)then
call PV7(it,$D0012,h7[$FA])
elseif IsUnitInRange(it,T4,700.)then
call IssueTargetOrderById(it,$D000F,T4)
else
call PV7(it,$D000F,h7[$FA])
endif
endif
set it=null
endfunction
function KEF takes nothing returns boolean
set LF4=GetOwningPlayer(GetFilterUnit())
return(LF4==Y7[0]or LF4==Z7[0])and IsUnitEnemy(bj_lastLoadedUnit,LF4)and GetWidgetLife(GetFilterUnit())>.405 and((GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0))
endfunction
function KFF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set LP4="KFF"
if((G0[32+O5])or(not G0[$80+O5])or(G0[O5])or(GT))then
elseif(h4[O5]==null)then
call ZSE(O5,hz,false,false)
if(OV7(GetEnumUnit()))then
set GT=ZNE(GetEnumUnit(),hz,true)
endif
elseif(OV7(GetEnumUnit()))then
set GT=ZNE(GetEnumUnit(),hz,true)
endif
endfunction
function KGF takes unit KHF,unit KIF returns nothing
set LP4="(Wnv)"+LP4
set hZ=KHF
set hz=KIF
if(GetWidgetLife(KIF)>1.)then
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(KHF),GetUnitY(KHF),1200.,iP)
set GT=false
call ForGroup(iA,function KFF)
endif
endfunction
function KJF takes unit MQ7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local boolean KKF=h8[32+O5]==h8[$80+O5]
local boolean KMF=true
local integer UP
local integer SN7
local integer i
local integer CVE
local integer j
local integer k
local boolean NK7=IsUnitAlly(MQ7,Y7[0])
set LP4="aiChangeHeroLaneAction_Uvv"
if O37(MQ7)then
set eY[O5]=1
call XG7(MQ7)
call SJ7(MQ7,true)
endif
set hq[544+O5]=Bz+30.
if(eY[272+O5]!=0)then
set UP=GetUnitUserData(h8[112+O5])
else
set UP=GetUnitUserData(h8[$80+O5])
endif
if(NK7)then
if((hj[256+UP]==18)or(hj[UP]==$A))then
set CVE=IMaxBJ($A+P54-1,$B)
elseif((hj[256+UP]==40)or(hj[UP]==30))then
set CVE=IMaxBJ(30+P24-1,31)
else
set CVE=IMaxBJ(50+P_4-1,51)
endif
else
set UP=hj[512+UP]
if((hj[256+UP]==118)or(hj[UP]==110))then
set CVE=IMaxBJ(118-P54-1,111)
elseif((hj[256+UP]==$8C)or(hj[UP]==$82))then
set CVE=IMaxBJ($8C-P24-1,$83)
else
set CVE=IMaxBJ($A0-P_4-1,$97)
endif
endif
set i=CVE
if eY[272+O5]==0 then
if(NK7)then
if(UP>i)then
set h8[$80+O5]=h7[i]
else
set KMF=false
endif
if((h8[$80+O5]==h7[$F])and(OA7(J64)))then
set h8[$80+O5]=h7[$E]
endif
else
if(UP>i)then
set h8[$80+O5]=h7[i]
else
set KMF=false
endif
if((h8[$80+O5]==h7[$D])and(OA7(JG4)))then
set h8[$80+O5]=h7[$E]
endif
endif
else
if(NK7)then
set h8[$80+O5]=h7[i]
if((h8[$80+O5]==h7[$F])and(OA7(J64)))then
set h8[$80+O5]=h7[$E]
endif
else
set h8[$80+O5]=h7[i]
if((h8[$80+O5]==h7[$D])and(OA7(JG4)))then
set h8[$80+O5]=h7[$E]
endif
endif
set j=eY[288+O5]
if(h8[96+O5]!=null)then
set SN7=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set j=NL7(GetUnitUserData(h8[80+SN7]))
endif
if((h8[96+O5]==null)or(GetWidgetLife(h8[96+O5])<.405)or(j!=eY[288+O5])or(eY[32+GetPlayerId(GetOwningPlayer(h8[96+O5]))]<=0)or(not IsUnitInRange(h8[96+O5],h8[$A0+O5],2000.)))then
set GP7=h8[96+O5]
set GO7=MQ7
set bj_lastLoadedUnit=MQ7
set bj_forLoopBIndex=eY[288+O5]
set h8[96+O5]=null
if eY[272+O5]>=4 then
set h8[96+O5]=VA7(3000.,MQ7,Condition(function T97))
endif
if h8[96+O5]==null then
set h8[96+O5]=VA7(3000.,h7[i],Condition(function T97))
endif
if(GP7!=null and h8[96+O5]!=GP7)then
set SN7=GetPlayerId(GetOwningPlayer(h8[96+O5]))
set k=1
loop
exitwhen k>$B
if((IsPlayerAlly(Player(k),Player(O5)))and(eY[k]==9)and(eY[272+k]!=0)and(h8[96+k]==GP7))then
set h8[96+k]=h8[96+O5]
endif
set k=k+1
endloop
endif
endif
if(h8[96+O5]!=null and eY[32+SN7]>0)then
set h8[$A0+O5]=h8[80+SN7]
set i=GetUnitUserData(h8[80+SN7])
if(N37(h8[96+O5],h9[SN7])<N37(h8[80+SN7],h9[SN7]))or(N37(h8[96+O5],h8[80+SN7])<300)then
if NK7 then
set i=i+1
else
set i=i-1
endif
endif
set i=EFF(i,NK7,MP7(MQ7))
set j=GetUnitUserData(h8[112+O5])
if(((NK7)and(i>j or j-i>1))or((not NK7)and(i<j or i-j>1)))and(N37(MQ7,h8[112+O5])>$7D0)then
set h8[112+O5]=h7[i]
endif
else
if(NK7)then
if(UP<i)then
set GO7=h8[112+O5]
set h8[112+O5]=h7[i]
endif
if((h8[112+O5]==h7[$F])and(OA7(J64)))then
set h8[112+O5]=h7[$E]
endif
else
if(UP<i)then
set GO7=h8[112+O5]
set h8[112+O5]=h7[i-1]
endif
if((h8[112+O5]==h7[$D])and(OA7(JG4)))then
set h8[112+O5]=h7[$E]
endif
endif
if h8[32+O5]==GO7 then
set h8[32+O5]=h8[112+O5]
endif
if h8[48+O5]==GO7 then
set h8[48+O5]=h8[112+O5]
endif
endif
if eY[272+O5]==2 or eY[272+O5]==3 then
set i=GetUnitUserData(h8[112+O5])
set k=NL7(GetUnitUserData(h8[80+O5]))
if k==0 then
set k=NL7(GetUnitUserData(h8[112+O5]))
endif
set UP=GetUnitUserData(h8[48+O5])
set j=EHF(O5,i,k,NK7)
if(j!=0)and(UP!=j)then
if EIF(O5,UP,j)then
elseif(k==1)then
set j=326
elseif(k==2)then
set j=327
endif
set GO7=h8[48+O5]
set h8[48+O5]=h7[j]
set h8[32+O5]=h8[48+O5]
set eY[272+O5]=2
endif
endif
endif
if((KKF)and(KMF))then
set h8[32+O5]=h8[$80+O5]
set h8[48+O5]=h8[$80+O5]
endif
if((h4[$90+O5]!=null)and((Bz+4.)>hq[512+O5]))then
set hq[512+O5]=Bz+4.
endif
set GO7=P47(700.,PU7(MQ7),Condition(function k6))
if((not G0[$A0+O5])and((GO7!=null)or((h4[O5]!=null)and(eY[272+O5]!=4))))then
set eY[O5]=1
if(eY[272+O5]>=4)then
set h8[96+O5]=GO7
call ZSE(O5,h4[O5],true,true)
call XG7(MQ7)
set hq[624+O5]=Bz+20.
set hq[416+O5]=0
call IUF(MQ7,h8[96+O5])
else
if((h4[$90+O5]!=null)and((Bz+6.)>hq[512+O5]))then
set hq[512+O5]=Bz+6.
endif
if(h8[$80+O5]==h8[48+O5])then
if(N37(MQ7,h8[$80+O5])<N37(MQ7,h8[O5]))then
if(IsUnitAlly(MQ7,Y7[0]))then
call XE7(MQ7,GetUnitUserData(h8[$80+O5]))
else
call XE7(MQ7,hj[512+GetUnitUserData(h8[$80+O5])])
endif
endif
else
if(N37(MQ7,h8[$80+O5])<N37(MQ7,h8[48+O5]))then
set i=GetUnitUserData(h8[$80+O5])
else
set i=GetUnitUserData(h8[48+O5])
endif
if i>100 then
set i=CVE
elseif(not NK7)then
set i=hj[512+i]
endif
call XE7(MQ7,i)
endif
if((h4[O5]==null)and(G0[$80+O5]))then
set LK4=O_7(1000.,MQ7,Condition(function k6))
if(LK4!=null)then
call ZSE(O5,LK4,true,true)
call IssueTargetOrderById(MQ7,$D000F,h4[O5])
endif
endif
endif
elseif eY[272+O5]==3 then
call ETF(O5,NK7,UP)
elseif(eY[272+O5]>=4)then
if(not G0[336+O5])and(h8[96+O5]!=null and IsUnitVisible(h8[96+O5],Player(O5)))then
call EVF(NK7,O5,h8[96+O5])
endif
if(h8[96+O5]!=null and N37(MQ7,h8[96+O5])<1000. and IsUnitVisible(h8[96+O5],Player(O5)))then
set eY[O5]=1
call XG7(MQ7)
set hq[624+O5]=Bz+20.
set hq[416+O5]=0
call ZSE(O5,h8[96+O5],true,true)
call KGF(MQ7,h8[96+O5])
elseif(N37(MQ7,h8[$80+O5])<500.)then
set eY[O5]=1
call XG7(MQ7)
elseif(N37(MQ7,h8[48+O5])<500.)and(eY[272+O5]==5)then
set h8[48+O5]=h8[$80+O5]
elseif(N37(MQ7,h8[112+O5])<800.)and(eY[272+O5]==4)then
set eY[272+O5]=5
call XG7(MQ7)
set h8[48+O5]=h8[$80+O5]
set i=GetUnitUserData(h8[112+O5])
if NK7 then
if(i>35 and i<40)then
set h8[48+O5]=h7[35]
elseif(i>55 and i<60)then
set h8[48+O5]=h7[55]
endif
else
if(i>30 and i<35)then
set h8[48+O5]=h7[35]
elseif(i>50 and i<55)then
set h8[48+O5]=h7[55]
endif
endif
set h8[32+O5]=h8[48+O5]
endif
if OV7(MQ7)then
if(h8[96+O5]!=null and OY7(h8[96+O5])and N37(MQ7,h8[96+O5])<1200.)then
call IssueTargetOrderById(MQ7,$D000F,h8[96+O5])
elseif eY[272+O5]==4 then
call PV7(MQ7,$D000F,h8[48+O5])
else
call PV7(MQ7,$D0012,h8[48+O5])
endif
endif
elseif(N37(MQ7,h8[$80+O5])<1000.)and(eY[272+O5]==0)then
set eY[O5]=1
if OV7(MQ7)then
call PV7(MQ7,$D000F,h8[48+O5])
endif
call XG7(MQ7)
elseif(h8[48+O5]!=h8[32+O5])and(N37(MQ7,h8[48+O5])<1000.)and(eY[272+O5]<=1)then
set h8[48+O5]=h8[32+O5]
if(N37(MQ7,h8[48+O5])<500. and(not OY7(MQ7)))then
set G0[$B0+O5]=true
endif
if OV7(MQ7)then
if G0[$B0+O5]then
call J3(MQ7,false)
else
if hq[640+O5]<=Bz then
call PV7(MQ7,$D0012,h9[O5])
elseif GetUnitCurrentOrder(MQ7)==$D000F then
call PV7(MQ7,$D000F,h9[O5])
endif
endif
endif
elseif((not G0[$B0+O5])and(h8[48+O5]==h8[32+O5]))and(eY[272+O5]<=1)then
if OV7(MQ7)then
if hq[640+O5]<=Bz then
call PV7(MQ7,$D0012,h9[O5])
elseif GetUnitCurrentOrder(MQ7)==$D000F then
call PV7(MQ7,$D000F,h9[O5])
endif
endif
elseif((is(MQ7))and((P87(700.,MQ7,Condition(function k6))==0)))then
call PV7(MQ7,$D0012,h8[48+O5])
endif
set hq[576+O5]=Bz+60.
set MQ7=null
endfunction
function KNF takes real KOF,location b5 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local integer UP=0
local integer E_F=0
local unit m5=null
local unit X77=null
set LP4="Uov"
if(GetUnitCurrentOrder(GetEnumUnit())==$D000F)then
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),RMaxBJ(KOF,500.),Q54)
loop
set X77=FirstOfGroup(H8)
exitwhen(X77==null)
if((not OA7(X77))or(not S37(X77))or(IsUnitType(X77,UNIT_TYPE_STRUCTURE)))then
elseif((GetOwningPlayer(X77)==Y7[0])or(GetOwningPlayer(X77)==Z7[0]))then
if(IsUnitEnemy(X77,GetOwningPlayer(GetEnumUnit())))then
set UP=UP+1
set E_F=E_F+1
else
set UP=UP-1
endif
elseif((m5==null)and(IsHeroUnitId(GetUnitTypeId(X77)))and(IsUnitEnemy(X77,GetOwningPlayer(GetEnumUnit())))and(IsUnitVisible(X77,GetOwningPlayer(GetEnumUnit()))))then
set m5=X77
endif
call GroupRemoveUnit(H8,X77)
endloop
if((E_F<5)and(UP<0)and(m5!=null)and(IsHeroUnitId(GetUnitTypeId(m5))))then
set J4=IssueTargetOrderById(GetEnumUnit(),$D000F,m5)
set GZ[48+O5]=false
endif
set m5=null
endif
return J4
endfunction
function KPF takes real j4,real Ja,location b5 returns boolean
local unit KQF=null
local unit KRF=null
local unit X77=null
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local boolean J4=false
local unit MQ7=null
set LP4="(Uiv)"+LP4
if(O67(O5))then
return false
elseif((Id(O5))or((GZ[$80+O5])and(P77(800.,b5,Condition(function k6))>0)))then
return false
elseif((h4[96+O5]!=null)and(GetWidgetLife(h4[96+O5])>.405)and(IsUnitInRange(GetEnumUnit(),h4[96+O5],800.)))then
call IssueTargetOrderById(GetEnumUnit(),$D000F,h4[96+O5])
return true
endif
set MQ7=GetEnumUnit()
if(GetUnitLifePercent(MQ7)<70.)then
set j4=j4-150.
set Ja=Ja-150.
endif
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(MQ7),GetUnitY(MQ7),RMaxBJ(j4,Ja),Q54)
loop
set X77=FirstOfGroup(H8)
exitwhen((X77==null)or((KQF!=null)and(KRF!=null)))
if((not OA7(X77))or(not S37(X77)))then
elseif((GetOwningPlayer(X77)==Y7[0])or(GetOwningPlayer(X77)==Z7[0]))then
if((h4[304+O5]!=null)and(NO7(MQ7)+N37(X77,h4[304+O5])<N37(MQ7,h4[304+O5])))then
elseif(IsUnitEnemy(X77,GetOwningPlayer(MQ7)))then
if((KRF==null)and(GetUnitState(X77,UNIT_STATE_LIFE)<150.)and(GetUnitLifePercent(X77)<25.)and(IsUnitInRange(X77,MQ7,Ja)))then
set KRF=X77
endif
else
if((KQF==null)and(GetUnitState(X77,UNIT_STATE_LIFE)<150.)and(((not IsUnitType(X77,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(X77)<25.))or(GetUnitLifePercent(X77)<5.)))then
set KQF=X77
if IsUnitType(KQF,UNIT_TYPE_STRUCTURE)and(XT or IsUnitType(KQF,UNIT_TYPE_RANGED_ATTACKER)==false)then
if P87(1800.,KQF,Condition(function k6))==0 then
set KQF=null
endif
endif
endif
endif
endif
call GroupRemoveUnit(H8,X77)
endloop
set X77=null
if((KQF!=null)and((IsUnitType(KQF,UNIT_TYPE_STRUCTURE))or(GetHeroLevel(MQ7)<=20)or(GetUnitAbilityLevel(MQ7,1093686064)>0)))then
set h4[96+O5]=KQF
call DisableTrigger(Q14[O5])
set J4=IssueTargetOrderById(MQ7,$D000F,KQF)
call EnableTrigger(Q14[O5])
elseif(KRF!=null)then
set h4[96+O5]=KRF
call DisableTrigger(Q14[O5])
set J4=IssueTargetOrderById(MQ7,$D000F,KRF)
call EnableTrigger(Q14[O5])
endif
set MQ7=null
set KQF=null
set KRF=null
return J4
endfunction
function KSF takes integer O5,location b5 returns boolean
local unit X77=null
local integer kc=0
local real j4=N37(GetEnumUnit(),h8[16+GetPlayerId(GetOwningPlayer(GetEnumUnit()))])
local boolean KTF=false
local boolean KUF=false
set LP4="aiFlee_MeetCreep"
if(ke(GetEnumUnit()))then
return true
endif
call GroupClear(H8)
call GroupEnumUnitsInRange(H8,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),1500.,Q54)
loop
set X77=FirstOfGroup(H8)
exitwhen(X77==null)
if((not OA7(X77))or(not S37(X77)))then
elseif(IsUnitEnemy(X77,GetOwningPlayer(GetEnumUnit())))then
if((not KTF)and(GetOwningPlayer(X77)!=Player($C)))then
if((IsUnitVisible(X77,GetOwningPlayer(GetEnumUnit())))or(GetOwningPlayer(X77)==Y7[0])or(GetOwningPlayer(X77)==Z7[0]))then
set KTF=true
elseif((IsUnitType(X77,UNIT_TYPE_HERO))and(eY[32+GetPlayerId(GetOwningPlayer(X77))]>0)or((not kD(X77))and(IsUnitInRange(X77,GetEnumUnit(),600.))))then
set KTF=true
endif
endif
elseif((GetOwningPlayer(X77)==Y7[0])or(GetOwningPlayer(X77)==Z7[0]))then
if(N37(X77,h8[16+GetPlayerId(GetOwningPlayer(GetEnumUnit()))])<j4)then
if(IsUnitInRange(X77,GetEnumUnit(),700.))then
set kc=kc+1
endif
set KUF=true
elseif((IsUnitType(X77,UNIT_TYPE_STRUCTURE))and(IsUnitInRange(X77,GetEnumUnit(),900.)))then
set KUF=true
if G0[$80+O5]then
set kc=kc+2
endif
endif
endif
call GroupRemoveUnit(H8,X77)
endloop
return((kc>1)or((not KTF)and(KUF)))
endfunction
function KVF takes location b5 returns nothing
local unit KWF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(KWF))
local real kl
local boolean PN7=false
set LP4="(UXv)"+LP4
if O67(O5)then
return
endif
set PN7=((R87(GetHandleId(KWF),"WaterSword|Active"))and(P77(1200.,PU7(KWF),Condition(function k6))>=1)and(G0[256+O5]))
if((eY[O5]==1)and((GetHeroLevel(KWF)<9)or(GetUnitLifePercent(KWF)<75.))and(GetUnitCurrentOrder(KWF)==$D000F)and(not G0[48+O5])and(not G0[O5])and(not GZ[$80+O5])and(not G0[32+O5]))then
if PN7 then
elseif((not GZ[48+O5])and(P77(300.,b5,Condition(function Kv))==0)and(P77(600.,b5,Condition(function Kv))>1))then
call IssueImmediateOrderById(KWF,$D0019)
endif
endif
if((GetHeroLevel(KWF)>8)and(GetUnitLifePercent(KWF)>65.))then
if((not O37(KWF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(KWF))and(not KNF(300.,b5))and(not KPF(650.,650.,b5))and((GetUnitCurrentOrder(KWF)==$D0012)or(GetUnitCurrentOrder(KWF)==$D0019))and(not G0[32+O5])and(not G0[48+O5])and(Bz>hq[496+O5])and(KSF(O5,b5)))then
call PV7(KWF,$D000F,h8[O5])
endif
elseif((not O37(KWF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(KWF))and(not KPF(650.,550.,b5)))then
if((GetUnitCurrentOrder(KWF)==$D000F)and(not GZ[48+O5])and(not PN7))then
if((GetHeroLevel(KWF)<8)and((P77(300.,b5,Condition(function Kv))>0)or(P77(500.,b5,Condition(function Kw))>0)))then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(KWF),GetUnitX(h9[O5])-GetUnitX(KWF))
call IssuePointOrderById(KWF,$D0012,GetUnitX(KWF)+200.*Cos(kl),GetUnitY(KWF)+200.*Sin(kl))
elseif(P77(400.,b5,Condition(function Kv))>1)then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(KWF),GetUnitX(h9[O5])-GetUnitX(KWF))
call IssuePointOrderById(KWF,$D0012,GetUnitX(KWF)+250.*Cos(kl),GetUnitY(KWF)+250.*Sin(kl))
endif
elseif(((GetUnitCurrentOrder(KWF)==$D0012)or(GetUnitCurrentOrder(KWF)==$D0019))and(not G0[32+O5])and(not G0[48+O5])and(not G0[48+O5])and(Bz>hq[496+O5])and(KSF(O5,b5)))then
call PV7(KWF,$D000F,h8[O5])
endif
endif
set KWF=null
endfunction
function KXF takes location b5 returns nothing
local unit KYF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(KYF))
local real kl
set LP4="URv"
if((not O37(KYF))and(not G0[O5])and(not G0[48+O5])and(not G0[64+O5])and(iU(KYF))and(not KNF(550.,b5))and(not KPF(900.,800.,b5)))then
if(((GetUnitCurrentOrder(KYF)==$D0012)or(GetUnitCurrentOrder(KYF)==$D0019))and(not G0[32+O5])and(Bz>hq[496+O5])and(KSF(O5,b5)))then
call PV7(KYF,$D000F,h8[O5])
elseif((GetUnitCurrentOrder(KYF)==$D000F)and(not GZ[48+O5]))then
if eY[O5]==3 or eY[O5]==4 then
elseif(((GetHeroLevel(KYF)<6)or(GetUnitLifePercent(KYF)<75.))and(P77(300.,b5,Condition(function Kv))>1))then
set kl=Atan2(GetUnitY(h9[O5])-GetUnitY(KYF),GetUnitX(h9[O5])-GetUnitX(KYF))
call IssuePointOrderById(KYF,$D0012,GetUnitX(KYF)+250.*Cos(kl),GetUnitY(KYF)+250.*Sin(kl))
elseif((GetHeroLevel(KYF)<7)and(Bz>hq[496+O5])and((h4[80+O5]==null)or(GetOwningPlayer(h4[80+O5])==Y7[0])or(GetOwningPlayer(h4[80+O5])==Z7[0]))and(P77(800.,b5,Condition(function Kv))>0))then
set kl=GetRandomReal(.0,360.)*bj_DEGTORAD
call IssuePointOrderById(KYF,$D0012,GetUnitX(KYF)+GetRandomReal(50.,90.)*Cos(kl),GetUnitY(KYF)+GetRandomReal(50.,90.)*Sin(kl))
set hq[864+O5]=GetRandomReal(-LN4,LN4)
endif
endif
endif
set KYF=null
endfunction
function KZF takes unit u,string s1 returns nothing
if GetUnitAbilityLevel(u,1093677130)>0 or GetUnitTypeId(u)==1212365106 then
call BJDebugMsg(s1)
else
return
endif
endfunction
function KAF takes location b5 returns nothing
local unit KBF=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(KBF))
local unit m5=null
set LP4="UAv"
call KZF(KBF,GetUnitName(KBF)+" CurrentOrder "+I2S(GetUnitCurrentOrder(KBF)))
if(not iU(KBF))then
call KZF(KBF,GetUnitName(KBF)+"Inside if not iU{UNv}")
elseif((IsUnitVisible(KBF,Y7[0]))and(IsUnitVisible(KBF,Z7[0])))then
call KZF(KBF,GetUnitName(KBF)+"Inside if IsUnitVisible TO BOTH SIDE")
if(((P77(1000.,b5,Condition(function UB7)))>0)and((P77(1000.,b5,Condition(function k6)))>0)and((P77(900.,b5,Condition(function Kd)))<3))then
call KZF(KBF,GetUnitName(KBF)+"Inside if AI_OrderToWaipoint to reTreate Riki:codeA")
call PV7(KBF,$D0012,h9[O5])
else
call KZF(KBF,GetUnitName(KBF)+"Inside UXv")
call KVF(b5)
endif
elseif((P77(1200.,b5,Condition(function k6)))==0)then
call KZF(KBF,GetUnitName(KBF)+" Prepare to attack")
if(GetUnitCurrentOrder(KBF)==$D000F)then
set m5=O27(400.,b5,Condition(function KA))
if(m5==null)then
set m5=O27(700.,b5,Condition(function Ka))
endif
if(m5!=null)then
call KZF(KBF,GetUnitName(KBF)+"  attack "+GetUnitName(m5))
call IssueTargetOrderById(KBF,$D000F,m5)
endif
endif
else
if(((P77(1000.,b5,Condition(function Kd)))<2)and(P77(1000.,b5,Condition(function k8))>1)and(P77(500.,b5,Condition(function VG7))==0))then
call KZF(KBF,GetUnitName(KBF)+"Inside if AI_OrderToWaipoint to reTreate Riki:codeB")
call PV7(KBF,$D0012,h9[O5])
elseif((not G0[O5])and(not G0[64+O5])and(iU(KBF))and(not KPF(750.,650.,b5)))then
call BJDebugMsg("Check it, Master Green")
call BJDebugMsg("I am a passive Riki. Name: "+GetUnitName(KBF))
if(P77(250.,b5,Condition(function k8))==0 and GetUnitAbilityLevel(KBF,1093677130)==0)or(GetUnitAbilityLevel(KBF,1093677130)!=0 and(P77(700.,b5,Condition(function T37))==0)and P87(800,KBF,Condition(function LI7))==0 and LJ7(KBF)==false)then
call IssueImmediateOrderById(KBF,$D0019)
else
call IssuePointOrderById(KBF,$D0012,GetUnitX(m5)+GetRandomReal(0,200.)-100.,GetUnitY(m5)+GetRandomReal(0,200.)-100.)
set hq[864+O5]=GetRandomReal(-LN4,LN4)
endif
endif
endif
set m5=null
set KBF=null
endfunction
function KCF takes unit it,integer O5,location b5 returns boolean
local unit m5=null
local real K3F=bj_RADTODEG*Atan2(GetUnitY(h9[16+O5])-GetUnitY(it),GetUnitX(h9[16+O5])-GetUnitX(it))
local real K6F
set LP4="Ubv"
call MoveLocation(Ha,GetUnitX(it)+300.*Cos(K3F*bj_DEGTORAD),GetUnitY(it)+300.*Sin(K3F*bj_DEGTORAD))
if(P77(500.,Ha,Condition(function Kd))>2)then
set m5=P47(500.,Ha,Condition(function Kd))
if(m5!=null)then
set K6F=bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
else
return false
endif
if(RAbsBJ(K6F-K3F)>20)then
set m5=null
return false
elseif(K6F>K3F)then
set K3F=K3F-20.
else
set K3F=K3F+20.
endif
call IssuePointOrderById(it,$D0012,GetUnitX(it)+600.*Cos(bj_DEGTORAD*K3F),GetUnitY(it)+600.*Sin(bj_DEGTORAD*K3F))
set m5=null
return true
else
return false
endif
endfunction
function KLF takes nothing returns nothing
call ExecuteFunc("K1F")
endfunction
function K1F takes nothing returns nothing
local unit it=GetEnumUnit()
local unit JPF=null
local integer O5=GetPlayerId(GetOwningPlayer(it))
local location b5
local integer UP
local real K0F=N37(it,PL7(it))
local boolean J4=false
set LP4="K1F"
if(GetUnitTypeId(it)!=1211117642)then
set b5=HC[16+O5]
else
if(Q57(GetHandleId(it),"MCSLoc")!=null)then
set b5=Q57(GetHandleId(it),"MCSLoc")
else
set b5=GetUnitLoc(it)
call QT7(GetHandleId(it),"MCSLoc",b5)
endif
endif
call MoveLocation(b5,GetUnitX(it),GetUnitY(it))
if((O37(it))and(is(it))and(not Id(O5))and(GetUnitAbilityLevel(it,1093685334)==0)and(GetUnitAbilityLevel(it,1110454874)==0))then
if(not KCF(it,O5,b5))then
if(K0F<$3E8)or(not GMF(it))then
if((K0F+100.)<N37(h9[O5],PL7(it)))then
call PV7(it,$D0012,h9[16+O5])
else
call PV7(it,$D0012,h9[O5])
endif
endif
endif
endif
set J4=HXF(it)
if false and(eY[O5]==1 or eY[O5]==9)and(not G97[$F0+O5])then
set UP=-1
if((N37(it,h8[O5])<400)and(GetUnitCurrentOrder(it)==$D000F))then
set UP=GetUnitUserData(h8[O5])
elseif((N37(it,h9[O5])<400)and(GetUnitCurrentOrder(it)==$D0012))then
set UP=GetUnitUserData(h9[O5])
endif
if(UP>=$B and UP<=17)or(UP>=31 and UP<=39)or(UP>=51 and UP<=59)then
if WN7(Player(O5))then
set UP=hj[512+UP]
endif
call XE7(it,UP)
endif
endif
if((eY[O5]==2)and(not J4)and(is(it))and(K0F>500.))then
if(IsUnitAlly(it,Y7[0]))then
call FNF(it,O5,PT4)
else
call FNF(it,O5,PU4)
endif
endif
if((eY[O5]==1)and(not J4)and(is(it))and(GetUnitAbilityLevel(it,1110459478)>0))then
set J4=PV7(it,$D0012,h9[16+O5])
set G0[64+O5]=true
endif
if((not J4)and(K0F>4500.)and(is(it)))then
if(GetUnitAbilityLevel(it,1110459204)==0)then
if(not J4)and(PD7(it,SU[QC]))then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+175.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
if((eY[O5]==1)and(UP<100)and(UP>50)and(Bz>hq[256+O5]))then
set J4=(h4[O5]==null)and(P77(1000.,b5,Condition(function VU7))==0)and(P77(1000.,b5,Condition(function UB7))==0)and(iy(it))and(J1F(it))
endif
endif
if(not J4)and(PD7(it,SU[YB]))then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)<700.)then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+275.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
else
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+375.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
endif
if(eY[O5]==1)and(UP<100)and(UP>45)then
set J4=(h4[O5]==null)and(iy(it))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,it,false,false)==0)and(P77(1100.,b5,Condition(function KX))==0)and(P77(700.,b5,Condition(function KA))==0)and(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if(not J4)and(PD7(it,SU[PC]))then
if(GetUnitState(it,UNIT_STATE_MAX_LIFE)<700.)then
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+275.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
else
set UP=R2I(((GetUnitState(it,UNIT_STATE_LIFE)+375.)/GetUnitState(it,UNIT_STATE_MAX_LIFE))*100.)
endif
if((eY[O5]==1)and(UP<100)and(UP>45)and(GetUnitAbilityLevel(it,1110454874)==0))then
set J4=(h4[O5]==null)and(iy(it))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,it,false,false)==0)and(P77(1100.,b5,Condition(function KX))==0)and(P77(700.,b5,Condition(function KA))==0)and(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
endif
endif
if((not J4)and(K0F>6000.)and(not G0[O5]))then
if eY[$D0+O5]!=0 then
if eY[O5]!=1 or N37(it,h7[eY[$D0+O5]])<3000. then
set eY[$D0+O5]=0
endif
endif
if(eY[O5]==1)then
if false and((Bz>hq[592+O5])and(G97[$80+O5])and(GetHeroLevel(it)>5)and(h4[O5]==null)and((Bz>hq[592+O5]+60. and P47(800.,b5,Condition(function KX))==null)or(P47(1200.,b5,Condition(function KX))==null))and((GetHeroLevel(it)<$C)or((N37(it,JX(it))>6000.)and(P47(1200.,b5,Condition(function KX))==null))))then
set G0[320+O5]=true
call SJ7(it,true)
if(IsUnitAlly(it,Y7[0]))then
set J4=SQ7(it,IY4)
else
set J4=SQ7(it,JZ4)
endif
elseif(eY[$D0+O5]!=0 and P77(800.,b5,Condition(function k6))==0)then
if h8[$90+O5]!=null then
set J4=SQ7(it,h8[$90+O5])
else
set J4=SQ7(it,h7[eY[$D0+O5]])
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(P77(800.,b5,Condition(function k6))>0)then
elseif(O37(it))then
elseif(IsUnitAlly(it,Y7[0]))then
if(LS4[64+O5]==0)then
if(PC4<3)then
set J4=SQ7(it,JN4)
elseif(GetWidgetLife(JS4)>.405)then
set J4=SQ7(it,JS4)
elseif(GetWidgetLife(JV4)>.405)then
set J4=SQ7(it,JV4)
elseif(GetWidgetLife(JP4)>.405)then
set J4=SQ7(it,JP4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=SQ7(it,JQ4)
elseif(GetWidgetLife(JE4)>.405)then
set J4=SQ7(it,JE4)
endif
elseif(LS4[64+O5]==1)then
if(P34<3)then
set J4=SQ7(it,JM4)
elseif(GetWidgetLife(JR4)>.405)then
set J4=SQ7(it,JR4)
elseif(GetWidgetLife(JU4)>.405)then
set J4=SQ7(it,JU4)
elseif(GetWidgetLife(JP4)>.405)then
set J4=SQ7(it,JP4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=SQ7(it,JQ4)
elseif(GetWidgetLife(JE4)>.405)then
set J4=SQ7(it,JE4)
endif
elseif(LS4[64+O5]==2)then
if(P64<3)then
set J4=SQ7(it,JO4)
elseif(GetWidgetLife(JT4)>.405)then
set J4=SQ7(it,JT4)
elseif(GetWidgetLife(JW4)>.405)then
set J4=SQ7(it,JW4)
elseif(GetWidgetLife(JP4)>.405)then
set J4=SQ7(it,JP4)
elseif(GetWidgetLife(JQ4)>.405)then
set J4=SQ7(it,JQ4)
elseif(GetWidgetLife(JE4)>.405)then
set J4=SQ7(it,JE4)
endif
elseif(LS4[64+O5]==3)then
if(GetWidgetLife(JE4)>.405)then
set J4=SQ7(it,JE4)
endif
endif
if(not J4)then
set J4=SQ7(it,IY4)
endif
else
if(LS4[64+O5]==0)then
if(PL4<3)then
set J4=SQ7(it,J_4)
elseif(GetWidgetLife(KD4)>.405)then
set J4=SQ7(it,KD4)
elseif(GetWidgetLife(KG4)>.405)then
set J4=SQ7(it,KG4)
elseif(GetWidgetLife(K74)>.405)then
set J4=SQ7(it,K74)
elseif(GetWidgetLife(K84)>.405)then
set J4=SQ7(it,K84)
elseif(GetWidgetLife(JC4)>.405)then
set J4=SQ7(it,JC4)
endif
elseif(LS4[64+O5]==1)then
if(P14<3)then
set J4=SQ7(it,J24)
elseif(GetWidgetLife(K94)>.405)then
set J4=SQ7(it,K94)
elseif(GetWidgetLife(KF4)>.405)then
set J4=SQ7(it,KF4)
elseif(GetWidgetLife(K74)>.405)then
set J4=SQ7(it,K74)
elseif(GetWidgetLife(K84)>.405)then
set J4=SQ7(it,K84)
elseif(GetWidgetLife(JC4)>.405)then
set J4=SQ7(it,JC4)
endif
elseif(LS4[64+O5]==2)then
if(P04<3)then
set J4=SQ7(it,K44)
elseif(GetWidgetLife(KE4)>.405)then
set J4=SQ7(it,KE4)
elseif(GetWidgetLife(KH4)>.405)then
set J4=SQ7(it,KH4)
elseif(GetWidgetLife(K74)>.405)then
set J4=SQ7(it,K74)
elseif(GetWidgetLife(K84)>.405)then
set J4=SQ7(it,K84)
elseif(GetWidgetLife(JC4)>.405)then
set J4=SQ7(it,JC4)
endif
elseif(LS4[64+O5]==3)then
if(GetWidgetLife(JC4)>.405)then
set J4=SQ7(it,JC4)
endif
endif
if(not J4)then
set J4=SQ7(it,JZ4)
endif
endif
endif
endif
set LP4="Udv2"
if((not J4)and(K0F>8500.)and(eY[O5]!=$B))then
set JPF=h4[$80+O5]
if((JPF!=null)and(OA7(JPF))and(IsUnitInRange(it,JPF,1000.)))then
if((GetUnitTypeId(JPF)==1966092372)or(GetUnitTypeId(JPF)==1697657145))then
set UP=P87(1000.,JPF,Condition(function KC))
if((UP==0)and(not Id(O5))and(GetUnitState(it,UNIT_STATE_LIFE)<1600.)and(Bz>hq[512+O5]))then
call ZVE(O5,false)
set J4=PV7(it,$D0012,h9[O5])
endif
elseif(((Id(O5))and(R2I(GetUnitState(it,UNIT_STATE_LIFE))>(400+(GetHeroLevel(it)*50)))and(GetHeroLevel(it)>=6))or(hq[512+O5]>Bz))then
if((N37(it,JX(it)))<(N37(JPF,JX(it))-200.))then
call ZVE(O5,true)
set J4=PV7(it,$D0012,h9[O5])
set hq[512+O5]=.0
endif
elseif((GetHeroLevel(it)<$B)and((N37(it,JX(it)))<(N37(JPF,JX(it))+I2R(500-(GetHeroLevel(it)*20))))and(not iy(it))and(h4[80+O5]!=JPF))then
call ZVE(O5,true)
set J4=PV7(it,$D0012,h9[O5])
set hq[512+O5]=.0
elseif((Bz>hq[512+O5])and((h4[O5]==null)or((not Id(O5))and((GetHeroLevel(it)<16)or(GetUnitState(it,UNIT_STATE_LIFE)<1300.)))))then
set UP=P87(1000.,JPF,Condition(function KC))
set J4=((N37(it,JX(it))<(N37(JPF,JX(it))-200.))or(UP==0)or((GetUnitState(it,UNIT_STATE_LIFE)<1300.)and(UP<2)))and(PV7(it,$D0012,h9[O5]))
set hq[512+O5]=.0
endif
if((not J4)and(iy(it))and(eY[O5]==1)and(GetHeroLevel(it)>$A)and(GetUnitCurrentOrder(it)==$D000F)and(not G0[O5]))then
set UP=P87(900.,JPF,Condition(function KC))
if((UP>1)and(GetUnitLifePercent(it)>60.))then
call IssueTargetOrderById(it,$D000F,JPF)
endif
endif
if((not J4)and(GetUnitLifePercent(JPF)<20.)and(eY[O5]==1)and(GetHeroLevel(it)>$A)and(h4[O5]==null)and(not G0[O5])and(iU(it))and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))))then
set J4=IssueTargetOrderById(it,$D000F,JPF)
endif
elseif((K0F>12000.)and(not G0[O5])and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))or(h4[O5]!=null)))then
set JPF=P47(1000.,b5,Condition(function KB))
if(JPF!=null)then
if((Id(O5))and(R2I(GetUnitState(it,UNIT_STATE_LIFE))>(500+(GetHeroLevel(it)*30)))and(GetHeroLevel(it)>=6))then
if((N37(it,JX(it)))<(N37(JPF,JX(it))-350.))then
call ZVE(O5,true)
set J4=PV7(it,$D0012,h9[O5])
endif
elseif(h4[O5]==null)then
set J4=(iU(it))and((GetUnitLifePercent(JPF)<10.)or(P77(700.,b5,Condition(function KX))<4))and(IssueTargetOrderById(it,$D000F,JPF))
elseif((kA(it,h4[O5],200.))or((N37(it,JX(it)))<(N37(JPF,JX(it))-250.)))then
call ZVE(O5,true)
set J4=((P77(700.,b5,Condition(function KX))<4)and(IssueTargetOrderById(it,$D000F,JPF)))or(PV7(it,$D0012,h9[O5]))
endif
endif
endif
endif
endif
set LP4="Udv3"
if((eY[O5]!=2)and(not J4)and(is(it)))then
set UP=GetUnitCurrentOrder(it)
call KZF(it,"A: Inside Udv3  "+"CurrentOrder "+I2S(UP))
if(G97[256+O5])then
call KZF(it,"B: inside if (g_aiItemBool[256+O5]) and call AI_OrderToWaipoint(it,851986,h8[O5])  "+"CurrentOrder "+I2S(UP))
call PV7(it,$D0012,h8[O5])
elseif((UP==0)or(UP==$D0004))then
call KZF(it,"C: inside if ((UP==0)or(UP==851972)) and call J3(it,true)  "+"CurrentOrder "+I2S(UP))
call J3(it,true)
elseif((G0[32+O5])and(eY[O5]==1)and(UP!=$D0012)and(GetUnitAbilityLevel(it,1110454874)==0)and(P77(900.,b5,Condition(function k8))==0))then
call KZF(it,"D: elseif((G0[32+O5])and(eY[O5]==1)and(UP!=851986)and ,,, and call  call aiRetreat_J1(it,false) "+"CurrentOrder "+I2S(UP))
call SJ7(it,false)
endif
if((h4[O5]==null)and(K0F>2800.))then
call KZF(it,"E: Inside if((h4[O5]==null)and(UDv>2800.))"+"CurrentOrder "+I2S(UP))
set J4=(j1(it,L9)>2000.)and(j1(it,C9)>2000.)and(J3F(it))
set LK4=P47(800.,b5,Condition(function K4))
if((not J4)and(LK4!=null)and(not O37(it)))then
call KZF(it,"F:  if((not J4)and(b_KillTgt!=null)and(not AIIsHeroKillable(it))) "+I2S(UP))
call ZSE(O5,LK4,false,false)
if h4[O5]!=null then
call KZF(it,"G: Inside  h4[O5]!=null "+I2S(UP))
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
endif
endif
if((not J4)and(not Id(O5)))then
call KZF(it,"H: Inside (not J4)and(not Id(O5)) "+"CurrentOrder "+I2S(UP))
if((eY[O5]!=1)or(K0F<3000.)or(hq[512+O5]>Bz)or((GetHeroLevel(it)>$F)and(GetWidgetLife(it)>1600.))or((h4[O5]!=null)and((GetUnitLifePercent(h4[O5])+15.)<GetUnitLifePercent(it))and(GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(h4[O5],UNIT_STATE_LIFE))))then
call KZF(it,"I: Inside Blank if((eY[O5]!=1)or(UDv<3000.)or(hq[512+O5]>Bz)or((GetHeroLevel(it)>15)... "+"CurrentOrder "+I2S(UP))
elseif(((UP==$D000F)or(UP==$D0019))and((not GZ[48+O5])or(GetHeroLevel(it)<6))and(P77(700.,b5,Condition(function VG7))==0)and(K0F>3500.))then
call KZF(it,"J: Inside ((UP==851983)or(UP==851993))and((not GZ[48+O5])or(GetHeroLevel(it)<6))... "+"CurrentOrder "+I2S(UP))
if(GetHeroLevel(it)<$A)then
set UP=P77(900.,b5,Condition(function Kd))
else
set UP=P77(900.,b5,Condition(function KC))
endif
if((iy(it))and(GetUnitLifePercent(it)>60.)and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE))))then
call KZF(it,"K: Inside  if((iy(it))and(GetUnitLifePercent(it)>60.)and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE)))) "+"CurrentOrder "+I2S(UP))
set J4=(UP==0)and(P77(900.,b5,Condition(function Ky))>1)and(PV7(it,$D0012,h9[O5]))
if((not J4)and(((h4[$80+O5]==null)or(not IsUnitInRange(it,h4[$80+O5],1800.)))and(((not S67(it))and(GetHeroLevel(it)>9))or(GetHeroLevel(it)>$E))))then
call KZF(it,"L: Inside ((not J4)and(((h4[128+O5]==null)or(not IsUnitInRange(it,h4[128+O5],1800.)))and(((not IsUnitTypeMeleeAttacker(it))and(GetHeroLevel(it)>9))))... "+"CurrentOrder "+I2S(UP))
set JPF=P47(600.,b5,Condition(function KV))
if((JPF!=null)and(h4[80+O5]!=JPF))then
call KZF(it,"M: Inside if((uSv!=null)and(h4[80+O5]!=uSv)) and Call 851983 "+"CurrentOrder "+I2S(UP))
call IssueTargetOrderById(it,$D000F,JPF)
endif
endif
else
call KZF(it,"N: Inside else of the ((iy(it))  and(GetUnitLifePercent(it)>60.)and((h4[80+O5]==null)or(not IsUnitType(h4[80+O5],UNIT_TYPE_STRUCTURE)))) "+"CurrentOrder "+I2S(UP))
set J4=(UP<=2)and(P77(900.,b5,Condition(function Ky))>((UP*2)+1))and(PV7(it,$D0012,h9[O5]))
endif
elseif((UP==$D0012)and(not G0[64+O5])and(OV7(it)))then
call KZF(it,"O: Inside elseif((UP==851986)and(not G0[64+O5])and(AI_Not_Channeling(it)))then "+"CurrentOrder "+I2S(UP))
if((GetUnitAbilityLevel(it,1110454874)>0)and(GetUnitLifePercent(it)<95.))then
call KZF(it," Inside if((GetUnitAbilityLevel(it,'B02Z')>0)and(GetUnitLifePercent(it)<95.)) "+"CurrentOrder "+I2S(UP))
set JPF=O27(400.,b5,Condition(function VG7))
if(JPF!=null)then
call KZF(it,"P: Inside if(uSv!=null)then of GetUnitAbilityLevel(it,'B02Z')`s branch "+"CurrentOrder "+I2S(UP))
set J4=((P87(1200.,JPF,Condition(function k8))==0)and(N37(h9[16+O5],JPF)>N37(h9[16+O5],it)+500.)and(PV7(it,$D000F,h8[O5])))
endif
elseif((not G0[32+O5])and(not O37(it)))then
call KZF(it,"Q: Inside  elseif((not G0[32+O5])and(not AIIsHeroKillable(it)))then"+"CurrentOrder "+I2S(UP))
set JPF=P47(400.,b5,Condition(function VG7))
if(JPF!=null)then
call KZF(it,"R: Inside  if(uSv!=null)then of elseif((not G0[32+O5])and(not AIIsHeroKillable(it)))then "+"CurrentOrder "+I2S(UP))
set UP=P87(1200.,JPF,Condition(function k8))
set J4=((UP<2)or((UP<4)and(P87(1200.,JPF,Condition(function k6))==0))and(N37(h9[16+O5],JPF)>N37(h9[16+O5],it)+500.)and(PV7(it,$D000F,h8[O5])))
endif
endif
endif
endif
call KZF(it,"Out")
set LP4="Udv4"
if(eY[544+O5]==1)then
set bj_lastLoadedUnit=it
if GetWidgetLife(h9[64+O5])<.405 then
set eY[544+O5]=0
elseif P87($4B0,h9[64+O5],Condition(function TD7))==0 then
if(HIF(h9[64+O5],IsUnitAlly(it,Y7[0]),R47(GetHandleId(h9[64+O5]),"AI|Lane"))<0)then
set eY[544+O5]=0
endif
endif
elseif(eY[544+O5]==2)then
set bj_lastLoadedUnit=it
if GetWidgetLife(h9[64+O5])<.405 then
set eY[544+O5]=0
elseif P87($4B0,h9[64+O5],Condition(function TD7))==0 then
set eY[544+O5]=0
endif
endif
if eY[544+O5]!=0 and hq[848+O5]<Bz+20. then
set hq[848+O5]=Bz+20.
endif
if((J4)or(not is(it)))then
elseif(eY[O5]==1)and(G0[$80+O5])then
if G97[256+O5]and(h8[O5]!=h7[353])and(h8[O5]!=h7[354])then
set G97[256+O5]=false
endif
if(GetUnitAbilityLevel(it,1110459478)>0)then
call PV7(it,$D0012,h9[O5])
set G0[64+O5]=true
elseif G97[256+O5]or O67(O5)then
elseif(S67(it))then
if((GetUnitAbilityLevel(it,1093677130)==0)or(h4[O5]!=null))then
call KVF(b5)
else
call KAF(b5)
endif
else
call KXF(b5)
endif
if h9[64+O5]!=null then
if(GetUnitState(h9[64+O5],UNIT_STATE_LIFE)<.45)or(N37(h9[64+O5],it)>$BB8)or(P47(3000.,PU7(h9[64+O5]),Condition(function k6))==null)then
set h9[64+O5]=null
else
set hq[320+O5]=Bz+10.
endif
endif
elseif((eY[O5]==3)or(eY[O5]==4))then
if(K0F<6000.)then
call FMF(it)
else
set J4=GMF(it)
endif
elseif(eY[O5]==9)then
call KJF(it)
elseif(eY[O5]==$A)then
call J2F(b5)
elseif(eY[O5]==$B)then
call KDF(b5)
endif
endif
set it=null
set JPF=null
set b5=null
endfunction
function K5F takes unit it returns integer
local integer i1=GetUnitTypeId(it)
set LP4="AI_mid_laner"
if(i1==1211117653)then
return 19
elseif(i1==1311787088)then
return 18
elseif(i1==1160785970)then
return 17
elseif(i1==1430467634)then
return 16
elseif(i1==1215128178)then
return $F
elseif(i1==1430468406)then
return $E
elseif(i1==1164666213)then
return $D
elseif(i1==1211117640)then
return $C
elseif(i1==1433168227)then
return $B
elseif(i1==1430466872)then
return $A
elseif(i1==1211117620)then
return 9
elseif(i1==1332898670)then
return 8
elseif(i1==1316252014)then
return 7
elseif(i1==1429221445)then
return 6
elseif(i1==1311780930)then
return 5
elseif(i1==1315334514)then
return 4
elseif(i1==1162032951)then
return 3
elseif(i1==1162032439)then
return 2
elseif(i1==1211117654)then
return 1
else
return 0
endif
endfunction
function K2F takes nothing returns boolean
return((not PD4)and(not PF4)and(not PG4)and(not PE4))
endfunction
function K_F takes nothing returns nothing
local integer iZ=1
local integer M4F=1
local integer M7F=1
local unit M8F=null
local unit M9F=null
set LP4="K_F"
loop
exitwhen iZ>5
if(WQ7(Y7[iZ]))then
if((M8F==null)or(((K5F(G7[GetPlayerId(Y7[iZ])]))>(K5F(M8F)))or((K5F(M8F)==0)and((NO7(G7[GetPlayerId(Y7[iZ])])>NO7(M8F))or((NO7(G7[GetPlayerId(Y7[iZ])])==NO7(M8F))and(GetHeroStr(G7[GetPlayerId(Y7[iZ])],false)>=GetHeroAgi(G7[GetPlayerId(Y7[iZ])],false))and(GetHeroStr(G7[GetPlayerId(Y7[iZ])],false)>=GetHeroInt(G7[GetPlayerId(Y7[iZ])],false)))))))then
set M8F=G7[GetPlayerId(Y7[iZ])]
set eY[64+GetPlayerId(Y7[iZ])]=0
endif
endif
if(WQ7(Z7[iZ]))then
if((M9F==null)or(((K5F(G7[GetPlayerId(Z7[iZ])]))>(K5F(M9F)))or((K5F(M9F)==0)and((NO7(G7[GetPlayerId(Z7[iZ])])>NO7(M9F))or((NO7(G7[GetPlayerId(Z7[iZ])])==NO7(M9F))and(GetHeroStr(G7[GetPlayerId(Z7[iZ])],false)>=GetHeroAgi(G7[GetPlayerId(Z7[iZ])],false))and(GetHeroStr(G7[GetPlayerId(Z7[iZ])],false)>=GetHeroInt(G7[GetPlayerId(Z7[iZ])],false)))))))then
set M9F=G7[GetPlayerId(Z7[iZ])]
set eY[64+GetPlayerId(Z7[iZ])]=0
endif
endif
set iZ=iZ+1
endloop
set iZ=1
loop
exitwhen iZ>5
if((WQ7(Y7[iZ]))and(Y7[iZ]!=GetOwningPlayer(M8F)))then
if(M4F<3)then
set eY[64+GetPlayerId(Y7[iZ])]=M4F
else
set eY[64+GetPlayerId(Y7[iZ])]=M4F-2
endif
set M4F=M4F+1
endif
if((WQ7(Z7[iZ]))and(Z7[iZ]!=GetOwningPlayer(M9F)))then
if(M7F<3)then
set eY[64+GetPlayerId(Z7[iZ])]=M7F
else
set eY[64+GetPlayerId(Z7[iZ])]=M7F-2
endif
set M7F=M7F+1
endif
set iZ=iZ+1
endloop
set iZ=1
loop
exitwhen iZ>5
set M7F=GetPlayerId(Y7[iZ])
if(eY[64+M7F]==0)then
set h8[M7F]=h7[$B]
set h8[16+M7F]=h7[$E]
elseif(eY[64+M7F]==1)then
set h8[M7F]=h7[31]
set h8[16+M7F]=h7[35]
else
set h8[M7F]=h7[51]
set h8[16+M7F]=h7[55]
endif
set M7F=GetPlayerId(Z7[iZ])
if(eY[64+M7F]==0)then
set h8[M7F]=h7[111]
set h8[16+M7F]=h7[114]
elseif(eY[64+M7F]==1)then
set h8[M7F]=h7[$83]
set h8[16+M7F]=h7[$87]
else
set h8[M7F]=h7[$97]
set h8[16+M7F]=h7[$9B]
endif
set iZ=iZ+1
endloop
set M8F=null
set M9F=null
endfunction
function MDF takes nothing returns nothing
local integer O5=1
set LP4="MDF"
if Bz<Q94 then
return
endif
loop
exitwhen O5>$B
if(IsPlayerInForce(Player(O5),QW4))then
call GroupClear(iC)
call GroupEnumUnitsOfPlayer(iC,Player(O5),iL)
call ForGroup(iC,function KLF)
endif
if(IsPlayerInForce(Player(O5),W7))then
if((G7[O5]!=null)and(GetWidgetLife(G7[O5])>.405))then
if(IsUnitVisible(G7[O5],Z7[0]))then
set eY[32+O5]=4
elseif(eY[32+O5]>0)then
set eY[32+O5]=eY[32+O5]-1
endif
endif
elseif(IsPlayerInForce(Player(O5),X7))then
if((G7[O5]!=null)and(GetWidgetLife(G7[O5])>.405))then
if(IsUnitVisible(G7[O5],Y7[0]))then
set eY[32+O5]=4
elseif(eY[32+O5]>0)then
set eY[32+O5]=eY[32+O5]-1
endif
endif
endif
set O5=O5+1
endloop
endfunction
function MEF takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="MEF"
if not OV7(it)then
elseif(Bz<=Q94-23.)then
if N37(it,PL7(it))<600. and eY[O5]!=0 then
if iU(it)then
call IssueImmediateOrderById(it,$D0019)
endif
else
if IsUnitAlly(it,Y7[0])then
call IssuePointOrderById(it,$D0012,GetRectCenterX(L9),GetRectCenterY(L9))
else
call IssuePointOrderById(it,$D0012,GetRectCenterX(C9),GetRectCenterY(C9))
endif
endif
elseif(eY[O5]==2)or(not(Bz>G77[$A0+O5]))then
elseif(IsUnitAlly(it,Z7[0]))then
if(h8[16+O5]==h7[$E])then
call IssueTargetOrderById(it,$D0003,J_4)
elseif(h8[16+O5]==h7[35])then
call IssueTargetOrderById(it,$D0003,J24)
else
call IssueTargetOrderById(it,$D0003,K44)
endif
else
if(h8[16+O5]==h7[$E])then
call IssueTargetOrderById(it,$D0003,JN4)
elseif(h8[16+O5]==h7[35])then
call IssueTargetOrderById(it,$D0003,JM4)
else
call IssueTargetOrderById(it,$D0003,JO4)
endif
endif
set it=null
endfunction
function MFF takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer O5=R47(GetHandleId(t),"pID")
call D5F(G7[O5])
set Q14[80+O5]=null
call Q47(GetHandleId(t))
call DestroyTrigger(t)
set t=null
endfunction
function MGF takes nothing returns nothing
local integer O5
local integer i
local integer j
local integer k
if AL4 then
return
endif
if(Bz<(Q94+2.))then
if(Bz==Q94-30.)then
if(K2F())then
call ExecuteFunc("K_F")
endif
if(not CL4)then
set CL4=true
set O5=1
set N04=true
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
if WQ7(Player(O5))and G7[O5]!=null then
set Q14[80+O5]=CreateTrigger()
call TriggerRegisterTimerEvent(Q14[80+O5],.1,false)
call TriggerAddAction(Q14[80+O5],function MFF)
call Q97(GetHandleId(Q14[80+O5]),"pID",O5)
endif
set O5=O5+1
endloop
endif
endif
call GroupClear(Q04)
call GroupEnumUnitsInRect(Q04,bj_mapInitialPlayableArea,iL)
call ForGroup(Q04,function MEF)
else
call DestroyTrigger(GetTriggeringTrigger())
call DestroyTrigger(QZ4)
set QZ4=null
call DestroyTrigger(Ho)
call EnableTrigger(QA4)
call EnableTrigger(LO4)
call EnableTrigger(Q34)
call EnableTrigger(QC4)
call EnableTrigger(QY4)
if(QU4!=null)then
call DisplayTimedTextToPlayer(QS4,0,0,5.,"Picking for AI has ended.")
call SetUnitOwner(h4[512+GetPlayerId(QS4)],QS4,false)
call SetUnitOwner(h4[512+GetPlayerId(QU4)],QU4,false)
set QU4=null
endif
if(QV4!=null)then
call DisplayTimedTextToPlayer(QT4,0,0,5.,"Picking for AI has ended.")
call SetUnitOwner(h4[512+GetPlayerId(QT4)],QT4,false)
call SetUnitOwner(h4[512+GetPlayerId(QV4)],QV4,false)
set QV4=null
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set LE4=IsPlayerAlly(Player(O5),Y7[0])
set j=M17(LE4,0,6)
if WQ7(Player(O5))and G7[O5]!=null then
set bj_forLoopBIndex=NF7(GetUnitTypeId(G7[O5]))
set i=1
loop
exitwhen i>5
if LS4[48+j+i]==-1 then
set LS4[48+j+i]=O5
exitwhen true
elseif NF7(GetUnitTypeId(G7[LS4[48+j+i]]))>bj_forLoopBIndex then
set k=5
loop
exitwhen k==i
set LS4[48+j+k]=LS4[48+j+k-1]
set k=k-1
endloop
set LS4[48+j+i]=O5
exitwhen true
endif
set i=i+1
endloop
endif
set O5=O5+1
endloop
set L74=""
set i=1
loop
exitwhen i>5
set LS4[80+i]=LS4[48+i]
set LS4[86+i]=LS4[54+i]
set i=i+1
endloop
endif
endfunction
function MHF takes nothing returns nothing
local integer O5=1
local integer UP=0
local integer MIF=0
local integer MJF=0
local integer MKF=0
local integer i=0
set LP4="MHF"
loop
exitwhen O5>5
if((G7[GetPlayerId(Y7[O5])]==null)and(GetPlayerSlotState(Y7[O5])==PLAYER_SLOT_STATE_PLAYING))then
return
elseif(not WR7(Y7[O5]))then
elseif(GetPlayerController(Y7[O5])==MAP_CONTROL_COMPUTER)then
if(h8[16+GetPlayerId(Y7[O5])]==h7[$E])then
set MKF=MKF+1
elseif(h8[16+GetPlayerId(Y7[O5])]==h7[35])then
set MIF=MIF+1
else
set MJF=MJF+1
endif
else
set UP=GetPlayerId(Y7[O5])
if(IsUnitInRange(G7[UP],JN4,700.))then
set MKF=MKF+1
elseif(IsUnitInRange(G7[UP],JM4,700.))then
set MIF=MIF+1
elseif(IsUnitInRange(G7[UP],JO4,700.))then
set MJF=MJF+1
elseif((j1(G7[UP],L9)<4000.)or(RectContainsUnit(Cz,G7[UP])))then
elseif(RAbsBJ(GetUnitX(G7[UP])-GetUnitY(G7[UP]))<1500.)then
set MKF=MKF+1
elseif(((GetUnitY(G7[UP])>5000.)and(GetUnitY(G7[UP])<6700.))or((GetUnitX(G7[UP])>-7000.)and(GetUnitX(G7[UP])<-5500.)))then
set MIF=MIF+1
elseif(((GetUnitY(G7[UP])>-7500.)and(GetUnitY(G7[UP])<-6300.))or((GetUnitX(G7[UP])>5000.)and(GetUnitX(G7[UP])<6700.)))then
set MJF=MJF+1
endif
endif
set O5=O5+1
endloop
if(HA4<=3)then
set UP=1
else
set UP=2
endif
if((PD4)or((PF4)and(PG4))or((PF4)and(PE4))or((PG4)and(PE4)))then
set UP=5
endif
set i=1
loop
exitwhen i>5
if((WR7(Y7[i]))and(GetPlayerController(Y7[i])==MAP_CONTROL_COMPUTER))then
set O5=GetPlayerId(Y7[i])
if(h8[16+O5]==h7[$E])then
if(((MKF>1)and(K2F()))or((MKF>UP)and(not(K2F()))))then
if((not PG4)and(MIF<UP))then
set h8[16+O5]=h7[35]
set h8[O5]=h7[32]
set eY[64+O5]=1
set MIF=MIF+1
set MKF=MKF-1
elseif((not PE4)and(MJF<UP))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[52]
set eY[64+O5]=2
set MJF=MJF+1
set MKF=MKF-1
endif
endif
elseif(h8[16+O5]==h7[35])then
if(MIF>UP)then
if((not PF4)and(((MKF<1)and(K2F()))or((MKF<UP)and(not(K2F())))))then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$C]
set eY[64+O5]=0
set MKF=MKF+1
set MIF=MIF-1
elseif((not PE4)and(MJF<UP))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[52]
set eY[64+O5]=2
set MJF=MJF+1
set MIF=MIF-1
endif
endif
else
if(MJF>UP)then
if((not PF4)and(((MKF<1)and(K2F()))or((MKF<UP)and(not(K2F())))))then
set h8[16+O5]=h7[$E]
set h8[O5]=h7[$C]
set eY[64+O5]=0
set MKF=MKF+1
set MJF=MJF-1
elseif((not PG4)and(MIF<UP))then
set h8[16+O5]=h7[35]
set h8[O5]=h7[32]
set eY[64+O5]=1
set MIF=MIF+1
set MJF=MJF-1
endif
endif
endif
endif
set i=i+1
endloop
endfunction
function MMF takes nothing returns nothing
local integer O5=1
local integer UP=0
local integer MIF=0
local integer MJF=0
local integer MKF=0
local integer i=0
set LP4="MMF"
loop
exitwhen O5>5
if((G7[GetPlayerId(Z7[O5])]==null)and(GetPlayerSlotState(Z7[O5])==PLAYER_SLOT_STATE_PLAYING))then
return
elseif(not WR7(Z7[O5]))then
elseif(GetPlayerController(Z7[O5])==MAP_CONTROL_COMPUTER)then
if(h8[16+GetPlayerId(Z7[O5])]==h7[114])then
set MKF=MKF+1
elseif(h8[16+GetPlayerId(Z7[O5])]==h7[$87])then
set MIF=MIF+1
else
set MJF=MJF+1
endif
else
set UP=GetPlayerId(Z7[O5])
if(IsUnitInRange(G7[UP],J_4,700.))then
set MKF=MKF+1
elseif(IsUnitInRange(G7[UP],J24,700.))then
set MIF=MIF+1
elseif(IsUnitInRange(G7[UP],K44,700.))then
set MJF=MJF+1
elseif((j1(G7[UP],C9)<4000.)or(RectContainsUnit(cz,G7[UP])))then
elseif(RAbsBJ(GetUnitX(G7[UP])-GetUnitY(G7[UP]))<1500.)then
set MKF=MKF+1
elseif(((GetUnitY(G7[UP])>5000.)and(GetUnitY(G7[UP])<6700.))or((GetUnitX(G7[UP])>-7000.)and(GetUnitX(G7[UP])<-5500.)))then
set MIF=MIF+1
elseif(((GetUnitY(G7[UP])>-7500.)and(GetUnitY(G7[UP])<-6300.))or((GetUnitX(G7[UP])>5000.)and(GetUnitX(G7[UP])<6700.)))then
set MJF=MJF+1
endif
endif
set O5=O5+1
endloop
if(HB4<=3)then
set UP=1
else
set UP=2
endif
if((PD4)or((PF4)and(PG4))or((PF4)and(PE4))or((PG4)and(PE4)))then
set UP=5
endif
set i=1
loop
exitwhen i>5
if((WR7(Z7[i]))and(GetPlayerController(Z7[i])==MAP_CONTROL_COMPUTER))then
set O5=GetPlayerId(Z7[i])
if(h8[16+O5]==h7[114])then
if(((MKF>1)and(K2F()))or((MKF>UP)and(not(K2F()))))then
if((not PE4)and(MJF<UP))then
set h8[16+O5]=h7[$9B]
set h8[O5]=h7[$98]
set eY[64+O5]=2
set MJF=MJF+1
set MKF=MKF-1
elseif((not PG4)and(MIF<UP))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$84]
set eY[64+O5]=1
set MIF=MIF+1
set MKF=MKF-1
endif
endif
elseif(h8[16+O5]==h7[$87])then
if(MIF>UP)then
if((not PF4)and(((MKF<1)and(K2F()))or((MKF<UP)and(not(K2F())))))then
set h8[16+O5]=h7[114]
set h8[O5]=h7[112]
set eY[64+O5]=0
set MKF=MKF+1
set MIF=MIF-1
elseif((not PE4)and(MJF<UP))then
set h8[16+O5]=h7[$9B]
set h8[O5]=h7[$98]
set eY[64+O5]=2
set MJF=MJF+1
set MIF=MIF-1
endif
endif
else
if(MJF>UP)then
if((not PF4)and(((MKF<1)and(K2F()))or((MKF<UP)and(not(K2F())))))then
set h8[16+O5]=h7[114]
set h8[O5]=h7[112]
set eY[64+O5]=0
set MKF=MKF+1
set MJF=MJF-1
elseif((not PG4)and(MIF<UP))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$84]
set eY[64+O5]=1
set MIF=MIF+1
set MJF=MJF-1
endif
endif
endif
endif
set i=i+1
endloop
endfunction
function MNF takes nothing returns nothing
if((Bz>26.)and((not PD4)or((PF4)and(PG4))or((PF4)and(PE4))or((PG4)and(PE4)))and((Bz<=Q94-30)or(Bz>=Q94-18)))then
if(QS4!=null)then
call MHF()
endif
if(QT4!=null)then
call MMF()
endif
endif
endfunction
function MOF takes nothing returns nothing
local unit it=QA7(GetHandleId(GetTriggeringTrigger()),"Hero")
local integer ki
set LP4="MOF"
if((GetUnitAbilityLevel(it,1093684056)>0)and(GetUnitLifePercent(it)>90.)and(not IsUnitHidden(it))and(iU(it)))then
set ki=GetHandleId(GetOwningPlayer(it))
if((GetHeroStr(it,true)>(30+(4*GetHeroLevel(it))))and(GetHeroStr(it,false)>($F+GetHeroLevel(it))))then
if(IsTriggerEnabled(Q67(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0243)
elseif(not IsTriggerEnabled(Q67(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0245)
endif
elseif((GetHeroStr(it,true)<(20+(2*GetHeroLevel(it)))))then
if(IsTriggerEnabled(Q67(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
elseif(not IsTriggerEnabled(Q67(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0242)
endif
elseif(IsTriggerEnabled(Q67(ki,"MorphStr")))then
call IssueImmediateOrderById(it,$D0243)
elseif(IsTriggerEnabled(Q67(ki,"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
endif
endif
set it=null
endfunction
function I9F takes nothing returns nothing
local trigger t
set LP4="I9F"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM",t)
call QG7(GetHandleId(t),"Hero",GetTriggerUnit())
call TriggerRegisterTimerEventPeriodic(t,1.)
call TriggerAddAction(t,function MOF)
else
set t=Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAM")
call QG7(GetHandleId(t),"Hero",GetTriggerUnit())
endif
endfunction
function MPF takes unit it,integer X5 returns nothing
if((it!=null)and(is(it))and(IsUnitInRange(it,GetTriggerUnit(),800.))and(GetUnitLifePercent(it)>50.))then
call IssuePointOrderById(it,X5,GetOrderPointX(),GetOrderPointY())
endif
endfunction
function MQF takes nothing returns nothing
local integer X5=GetIssuedOrderId()
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="MQF"
if((X5<$D0020)and(X5!=$D0005)and(X5!=$D0006)and((not G0[16+O5])or(X5==$D0012)))then
call MPF(G7[16+O5],X5)
call MPF(G7[32+O5],X5)
call MPF(G7[48+O5],X5)
endif
endfunction
function I7F takes nothing returns nothing
local trigger t
set LP4="I7F"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasMM")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasMM",t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddAction(t,function MQF)
endif
endfunction
function MRF takes nothing returns boolean
return(GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero"))
endfunction
function MSF takes unit it,integer MTF,boolean MUF returns nothing
set GZ[304+GetPlayerId(GetOwningPlayer(it))]=MUF
call SetPlayerAbilityAvailable(GetOwningPlayer(it),MTF,MUF)
endfunction
function MVF takes nothing returns nothing
local unit IB=GetAttacker()
local unit m5=GetTriggerUnit()
local integer i1=GetUnitTypeId(IB)
local integer O5=GetPlayerId(GetOwningPlayer(IB))
local integer kt
local integer MTF
local real MWF=.0
local real MXF=.0
local integer UP
local boolean J4
local integer X5=0
set LP4="MVF"
if((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if((IsUnitType(m5,UNIT_TYPE_HERO)or IsUnitType(m5,UNIT_TYPE_STRUCTURE)))then
set J4=(i1!=1211117654)and(PC7(IB,$D00AB,1093747504))
else
set J4=(i1==1211117654)and(PC7(IB,$D00AA,1093747504))
endif
elseif(i1==1162032951)then
set J4=((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>hq[272+O5])or((Bz+30.)<hq[O5])))
call MSF(IB,1093679446,J4)
set X5=$D011F
set MTF=1093679446
elseif(i1==1160785972)then
set MWF=37+(GetHeroLevel(IB)*2.88)
set MXF=$A+$A*(GetUnitAbilityLevel(IB,1095263841))
call MSF(IB,1095263841,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>100.)or(O37(m5))))or((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>75.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>MWF)and(GetWidgetLife(m5)<MWF+MXF)))
set X5=$D00CE
set MTF=1095263841
elseif(i1==1429221456)then
set MWF=49+(GetHeroLevel(IB)*2.68)
set MXF=GetUnitState(IB,UNIT_STATE_MANA)*(.05+.01*(GetUnitAbilityLevel(IB,1093685065)))
call MSF(IB,1093685065,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(O37(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>70.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>MWF)and(GetWidgetLife(m5)<MWF+MXF)))
set X5=$D011F
set MTF=1093685065
elseif(i1==1315074670)then
call MSF(IB,1093677622,(IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(O37(m5))))
set MTF=1093677622
set X5=$D0114
elseif(i1==1164799855)then
set MWF=47+(GetHeroLevel(IB)*2.68)
set UP=GetUnitAbilityLevel(IB,1093682265)
if(UP==0)then
set UP=GetUnitAbilityLevel(IB,1093752642)
if(UP>0)then
set MXF=DistanceBetweenPoints(GetUnitLoc(m5),GetUnitLoc(IB))*(.1+.05*(GetUnitAbilityLevel(IB,1093752642)))
call MSF(IB,1093752642,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(O37(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>68.))or((GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.)and(GetWidgetLife(m5)>MWF)and(GetWidgetLife(m5)<MWF+MXF)))
set MTF=1093752642
endif
else
set MXF=DistanceBetweenPoints(GetUnitLoc(m5),GetUnitLoc(IB))*(.1+.05*(GetUnitAbilityLevel(IB,1093682265)))
call MSF(IB,1093682265,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(O37(m5))))or((GetHeroLevel(IB)>19)and(GetUnitManaPercent(IB)>75.))or((GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.)and(GetWidgetLife(m5)>MWF)and(GetWidgetLife(m5)<MWF+MXF)))
set MTF=1093682265
endif
set X5=$D011F
elseif(i1==1311781185)then
set MXF=GetHeroInt(IB,true)*.15*(GetUnitAbilityLevel(IB,1093684314))
call MSF(IB,1093684314,((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitState(IB,UNIT_STATE_MANA)>150.)or(O37(m5))))or((GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>70.))or((GetHeroLevel(IB)>5)and(GetUnitState(IB,UNIT_STATE_MANA)>150.)and(GetWidgetLife(m5)>MWF)and(GetWidgetLife(m5)<MWF+MXF)))
set MTF=1093684314
set X5=$D011F
elseif(i1==1211117649)then
call MSF(IB,1093685582,(GetUnitState(IB,UNIT_STATE_LIFE)>100.)and((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(IB)>60.)or(O37(m5))))or((GetHeroLevel(IB)>$E)and(GetUnitLifePercent(IB)>70.)))
set MTF=1093685582
set X5=$D011F
endif
if((GZ[304+O5])and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set kt=GetUnitAbilityLevel(IB,MTF)
if((XT7(IB))or(hq[32+O5]>Bz)or(kt==0)or(GetUnitAbilityLevel(IB,1110455638)>0))then
set GZ[304+O5]=false
elseif(i1==1162032951)then
if(kt<=2)then
set hq[32+O5]=Bz+5.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>20.
elseif(i1==1160785972)then
if(kt<=2)then
set hq[32+O5]=Bz+5.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>8.
elseif(i1==1429221456)then
if(kt<=3)then
set hq[32+O5]=Bz+8.-(2.*kt)
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>100.
elseif(i1==1315074670)then
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>12.
elseif(i1==1164799855)then
if(kt<=3)then
set hq[32+O5]=Bz+7.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>35.+(5.*kt)
elseif(i1==1311781185)then
if(kt<=3)then
set hq[32+O5]=Bz+4.-kt
endif
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_MANA)>15.
elseif(i1==1211117649)then
set GZ[304+O5]=GetUnitState(IB,UNIT_STATE_LIFE)>101.
endif
endif
if IssueImmediateOrderById(IB,X5)then
call IssueTargetOrderById(IB,$D000F,m5)
endif
set IB=null
set m5=null
endfunction
function MYF takes nothing returns boolean
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit it=QA7(JZ7,"Unit")
local integer O5=GetPlayerId(GetOwningPlayer(it))
if(not IF4[O5])and(GetUnitCurrentOrder(it)==$D000F)and(h4[336+O5]==null)and(Bz>hq[832+O5])then
if IsUnitEnemy(GetTriggerUnit(),Player(O5))and S37(GetTriggerUnit())and GetWidgetLife(GetTriggerUnit())>.405 and IsUnitVisible(GetTriggerUnit(),Player(O5))then
call IssueTargetOrderById(it,$D000F,GetTriggerUnit())
endif
endif
return false
endfunction
function MZF takes nothing returns boolean
local trigger t=null
if(GetLearnedSkill()==1093677130)then
call DestroyTrigger(GetTriggeringTrigger())
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,GetTriggerUnit(),600.,null)
call TriggerAddCondition(t,Condition(function MYF))
call QG7(GetHandleId(t),"Unit",GetTriggerUnit())
set t=null
endif
return false
endfunction
function IFF takes nothing returns nothing
local trigger t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_HERO_SKILL)
call TriggerAddCondition(t,Condition(function MZF))
set t=null
endfunction
function I4F takes nothing returns nothing
local trigger t
set LP4="I4F"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasOrb")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasOrb",t)
call QG7(GetHandleId(t),"Hero",GetTriggerUnit())
if(WM7(GetOwningPlayer(GetTriggerUnit())))then
call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
call c6(t,EVENT_PLAYER_UNIT_ATTACKED)
else
call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
call B6(t,EVENT_PLAYER_UNIT_ATTACKED)
endif
call TriggerRegisterPlayerUnitEvent(t,A7,EVENT_PLAYER_UNIT_ATTACKED,Q54)
call TriggerAddCondition(t,Condition(function MRF))
call TriggerAddAction(t,function MVF)
endif
endfunction
function MAF takes nothing returns boolean
return(((GetUnitTypeId(GetTriggerUnit())==1848652103)or(GetUnitTypeId(GetTriggerUnit())==1848652099)or(GetUnitTypeId(GetTriggerUnit())==1848652088)or(GetUnitTypeId(GetTriggerUnit())==1848651828))and(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function MBF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="MBF"
if((h4[O5]==null)and(not GZ[272+O5])and((GetUnitLifePercent(GetTriggerUnit())<50.)or((G7[O5]!=null)and(GetHeroLevel(G7[O5])<$A))))then
set GZ[272+O5]=true
call TriggerSleepAction(.2)
call PV7(GetTriggerUnit(),$D0012,h9[O5])
call TriggerSleepAction(1.)
set GZ[272+O5]=false
endif
endfunction
function IEF takes nothing returns nothing
local trigger t
set LP4="IEF"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q54)
call TriggerAddCondition(t,Condition(function MAF))
call TriggerAddAction(t,function MBF)
endif
endfunction
function MCF takes nothing returns boolean
return((GetUnitAbilityLevel(GetTriggerUnit(),1097167976)==1)and(not IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))!=null
endfunction
function M3F takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="M3F"
if(((h4[O5]==null)or(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<400.)or(GetRandomInt(1,$A)>4))and(GetUnitCurrentOrder(GetTriggerUnit())!=$D0012))then
call TriggerSleepAction(.5)
call PV7(GetTriggerUnit(),$D0012,h9[O5])
endif
endfunction
function IDF takes nothing returns nothing
local trigger t
set LP4="IDF"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q54)
call TriggerAddCondition(t,Condition(function MCF))
call TriggerAddAction(t,function M3F)
endif
endfunction
function M6F takes nothing returns boolean
return(((GetUnitTypeId(GetTriggerUnit())==1697656907)or(GetUnitTypeId(GetTriggerUnit())==1697656905)or(GetUnitTypeId(GetTriggerUnit())==1697656908))and(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endfunction
function MLF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set LP4="MLF"
call TriggerSleepAction(.5)
call PV7(GetTriggerUnit(),$D0012,h9[512+O5])
if(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)<200.)then
call PV7(GetTriggerUnit(),$D022D,PL7(GetTriggerUnit()))
endif
endfunction
function I8F takes nothing returns nothing
local trigger t
set LP4="I8F"
if(Q67(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM")==null)then
set t=CreateTrigger()
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"HasAtkM",t)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(GetTriggerUnit()),EVENT_PLAYER_UNIT_ATTACKED,Q54)
call TriggerAddCondition(t,Condition(function M6F))
call TriggerAddAction(t,function MLF)
endif
endfunction
function M1F takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(GetUnitAbilityLevel(GetFilterUnit(),1110455378)>0))and(GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1113815346)==0))!=null
endfunction
function M0F takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(bj_lastLoadedUnit)))or(GetUnitAbilityLevel(GetFilterUnit(),1110455378)>0))and(GetUnitAbilityLevel(GetFilterUnit(),1113815395)==0)and(GetUnitAbilityLevel(GetFilterUnit(),1113815346)==0))!=null
endfunction
function M5F takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
return((GetOwningPlayer(GetFilterUnit())==Player(bj_forLoopAIndexEnd))and((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function M2F takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),GetUnitUserData(GetEnumUnit())+1)
call GroupAddUnit(iA,GetEnumUnit())
endfunction
function M_F takes nothing returns nothing
call SetUnitUserData(GetEnumUnit(),0)
endfunction
function N4F takes nothing returns nothing
local integer O5=1
local group jU=QL7(GetHandleId(GetTriggeringTrigger()),"MGrp")
local boolexpr X77=RE7(GetHandleId(GetTriggeringTrigger()),"MFilt")
local unit MQ7=null
set LP4="N4F"
loop
if O5==6 then
set O5=7
endif
exitwhen O5>$B
if(GetUnitTypeId(G7[O5])==1211117643)and(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)and((X_4[O5]!=1)or(GetRandomInt(1,$A)<=7))then
call GroupClear(jU)
call GroupClear(iA)
set bj_forLoopAIndexEnd=O5
set bj_lastLoadedUnit=G7[O5]
call GroupEnumUnitsOfPlayer(jU,Player(O5),X77)
loop
set MQ7=FirstOfGroup(jU)
exitwhen MQ7==null
call GroupRemoveUnit(jU,MQ7)
if(P87(400.,MQ7,Condition(function M0F))>0)then
call IssueImmediateOrderById(MQ7,$D024C)
elseif((GetUnitUserData(GetEnumUnit())<2)and(P87(400.,MQ7,Condition(function T67))>3)and(P87(1200.,MQ7,Condition(function M0F))==0))then
call IssueImmediateOrderById(MQ7,$D024C)
call GroupClear(H9)
call GroupEnumUnitsInRange(H9,GetUnitX(MQ7),GetUnitY(MQ7),400.,X77)
call ForGroup(H9,function M2F)
endif
endloop
call ForGroup(iA,function M_F)
endif
set O5=O5+1
endloop
set jU=null
set X77=null
set MQ7=null
endfunction
function N7F takes nothing returns boolean
return(((GetLearnedSkill()==1093681483)or((GetLearnedSkill()==1093748313)))and(not IsUnitIllusion(GetTriggerUnit()))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function Uzv takes nothing returns boolean
local integer i1=GetUnitTypeId(GetTriggerUnit())
return(((i1==1865429304)or(i1==1865429042)or(i1==1865429058)or(i1==1865429314))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function UZv takes nothing returns nothing
if(hq[$F0+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]>Bz)then
call SetUnitUserData(GetTriggerUnit(),1)
endif
endfunction
function N8F takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="N8F"
call DisableTrigger(GetTriggeringTrigger())
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function N4F)
set Hc=Location(.0,.0)
call QP7(GetHandleId(t),"MGrp",CreateGroup())
call QU7(GetHandleId(t),"MFilt",Condition(function M5F))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function qg takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="qg"
call ky(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function N7F))
call TriggerAddAction(t,function N8F)
endfunction
function N9F takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==1697657392)and(GetWidgetLife(GetFilterUnit())>.405))
endfunction
function NDF takes nothing returns nothing
if((GetPlayerController(GetOwningPlayer(GetEnumUnit()))!=MAP_CONTROL_USER)and((X_4[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]!=1)or(GetRandomInt(1,$A)<=7)))then
call MoveLocation(Hc,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()))
if((P77(400.,Hc,Condition(function M1F))>0)and(P77(1100.,Hc,Condition(function V47))>0))then
call IssueImmediateOrderById(GetEnumUnit(),$D024C)
endif
endif
endfunction
function NEF takes nothing returns nothing
local integer O5=1
local group jU=QL7(GetHandleId(GetTriggeringTrigger()),"MGrp")
local boolexpr X77=RE7(GetHandleId(GetTriggeringTrigger()),"MFilt")
set LP4="NEF"
loop
if((GetPlayerController(Y7[O5])==MAP_CONTROL_COMPUTER)and(GetUnitTypeId(G7[GetPlayerId(Y7[O5])])==1160786265))then
call GroupClear(jU)
call GroupEnumUnitsOfPlayer(jU,Y7[O5],X77)
call ForGroup(jU,function NDF)
endif
if((GetPlayerController(Z7[O5])==MAP_CONTROL_COMPUTER)and(GetUnitTypeId(G7[GetPlayerId(Z7[O5])])==1160786265))then
call GroupClear(jU)
call GroupEnumUnitsOfPlayer(jU,Z7[O5],X77)
call ForGroup(jU,function NDF)
endif
set O5=O5+1
endloop
set jU=null
set X77=null
endfunction
function NFF takes nothing returns boolean
return((GetLearnedSkill()==1093685840)and(not IsUnitIllusion(GetTriggerUnit()))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NGF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="NGF"
call DisableTrigger(GetTriggeringTrigger())
call TriggerRegisterTimerEventPeriodic(t,1.5)
call TriggerAddAction(t,function NEF)
set Hc=Location(.0,.0)
call QP7(GetHandleId(t),"MGrp",CreateGroup())
call QU7(GetHandleId(t),"MFilt",Condition(function N9F))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function P98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P98"
call ky(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function NFF))
call TriggerAddAction(t,function NGF)
endfunction
function NHF takes unit J67 returns location
call MoveLocation(HA,(LoadReal(C7,(GetHandleId(J67)),(7400))),(LoadReal(C7,(GetHandleId(J67)),(7500))))
return HA
endfunction
function NIF takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))))then
call NHF(GetFilterUnit())
return((N67(GetLocationX(HA),GetLocationY(HA),GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit())))>3000.)
endif
return false
endfunction
function NJF takes nothing returns nothing
local unit NKF=GetTriggerUnit()
local player pl=GetOwningPlayer(NKF)
local integer O5=GetPlayerId(GetOwningPlayer(NKF))
local integer UP=0
set LP4="NJF"
call SetPlayerAbilityAvailable(pl,1093687351,false)
call SetPlayerAbilityAvailable(pl,1093748789,false)
set h4[80+GetPlayerId(pl)]=null
if(h4[288+O5]==null)then
set h4[288+O5]=VX7(1500.,NKF)
endif
if(O37(NKF))then
call PV7(NKF,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
set hq[512+O5]=Bz+5.+I2R($F*GetUnitAbilityLevel(NKF,1093679445))
else
call PV7(NKF,$D000F,h8[O5])
set hq[512+O5]=Bz+5.+I2R($F*GetUnitAbilityLevel(NKF,1093679445))
endif
loop
call NX7(.5)
exitwhen(GetUnitAbilityLevel(NKF,1110454347)==0)
if(not G0[$80+O5])then
set h4[288+O5]=null
elseif((h4[288+O5]==null)or(not OA7(h4[288+O5]))or(SB7(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],pl))))then
set h4[288+O5]=VX7(1500.,NKF)
endif
if((O37(NKF))or(not G0[$80+O5])or(G0[64+O5])or(G0[O5]))then
call PV7(NKF,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
else
call J3(NKF,true)
endif
endloop
if((h4[288+O5]!=null)and(OA7(h4[288+O5]))and(IsUnitInRange(NKF,h4[288+O5],1200.)))then
call ZSE(O5,h4[288+O5],false,false)
endif
call SetPlayerAbilityAvailable(pl,1093687351,true)
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set NKF=null
set pl=null
endfunction
function NMF takes nothing returns boolean
return((T87())and(GetUnitAbilityLevel(GetFilterUnit(),1113812327)==0))
endfunction
function NNF takes nothing returns boolean
return((k3())and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_MAGIC_IMMUNE))and(GetUnitAbilityLevel(GetFilterUnit(),1113812327)==0))!=null
endfunction
function NOF takes nothing returns nothing
local unit NKF=GetTriggerUnit()
local unit NPF=null
local integer O5=GetPlayerId(GetOwningPlayer(NKF))
local real kl
set LP4="NOF"
if(O37(NKF))then
call PV7(NKF,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
call PV7(NKF,$D0003,h4[288+O5])
set hq[512+O5]=Bz+5.
else
call PV7(NKF,$D000F,h8[O5])
set hq[512+O5]=Bz+5.
endif
loop
call NX7(.3)
exitwhen(GetUnitAbilityLevel(NKF,1112041075)==0)
if(not G0[$80+O5])then
set h4[288+O5]=null
elseif((h4[288+O5]==null)or(not OA7(h4[288+O5]))or(SB7(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(NKF)))))then
set h4[288+O5]=O27(1000.,PU7(NKF),Condition(function NMF))
endif
if((h4[288+O5]!=null)and(P87(800.,h4[288+O5],Condition(function TK7))>0)and((not O37(h4[288+O5]))or(not IsUnitInRange(h4[288+O5],NKF,400.))))then
set h4[288+O5]=null
endif
if((O37(NKF))or(G0[O5])or(not G0[$80+O5])or(G0[64+O5]))then
call PV7(NKF,$D0012,h9[O5])
elseif(h4[288+O5]!=null)then
set NPF=null
if(GetUnitAbilityLevel(h4[288+O5],1113812327)==0)then
set kl=Atan2(GetUnitY(h4[288+O5])-GetUnitY(NKF),GetUnitX(h4[288+O5])-GetUnitX(NKF))
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+250.*Cos(kl),GetUnitY(h4[288+O5])+250.*Sin(kl))
elseif(GetUnitAbilityLevel(h4[288+O5],1113812327)>0)then
if((GetUnitLifePercent(h4[288+O5])<45.)or((GetHeroLevel(NKF)>$A)and(h4[O5]==h4[288+O5])and(GetUnitLifePercent(h4[288+O5])<65.)))then
if(IsUnitInRange(NKF,h4[288+O5],200.))then
call UnitRemoveAbility(NKF,1112041075)
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
else
set kl=Atan2(GetUnitY(h4[288+O5])-GetUnitY(NKF),GetUnitX(h4[288+O5])-GetUnitX(NKF))
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+250.*Cos(kl),GetUnitY(h4[288+O5])+250.*Sin(kl))
endif
else
set h4[288+O5]=null
endif
endif
else
if((NPF!=null)and(GetUnitAbilityLevel(NPF,1113812327)>0))then
set NPF=null
endif
if((NPF==null)and(GetHeroLevel(NKF)>$A)and(P87(800.,NKF,Condition(function T87))<=1))then
set NPF=P47(600.,PU7(NKF),Condition(function NNF))
endif
if(NPF!=null)then
call IssuePointOrderById(NKF,$D0012,GetUnitX(NPF),GetUnitY(NPF))
else
call PV7(NKF,$D0012,h9[O5])
endif
endif
endloop
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set NKF=null
set NPF=null
endfunction
function NQF takes nothing returns nothing
local unit NKF=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(NKF))
local real X47
local boolean J4
set LP4="NQF"
if(GetUnitTypeId(NKF)==1315334514)then
set X47=150.
elseif(GetUnitTypeId(NKF)==1162032439)then
set X47=350.
endif
set h4[288+O5]=VX7(1500.,NKF)
if(h4[288+O5]!=null)then
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
else
call PV7(NKF,$D000F,h8[O5])
endif
set hq[512+O5]=Bz+30.
loop
call NX7(.4)
exitwhen((GetUnitAbilityLevel(NKF,1110456148)==0)or(O37(NKF)))
if((h4[288+O5]!=null)and(IsUnitInRange(h4[288+O5],NKF,X47)))then
if(GetUnitTypeId(NKF)==1315334514)then
if(GetUnitCurrentOrder(NKF)!=$D0131)then
call PC7(NKF,$D0131,1093810506)
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(NKF),1093681462,true)
set GZ[O5]=true
call J8(O5,PC7(NKF,$D0272,1093677363))
endif
elseif(OV7(NKF))then
set J4=(G0[O5])or(G0[64+O5])or(not G0[$80+O5])
if((h4[288+O5]!=null)and((J4)or(not OA7(h4[288+O5]))or(SB7(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(NKF))))))then
set h4[288+O5]=null
call PV7(NKF,$D0012,h9[O5])
endif
if((h4[288+O5]==null)and(not J4))then
set h4[288+O5]=VX7(1200.,NKF)
endif
if((h4[288+O5]!=null)and(not J4)and(not O37(NKF)))then
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
elseif((O37(NKF))or(J4))then
call PV7(NKF,$D0012,h9[O5])
endif
endif
endloop
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set GZ[272+O5]=false
set NKF=null
endfunction
function NRF takes nothing returns nothing
local unit NKF=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(NKF))
local integer NSF
local integer UP
set LP4="NRF"
if(O37(NKF))then
call PV7(NKF,$D0012,h9[O5])
set NKF=null
return
endif
if(GetUnitTypeId(NKF)==1315007329)then
set NSF=1110455864
call SetPlayerAbilityAvailable(GetOwningPlayer(NKF),1093677108,false)
elseif(GetUnitTypeId(NKF)==1160785972)then
set NSF=1110456118
else
set NSF=1110456148
endif
set h4[288+O5]=VX7(1500.,NKF)
if(h4[288+O5]!=null)then
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
else
call J3(NKF,true)
endif
set hq[512+O5]=Bz+30.
loop
call NX7(.5)
exitwhen((GetUnitAbilityLevel(NKF,NSF)==0)or(O37(NKF)))
if((h4[288+O5]!=null)and((G0[O5])or(G0[64+O5])or(not G0[$80+O5])or(not OA7(h4[288+O5]))or(SB7(h4[288+O5]))or((kD(h4[288+O5]))and(not IsUnitVisible(h4[288+O5],GetOwningPlayer(NKF))))))then
set h4[288+O5]=null
call PV7(NKF,$D0012,h9[O5])
endif
if((h4[288+O5]!=null)and(not O37(NKF)))then
if((NSF!=1110455864)and(IsUnitInRange(NKF,h4[288+O5],300.)))then
call UnitRemoveAbility(NKF,NSF)
set GZ[O5]=true
if((GetUnitTypeId(NKF)!=1160785972)or(not PC7(NKF,$D0084,1093677872)))then
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
endif
set GZ[O5]=false
elseif(NSF==1110455864)then
call IssueTargetOrderById(NKF,$D000F,h4[288+O5])
else
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
endif
elseif((h4[288+O5]==null)and(not O37(NKF))and(not G0[O5])and(not G0[64+O5])and(G0[$80+O5]))then
set h4[288+O5]=VX7(1500.,NKF)
if(h4[288+O5]!=null)then
call IssuePointOrderById(NKF,$D0003,GetUnitX(h4[288+O5])+5.,GetUnitY(h4[288+O5])+5.)
endif
else
call PV7(NKF,$D0012,h9[O5])
endif
endloop
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_USE_ITEM)then
set GZ[272+O5]=false
endif
set hq[512+O5]=Bz+3.
set h4[288+O5]=null
set NKF=null
endfunction
function NTF takes nothing returns boolean
return((GetSpellAbilityId()==1093677391)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NUF takes nothing returns nothing
local unit j5=GetTriggerUnit()
set LP4="NUF"
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call NX7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call NX7(.0)
call J3(j5,false)
call NX7(1.)
if(N37(j5,PL7(j5))<1500.)then
set h9[GetPlayerId(GetOwningPlayer(j5))]=PL7(j5)
call SJ7(j5,true)
else
call XG7(j5)
endif
set j5=null
endfunction
function po takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="po"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NTF))
call TriggerAddAction(t,function NUF)
endfunction
function NVF takes nothing returns boolean
return((GetSpellAbilityId()==1093682764)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NWF takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real NXF=.0
set LP4="NWF"
call SetPlayerController(pl,MAP_CONTROL_NONE)
call IUF(j5,m5)
set NXF=Bz
loop
call NX7(.5)
exitwhen((GetUnitAbilityLevel(m5,1110455113)==0)or(IsUnitDeadBJ(m5))or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+30.
if((IsUnitAliveBJ(m5))and(not O37(j5)))then
call IssueTargetOrderById(j5,$D000F,m5)
else
call J3(j5,false)
endif
set m5=null
set j5=null
set pl=null
endfunction
function MK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MK8"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NVF))
call TriggerAddAction(t,function NWF)
endfunction
function NYF takes nothing returns boolean
return((GetSpellAbilityId()==1093677649 or GetSpellAbilityId()==1093747769)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NZF takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real NXF=.0
set LP4="NZF"
call SetPlayerController(pl,MAP_CONTROL_NONE)
call IUF(j5,m5)
set NXF=Bz
loop
call NX7(.5)
exitwhen((GetUnitAbilityLevel(m5,1110455362)==0)or(IsUnitDeadBJ(m5))or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+120.
if((not IsUnitDeadBJ(m5))and(not O37(j5))and(not PW7(j5,$D0097,1093683019,m5)))then
call IssueTargetOrderById(j5,$D000F,m5)
else
call J3(j5,false)
endif
set m5=null
set j5=null
set pl=null
endfunction
function K48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="K48"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NYF))
call TriggerAddAction(t,function NZF)
endfunction
function NAF takes nothing returns boolean
return((GetSpellAbilityId()==1093747288)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NBF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local player pl=GetOwningPlayer(j5)
local real NXF=.0
set LP4="NBF"
call SetPlayerController(pl,MAP_CONTROL_NONE)
set NXF=Bz
set m5=K2(400.,HC[GetPlayerId(pl)])
if(m5!=null)then
call IUF(j5,m5)
endif
loop
call NX7(.5)
exitwhen((GetUnitCurrentOrder(j5)!=$D00DC)or(IsUnitDeadBJ(j5)))
endloop
call SetPlayerController(pl,MAP_CONTROL_COMPUTER)
set hq[GetPlayerId(pl)]=Bz+210.-(GetUnitAbilityLevel(j5,1093747288)*10.)
call J3(j5,false)
set j5=null
set m5=null
set pl=null
endfunction
function I88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="I88"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NAF))
call TriggerAddAction(t,function NBF)
endfunction
function NCF takes nothing returns boolean
return((GetSpellAbilityId()==1093678160)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function N3F takes nothing returns nothing
local unit j5=GetTriggerUnit()
set LP4="N3F"
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call NX7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call NX7(.0)
if(GetSpellTargetUnit()!=null)then
call IUF(j5,GetSpellTargetUnit())
endif
set j5=null
endfunction
function PV takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PV"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function NCF))
call TriggerAddAction(t,function N3F)
endfunction
function N6F takes nothing returns boolean
return((GetSpellAbilityId()==1093684561 or GetSpellAbilityId()==1093747254)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function NLF takes unit it,integer O5 returns nothing
if(N37(h9[O5],it)<400.)then
set h8[O5]=h9[O5]
set h9[O5]=PL7(it)
elseif(N37(h8[O5],it)<400.)then
set h9[O5]=h8[O5]
if(IsUnitAlly(it,Y7[0]))then
set h8[O5]=h7[18]
else
set h8[O5]=h7[118]
endif
endif
endfunction
function N1F takes unit it,integer O5,boolean J4 returns nothing
local unit m5=null
set LP4="wcv"
if(not J4)then
if((eY[O5]!=3)and(eY[O5]!=4))then
call PV7(it,$D000F,h8[O5])
else
set m5=O27(1200.,PU7(it),Condition(function k8))
set J4=((m5!=null)and(IssuePointOrderById(it,$D000F,GetUnitX(m5),GetUnitY(m5))))or(PV7(it,$D000F,h8[O5]))
endif
endif
set m5=null
endfunction
function N0F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
set LP4="N0F"
set GZ[O5]=false
set GZ[272+O5]=O37(j5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call NX7(.5)
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call NX7(1.5)
set h8[512+O5]=h8[16+O5]
set h9[512+O5]=h9[16+O5]
set h8[528+O5]=h8[16+O5]
set h9[528+O5]=h9[16+O5]
loop
exitwhen(not IsUnitHidden(j5))
call NX7(1.)
endloop
if(OA7(j5))then
call XG7(j5)
endif
set j5=null
endfunction
function RQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RQ8"
call ky(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function N6F))
call TriggerAddAction(t,function N0F)
endfunction
function N5F takes nothing returns boolean
local integer X5=GetIssuedOrderId()
local integer i=GetUnitTypeId(GetTriggerUnit())
set LP4="N5F"
if(X5!=$D024D)and(X5!=$D0011)and(X5!=$D024E)and(not IsUnitInRange(GetTriggerUnit(),G7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],50.))then
if i==1966092359 or i==1966092361 then
call DisableTrigger(GetTriggeringTrigger())
call IssueImmediateOrderById(GetTriggerUnit(),$D024D)
call EnableTrigger(GetTriggeringTrigger())
endif
endif
return false
endfunction
function aiExorcismFilter takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1966092359 and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(bj_lastLoadedUnit))
endfunction
function N2F takes nothing returns nothing
local unit MQ7=GetEnumUnit()
local player pl=GetOwningPlayer(MQ7)
local trigger t=Q67(GetHandleId(pl),"ExorTrig")
local integer i=GetUnitCurrentOrder(MQ7)
if N37(MQ7,bj_lastLoadedUnit)>750. then
call DisableTrigger(t)
call IssuePointOrderById(MQ7,$D0012,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit))
call EnableTrigger(t)
elseif((i==0)or(i==$D0012 and N37(MQ7,bj_lastLoadedUnit)<450.))then
call IssueImmediateOrderById(MQ7,$D024D)
endif
set MQ7=null
set t=null
set pl=null
endfunction
function N_F takes nothing returns nothing
local unit MQ7=GetEnumUnit()
local player pl=GetOwningPlayer(MQ7)
local trigger t=Q67(GetHandleId(pl),"NAttTrig")
local integer i=GetUnitCurrentOrder(MQ7)
if N37(MQ7,bj_lastLoadedUnit)>350. then
call DisableTrigger(t)
call IssuePointOrderById(MQ7,$D0012,GetUnitX(bj_lastLoadedUnit),GetUnitY(bj_lastLoadedUnit))
call EnableTrigger(t)
elseif((i==0)or(i==$D0012 and N37(MQ7,bj_lastLoadedUnit)<200.))then
call IssueImmediateOrderById(MQ7,$D024D)
endif
set MQ7=null
set t=null
set pl=null
endfunction
function O4F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real GSF=Bz+29.5
local trigger t=Q67(GetHandleId(pl),"ExorTrig")
local integer O7F=GetSpellAbilityId()
local group O8F=QL7(GetHandleId(pl),"ExorG")
set LP4="O4F"
set hq[GetPlayerId(pl)]=Bz+120.
call RemoveGuardPosition(j5)
if(t==null)then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,pl,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,null)
call TriggerAddCondition(t,Condition(function N5F))
call QI7(GetHandleId(pl),"ExorTrig",t)
set O8F=CreateGroup()
call QP7(GetHandleId(pl),"ExorG",O8F)
else
call EnableTrigger(t)
call GroupClear(O8F)
endif
loop
call TriggerSleepAction(.5)
if((iU(j5))and(GetUnitCurrentOrder(j5)!=$D000F)and(P87(750.,j5,Condition(function k0))==0)and(not O37(j5))and((GetUnitLifePercent(j5)>90.)or(not G0[GetPlayerId(GetOwningPlayer(j5))])))then
call PV7(j5,$D000F,h8[GetPlayerId(GetOwningPlayer(j5))])
endif
exitwhen((Bz>GSF)or(not OA7(j5)))
set bj_lastLoadedUnit=j5
call ForGroup(O8F,function N2F)
endloop
call DisableTrigger(t)
set t=null
set j5=null
endfunction
function O9F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local player pl=GetOwningPlayer(j5)
local real GSF=Bz+9.5
local trigger t=Q67(GetHandleId(pl),"NAttTrig")
local integer O7F=GetSpellAbilityId()
local group O8F=QL7(GetHandleId(pl),"NAttG")
set LP4="O9F"
call RemoveGuardPosition(j5)
if(t==null)then
set t=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_ORDER,null)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(j5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,null)
call TriggerAddCondition(t,Condition(function N5F))
call QI7(GetHandleId(GetOwningPlayer(GetTriggerUnit())),"NAttTrig",t)
set O8F=CreateGroup()
call QP7(GetHandleId(pl),"NAttG",O8F)
else
call EnableTrigger(t)
call GroupClear(O8F)
endif
loop
call TriggerSleepAction(.3)
exitwhen((Bz>GSF)or(not OA7(j5)))
set bj_lastLoadedUnit=j5
call ForGroup(O8F,function N_F)
endloop
call DisableTrigger(t)
set t=null
set j5=null
endfunction
function ODF takes nothing returns boolean
return((GetSpellAbilityId()==1093685846)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))
endfunction
function OEF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local real GSF=Bz+.5
local integer O5=GetPlayerId(GetOwningPlayer(j5))
set LP4="OEF"
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_NONE)
call TriggerSleepAction(.01)
loop
if((h4[O5]!=null)and(OA7(h4[O5]))and(IsUnitInRange(j5,h4[O5],$91+(40*GetUnitAbilityLevel(j5,1093685839)))))then
set m5=h4[O5]
else
set m5=P47(I2R($91+(40*GetUnitAbilityLevel(j5,1093685839))),PU7(j5),Condition(function T87))
endif
if(m5!=null)then
call UnitRemoveAbility(j5,1110456395)
call IssueTargetOrderById(j5,$D000F,m5)
endif
exitwhen((not G0[$80+O5])or(GetUnitAbilityLevel(j5,1110456395)==0)or(not OA7(j5))or(Bz>=GSF))
call NX7(.5)
endloop
call SetPlayerController(GetOwningPlayer(j5),MAP_CONTROL_COMPUTER)
call J3(j5,false)
set j5=null
set m5=null
endfunction
function PD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PD8"
call ky(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ODF))
call TriggerAddAction(t,function OEF)
endfunction
function OFF takes nothing returns boolean
return((GetSpellAbilityId()==1093677402)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetSpellTargetUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function OGF takes nothing returns nothing
local real IW
local real JD
local real Je
local integer O5=GetPlayerId(GetOwningPlayer(hr))
set LP4="OGF"
if((GetDestructableTypeId(GetEnumDestructable())==1465152372)or(GetDestructableTypeId(GetEnumDestructable())==1230271587)or(GetDestructableTypeId(GetEnumDestructable())==1230271607)or(GetDestructableTypeId(GetEnumDestructable())==1314157687)or(GetDestructableTypeId(GetEnumDestructable())==1096053874))then
set JD=GetUnitX(h9[16+O5])
set Je=GetUnitY(h9[16+O5])
set IW=N67(GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()),JD,Je)
if(((N67(GetUnitX(hr),GetUnitY(hr),JD,Je)-150.)>IW)and((GetLocationX(HC[$F0+O5])==.0)or(((N67(GetLocationX(HC[$F0+O5]),GetLocationY(HC[$F0+O5]),JD,Je)-150.)>IW))and(N67(GetLocationX(HC[$F0+O5]),GetLocationY(HC[$F0+O5]),GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))>250.)))then
call MoveLocation(HC[$F0+O5],GetDestructableX(GetEnumDestructable()),GetDestructableY(GetEnumDestructable()))
endif
endif
endfunction
function OHF takes nothing returns nothing
local unit OIF=GetSpellTargetUnit()
local integer O5=GetPlayerId(GetOwningPlayer(OIF))
local integer ki=GetHandleId(GetOwningPlayer(GetSpellTargetUnit()))
local location OJF=null
set LP4="OHF"
call NX7(.5)
set GZ[272+O5]=false
if(HC[$F0+O5]==null)then
set HC[$F0+O5]=Location(.0,.0)
endif
loop
call SetRect(He,GetUnitX(OIF)-600.,GetUnitY(OIF)-600.,GetUnitX(OIF)+600.,GetUnitY(OIF)+600.)
set hr=OIF
call EnumDestructablesInRect(He,Q54,function OGF)
set OJF=HC[$F0+O5]
if(GetLocationX(OJF)!=.0)then
call IssuePointOrderByIdLoc(OIF,$D0012,OJF)
else
call PV7(OIF,$D0012,h9[O5])
endif
call NX7(.8)
exitwhen((GetUnitAbilityLevel(OIF,1110454833)==0)or(GZ[272+O5])or((P87(1200.,OIF,Condition(function T87))==0)and(iy(OIF))))
if((GetLocationX(OJF)!=.0)and(IsUnitInRangeLoc(OIF,OJF,150.)))then
call MoveLocation(OJF,.0,.0)
endif
endloop
if(OJF!=null)then
call MoveLocation(OJF,.0,.0)
endif
set OJF=null
set OIF=null
endfunction
function Pr takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Pr"
call ky(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OFF))
call TriggerAddAction(t,function OHF)
endfunction
function OKF takes real GIF,real GJF,boolean OMF returns boolean
local boolean J4=false
local unit ONF=null
local unit it=GetEnumUnit()
set LP4="wKv"
if N67(GetUnitX(it),GetUnitY(it),GIF,GJF)>$BB8 then
if(OMF)then
call SO7(it)
set J4=((GetUnitTypeId(it)==1164799603)and(IssuePointOrderById(it,$D022D,GIF,GJF)))or((GetUnitTypeId(it)==1311780946)and(((IsUnitAlly(it,Y7[0]))and(IssueTargetOrderById(it,$D0278,IY4)))or((IsUnitAlly(it,Z7[0]))and(IssueTargetOrderById(it,$D0278,JZ4)))))
else
call MoveLocation(HB,GIF,GJF)
set ONF=O27(1200.,HB,Condition(function Kd))
if((ONF!=null)and(P87(1000.,ONF,Condition(function Kd))>3)and(P87(1200.,ONF,Condition(function k6))<2)and(N37(ONF,PL7(it))>4000.)and(kJ(GetUnitX(ONF),GetUnitY(ONF))))then
call SO7(it)
set J4=((GetUnitTypeId(it)==1164799603)and(IssuePointOrderById(it,$D022D,GetUnitX(ONF),GetUnitY(ONF))))or((GetUnitTypeId(it)==1311780946)and(IssueTargetOrderById(it,$D0278,ONF)))or((PD7(it,SU[E6]))and(UnitUseItemTarget(it,bj_lastCreatedItem,ONF)))
endif
endif
endif
set ONF=null
set it=null
return J4
endfunction
function OOF takes integer OPF returns boolean
local unit u=GetEnumUnit()
local boolean J4=false
set LP4="wmv"
if(OPF==0)then
if(IsUnitAlly(u,Z7[0]))then
set J4=(OKF(Tm,Um,false))or(OKF(Jm,lm,false))or(OKF(cm,Cm,false))or(OKF(Zq,vQ,false))
else
set J4=(OKF(bQ,BQ,false))or(OKF(aQ,EQ,false))or(OKF(Zq,vQ,false))or(OKF(cm,Cm,false))
endif
elseif(OPF==1)then
if(IsUnitAlly(u,Z7[0]))then
set J4=(OKF(-6240.,-3808.,false))or(OKF(-6112.,-1312.,false))or(OKF(-6112.,1504.,false))or(OKF(3169.,5920.,false))
else
set J4=(OKF(-4704.,5920.,false))or(OKF(32.,5856.,false))or(OKF(3169.,5920.,false))or(OKF(-6112.,1504.,false))
endif
elseif(OPF==2)then
if(IsUnitAlly(u,Z7[0]))then
set J4=(OKF(-3424.,-6560.,false))or(OKF(-544.,-6688.,false))or(OKF(4960.,-6752.,false))or(OKF(6044.,2874.,false))
else
set J4=(OKF(6048.,-2080.,false))or(OKF(6112.,-96.,false))or(OKF(6044.,2874.,false))or(OKF(4960.,-6752.,false))
endif
elseif(OPF==3)then
set J4=OKF(GetUnitX(PL7(u)),GetUnitY(PL7(u)),true)
endif
set u=null
return J4
endfunction
function OQF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093810259)==0)then
return $96+($96*GetUnitAbilityLevel(it,1093810258))
else
return $A0+($B4*GetUnitAbilityLevel(it,1093810259))
endif
endfunction
function ORF takes unit it returns integer
local integer kt=GetHeroLevel(it)
set LP4="wPv"
if(L or RY4)then
return(45*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<5)then
return(30*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<$B)then
return(40*kt)
elseif(hG[GetPlayerId(GetOwningPlayer(it))]<$F)then
return(55*kt)
else
return(70*kt)
endif
endfunction
function OSF takes unit it returns integer
local integer kc=GetUnitAbilityLevel(it,1093684565)
set LP4="wqv"
if((kc==0)and(GetUnitAbilityLevel(it,1093681458)>0))then
return GetUnitAbilityLevel(it,1093681458)
endif
return kc
endfunction
function OTF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093679447)==0)then
return $EC+($96*GetUnitAbilityLevel(it,1093679413))
else
return 350+($96*GetUnitAbilityLevel(it,1093679447))
endif
endfunction
function OUF takes unit it returns integer
if(GetUnitAbilityLevel(it,1093679450)==0)then
return $EC+($96*GetUnitAbilityLevel(it,1093677392))
else
return 332+($96*GetUnitAbilityLevel(it,1093679450))
endif
endfunction
function OVF takes unit it returns real
if((it==JG4)or(it==JJ4)or(it==JN4)or(it==JQ4)or(it==JP4)or(it==JH4))then
return 50.
elseif((it==JF4)or(it==JI4)or(it==JM4))then
return 100.
elseif((it==JK4)or(it==JO4))then
return 10.
elseif((it==J04)or(it==J_4)or(it==K74)or(it==K84))then
return 230.
elseif((it==JL4)or(it==J54)or(it==K44))then
return 270.
elseif(it==J24)then
return 150.
else
return 180.
endif
endfunction
function OWF takes unit it returns real
local real OXF=B97(R77(GetHandleId(it),"TLLife1"),1.)-GetUnitState(it,UNIT_STATE_LIFE)
local real OYF=GetUnitState(it,UNIT_STATE_MAX_LIFE)
set LP4="wtv"
if(OYF==0)then
return .0
else
return(OXF/OYF)*100.
endif
endfunction
function OZF takes unit it,real KOF,integer X5,integer o6 returns boolean
call MoveLocation(Ha,GetUnitX(it)+KOF*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+KOF*Sin(GetUnitFacing(it)*bj_DEGTORAD))
return((P77(260.,Ha,Condition(function k6))>0)and(PC7(it,X5,o6)))
endfunction
function OAF takes unit it,real KOF,boolexpr Ig returns boolean
call MoveLocation(Ha,GetUnitX(it)+KOF*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+KOF*Sin(GetUnitFacing(it)*bj_DEGTORAD))
return P77(260.,Ha,Ig)>0
endfunction
function OBF takes unit j5,unit m5 returns boolean
local integer I8=0
local item ja
local boolean jR=false
set LP4="AIUseDagonOrdinary"
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(S07(GetItemTypeId(ja))))then
set jR=UnitUseItemTarget(j5,ja,m5)
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return jR
endfunction
function OCF takes unit it returns boolean
local integer I8=0
local item ja
set LP4="w_v"
loop
set ja=UnitItemInSlot(it,I8)
if((ja!=null)and(ks(GetItemTypeId(ja))))then
set ja=null
return true
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return false
endfunction
function O3F takes unit j5 returns boolean
local integer I8=0
local item ja
local boolean jR=false
set LP4="w0v"
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(ks(GetItemTypeId(ja))))then
set GZ[$E0+GetPlayerId(GetOwningPlayer(j5))]=true
set jR=UnitUseItem(j5,ja)
set GZ[$E0+GetPlayerId(GetOwningPlayer(j5))]=false
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set ja=null
return jR
endfunction
function O6F takes unit j5,unit m5 returns boolean
local integer I8=0
local item ja=null
local location OLF=null
local boolean jR=false
set LP4="w1v"
if(SB7(m5))then
return false
endif
loop
set ja=UnitItemInSlot(j5,I8)
if((ja!=null)and(GetItemTypeId(ja)==SU[QW]))then
set OLF=kL(j5,m5,100.)
if(OLF!=null)then
set jR=UnitUseItemPointLoc(j5,ja,OLF)
if((jR)and(hq[512+GetPlayerId(GetOwningPlayer(j5))]<Bz))then
set hq[512+GetPlayerId(GetOwningPlayer(j5))]=Bz+1.
endif
endif
set I8=bj_MAX_INVENTORY
endif
set I8=I8+1
exitwhen I8>=bj_MAX_INVENTORY
endloop
set OLF=null
set ja=null
return jR
endfunction
function O1F takes nothing returns boolean
if((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetWidgetLife(GetFilterUnit())>.405)and((IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))or(eY[32+GetPlayerId(GetOwningPlayer(GetFilterUnit()))]>0))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))then
return(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<=L84)
endif
return false
endfunction
function O0F takes unit it,unit m5 returns nothing
if((it!=null)and(it!=GetTriggerUnit())and(is(it))and(IsUnitInRange(it,GetTriggerUnit(),1200.))and(GetUnitLifePercent(it)>50.))then
if(not IssuePointOrderById(it,$D0249,GetUnitX(m5)+5.,GetUnitY(m5)+5.))then
call IssueTargetOrderById(it,$D000F,m5)
endif
endif
endfunction
function O5F takes unit it,unit m5 returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(it))
set LP4="w5v"
if(hq[$F0+O5]<Bz)then
set GZ[O5]=true
if(ZR7(it,m5,30/.035,0,(GetUnitAbilityLevel(it,1093684802)+1)*$FA)!=null)and(J8(O5,PX7(it,$D0079,1093684802,DF7)))then
set hq[$F0+O5]=Bz+1.5
return true
endif
endif
return false
endfunction
function O2F takes nothing returns nothing
call XG7(GetEnumUnit())
endfunction
function O_F takes unit it,unit m5 returns boolean
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local boolean J4=false
set LP4="AI_Harass"
if(i1==1211117653)then
set J4=((Bz>TB4[16+O5])and W27(it,A14,A14,A14,1093686874)and(PW7(it,$D0219,1093686874,m5)))or(((GetUnitState(it,UNIT_STATE_MANA))>400)and(Bz>TB4[112+O5])and W27(it,A14,A04,A54,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160786505)then
set J4=(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1160785970)then
set J4=(IsUnitInRange(it,m5,650.))and(GetUnitManaPercent(it)>60.)and(Bz>TB4[16+O5])and(PC7(it,$D022E,1093748023))
elseif(i1==1160786506)then
set J4=(IsUnitInRange(it,m5,795.))and(GetUnitAbilityLevel(it,1093751894)<3)and(GetUnitManaPercent(it)>70.)and(IssueTargetOrderById(it,$D007F,m5))
if(not J4)then
set J4=(IsUnitInRange(it,m5,795.))and(GetUnitAbilityLevel(it,1093752118)>0)and(GetUnitAbilityLevel(it,1093751894)>=3)and(((Bz>TB4[48+O5])and(GetUnitManaPercent(it)>55.)and(NR7(O5,it,1093751894,1093751637))and(IssueTargetOrderById(it,$D007F,m5)))or((GetUnitManaPercent(it)>20.)and(IssueTargetOrderById(it,$D007F,VX7(795.,it)))))
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set J4=PW7(it,$D0097,1093682994,m5)
elseif(i1==1429221424)then
set J4=(PW7(it,$D024B,1093687351,m5))or(PW7(it,$D0118,1093748789,m5))
elseif(i1==1430466609)then
set J4=PW7(it,$D022F,1093685559,m5)
elseif(i1==1162032439)then
set J4=PW7(it,$D02BD,1093744435,m5)
elseif(i1==1165451634)then
set J4=PW7(it,$D02B6,1093687629,m5)
elseif(i1==1433168227)then
set J4=PW7(it,$D0102,1093678918,m5)
elseif(i1==1430466865)then
set J4=PW7(it,$D009D,1093677651,m5)
elseif(i1==1432642913)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1429221445)then
set J4=(IsUnitInRange(it,m5,400.))and(PC7(it,$D022E,1093678422))
elseif(i1==1332963428)then
set J4=PW7(it,$D0097,1093683019,m5)
elseif(i1==1332109682)then
set J4=PW7(it,$D02B6,1093678134,m5)
elseif(i1==1211117640)then
set J4=(IsUnitInRange(it,m5,500.))and(IssueTargetOrderById(it,$D0079,m5))
elseif(i1==1430468406)then
set J4=PW7(it,$D00FA,kT(it),m5)
elseif(i1==1215063922)then
set J4=(PW7(it,$D0264,1093677894,m5))or(PW7(it,$D007F,1093681490,m5))
elseif(i1==1160786242)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1311780946)then
set J4=PW7(it,$D010E,1093677385,m5)
elseif((i1==1211117650)or(i1==1211119433))then
set IM4=it
set J4=(P87(1000.,it,Condition(function ny))>3)and(IssueTargetOrderById(it,$D02DB,m5))
elseif(i1==1211117646)then
set J4=PW7(it,$D010E,1093685573,m5)
elseif(i1==1211117624)then
set J4=(IsUnitInRange(it,m5,400.))and(PC7(it,$D022E,1093683024))
elseif(i1==1211117616)then
set J4=((IsUnitInRange(it,m5,200.))and(PC7(it,$D009F,1093677139)))or(PW7(it,$D0107,1093816142,m5))
elseif(i1==1433631084)then
set J4=IssueTargetOrderById(it,$D0079,m5)
elseif(i1==1332898670)then
set J4=PW7(it,$D026B,1093677360,m5)
elseif(i1==1215128178)then
set J4=(PW7(it,$D007F,1093683779,m5))or(PW7(it,$D0097,1093677616,m5))
elseif(i1==1316252014)then
set J4=(PC7(it,$D022E,1093678405))or(PW7(it,$D0269,1093678137,m5))
elseif(i1==1328558160)then
set J4=(PW7(it,$D00FA,1093682766,m5))or(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1214931305)then
set J4=PW7(it,$D0079,1093748025,m5)
elseif(i1==1211117633)then
set J4=PW7(it,$D007F,1093684310,m5)
elseif(i1==1211117620)then
set J4=(PW7(it,$D009D,1093677382,m5))or(PX7(it,$D0108,1093677623,ZT7(it,m5,.95,600.)))
elseif(i1==1311781185)then
set J4=IssueTargetOrderById(it,$D02B6,m5)
elseif(i1==1160786000)then
set J4=PW7(it,$D00FA,1093685047,m5)
elseif(i1==1311781206)then
set J4=(IsUnitInRange(it,m5,500.))and(IssueImmediateOrderById(it,$D0278))
elseif(i1==1311780930)then
set J4=((IsUnitInRange(it,m5,350.))and(IssueImmediateOrderById(it,$D0278)))or(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
elseif(i1==1311781174)then
set J4=PW7(it,$D00FA,1093808461,m5)
elseif(i1==1311781175 or i1==1311781442)then
set J4=(IsUnitInRange(it,m5,400.)and(PC7(it,$D0080,1093808462)))
elseif(i1==1160786520)then
set J4=PW7(it,$D00D8,1093809991,m5)
else
set J4=ZNE(it,m5,true)
endif
return J4
endfunction
function P4F takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set LP4="P4F"
if((G0[32+O5])or(not G0[$80+O5])or(G0[O5]))then
elseif(h4[O5]==null)then
call ZSE(O5,hz,false,false)
if(OV7(GetEnumUnit()))then
call O_F(GetEnumUnit(),hz)
endif
elseif(OV7(GetEnumUnit()))then
call O_F(GetEnumUnit(),hz)
endif
endfunction
function P7F takes unit KHF,unit KIF returns nothing
set hZ=KHF
set hz=KIF
if(GetWidgetLife(KIF)>1.)then
call GroupClear(iA)
call GroupEnumUnitsInRange(iA,GetUnitX(KHF),GetUnitY(KHF),1200.,iP)
call ForGroup(iA,function P4F)
endif
endfunction
function P8F takes unit IB,unit m5,boolean P9F returns nothing
set LP4="(WVv)"+LP4
if((m5==null)or(not OA7(m5))or(not IsUnitType(m5,UNIT_TYPE_HERO))or(IsUnitAlly(m5,GetOwningPlayer(IB))))then
return
endif
set h4[GetPlayerId(GetOwningPlayer(IB))]=m5
call IUF(IB,m5)
if((not IsUnitInForce(IB,QW4))or(not OV7(IB)))then
elseif((P9F)and(G0[$80+GetPlayerId(GetOwningPlayer(IB))])and((not O37(IB))or(O37(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
elseif((O37(IB))and(not O07(m5,IB)))then
call PV7(IB,$D0012,h9[GetPlayerId(GetOwningPlayer(IB))])
endif
endfunction
function PDF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local real PEF=Bz
local real NC7=Bz+4.5
local real PFF=Bz+7.5
local real EWF=775
local boolean PN7=false
local boolean PGF=WQ7(Player(O5))
local real PHF=(80.+70.*GetUnitAbilityLevel(j5,1093750345))/5.
set LP4="PDF"
set hq[O5]=Bz+120.
if PGF then
call RI7(j5,"AlcheBrew")
if h4[O5]!=null then
set EWF=N37(j5,h4[O5])
endif
endif
loop
call TriggerSleepAction(.1)
if PGF then
if h4[O5]!=null then
if(not IsUnitInRange(j5,h4[O5],600.))then
exitwhen true
elseif(GetWidgetLife(h4[O5])<PHF*(Bz-PEF)*.7)then
exitwhen true
endif
else
set bj_lastLoadedUnit=j5
if P87(600.,j5,Condition(function TD7))==0 then
exitwhen true
endif
endif
endif
exitwhen((not OA7(j5))or(Bz>NC7))
endloop
call KGF(j5,j5)
if not WQ7(Player(O5))then
set j5=null
return
endif
if(OA7(j5))then
set m5=h4[O5]
if(m5==null)or(not OA7(m5))or(not IsUnitInRange(m5,j5,750.))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
set m5=VY7(775.,j5)
endif
loop
exitwhen(Bz>PFF)
if(m5==null)or(not OA7(m5))or(not IsUnitInRange(m5,j5,750.))or(IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
set m5=VY7(775.,j5)
endif
if m5!=null and((GetWidgetLife(m5)<PHF*((Bz-PEF)/5)*.7)or(Bz>NC7))and IssueTargetOrderById(j5,$D0278,m5)then
call ZSE(O5,m5,false,false)
exitwhen true
endif
if m5==null and PN7==false and Bz+2.>=PFF then
call ZPE(j5,true)
set PN7=true
endif
call TriggerSleepAction(.25)
endloop
endif
call RK7(j5,"AlcheBrew")
set j5=null
set m5=null
endfunction
function PIF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JA7=GetHandleId(t)
local unit it=LoadUnitHandle(C7,JA7,1397899609)
local integer O5=LoadInteger(C7,JA7,1397899609)
local real UE7
local boolean K_7=false
if GetTriggerEvalCount(t)>=$F then
call RN7(t)
call FlushChildHashtable(C7,JA7)
else
if h4[O5]==null then
if h4[O5]==null then
endif
endif
set UE7=N37(h4[O5],it)
if h4[O5]==null or(not IsUnitInRange(it,h4[O5],$578))or(((not NA7(it,h4[O5],AsinBJ(.7*GetUnitMoveSpeed(h4[O5])/UE7)))and GetTriggerEvalCount(t)>$C)or GetUnitLifePercent(it)<20.)then
set K_7=IssueImmediateOrderById(it,$D00F9)
if K_7 then
call RN7(t)
call FlushChildHashtable(C7,JA7)
set it=null
set t=null
return false
endif
else
if not(NA7(it,h4[O5],Asin(100/UE7)*bj_RADTODEG))then
set K_7=IssueTargetOrderById(it,$D0003,h4[O5])
endif
if UE7>950. then
call IssueImmediateOrderById(it,$D00D1)
elseif UE7<=300. then
call IssueImmediateOrderById(it,$D00D2)
endif
endif
endif
set it=null
set t=null
return false
endfunction
function PJF takes integer O5,unit j5 returns nothing
local trigger t=CreateTrigger()
local integer JA7=GetHandleId(t)
call JN7("SunRay")
call TriggerAddCondition(t,Condition(function PIF))
call TriggerRegisterTimerEvent(t,.4,true)
call SaveInteger(C7,JA7,1397899609,O5)
call SaveUnitHandle(C7,JA7,1397899609,j5)
set t=null
endfunction
function PKF takes nothing returns boolean
local unit j5=GetTriggerUnit()
local unit m5=GetOrderTargetUnit()
local integer i1=GetUnitTypeId(GetTriggerUnit())
local location b5=null
local boolean J4=false
set LP4="PKF"
if((i1==1162032181)and(GetUnitLifePercent(m5)<55.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(not SB7(m5))and(P87(800.,m5,Condition(function T87))<2)and(P87(800.,m5,Condition(function TK7))==0)and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set b5=kL(j5,m5,150.)
set J4=(b5!=null)and(IssuePointOrderByIdLoc(j5,$D00FA,b5))
elseif((i1==1164207469)and(GetUnitLifePercent(m5)<75.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,800.))and(not SB7(m5))and(P87(800.,m5,Condition(function T87))<2)and(P87(800.,m5,Condition(function TK7))==0)and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set b5=kL(j5,m5,200.)
set J4=(b5!=null)and(IssuePointOrderByIdLoc(j5,$D022D,b5))
elseif(((i1==1429221441)or(i1==1165451634)or(i1==1212365106))and(GetUnitLifePercent(m5)<75.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(not SB7(m5))and(P87(800.,m5,Condition(function T87))<2)and(P87(800.,m5,Condition(function TK7))==0)and(kJ(GetUnitX(m5),GetUnitY(m5)))and(not IC(GetPlayerId(GetOwningPlayer(j5)))))then
set J4=IssueTargetOrderById(j5,$D0278,m5)
elseif((i1==1328558154)and(not IsUnitInRange(m5,j5,700.))and(((P87(900.,m5,Condition(function T87))<=2)and(PD7(j5,SU[H1]))or(PD7(j5,SU[S2])))or((P87(900.,m5,Condition(function T87))<2)))and(GetUnitLifePercent(m5)<70.))then
set J4=PW7(j5,$D0278,1093750840,m5)
elseif((i1==1429221446)and(GetUnitLifePercent(m5)<80.)and(not IsUnitInRange(j5,m5,300.)))then
set J4=(Bz>hq[16+GetPlayerId(GetOwningPlayer(j5))])and(ZKE(j5,m5))
elseif((i1==1430466865)and(GetUnitAbilityLevel(j5,1110454357)==0)and((hq[416+GetPlayerId(GetOwningPlayer(j5))]>Bz)or(h4[GetPlayerId(GetOwningPlayer(j5))]==m5))and(not IsUnitInRange(j5,m5,200.)))then
set J4=PW7(j5,$D0062,1093677879,j5)
endif
if((not J4)and(S67(j5))and(PD7(j5,SU[QW]))and(not IC(GetPlayerId(GetOwningPlayer(j5))))and(GetUnitLifePercent(m5)<50.)and(not IsUnitInRange(j5,m5,250.))and(IsUnitInRange(j5,m5,700.))and(P87(800.,m5,Condition(function T87))<2)and(P87(800.,m5,Condition(function TK7))==0))then
set J4=O6F(j5,m5)
endif
set j5=null
set m5=null
set b5=null
return J4
endfunction
function PMF takes integer O5,unit j5,boolean PNF returns nothing
call DisableTrigger(Q14[O5])
call DisableTrigger(Q14[16+O5])
if(PNF)then
call PauseUnit(j5,true)
call IssueImmediateOrderById(j5,$D0004)
call PauseUnit(j5,false)
endif
set G0[272+O5]=true
call J3(j5,true)
set G0[272+O5]=false
call EnableTrigger(Q14[O5])
call EnableTrigger(Q14[16+O5])
endfunction
function POF takes nothing returns boolean
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if O5==0 or O5==6 or O5>$B then
return false
endif
set eY[464+O5]=GetIssuedOrderId()
set h4[336+O5]=null
set eY[480+O5]=0
set eY[496+O5]=0
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER then
set h4[336+O5]=GetOrderTargetUnit()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER then
set eY[480+O5]=R2I(GetOrderPointX())
set eY[496+O5]=R2I(GetOrderPointY())
endif
return false
endfunction
function PPF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetTriggerUnit()))and((GetIssuedOrderId()>$D0020)or(GetIssuedOrderId()==$D000F)))!=null
endfunction
function PQF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=null
local integer X5=GetIssuedOrderId()
local integer i1=GetUnitTypeId(j5)
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local boolean PRF=false
local integer PSF
local boolean J4
set LP4="(AIIssuedPointTargetOrderAct)"+LP4
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)then
set m5=GetOrderTargetUnit()
if(m5!=null)then
if(not OA7(m5))then
call PMF(O5,j5,false)
set PRF=true
elseif((X5==$D009D)or(X5==$D024B)or(X5==$D0079)or(X5==$D00FA)or(X5==$D02AC))then
if((GetUnitAbilityLevel(m5,1113815395)>0)or(GetUnitAbilityLevel(m5,1113815346)>0))then
call PMF(O5,j5,false)
set PRF=true
endif
elseif((X5==$D0278)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(SB7(m5)))then
call PMF(O5,j5,false)
set PRF=true
elseif((X5==$D000F)and(GetUnitAbilityLevel(m5,1110454854)>0))then
call PMF(O5,j5,false)
set PRF=true
endif
if((not PRF)and(X5>=$D0020))then
if((GetUnitAbilityLevel(j5,1110455126)>0)and(GetUnitManaPercent(j5)>40.)and((h4[O5]==null)or(IsUnitAlly(m5,GetOwningPlayer(j5)))or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call PMF(O5,j5,false)
set PRF=true
elseif((GetUnitAbilityLevel(j5,1110454607)>0)and(O37(j5)))then
call PMF(O5,j5,false)
set PRF=true
endif
endif
if((not PRF)and(X5==$D000F)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(j5))))then
call MoveLocation(HC[48+O5],GetUnitX(m5),GetUnitY(m5))
call DisableTrigger(Q14[O5])
set PRF=(GetHeroLevel(j5)>5)and(G0[$80+O5])and(GetUnitAbilityLevel(j5,1112045413)==0)and(PKF())
call EnableTrigger(Q14[O5])
endif
else
set PRF=true
endif
if((X5==$D000F)and(not PRF))then
set GZ[48+O5]=IsUnitType(m5,UNIT_TYPE_HERO)
set h4[80+O5]=m5
set PRF=true
endif
if(PRF)then
set m5=null
set j5=null
return
endif
call MoveLocation(HC[48+O5],GetUnitX(m5),GetUnitY(m5))
else
if((X5>=$D0028)and(X5<=$D002D))then
set PSF=GetItemTypeId(UnitItemInSlot(j5,X5-$D0028))
if((PSF==SU[XC])or(PSF==SU[WC])or(PSF==SU[E6]))then
set PRF=true
endif
elseif(X5==$D000F)then
set PRF=true
set GZ[48+O5]=false
elseif(X5>=$D0020)then
if((GetUnitAbilityLevel(j5,1110455126)>0)and(GetUnitManaPercent(j5)>40.)and(h4[O5]==null))then
call PMF(O5,j5,false)
set PRF=true
elseif((GetUnitAbilityLevel(j5,1110454607)>0)and(O37(j5)))then
call PMF(O5,j5,false)
set PRF=true
endif
endif
if(PRF)then
set m5=null
set j5=null
return
endif
call MoveLocation(HC[48+O5],GetOrderPointX(),GetOrderPointY())
endif
if((X5>=$D0028)and(X5<=$D002D))then
set X5=SL7(j5)
set J4=true
if((X5==SU[QW])or(X5==SU[E6])or(X5==SU[N6])or(X5==SU[XC])or(X5==SU[WC])or(X5==SU[VC])or((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))))then
if((X5==SU[P1])and((not O37(j5))or((UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)>0)))and(not i2(m5))and(GetUnitAbilityLevel(m5,1110454329)==0)and(GetUnitAbilityLevel(m5,1110454338)==0)and(GetUnitAbilityLevel(m5,1110454597)==0)and(GetUnitAbilityLevel(m5,1110454608)==0))then
set J4=false
elseif(S07(X5))then
if((((i1!=1429221445)and(GetUnitLifePercent(m5)>50.))or(GetUnitLifePercent(m5)>75.))and(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitAbilityLevel(m5,1110455624)==0))then
set J4=false
elseif((i1==1429221424)and(GetUnitAbilityLevel(j5,1110454347)>0))then
set J4=false
endif
elseif((X5==SU[PC])and((GetUnitAbilityLevel(m5,1110454874)>0)or(m5!=j5)or(N37(j5,PL7(j5))<4500.)or(P87(1200.,m5,Condition(function k0))>0)))then
set J4=false
elseif((X5==SU[QW])and(GetUnitAbilityLevel(j5,1110455863)>0))then
set J4=false
endif
elseif((X5==SU[LL]or X5==SU[D1])or(X5==SU[H1]))then
if((GetOwningPlayer(m5)==Y7[0])or(GetOwningPlayer(m5)==Z7[0]))then
set J4=false
elseif(GetOwningPlayer(m5)==Player($C))then
set X5=GetUnitTypeId(m5)
if((X5!=1852796263)and(X5!=1852207203)and(X5!=1853060200)and(X5!=1852010091))then
set J4=false
endif
else
set X5=GetUnitTypeId(m5)
if((X5==1966092339)or(X5==1966092341)or(X5==1966092345))then
set J4=false
endif
endif
else
set J4=false
endif
if not J4 then
call PauseUnit(j5,true)
call IssueImmediateOrderById(j5,$D0004)
call PauseUnit(j5,false)
call SA7(O5,j5,0)
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if((X5==$D008F)and((GetUnitAbilityLevel(j5,1110455126)>0)or((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_SUMMONED)))))then
call SA7(O5,j5,1093747028)
endif
elseif(i1==1160786506)then
if((X5==$D0079)and(not GZ[O5]))then
call SA7(O5,j5,1093751637)
endif
elseif(i1==1429221443)then
if((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093744948)
elseif(X5==$D0278)then
endif
elseif(i1==1162032951)then
if((X5==$D022F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not O37(j5))and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(400*GetUnitAbilityLevel(j5,1093679152)))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(460*GetUnitAbilityLevel(j5,1093752154)))))))then
call J6(O5,j5,1093679152,1093752154)
endif
elseif(i1==1162032181)then
if((X5==$D02AC)and((not GZ[O5])or(P77(380.,HC[48+O5],Condition(function T87))==0)))then
call SA7(O5,j5,1093683761)
endif
elseif(i1==1429221424)then
if((X5==$D0118)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(j5,UNIT_STATE_MANA))<($C8+(50*GetUnitAbilityLevel(j5,1093679445))))and(not O37(m5)))or(GetUnitState(m5,UNIT_STATE_MANA)<100.)or(GetUnitAbilityLevel(j5,1110454347)>0)))then
call SA7(O5,j5,1093748789)
elseif(X5==$D024B)then
if(((not GZ[O5])or(GetUnitAbilityLevel(j5,1110454347)>0)or(not IsUnitType(m5,UNIT_TYPE_HERO)))and((P77(1500.,HC[48+O5],Condition(function T87))>0)or(GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6)))then
call SA7(O5,j5,1093687351)
endif
endif
elseif(i1==1432646245)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((AW7())and(GetUnitLifePercent(m5)>80.))))then
call SA7(O5,j5,1093677640)
elseif((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093679171)
endif
elseif(i1==1430466609)then
if((X5==$D009D)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P77(600.,HC[48+O5],Condition(function k3))<6))then
call J6(O5,j5,1093810258,1093810259)
elseif((X5==$D022F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093685559)
elseif(X5==$D022D)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1430468913)then
if((X5==$D00B5)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093677876)
endif
elseif(i1==1430467634)then
if((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(j5,UNIT_STATE_MANA))<($C8+(50*OSF(j5))))and(not i2(m5))and(not O37(m5)))))then
call SA7(O5,j5,1093679412)
elseif((X5==$D0267)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not O37(j5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(350+(350*OSF(j5)))))))then
call J6(O5,j5,1093684565,1093681458)
elseif((X5==$D0278)and(GetUnitManaPercent(j5)<45.))then
call SA7(O5,j5,1093742674)
endif
elseif(i1==1313026096)then
if((X5==$D007F)and(not O37(m5))and(not O37(j5))and((GetUnitAbilityLevel(j5,1110455126)>0)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($FA+(50*GetUnitAbilityLevel(j5,1093677401))))))then
call SA7(O5,j5,1095267426)
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if((X5==$D00DD)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(j5)+10.>GetUnitLifePercent(m5))))then
call SA7(O5,j5,1093678929)
elseif(X5==$D00DD)then
call RemoveGuardPosition(j5)
endif
elseif(i1==1164666213)then
if(X5==$D0100)then
call SA7(O5,j5,1093678679)
elseif(X5==$D0097)then
call SA7(O5,j5,1093678678)
endif
elseif(i1==1433168227)then
if((X5==$D0062)and((GetUnitLifePercent(m5)<50.)or(GetUnitManaPercent(j5)>80.)))then
call SA7(O5,j5,1093678387)
elseif((X5==$D0103)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call J6(O5,j5,1093678420,1093679176)
elseif((X5==$D0101)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093679186)
endif
elseif(i1==1429221430)then
if(X5==$D0100)then
call SA7(O5,j5,1093681735)
elseif(X5==$D0279)then
call SA7(O5,j5,1093681736)
endif
elseif(i1==1430466872)then
if((X5==$D0216)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093684558)
elseif((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call J6(O5,j5,1093679413,1093679447)
elseif((X5==$D0207)and((IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitManaPercent(j5)>70.)))then
call SA7(O5,j5,1093677646)
endif
elseif(i1==1162032439)then
if((X5==$D02BD)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093744435)
endif
elseif(i1==1430466865)then
if((X5==$D0062)and(not kQ(j5))and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitAbilityLevel(m5,1110454357)>0)or(P77(800.,HC[48+O5],Condition(function k3))==0)or(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(j5,1093810508)*100)))))then
call SA7(O5,j5,1093677879)
elseif(X5==$D00FA)and(not GZ[O5])then
call SA7(O5,j5,1093751364)
endif
elseif(i1==1430468144)then
if((X5==$D00DD)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093679192)
endif
elseif(i1==1429221441)then
if((X5==$D0107)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678389)
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1165451634)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093687629)
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1215722344)then
if((X5==$D02BC)and(j5!=m5)and(not(ND7(GetUnitTypeId(m5),5))))then
call SA7(O5,j5,1093682499)
elseif((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call SA7(O5,j5,1093684296)
endif
elseif(i1==1332766568)then
if((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))>($96+($96*GetUnitAbilityLevel(j5,1093682482))))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>($96+($96*GetUnitAbilityLevel(j5,1093750098)))))))then
call J6(O5,j5,1093682482,1093750098)
endif
elseif(i1==1328558154)then
if((X5==$D0278))then
set hq[O5]=Bz+41.
call NX7(1.)
endif
elseif(i1==1160786502)then
if(X5==$D0278)then
set UG4[O5]=true
endif
elseif(i1==1429221446)then
if((X5==$D0200)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J6(O5,j5,1093682764,1093747544)
endif
elseif(i1==1429221445)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(m5)>60.)))then
call J6(O5,j5,1093678647,1093679184)
endif
elseif(i1==1332963428)then
if((X5==$D0103)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678169)
elseif((X5==$D0097)and(not kQ(j5))and(GetUnitLifePercent(j5)>70.)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
if((GetUnitLifePercent(j5)>90.)or(P77(1200.,HC[48+O5],Condition(function T87))>0)or(GetUnitManaPercent(j5)<70.))then
call SA7(O5,j5,1093683019)
endif
elseif((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093816137)
elseif((X5==$D0200)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093677649)
endif
elseif(i1==1332109682)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678134)
endif
elseif(i1==1211117640)then
if((X5==$D0206)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093681989)
elseif((X5==$D0207)and(((not IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(j5)>70.))or(not IsUnitInRange(j5,m5,500.))))then
call J6(O5,j5,1093681987,1093677658)
endif
elseif(i1==1430468406)then
if((X5==$D0270)and(P77(250.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,kS(j5))
endif
elseif(i1==1160786241)then
if((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P77(200.,HC[48+O5],Condition(function T87))==0))then
if((P77(1200.,HC[48+O5],Condition(function T87))>0)or(GetHeroLevel(j5)<6)or(GetUnitManaPercent(j5)<70.))then
call SA7(O5,j5,1093684813)
endif
elseif((X5==$D0079)and(P77(100.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,1093684815)
elseif((X5==$D0275)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P77(400.,HC[48+O5],Condition(function T87))==0))then
call J6(O5,j5,1093684820,1093684824)
endif
elseif(i1==1429221456)then
if((X5==$D0097)and(not GZ[O5])and((not IsUnitType(m5,UNIT_TYPE_HERO))or((not O37(j5))and(not i2(m5)))))then
call SA7(O5,j5,1093685066)
elseif((X5==$D0079)and(GetUnitAbilityLevel(j5,1093685067)>0)and(P77($FA+(100*GetUnitAbilityLevel(j5,1093685067)),HC[48+O5],Condition(function T87))==0))then
call J6(O5,j5,1093685067,1093752407)
elseif((X5==$D0079)and(GetUnitAbilityLevel(j5,1093752407)>0)and(P77(350+(100*GetUnitAbilityLevel(j5,1093685067)),HC[48+O5],Condition(function T87))==0))then
call J6(O5,j5,1093685067,1093752407)
endif
elseif(i1==1160786243)then
if((X5==$D0079)and(not GZ[O5]))then
call SA7(O5,j5,1093678672)
elseif((X5==$D0100)and(not GZ[O5]))then
call SA7(O5,j5,1395667000)
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(X5==$D0079)then
call SA7(O5,j5,1093684802)
endif
elseif(i1==1311781207)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093684817)
endif
elseif(i1==1311780946)then
if((X5==$D0208)and(not GZ[O5]))then
call SA7(O5,j5,1093685825)
elseif((X5==$D022E)and(not GZ[O5]))then
call SA7(O5,j5,1093810232)
endif
elseif(i1==1211117646)then
if((X5==$D0085)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093685815)
endif
elseif(i1==1160785973)then
if((X5==$D0107)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678130)
endif
elseif(i1==1315988077)then
if((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1097032808)
endif
elseif(i1==1211117616)then
if((X5==$D0107)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(R2I(GetUnitState(m5,UNIT_STATE_LIFE))>(40+(125*(GetUnitAbilityLevel(j5,1093816142)))))))then
call SA7(O5,j5,1093816142)
endif
elseif(i1==1315074670)then
if((X5==$D0270)and(P77(250.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,1093685570)
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093681490)
endif
elseif(i1==1164207469)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((GetUnitManaPercent(m5)>15.)and(GetUnitState(m5,UNIT_STATE_LIFE)>((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(j5,1093682483))*.25)))))))then
call SA7(O5,j5,1093682483)
elseif(X5==$D022D)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1433631084)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678160)
endif
elseif(i1==1214345830)then
if((X5==$D0101)and((not IsUnitType(m5,UNIT_TYPE_HERO))or((GetUnitLifePercent(m5)>80.)and(not GZ[64+O5]))))then
if((GetUnitLifePercent(m5)>95.)or(P77(1500.,HC[48+O5],Condition(function T87))>0)or(GetUnitManaPercent(j5)<70.))then
call SA7(O5,j5,1093679182)
endif
elseif((X5==$D00DA)and(not GZ[O5])and((GetUnitLifePercent(m5)>75.)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitState(m5,UNIT_STATE_LIFE)>GetUnitState(j5,UNIT_STATE_LIFE))))then
call SA7(O5,j5,1093679190)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
if(X5==$D00FA)then
call SA7(O5,j5,1093808461)
endif
elseif(i1==1315007329)then
if((X5==$D007F)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitManaPercent(j5)<40.)))then
call SA7(O5,j5,1093677108)
elseif((X5==$D00B5)and(GetUnitLifePercent(m5)>60.)and(not O37(j5)))then
call SA7(O5,j5,1093681716)
endif
elseif(i1==1332898670)then
if((X5==$D0216)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093685848)
elseif((X5==$D0200)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(not GZ[O5])))then
call SA7(O5,j5,1093677136)
elseif((X5==$D0218)and(not GZ[O5]))then
call J6(O5,j5,1093677128,1093681457)
endif
elseif(i1==1215723364)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093677633)
elseif((X5==$D026B)and((not GZ[O5])or(SB7(m5))))then
call J6(O5,j5,1093683534,1093747031)
endif
elseif(i1==1215128178)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093683779)
endif
elseif(i1==1164799855)then
if((X5==$D006B)and((GetOwningPlayer(m5)==Y7[0])or(GetOwningPlayer(m5)==Z7[0])))then
call SA7(O5,j5,1093682264)
endif
elseif(i1==1433105516)then
if((X5==$D00DC)and(P77(400.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,0)
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093742680)
elseif((X5==$D00D9)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093742898)
endif
elseif(i1==1316252014)then
if((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678137)
endif
elseif(i1==1164799603)then
if((X5==$D00FA)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093808453)
elseif((X5==$D0097)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
if((P77(1200.,HC[48+O5],Condition(function T87))>0)or(GetUnitManaPercent(j5)<40.))then
call J6(O5,j5,1093752632,1093752633)
endif
endif
elseif(i1==1328558160)then
if((X5==$D00FA)and(not GZ[O5])and(not O37(j5))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093682766)
elseif((X5==$D0132)and(((IsUnitEnemy(m5,GetOwningPlayer(j5)))and(m5!=h4[O5]))or(GetUnitAbilityLevel(j5,1093683011)>0)))then
call SA7(O5,j5,1093683000)
endif
elseif(i1==1212363833)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J7(O5,j5,1093809220)
endif
elseif(i1==1315070563)then
if((X5==$D007F)and(not O37(j5))and((not IsUnitType(m5,UNIT_TYPE_HERO))or((P77(600.,HC[48+O5],Condition(function T87))*2)<P77(600.,HC[48+O5],Condition(function k3)))))then
call J6(O5,j5,1093684529,1093747032)
endif
elseif(i1==1214931305)then
if((X5==$D00CB)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093678147)
endif
elseif(i1==1212365106)then
if((X5==$D0079)and(not GZ[64+O5])and(P77($C8+(50*GetUnitAbilityLevel(j5,1093685831)),HC[48+O5],Condition(function T87))==0))then
if((GetUnitManaPercent(j5)<70.)or(GetHeroLevel(j5)<6)or(P77(1500.,HC[48+O5],Condition(function T87))>0))then
call SA7(O5,j5,1093685831)
endif
elseif(X5==$D0278)then
if(hq[512+O5]<Bz)then
set hq[512+O5]=Bz+1.
endif
endif
elseif(i1==1211117617)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093744944)
endif
elseif(i1==1211117633)then
if((X5==$D007F)and((GetOwningPlayer(m5)==Y7[0])or(GetOwningPlayer(m5)==Z7[0])or((IsUnitAlly(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))))then
call SA7(O5,j5,1093684310)
elseif((X5==$D00A3)and((GetOwningPlayer(m5)==Y7[0])or(GetOwningPlayer(m5)==Z7[0])))then
if((GetHeroLevel(j5)<20)or(IH(GetOwningPlayer(j5),Condition(function ZV9))>0))then
call SA7(O5,j5,1093810260)
endif
elseif((X5==$D0269)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093684045)
endif
elseif(i1==1211117620)then
if((X5==$D0108)and(not GZ[64+O5])and(P77(150.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,1093677623)
elseif((X5==$D0097)and((not IsUnitType(m5,UNIT_TYPE_HERO))or(GetUnitLifePercent(m5)>80.)))then
call J6(O5,j5,1093677392,1093679450)
endif
elseif(i1==1333027688)then
if((X5==$D0278)and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))and(P77(200.,HC[48+O5],Condition(function T87))==0))then
if((P77(1500.,HC[48+O5],Condition(function T87))>0)or(GetHeroLevel(j5)<6)or(GetUnitManaPercent(j5)<70.))then
call SA7(O5,j5,1093686091)
endif
endif
elseif(i1==1211117643)then
if(X5==$D0136)then
call SA7(O5,j5,1093678410)
elseif(X5==$D0092)then
call SA7(O5,j5,1093678664)
elseif(X5==$D0048)then
call SA7(O5,j5,1093678658)
elseif(X5==$D0218)then
call J6(O5,j5,1093681483,1093748313)
elseif(X5==$D0097)then
call SA7(O5,j5,1093752646)
endif
elseif(i1==1215130471)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,S27(j5))
elseif((X5==$D0278)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093815121)
elseif((X5==$D0085)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,T47(j5))
endif
elseif(i1==1332179560)then
if((X5==$D02B6)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093742660)
endif
elseif(i1==1214344551)then
if((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093809742)
endif
elseif(i1==1211117636)then
if((X5==$D00FA)and(not GZ[O5])and((GetUnitManaPercent(j5)<30.)or(IsUnitInRangeLoc(j5,HC[48+O5],600.)))and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call SA7(O5,j5,1093685041)
elseif((X5==$D007F)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call J6(O5,j5,1093685042,1093810233)
endif
elseif(i1==1160786000)then
if((X5==$D00FA)and((GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093685047)
elseif((X5==$D0264)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P77(200.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,1093685046)
elseif((X5==$D009D)and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093685045)
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if((X5==$D0079)and(GetUnitManaPercent(j5)<40.)and((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))))then
call SA7(O5,j5,1093683532)
endif
elseif(i1==1211117651)then
if((X5==$D00FA))then
call SA7(O5,j5,1093743695)
elseif((X5==$D0097))then
call SA7(O5,j5,1093743698)
endif
elseif(i1==1311780930)then
if((X5==$D0079)and(not GZ[O5]))then
call J6(O5,j5,1093686072,1093751120)
endif
elseif(((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517)))then
if((X5==$D0097)and(not GZ[O5]))then
call SA7(O5,j5,1093815130)
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(X5==$D0079)then
call SA7(O5,j5,1093743955)
endif
elseif(i1==1211119187)then
if(X5==$D0079)then
call SA7(O5,j5,1093743414)
elseif(X5==$D02B6)then
call SA7(O5,j5,1093742923)
endif
elseif(i1==1311786311)then
if(X5==$D0097)then
call SA7(O5,j5,1093743178)
endif
elseif(i1==1328558390)then
if(X5==$D0079)then
call SA7(O5,j5,1093748044)
elseif(X5==$D0097)then
call SA7(O5,j5,1093744975)
elseif(X5==$D00FA)then
call SA7(O5,j5,1093744982)
endif
elseif(i1==1160786510)then
if(X5==$D0097)then
call SA7(O5,j5,1093751633)
elseif(X5==$D0079)then
call J6(O5,j5,1093751861,1093808949)
endif
elseif(i1==1160786504)then
if(X5==$D0097)then
call SA7(O5,j5,1093751608)
elseif(X5==$D0079)then
call SA7(O5,j5,1093751618)
elseif(X5==$D008F)then
call SA7(O5,j5,1093751617)
endif
elseif(i1==1328558406)then
if(X5==$D0097)then
call SA7(O5,j5,1093751873)
endif
elseif(i1==1160786520)then
if((X5==$D00D8)and((GetUnitManaPercent(j5)<60.)or(GetHeroLevel(j5)<6))and(not IsUnitType(m5,UNIT_TYPE_HERO)))then
call SA7(O5,j5,1093809991)
elseif((X5==$D00F6)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P77(200.,HC[48+O5],Condition(function T87))==0))then
call SA7(O5,j5,1093809990)
endif
elseif(i1==1311781185)then
if(X5==$D0079)then
call SA7(O5,j5,1093743692)
endif
elseif(i1==1311788336)then
if(X5==$D0079)then
call SA7(O5,j5,1093814320)
endif
elseif(i1==1160786507)then
if(X5==$D0079)then
call SA7(O5,j5,1093814850)
endif
elseif(i1==1211122767)then
if(X5==$D0097)then
call SA7(O5,j5,1093812805)
elseif(X5==$D02BC)then
call SA7(O5,j5,1093814350)
endif
endif
set j5=null
set m5=null
endfunction
function PTF takes nothing returns boolean
return((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(not IsUnitIllusion(GetTriggerUnit()))and(GetIssuedOrderId()>$D0020))!=null
endfunction
function PUF takes nothing returns nothing
local integer i=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)then
call MoveLocation(HC[i],GetUnitX(GetOrderTargetUnit()),GetUnitY(GetOrderTargetUnit()))
set i=GetIssuedOrderId()-$D0028
if((i>=0)and(i<6)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_NONE)and(QX4[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]))then
set i=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),i))
if((i==SU[P1])or(i==SU[LL])or(i==SU[D1])or(i==SU[E1])or(i==SU[F1]))then
call IssueTargetOrderById(GetTriggerUnit(),$D000F,GetOrderTargetUnit())
endif
endif
else
call MoveLocation(HC[i],GetOrderPointX(),GetOrderPointY())
endif
endfunction
function PVF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer X5=GetIssuedOrderId()
local integer i1=GetUnitTypeId(j5)
local integer O5=GetPlayerId(GetOwningPlayer(j5))
set LP4="PVF"
if((X5>=$D0020)and(X5<$D07F0))then
if((GetUnitAbilityLevel(j5,1110454607)>0)and(O37(j5)))then
call J3(j5,true)
set j5=null
return
endif
endif
call MoveLocation(HC[48+O5],GetUnitX(j5),GetUnitY(j5))
if((X5>=$D0028)and(X5<=$D002D))then
set X5=SL7(j5)
if((X5==SU[O1])and(Bz>hq[64+O5])and(not GZ[$E0+O5]))then
call PMF(O5,j5,true)
elseif((X5==SU[Z2])and((Bz+20.)>hq[O5])and(Bz>hq[48+O5]))then
call PMF(O5,j5,true)
elseif((X5==SU[R1])and(not GZ[64+O5])and((R87(GetHandleId(j5),"Mekansm"))or(GetUnitLifePercent(j5)>80.)))then
call PMF(O5,j5,true)
elseif((X5==SU[DO4])and(P77(900.,HC[48+O5],Condition(function T87))==0))then
call PMF(O5,j5,true)
elseif((X5==SU[ZL])and(TZ4==false))then
call PMF(O5,j5,true)
elseif((X5==SU[DS4]or X5==SU[YA])and(GetUnitState(j5,UNIT_STATE_LIFE)>$96)and(GetItemCharges(UnitItemInSlot(j5,GetIssuedOrderId()-$D0028))<8))then
call PMF(O5,j5,true)
elseif((X5==SU[Z3])and(not GZ[64+O5])and((GetUnitAbilityLevel(j5,1113875814)>0)or(GetUnitManaPercent(j5)<75.)or(GetHeroLevel(j5)<3)))then
call PMF(O5,j5,true)
elseif((PI7(X5))and(not GZ[$E0+O5])and(G0[$80+O5]))then
call PMF(O5,j5,true)
elseif(((X5==SU[N5])or(X5==SU[R5])or(X5==SU[S5])or(X5==SU[X0])))then
if((i1==1429221424)and(GetUnitAbilityLevel(j5,1110454347)>0))then
call PMF(O5,j5,true)
elseif((not GZ[$E0+O5])and(GetHeroLevel(j5)<$D)and(iy(j5))and(eY[O5]==1)and(not G0[32+O5]))then
call PMF(O5,j5,true)
endif
elseif((X5==SU[DU4])and((TA4==false)and(h4[O5]==null)))then
call PMF(O5,j5,true)
endif
elseif(i1==1160785970)then
if((X5==$D022E)and((not GZ[O5])or(P77(789.,HC[48+O5],Condition(function T87))==0)))then
call J7(O5,j5,1093748023)
endif
elseif(i1==1429221443)then
if((X5==$D0131)and(P77(800.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093686322)
endif
elseif(i1==1162032951)then
if((X5==$D0084)and((not GZ[O5])or(GetUnitLifePercent(j5)<50.))and((P77(1500.,HC[48+O5],Condition(function T87))>0)or(GetUnitManaPercent(j5)<70.)or(GetUnitLifePercent(j5)<80.)))then
call J7(O5,j5,1093678404)
endif
elseif(i1==1429221424)then
if((X5==$D00A1)and(not GZ[O5]))then
call J7(O5,j5,1093679445)
elseif(X5==$D022E)then
call J7(O5,j5,1093815119)
endif
elseif(i1==1430468913)then
if((X5==$D0084)and(not GZ[O5]))then
call J7(O5,j5,1093678403)
elseif(X5==$D00C4)then
call J7(O5,j5,1093810507)
endif
elseif(i1==1164277353)then
if((X5==$D02B7)and(not GZ[O5]))then
call J7(O5,j5,1093751369)
endif
elseif(i1==1164666213)then
if(X5==$D0084)then
call J6(O5,j5,1093808454,1093808455)
call J7(O5,j5,1093808456)
elseif(X5==$D022E)then
call J7(O5,j5,1093677877)
endif
elseif(i1==1429221430)then
if((X5==$D00C4)and(not O37(j5))and(P77(400.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093687121)
endif
elseif(i1==1162032439)then
if((X5==$D0272)and(not GZ[O5]))then
call J7(O5,j5,1093681462)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093677363,false)
endif
elseif(i1==1430466865)then
if((X5==$D009F)and(P77(420.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093810508)
endif
elseif((i1==1429221432)or(i1==1160786229))then
if((X5==$D009E)and(GetUnitManaPercent(j5)<65.)and(P77(500.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093677892)
elseif((X5==$D00D4)and(P77(800.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093679411)
endif
elseif(i1==1429221441)then
if((X5==$D009B)and(P77(350.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093677903)
endif
elseif(i1==1315334514)then
if((X5==$D00C4)and(not OAF(j5,200.,Condition(function k3))))then
call J7(O5,j5,1093682521)
elseif((X5==$D026C)and(not OAF(j5,450.,Condition(function k3))))then
call J7(O5,j5,1093682760)
elseif((X5==$D0277)and(not OAF(j5,700.,Condition(function k3))))then
call J7(O5,j5,1093682736)
elseif((X5==$D0131)and(P77(350.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093810506)
endif
elseif(i1==1429221446)then
if((X5==$D00D1)and(((GetUnitLifePercent(j5)<50.)or(P77(300.,HC[48+O5],Condition(function k3))==0)))and(not kQ(j5)))then
call J7(O5,j5,1093678667)
endif
elseif(i1==1332109682)then
if((X5==$D026C)and(P77(650.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093810505)
endif
elseif(i1==1211117640)then
if((X5==$D0272)and(not GZ[O5]))then
call J7(O5,j5,1093679428)
endif
elseif(i1==1315988077)then
if((X5==$D026A)and(P77(800.,HC[48+O5],Condition(function T87))==0)and(not GZ[O5]))then
call J7(O5,j5,1093684561)
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((X5==$D00D4)and(P77(800.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093677895)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
if((X5==$D022E)and(not GZ[O5]))then
call J7(O5,j5,1093748042)
endif
if((X5==$D0080)and((h4[O5]==null)or(not IsUnitInRange(j5,h4[O5],400.))))then
call J7(O5,j5,1093808462)
endif
if(X5==$D00AA or X5==$D00AB)then
call J7(O5,j5,1093681733)
endif
elseif(i1==1215723364)then
if((X5==$D02BD)and(GetUnitManaPercent(j5)<60.)and(not GZ[64+O5]))then
call J7(O5,j5,1093744463)
endif
elseif(i1==1215128178)then
if((X5==$D00C4)and(not GZ[O5]))then
call J7(O5,j5,1093810503)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093810504,false)
endif
elseif(i1==1164799855)then
if((X5==$D024C)and(GetUnitLifePercent(j5)>80.)and(not GZ[64+O5]))then
call J7(O5,j5,1093677378)
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((X5==$D00D4))then
call J7(O5,j5,1093742932)
endif
elseif(i1==1212363833)then
if((X5==$D009B)and(P77(600.,HC[48+O5],Condition(function T87))==0)and(GetUnitManaPercent(j5)<70.))then
call J7(O5,j5,1093678643)
elseif(X5==$D022E)then
call J7(O5,j5,1093815125)
endif
elseif(i1==1315070563)then
if((X5==$D00A0)and((RG7(j5,"Omnislashing"))or((GZ[O5])or((GetUnitManaPercent(j5)<70.)and(P77(600.,HC[48+O5],Condition(function T87))==0)))))then
call J7(O5,j5,1093678407)
endif
elseif(i1==1211117617)then
if((X5==$D02B7)and(P77(400.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093752648)
endif
elseif(i1==1211117620)then
if((X5==$D00C4)and((GetUnitAbilityLevel(j5,1110454324)>0)or(GetUnitManaPercent(j5)<60.)or(P77(800.,HC[48+O5],Condition(function k3))==0)))then
call J7(O5,j5,1093677105)
endif
elseif(i1==1333027688)then
if((X5==$D00C4)and(P77(200.,HC[48+O5],Condition(function k2))==0))then
call J7(O5,j5,1093682252)
elseif((X5==$D022E)and((P77(400.,HC[48+O5],Condition(function T87))==0)or(P77(500.,HC[48+O5],Condition(function k3))<5)))then
call J7(O5,j5,1093682248)
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093750594,true)
endif
elseif(i1==1215657064)then
if((X5==$D0278)and(P77(500.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1093750841)
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if(X5==$D00AA or X5==$D00AB)then
call J7(O5,j5,1093681479)
endif
elseif(i1==1311781193)then
if((X5==$D02B7)and(GetUnitLifePercent(j5)>70.)and(GetUnitManaPercent(j5)<40.)and(P77(500.,HC[48+O5],Condition(function T87))==0))then
call J7(O5,j5,1095656306)
endif
elseif(i1==1311781206)then
if((X5==$D00A1)and(not GZ[O5]))then
call J7(O5,j5,1093684302)
endif
elseif(i1==1211117651)then
if((X5==$D022E)and(not GZ[O5]))then
call J7(O5,j5,1093743696)
endif
elseif(i1==1313157191)then
if((X5==$D022E))then
call J7(O5,j5,1093743689)
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(X5==$D00D4)then
call SA7(O5,j5,1093743946)
elseif(X5==$D02B6)then
call SA7(O5,j5,1093743958)
endif
elseif(i1==1328558390)then
if(X5==$D00D4)then
call SA7(O5,j5,1093744986)
endif
elseif(i1==1160786510)then
if(X5==$D0278)then
call SA7(O5,j5,1093751631)
elseif(X5==$D022E)then
call SA7(O5,j5,1093808697)
endif
elseif(i1==1328558406)then
if(X5==$D022E)then
call SA7(O5,j5,1093751864)
elseif(X5==$D026D)and(not GZ[O5])then
call SA7(O5,j5,1093810257)
endif
elseif(i1==1211119409)then
if X5==$D00A1 then
call SA7(O5,j5,1093749070)
endif
elseif(i1==1311780930)then
if X5==$D0222 and(not O37(j5))then
call SA7(O5,j5,1093686082)
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if X5==$D00AA or X5==$D00AB then
call SA7(O5,j5,1093747504)
endif
endif
set j5=null
endfunction
function PWF takes nothing returns nothing
local unit x6=GetTriggerUnit()
local integer Iz=GetItemTypeId(GetManipulatedItem())
local integer i1=GetUnitTypeId(x6)
local integer O5=GetPlayerId(GetOwningPlayer(x6))
local unit m5=null
local boolean J4=false
set LP4="PWF"
if(Iz==SU[QC])then
set hq[256+O5]=Bz+25.
call PV7(x6,$D0012,h9[O5])
if(O37(x6))then
set G0[32+O5]=true
loop
exitwhen((GetUnitLifePercent(x6)>50.)or(Bz>hq[256+O5]))
if(P87(1000.,x6,Condition(function T87))>0)then
call PV7(x6,$D0012,h9[O5])
else
call IssueImmediateOrderById(x6,$D0019)
endif
call NX7(1.)
endloop
set G0[32+O5]=false
call J3(x6,true)
endif
elseif(Iz==SU[PC])then
call NX7(.5)
set G0[32+O5]=true
loop
exitwhen((GetUnitAbilityLevel(x6,1110454874)==0)or(GetUnitLifePercent(x6)>95.))
if(not OV7(x6))then
elseif(P87(1500.,x6,Condition(function k2))>0)then
call PV7(x6,$D0012,h9[O5])
else
call IssueImmediateOrderById(x6,$D0019)
endif
call NX7(.5)
endloop
set G0[32+O5]=false
call J3(x6,true)
elseif(Iz==SU[Z2])then
set hq[O5]=Bz
set hq[48+O5]=Bz+160.
elseif(Iz==SU[O1])then
set hq[64+O5]=Bz+30.
call NX7(.1)
set m5=h4[O5]
set J4=(m5!=null)and(not O37(x6))and(IssueTargetOrderById(x6,$D000F,m5))
elseif(Iz==SU[QW])then
set m5=null
set hq[512+O5]=Bz+3.
set hq[112+O5]=Bz+25.
call TriggerSleepAction(.01)
if(not O37(x6))then
if(i1==1430466865)then
set m5=VX7(350.,x6)
set J4=(m5!=null)and((((P87(400.,x6,Condition(function k6))>1 and GZ[$D0+O5])or O37(m5))and(PC7(x6,$D00C4,1093810508)))or(PW7(x6,$D009D,1093677651,m5)))
elseif(i1==1162032439)then
set GZ[O5]=true
set J4=J8(O5,(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(600.,x6,Condition(function T87))>1))and(PC7(x6,$D0272,1093677363)))
elseif(i1==1160785973)then
if(PM7(x6,SU[A1]))then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(400.,x6,Condition(function T87))>1))and(PP7(x6,SU[A1]))and(IssueImmediateOrderById(x6,$D0278))
if(not(J4))then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(400.,x6,Condition(function T87))>1))and(IssueImmediateOrderById(x6,$D0278))
endif
else
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(400.,x6,Condition(function T87))>1))and(IssueImmediateOrderById(x6,$D0278))
endif
elseif(i1==1315988077)then
set m5=VX7(220.,x6)
set J4=(m5!=null)and(PC7(x6,$D0080,1093678669))
elseif(i1==1211117616)then
set m5=VX7(220.,x6)
set J4=(m5!=null)and(PC7(x6,$D009F,1093677139))
elseif(i1==1430468406)then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(500.,x6,Condition(function T87))>1))and(IssueImmediateOrderById(x6,$D024C))
elseif(i1==1214931305)then
set J4=(((h4[16+O5]!=null)and(IsUnitInRange(x6,h4[16+O5],350.)))or(P87(400.,x6,Condition(function T87))>1))and(((GetUnitState(x6,UNIT_STATE_MANA)>hq[272+O5]+50.)and(PP7(x6,SU[A1])))or(PW7(x6,$D00CB,1093678147,h4[16+O5]))or(IssueImmediateOrderById(x6,$D0278)))
elseif(i1==1432580716)then
set m5=VX7(300.,x6)
set J4=(m5!=null)and(PW7(x6,$D0079,1093684300,m5))
elseif(i1==1333027688)then
set m5=VX7(300.,x6)
set J4=(m5!=null)and(((P87(500.,x6,Condition(function k0))>5)and(PC7(x6,$D022E,1093682248)or PC7(x6,$D022E,1093750594)))or(PC7(x6,$D00C4,1093682252)))
elseif(i1==1332766568)then
set m5=VX7(250.,x6)
set J4=(m5!=null)and(IssueImmediateOrderById(x6,$D0278))
elseif(i1==1315334514)then
set m5=VX7(220.,x6)
set J4=(m5!=null)and(PC7(x6,$D009F,1093682521))
if(not J4)then
set m5=VX7(600.,x6)
set J4=(m5!=null)and(Bz>TB4[O5])and(G0[256+O5])and(PC7(x6,$D0131,1093810506))
endif
elseif(i1==1215657064)then
set m5=VX7(220.,x6)
set J4=(m5!=null)and(PC7(x6,$D0080,1093677913))
elseif(i1==1160786243)then
set m5=VX7(300.,x6)
if((m5!=null)and(P87(700.,m5,Condition(function k5))>1))then
set GZ[O5]=true
set J4=J8(O5,PW7(x6,$D0079,1093678672,m5))
endif
elseif(i1==1332109682)then
set m5=VX7(350.,x6)
set J4=(m5!=null)and(((P87(500.,x6,Condition(function k0))>4)and(PC7(x6,$D026C,1093810505)))or(PW7(x6,$D02B6,1093678134,m5)))
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
set m5=VX7(300.,x6)
set J4=(m5!=null)and(PW7(x6,$D0079,1093683532,m5))
elseif(i1==1430468913)then
set m5=VX7(300.,x6)
set J4=(m5!=null)and(PC7(x6,$D009F,1093810507))
endif
if((not J4)and(m5!=null))then
call IssueTargetOrderById(x6,$D000F,m5)
endif
endif
elseif(Iz==SU[D44])then
set hq[96+O5]=Bz+13.
elseif(Iz==SU[DQ4])then
set TB4[$F0+O5]=Bz+18.
elseif(Iz==SU[DO4])then
set TB4[$B0+O5]=Bz+30.
elseif(Iz==SU[DX4])then
set TB4[$E0+O5]=Bz+10.
elseif(Iz==SU[RB])then
set TB4[256+O5]=Bz+30.
elseif(Iz==SU[DS4])or(Iz==SU[YA])then
set TB4[$C0+O5]=Bz+17.
elseif(Iz==SU[E54])then
set TB4[$D0+O5]=Bz+30.
call NX7(1.1)
set m5=h4[O5]
if(i1==1328558160)then
set J4=(m5!=null)and(IssueTargetOrderById(x6,$D02B6,m5))
endif
elseif(Iz==SU[ZL])then
set TZ4=false
elseif(Iz==SU[R1])then
set hq[80+O5]=Bz+45.
elseif(Iz==SU[F44])then
set hq[$80+O5]=Bz+30.
elseif(Iz==SU[N6])then
set hq[$90+O5]=Bz+100.
elseif((Iz==SU[XC])or(Iz==SU[WC])or(Iz==SU[E6]))then
set Iz=GetUnitCurrentOrder(x6)
call SetPlayerController(GetOwningPlayer(x6),MAP_CONTROL_NONE)
loop
exitwhen(Iz!=GetUnitCurrentOrder(x6))
call NX7(.1)
endloop
call NX7(.1)
call SetPlayerController(GetOwningPlayer(x6),MAP_CONTROL_COMPUTER)
call NX7(.5)
call J3(x6,true)
if(N37(x6,PL7(x6))<1500.)then
set h9[O5]=PL7(x6)
call SJ7(x6,true)
else
call XG7(x6)
endif
elseif(Iz==SU[B0])then
if(GZ[272+O5])then
call NX7(.01)
if((i1==1315334514)or(i1==1162032439))then
call ExecuteFunc("NQF")
elseif((i1==1315074670)or(i1==1162032951))then
call ExecuteFunc("NRF")
endif
endif
elseif((Iz==SU[X0])or(Iz==SU[Y0]))then
if(not O37(x6))then
call TriggerSleepAction(1.5)
if(i1==1212363833)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and(PW7(x6,$D007F,1093809220,m5))
elseif(i1==1429221441)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and(PW7(x6,$D0107,1093678389,m5))
elseif(i1==1211117653)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and((Bz>TB4[64+O5])and W27(x6,A54,A54,A14,1093686863)and(IssueImmediateOrderById(x6,$D00A4)))
if((not J4)and(m5!=null)and(Bz>TB4[64+O5]))then
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),YS[7],true)
set J4=IssueImmediateOrderById(x6,$D00A4)
call SetPlayerAbilityAvailable(GetOwningPlayer(x6),YS[7],false)
endif
elseif(i1==1160786242)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and(IssueTargetOrderById(x6,$D02B6,m5))
elseif(i1==1332963428)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and(GetUnitState(x6,UNIT_STATE_MANA)>hq[272+O5])and(PW7(x6,$D0200,1093677649,m5))
elseif(i1==1429221424)then
set m5=VX7(400.,x6)
set J4=(m5!=null)and(PW7(x6,$D024B,1093687351,m5))
endif
endif
endif
set x6=null
set m5=null
endfunction
function PXF takes integer O7F,integer SN7 returns integer
if O7F==eY[$AC+SN7]or O7F==eY[$BC+SN7]then
return $A
elseif GetUnitTypeId(G7[SN7])==1211117653 then
return 5
elseif O7F==1093677391 or O7F==1093677633 or O7F==1093682264 or O7F==1093678147 or O7F==1093744944 or O7F==1093809220 or O7F==1093686091 or O7F==1093685831 or O7F==1093677623 or O7F==1093678135 or O7F==1093677378 or O7F==1093683511 or O7F==1093742680 or O7F==1093678167 or O7F==1093677361 or O7F==1093678137 or O7F==1093678405 or O7F==1093808453 or O7F==1093742660 or O7F==1093684300 or O7F==1093684045 or O7F==1093685848 or O7F==1093677136 or O7F==1093678669 or O7F==1093677139 or O7F==1093678913 or O7F==1093681490 or O7F==1093685570 or O7F==1093679182 or O7F==1093679190 or O7F==1093685071 or O7F==1093685046 or O7F==1093750345 or O7F==1093684280 or O7F==1093743698 or O7F==1093685584 or O7F==1093748033 or O7F==1093686083 or O7F==1093743414 or O7F==1093743178 or O7F==1093743689 or O7F==1093678679 or O7F==1093685302 or O7F==1093687349 or O7F==1093684558 or O7F==1093744435 or O7F==1093679192 or O7F==1093678389 or O7F==1093677892 or O7F==1093677640 or(O7F==1093679173 and AW7()==false)or O7F==1095267426 or O7F==1093687351 or O7F==1093810507 or O7F==1093744948 or O7F==1093681989 or O7F==1093678134 or O7F==1093683019 or O7F==1093678169 or O7F==1093678422 or O7F==1093678665 or O7F==1093750840 or O7F==1093678671 or O7F==1093683510 or O7F==1093684550 or O7F==1093683287 or O7F==1093684813 or O7F==1093684815 or O7F==1093685066 or O7F==1093678672 or O7F==1093684802 or O7F==1093742668 or O7F==1093684817 or O7F==1093685074 or O7F==1093685825 or O7F==1093685813 or O7F==1093685573 or O7F==1093750087 or O7F==1093753167 or O7F==1093751607 or O7F==1093751633 or O7F==1093751637 or O7F==1093751608 then
return 2
endif
return 0
endfunction
function PYF takes unit OC7,integer ARE,integer O7F returns nothing
local integer O5=0
local integer i
local integer j
local boolean J4=false
set LP4="aiRubickSpellSteal"
if(not OY7(OC7))then
return
endif
loop
exitwhen O5==ZK4
if O7F==ZJ4[O5]then
return
endif
set O5=O5+1
endloop
set i=GetPlayerId(GetOwningPlayer(OC7))
set j=PXF(O7F,i)
if j==0 then
return
endif
set O5=1
loop
exitwhen O5>$B
if O5==6 then
set O5=7
endif
set J4=false
if WQ7(Player(O5))and IsUnitEnemy(OC7,Player(O5))and G7[O5]!=null and GetUnitTypeId(G7[O5])==1160786520 and GetWidgetLife(G7[O5])>.405 and(not O37(G7[O5]))and IsUnitInRange(G7[O5],OC7,950.)and Bz>TB4[$A0+O5]and eY[416+O5]!=O7F and((hq[816+O5]<Bz)or((Bz<TB4[O5]-$A)and(j<=eY[432+O5]))or(j>eY[432+O5]))then
set eY[448+O5]=O7F
set h4[320+O5]=OC7
endif
set O5=O5+1
endloop
endfunction
function PZF takes unit MQ7,integer O7F,unit OC7 returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer RX7=GetPlayerId(GetOwningPlayer(OC7))
set eY[336+O5]=0
set eY[352+O5]=0
set eY[368+O5]=0
set eY[$BC+O5]=0
set TB4[O5]=0
set TB4[16+O5]=0
set TB4[32+O5]=0
set TB4[48+O5]=0
if O7F==eY[336+RX7]then
set eY[336+O5]=O7F
elseif O7F==eY[352+RX7]then
set eY[352+O5]=O7F
elseif O7F==eY[368+RX7]then
set eY[368+O5]=O7F
elseif O7F==eY[$AC+RX7]or O7F==eY[$BC+RX7]then
set eY[$BC+O5]=O7F
endif
set eY[432+O5]=PXF(O7F,RX7)
set eY[400+O5]=GetUnitTypeId(OC7)
set eY[416+O5]=O7F
set hq[816+O5]=Bz+(GetUnitAbilityLevel(MQ7,1093809992)+2)*60
endfunction
function PAF takes unit it,unit m5 returns boolean
local boolean J4=false
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i1
if(X_4[O5]==5)or(X_4[O5]==3 and GetRandomInt(1,3)==1)then
set i1=GetUnitTypeId(it)
set bj_lastLoadedUnit=it
if i1==1429221451 and(Bz>TB4[32+O5])and(P87(900.,it,Condition(function P97))==0)then
set J4=IssueImmediateOrderById(it,$D0217)
elseif i1==1311780930 and(Bz>TB4[48+O5])then
set J4=PC7(it,$D0222,1093686082)
elseif i1==1429221424 and(Bz>TB4[48+O5])then
set J4=PC7(it,$D022E,1093815119)
elseif i1==1160786265 and(Bz>TB4[16+O5])then
set J4=PC7(it,$D022E,1093748033)
endif
if(not J4)and((GetUnitLifePercent(it)<40)or(O37(it))or(GetUnitMoveSpeed(it)<$C8))then
if(not J4)and(PD7(it,SU[B0]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PD7(it,SU[P1]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,it)
endif
endif
if(not J4)and(h4[O5]!=null or O37(it))then
if(not J4)and(PM7(it,SU[A1]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PM7(it,SU[X0]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PM7(it,SU[DU4]))then
set TA4=true
set J4=UnitUseItem(it,bj_lastCreatedItem)
set TA4=false
endif
endif
if J4 then
set h4[352+O5]=m5
endif
endif
return J4
endfunction
function PBF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local integer MTF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(j5)
local integer PCF=0
local unit m5=null
local boolean J4=false
local boolean P3F=GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER
local location b5=null
local integer UP
set LP4="PBF"
set m5=GetSpellTargetUnit()
if m5!=null and WQ7(GetOwningPlayer(m5))and(is(m5))then
set J4=PAF(m5,j5)
endif
set GZ[16+O5]=false
set h4[32+O5]=null
if(GetSpellTargetUnit()!=null)then
set h4[32+O5]=GetSpellTargetUnit()
set m5=GetSpellTargetUnit()
endif
if i1==1160786520 and MTF!=1093809990 and MTF!=1093809991 and MTF!=1093809992 and MTF!=1093810008 and hq[816+O5]>Bz then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if DH7 and i1!=1160786520 then
call PYF(j5,i1,MTF)
endif
if(MTF==1097163124)then
if(P3F)then
call NX7(.1)
call PV7(j5,$D0012,h9[O5])
endif
elseif(i1==1162032181)then
if((P3F)and(MTF==1093684299))then
set hq[512+O5]=Bz+3.
if(m5!=null)then
call NX7(((N67(GetUnitX(j5),GetUnitX(j5),GetUnitX(m5),GetUnitY(m5))/40.)*.01)+.5)
else
call NX7(((N67(GetUnitX(j5),GetUnitX(j5),GetLocationX(HC[O5]),GetLocationY(HC[O5]))/40.)*.01)+.5)
endif
set m5=VX7(300.,j5)
if(((not O37(j5))or(Id(O5)))and(m5!=null))then
set GZ[O5]=true
if((O37(j5))or(not J8(O5,(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(ORF(j5)))and(GetUnitState(m5,UNIT_STATE_LIFE)>300.)and(PY7(j5,$D02AC,1093683761,0,m5)))))then
call P8F(j5,m5,true)
endif
elseif(O37(j5))then
call PV7(j5,$D0012,h9[O5])
else
call J3(j5,true)
endif
endif
elseif(i1==1429221424)then
if(MTF==1093748789)then
call TriggerSleepAction(.05)
if((h4[O5]==m5)and(GetUnitLifePercent(m5)<70.))then
call IUF(j5,m5)
endif
set PCF=$D0118
endif
elseif(i1==1430466609)then
if(MTF==1093684549)then
set hq[512+O5]=Bz+3.
call TriggerSleepAction(.05)
if(not O37(j5))then
set m5=VX7(500.,j5)
if(not P3F)then
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call IUF(j5,m5)
endif
elseif(m5!=null)then
set J4=(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<OQF(j5))and(PY7(j5,$D009D,1093810258,1093810259,m5)))or((IsUnitInRange(j5,m5,400.))and(PC7(j5,$D022E,1093678145)))or(PY7(j5,$D022F,1093685559,0,m5)))
endif
else
set J4=(P3F)and(h4[O5]==null)and((eY[O5]==1)or(eY[O5]==3)or(eY[O5]==4))and(PV7(j5,$D0012,h9[O5]))
endif
set PCF=$D022D
elseif(MTF==1093685559)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set J4=(P3F)and(IsUnitInRange(j5,m5,400.))and((PC7(j5,$D022E,1093678145))or((O37(m5))and(PY7(j5,$D009D,1093810258,1093810259,m5))))
set PCF=$D022F
elseif(MTF==1093678145)then
call TriggerSleepAction(.05)
set hq[16+O5]=Bz+10.
set m5=VX7(400.,j5)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.))then
call IUF(j5,m5)
endif
if(P3F)then
set J4=(m5!=null)and(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<OQF(j5))and(not ke(j5))and(PY7(j5,$D009D,1093810258,1093810259,m5)))or(PY7(j5,$D022F,1093685559,0,m5)))
endif
set PCF=$D00FA
elseif((MTF==1093810258)or(MTF==1093810259))then
call TriggerSleepAction(.05)
set PCF=GetUnitAbilityLevel(j5,MTF)
if(PCF!=3)then
set hq[O5]=Bz+140.-(PCF*20.)
else
set hq[O5]=Bz+75.
endif
set m5=K2(400.,HC[O5])
if(m5!=null)then
call P8F(j5,m5,true)
endif
set PCF=$D009D
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(MTF==1093678929)then
call TriggerSleepAction(.5)
if(IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(j5)))then
set G0[32+O5]=false
call P8F(j5,GetSpellTargetUnit(),true)
call KGF(j5,GetSpellTargetUnit())
endif
endif
elseif(i1==1433168227)then
if(MTF==1093678918)then
call TriggerSleepAction(.05)
if((m5!=null)and(O37(m5)))then
call P8F(j5,m5,true)
endif
set PCF=$D0102
elseif(MTF==1093678387)then
call TriggerSleepAction(.05)
set PCF=$D0062
elseif(MTF==1093679186)then
call TriggerSleepAction(.05)
set PCF=$D0101
endif
elseif(i1==1429221430)then
if(MTF==1093681736)then
call TriggerSleepAction(.05)
set PCF=$D0279
elseif(MTF==1093687121)then
call TriggerSleepAction(.05)
set hq[512+O5]=Bz+20.
call P8F(j5,VX7(500.,j5),true)
set PCF=$D00C4
endif
elseif(i1==1430466872)then
if(MTF==1093684558)then
call TriggerSleepAction(.05)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(j5,m5,true)
if(P3F)then
call NX7(1.)
set PCF=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not ke(m5))and(PCF>200.)and(PCF<OTF(j5)))then
set GZ[O5]=true
set J4=J8(O5,PY7(j5,$D0097,1093679413,1093679447,m5))
endif
endif
endif
set PCF=$D0216
endif
elseif(i1==1162032439)then
if(MTF==1093744435)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+22.
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call P8F(j5,m5,true)
if((P3F)and(GetHeroLevel(j5)>5))then
set PCF=GetUnitAbilityLevel(j5,1093677363)
if(PCF==0)then
set PCF=GetUnitAbilityLevel(j5,1093681462)
endif
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(100+(300*PCF)))and(GetUnitState(m5,UNIT_STATE_LIFE)<200.))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(j5),1093681462,true)
set J4=J8(O5,PC7(j5,$D0272,1093677363))
endif
endif
endif
set PCF=$D022F
endif
elseif(i1==1430466865)then
if(MTF==1093677651)then
call TriggerSleepAction(.05)
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))then
set m5=K2(350.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.))then
call IUF(j5,m5)
endif
set J4=(P3F)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<55.)and(IsUnitInRange(j5,m5,350.))and(R2I(GetUnitState(j5,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(j5,1093810508)*100)))and(PC7(j5,$D00C4,1093810508))
set PCF=$D009D
elseif(MTF==1093677879)then
call TriggerSleepAction(.05)
set m5=h4[O5]
set J4=(P3F)and(m5!=null)and(OA7(m5))and(G0[$80+O5])and(IsUnitInRange(j5,m5,800.))and(IssueTargetOrderById(j5,$D000F,m5))
set PCF=$D0062
endif
elseif(i1==1430468144)then
if(MTF==1093679192)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D00DD
endif
elseif(i1==1429221441)then
if((MTF==1093685847)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
if(P3F)then
if((GetUnitLifePercent(m5)>70.)or((Bz<hq[O5])and(GetUnitCurrentOrder(m5)==$D0005))or(not PY7(j5,$D0107,1093678389,0,m5))or(not PC7(j5,$D009B,1093677903)))then
call P8F(j5,m5,true)
endif
else
call IUF(j5,m5)
endif
elseif(MTF==1093678389)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+10.
call P8F(j5,m5,true)
if((P3F)and(G0[$80+O5]))then
set J4=((not IsUnitInRange(j5,m5,300.))and(GetUnitLifePercent(m5)<60.)and(GetUnitLifePercent(j5)>60.)and(IssueTargetOrderById(j5,$D0278,m5)))or((IsUnitInRange(j5,m5,250.))and(GetUnitLifePercent(m5)<65.)and(PC7(j5,$D009B,1093677903)))
endif
set PCF=$D0107
elseif(MTF==1093677903)then
set hq[16+O5]=Bz+180.
endif
elseif(i1==1165451634)then
if((MTF==1093685324)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
if(P3F)then
if(not PY7(j5,$D02B6,1093687629,0,m5))then
call P8F(j5,GetSpellTargetUnit(),true)
endif
else
call IUF(j5,m5)
endif
elseif(MTF==1093687629)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set J4=(P3F)and(not IsUnitInRange(j5,m5,300.))and(IssueTargetOrderById(j5,$D02B6,m5))
set PCF=$D02B6
endif
elseif(i1==1432642913)then
if(MTF==1093684550)then
call TriggerSleepAction(.05)
set PCF=$D0097
elseif(MTF==1093683507)then
call TriggerSleepAction(.05)
if((IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(GetUnitLifePercent(m5)<50.))then
call P8F(j5,m5,true)
endif
set PCF=$D02B6
endif
elseif(i1==1432510828)then
if((P3F)and(MTF==1093681985))then
call ExecuteFunc("NOF")
elseif(MTF==1093682004)then
set G0[32+O5]=false
endif
elseif(i1==1429221446)then
if((MTF==1093682764)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call IUF(j5,m5)
if P3F and IsUnitInRange(j5,m5,$E1)then
call SetPlayerAbilityAvailable(Player(O5),1093678667,true)
call IssueImmediateOrderById(j5,$D00D2)
endif
elseif((MTF==1093678667)and(P3F))then
set m5=VX7(250.,j5)
set J4=(m5!=null)and((h4[O5]==m5)or(GetUnitLifePercent(m5)<75.))and(PY7(j5,$D0200,1093682764,1093747544,m5))
endif
elseif(i1==1332963428)then
if((MTF==1093677649)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call IUF(j5,m5)
endif
elseif(i1==1211117640)then
if(MTF==1093681989)then
call TriggerSleepAction(.05)
if((IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set h4[16+O5]=m5
call P7F(j5,m5)
set J4=(P3F)and(not G0[32+O5])and((OBF(j5,m5))or(IssueTargetOrderById(j5,$D0079,m5)))
endif
set PCF=$D0206
elseif(MTF==1093684564)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+6.
set PCF=$D0079
elseif(MTF==1093679428)then
set hq[16+O5]=Bz+35.
elseif(((MTF==1093681987)or(MTF==1093677658))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if(GetUnitAbilityLevel(m5,1110454606)==0)then
call IUF(j5,m5)
else
call P7F(j5,m5)
endif
endif
elseif(i1==1430468406)then
if((MTF==1093677645)or(MTF==1093678670)or(MTF==1093678898)or(MTF==1093678900)or(MTF==1093678904))then
call TriggerSleepAction(.05)
set PCF=$D00FA
elseif((MTF==1093678899)or(MTF==1093677898)or(MTF==1093678154)or(MTF==1093678157)or(MTF==1093678158))and(P3F)then
call ExecuteFunc("O4F")
endif
elseif(i1==1432642913)then
if(MTF==1093684819)then
if((P3F)and(GetUnitLifePercent(j5)<50.)and(not Id(O5)))then
call TriggerSleepAction(.5)
call SJ7(j5,false)
endif
endif
elseif(i1==1160786241)then
if((MTF==1093684820)or(MTF==1093684824))then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call IUF(j5,m5)
call P7F(j5,m5)
endif
endif
elseif(i1==1160786243)then
if(MTF==1093678672)then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call IUF(j5,m5)
endif
endif
elseif(i1==1328558154)then
if(MTF==1093750840)then
elseif(MTF==1093682996 or MTF==1093747768)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call IUF(j5,m5)
endif
endif
elseif(i1==1315988077)then
if(MTF==1093684561)then
set m5=K2(500.,HC[O5])
if(m5!=null)then
call IUF(j5,m5)
call KGF(j5,m5)
endif
elseif(MTF==1093684561)then
call TriggerSleepAction(.05)
if(GetUnitLifePercent(m5)<50.)then
call P8F(j5,m5,true)
endif
set PCF=$D0269
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(MTF==1093677894)then
call TriggerSleepAction(.05)
set PCF=$D0264
elseif(MTF==1093681490)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D007F
endif
elseif(i1==1164207469)then
if(MTF==1095066220)then
set hq[512+O5]=Bz+3.
call TriggerSleepAction(.05)
set m5=VX7(200.,j5)
if(m5!=null)then
call P8F(j5,m5,true)
endif
set J4=(P3F)and(h4[O5]==null)and(O37(j5))and((eY[O5]==1)or(eY[O5]==3)or(eY[O5]==4))and(PV7(j5,$D0012,h9[O5]))
set PCF=$D022D
endif
elseif(i1==1315007329)then
if(MTF==1093677108)then
call TriggerSleepAction(.05)
if(GetUnitLifePercent(m5)<65.)then
call P8F(j5,m5,true)
endif
set PCF=$D007F
elseif(MTF==1093681716)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D00B5
endif
elseif(i1==1332898670)then
if((MTF==1093677136)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call IUF(j5,m5)
elseif(MTF==1093685848)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
if((P3F)and(IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<70.)or((Bz>hq[16+O5])and(GetUnitState(j5,UNIT_STATE_MANA)>(hq[272+O5]+80.+(30.*GetUnitAbilityLevel(j5,1093677136))))))and(GetHeroLevel(j5)>5)and(GetUnitAbilityLevel(m5,1110454344)>0))then
set GZ[O5]=true
set J4=J8(O5,PY7(j5,$D0218,1093677128,1093681457,m5))
endif
set PCF=$D00B5
elseif((MTF==1093677128)or(MTF==1093681457))then
call TriggerSleepAction(.05)
set m5=K2(550.,HC[O5])
if(m5!=null)then
call KGF(j5,m5)
if((P3F)and(Bz>hq[16+O5]))then
set GZ[O5]=true
set J4=(((IsUnitInRange(j5,m5,400)or BK8(m5)))and J8(O5,PW7(j5,$D0200,1093677136,m5)))or(PY7(j5,$D0216,1093685848,0,m5))
endif
endif
set hq[O5]=Bz+120.
set PCF=$D0218
endif
elseif(i1==1215723364)then
if(MTF==1093683534)or(MTF==1093747031)then
call TriggerSleepAction(.3)
set hq[512+O5]=Bz+2.
set hq[O5]=Bz+45.
call P8F(j5,m5,true)
call KGF(j5,m5)
elseif(MTF==1093677633)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set hq[16+O5]=Bz+10.
set PCF=$D007F
endif
elseif(i1==1433105516)then
if(MTF==1093747288)then
set m5=K2(400.,HC[O5])
if(m5!=null)then
call IUF(j5,m5)
call KGF(j5,m5)
endif
endif
elseif(i1==1164799603)then
if(MTF==1093808453)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D00FA
endif
elseif(i1==1328558160)then
if(MTF==1093682766)then
set hq[O5]=Bz+11.
if((not O37(j5))or(Id(O5)))then
set hq[512+O5]=Bz+3.
if(GetSpellTargetUnit()!=null)then
call NX7((RMaxBJ(N67(GetUnitX(j5),GetUnitX(j5),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))/50.,1.)*.04)+.3)
else
call NX7((RMaxBJ(N67(GetUnitX(j5),GetUnitX(j5),GetLocationX(HC[O5]),GetLocationY(HC[O5]))/50.,1.)*.04)+.3)
endif
if(not IsUnitHidden(j5))then
call P8F(j5,VX7(300.,j5),true)
if((P3F)and(GetUnitCurrentOrder(j5)==0))then
call J3(j5,true)
endif
endif
endif
endif
elseif(i1==1212363833)then
if(MTF==1093678643)then
set hq[16+O5]=Bz+60.
endif
elseif(i1==1315070563)then
if(MTF==1093684529)then
set hq[O5]=Bz+140.-(GetUnitAbilityLevel(j5,MTF)*10.)
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call IUF(j5,m5)
endif
endif
elseif(i1==1214931305)then
if(MTF==1093678147)then
call TriggerSleepAction(.05)
if P3F then
call IssueTargetOrderById(j5,$D000F,m5)
endif
set hq[16+O5]=Bz+10.
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetUnitState(j5,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(j5,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(j5))))then
call IUF(j5,m5)
if((P3F)and(GetHeroLevel(j5)>5)and(Bz>hq[O5])and(GetUnitState(m5,UNIT_STATE_LIFE)>150.)and(G0[$80+O5]))and(not IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE))then
if(IsUnitInRange(j5,m5,450.))then
set J4=((GetUnitState(j5,UNIT_STATE_MANA)>hq[272+O5]+50.)and(PP7(j5,SU[A1])))or(IssueImmediateOrderById(j5,$D0278))
endif
endif
if((not J4)and(P3F)and(not O37(j5)))then
set J4=IssueTargetOrderById(j5,$D000F,m5)
endif
endif
endif
set PCF=$D00CB
elseif(MTF==1093748025)then
call TriggerSleepAction(.05)
if P3F then
call IssueTargetOrderById(j5,$D000F,m5)
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(G0[$80+O5]))then
if((GetUnitState(j5,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(j5,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(j5))))then
call P8F(j5,m5,true)
endif
endif
set PCF=$D0079
elseif((MTF==1093677906)or(MTF==1093681494))then
set m5=K2(600.,PU7(j5))
if(m5!=null)then
call IUF(j5,m5)
call KGF(j5,m5)
endif
set hq[O5]=Bz+180.-(GetUnitAbilityLevel(j5,MTF)*30.)
endif
elseif(i1==1212365106)then
if((MTF==1093684025)and(P3F)and(IsUnitEnemy(m5,GetOwningPlayer(j5)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call TriggerSleepAction(1.)
call PY7(j5,$D0079,1093685831,0,m5)
endif
elseif(i1==1211117617)then
if(MTF==1093744944)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+8.
call P8F(j5,m5,true)
set J4=(P3F)and(IsUnitInRange(j5,m5,400.))and(GetUnitLifePercent(m5)<70.)and(PC7(j5,$D02B7,1093752648))
set PCF=$D02B6
elseif(MTF==1093752648)then
call TriggerSleepAction(.05)
set m5=VX7(800.,j5)
call P8F(j5,m5,true)
set hq[512+O5]=Bz+20.
if((P3F)and(m5!=null)and(IsUnitInRange(j5,m5,700.)))then
set J4=(PY7(j5,$D02B6,1093744944,0,m5))or(IssueTargetOrderById(j5,$D000F,m5))
endif
set PCF=$D02B7
endif
elseif(i1==1211117633)then
if(MTF==1093684045)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
call P7F(j5,m5)
if((P3F)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set J4=PY7(j5,$D007F,1093684310,0,m5)
set h4[16+O5]=m5
endif
set PCF=$D0269
endif
elseif(i1==1211117620)then
if(MTF==1093677623)then
call TriggerSleepAction(.05)
set m5=K2(280.,HC[O5])
call P8F(j5,m5,true)
if((P3F)and(m5!=null))then
call IssueTargetOrderById(j5,$D000F,m5)
call NX7(1.)
set J4=((not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<OUF(j5))and(PY7(j5,$D0097,1093677392,1093679450,m5)))or(((GetUnitLifePercent(m5)<50.)and(OBF(j5,m5))))or(PY7(j5,$D009D,1093677382,0,m5))or(IssueTargetOrderById(j5,$D000F,m5))
endif
set PCF=$D0108
elseif(MTF==1093677382)then
call TriggerSleepAction(.05)
set hq[16+O5]=Bz+8.5
if(m5==null)then
set m5=K2(300.,HC[O5])
endif
set J4=(P3F)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<OUF(j5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(PY7(j5,$D0097,1093677392,1093679450,m5))
set PCF=$D009D
endif
elseif(i1==1215657064)then
if(MTF==1093677913)then
call TriggerSleepAction(.05)
set hq[O5]=Bz+7.75
set m5=VX7(350.,j5)
if((m5!=null)and((not O37(j5))or(O37(m5))))then
call P8F(j5,m5,true)
set J4=(P3F)and(PC7(j5,$D0278,1093750841))
endif
set PCF=$D0080
elseif(MTF==1093750841)then
call TriggerSleepAction(.05)
set m5=VX7(500.,j5)
if(m5!=null)then
call P8F(j5,m5,true)
endif
if(P3F)then
if((GetHeroLevel(j5)>5)and(G0[$80+O5])and(GetUnitLifePercent(j5)>70.)and(not IC(O5)))then
set hq[512+O5]=Bz+6.
endif
if(m5==null)then
set m5=P47(500.,PU7(j5),Condition(function TK7))
endif
set J4=(m5!=null)and(not G0[O5])and(G0[$80+O5])and((not O37(j5))or(O07(m5,j5)))and(IssueTargetOrderById(j5,$D000F,m5))
endif
set PCF=$D0251
endif
elseif(i1==1332179560)then
if(MTF==1093742660)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D02B6
endif
elseif(i1==1429221443)then
if(MTF==1093744948)then
call TriggerSleepAction(.05)
call P8F(j5,m5,true)
set PCF=$D0097
endif
elseif(i1==1215130471)then
if((MTF==1093678167)or(MTF==1093679161)or(MTF==1093679169)or(MTF==1093679172)or(MTF==1093815121))then
call TriggerSleepAction(.05)
if((GZ[O5])or(m5==h4[O5])or(GetUnitLifePercent(m5)<55.))then
call P8F(j5,m5,true)
elseif(IsUnitType(m5,UNIT_TYPE_HERO))then
call IUF(j5,m5)
endif
set PCF=$D007F
elseif((MTF==1093677361)or(MTF==1093677111)or(MTF==1093677396)or(MTF==1093677126))then
call TriggerSleepAction(.05)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call P8F(j5,m5,true)
endif
set PCF=$D02B6
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(MTF==1093750345)then
call ExecuteFunc("PDF")
endif
elseif(i1==1311781206)then
if((P3F)and(MTF==1093684302))then
call TriggerSleepAction(1.)
if(((GetUnitManaPercent(j5)>55.)and(P87(500.,j5,Condition(function k3))>2))or(P87(500.,j5,Condition(function T87))>0))then
call IssueImmediateOrderById(j5,$D0278)
endif
endif
elseif(i1==1164799855)then
if((MTF==1093677378)and(P3F))then
call ExecuteFunc("O9F")
endif
elseif(i1==1311787088)then
if(MTF==1093750089)and P3F then
call TriggerSleepAction(.05)
call IssueImmediateOrderById(j5,$D0004)
endif
elseif(i1==1211117651)then
if(MTF==1093743698)and P3F then
call NX7(.01)
call IssueTargetOrderById(j5,$D000F,m5)
endif
elseif(i1==1328558406)then
if P3F then
if MTF==1093752114 then
call QF7(GetHandleId(j5),"AI|IoSpiritsFar",true)
elseif MTF==1093752115 then
call QF7(GetHandleId(j5),"AI|IoSpiritsFar",false)
elseif MTF==1093751864 then
call RR7(j5,"AI|IoSpirits",19)
endif
endif
elseif(i1==1160786506)then
if MTF==1093751637 then
set b5=GetSpellTargetLoc()
if P3F then
call J3(j5,true)
endif
call NX7(1.2)
set m5=VZ7(300,j5,GetLocationX(b5),GetLocationY(b5))
call P8F(j5,m5,true)
if P3F and(m5!=null)then
if(h4[O5]==null or(not IsUnitInRangeLoc(h4[O5],b5,300)))then
call ZSE(O5,m5,false,false)
endif
set J4=(IssuePointOrderById(j5,$D02B6,GetLocationX(b5),GetLocationY(b5)))
endif
endif
elseif(i1==1211122767)then
if MTF==1093812807 then
call TriggerSleepAction(.05)
set m5=K2(250.,HC[O5])
call P8F(j5,m5,true)
set PCF=$D02B6
endif
endif
if((P3F)and(not J4)and(PCF!=0)and(GetUnitCurrentOrder(j5)==PCF))then
call J3(j5,true)
endif
set j5=null
set m5=null
set b5=null
endfunction
function P6F takes nothing returns nothing
local unit it=GetTriggerUnit()
local integer MTF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local unit m5=h4[32+O5]
local integer UP
local location b5=null
local boolean J4=false
local boolean P3F=GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER
local real PLF=0
local unit JX7=null
set LP4="P6F"
call TriggerSleepAction(.01)
if((not P3F)and(hq[464+O5]>Bz)and(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call IUF(it,m5)
endif
if(m5!=null)and(not OA7(m5))then
set m5=null
endif
if(h4[O5]!=null)and(not OA7(h4[O5]))then
set h4[O5]=null
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if((MTF==1093677647)or(MTF==1093679193)or(MTF==1093679194)or(MTF==1093679408)or(MTF==1093679410))then
if(P3F and T54[O5])then
if(PD7(it,GetItemTypeId(T_4[O5])))then
call NX7(1.)
call DisableTrigger(H84)
call UnitRemoveItem(it,PH7(it,GetItemTypeId(T_4[O5])))
call RemoveItem(T_4[O5])
call EnableTrigger(H84)
endif
if(T24[O5]!=null)then
call NX7(.2)
call UnitAddItem(it,T24[O5])
endif
set T04[O5]=Bz+T14[UE4]
set T54[O5]=false
set T_4[O5]=null
set T24[O5]=null
endif
call P8F(it,m5,true)
set J4=(i1==1429221445)and(P3F)and(not ke(m5))and(PY7(it,$D007F,1093678647,1093679184,m5))
elseif((MTF==1094936696)or(MTF==1095331943))then
call P8F(it,m5,true)
elseif(MTF==1095331188)then
if(P3F)then
call NX7(1.)
call XG7(it)
endif
elseif(i1==1160785970)then
if(MTF==1093748023)then
call P8F(it,VX7(750.,it),true)
elseif(MTF==1093747792)then
call P8F(it,VX7(550.,it),true)
if(P3F)then
call NX7(N77(IsUnitInRange(it,m5,300),1.25,2.25))
set J4=(m5!=null)and(Bz>TB4[O5])and(((GetUnitAbilityLevel(it,1093747023)>0)and(PC7(it,$D0105,1093747023)))or((GetUnitAbilityLevel(it,1093752150)>0)and(PC7(it,$D0105,1093752150))))
endif
elseif((MTF==1093747023)or(MTF==1093752150))then
if(P3F)then
set J4=(IsUnitInRange(it,m5,440.))and(IssuePointOrderById(it,$D02B6,GetUnitX(m5)+2,GetUnitY(m5)-2))
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(MTF==1093747028)then
elseif(MTF==1093682994)then
if(P3F)then
set J4=(m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.)and(IsUnitInRange(it,m5,400.))and(PC7(it,$D0265,1093747028))
else
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<50.))then
call IUF(it,m5)
endif
endif
endif
elseif(i1==1328558154)then
if((m5!=null)and(P3F)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call ZSE(O5,m5,false,false)
call IssueTargetOrderById(it,$D000F,m5)
endif
elseif(i1==1429221443)then
if(MTF==1093686322)then
set hq[$F0+O5]=Bz+$F
if((not O37(it))or(Id(O5)))then
if(m5!=null)then
call P8F(it,m5,true)
set hq[512+O5]=Bz+6.+(GetUnitAbilityLevel(it,MTF)*5.)
else
call P8F(it,VX7(500.,it),true)
set hq[512+O5]=Bz+6.+(GetUnitAbilityLevel(it,MTF)*5.)
endif
endif
call TriggerSleepAction(1.)
if((P3F)and(IsUnitHidden(it)))then
call ShowUnitShow(it)
endif
endif
elseif(i1==1162032951)then
if(MTF==1093678404)then
call P8F(it,VX7(550.,it),true)
elseif((MTF==1093679152)or(MTF==1093752154))then
set UP=GetUnitAbilityLevel(it,1093679152)
if((UP==0)and(MTF==1093752154))then
set UP=GetUnitAbilityLevel(it,1093752154)
if(UP>0)then
set hq[O5]=Bz+12.
endif
elseif(MTF==1093679152)then
if(UP==1)then
set hq[O5]=Bz+80.
elseif(UP==2)then
set hq[O5]=Bz+50.
elseif(UP==3)then
set hq[O5]=Bz+30.
else
set hq[O5]=Bz+80.
endif
else
set hq[O5]=Bz+80.
endif
call P8F(it,m5,true)
elseif(MTF==1093679446)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1162032181)then
if(MTF==1093683761)then
set hq[O5]=Bz+180.
endif
elseif(i1==1160786505)then
if(MTF==1093753167)then
set UP=GetUnitAbilityLevel(it,1093753167)
call IUF(it,m5)
call P8F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(P3F)and(m5!=null)and(iU(it))and(((Bz>TB4[32+O5])and(IsUnitInRange(it,m5,1000.))and(P87(900.,m5,Condition(function TK7))==0)and(IssueTargetOrderById(it,$D00D9,m5)))or((Bz>TB4[48+O5])and(IsUnitInRange(it,m5,570.))and(IssueImmediateOrderById(it,$D0272)))or(IssueTargetOrderById(it,$D000F,m5)))
elseif(MTF==1093751607)then
if(m5!=null)then
call IUF(it,m5)
set J4=(P3F)and((Bz>TB4[O5])and(IsUnitInRange(it,m5,250.))and((GetUnitLifePercent(m5)<47.)or(GetRandomInt(1,3)==1))and(IssueImmediateOrderById(it,$D022E)))or(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(MTF==1093753169)then
set UP=GetUnitAbilityLevel(it,1093753169)
if(h4[O5]!=null)then
call P8F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(P3F)and(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
endif
elseif(i1==1211117653)then
if(MTF==1093687372)then
set TB4[80+O5]=Bz+60.
elseif(MTF==1093686862)then
set TB4[48+O5]=Bz+55.
if((P3F)and((GetUnitState(it,UNIT_STATE_MANA))>$C8)and(GetUnitLevel(it)>=$A)and((Bz>TB4[O5])or(WZ7(it,1093686861)))and(Bz>TB4[112+O5]))then
set J4=W27(it,A14,A04,A54,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(h4[O5]),GetUnitY(h4[O5]))
endif
elseif(MTF==1093686863)then
if(P3F)then
set GZ[$E0+O5]=true
set J4=(h4[O5]!=null)and(IsUnitInRange(it,h4[O5],450.))and(IsUnitType(h4[O5],UNIT_TYPE_HERO))and(PD7(it,SU[X0]))and(UnitUseItem(it,PH7(it,SU[X0])))
set GZ[$E0+O5]=false
endif
set TB4[64+O5]=Bz+30.
elseif(MTF==1093686874)then
set TB4[16+O5]=Bz+20.
elseif(MTF==1093686855)then
set TB4[$90+O5]=Bz+30.
elseif(MTF==1093686867)then
set TB4[32+O5]=Bz+30.
elseif(MTF==1093686859)then
set TB4[96+O5]=Bz+30.
if((P3F)and((GetUnitState(it,UNIT_STATE_MANA))>$AE)and((Bz>TB4[O5])or(WZ7(it,1093686855)))and(Bz>TB4[$90+O5])and(h4[O5]!=null))then
set UP=GetUnitAbilityLevel(it,1093808471)
if(UP>4)then
if(UP==5)then
call NX7(.6)
elseif(UP==6)then
call NX7(.9)
elseif(UP==7)then
call NX7(1.1)
endif
endif
set J4=W27(it,A54,A54,A54,1093686855)and IssuePointOrderById(it,$D0079,GetUnitX(h4[O5]),GetUnitY(h4[O5]))
endif
elseif(MTF==1093686865)then
set TB4[$80+O5]=Bz+15.
elseif(MTF==1093686861)then
set TB4[112+O5]=Bz+40.
if((P3F)and((GetUnitState(it,UNIT_STATE_MANA))>110)and((Bz>TB4[O5])or(WZ7(it,1093686874)))and(Bz>TB4[16+O5])and(h4[O5]!=null))then
set J4=W27(it,A14,A14,A14,1093686874)and(PW7(it,$D0219,1093686874,h4[O5]))
endif
if((not J4)and(P3F))then
set J4=PQ7(it,h4[O5])
endif
elseif(MTF==1093686864)then
set TB4[$A0+O5]=Bz+25.
elseif(MTF==1093808473 or MTF==1093748565)then
set UP=GetUnitAbilityLevel(it,1093808473)
if(UP>0)then
if(UP==1)then
set TB4[O5]=Bz+22.
elseif(UP==2)then
set TB4[O5]=Bz+17.
elseif(UP==3)then
set TB4[O5]=Bz+12.
else
set TB4[O5]=Bz+5.
endif
else
set UP=GetUnitAbilityLevel(it,1093748565)
if(UP>0)then
if(UP==1)then
set TB4[O5]=Bz+16.
elseif(UP==2)then
set TB4[O5]=Bz+8.
elseif(UP==3)then
set TB4[O5]=Bz+4.
else
set TB4[O5]=Bz+2.
endif
endif
endif
endif
elseif(i1==1160786502)then
if(MTF==1093751370)then
if(P3F)then
if((GetUnitLifePercent(it)<40.)or(UH4[O5]))then
call NX7(.7)
call PC7(it,$D0114,1093808206)
endif
set UG4[O5]=false
if((GetUnitLifePercent(it)<40.))then
set J4=IssueImmediateOrderById(it,$D02B6)
else
set m5=VX7(600.,it)
if(m5!=null)then
call P8F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
endif
set UH4[O5]=false
endif
elseif(MTF==1093753176)then
elseif(MTF==1093751371)then
set hq[O5]=Bz+110.
elseif(MTF==1093753177)then
if P3F and(h4[O5]!=null)then
call PJF(O5,it)
endif
endif
elseif(i1==1429221424)then
if(MTF==1093687351)then
if(m5==null)then
set m5=K3(600.,it,Condition(function Kr))
endif
if(not P3F)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(m5,1112560453)>0))then
call IUF(it,m5)
endif
elseif((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(m5,1112560453)>0))then
call P8F(it,m5,true)
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not O37(it))and(P87(1200.,m5,Condition(function TK7))==0)and(UP<($96+(300*GetUnitAbilityLevel(it,1093679445))))and(UP>$C8))then
set GZ[O5]=true
set h4[288+O5]=m5
set J4=J8(O5,(PC7(it,$D00A1,1093679445)))
endif
if((not J4)and((not O37(it))or(O07(m5,it))))then
set J4=(PY7(it,$D0118,1093748789,0,m5))or((UP>$96)and(GetUnitLifePercent(m5)<40.)and(OBF(it,m5)))or(IssueTargetOrderById(it,$D000F,m5))or(IssueTargetOrderById(it,$D0012,m5))
endif
endif
elseif(MTF==1093679445)then
if(P3F)then
call ExecuteFunc("NJF")
set J4=true
endif
endif
elseif(i1==1160785972)then
if(MTF==1093677872)then
set m5=VX7(400.,it)
if(m5==null)then
set m5=VX7(700.,it)
endif
if(m5!=null)then
call P8F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(P3F)and(h4[O5]!=null)and(iU(it))and(IssueTargetOrderById(it,$D000F,h4[O5]))
endif
elseif((P3F)and(MTF==1093677621))then
call ExecuteFunc("NRF")
set J4=true
elseif(MTF==1095263841)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1432646245)then
if(MTF==1093679171)then
call P8F(it,m5,true)
elseif((MTF==1093677640)and((not AW7())or(O37(m5))))then
if(not AW7())then
set hq[512+O5]=Bz+5.
endif
call P8F(it,m5,true)
elseif(MTF==1093677899)then
set UP=GetUnitAbilityLevel(it,MTF)
if(UP<3)then
set hq[O5]=Bz+300.-(UP*60.)
else
set hq[O5]=Bz+125.
endif
if(not O37(it))then
set m5=VX7(500.,it)
call P8F(it,m5,true)
call TriggerSleepAction(.5)
set J4=(P3F)and(PY7(it,$D007F,1093677640,0,m5))
endif
endif
elseif(i1==1430468913)then
if((MTF==1093810507)and(not O37(it)))then
call P8F(it,VX7(320.,it),true)
elseif(MTF==1093678403)then
if(not P3F)then
elseif(O37(it))then
call SJ7(it,false)
else
set m5=h4[O5]
if(m5==null)then
set m5=VX7(500.,it)
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<50.)and(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(MTF==1093677876)then
call P8F(it,m5,IsUnitInRange(it,m5,400.))
call KGF(it,m5)
set J4=(P3F)and(IsUnitInRange(it,m5,300.))and(PC7(it,$D009F,1093810507))
endif
elseif(i1==1430467634)then
if(MTF==1093679412)then
if(GetUnitLifePercent(m5)<60.)then
call P8F(it,m5,true)
endif
elseif(MTF==1093750608)then
set m5=K2(600.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<70.))then
call P8F(it,m5,true)
call KGF(it,m5)
endif
set J4=(P3F)and(GetUnitManaPercent(it)>40.)and(PY7(it,$D0107,1093679412,0,m5))
elseif((MTF==1093684565)or(MTF==1093681458))then
set UP=GetUnitAbilityLevel(it,MTF)
if((MTF==1093681458)and(UP<3))then
set UP=UP+1
endif
set hq[O5]=Bz+210.-(30.*UP)
set J4=(not O37(it))or(O37(m5))
call P8F(it,m5,J4)
if((P3F)and(J4))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093750608,true)
set GZ[O5]=true
set J4=J8(O5,(PY7(it,$D0107,1093679412,0,m5))or(IssueTargetOrderById(it,$D0208,m5)))
endif
elseif(MTF==1093742674)then
set UP=GetUnitAbilityLevel(it,MTF)
if(P3F)and(LR4)then
set UP=GetRandomInt(1,2)
if(UP==1)then
call BO7("YUMMY CREEP!!!",3.5,it,.025,100,0,$C8,$D8)
elseif(UP==2)then
call BO7("MMM DELICIOUS!!!",3.5,it,.025,100,0,$C8,$D8)
endif
endif
endif
elseif(i1==1313026096)then
if(MTF==1095267426)then
call P8F(it,m5,true)
elseif(MTF==1093677401)then
set GZ[$80+O5]=false
set G0[32+O5]=false
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(MTF==1093751369)then
set UP=GetUnitAbilityLevel(it,MTF)
set hq[O5]=Bz+70.
if(P3F)then
set J4=(IssueImmediateOrderById(it,$D0278))
if not J4 then
set J4=((h4[O5]!=null)and(OB7(h4[O5],it))and(PW7(it,$D0097,1093815130,h4[O5])))
if(PD7(it,SU[T2]))then
call NX7(.2)
call RemoveItem(PH7(it,SU[T2]))
call UnitAddItemByIdSwapped(SU[W2],it)
endif
endif
endif
endif
elseif(i1==1164666213)then
if(MTF==1093678679)then
call P8F(it,K2(125.+(25.*GetUnitAbilityLevel(it,1093678679)),HC[O5]),true)
elseif(MTF==1093677877)then
set hq[O5]=Bz+32.-(2.*GetUnitAbilityLevel(it,1093677877))
set hq[$F0+O5]=Bz+7.
set m5=VX7(500.,it)
if(m5!=null)then
call KGF(it,m5)
endif
if(P3F)then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
loop
if((iU(it))and(not G0[O5])and(G0[$80+O5])and(GetUnitLifePercent(it)>60.))then
if(P87(450.,it,Condition(function k3))==0)then
set m5=O27(800.,PU7(it),Condition(function k3))
set J4=((m5!=null)and(IssueTargetOrderById(it,$D0012,m5)))or(PV7(it,$D000F,h8[O5]))
else
call PV7(it,$D000F,h8[O5])
endif
endif
exitwhen((Bz>hq[$F0+O5])or(not OA7(it)))
call NX7(1.)
endloop
else
if((m5!=null)and(GetUnitLifePercent(m5)<50.))then
call IUF(it,m5)
endif
endif
elseif((MTF==1093808454)or(MTF==1093808455))then
set m5=VX7(300.,it)
if(m5!=null)then
call P8F(it,m5,true)
call KGF(it,m5)
set J4=(P3F)and(IssueTargetOrderById(it,$D0012,m5))
endif
elseif(MTF==1093678678)and(P3F)and(m5!=null)then
if(GetHeroLevel(it)>6)or(GetUnitLifePercent(m5)<60.)then
call MoveLocation(HA,GetUnitX(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
if(N67(GetUnitX(it),GetUnitY(it),GetLocationX(HA),GetLocationY(HA))<750)or(BK8(m5))then
set J4=PX7(it,$D0100,1093678679,HA)
endif
endif
endif
elseif(i1==1433168227)then
if((MTF==1093678420)or(MTF==1093679176))then
set UP=GetUnitAbilityLevel(it,MTF)
if(UP!=3)then
set hq[O5]=Bz+175.-(UP*30.)
else
set hq[O5]=Bz+60.
endif
call P8F(it,VX7(750.,it),true)
endif
elseif(i1==1430466872)then
if(MTF==1093687349)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
if(P3F)then
set J4=(IssueTargetOrderById(it,$D000F,m5))or(IssueTargetOrderById(it,$D0012,m5))
call NX7(1.)
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((not ke(m5))and(UP>200.)and(UP<OTF(it)))then
set GZ[O5]=true
set J4=J8(O5,PY7(it,$D0097,1093679413,1093679447,m5))
endif
endif
endif
elseif((MTF==1093679413)or(MTF==1093679447))then
set UP=GetUnitAbilityLevel(it,MTF)
if(UP!=3)then
set hq[O5]=Bz+210.-(UP*60.)
else
set hq[O5]=Bz+55.
endif
call P8F(it,m5,true)
endif
elseif(i1==1162032439)then
if((MTF==1093677363)or(MTF==1093681462))then
set hq[16+O5]=Bz+160.-(20.*GetUnitAbilityLevel(it,MTF))
set m5=VX7(600.,it)
if(m5!=null)then
set J4=(P3F)and(PY7(it,$D02BD,1093744435,0,m5))
if(not J4)then
call P8F(it,m5,true)
endif
endif
endif
elseif(i1==1430466865)then
if(MTF==1093810508)then
call P8F(it,VX7(150.,it),true)
set hq[O5]=Bz+130.-(10.*GetUnitAbilityLevel(it,MTF))
endif
if(MTF==1093751364)then
if P3F then
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(300.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(O37(m5)or GZ[$D0+O5]))then
set J4=(Kz(400.,PU7(it))>1)and(IsUnitInRange(it,m5,300.))and(PC7(it,$D00C4,1093810508))
endif
endif
endif
endif
elseif(i1==1211119409)then
if(MTF==1093749069)then
call P8F(it,VX7(150.,it),true)
elseif(MTF==1093749070)then
set m5=h4[O5]
if m5==null then
set m5=VX7(250.,it)
endif
if((P3F)and(m5!=null))then
set J4=(IsUnitInRange(it,m5,300.))and(IssueImmediateOrderById(it,$D022E))or(IssueTargetOrderById(it,$D000F,m5))
if h4[O5]==null then
call ZSE(O5,m5,false,false)
endif
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
if(MTF==1093677892)then
set J4=(P3F)and((h4[O5]==null)or(GetUnitManaPercent(it)>50.))and(PC7(it,$D0278,1093687878))
elseif(MTF==1093679411)then
set hq[O5]=Bz+170.-(10.*GetUnitAbilityLevel(it,MTF))
set m5=h4[O5]
if((m5==null)or(not P3F))then
set m5=VX7(500.,it)
call ZSE(O5,m5,false,false)
endif
if((m5!=null)and((not O37(it))or(O37(m5))))then
call P8F(it,m5,true)
call KGF(it,m5)
endif
endif
elseif(i1==1215722344)then
if(MTF==1093682499)then
if(m5==it)then
set m5=h4[O5]
if((m5==null)or(not P3F))then
set m5=VX7(600.,it)
endif
endif
if((m5!=null)and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call P8F(it,m5,true)
endif
elseif(MTF==1093684296)then
set hq[O5]=Bz+100.
set hq[512+O5]=Bz+6.
call P8F(it,m5,true)
call NX7(1.)
if(OA7(m5))then
call P8F(it,m5,true)
set J4=(P3F)and(PY7(it,$D02BC,1093682499,0,it))
endif
endif
elseif(i1==1332766568)then
if(MTF==1093686065)then
call P8F(it,m5,true)
elseif(MTF==1093683510)then
set hq[O5]=Bz+14.
set m5=VX7(250.,it)
if(m5!=null)then
call P8F(it,m5,true)
set J4=(P3F)and(IssueTargetOrderById(it,$D0118,m5))
endif
endif
elseif(i1==1429221451)then
if(MTF==1093678674)then
set hq[O5]=Bz+160.-(20.*GetUnitAbilityLevel(it,1093678674))
set hq[512+O5]=Bz+3.
if(P3F)then
set m5=VX7(300.,it)
if((m5==null)and(PD7(it,SU[QW])))then
set m5=VX7(900.,it)
if(m5==null)then
set m5=VX7(1200.,it)
endif
if(m5==null)and(Bz>TB4[16+O5])then
set m5=VX7(1300.+GetUnitAbilityLevel(it,1093678671)*100,it)
endif
set J4=(m5!=null)and(UnitUseItemPoint(it,PH7(it,SU[QW]),GetUnitX(m5),GetUnitY(m5)))
call NX7(.1)
if(m5==null)then
set hq[$F0+O5]=Bz+100.
endif
endif
if((not J4)and(m5!=null)and(OA7(m5)))then
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
elseif(MTF==1093686067)then
set m5=VX7(180.,it)
if((P3F)and(m5!=null)and(IsUnitInRange(it,m5,200.))and(GetUnitAbilityLevel(m5,1112560453)>0))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
elseif(MTF==1093678671)then
if(not O37(it))then
set hq[512+O5]=Bz+3.
endif
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO))or(not IsUnitInRange(it,m5,200.)))then
set m5=VX7(350.,it)
endif
if(m5!=null)then
call IUF(it,m5)
if(not P3F)then
elseif((IsUnitInRange(it,m5,200.))and(OA7(m5)))then
call ZSE(O5,m5,false,false)
set J4=((GetUnitState(m5,UNIT_STATE_LIFE)<200.)and(IssueTargetOrderById(it,$D000F,m5)))or((Bz>hq[O5])and(P87(600.,it,Condition(function T87))>1)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>$96+(75*GetUnitAbilityLevel(it,1093678674)))and(PP7(it,SU[A1])))or(IssueImmediateOrderById(it,$D0265))or(IssueTargetOrderById(it,$D000F,m5))
else
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
endif
elseif(i1==1315334514)then
if(MTF==1093810506)then
set hq[O5]=Bz+130.-(GetUnitAbilityLevel(it,MTF)*10.)
set m5=VX7(150.,it)
if(m5==null)then
set m5=VX7(300.,it)
if(m5==null)then
set m5=VX7(600.,it)
endif
endif
if(m5!=null)then
call P8F(it,m5,true)
endif
elseif((MTF==1093682521)or(MTF==1093682760)or(MTF==1093682736))then
set J4=(P3F)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitManaPercent(it)>30)and(GetHeroLevel(it)>3)and((OZF(it,200.,$D00C4,1093682521))or(OZF(it,450.,$D026C,1093682760))or(OZF(it,700.,$D0277,1093682736)))
if(not J4)then
if(MTF==1093682521)then
set UP=$C8
elseif(MTF==1093682760)then
set UP=450
else
set UP=700
endif
call MoveLocation(Ha,GetUnitX(it)+UP*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+UP*Sin(GetUnitFacing(it)*bj_DEGTORAD))
set m5=K2(250.,Ha)
set J4=(P3F)and(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
endif
if((m5!=null)and(GetUnitLifePercent(m5)<50.))then
call IUF(it,m5)
endif
endif
elseif(i1==1429221446)then
if(MTF==1093678665)then
set hq[16+O5]=Bz+14.
if P3F then
set m5=VX7($E1,it)
if m5!=null then
call ZSE(O5,m5,false,false)
set J4=PY7(it,$D0200,1093682764,1093747544,m5)
endif
endif
elseif(MTF==1093682764)then
set hq[O5]=Bz+30.
if P3F and GetUnitLifePercent(m5)<30 then
set J4=ZKE(it,m5)
endif
endif
elseif(i1==1429221445)then
if((MTF==1093678647)or(MTF==1093679184))then
call P8F(it,m5,true)
endif
elseif(i1==1332963428)then
if(MTF==1093678169)then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it))))then
call J3(it,false)
loop
exitwhen(GetUnitAbilityLevel(m5,1110454854)==0)
call NX7(1.)
endloop
call P7F(it,m5)
set J4=(P3F)and(G0[$80+O5])and(is(it))and(PY7(it,$D0097,1093683019,0,m5))
endif
elseif(MTF==1093677649)then
set J4=(P3F)and(OA7(m5))and(not O37(it))and((PY7(it,$D0097,1093683019,0,m5))or(IssueTargetOrderById(it,$D000F,m5)))
set hq[O5]=Bz+120.
endif
elseif(i1==1332109682)then
if(MTF==1093678134)then
call P8F(it,m5,true)
set hq[O5]=Bz+12.
elseif(MTF==1093810505)then
call P8F(it,VX7(550.,it),true)
set hq[16+O5]=Bz+150.
endif
elseif(i1==1430468406)then
if((MTF==1093678899)or(MTF==1093677898)or(MTF==1093678154)or(MTF==1093678157)or(MTF==1093678158))then
if(not O37(it))then
set m5=K2(600.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
call KGF(it,m5)
endif
endif
endif
elseif(i1==1160786242)then
if(MTF==1093683287)then
if((m5==null)or(not IsUnitType(m5,UNIT_TYPE_HERO)))then
elseif(GetUnitLifePercent(m5)<60.)then
call P8F(it,m5,true)
if((O37(m5))and(P3F))then
set J4=IssueImmediateOrderById(it,$D020A)
endif
else
call IUF(it,m5)
endif
elseif(MTF==1093683257)then
call P8F(it,VX7(1000.,it),true)
set hq[$F0+O5]=Bz+2.+(1.5*GetUnitAbilityLevel(it,1093683257))
set hq[16+O5]=Bz+180.-(30.*GetUnitAbilityLevel(it,1093683257))
elseif(MTF==1093683265)then
call P8F(it,VX7(500.,it),true)
if(P3F)then
call XG7(it)
endif
endif
elseif(i1==1160786241)then
if(MTF==1093684813)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call P8F(it,m5,GetUnitLifePercent(it)>50.)
if((P3F)and((GetUnitLifePercent(it)>50.)or(GetUnitLifePercent(m5)<40.)))then
call NX7(.5)
set J4=PY7(it,$D0079,1093684815,0,m5)
endif
endif
elseif(MTF==1093684815)then
set m5=K2(300.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
set J4=(P3F)and(((not kr(it))and(PY7(it,$D0275,1093684820,1093684824,m5)))or(PY7(it,$D0097,1093684813,0,m5)))
endif
elseif((MTF==1093684820)or(MTF==1093684824))then
set hq[O5]=Bz+90.
endif
elseif(i1==1429221456)then
if(MTF==1093685066)then
call NX7(GetUnitAbilityLevel(it,1093685066)+.6)
if((m5!=null)and(OA7(m5))and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitVisible(m5,GetOwningPlayer(it))))then
call P8F(it,m5,GetUnitLifePercent(it)>50.)
endif
elseif((MTF==1093685067)or(MTF==1093752407))then
set hq[O5]=Bz+160.
call P8F(it,K2(500.,HC[O5]),true)
elseif(MTF==1093685065)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1160786243)then
if(MTF==1093681491)then
if((IsUnitEnemy(m5,GetOwningPlayer(it)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
elseif(MTF==1093683765)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call IUF(it,m5)
call P7F(it,m5)
if(P3F)then
if((GetUnitLifePercent(m5)<80.)or(GZ[O5]))then
set GZ[O5]=true
set J4=J8(O5,PY7(it,$D0100,1395667000,0,m5))
endif
set J4=(J4)or(IssueTargetOrderById(it,$D0118,m5))
endif
endif
elseif(MTF==1395667000)or(MTF==1395667029)then
set hq[O5]=Bz+165.
set m5=K2(500.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
call TriggerSleepAction(.7)
if((P3F)and(PD7(it,SU[QW]))and(not IsUnitInRange(it,m5,250.))and(GetUnitLifePercent(it)>70.)and(GetUnitAbilityLevel(it,1093678672)>1)and(Bz>hq[16+O5]))then
set J4=(GetHeroLevel(it)>5)and(O6F(it,m5))
endif
call TriggerSleepAction(.1)
if((P3F)and(MTF==1395667029)and(PD7(it,SU[Z2]))and(GetUnitState(it,UNIT_STATE_MANA)>525+50*GetUnitAbilityLevel(it,1395667029)))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
if J4 then
call TriggerSleepAction(.1)
set J4=PY7(it,$D0100,1395667000,0,m5)
endif
endif
endif
elseif(MTF==1093678672)then
set hq[16+O5]=Bz+20.
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(MTF==1093684802)then
set m5=K2(200.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
if(P3F)then
call O0F(G7[O5],m5)
call O0F(G7[16+O5],m5)
call O0F(G7[32+O5],m5)
call O0F(G7[48+O5],m5)
endif
endif
elseif(MTF==1093684792)then
set m5=VX7(400.,it)
if((P3F)and(not O37(it))and(m5!=null))then
call NX7(.5)
set J4=(GetUnitAbilityLevel(m5,1110456120)==0)and(O5F(it,m5))
endif
endif
elseif(i1==1311781207)then
if(MTF==1093742673)then
if((IsUnitEnemy(m5,GetOwningPlayer(it)))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
set J4=(P3F)and(PY7(it,$D007F,1093684817,0,m5))
endif
elseif(MTF==1093684817)then
call P8F(it,m5,true)
set J4=(P3F)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IssueTargetOrderById(it,$D0118,m5))
elseif(MTF==1093742668)then
set hq[O5]=Bz+300.-(GetUnitAbilityLevel(it,MTF)*50.)
endif
elseif(i1==1311780946)then
if(MTF==1093677385)then
set m5=K2(250.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
call KGF(it,m5)
endif
elseif(MTF==1093685825)then
set m5=K2(250.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
if((not O37(it))and(P3F))then
set J4=PY7(it,$D010E,1093677385,0,m5)
endif
endif
elseif(MTF==1093685808)then
call NX7(1.)
call IV(GetUnitX(it),GetUnitY(it),1000.,Condition(function Kq),function O2F)
if(P3F)then
call XG7(it)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(MTF==1093685590)then
set m5=VX7(550.,it)
if(m5!=null)then
if(GetUnitLifePercent(m5)<60.)then
call KGF(it,m5)
endif
if((P3F)and((GetUnitLifePercent(m5)<60.)or(GetUnitManaPercent(it)>60.)))then
set IM4=it
set J4=(P87(1000.,it,Condition(function ny))>6)and(IssueTargetOrderById(it,$D02DB,m5))
endif
endif
elseif((MTF==1093685813)or(MTF==1093685811))then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it)))and(GetUnitLifePercent(m5)<60))then
call P8F(it,m5,true)
if(MTF==1093685811)then
call P7F(it,m5)
set h4[16+O5]=m5
if((P3F)and(not O37(it)))then
set IM4=it
set J4=(PC7(it,1093685590,$D0003))or((P87(1000.,it,Condition(function ny))>4)and(IssueTargetOrderById(it,$D02DB,m5)))
endif
endif
endif
endif
elseif(i1==1211117646)then
if(MTF==1093685573)then
set m5=K2(250.,HC[O5])
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
call KGF(it,m5)
endif
elseif(MTF==1093685575)then
set UP=R2I(50.+(100.*GetUnitAbilityLevel(it,1093685573)))
if(m5!=null)then
set m5=VX7(I2R(UP),m5)
endif
if((P3F)and(m5!=null))then
set MTF=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093685573,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+I2R(MTF)*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+I2R(MTF)*Sin(UP*bj_DEGTORAD))
endif
elseif(MTF==1093685579 or MTF==1093808465)then
set hq[O5]=Bz+100.
endif
elseif(i1==1211117624)then
if(MTF==1093682775)then
call P8F(it,m5,true)
elseif(MTF==1093683024)then
set m5=VX7(600.,it)
if((m5!=null)and(GetUnitLifePercent(m5)<65.))then
call P8F(it,m5,true)
endif
endif
elseif(i1==1160785973)then
if((MTF==1093678388)or(MTF==1093677141))then
set UP=GetUnitAbilityLevel(it,MTF)
call P8F(it,VX7(650.,it),true)
call NX7(5.)
if(MTF==1093678388)then
set hq[O5]=Bz+155.-(UP*20.)
else
set hq[O5]=Bz+145.-(UP*20.)
endif
endif
elseif(i1==1315988077)then
if(MTF==1093678669)then
call P8F(it,VX7(250.,it),true)
set hq[O5]=Bz+12.
endif
elseif(i1==1211117616)then
if(MTF==1093677139)then
call P8F(it,VX7(300.,it),true)
set hq[O5]=Bz+15.
set J4=(P3F)and(IssueImmediateOrderById(it,$D022E))
endif
elseif(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)then
if P3F and(MTF==1093815877)then
set J4=(h4[O5]!=null)and IssueTargetOrderById(it,$D0097,UA7(h4[O5]))
if J4 then
call TriggerSleepAction(.3)
endif
call IssueTargetOrderById(it,$D000F,h4[O5])
endif
if P3F and(MTF==1093687856)then
set JX7=GetSpellTargetUnit()
if GetUnitTypeId(it)==1311788343 then
call IssueImmediateOrderById(it,$D00D4)
call TriggerSleepAction(.125)
endif
set J4=IssueTargetOrderById(it,$D0097,UA7(it))
if J4 then
call TriggerSleepAction(.125)
endif
call IssueTargetOrderById(it,$D000F,JX7)
set JX7=null
endif
elseif(i1==1311788363 or i1==1311788365)then
if P3F and(MTF==1093815601)then
set h4[O5]=GetSpellTargetUnit()
set J4=IssuePointOrderByIdLoc(it,$D0278,ZR7(it,h4[O5],$F423F,3.3,0))
call TriggerSleepAction(.3)
call IssueTargetOrderById(it,$D000F,h4[O5])
elseif P3F and(MTF==1093815600)then
set m5=MC7((m5!=null)and(G0[$80+O5]),m5,VA7((500+100*(GetUnitAbilityLevel(it,1093815601))),it,Condition(function k6)))
set J4=(m5!=null)and(G0[$80+O5]and(GetUnitState(it,UNIT_STATE_MANA)>225. or P87(600,it,Condition(function T57))>=1))and IssueTargetOrderById(it,$D007F,m5)
set h4[O5]=MC7(h4[O5]!=null or(not J4),h4[O5],m5)
endif
elseif(i1==1315074670)then
if(MTF==1093677622)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(MTF==1093677895)then
set hq[O5]=Bz+135.
set m5=h4[O5]
if((m5==null)or(not P3F))then
set m5=VX7(700.,it)
call ZSE(O5,m5,false,false)
endif
if(m5!=null)then
call P8F(it,m5,true)
call KGF(it,m5)
set J4=(P3F)and(((IsUnitInRange(it,m5,350.))and(PW7(it,$D007F,1093681490,m5)))or(IssueTargetOrderById(it,$D000F,m5)))
endif
endif
elseif(i1==1164207469)then
if(MTF==1093682483)then
call P8F(it,m5,true)
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
set m5=h4[O5]
if(MTF==1093748042)then
if m5==null then
set m5=VX7(700.,it)
endif
if(m5!=null)then
call P8F(it,m5,true)
call KGF(it,m5)
endif
elseif(MTF==1093808461)and(m5!=null)and P3F then
if(m5!=null)and(IsUnitInRange(it,m5,200.))then
set J4=(i1==1311781174)and(PC7(it,$D00AA,1093681733))
if J4 then
set i1=1311781175
endif
elseif(m5!=null)and((GetUnitLifePercent(m5)<15.)or((not G0[256+O5])and(MP7(it)<2000.)))then
elseif(GetHeroLevel(it)>=6 or h4[O5]!=null)and(PM7(it,SU[A1]))then
set J4=(i1==1311781174)and(PC7(it,$D00AA,1093681733))
endif
if(not J4)then
call IssueTargetOrderById(it,$D000F,m5)
endif
elseif(MTF==1093681733)and(m5!=null)and P3F then
call IssueTargetOrderById(it,$D000F,m5)
if(not J4)and(h4[O5]!=null)then
call TriggerSleepAction(.1)
if(i1!=1311781174)then
set J4=PW7(it,$D00FA,1093808461,m5)
else
set J4=(IsUnitInRange(it,m5,400.)and(PC7(it,$D0080,1093808462)))
endif
endif
endif
elseif(i1==1433631084)then
if(MTF==1093678160)then
call IUF(it,m5)
set hq[O5]=Bz+40.-(10.*GetUnitAbilityLevel(it,1093678160))
endif
elseif(i1==1315007329)then
if(MTF==1093678913)then
set hq[O5]=Bz+20.
if(P3F)then
call ExecuteFunc("NRF")
set J4=true
endif
endif
elseif(i1==1332898670)then
if(MTF==1093677136)then
set J4=(P3F)and((PY7(it,$D0216,1093685848,0,m5))or(IssueTargetOrderById(it,$D000F,m5)))
set hq[16+O5]=Bz+16.
endif
elseif(i1==1215128178)then
if(MTF==1093677616)then
set J4=(P3F)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(PY7(it,$D007F,1093683779,0,m5))
elseif(MTF==1093683779)then
set J4=(P3F)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(PY7(it,$D0097,1093677616,0,m5))
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
elseif((MTF==1093810503)or(MTF==1093810504))then
set hq[O5]=Bz+120.
call P8F(it,VX7(700.,it),true)
endif
elseif(i1==1164799855)then
if(MTF==1093682264)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call P8F(it,m5,true)
endif
set hq[O5]=Bz+35.-(GetUnitAbilityLevel(it,MTF)*5.)
elseif(MTF==1093682265 or MTF==1093752642)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1433105516)then
if(MTF==1093683511)then
set hq[16+O5]=Bz+15.
call P8F(it,m5,true)
if((P3F)and(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(it)>5)or(O37(m5))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D0278,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
elseif(MTF==1093681713)then
set b5=HC[O5]
set m5=K2(400.,b5)
if(m5!=null)then
call KGF(it,m5)
endif
if((P3F)and(not kr(it)))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<75.)and((P17(not IsUnitAlly(it,Y7[0]))<=2)or(GetHeroLevel(it)<$B))and(IssuePointOrderByIdLoc(it,$D00DC,b5))
if(not J4)then
set UP=P77(400.,b5,Condition(function T87))
set J4=((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0])))or((UP>0)and(P77(700.,b5,Condition(function T87))>1)and(P77(700.,b5,Condition(function TN7))>0)))and(IssuePointOrderByIdLoc(it,$D00DC,b5))
endif
endif
elseif(MTF==1093747288)then
set UP=GetUnitAbilityLevel(it,MTF)
set hq[O5]=Bz+210.-(UP*10.)
set m5=VX7(400.,it)
set J4=(P3F)and(m5!=null)and(IssueTargetOrderById(it,$D000F,m5))
endif
elseif(i1==1214409837)then
if(MTF==1093679157)then
set hq[O5]=Bz+10.
call MoveLocation(Ha,GetUnitX(it)+400*Cos(GetUnitFacing(it)*bj_DEGTORAD),GetUnitY(it)+400*Sin(GetUnitFacing(it)*bj_DEGTORAD))
set m5=K2(400.,Ha)
if(m5!=null)then
call KGF(it,m5)
endif
endif
elseif(i1==1316252014)then
if(MTF==1093678137)then
set hq[32+O5]=Bz+14.
if(GetUnitLifePercent(m5)<60.)then
call P8F(it,m5,true)
endif
elseif(MTF==1093678405)then
set hq[O5]=Bz+25.
elseif(MTF==1093681745)then
set hq[16+O5]=Bz+35.
set m5=K2(500.,HC[O5])
if(m5!=null)then
call KGF(it,m5)
endif
if((P3F)and(m5!=null)and(PD7(it,SU[D44])))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
elseif(MTF==1093678645)then
set hq[O5]=Bz
set hq[16+O5]=Bz
set hq[32+O5]=Bz
set hq[80+O5]=Bz
set hq[96+O5]=Bz
endif
elseif(i1==1328558160)then
if(MTF==1093682998)then
if((P3F)and(GetHeroLevel(it)>5)and((not O37(it))or(Id(O5))))then
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.)and(not IsUnitInRange(it,m5,300.)))then
set GZ[O5]=true
set J4=(J8(O5,PY7(it,$D00FA,1093682766,0,m5)))
endif
endif
elseif(MTF==1093683000)then
call P8F(it,VX7(700.,it),true)
elseif(MTF==1093683011)then
call P8F(it,VX7(500.,it),true)
endif
elseif(i1==1212363833)then
if(MTF==1093678933)then
set hq[32+O5]=Bz+120.
call NX7(.5)
set J4=(P3F)and(not O37(it))and(PC7(it,$D009B,1093678643))
elseif(MTF==1093809220)then
set hq[O5]=Bz+14.
call P8F(it,m5,true)
set J4=(P3F)and(not O37(it))and((PC7(it,$D022E,1093815125))or(PC7(it,$D009B,1093678643)))
elseif(MTF==1093678643)and(P3F and(h4[O5]!=null)and(not O37(it)))then
set J4=(Z37(it,h4[O5]))and(PC7(it,$D022E,1093815125))
endif
elseif(i1==1315070563)then
if(MTF==1093678407)then
set hq[$F0+O5]=Bz+5.
set m5=VX7(600.,it)
if(m5!=null)then
call KGF(it,m5)
endif
if(P3F)then
loop
if((m5!=null)and(GetUnitLifePercent(m5)<GetUnitLifePercent(it)))then
call IssuePointOrderById(it,$D0012,GetUnitX(m5)+GetRandomReal(0,300.)-150.,GetUnitY(m5)+GetRandomReal(0,300.)-150.)
elseif((not G0[O5])and(G0[$80+O5])and(not O37(it)))then
if(P87(200.,it,Condition(function k3))==0)then
call PV7(it,$D000F,h8[O5])
endif
endif
if(not G0[$80+O5])then
set m5=null
endif
exitwhen(Bz>=hq[$F0+O5])
call NX7(.5)
endloop
set m5=VX7(500.,it)
if((m5!=null)and(not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)<1200.)and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0))then
set UP=P87(850.,m5,Condition(function T87))
set J4=((UP-(P87(850.,m5,Condition(function k3))))>=0)and(PY7(it,$D007F,1093684529,1093747032,m5))
endif
else
call IUF(it,m5)
endif
endif
elseif(i1==1214931305)then
if(MTF==1093686067)then
set m5=VX7(450.,it)
if((P3F)and(m5!=null)and(not O37(it)))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif((MTF==1093677906)or(MTF==1093681494))then
set hq[O5]=Bz+180.-(GetUnitAbilityLevel(it,MTF)*30.)
endif
elseif(i1==1212365106)then
if(MTF==1093685831)then
set hq[O5]=Bz+15.
set b5=HC[O5]
set m5=K2(I2R($FA+(25*GetUnitAbilityLevel(it,1093685831))),b5)
if(m5!=null)then
call P8F(it,m5,true)
set J4=(P3F)and(not O37(it))and(G0[$80+O5])and(not IsUnitInRangeLoc(m5,b5,200.))and(IssueTargetOrderById(it,$D0278,m5))
endif
endif
elseif(i1==1211117617)then
if(MTF==1093686067)then
set m5=VX7(800.,it)
set J4=(P3F)and(m5!=null)and(PC7(it,$D02B7,1093752648))
endif
elseif(i1==1211117633)then
if(MTF==1093684310)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,GetOwningPlayer(it)))and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
endif
elseif(MTF==1093810260)then
set hq[O5]=Bz+30.
elseif(MTF==1093684308 or MTF==1093747539)then
set hq[16+O5]=Bz+120.
endif
elseif(i1==1211117620)then
if((MTF==1093677392)or(MTF==1093679450))then
if(UP!=3)then
set hq[O5]=Bz+210.-(UP*60.)
else
set hq[O5]=Bz+55.
endif
call P8F(it,m5,true)
endif
elseif(i1==1432580716)then
if(MTF==1093684300)then
set b5=HC[O5]
set m5=K2(300.,b5)
if(m5!=null)then
call P8F(it,m5,true)
call TriggerSleepAction(1.)
set J4=(P3F)and(IsUnitInRange(it,m5,250.))and(P77(300.,b5,Condition(function k0))<=2)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(MTF==1093681754)then
set hq[O5]=Bz+15.
call NX7(1.2)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
elseif(MTF==1093752391)then
set TB4[64+O5]=Bz+30
call NX7(.8)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
endif
elseif(i1==1333027688)then
if(MTF==1093682252)then
call P8F(it,VX7(250.,it),true)
elseif(MTF==1093682248 or MTF==1093750594)then
set hq[O5]=Bz+170.-(GetUnitAbilityLevel(it,MTF)*20.)
call P8F(it,VX7(500.,it),true)
elseif(MTF==1093686091)then
set m5=K3(900.,it,Condition(function Kr))
if(m5!=null)then
call P8F(it,m5,true)
set J4=(P3F)and(GetUnitLifePercent(it)>50.)and(GetUnitLifePercent(m5)<60.)and(G0[$80+O5])and(P87(700.,m5,Condition(function T87))<=2)and(O6F(it,m5))
endif
endif
elseif(i1==1311781185)then
if(MTF==1093743692)then
if(GetUnitLifePercent(m5)<60.)or(GetUnitManaPercent(it)>60 or GetUnitState(it,UNIT_STATE_MANA)>400.)then
set J4=(P3F)and IssueTargetOrderById(it,$D007F,m5)
call P8F(it,m5,true)
endif
elseif(MTF==1093684275)then
set hq[O5]=Bz+160.
elseif(MTF==1093684314)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1211117643)then
if(MTF==1093678658)then
call P8F(it,VX7(300.,it),true)
endif
if(MTF==1093678410 or MTF==1093678664 or MTF==1093681483 or MTF==1093748313)and P3F then
set b5=HC[O5]
if(h9[48+O5]!=null)and(IsUnitInRangeLoc(h9[48+O5],b5,600.))then
set L84=300
call MoveLocation(HA,GetUnitX(h9[48+O5]),GetUnitY(h9[48+O5]))
if GetUnitUserData(h9[48+O5])>100 then
set L84=$96
endif
else
set L84=$96
call MoveLocation(HA,GetLocationX(b5),GetLocationY(b5))
endif
if(not J4)and(Bz>TB4[16+O5])and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093678410,4)+ANE(it,1093678658,4))then
call MoveLocation(HA,GetLocationX(HA)+GetRandomReal(-L84,L84),GetLocationY(HA)+GetRandomReal(-L84,L84))
set J4=(PX7(it,$D0136,1093678410,HA))
endif
set bj_lastLoadedUnit=it
if(not J4)and(Bz>TB4[32+O5])and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093678664,4)+ANE(it,1093678658,4))and(P77(600.,HA,Condition(function VH7))==0)then
call MoveLocation(HA,GetLocationX(HA)+GetRandomReal(-100.,100.),GetLocationY(HA)+GetRandomReal(-100.,100.))
set J4=(PX7(it,$D0092,1093678664,HA))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>TB4[O5])and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093681483,4)+ANE(it,1093748313,4)+ANE(it,1093678658,4))and(P77(600.,HA,Condition(function KG))<8))then
set hq[$F0+O5]=Bz+5.
set J4=(PZ7(it,$D0218,1093681483,1093748313,GetLocationX(HA)+GetRandomReal(-L84,L84),GetLocationY(HA)+GetRandomReal(-L84,L84)))
endif
if(not J4)and((MTF==1093678410)or(MTF==1093678664))and P3F then
call ZPE(it,false)
endif
endif
elseif(i1==1215657064)then
if(MTF==1093684291)then
set m5=VX7(550.,it)
set J4=(P3F)and(m5!=null)and(((IsUnitInRange(it,m5,250.))and(PC7(it,$D0080,1093677913)))or(IssueTargetOrderById(it,$D000F,m5)))
endif
elseif(i1==1214344551)then
if(MTF==1093678938)then
set m5=VX7(700.,it)
call P8F(it,m5,true)
if((P3F)and(m5!=null))then
set J4=O3F(it)
call NX7(1.)
call IssueTargetOrderById(it,$D000F,m5)
else
call NX7(1.)
endif
call NX7(7.)
set hq[O5]=Bz+152.
endif
elseif(i1==1211117636)then
if(MTF==1093685042 or MTF==1093810233)then
set hq[O5]=Bz+60.
call P8F(it,m5,true)
if(P3F)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093685041,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D00FA,GetUnitX(it)+900.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+900.*Sin(UP*bj_DEGTORAD)))
endif
elseif(MTF==1093685041)then
if(m5==null)then
set m5=K2(300.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
endif
elseif(i1==1160786000)then
if(MTF==1093685047)then
set m5=VX7(500.,it)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
set J4=(P3F)and(PX7(it,$D0264,1093685046,ZR7(it,m5,2000.,.65,1100.)))
endif
elseif(MTF==1093685046)then
set hq[O5]=Bz+16.
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
call NX7(1.5)
set J4=(P3F)and(GetUnitLifePercent(m5)<65.)and(GetUnitState(m5,UNIT_STATE_LIFE)>150.)and(IsUnitType(m5,UNIT_TYPE_STUNNED))and(PY7(it,$D009D,1093685045,0,m5))
endif
elseif(MTF==1093685045)then
if(m5==null)then
set m5=K2(650.,HC[O5])
endif
call P8F(it,m5,true)
if(m5!=null)then
call KGF(it,m5)
set J4=(P3F)and(PX7(it,$D0264,1093685046,ZR7(it,m5,2000.,.65,1100.)))
endif
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(MTF==1093683532)then
set hq[O5]=Bz+22.
set m5=K2(600.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
call KGF(it,m5)
endif
elseif(MTF==1093750345)then
if((OA7(m5))and(GetUnitLifePercent(m5)<65.))then
call IUF(it,m5)
endif
elseif(MTF==1095656306)then
set hq[512+O5]=Bz+6.
set m5=VX7(500.,it)
if(m5!=null)then
call KGF(it,m5)
set J4=(P3F)and(not O37(it))and(IssueTargetOrderById(it,$D000F,m5))
endif
endif
elseif(i1==1311781206)then
if(MTF==1093684054)then
set hq[O5]=Bz+12.
set m5=VX7(400.,it)
if((m5!=null)and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
endif
elseif(MTF==1093684280)then
set hq[32+O5]=Bz+25.
call NX7(.1)
if(m5==null)then
set m5=K2(200.,HC[O5])
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
elseif(MTF==1093684053)then
set hq[16+O5]=Bz+160.
endif
elseif(i1==1211117651)then
elseif(i1==1211117649)then
if(MTF==1093685586)then
call P8F(it,m5,true)
elseif(MTF==1093685582)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call IUF(it,m5)
endif
endif
elseif(i1==1160786265)then
if(MTF==1093748033)then
call P8F(it,VX7(300.,it),true)
endif
elseif(i1==1311780930)then
if(MTF==1093686083)then
set hq[16+O5]=Bz+20.
set m5=VX7(400.,it)
if(m5!=null)then
call P8F(it,m5,true)
if((P3F)and(GetUnitLifePercent(m5)<60.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(PL7(m5)),GetUnitX(m5)-GetUnitX(PL7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
endif
elseif((MTF==1093686072)or(MTF==1093751120))then
set hq[O5]=Bz+85.
set m5=K2(400.,HC[O5])
if(m5!=null)then
call P8F(it,m5,true)
set J4=(P3F)and(IsUnitInRange(it,m5,400.))and(IssueImmediateOrderById(it,$D0278))
endif
elseif(MTF==1093686081)then
set m5=VX7(400.,it)
if((m5!=null)and(not O37(it)))then
call P8F(it,m5,true)
set J4=(P3F)and(IssueImmediateOrderById(it,$D0278))
if((not J4)and(P3F)and(GetUnitLifePercent(m5)<60.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(PL7(m5)),GetUnitX(m5)-GetUnitX(PL7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
endif
if(P3F)then
call NX7(1.)
call XG7(it)
endif
endif
elseif(i1==1311786311)then
if(MTF==1093743178)then
if P3F and GetUnitAbilityLevel(GetSpellTargetUnit(),1112560453)>1 then
call ZSE(O5,m5,false,false)
set J4=IssueTargetOrderById(it,$D0265,m5)
endif
endif
elseif(i1==1211117652)then
if(MTF==1093687864)or(MTF==1093747542)or(MTF==1093687861)and P3F then
set m5=h4[O5]
if(m5==null)or(not IsUnitInRange(it,m5,$AA))then
set m5=VX7(170.,it)
if m5!=null then
call ZSE(O5,m5,false,false)
endif
endif
if(MTF==1093687861)then
if O37(it)then
set bj_lastReplacedUnit=h9[16+O5]
set J4=true
elseif m5==null then
if h4[O5]!=null then
set bj_lastReplacedUnit=h4[O5]
else
set bj_lastReplacedUnit=h8[O5]
endif
set J4=true
endif
if J4 then
set m5=QA7(GetHandleId(it),"AI|Cog1")
set bj_lastLoadedUnit=QA7(GetHandleId(it),"AI|Cog2")
if N37(m5,bj_lastReplacedUnit)>N37(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
set bj_lastLoadedUnit=QA7(GetHandleId(it),"AI|Cog3")
if N37(m5,bj_lastReplacedUnit)>N37(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
set bj_lastLoadedUnit=QA7(GetHandleId(it),"AI|Cog4")
if N37(m5,bj_lastReplacedUnit)>N37(bj_lastLoadedUnit,bj_lastReplacedUnit)then
set m5=bj_lastLoadedUnit
endif
if m5!=null then
set h4[96+O5]=m5
set J4=IssueTargetOrderById(it,$D000F,m5)
if J4 then
set hq[832+O5]=Bz+1.
endif
loop
exitwhen GetWidgetLife(h4[96+O5])<.405
set J4=IssueTargetOrderById(it,$D000F,m5)
call NX7(.5)
endloop
call J3(it,false)
endif
endif
endif
if(not J4)and(m5!=null)then
if(not J4)and(Bz>TB4[32+O5])and(m5!=null)and(IsUnitInRange(it,m5,$D2))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
if(not J4)and(Bz>TB4[16+O5])and(m5!=null)and(IsUnitInRange(it,m5,275))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
endif
elseif(i1==1211119187)then
set bj_forLoopAIndex=(GetUnitAbilityLevel(it,1093742926)-2)
if(MTF==1093742926)and(P3F)and(h4[O5]!=null)and(bj_forLoopAIndex>=0)and(Bz>TB4[16+O5])and(not O37(it))then
set TB4[16+O5]=Bz+4.
set b5=HC[O5]
if bj_forLoopAIndex>0 then
call NX7(bj_forLoopAIndex)
endif
call PX7(it,$D0079,1093743414,b5)
endif
elseif(i1==1328558389)then
if MTF==1093747000 and P3F then
set m5=h4[O5]
set b5=HC[O5]
if m5==null or((not IsUnitInRange(it,m5,300))and(not IsUnitInRangeLoc(it,b5,300)))then
set m5=VY7(300.,it)
set bj_lastReplacedUnit=VZ7(300.,it,GetLocationX(b5),GetLocationY(b5))
endif
if(Bz>TB4[16+O5])then
set J4=(h4[O5]!=null)
if GetUnitLifePercent(bj_lastReplacedUnit)<70. then
set J4=true
elseif GetUnitLifePercent(m5)<70. then
set J4=true
endif
set J4=((J4)and(IssueImmediateOrderById(it,$D0265)))
endif
if(not J4)then
set J4=IssueImmediateOrderById(it,$D00F9)
endif
elseif MTF==1093747009 and P3F then
set m5=h4[O5]
set b5=PU7(it)
if(SJ4[O5]!=null)and(GetWidgetLife(SJ4[O5])>.405)then
call MoveLocation(b5,GetUnitX(SJ4[O5]),GetUnitY(SJ4[O5]))
endif
set J4=false
if((m5==null or((not IsUnitInRange(it,m5,475))and(not IsUnitInRangeLoc(m5,b5,475)))))then
if G0[256+O5]then
set m5=VY7(475.,it)
set bj_lastReplacedUnit=VZ7(475.,it,GetLocationX(b5),GetLocationY(b5))
if GetUnitLifePercent(m5)<GetUnitLifePercent(bj_lastReplacedUnit)then
call ZSE(O5,m5,false,false)
set J4=true
else
set h4[O5]=bj_lastReplacedUnit
set m5=bj_lastReplacedUnit
set J4=true
endif
endif
else
set J4=true
endif
if((J4)and(Bz>TB4[O5])and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(h4[O5]!=null)and(IsUnitInRange(it,m5,1200.)))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,PU7(m5)))
else
set J4=false
endif
if(not J4)then
set J4=IssueImmediateOrderById(it,$D00F9)
endif
endif
elseif(i1==1328558390)then
if MTF==1093744975 then
if P3F then
set J4=PC7(it,$D00D4,1093744986)
if J4 then
call NX7(.1)
call PV7(it,$D0012,h9[O5])
endif
endif
endif
elseif(i1==1160786504)then
if MTF==1093751608 and P3F then
if(P87(450,m5,Condition(function TZ7))<=1)then
set J4=PW7(it,$D0079,1093751618,m5)
endif
elseif MTF==1093751618 then
set m5=QA7(GetHandleId(it),"AI|SoulCatcherTgt")
if P3F then
if(h4[O5]==null)or(m5!=h4[O5]and GetUnitLifePercent(m5)<GetUnitLifePercent(h4[O5]))then
call ZSE(O5,m5,false,false)
endif
endif
call P7F(it,m5)
endif
elseif(i1==1160786520)then
if(MTF==1093809991)then
set m5=VX7(500.,it)
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<60.))then
call P8F(it,m5,true)
set J4=(P3F)and(PY7(it,$D00F6,1093809990,0,m5))
endif
elseif(MTF==1093809990)then
set hq[O5]=Bz+18.
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call P8F(it,m5,true)
endif
if(P3F)then
set CK4=m5
set bj_lastLoadedUnit=VX7(600.,m5)
set CK4=null
if bj_lastLoadedUnit==null then
if O37(it)then
set PLF=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
set J4=IssuePointOrderById(it,$D0276,GetUnitX(m5)+375*Cos(PLF),GetUnitY(m5)+375*Sin(PLF))
elseif O37(m5)or(not IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))then
set J4=PV7(it,$D0276,it)
endif
else
set J4=PV7(it,$D0276,bj_lastLoadedUnit)
endif
set bj_lastLoadedUnit=null
endif
elseif MTF!=1093809992 and MTF!=1093810008 and hq[816+O5]>Bz and P3F then
set G0[288+O5]=true
call P6F()
endif
elseif(i1==1160786507)then
if(MTF==1093813065)then
call P8F(it,m5,true)
call P8F(m5,it,true)
endif
elseif(i1==1311788336)then
if MTF==1093814860 and P3F then
call NX7(.2)
set m5=VX7(350.,it)
set bj_lastCreatedUnit=it
if(m5!=null)and(Bz>TB4[16+O5])and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70))and(P87(400.,it,Condition(function TA7))<=2)then
set J4=PC7(it,$D022E,1093814323)
endif
endif
elseif(i1==1211122767)then
if(m5==null)then
set m5=h4[O5]
endif
if(not J4)and(P3F)and(Bz>TB4[O5])and(BK8(m5))then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
endif
if(MTF==1093814350)then
if P3F and(not J4)and(Bz>TB4[16+O5])then
set J4=(m5!=null)and(PW7(it,$D0097,1093812805,m5))
endif
endif
elseif(i1==1160786738)then
if(MTF==1093813557)then
set b5=HC[O5]
set m5=K2(300.,b5)
if(m5!=null)then
call KGF(it,m5)
endif
endif
endif
if((P3F)and(not J4)and(GetUnitCurrentOrder(it)==0))then
call J3(it,true)
endif
set it=null
set m5=null
set b5=null
endfunction
function P1F takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local integer MTF=GetSpellAbilityId()
local integer i1=GetUnitTypeId(MQ7)
local integer O5=GetPlayerId(GetOwningPlayer(MQ7))
local integer i
local boolean J4=false
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
endif
if(PS4)then
set hq[O5]=.0
set hq[16+O5]=.0
set hq[32+O5]=.0
if i1==1211117653 then
set i=1
loop
exitwhen i>$A
set TB4[i*16+O5]=0
set i=i+1
endloop
endif
endif
if(not PS4)and i1!=1211117653 then
if i1==1160786520 then
if(MTF==1093809990)then
set TB4[$B0+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==1093809991 then
set TB4[$C0+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==1093809992 then
set TB4[$A0+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF!=1093810008 and hq[816+O5]>Bz then
set G0[288+O5]=true
call P1F()
endif
elseif(MTF==eY[336+O5])then
set TB4[16+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==eY[352+O5]then
set TB4[32+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==eY[368+O5]then
set TB4[48+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==eY[$AC+O5]or MTF==eY[$BC+O5]then
set bj_forLoopAIndex=0
if MTF==eY[$BC+O5]then
set bj_forLoopAIndex=LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF))
endif
if bj_forLoopAIndex==0 then
set bj_forLoopAIndex=LoadInteger(CU4,eY[$AC+O5],-1+GetUnitAbilityLevel(MQ7,MTF))
endif
set TB4[O5]=Bz+I2R(bj_forLoopAIndex)
elseif(MTF==1093682736)then
set TB4[64+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif(MTF==1093682760)then
set TB4[80+O5]=Bz+I2R(LoadInteger(CU4,MTF,-1+GetUnitAbilityLevel(MQ7,MTF)))
elseif MTF==1093683265 then
set TB4[64+O5]=Bz+8.
if WQ7(Player(O5))then
if h4[O5]!=null then
call TriggerSleepAction(.5)
set J4=(IsUnitInRange(MQ7,h4[O5],700))and((IssueTargetOrderById(MQ7,$D02B6,h4[O5]))or(IssueTargetOrderById(MQ7,$D000F,h4[O5])))
endif
endif
endif
endif
endfunction
function P0F takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)and(not IsUnitIllusion(GetAttacker()))and(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))))!=null
endfunction
function P5F takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(hr)))and(not IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(SC7(GetFilterUnit())))!=null
endfunction
function P2F takes unit it returns integer
local integer kt=GetUnitAbilityLevel(it,1093682248)
local integer P_F
set LP4="Whv"
if(kt<1)then
set kt=GetUnitAbilityLevel(it,1093750594)
endif
if(kt>0)then
set hr=it
set P_F=P87(500.,it,Condition(function P5F))-1
if(P_F<=2)then
return 0
endif
return $8C+(50*kt)+((25+($A*kt))*P_F)
endif
return 0
endfunction
function Q4F takes nothing returns nothing
call IssueTargetOrderById(GetEnumUnit(),$D000F,GetTriggerUnit())
endfunction
function Q7F takes nothing returns nothing
local boolexpr Ig=Condition(function KH)
set LP4="Q7F"
call GroupClear(iH)
call GroupEnumUnitsOfPlayer(iH,GetOwningPlayer(GetAttacker()),Ig)
call ForGroup(iH,function Q4F)
call DestroyBoolExpr(Ig)
set Ig=null
endfunction
function Q8F takes nothing returns nothing
local unit IB=GetAttacker()
local unit m5=GetTriggerUnit()
local integer i1=GetUnitTypeId(IB)
local integer O5=GetPlayerId(GetOwningPlayer(IB))
local location b5=null
local integer UP
local boolean Q9F
local boolean J4=false
set LP4="Q8F"
set GZ[48+O5]=IsUnitType(m5,UNIT_TYPE_HERO)
set h4[80+O5]=m5
if((not Jw(IB))or(GZ[32+O5]))then
set IB=null
set m5=null
return
else
set GZ[32+O5]=true
call TriggerSleepAction(.7)
if((not OA7(m5))or(not OA7(IB))or(not is(IB)))then
set GZ[32+O5]=false
set IB=null
set m5=null
return
endif
endif
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(((GetUnitCurrentOrder(m5)==$D0005)or(GetUnitLifePercent(m5)<60.))and(Bz>hq[480+O5]))then
call IUF(IB,m5)
if(h4[O5]==null)then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(PD7(IB,SU[D44]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[R3]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[EC]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[N3]))then
set J4=(GetUnitLifePercent(m5)<50.)and(Y_7(m5)!=1)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[DO4]))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(PD7(IB,SU[DQ4])and(Bz>TB4[$F0+O5])and(BI8(m5)==false)and(XT7(m5)==false))then
set J4=(GetUnitLifePercent(m5)<50.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[O1]))then
set J4=(GetUnitLifePercent(m5)<50.)and(GetUnitLifePercent(IB)>70.)and(Bz>hq[64+O5])and(G0[256+O5])and(PP7(IB,SU[O1]))
endif
if(not J4)and(PD7(IB,SU[S2]))then
set J4=(GetUnitLifePercent(m5)<70.)and(h4[O5]!=null)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(PD7(m5,SU[ZL])and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(GetUnitLifePercent(m5)<90.)and(IsUnitType(IB,UNIT_TYPE_HERO))and(BI8(IB)==false)and((IsUnitInRange(IB,m5,200.)) or(IsUnitInRange(IB,m5,670.)))and(WR7(GetOwningPlayer(IB)))and(WR7(GetOwningPlayer(m5)))and((IsUnitType(IB,UNIT_TYPE_MELEE_ATTACKER))or(IsUnitType(IB,UNIT_TYPE_RANGED_ATTACKER))))then
set TZ4=true
set J4=(UnitUseItem(m5,bj_lastCreatedItem))
endif
if(not J4)and(PD7(IB,SU[LL])or PD7(IB,SU[D1]))then
set J4=(GetUnitLifePercent(m5)<50. or OL7(m5))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PM7(IB,SU[X0]))then
set GZ[$E0+O5]=true
set J4=(GetUnitLifePercent(m5)<70.)and(i1!=1164277357)and(UnitUseItem(IB,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(not J4)and(PD7(IB,SU[H3]))then
set J4=(m5!=null)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
if(not J4)and(PD7(IB,SU[DK4])and(RG7(IB,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(IB)>90.)and(IsUnitInRange(IB,m5,150.)))then
set J4=(m5!=null)and(UnitUseItem(IB,bj_lastCreatedItem))
endif
if(not J4)and(PD7(IB,SU[DJ4])and(RG7(IB,"ArmletOfMordigan|Active"))and((not IsUnitInRange(IB,m5,150.))or(GetUnitLifePercent(IB)<60.)))then
set J4=(UnitUseItem(IB,bj_lastCreatedItem))
endif
if((h4[O5]!=null)and(OCF(IB)))then
set J4=O3F(IB)
endif
if(i1==1429221424)then
set J4=PC7(IB,$D022E,1093815119)
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
if(PD7(IB,SU[O1]))then
set J4=(GetUnitLifePercent(m5)<20.)and(GetUnitLifePercent(IB)>60.)and(Bz>hq[64+O5])and(iy(IB))and(PP7(IB,SU[O1]))
elseif(PD7(IB,SU[X0]))then
set GZ[$E0+O5]=true
set J4=(GetUnitLifePercent(m5)<40.)and(i1!=1164277357)and(UnitUseItem(IB,bj_lastCreatedItem))
set GZ[$E0+O5]=false
endif
if(i1==1211117653 and(not J4))then
call ZSE(O5,m5,false,false)
set J4=((Bz>TB4[64+O5])and(W27(IB,A54,A54,A14,1093686863)and(IssueImmediateOrderById(IB,$D00A4))))or((Bz>TB4[$80+O5])and(W27(IB,A04,A04,A54,1093686865))and PW7(IB,$D020A,1093686865,IB))
endif
elseif((GetUnitTypeId(m5)==1848651861)or(GetUnitTypeId(m5)==1848651865)or(GetUnitTypeId(m5)==1848651866))then
if(PD7(IB,SU[LL]))then
set J4=(GetUnitLifePercent(m5)>80.)and(UnitUseItemTarget(IB,bj_lastCreatedItem,m5))
endif
endif
set Q9F=(m5==h4[O5])
if(J4)then
elseif((IsUnitType(m5,UNIT_TYPE_HERO))and((PQ7(IB,m5))or((GetUnitLifePercent(m5)<55.)and(GetRandomInt(1,3)==1)and(not T54[O5])and(OBF(IB,m5)))))then
if((T64)and(T54[O5]))then
call OBF(IB,m5)
endif
elseif(i1==1160785970)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(IsUnitInRange(IB,m5,400.)and(IssuePointOrderById(IB,$D02B6,GetUnitX(m5)+2,GetUnitY(m5)-2)))then
set J4=true
elseif((Bz>TB4[O5])and(IsUnitInRange(IB,m5,480.))and(GetUnitLifePercent(m5)<40.))then
set J4=(((GetUnitAbilityLevel(IB,1093747023)>0)and(PC7(IB,$D0105,1093747023)))or((GetUnitAbilityLevel(IB,1093752150)>0)and(PC7(IB,$D0105,1093752150))))
endif
endif
elseif(i1==1211117653)then
if((GetUnitLifePercent(IB)<35.)and(GetUnitAbilityLevel(IB,1110456408)==0))then
set J4=(Bz>TB4[80+O5])and W27(IB,A14,A14,A04,1093687372)and(W67(IB,A04,A04,A04,false))and(IssueImmediateOrderById(IB,$D00A1))
if(not J4)then
set J4=(m5!=null)and(Bz>TB4[$A0+O5])and(W27(IB,A14,A14,A54,1093686864))and(IssueImmediateOrderById(IB,$D00A6))
endif
else
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((Bz>TB4[$80+O5])and(W27(IB,A04,A04,A54,1093686865))and PW7(IB,$D020A,1093686865,IB))or((Bz>TB4[64+O5])and(W27(IB,A54,A54,A14,1093686863)and(IssueImmediateOrderById(IB,$D00A4))))
endif
endif
elseif(i1==1160786505)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(IsUnitInRange(IB,m5,250.)and(Bz>TB4[O5])and(GetUnitLifePercent(m5)<47.))then
call ZSE(O5,m5,false,false)
set J4=IssueImmediateOrderById(IB,$D022E)
elseif((Bz>TB4[48+O5])and(IsUnitInRange(IB,m5,570.)))then
set J4=IssueImmediateOrderById(IB,$D0272)
elseif((Bz>TB4[16+O5])and(IsUnitInRange(IB,m5,570.))and(not IsUnitInRange(IB,m5,200.)))then
set J4=(IssuePointOrderById(IB,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(IB,$D00D9,m5))
endif
endif
elseif(i1==1160786502)then
set J4=(GetUnitLifePercent(IB)>70.)and IssueImmediateOrderById(IB,$D020A)
elseif(i1==1160786506)then
if(IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitLifePercent(m5)<30.)then
set GZ[O5]=true
set UP=GetUnitAbilityLevel(IB,1093751639)
set J4=(IsUnitInRange(IB,m5,840.))and(J8(O5,IssuePointOrderById(IB,$D0079,GetUnitX(m5)+2,GetUnitY(m5)-2)))
if((not(J4))and(Bz>TB4[32+O5]))then
set m5=VX7(2200.-(UP*400),IB)
if((m5!=null)and(GetUnitLifePercent(m5)<15.))then
set J4=(PW7(IB,$D0097,1093751639,m5))
endif
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(60*GetUnitAbilityLevel(IB,1093682994)))and(PW7(IB,$D0097,1093682994,m5)))or((GetHeroLevel(IB)>5)and(GetUnitAbilityLevel(m5,1114665575)==0)and((Q9F)or((GetUnitLifePercent(m5)<60.)and(IsUnitInRange(IB,m5,500.))))and(PC7(IB,$D0265,1093747028)))
endif
elseif(i1==1429221443)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(hq[$F0+O5]<=Bz)and((Q9F)or(GetUnitLifePercent(m5)<50.))and(PC7(IB,$D0131,1093686322))
if((not J4)and((GetUnitLifePercent(m5)<40.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093744948,true)
set GZ[O5]=true
set J4=(IssueTargetOrderById(IB,$D0097,m5))
set GZ[O5]=false
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093744948,false)
endif
elseif(i1==1162032951)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((Bz>hq[O5])and(UP>$C8)and(UP<(400*GetUnitAbilityLevel(IB,1093679152))or UP<(460*GetUnitAbilityLevel(IB,1093752154)))and(PY7(IB,$D022F,1093679152,1093752154,m5)))then
elseif((GetHeroLevel(IB)>20)and(GetUnitAbilityLevel(IB,1112893542)==0)and(GetUnitLifePercent(IB)>85.)and(GetUnitLifePercent(m5)<45.))then
set GZ[O5]=true
call J8(O5,PC7(IB,$D0084,1093678404))
endif
endif
elseif(i1==1162032181)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((IsUnitInRange(IB,m5,250.))and(UP<ORF(IB))and(UP>300))then
set GZ[O5]=true
set J4=J8(O5,PW7(IB,$D02AC,1093683761,m5))
endif
endif
elseif(i1==1429221424)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(60*GetUnitAbilityLevel(IB,1093748789)))and(PW7(IB,$D0118,1093748789,m5)))or(PW7(IB,$D024B,1093687351,m5))
endif
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(PQ7(IB,m5))
endif
elseif(i1==1160785972)then
if(GetUnitAbilityLevel(IB,1110454355)>0)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(Q9F)and(GetUnitLifePercent(IB)>50.)and(IssueTargetOrderById(IB,$D000F,m5))
elseif(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetUnitLifePercent(m5)<65.)and(Q9F))then
set GZ[O5]=true
set J4=J8(O5,PC7(IB,$D0084,1093677872))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<30.))then
set GZ[O5]=true
set J4=J8(O5,PC7(IB,$D0084,1093677872))
endif
elseif(i1==1432646245)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=((not AW7())and((PW7(IB,$D007F,1093677640,m5))or((Q9F)and(GetUnitLifePercent(IB)<60.)and(PW7(IB,$D0269,1093679171,m5)))))or((AW7())and(GetUnitLifePercent(m5)<50.)and((IssueImmediateOrderById(IB,$D028D))or(PW7(IB,$D007F,1093677640,m5))))
endif
elseif(i1==1430466609)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((GetHeroLevel(IB)>4)or(O37(m5)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093685559,true)
set J4=((IsUnitInRange(IB,m5,375.))and(PC7(IB,$D022E,1093678145)))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(70*GetUnitAbilityLevel(IB,1093685559)))and(IssueTargetOrderById(IB,$D022F,m5)))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$C)and(GetUnitManaPercent(IB)>60.)and(G0[$80+O5]))then
set UP=P87(400.,m5,Condition(function Ki))
set J4=(UP>5)and(Bz>hq[O5])and(PY7(IB,$D009D,1093810258,1093810259,m5))
if((not J4)and(Bz>hq[16+O5])and((UP>2)or((eY[O5]==$A)and(UP>1)))and(P87(1000.,m5,Condition(function KI))<=1))then
if(not IsUnitInRange(IB,m5,400.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
set hq[$F0+O5]=Bz+3.
call IssuePointOrderById(IB,$D0012,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD))
else
set J4=PC7(IB,$D022E,1093678145)
endif
endif
endif
elseif(i1==1430468913)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitAbilityLevel(m5,1110454356)==0)and(GetUnitLevel(IB)>5)and(PW7(IB,$D00B5,1093677876,m5)))or(((GetUnitLifePercent(m5)<80.)or(Q9F))and(GetHeroLevel(IB)>3)and(IsUnitInRange(IB,m5,300.))and(PC7(IB,$D009F,1093810507)))
endif
elseif(i1==1430467634)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=((UP>$C8)and(UP<=($FA+(300*OSF(IB))))and(PY7(IB,$D0267,1093684565,1093681458,m5)))or(PW7(IB,$D0107,1093679412,m5))
if((not J4)and(GetHeroLevel(IB)>7)and(GetUnitManaPercent(IB)>70.)and(Q9F))then
set GZ[O5]=true
set J4=J8(O5,IssueTargetOrderById(IB,$D0208,m5))
endif
endif
elseif(i1==1313026096)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5)))and((GetUnitLifePercent(m5)<80.)or(Q9F))and(PW7(IB,$D007F,1095267426,m5))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
set J4=((GetHeroLevel(IB)>5)and((GetUnitLifePercent(m5)-GetUnitLifePercent(IB))>25.)and(PW7(IB,$D00DD,1093678929,m5)))
if((not J4)and(i1==1164277353)and(GetUnitLifePercent(m5)<50.))then
set GZ[O5]=true
set J4=J8(O5,PC7(IB,$D02B7,1093751369))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(i1==1164277353)and(GetUnitLifePercent(m5)<20.))then
set GZ[O5]=true
set J4=J8(O5,PC7(IB,$D02B7,1093751369))
endif
elseif(i1==1164666213)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetUnitAbilityLevel(IB,1110454836)>0))then
set J4=(G0[$80+O5])and(GetUnitLifePercent(IB)>60.)and(P87(300.,IB,Condition(function KI))==0)and(IssueTargetOrderById(IB,$D0012,m5))
endif
elseif(i1==1429221430)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(55*GetUnitAbilityLevel(IB,1093681736)))and(PW7(IB,$D0279,1093681736,m5)))or(((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<65.))and(PC7(IB,$D00C4,1093687121)))
if((not J4)and(GetUnitAbilityLevel(IB,1110454597)>0)and(Q9F))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1430466872)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((UP>$96)and(UP<OTF(IB))and(not ke(m5)))then
set GZ[O5]=true
call J8(O5,(PY7(IB,$D0097,1093679413,1093679447,m5))or(PW7(IB,$D0216,1093684558,m5))or(PW7(IB,$D024B,1093687349,m5)))
elseif(((GetUnitLifePercent(m5)<80.)or(Q9F))and(GetUnitAbilityLevel(m5,1112560453)==0)and(GetUnitAbilityLevel(m5,1110454344)==0))then
set J4=(PW7(IB,$D024B,1093687349,m5))or((Bz>hq[O5])and(PW7(IB,$D0216,1093684558,m5)))
endif
endif
elseif(i1==1162032439)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(Bz>hq[16+O5]))then
set UP=GetUnitAbilityLevel(IB,1093677363)
if(UP==0)then
set UP=GetUnitAbilityLevel(IB,1093681462)
endif
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(100+(300*UP)))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and((Bz>hq[O5])or(GetUnitAbilityLevel(m5,1111847784)>0)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093681462,true)
call J8(O5,(PC7(IB,$D0272,1093677363))or(PW7(IB,$D02BD,1093744435,m5)))
else
call PW7(IB,$D02BD,1093744435,m5)
endif
endif
elseif(i1==1430466865)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set J4=((GetUnitAbilityLevel(IB,1110454357)==0)and(GetUnitLifePercent(IB)>45.)and(PW7(IB,$D0062,1093677879,IB)))or((GetUnitLifePercent(m5)<60.)and(GetUnitLifePercent(m5)>10.)and(IsUnitInRange(IB,m5,400.))and(R2I(GetUnitState(IB,UNIT_STATE_MANA))<($8C+(GetUnitAbilityLevel(IB,1093810508)*100)))and(PC7(IB,$D009F,1093810508)))or(PW7(IB,$D009D,1093677651,m5))
elseif((GetHeroLevel(IB)>7)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(iy(IB))and(GetUnitManaPercent(IB)>60.)and(GetUnitState(m5,UNIT_STATE_LIFE)<200.))then
set UP=P87(450.,m5,Condition(function Ki))
set GZ[O5]=true
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(PW7(IB,$D009D,1093677651,m5))
set GZ[O5]=false
endif
elseif(i1==1430468144)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
if(GetUnitAbilityLevel(m5,1113813609)==0)then
call PW7(IB,$D00DD,1093679192,m5)
elseif(IsUnitInRange(IB,m5,860.)and(R47(GetHandleId(IB),"Level")>GetUnitAbilityLevel(IB,1093750337))and(GetUnitManaPercent(IB)>35.)and(GetHeroLevel(IB)>3))then
call IssueTargetOrderById(IB,$D0118,m5)
elseif(GetUnitLifePercent(IB)>75.)then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
call Q7F()
set J4=((i1==1429221432)and((GetUnitLifePercent(m5)<60.)or(O37(IB)))and(PC7(IB,$D00D4,1093679411)))or(((i1==1160786229)or(R2I(GetUnitState(IB,UNIT_STATE_MANA))>($FA+(25*(GetUnitAbilityLevel(IB,1093679411))))))and((PC7(IB,$D009E,1093677892))or(PC7(IB,$D0278,1093687878))))
endif
elseif(i1==1429221441)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
call Q7F()
set J4=((GetUnitLifePercent(m5)<65.)and((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(PC7(IB,$D009B,1093677903)))or(PW7(IB,$D0107,1093678389,m5))
endif
elseif(i1==1165451634)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5)))and((Q9F)or(GetUnitLifePercent(m5)<70.))and(PW7(IB,$D02B6,1093687629,m5))
elseif(i1==1432642913)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>3)and((GetUnitLifePercent(IB)>70.)or(GetUnitLifePercent(IB)>GetUnitLifePercent(m5)))and(IssueTargetOrderById(IB,$D02B6,m5))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>2))then
call IssueTargetOrderById(IB,$D0097,IB)
endif
elseif(i1==1215722344)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitLifePercent(IB)>70.)and(ND7(GetUnitTypeId(m5),5))and(GetUnitLifePercent(m5)<50.)and(PW7(IB,$D02BC,1093682499,m5)))or((GetUnitLifePercent(m5)<60.)and(GetUnitLifePercent(IB)>60.)and(PW7(IB,$D02BC,1093682499,IB)))
endif
elseif(i1==1332766568)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if(((UP<($96+($96*GetUnitAbilityLevel(IB,1093682482))))or(UP<($96+($96*GetUnitAbilityLevel(IB,1093750098)))))and(UP>$96))then
set J4=(PY7(IB,$D0097,1093682482,1093750098,m5))or((IsUnitInRange(IB,m5,275.))and(IssueImmediateOrderById(IB,$D0278)))
elseif(R2I(GetUnitState(IB,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(IB,1093682482)))or R2I(GetUnitState(IB,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(IB,1093750098))))then
set J4=((P87(400.,m5,Condition(function KJ))>0)and(IssueTargetOrderById(IB,$D0118,m5)))or(((ND7(GetUnitTypeId(m5),5))or(GetUnitLifePercent(m5)<50.))and(IsUnitInRange(IB,m5,275.))and(IssueImmediateOrderById(IB,$D0278)))
elseif(PD7(IB,SU[S2]))and(PD7(IB,SU[ZL]))then
set TZ4=true
set J4=(GetUnitLifePercent(m5)<70.)and(h4[O5]!=null)and(IsUnitType(IB,UNIT_TYPE_HERO))and((IsUnitInRange(IB,m5,200.))or(i1==1315074670)or(i1==1160785972)or(i1==1211117654)or(i1==1433631084)or(i1==1164799855))and(UnitUseItem(m5,PH7(m5,SU[ZL])))and(UnitUseItem(m5,PH7(m5,SU[S2])))
set TZ4=false
endif
endif
elseif(i1==1315334514)then
if(GetHeroLevel(IB)>2)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(IsUnitInRange(IB,m5,350.))and(GetUnitLifePercent(m5)>15.)and((GetUnitAbilityLevel(IB,1093682001))>(GetUnitAbilityLevel(IB,1093681746)*3))and(PC7(IB,$D0131,1093810506))
elseif((GetHeroLevel(IB)>9)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitManaPercent(IB)>65.)and(GetUnitLifePercent(m5)<50.))then
set J4=P87(200.,m5,Condition(function Ki))<2
else
set J4=true
endif
if(not J4)then
set UP=R2I(N67(GetUnitX(IB),GetUnitY(IB),GetUnitX(m5),GetUnitY(m5)))
if((UP>=75)and(UP<=325))then
set J4=(OAF(IB,200.,Condition(function Ki)))and(PC7(IB,$D00C4,1093682521))
elseif((UP>=325)and(UP<=575))then
set J4=(OAF(IB,450.,Condition(function Ki)))and(PC7(IB,$D026C,1093682760))
elseif((UP>=575)and(UP<=825))then
set J4=(OAF(IB,700.,Condition(function Ki)))and(PC7(IB,$D0277,1093682736))
endif
endif
endif
elseif(i1==1328558154)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(GetUnitLifePercent(m5)<55.)and(GetUnitState(m5,UNIT_STATE_LIFE)>250.)and(not ke(m5))and(not IsUnitInRange(IB,m5,250.))and(((P87(900.,m5,Condition(function Ki))<=2)and(PD7(IB,SU[H1]))or(PD7(IB,SU[S2])))or((P87(900.,m5,Condition(function Ki))<2)))and(IssueTargetOrderById(IB,$D0278,m5))
elseif(i1==1429221446)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitAbilityLevel(IB,1110454868)==0)and(GetUnitLifePercent(IB)>55.)and((GetHeroLevel(IB)>6)or(O37(m5)))and(GetUnitState(IB,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and(PC7(IB,$D00D1,1093678667)))or(((GetUnitLifePercent(m5)<60.)or(Q9F))and(GetUnitState(m5,UNIT_STATE_LIFE)>250.)and(G0[$80+O5])and(PY7(IB,$D0200,1093682764,1093747544,m5)))
endif
elseif(i1==1429221445)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set UP=GetUnitAbilityLevel(IB,1093679184)+1
if(UP<=1)then
set UP=GetUnitAbilityLevel(IB,1093678647)
endif
set J4=((UP>0)and(not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(GetUnitState(m5,UNIT_STATE_LIFE)<((.2+(I2R(UP)*.2))*(GetUnitState(m5,UNIT_STATE_MAX_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))))and(PY7(IB,$D007F,1093678647,1093679184,m5)))or((GetHeroLevel(IB)>2)and(IsUnitInRange(IB,m5,400.))and(PC7(IB,$D022E,1093678422)))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>8)and(GetUnitManaPercent(IB)>60.)and(G0[$80+O5]))then
set UP=P87(400.,m5,Condition(function Ki))
if((UP>2)or((eY[O5]==$A)and(UP>1)))then
if(not IsUnitInRange(IB,m5,400.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
set hq[$F0+O5]=Bz+3.
call IssuePointOrderById(IB,$D0012,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD))
else
set J4=PC7(IB,$D022E,1093678422)
endif
endif
endif
elseif(i1==1332963428)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
set J4=((O37(m5))and(GetUnitState(IB,UNIT_STATE_MANA)>hq[272+O5])and(PW7(IB,$D0200,1093677649,m5)))or((GetUnitLifePercent(IB)<90.)and(PW7(IB,$D0097,1093683019,m5)))
endif
elseif(i1==1332109682)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)<50.)and(PC7(IB,$D026C,1093810505)))or((GetUnitManaPercent(IB)>30.)and(PW7(IB,$D02B6,1093678134,m5)))
endif
elseif(i1==1211117640)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>4)and(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitState(IB,UNIT_STATE_MANA)>250.)and(Bz>hq[O5])and(PW7(IB,$D0206,1093681989,m5)))or((GetHeroLevel(IB)>2)and(Q9F)and(IssueTargetOrderById(IB,$D0079,m5)))
elseif((GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>50.))then
set J4=(P87(400.,m5,Condition(function Ki))>2)and(P87(300.,m5,Condition(function Kj))>0)and(IssueTargetOrderById(IB,$D0079,m5))
endif
elseif(i1==1429221456)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set UP=GetHeroInt(IB,true)-GetHeroInt(m5,true)
set J4=((GetHeroLevel(IB)>5)and(UP>9)and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($A*UP))and(PY7(IB,$D0079,1093685067,1093752407,m5)))or((i2(m5))and(PW7(IB,$D0097,1093685066,m5)))
if((not J4)and(GetUnitManaPercent(IB)>70.)and(GetUnitLifePercent(m5)>60.)and(GetUnitManaPercent(m5)>40.))then
set GZ[O5]=true
set J4=J8(O5,(P87(700.,m5,Condition(function Kk))==0)and(PW7(IB,$D0097,1093685066,m5)))
endif
endif
elseif(i1==1160786243)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>2)and((GetUnitManaPercent(IB)>50.)and(GetUnitLifePercent(m5)<65.))and(IssueTargetOrderById(IB,$D0118,m5))
if((not J4)and(GetUnitAbilityLevel(IB,1093683765)>2))then
set J4=(P87(500.,m5,Condition(function Ki))>3)and((GetUnitManaPercent(IB)>60.)or(GetUnitLifePercent(m5)<65.)or(P87(500.,m5,Condition(function KJ))>0))and(IssueTargetOrderById(IB,$D007F,m5))
endif
if((not J4)and(GetUnitLifePercent(m5)<75.)and(GetHeroLevel(IB)>5)and(Bz>hq[O5]))then
set GZ[O5]=true
set J4=J8(O5,PW7(IB,$D0100,1395667000,m5))
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
if((GetHeroLevel(IB)>$A)and(GetUnitLifePercent(m5)<40.))then
set GZ[O5]=true
set J4=J8(O5,PW7(IB,$D0100,1395667000,m5))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitAbilityLevel(IB,1093683765)>2)and(GetUnitManaPercent(IB)>60.))then
set J4=(P87(400.,m5,Condition(function Ki))>3)and(IssueTargetOrderById(IB,$D007F,m5))
endif
elseif(i1==1430468406)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(m5)>5)and((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<70.))and(PW7(IB,$D0270,kS(IB),m5))
if((not J4)and((GetHeroLevel(IB)>5)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)>10.)and(GetUnitLifePercent(m5)<50.)and(IssueImmediateOrderById(IB,$D024C)))or(PW7(IB,$D00FA,kT(IB),m5))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<25.)and(GetUnitLifePercent(m5)>10.))then
set J4=(P87(500.,m5,Condition(function Kj))>2)and(IssueImmediateOrderById(IB,$D024C))
endif
elseif(i1==1160786242)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)and(IssueTargetOrderById(IB,$D02B6,m5)))or((GetUnitLifePercent(m5)<45.)and(IssueImmediateOrderById(IB,$D020A)))
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((O37(m5))and(GetUnitAbilityLevel(m5,1110456120)==0))then
call O5F(IB,m5)
endif
elseif((i1==1211117641)and(GetHeroLevel(IB)>$B)and(GetUnitManaPercent(IB)>70.))then
set J4=(P87(400.,IB,Condition(function Ki))>3)and(IssueTargetOrderById(IB,$D0249,IB))
endif
elseif(i1==1311781207)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(Q9F)and((GetHeroLevel(IB)>4)or(O37(m5)))and(IssuePointOrderById(IB,$D0079,GetUnitX(m5),GetUnitY(m5)))
elseif((i1==1211117650)or(i1==1211119433))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
endif
elseif(i1==1211117646)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=IssueTargetOrderById(IB,$D007F,IB)
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))and(GetHeroLevel(IB)>5)and(GetUnitManaPercent(IB)>50.))then
set J4=(P87(250.,IB,Condition(function Ki))>2)and(IssueTargetOrderById(IB,$D007F,IB))
endif
elseif(i1==1211117624)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(O37(m5)))and((PC7(IB,$D022E,1093683024))or(IssueTargetOrderById(IB,$D0278,m5)))
if((not J4)and(GetUnitAbilityLevel(IB,1110455373)>0)and((GetUnitLifePercent(IB)>75.)or(O37(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
elseif((GetHeroLevel(IB)>6)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitLifePercent(m5)<75.)and(GetUnitManaPercent(IB)>75.))then
set J4=(P87(400.,m5,Condition(function Ki))>2)and(PC7(IB,$D022E,1093683024))
endif
elseif(i1==1160785973)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set UP=P87(700.,IB,Condition(function Ki))
set J4=((IsUnitInRange(m5,IB,400.))and(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(IssueImmediateOrderById(IB,$D0278)))or((GetHeroLevel(IB)>20)and(GetUnitState(IB,UNIT_STATE_MANA)>450.)and(PW7(IB,$D0107,1093678130,m5)))
endif
elseif(i1==1315988077)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(((GetUnitLifePercent(m5)<75.)or(Q9F))and((GetHeroLevel(IB)>4)or(O37(m5))))then
if(((not IsUnitInRange(IB,m5,200.))or(not PC7(IB,$D0080,1093678669)))and(GetUnitLifePercent(m5)<50.)and(GetUnitLifePercent(m5)>15.))then
call ZSE(O5,m5,false,false)
call PC7(IB,$D026A,1093684561)
endif
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<20.))then
set GZ[O5]=true
call PC7(IB,$D026A,1093684561)
endif
elseif(i1==1211117616)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<80.)or(Q9F))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=((IsUnitInRange(IB,m5,250.))and(PC7(IB,$D009F,1093677139)))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(40+(125*(GetUnitAbilityLevel(IB,1093816142)))))and(PW7(IB,$D0107,1093816142,m5)))
endif
elseif(i1==1315074670)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<70.))and(GetUnitLifePercent(m5)>20.)and(IsUnitInRange(IB,m5,400.))and(PW7(IB,$D0270,1093685570,m5))
if((not J4)and(G0[$80+O5])and(GetUnitAbilityLevel(m5,1113813860)>0)and(Q9F)and((GetUnitLifePercent(IB)>70.)or(O37(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<80.)or(Q9F))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)<60.)and(PC7(IB,$D00D4,1093677895)))or((IsUnitInRange(IB,m5,350.))and(PW7(IB,$D007F,1093681490,m5)))
endif
elseif(i1==1164207469)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(not ke(m5)))then
set J4=(((GetUnitManaPercent(m5)<15.)and(GetUnitLifePercent(m5)<50.))or(GetUnitState(m5,UNIT_STATE_LIFE)<((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(IB,1093682483))*.25)))))and(PW7(IB,$D007F,1093682483,m5))
endif
elseif(i1==1433631084)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($B4+($96*GetUnitAbilityLevel(IB,1093678160))))and(PW7(IB,$D007F,1093678160,m5))
elseif(i1==1214345830)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetHeroLevel(IB)>2)and(GetUnitLifePercent(IB)<85.)and(PW7(IB,$D0101,1093679182,IB))
elseif((GetHeroLevel(IB)>7)and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetUnitLifePercent(IB)<90.)and(GetUnitManaPercent(IB)>60.))then
set J4=(P87(400.,IB,Condition(function Ki))>2)and(P87(800.,IB,Condition(function Kk))==0)and(PW7(IB,$D0101,1093679182,IB))
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
if((IsUnitType(m5,UNIT_TYPE_HERO))and(GetHeroLevel(IB)>5))then
if(GetUnitAbilityLevel(IB,1110454338)==0)then
if((GetUnitLifePercent(m5)<70.)or((Q9F)and(GetUnitLifePercent(IB)<70.)))then
if((IsUnitInRange(IB,m5,280.)))then
set J4=IssueImmediateOrderById(IB,$D00AA)
call IssueTargetOrderById(IB,$D000F,m5)
endif
set GZ[O5]=true
call J8(O5,PC7(IB,$D0084,1093748042))
endif
elseif((GetUnitLifePercent(IB)>70.)and(Q9F))then
if((IsUnitInRange(IB,m5,280.)))then
set J4=IssueImmediateOrderById(IB,$D00AA)
call IssueTargetOrderById(IB,$D000F,m5)
else
set J4=IssueImmediateOrderById(IB,$D00AB)
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
endif
elseif(i1==1315007329)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
set J4=((GetUnitState(m5,UNIT_STATE_LIFE)<(hq[272+O5]))and(PW7(IB,$D007F,1093677108,m5)))or((GetUnitLifePercent(m5)<75.)and(GetUnitAbilityLevel(m5,1110454348)==0)and(GetUnitCurrentOrder(m5)!=$D0005)and(PW7(IB,$D00B5,1093681716,m5)))
endif
elseif(i1==1332898670)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
if(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(50*GetUnitAbilityLevel(IB,1093677136)))then
if(IsUnitInRange(IB,m5,400)or BK8(m5))then
set GZ[O5]=true
call J8(O5,PW7(IB,$D0200,1093677136,m5))
endif
elseif((GetHeroLevel(IB)>$A)and(GetUnitLifePercent(m5)<70.))then
call PW7(IB,$D0216,1093685848,m5)
elseif((GetUnitManaPercent(IB)>60.)or(O37(m5)))then
call PW7(IB,$D026B,1093677360,m5)
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.))then
set UP=P87(450.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(PW7(IB,$D026B,1093677360,m5))
endif
elseif(i1==1215723364)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
if(((GetUnitLifePercent(m5)<70.)or(Q9F))and(PW7(IB,$D007F,1093677633,m5)))then
elseif((O37(m5))and(kA(IB,m5,400.)))then
call PY7(IB,$D026B,1093683534,1093747031,m5)
endif
endif
elseif(i1==1215128178)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetUnitLifePercent(m5)<70.)or(Q9F))and((GetHeroLevel(IB)>3)or(O37(m5))))then
set J4=(PW7(IB,$D007F,1093683779,m5))or(((GetUnitManaPercent(IB)>40.)or(O37(m5)))and(PW7(IB,$D0097,1093677616,m5)))
endif
elseif(i1==1164799855)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(GetUnitManaPercent(IB)>50.)and((GetHeroLevel(IB)>3)or(O37(m5)))and(GetUnitLifePercent(m5)<80.)and(PW7(IB,$D006B,1093682264,m5))
elseif((GetOwningPlayer(m5)!=Y7[0])and(GetOwningPlayer(m5)!=Z7[0])and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitManaPercent(IB)>60.)and(Bz>hq[O5]))then
set UP=GetUnitTypeId(m5)
set J4=(UP!=1848652113)and(UP!=1848652114)and(UP!=1752654196)and(UP!=1752658994)and(UP!=1752658995)and(UP!=1747988534)and(UP!=1966092339)and(UP!=1966092341)and(UP!=1966092345)and(UP!=1969711215)and(UP!=1966092337)and(UP!=1970169187)and(UP!=1966092338)and(UP!=1702061422)and(UP!=1697656918)and(UP!=1701081721)and(UP!=1697656919)and(GetUnitLifePercent(m5)>60.)and(PW7(IB,$D006B,1093682264,m5))
endif
elseif(i1==1433105516)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
if((GetHeroLevel(IB)>5)or(O37(m5)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(IB),GetUnitX(h8[O5])-GetUnitX(IB)))
set J4=(IssuePointOrderById(IB,$D0278,GetUnitX(m5)+80.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+80.*Sin(UP*bj_DEGTORAD)))or((O37(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(GetUnitState(m5,UNIT_STATE_LIFE)<800.)and(not kr(IB))and(IssuePointOrderById(IB,$D00DC,GetUnitX(m5)+80.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+80.*Sin(UP*bj_DEGTORAD))))or(IssueTargetOrderById(IB,$D02B6,m5))
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>9)and(iy(IB))and(GetUnitManaPercent(IB)>60.)and(((h4[$80+O5]!=null)and(IsUnitInRange(IB,h4[$80+O5],1200.)))or(eY[O5]==$A)))then
set UP=P87(450.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssuePointOrderById(IB,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>4)and(Bz>hq[O5])and(GetUnitManaPercent(IB)>30.))then
set b5=HC[16+O5]
call MoveLocation(b5,GetUnitX(IB),GetUnitY(IB))
if((P87(600.,m5,Condition(function Ki))>2)and(not IsUnitInRange(IB,m5,150.))and((P77(600.,b5,Condition(function KI))==0)or(P77(500.,b5,Condition(function KJ))>0)or(P77(500.,b5,Condition(function Kk))>0)))then
set UP=IMaxBJ(R2I(N67(GetUnitX(m5),GetUnitY(m5),GetUnitX(IB),GetUnitY(IB)))-(435+(120*GetUnitAbilityLevel(IB,1093679157))),0)
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
if((RAbsBJ(GetUnitFacing(IB)-I2R(i1))<25.)or(RAbsBJ(GetUnitFacing(IB)-360.-I2R(i1))<25.))then
call IssuePointOrderById(IB,$D0278,GetUnitX(IB)+I2R($96+UP)*Cos(i1*bj_DEGTORAD),GetUnitY(IB)+I2R($96+UP)*Sin(i1*bj_DEGTORAD))
endif
endif
endif
elseif(i1==1316252014)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>4)or(O37(m5)))and((PW7(IB,$D0269,1093678137,m5))or(IssuePointOrderById(IB,$D00DE,GetUnitX(IB)+70.*Cos((GetUnitFacing(IB)-180.)*bj_DEGTORAD),GetUnitY(IB)+70.*Sin((GetUnitFacing(IB)-180.)*bj_DEGTORAD))))
elseif((GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>40.))then
set UP=P87(400.,m5,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssuePointOrderById(IB,$D00DE,GetUnitX(IB)+70.*Cos((GetUnitFacing(IB)-180.)*bj_DEGTORAD),GetUnitY(IB)+70.*Sin((GetUnitFacing(IB)-180.)*bj_DEGTORAD)))
endif
elseif(i1==1164799603)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
call Q7F()
set J4=((GetUnitLifePercent(m5)<70.)and(PY7(IB,$D0097,1093752632,1093752633,m5)))or((not IsUnitInRange(IB,m5,200.))and(IsUnitInRange(IB,m5,600))and(PW7(IB,$D00FA,1093808453,m5)))
endif
elseif(i1==1328558160)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(GetUnitAbilityLevel(IB,1093683011)>0)then
call Q7F()
endif
set J4=((GetHeroLevel(IB)>5)or(GetUnitLifePercent(m5)<60.))and(IssueTargetOrderById(IB,$D02B6,m5))
if((not J4)and(G0[$80+O5])and((GetHeroLevel(IB)>3)or(O37(m5)))and(Q9F)and(not IsUnitInRange(IB,m5,350.))and(P87(600.,m5,Condition(function KI))<3)and(not IC(O5)))then
set b5=kL(IB,m5,200.)
if(b5!=null)then
if((GetUnitState(m5,UNIT_STATE_LIFE)<400.)and(GetUnitLifePercent(m5)<40.))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(IB,$D00FA,b5))
endif
endif
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$A)and(GetUnitManaPercent(IB)>70.)and(not IsUnitInRange(IB,m5,350.)))then
if((P87(400.,m5,Condition(function Ki))>2)and(P87(500.,m5,Condition(function KI))==0)and(kJ(GetUnitX(m5),GetUnitY(m5))))then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(IB,$D00FA,GetUnitX(m5),GetUnitY(m5)))
endif
endif
elseif(i1==1212363833)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
set UP=R2I(hq[16+O5]-Bz)
set J4=((GetHeroLevel(IB)>4)or(O37(m5)))and((GetUnitLifePercent(m5)<80.)or(Q9F))and((((UP<=0)or(UP>50))and(PW7(IB,$D007F,1093809220,m5)))or((Bz>hq[O5])and(PC7(IB,$D009B,1093678643))))
endif
elseif(i1==1315070563)then
if((not GZ[O5])and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE)))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((not ke(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)<1200.)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and((P87(900.,m5,Condition(function KI))*2)>=P87(900.,m5,Condition(function Ki)))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and(PY7(IB,$D007F,1093684529,1093747032,m5)))or(((GetHeroLevel(IB)>4)or(O37(m5)))and(not RG7(IB,"Omnislashing"))and(PC7(IB,$D00A0,1093678407)))
elseif((GetHeroLevel(IB)>5)and(Bz>hq[O5])and((GetUnitState(IB,UNIT_STATE_MANA)>235.+(75*GetUnitAbilityLevel(IB,1093684529)))or(GetUnitState(IB,UNIT_STATE_MANA)>235.+(75*GetUnitAbilityLevel(IB,1093747032))))and(P87(400.,m5,Condition(function KI))>0))then
set J4=(not RG7(IB,"Omnislashing"))and(PC7(IB,$D00A0,1093678407))
endif
endif
elseif(i1==1212365106)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=(PW7(IB,$D0079,1093685831,m5))
if((not J4)and(RAbsBJ((GetUnitFacing(m5)-GetUnitFacing(IB)))<=105.)and(GetUnitLifePercent(IB)>(GetUnitLifePercent(m5)+10.)))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1211117617)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
set J4=((GetUnitLifePercent(m5)<80.)or(Q9F))and((((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(PC7(IB,$D02B7,1093752648)))or(PW7(IB,$D02B6,1093744944,m5))or(PC7(IB,$D022E,1093814611)))
if((not J4)and(GetUnitAbilityLevel(IB,1110454329)>0)and((not O37(IB))or(O37(m5))))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
endif
elseif(i1==1211117633)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>4)or(O37(m5))))then
call Q7F()
set J4=(PW7(IB,$D0269,1093684045,m5))or(((GetUnitAbilityLevel(IB,1110455624)>0)or(GetUnitLifePercent(m5)<60.))and(PW7(IB,$D007F,1093684310,m5)))
endif
elseif(i1==1211117620)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if((O37(m5))or((GetHeroLevel(IB)>3)and((Q9F)or(GetUnitLifePercent(m5)<70.))))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=((UP>$96)and(UP<OUF(IB))and(not ke(m5))and(PY7(IB,$D0097,1093677392,1093679450,m5)))or(PW7(IB,$D009D,1093677382,m5))
endif
elseif(eY[O5]==$A)then
set J4=(GetUnitManaPercent(IB)>60.)and(PW7(IB,$D009D,1093677382,m5))
endif
elseif(i1==1432580716)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(Q9F)and((GetHeroLevel(IB)>3)or(O37(m5)))and(((Bz>hq[O5])and(PW7(IB,$D0079,1093684300,m5)))or(IssueTargetOrderById(IB,$D0278,m5)))
elseif(GetHeroLevel(IB)>5)then
if(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(GetUnitLifePercent(m5)<30.)and((P87(275.,m5,Condition(function Ki))>0)or(P87(275.,m5,Condition(function Kj))>0))and(IssueTargetOrderById(IB,$D0278,m5))
else
set J4=(GetUnitManaPercent(IB)>60.)and(P87(400.,m5,Condition(function Ki))>2)and(IssueTargetOrderById(IB,$D0278,m5))
endif
endif
elseif(i1==1333027688)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(Q9F)and((GetHeroLevel(IB)>3)or(O37(m5)))and(((IsUnitInRange(IB,m5,250.))and(PC7(IB,$D00C4,1093682252)))or(PW7(IB,$D0278,1093686091,m5))or((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<P2F(IB))and(GetUnitState(m5,UNIT_STATE_LIFE)>180.)and((PC7(IB,$D022E,1093682248))or(PC7(IB,$D022E,1093750594)))))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>$A))then
set J4=((GetUnitLifePercent(m5)<40.)or(P87(300.,IB,Condition(function Ki))>2))and(PC7(IB,$D00C4,1093682252))
endif
elseif(i1==1311781185)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>3)or(O37(m5))))then
set J4=(((GetUnitAbilityLevel(m5,1112437609)>0)or(GetUnitManaPercent(m5)<30.)or(GetUnitAbilityLevel(m5,1110454607)>0))and(IssueTargetOrderById(IB,$D02B6,m5)))or((Q9F)and(GetUnitAbilityLevel(m5,1112437609)==0)and((ND7(GetUnitTypeId(m5),5))or(GetUnitLifePercent(m5)<60.)or(GetUnitLifePercent(IB)<60.))and(IssueImmediateOrderById(IB,$D0278)))
endif
elseif(i1==1211117643)then
if((not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>$A))then
set UP=P87(300.,m5,Condition(function Ki))
set J4=((UP>1)and(GetHeroLevel(IB)>4)and(P87(800.,m5,Condition(function KI))==0)and(GetUnitManaPercent(IB)>35.)and(PX7(IB,$D0136,1093678410,PU7(m5))))
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>$A)and(GetUnitLifePercent(IB)>70.))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(IB)-GetUnitY(m5),GetUnitX(IB)-GetUnitX(m5)))
call MoveLocation(HA,GetUnitX(m5)+70.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+70.*Sin(UP*bj_DEGTORAD))
if(IsUnitAlly(IB,Y7[0]))then
set L84=N37(m5,h7[100])
else
set L84=N37(m5,h7[0])
endif
set J4=(GetWidgetLife(m5)<450. or L84>6000)and(P87(800.,m5,Condition(function KI))==0)and(P87(300.,m5,Condition(function Kj))>1)and(PX7(IB,$D0136,1093678410,HA))
endif
elseif(i1==1215130471)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(O37(m5)))and((PW7(IB,$D007F,S27(IB),m5))or((GetUnitLifePercent(m5)<60)and(R87(GetHandleId(IB),"AI|Magi2Blast")and PW7(IB,$D0278,1093815121,m5)))or(PW7(IB,$D02B6,S_7(IB),m5)))
elseif((GetUnitManaPercent(IB)>50.)and(GetHeroLevel(IB)>$A))then
set J4=((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(P87(300.,m5,Condition(function Ki))>2)and(PW7(IB,$D02B6,S_7(IB),m5)))or((P87(400.,m5,Condition(function Kj))>2)and(GetUnitAbilityLevel(IB,1113746543)==0)and(PW7(IB,$D0085,T47(IB),IB)))
endif
elseif(i1==1215657064)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
if(GetUnitAbilityLevel(IB,1110454863)==0)then
set J4=((GetHeroLevel(IB)>5)or(O37(m5)))and(((IsUnitInRange(IB,m5,300.))and(PC7(IB,$D0080,1093677913)))or(PC7(IB,$D0084,1093684291))or(PC7(IB,$D0278,1093750841)))
elseif(GetUnitLifePercent(IB)>50.)then
set J4=IssueTargetOrderById(IB,$D000F,m5)
endif
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(GetUnitAbilityLevel(IB,1110454863)==0)and(GetUnitLifePercent(m5)<70.)and(PC7(IB,$D0278,1093750841))
endif
elseif(i1==1332179560)then
if((IsUnitType(m5,UNIT_TYPE_HERO))and((GetHeroLevel(IB)>5)or(O37(m5))))then
call Q7F()
set J4=(GetUnitLifePercent(m5)<35.)and(PW7(IB,$D02B6,1093742660,m5))
endif
elseif(i1==1214344551)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetUnitLifePercent(m5)<70.)and(GetUnitAbilityLevel(m5,1110459185)==0)and(IssueImmediateOrderById(IB,$D0278)))or((GetUnitAbilityLevel(m5,1110459185)>0)and(IssueTargetOrderById(IB,$D000F,m5)))
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
set hq[$F0+O5]=Bz+4.
set J4=(IssueTargetOrderById(IB,$D0085,IB))or(IssueImmediateOrderById(IB,$D0277))
elseif(IsUnitType(m5,UNIT_TYPE_STRUCTURE))then
set J4=(IssueTargetOrderById(IB,$D0085,IB))or(IssueImmediateOrderById(IB,$D0277))
endif
elseif(i1==1211117636)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
call Q7F()
set J4=(GetUnitLifePercent(m5)<55.)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.)and(PY7(IB,$D007F,1093685042,1093810233,m5))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(GetHeroLevel(IB)>8)and(GetUnitManaPercent(IB)>45.)and(GetUnitLifePercent(m5)<75.))then
if(P87(550.,m5,Condition(function Ki))>2)then
call SetPlayerAbilityAvailable(GetOwningPlayer(IB),1093685041,true)
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
set GZ[O5]=true
set J4=IssuePointOrderById(IB,$D00FA,GetUnitX(IB)+1000.*Cos(UP*bj_DEGTORAD),GetUnitY(IB)+1000.*Sin(UP*bj_DEGTORAD))
set GZ[O5]=false
endif
endif
elseif(i1==1160786000)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(O37(m5)))and((PW7(IB,$D00FA,1093685047,m5))or((GetUnitLifePercent(m5)<60.)and(PX7(IB,$D0264,1093685046,ZR7(IB,m5,2000.,.65,1100.)))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.)and(GetUnitLifePercent(m5)<75.))then
set J4=(P87(400.,m5,Condition(function Ki))>2)and(PW7(IB,$D00FA,1093685047,m5))
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=(((GetHeroLevel(IB)>3)or(O37(m5)))and(PW7(IB,$D0079,1093683532,m5)))or(((GetUnitLifePercent(m5)<75.)or(GetUnitLifePercent(IB)<65.))and(i1==1311781193)and(PC7(IB,$D02B7,1095656306)))
if((not J4)and(i1!=1311781193)and(GetUnitLifePercent(IB)>75.))then
call IssueTargetOrderById(IB,$D000F,m5)
endif
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL)))then
if((Bz>hq[O5])and(GetHeroLevel(IB)>6)and(GetUnitManaPercent(IB)>50.))then
set UP=P87(500.,m5,Condition(function Ki))
set J4=((UP>3)or((eY[O5]==$A)and(UP>1)))and(PW7(IB,$D0079,1093683532,m5))
endif
elseif((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(i1==1311781193)and(GetUnitManaPercent(IB)>50.)and(GetHeroLevel(IB)>$A))then
set J4=(P87(400.,m5,Condition(function Kj))>2)and(PC7(IB,$D02B7,1095656306))
endif
elseif(i1==1311781206)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>2)or(O37(m5)))and(((IsUnitInRange(IB,m5,550.))and((GetUnitManaPercent(IB)>50.)or(GetUnitLifePercent(m5)<60.))and(IssueImmediateOrderById(IB,$D0278)))or(((GetUnitLifePercent(m5)<75.)or(Q9F))and(ZME(IB,m5))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>6)and(GetUnitManaPercent(IB)>60.))then
set UP=P87(500.,IB,Condition(function Ki))
set J4=((UP>2)or((eY[O5]==$A)and(UP>1)))and(IssueImmediateOrderById(IB,$D0278))
endif
elseif(i1==1211117651)then
if(((GetHeroLevel(IB)>$B)and(GetUnitState(IB,UNIT_STATE_MANA)>600.))or(IsUnitType(m5,UNIT_TYPE_HERO))or((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitManaPercent(IB)>30.)and(GetUnitTypeId(m5)!=1700946284)and(GetUnitTypeId(m5)!=1970107511)and(GetUnitTypeId(m5)!=1697657398)and(GetUnitTypeId(m5)!=1966092370)))then
if(GetUnitAbilityLevel(IB,1093685594)>0)then
set hq[$F0+O5]=Bz+5.
else
set J4=IssueImmediateOrderById(IB,$D00D1)
endif
endif
elseif(i1==1160786265)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((Q9F)and((GetUnitLifePercent(m5)<80.)or(GetUnitLifePercent(IB)<60.))and(IssueImmediateOrderById(IB,$D022E)))or((IsUnitInRange(IB,m5,$91+(40*GetUnitAbilityLevel(IB,1093685839))))and(PC7(IB,$D00A1,1093685846)))
endif
elseif(i1==1311780930)then
if((GetHeroLevel(IB)>$A)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(iy(IB)))then
if(P87(550.,m5,Condition(function Ki))>2)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(IB),GetUnitX(m5)-GetUnitX(IB)))
set J4=IssuePointOrderById(IB,$D02B6,GetUnitX(IB)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(IB)+200.*Sin(UP*bj_DEGTORAD))
set h4[16+O5]=null
endif
endif
elseif(i1==1311788615)then
if((IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetUnitLifePercent(m5)<35.)and(GetUnitLevel(IB)>5)and(Bz>TB4[O5]))then
set J4=PY7(IB,$D0265,1093743184,1093747766,m5)
endif
elseif(i1==1160786520)then
if(IsUnitType(m5,UNIT_TYPE_HERO))then
set J4=((GetHeroLevel(IB)>3)or(O37(m5)))and((PW7(IB,$D00D8,1093809991,m5))or((GetUnitLifePercent(m5)<60.)and(PW7(IB,$D00F6,1093809990,m5))))
elseif((not IsUnitType(m5,UNIT_TYPE_STRUCTURE))and(GetHeroLevel(IB)>9)and(GetUnitManaPercent(IB)>60.)and(GetUnitLifePercent(m5)<75.))then
set J4=(P87(400.,m5,Condition(function Ki))>2)and(PW7(IB,$D00D8,1093809991,m5))
endif
endif
set GZ[32+O5]=false
set IB=null
set m5=null
set b5=null
endfunction
function QDF takes nothing returns boolean
return((GetSpellTargetUnit()!=null)and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit())))and(GetPlayerController(GetOwningPlayer(GetSpellTargetUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function QEF takes nothing returns boolean
return((IsUnitType(GetAttacker(),UNIT_TYPE_HERO))and(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker())))and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))!=null
endfunction
function QFF takes nothing returns nothing
local unit it
local unit IVF
local integer i1
local integer O5
local boolean QGF
local boolean J4
local real kl
set LP4="QFF"
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)then
set it=GetTriggerUnit()
set IVF=GetAttacker()
elseif(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT)then
set it=GetSpellTargetUnit()
set IVF=GetTriggerUnit()
else
set it=GetEnumUnit()
set IVF=GetTriggerUnit()
endif
set O5=GetPlayerId(GetOwningPlayer(it))
if((not Jw(it))or(Bz<hq[304+O5]))then
set it=null
set IVF=null
return
endif
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
else
set G0[304+O5]=false
endif
if not G0[304+O5]then
set hq[496+O5]=Bz+1.5
set hq[304+O5]=Bz+1.
set hq[416+O5]=Bz+5.
if((not IsUnitVisible(IVF,GetOwningPlayer(it)))or(eY[32+GetPlayerId(GetOwningPlayer(IVF))]<=2))then
call TriggerSleepAction(.8)
else
call TriggerSleepAction(.2)
endif
if(Bz>hq[480+O5])then
call IUF(it,IVF)
endif
set QGF=(O37(it))
if(not G0[256+O5])and(not OB7(IVF,it))then
call ZPE(it,false)
set it=null
set IVF=null
return
elseif((GetHeroLevel(it)>$D)and(GetUnitLifePercent(it)>75.)and(GetUnitState(IVF,UNIT_STATE_LIFE)<GetUnitState(it,UNIT_STATE_LIFE))and(h4[O5]==null))then
call ZSE(O5,IVF,false,false)
endif
if((OA7(it))and(not QGF)and((GetHeroLevel(it)<6)or((S67(it))and(GetHeroLevel(it)<$A)))and(iU(it))and(h4[O5]!=IVF))then
if((GetUnitCurrentOrder(it)!=$D000F)or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(not S17(GetSpellAbilityId())))or(GetUnitLifePercent(it)<70.))then
call ZPE(it,false)
set it=null
set IVF=null
return
endif
endif
set i1=GetUnitTypeId(it)
endif
if((not is(it))or(not OA7(it)))then
if(OA7(it))then
elseif((i1==1214409837))then
set J4=(GetUnitCurrentOrder(it)==$D0278)and(GetUnitLifePercent(it)<80.)and(PV7(it,$D0012,h9[O5]))
elseif(i1==1160786243)then
set J4=(GetUnitCurrentOrder(it)==$D0079)and(GetUnitLifePercent(it)<50.)and(PV7(it,$D0012,h9[O5]))
elseif(i1==1430466872)then
set J4=(GetUnitCurrentOrder(it)==$D0207)and(GetUnitLifePercent(it)<80.)and(PV7(it,$D0012,h9[O5]))
endif
set it=null
set IVF=null
return
endif
if((QGF)and((GetUnitState(IVF,UNIT_STATE_LIFE)+200.)>GetUnitState(it,UNIT_STATE_LIFE))and(IsUnitInRange(it,IVF,500.)))then
if(not J4)and((PD7(it,SU[P1])))and((GetUnitLifePercent(it)<40)or(h4[O5]!=IVF))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[D44]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[R3]))and(GetUnitLifePercent(IVF)<40)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[N3]))and(R47(GetHandleId(GetOwningPlayer(IVF)),"AI|Class")<=2)and(GetUnitLifePercent(it)<40)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[DO4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PD7(it,SU[DQ4])and(Bz>TB4[$F0+O5])and(BI8(IVF)==false)and(XT7(IVF)==false))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PM7(it,SU[C0]))then
set J4=(PQ7(it,IVF))
endif
if(not J4)and((PD7(it,SU[LL])or PD7(it,SU[D1]))and(GetItemCharges(bj_lastCreatedItem)>0))and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,IVF,false,false)==0)then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,IVF))
endif
if(not J4)and(PM7(it,SU[X0]))and(GetUnitTypeId(it)!=1164277357)then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
endif
if((not J4)and(IsUnitInRange(it,IVF,500.))and((GetUnitAbilityLevel(IVF,1110454329)>0)or(GetUnitAbilityLevel(IVF,1110454597)>0)or(GetUnitAbilityLevel(IVF,1110454338)>0)or(GetUnitAbilityLevel(IVF,1110454608)>0)))then
set J4=ZNE(it,IVF,false)
if(not J4)then
if(not J4)and((PD7(it,SU[P1])))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[D44]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[R3]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[DO4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PM7(it,SU[C0]))then
set J4=(PQ7(it,IVF))
endif
if(not J4)and((PD7(it,SU[LL])or PD7(it,SU[D1]))and(GetItemCharges(bj_lastCreatedItem)>0))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
endif
endif
if(not J4)and(R47(GetHandleId(GetOwningPlayer(IVF)),"AI|Class")<=2)and(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(h4[O5]!=null or(GetUnitLifePercent(it)<30))then
if(not J4)and(PD7(it,SU[DZ4]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PD7(it,SU[E54]))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(not J4)and(PD7(it,SU[ZL]))then
set TZ4=true
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and(PD7(it,SU[N3]))and((h4[O5]==IVF)or(GetUnitLifePercent(it)<70))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,IVF)
endif
if(i1==1429221424)and(Bz>TB4[48+O5]+4.)then
set J4=PC7(it,$D022E,1093815119)
endif
endif
if(J4)then
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set J4=((QGF)or(GetUnitAbilityLevel(IVF,1110454329)>0)or(GetUnitAbilityLevel(IVF,1110454597)>0)or(GetUnitAbilityLevel(IVF,1110454338)>0)or(GetUnitAbilityLevel(IVF,1112433522)>0)or(GetUnitAbilityLevel(IVF,1110454608)>0))and(IsUnitInRange(it,IVF,550.))and(PC7(it,$D0265,1093747028))
elseif(i1==1162032951)then
set J4=(QGF)and(((GetUnitAbilityLevel(it,1093679152)>0)and(IsUnitInRange(it,IVF,450.)))or((GetUnitAbilityLevel(it,1093752154)>0)and(IsUnitInRange(it,IVF,780.))))and(PY7(it,$D022F,1093679152,1093752154,IVF))
elseif(i1==1160785972)then
set J4=(QGF)and(IssueImmediateOrderById(it,$D00A1))
elseif((i1==1162032181)or(i1==1164207469)or(i1==1429221451)or(i1==1430466609))then
set J4=(QGF)and(GMF(it))
elseif(i1==1429221424)then
set J4=(QGF)and(IsUnitInRange(it,IVF,400.))and(PW7(it,$D024B,1093687351,IVF))
if((not J4)and(QGF)and(GetHeroLevel(it)>$F)and(GetUnitLifePercent(it)<20.))then
set GZ[O5]=true
set J4=J8(O5,PC7(it,$D00A1,1093679445))
endif
elseif(i1==1430468913)then
if(QGF)then
set J4=(IsUnitInRange(IVF,it,300.))and(PC7(it,$D009F,1093810507))
else
set J4=((IsUnitInRange(it,IVF,500.))and(PW7(it,$D00B5,1093677876,IVF)))or((IsUnitInRange(IVF,it,300.))and(PC7(it,$D009F,1093810507)))
endif
elseif(i1==1430467634)then
set J4=(QGF)and(IsUnitInRange(it,IVF,500.))and(PY7(it,$D0267,1093684565,1093681458,IVF))
elseif(i1==1313026096)then
set J4=(QGF)and(IsUnitInRange(it,IVF,450.))and(PW7(it,$D007F,1095267426,IVF))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if(GetUnitLifePercent(IVF)>(GetUnitLifePercent(it)+35.))then
set J4=(IsUnitInRange(it,IVF,350.))and(PW7(it,$D00DD,1093678929,IVF))
endif
elseif(i1==1164666213)then
set J4=((IsUnitInRange(IVF,it,300.))and(IssueImmediateOrderById(it,$D00D1)))or((IsUnitInRange(IVF,it,500.))and(PC7(it,$D0272,1093677877)))
elseif(i1==1433168227)then
set J4=((QGF)and(IsUnitInRange(it,IVF,500.))and(PW7(it,$D0102,1093678918,IVF)))or((GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(PW7(it,$D0101,1093679186,IVF)))
elseif(i1==1430466872)then
set J4=(QGF)and(((IsUnitInRange(it,IVF,450.))and(PW7(it,$D0216,1093684558,IVF)))or((IsUnitInRange(it,IVF,350.))and(PW7(it,$D024B,1093687349,IVF))))
elseif(i1==1162032439)then
set J4=(IsUnitInRange(it,IVF,350.))and(PW7(it,$D02BD,1093744435,IVF))
elseif(i1==1430468144)then
set J4=(QGF)and((IsUnitInRange(it,IVF,500.))and(PW7(it,$D00DD,1093679192,IVF)))or((IsUnitInRange(it,IVF,860.))and(R47(GetHandleId(it),"Level")>GetUnitAbilityLevel(it,1093750337))and(GetUnitManaPercent(it)>35.)and(GetHeroLevel(it)>3)and(IssueTargetOrderById(it,$D0118,IVF)))
elseif((i1==1429221432)or(i1==1160786229))then
set J4=(QGF)and(IsUnitInRange(it,IVF,1000.))and(PC7(it,$D00D4,1093679411))
elseif(i1==1429221441)then
set J4=(QGF)and(IsUnitInRange(it,IVF,450.))and(PW7(it,$D0107,1093678389,IVF))
elseif(i1==1165451634)then
set J4=(QGF)and(((IsUnitInRange(it,IVF,350.))and(PW7(it,$D02B6,1093687629,IVF)))or(GMF(it)))
elseif(i1==1432642913)then
set J4=((GetHeroLevel(it)>5)or(GetUnitLifePercent(it)<60.))and(IssueTargetOrderById(it,$D0097,it))
elseif(i1==1215722344)then
set J4=(QGF)and(IsUnitInRange(it,IVF,500.))and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(ND7(GetUnitTypeId(IVF),5))and(PW7(it,$D02BC,1093682499,IVF))
elseif(i1==1432510828)then
set J4=((OWF(it)>30.)and(PC7(it,$D0278,1093682004)))or((GetUnitState(it,UNIT_STATE_MANA)>350.)and(IsUnitType(IVF,UNIT_TYPE_HERO))and(IssuePointOrderById(it,$D02B6,GetUnitX(IVF),GetUnitY(IVF))))or((QGF)and(IssueImmediateOrderById(it,$D00A1)))
if((not J4)and(not QGF)and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED))then
set h4[288+O5]=IVF
set J4=IssueImmediateOrderById(it,$D00A1)
endif
elseif(i1==1429221446)then
set J4=(not QGF)and(ZKE(it,IVF))
elseif(i1==1332963428)then
set J4=(IsUnitInRange(it,IVF,450.))and(((QGF)and(PW7(it,$D0103,1093678169,IVF)))or((GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(kq(GetUnitTypeId(IVF)))and(PW7(it,$D007F,1093816137,IVF)))or((GetUnitLifePercent(it)<90.)and(PW7(it,$D0097,1093683019,IVF))))
elseif(i1==1332109682)then
set J4=(QGF)and(IsUnitInRange(it,IVF,600.))and(PC7(it,$D026C,1093810505))
elseif(i1==1160786241)then
set J4=(QGF)and(IsUnitInRange(it,IVF,550.))and(PW7(it,$D0097,1093684813,IVF))
elseif(i1==1429221456)then
set J4=(QGF)and(IsUnitInRange(it,IVF,500.))and(PW7(it,$D0097,1093685066,IVF))
elseif(i1==1430468406)then
set J4=(QGF)and(IsUnitInRange(it,IVF,600.))and(IssueImmediateOrderById(it,$D024C))
elseif(i1==1160786242)then
if(QGF)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093683287,true)
set J4=(IsUnitInRange(it,IVF,500.))and(IssueTargetOrderById(it,$D02B6,IVF))
endif
elseif((i1==1211117641)or(i1==1211117642))then
set J4=(QGF)and(IsUnitInRange(it,IVF,600.))and(O5F(it,IVF))
elseif(i1==1311781207)then
set J4=(((GetHeroLevel(it)>2)or(QGF))and(GetUnitLifePercent(it)<85.)and(IssueTargetOrderById(it,$D0105,it)))or((GetHeroLevel(it)>$A)and(QGF)and(GetUnitAbilityLevel(it,1093685078)==0)and(IssueTargetOrderById(it,$D0238,it)))or((QGF)and(IsUnitInRange(it,IVF,500.))and(PW7(it,$D007F,1093684817,IVF)))
elseif(i1==1311780946)then
set J4=(QGF)and(IsUnitInRange(it,IVF,550.))and(PW7(it,$D0208,1093685825,IVF))
elseif(i1==1211117624)then
set J4=(QGF)and(IsUnitInRange(it,IVF,550.))and(IssueTargetOrderById(it,$D0278,IVF))
elseif(i1==1315988077)then
set J4=((QGF)and((PC7(it,$D026A,1093684561))or((IsUnitInRange(it,IVF,200.))and(PC7(it,$D0080,1093678669)))))or((not QGF)and(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(IsUnitInRange(it,IVF,500.))and(PW7(it,$D0269,1097032808,IVF)))
elseif(i1==1211117616)then
set J4=(QGF)and(IsUnitInRange(IVF,it,220.))and(PC7(it,$D009F,1093677139))
elseif(i1==1315074670)then
set J4=(ND7(GetUnitTypeId(it),5))and(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(PC7(it,$D009F,1093677139))
elseif(i1==1214345830)then
set J4=((GetUnitLifePercent(it)<70.)and((PW7(it,$D0101,1093679182,it))or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(PW7(it,$D00DA,1093679190,it)))))or((QGF)and(IssueImmediateOrderById(it,$D0277)))
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
set J4=(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and((((IsUnitInRange(it,IVF,250.))and(IssueImmediateOrderById(it,$D00AA))and(IssueTargetOrderById(it,$D000F,IVF)))or((IsUnitInRange(it,IVF,550.))and(IssueImmediateOrderById(it,$D00AB))and(IssueTargetOrderById(it,$D000F,IVF)))))
elseif(i1==1315007329)then
set J4=(QGF)and((IssueImmediateOrderById(it,$D00A1))or((IsUnitInRange(it,IVF,650.))and(IsUnitVisible(it,GetOwningPlayer(IVF)))and(PW7(it,$D00B5,1093681716,IVF))))
elseif(i1==1332898670)then
set J4=(QGF)and(IsUnitInRange(IVF,it,450.))and(PW7(it,$D0216,1093685848,IVF))
elseif(i1==1215723364)then
set J4=(QGF)and((GMF(it))or((IsUnitInRange(IVF,it,450.))and(PW7(it,$D007F,1093677633,IVF))))
elseif(i1==1164799855)then
set J4=((GetUnitLifePercent(it)<70.)and(PC7(it,$D024C,1093677378)))or((IsUnitInRange(IVF,it,600.))and(PW7(it,$D006B,1093682264,IVF)))
elseif(i1==1433105516)then
set J4=(QGF)and(IsUnitInRange(it,IVF,500.))and(IssueTargetOrderById(it,$D02B6,IVF))
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set J4=(not QGF)and(GetUnitManaPercent(IVF)>30.)and(IsUnitInRange(it,IVF,600.))and(PW7(it,$D02B6,1093742680,IVF))
elseif(i1==1164799603)then
set J4=(QGF)and(not IsUnitInRange(it,IVF,200.))and(IsUnitInRange(it,IVF,550.))and(PW7(it,$D00FA,1093808453,IVF))
elseif(i1==1328558160)then
set J4=(QGF)and((GMF(it))or((GetHeroAgi(it,true)<GetHeroStr(it,true))and(IssueTargetOrderById(it,$D02B6,IVF))))
elseif(i1==1430466865)then
set J4=((QGF)and(GMF(it)))or(IsUnitInRange(it,IVF,350.)and(PC7(it,$D009F,1093810508)))
elseif(i1==1212363833)then
set J4=(QGF)and((IssueImmediateOrderById(it,$D0278))or((IsUnitInRange(it,IVF,550.))and(PW7(it,$D007F,1093809220,IVF)))or(PC7(it,$D009B,1093678643)))
elseif(i1==1315070563)then
set J4=(QGF)and((((PD7(it,SU[UW]))or(PD7(it,SU[DF4])))and(not ke(IVF))and(PY7(it,$D007F,1093684529,1093747032,IVF)))or((GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and(not GZ[O5])and(not RG7(it,"Omnislashing"))and(PC7(it,$D00A0,1093678407))))
elseif(i1==1212365106)then
set J4=(QGF)and(((IsUnitInRange(it,IVF,300.))and(PW7(it,$D0079,1093685831,IVF)))or(GMF(it)))
elseif(i1==1214931305)then
set J4=(QGF)and(IsUnitInRange(it,IVF,450.))and(PW7(it,$D00CB,1093678147,IVF))
elseif(i1==1311787088)then
elseif(i1==1211117617)then
set J4=(QGF)and(IsUnitInRange(it,IVF,450.))and((PW7(it,$D02B6,1093744944,IVF))or(PC7(it,$D022E,1093814611)))
elseif(i1==1211117633)then
set J4=(QGF)and((IssueImmediateOrderById(it,$D0278))or((IsUnitInRange(it,IVF,550.))and(PW7(it,$D0269,1093684045,IVF))))
elseif(i1==1432580716)then
set J4=(QGF)and(IsUnitInRange(it,IVF,550.))and(PW7(it,$D0079,1093684300,IVF))
elseif(i1==1333027688)then
set J4=(QGF)and(IsUnitInRange(it,IVF,1000.))and(PW7(it,$D0278,1093686091,IVF))
elseif(i1==1311781185)then
set J4=(GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED)and((not QGF)or(IsUnitInRange(it,IVF,550.)))and(IssueTargetOrderById(it,$D02B6,IVF))
elseif(i1==1211117643)then
if((GetUnitLifePercent(it)<20.)or(GetUnitState(it,UNIT_STATE_LIFE)<150.))then
set GZ[O5]=true
set J4=J8(O5,(IsUnitInRange(it,IVF,400.))and(PW7(it,$D0048,1093678658,IVF)))
endif
elseif(i1==1215130471)then
set J4=(QGF)and(IsUnitInRange(it,IVF,550.))and((PW7(it,$D007F,S27(it),IVF))or((GetUnitLifePercent(IVF)<60)and(R87(GetHandleId(it),"AI|Magi2Blast")and PW7(it,$D0278,1093815121,IVF))))
elseif(i1==1214344551)then
if(GetUnitAbilityLevel(it,1110454833)>0)then
set GZ[272+O5]=true
endif
if(not QGF)then
set J4=(GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED)and(PW7(it,$D007F,1093809742,it))
else
set J4=(K6(it))and(IssueTargetOrderById(it,$D0065,it))
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
set h4[16+O5]=QA7(GetHandleId(GetOwningPlayer(it)),"MyBear")
if((h4[16+O5]!=null)and(GetUnitAbilityLevel(it,1093681461)>1)and(not IsUnitInRange(it,h4[16+O5],800.))and(not GZ[288+O5])and(GetUnitLifePercent(h4[16+O5])>30.))then
endif
elseif(i1==1160786000)then
set J4=(QGF)and(IsUnitInRange(it,IVF,1000.))and(PX7(it,$D0264,1093685046,ZR7(it,IVF,2000.,.65,1100.)))
elseif(i1==1311781206)then
set J4=((QGF)and(IssueImmediateOrderById(it,$D020D)))or((IsUnitInRange(it,IVF,400.))and(IssueImmediateOrderById(it,$D0278)))or(((GetUnitLifePercent(IVF)<70.)or(QGF))and(not IsUnitInRange(it,IVF,400.))and(ZME(it,IVF)))
elseif(i1==1160786520)then
set J4=(QGF)and(IsUnitInRange(it,IVF,1000.))and(PW7(it,$D00F6,1093809990,IVF))
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call QFF()
endif
set G0[304+O5]=false
endif
if not G0[304+O5]then
if((not J4)and(iU(it)))then
if((QGF)and(GetUnitLifePercent(IVF)>70.))then
call SJ7(it,false)
elseif((GetHeroLevel(it)>5)and(G0[$80+O5])and((GetUnitLifePercent(it)>80.)or(GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(IVF,UNIT_STATE_LIFE)))and(IsUnitInRange(it,IVF,800.))and(GetUnitCurrentOrder(it)!=$D0012))then
call IssueTargetOrderById(it,$D000F,IVF)
elseif((GetHeroLevel(it)<6)and(GetUnitLifePercent(IVF)>60.)and(((not IsUnitInRange(it,IVF,300.))and(S67(it)))or((IsUnitInRange(it,IVF,300.))and(not S67(it)))))then
set kl=Atan2(GetUnitY(h9[16+O5])-GetUnitY(it),GetUnitX(h9[16+O5])-GetUnitX(it))
call IssuePointOrderById(it,$D0012,GetUnitX(it)+300.*Cos(kl),GetUnitY(it)+300.*Sin(kl))
endif
endif
if((hq[656+O5]>Bz)and(GetUnitLifePercent(it)<65.))then
call SJ7(it,false)
endif
if((J4)or(not is(it)))then
set hq[304+O5]=.0
endif
endif
set it=null
set IVF=null
endfunction
function G0F takes nothing returns nothing
local unit it=GetEnumUnit()
local integer i1=GetUnitTypeId(GetEnumUnit())
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
local real kl=Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it))
local real X47
set LP4="G0F"
if(PD7(it,SU[QW]))then
if(kJ(GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+500.*Cos(kl),GetUnitY(it)+500.*Sin(kl))
endif
call UnitUseItemPointLoc(it,PH7(it,SU[QW]),HB)
elseif(i1==1162032181)then
set X47=I2R(350+($C8*GetUnitAbilityLevel(it,1093684299)))
if(kJ(GetUnitX(it)+X47*Cos(kl),GetUnitY(it)+X47*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+X47*Cos(kl),GetUnitY(it)+X47*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+(X47-100.)*Cos(kl),GetUnitY(it)+(X47-100.)*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif((i1==1430466609)or(i1==1164207469))then
if(kJ(GetUnitX(it)+800.*Cos(kl),GetUnitY(it)+800.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+800.*Cos(kl),GetUnitY(it)+800.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D022D,HB)
elseif(i1==1429221451)then
set X47=I2R(280+(100*GetUnitAbilityLevel(it,1093678671)))
if(kJ(GetUnitX(it)+X47*Cos(kl),GetUnitY(it)+X47*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+X47*Cos(kl),GetUnitY(it)+X47*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+(X47-100.)*Cos(kl),GetUnitY(it)+(X47-100.)*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif(i1==1328558160)then
if(kJ(GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+450.*Cos(kl),GetUnitY(it)+450.*Sin(kl))
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093682766,true)
call IssuePointOrderByIdLoc(it,$D00FA,HB)
elseif(i1==1311781206)then
set GZ[O5]=true
call J8(O5,PC7(it,$D00A1,1093684302))
elseif(i1==1211119409)then
set GZ[O5]=true
call J8(O5,PC7(it,$D0278,1093749303))
elseif(i1==1211117651)then
if(kJ(GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl)))then
call MoveLocation(HB,GetUnitX(it)+700.*Cos(kl),GetUnitY(it)+700.*Sin(kl))
else
set kl=GetRandomReal(.0,6.28)
call MoveLocation(HB,GetUnitX(it)+550.*Cos(kl),GetUnitY(it)+550.*Sin(kl))
endif
call IssuePointOrderByIdLoc(it,$D00FA,HB)
else
call GMF(it)
endif
call NX7(1.)
if N37(it,h9[O5])<400 then
call PV7(it,$D000F,h8[O5])
else
call PV7(it,$D0012,h9[O5])
endif
set it=null
endfunction
function QHF takes nothing returns boolean
local unit it=GetEnumUnit()
local integer i1=GetUnitTypeId(GetEnumUnit())
local player pl=GetOwningPlayer(GetEnumUnit())
local location b5=HC[16+GetPlayerId(pl)]
local unit m5=null
local boolean J4=false
local integer QIF
local integer UP
local integer O5=GetPlayerId(pl)
set LP4="QHF"
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
else
set G0[304+O5]=false
endif
if(not OY7(it))and(OZ7(it))then
return true
endif
if((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
set m5=P47(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(PC7(it,$D0265,1093747028))
elseif(i1==1160785972)then
set J4=IssueImmediateOrderById(it,$D00A1)
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitState(it,UNIT_STATE_MANA)>350.))then
set m5=P47(500.,b5,Condition(function KD))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(PW7(it,$D0062,1093678161,m5))
endif
elseif((i1==1162032181)or(i1==1164207469)or(i1==1212365106)or(i1==1429221451)or(i1==1311781206))then
set J4=GMF(it)
elseif(i1==1429221424)then
if(not kD(it))then
set m5=P47(400.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D024B,1093687351,m5))
endif
if((GetHeroLevel(it)>10.)and(GetUnitLifePercent(it)<30.)and(P77(700.,b5,Condition(function Kn))>0))then
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),PC7(it,$D00A1,1093679445))
endif
elseif(i1==1432646245)then
if(not AW7())then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D007F,1093677640,m5))
endif
elseif(i1==1430466609)then
set J4=GMF(it)
if(not J4)then
set m5=P47(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D022F,1093685559,m5))
endif
elseif(i1==1160786502)then
set J4=GMF(it)
elseif(i1==1429221443)then
set UP=GetUnitAbilityLevel(it,1093686103)
if(UP==1)then
set m5=P47(250.,PU7(it),Condition(function U07))
else
set m5=P47(250.,PU7(it),Condition(function U57))
endif
set J4=(m5!=null)and(PV7(it,$D0012,m5))and(PW7(it,$D0278,1093686103,m5))
if(not J4)then
set J4=(hq[$F0+GetPlayerId(pl)]<=Bz)and(PC7(it,$D0131,1093686322))
endif
elseif(i1==1430468913)then
set J4=(P77(300.,b5,Condition(function k6))>0)and(PC7(it,$D009F,1093810507))
if((not J4)and(O37(it)))then
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),PC7(it,$D0084,1093678403))
endif
elseif(i1==1430467634)then
set b5=kk(it,400.,h9[GetPlayerId(pl)])
if(b5!=null)then
call SetPlayerAbilityAvailable(pl,1093750608,true)
set GZ[GetPlayerId(pl)]=true
set J4=J8(GetPlayerId(pl),IssuePointOrderByIdLoc(it,$D0208,b5))
endif
set b5=HC[16+GetPlayerId(pl)]
elseif(i1==1313026096)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D007F,1095267426,m5))
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
set bj_lastLoadedUnit=it
set IM4=null
set IN4=null
set L84=GetUnitLifePercent(it)+10.
set L94=GetUnitLifePercent(it)+10.
call P47(700.,b5,Condition(function TL7))
if IM4!=null then
set m5=IM4
else
set m5=IN4
endif
set J4=(m5!=null)and(PW7(it,$D00DD,1093678929,m5))
elseif(i1==1430466872)then
set m5=P47(400.,b5,Condition(function Kn))
set J4=(m5!=null)and((PW7(it,$D024B,1093687349,m5))or(PW7(it,$D0216,1093684558,m5))or(PQ7(it,m5)))
elseif(i1==1162032439)then
set m5=P47(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D02BD,1093744435,m5))
elseif(i1==1430468144)then
set m5=P47(600.,b5,Condition(function Kn))
if((m5!=null)and(PD7(it,SU[DQ4]))and(BI8(m5)==false)and(XT7(m5)==false))then
set J4=UnitUseItemTarget(it,PH7(it,SU[DQ4]),m5)
endif
if(not J4)then
set J4=(m5!=null)and(PW7(it,$D00DD,1093679192,m5))or((IsUnitInRange(it,m5,860.))and(R47(GetHandleId(it),"Level")>GetUnitAbilityLevel(it,1093750337))and(IssueTargetOrderById(it,$D0118,m5)))
endif
elseif(i1==1429221441)then
if(not J4)then
set m5=P47(550.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0107,1093678389,m5))
endif
elseif(i1==1165451634)then
set J4=GMF(it)
if(not J4)then
set m5=P47(450.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D02B6,1093687629,m5))
endif
elseif(i1==1432510828)then
if(GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D00A1)
call PV7(it,$D0012,PL7(it))
endif
if(not J4)then
set m5=P47(1200.,b5,Condition(function k6))
set J4=((OWF(it)>30.)and(P77(900.,b5,Condition(function Kn))>0)and(PC7(it,$D0278,1093682004)))or((m5!=null)and(GetUnitState(it,UNIT_STATE_MANA)>350.)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))))or(IssueImmediateOrderById(it,$D00A1))
endif
elseif(i1==1429221446)then
set J4=(GetUnitAbilityLevel(it,1110454868)>0)and(IssueImmediateOrderById(it,$D00D2))
elseif(i1==1429221445)then
set J4=PC7(it,$D022E,1093678422)
elseif(i1==1332963428)then
set m5=P47(600.,b5,Condition(function k8))
set J4=(m5!=null)and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0)and(PW7(it,$D0103,1093678169,m5))
if(not J4)then
if(m5==null)then
set m5=P47(500.,b5,Condition(function k8))
endif
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(PW7(it,$D0097,1093683019,m5))
endif
elseif(i1==1332109682)then
set m5=P47(700.,b5,Condition(function Kn))
set J4=((m5!=null)and(PW7(it,$D02B6,1093678134,m5)))or((GetHeroLevel(it)>5)and(Bz>hq[16+GetPlayerId(pl)])and(Kz(600.,b5)>1)and(PC7(it,$D026C,1093810505)))
elseif(i1==1211117640)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0206,1093681989,m5))
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(PQ7(it,m5))
endif
elseif(i1==1160786241)then
call SetPlayerAbilityAvailable(pl,1093684805,true)
set m5=P47(700.,b5,Condition(function Kn))
set J4=((m5!=null)and(PW7(it,$D0097,1093684813,m5)))or((GetUnitAbilityLevel(it,1110455882)==0)and(IssueImmediateOrderById(it,$D00D1)))
elseif(i1==1429221456)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0097,1093685066,m5))
elseif(i1==1160786243)then
set J4=IssueTargetOrderById(it,$D0118,it)
elseif(i1==1160786505)then
set J4=IssueImmediateOrderById(it,$D0272)
elseif(i1==1160786242)then
call SetPlayerAbilityAvailable(pl,1093683287,true)
set m5=P47(900.,b5,Condition(function Kn))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
elseif((i1==1211117641)or(i1==1211117642))then
set m5=P47(550.,b5,Condition(function Kn))
set J4=(m5!=null)and(O5F(it,m5))
elseif(i1==1311781207)then
set J4=(IssueTargetOrderById(it,$D0105,it))or((GetUnitAbilityLevel(it,1093685078)==0)and(IssueTargetOrderById(it,$D0238,it)))
elseif(i1==1311780946)then
set J4=(is(it))and(N37(it,PL7(it))>5000.)and(P77(1200.,b5,Condition(function KX))==0)and(OOF(3))
if(not J4)then
set m5=P47(500.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0208,1093685825,m5))
endif
elseif((i1==1211117650)or(i1==1211119433))then
set IM4=it
set J4=(P77(1000.,b5,Condition(function ny))>3)and(IssueTargetOrderById(it,$D02DB,it))
elseif(i1==1211117646)then
set J4=PW7(it,$D0085,1093685815,it)
elseif(i1==1211117624)then
set m5=P47(600.,b5,Condition(function k6))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0278,m5))
elseif(i1==1160785973)then
if((GetHeroLevel(it)>5)and(Bz>hq[GetPlayerId(pl)]))then
set m5=P47(400.,b5,Condition(function k6))
set J4=(m5!=null)and(O17(m5))and(GetUnitAbilityLevel(m5,1110454580)==0)and(P77(700.,b5,Condition(function KA))<(P77(700.,b5,Condition(function k6))+2))and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1315988077)then
set m5=P47(600.,b5,Condition(function k6))
if(m5!=null)then
set J4=((IsUnitInRange(it,m5,200.))and(PC7(it,$D0080,1093678669)))or((GetHeroLevel(it)>5)and(GetUnitLifePercent(it)<35.)and(PC7(it,$D026A,1093684561)))
endif
elseif(i1==1211117616)then
set J4=(P77(280.,b5,Condition(function k6))>0)and(PC7(it,$D009F,1093677139))
elseif(i1==1211117617)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D02B6,1093744944,m5))
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
if(i1==1215063922)then
set UP=$FA
else
set UP=400
endif
set m5=P47(I2R(UP),b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D007F,1093681490,m5))
elseif(i1==1214345830)then
set J4=PW7(it,$D0101,1093679182,it)
elseif((i1==1315007329)or(i1==1332179560))then
set J4=IssueImmediateOrderById(it,$D00A1)
if((not J4)and(i1==1315007329)and(GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110455858)==0))then
set m5=P47(750.,b5,Condition(function k6))
set J4=(m5!=null)and(PW7(it,$D00B5,1093681716,m5))
endif
elseif(i1==1211117653)then
if((GetUnitAbilityLevel(it,1110456408)==0))then
set J4=((Bz>TB4[80+GetPlayerId(pl)])and W27(it,A14,A14,A04,1093687372)and(W67(it,A04,A04,A04,false))and(IssueImmediateOrderById(it,$D00A1)))
if(not J4 and(Bz>TB4[80+GetPlayerId(pl)])and(GetUnitLevel(it)>5))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),YS[4],true)
set J4=(IssueImmediateOrderById(it,$D00A1))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),YS[4],false)
endif
if(not J4)then
set m5=P47(500.,b5,Condition(function k6))
set J4=(m5!=null)and(W27(it,A14,A14,A54,1093686864))and(IssueImmediateOrderById(it,$D00A6))
endif
elseif((GetUnitAbilityLevel(it,1110456408)>0))then
set QIF=WT7(1215128178,it)
if((QIF>0)and(OA7(G7[QIF]))and((Bz>hq[QIF])or((hq[QIF]-Bz)>.0)and((hq[QIF]-Bz)<60.))and((GetUnitAbilityLevel(G7[QIF],1093810503)>0)or(GetUnitAbilityLevel(G7[QIF],1093810504)>0)))then
set UP=GetUnitAbilityLevel(G7[QIF],1093810503)
if(UP==0)then
set UP=GetUnitAbilityLevel(G7[QIF],1093810504)
set QIF=350+(UP*100)
else
set QIF=$AA+(UP*100)
endif
if((GetUnitState(it,UNIT_STATE_LIFE)>QIF)and(GetUnitAbilityLevel(it,1093808472)<6))then
set J4=(N37(it,PL7(it))<5900.)and(P77(1400.,b5,Condition(function KX))==0)and(IssueImmediateOrderById(it,A04))
endif
elseif(WT7(1164799603,it)>0 or WT7(1160786242,it)>0)then
else
set J4=(GetUnitAbilityLevel(it,1093808472)<6)and(P77(1700.,b5,Condition(function KX))==0)and(IssueImmediateOrderById(it,A04))
endif
endif
elseif(i1==1332898670)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0216,1093685848,m5))
elseif(i1==1215723364)then
set J4=GMF(it)
if(not J4)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D007F,1093677633,m5))
endif
elseif(i1==1164799855)then
set J4=PC7(it,$D024C,1093677378)
if(not J4)then
set m5=P47(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D006B,1093682264,m5))
endif
elseif(i1==1433105516)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D02B6,m5))
elseif(i1==1164666213)then
set m5=P47(600.,b5,Condition(function Kn))
if(GetHeroLevel(it)>=6)then
set J4=(P77(400.,b5,Condition(function Kn))>0)
if not RG7(it,"AI|PulseNova")then
if(J4)then
call SetPlayerAbilityAvailable(Player(O5),1093808455,true)
call PC7(it,$D0084,1093808454)
call TriggerSleepAction(.1)
endif
else
if(not J4)then
call PC7(it,$D0084,1093808456)
call TriggerSleepAction(.1)
endif
endif
endif
if(m5!=null)then
call MoveLocation(HA,GetUnitX(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+(90.+(25*GetUnitAbilityLevel(it,1093678679)))*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
set J4=PX7(it,$D0100,1093678679,HA)
endif
elseif(i1==1164799603)then
set J4=(is(it))and(N37(it,PL7(it))>5000.)and(P77(1200.,b5,Condition(function KX))==0)and(OOF(3))
if(not J4)then
set m5=P47(650.,b5,Condition(function Kn))
set J4=(m5!=null)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600))and(PW7(it,$D00FA,1093808453,m5))
endif
elseif(i1==1328558160)then
if((GetUnitAbilityLevel(it,1093684056)>0))then
if(IsTriggerEnabled(Q67(GetHandleId(pl),"MorphAgi")))then
call IssueImmediateOrderById(it,$D0246)
elseif(not IsTriggerEnabled(Q67(GetHandleId(pl),"MorphStr")))then
call IssueImmediateOrderById(it,$D0242)
endif
set G0[32+GetPlayerId(pl)]=true
endif
set J4=GMF(it)
elseif(i1==1212363833)then
set m5=P47(750.,PU7(it),Condition(function k6))
set UP=RT7(H9)
if(m5!=null and(UP>1 or GetUnitLifePercent(it)<30.))then
set J4=(GetHeroLevel(it)>5)and(IssueImmediateOrderById(it,$D0278))
endif
if(not J4)and(m5!=null and UP==1)then
set J4=PW7(it,$D007F,1093809220,m5)
endif
elseif(i1==1214931305)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D00CB,1093678147,m5))
elseif(i1==1429221430)then
set m5=P47(600.,b5,Condition(function Kn))
if(not J4)and(m5!=null)and(P77(1500.,b5,Condition(function KR))==0)and(N37(it,IY4)>$5DC)and(N37(it,JZ4)>$5DC)then
set J4=PX7(it,$D0100,1093681735,b5)
endif
elseif(i1==1328558389)then
set m5=P47(1600.,b5,Condition(function Kn))
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(IsUnitInRange(it,m5,1600.))and(GetUnitLifePercent(m5)<33.))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5)))
endif
if((GetUnitLifePercent(it)<80.)or(GetUnitManaPercent(it)<60.))then
call PV7(it,$D0012,PL7(it))
call NX7(2.)
call PV7(it,$D0012,PL7(it))
endif
elseif(i1==1160786506)then
set m5=P47(800.,b5,Condition(function Kn))
set QIF=GetPlayerId(GetOwningPlayer(it))
set UD4[QIF]=true
if(m5!=null)then
set J4=(NW7(QIF))and(J8(QIF,IssuePointOrderByIdLoc(it,$D0079,ZT7(it,m5,1.2,900))))
endif
if(not(J4))then
set UP=GetUnitAbilityLevel(it,1093751639)
set m5=P47(2200.-(UP*400),b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0097,1093751639,m5))
endif
set UD4[QIF]=false
if((GetUnitLifePercent(it)<80.)or(GetUnitManaPercent(it)<60.))then
call PV7(it,$D0012,PL7(it))
call NX7(2.)
call PV7(it,$D0012,PL7(it))
endif
elseif(i1==1311787088)then
set m5=P47(700.,b5,Condition(function Kn))
set J4=(m5!=null)and((GetUnitState(it,UNIT_STATE_LIFE))>(GetUnitState(it,UNIT_STATE_MAX_LIFE)/2.8))and(PW7(it,$D0278,1093750087,m5))
elseif(i1==1211117633)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=((m5!=null)and(PW7(it,$D0269,1093684045,m5)))or((P47(900.,b5,Condition(function Kn))!=null)and(GetUnitLifePercent(it)<35.)and(IssueImmediateOrderById(it,$D0278)))
elseif(i1==1432580716)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0079,1093684300,m5))
elseif(i1==1333027688)then
set m5=P47(1000.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0278,1093686091,m5))
elseif(i1==1211117643)then
set m5=VY7(700.,it)
if(m5!=null)and(GetWidgetLife(it)<50.)then
set J4=PW7(it,$D0048,1093678658,it)
elseif((m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,700.))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and((GetUnitLifePercent(it)<50.)or(GetHeroLevel(it)<8))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(300+(120*GetUnitAbilityLevel(it,1093678658)))))then
set J4=PW7(it,$D0048,1093678658,it)
endif
if(not J4)and(GetUnitLifePercent(it)<35.)then
set m5=P47(350.,b5,Condition(function k6))
if((m5!=null)and((GetUnitLifePercent(it)<20.)or(P77(350.,b5,Condition(function k6))>1)))then
set J4=PW7(it,$D0048,1093678658,m5)
endif
if((not J4)and(GetUnitLifePercent(it)<20.)and(GetUnitState(it,UNIT_STATE_LIFE)<150.)and(P77(600.,b5,Condition(function k6))>0))then
set J4=PW7(it,$D0048,1093678658,it)
endif
endif
elseif(i1==1211119409)then
set QIF=GetPlayerId(GetOwningPlayer(it))
set UD4[QIF]=true
set J4=IssueImmediateOrderById(it,$D00A1)or(PC7(it,$D0278,1093749303))
set UD4[QIF]=false
elseif(i1==1215657064)then
set J4=(P77(320.,b5,Condition(function k6))>0)and(PC7(it,$D0080,1093677913))
elseif(i1==1215130471)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and((PW7(it,$D0085,T47(it),m5))or(PW7(it,$D02B6,S_7(it),m5))or(PW7(it,$D007F,S27(it),m5))or(R87(GetHandleId(it),"AI|Magi2Blast")and PW7(it,$D0278,1093815121,m5)))
elseif(i1==1214344551)then
if((GetUnitAbilityLevel(it,1110454833)==0)and(P77(900.,b5,Condition(function VU7))>0)and(OV7(it)))then
if(not K6(it))then
call MoveLocation(HC[$F0+GetPlayerId(pl)],.0,.0)
call SetRect(He,GetUnitX(it)-600.,GetUnitY(it)-600.,GetUnitX(it)+600.,GetUnitY(it)+600.)
set hr=it
call EnumDestructablesInRect(He,Q54,function OGF)
if(GetLocationX(HC[$F0+GetPlayerId(pl)])!=.0)then
set J4=IssuePointOrderByIdLoc(it,$D0012,HC[$F0+GetPlayerId(pl)])
call MoveLocation(HC[$F0+GetPlayerId(pl)],.0,.0)
else
set J4=PV7(it,$D0012,h9[GetPlayerId(pl)])
endif
else
set J4=IssueTargetOrderById(it,$D0065,it)
endif
endif
elseif(i1==1160786000)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PX7(it,$D0264,1093685046,ZR7(it,m5,2000.,.65,1100.)))
elseif(i1==1311781193)then
set J4=PC7(it,$D02B7,1095656306)
elseif(i1==1211117651)then
set m5=P47(900.,b5,Condition(function k6))
set J4=(((m5==null)or(not IsUnitInRange(it,m5,250.)))and(GMF(it)))or((m5!=null)and(PW7(it,$D00DA,1093685814,it)))
elseif(i1==1211117649)then
set J4=IssueTargetOrderById(it,$D007F,it)
elseif(i1==1160786265)then
set J4=IssueImmediateOrderById(it,$D022E)
elseif(i1==1311780930)then
call SetPlayerAbilityAvailable(pl,1093686082,true)
if(PM4[GetPlayerId(pl)]==null)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(PL7(it))-GetUnitY(it),GetUnitX(PL7(it))-GetUnitX(it)))
set h4[16+GetPlayerId(pl)]=it
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(it)+150.*Cos(i1*bj_DEGTORAD),GetUnitY(it)+150.*Sin(i1*bj_DEGTORAD))
if J4 then
call NX7(.3)
call PC7(it,$D0222,1093686082)
endif
endif
elseif(i1==1211119187)then
set m5=P47(950.,b5,Condition(function Kn))
if(not J4)and(Bz>TB4[32+O5])and(m5!=null)and(N37(it,m5)<350+GetUnitAbilityLevel(it,1093742926)*$96)then
set J4=IssueTargetOrderById(it,$D0265,m5)
endif
if(not J4)and(Bz>TB4[16+O5])and(m5!=null)then
if ZT7(it,m5,2.,1500.)!=null then
set J4=PX7(it,$D0079,1093743414,DF7)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if(not J4)and(Bz>TB4[32+O5])then
set IM4=it
set UP=P77(1000.,PU7(it),Condition(function ny))
set J4=(UP>=3)and(GetUnitLifePercent(it)<75.)and(IssueTargetOrderById(it,$D02BD,it))
endif
elseif(i1==1311786311)then
if(not J4)and(Bz>TB4[48+O5])then
set J4=PC7(it,$D022E,1093743689)
endif
if(not J4)and(Bz>TB4[32+O5])then
set m5=P47(950.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0097,1093743178,m5))
endif
elseif(i1==1211117643)then
if(Bz>TB4[16+O5])then
set m5=P47(400.,b5,Condition(function Kn))
if(m5!=null)and(GetUnitLifePercent(m5)<60.)and(eY[320+O5]>=0)then
set m5=P47(700.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D0136,1093678410,it))
endif
endif
elseif(i1==1211117652)then
set m5=P47(400.,b5,Condition(function Kn))
if(m5!=null)and(Bz>TB4[32+O5])and(N37(it,m5)>200.)then
set J4=(m5!=null)and(IssueImmediateOrderById(it,$D0265))
endif
elseif(i1==1160786510)then
set m5=P47(700.,b5,Condition(function Kn))
if(not J4)and(Bz>TB4[O5])then
if((m5!=null))then
if(GetUnitLifePercent(m5)<50.)and(GetUnitLevel(it)>=6)and(not IsUnitIllusion(m5))then
if ZT7(it,m5,2,1000.)!=null then
set J4=PZ7(it,$D0079,1093751861,1093808949,GetLocationX(DF7),GetLocationY(DF7))
endif
endif
endif
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and(IsUnitInRange(it,m5,400))then
set J4=PC7(it,$D0278,1093751631)
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])then
set J4=PW7(it,$D0097,1093751633,m5)
endif
elseif(i1==1160786504)then
if(m5==null)then
set m5=O27(600.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])then
set J4=PW7(it,$D0097,1093751608,m5)
endif
if(not J4)and(m5!=null)and(Bz>TB4[O5])and(GetUnitLifePercent(it)<25.)then
set J4=PW7(it,$D008F,1093751617,m5)
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])then
set J4=PW7(it,$D0079,1093751618,m5)
endif
elseif(i1==1328558390)then
if(m5==null)then
set m5=O27(600.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[48+O5])then
call PC7(it,$D00D4,1093744986)
call NX7(.1)
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60)or(R47(GetHandleId(m5),"StickyNapalm|Count")>3))and(Bz>TB4[32+O5])then
if(ZR7(it,m5,900,.2,$5DC)!=null)then
set J4=(PX7(it,$D00FA,1093744982,ZY7(DF7,100,MY7(m5,it))))
endif
endif
elseif(i1==1328558406)then
set J4=GMF(it)
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if(m5==null)then
set m5=O27(600.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null)and(Bz>TB4[32+O5]))then
set J4=PW7(it,$D02B6,1093742680,m5)
endif
if((not J4)and(m5!=null)and(i1!=1214409837))then
set L84=MY7(m5,it)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(L84*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(L84*bj_DEGTORAD))
endif
if((not J4)and(Bz>TB4[16+O5])and(i1!=1214409837))then
set L84=MY7(it,h9[O5])
set J4=IssuePointOrderById(it,$D0278,GetUnitX(it)+150.*Cos(L84*bj_DEGTORAD),GetUnitY(it)+150.*Sin(L84*bj_DEGTORAD))
endif
elseif(i1==1430466865)then
if(m5==null)then
set m5=O27(400.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(it)<20 or GZ[$D0+O5]))then
set J4=(PC7(it,$D00C4,1093810508))
endif
elseif(i1==1160786520)then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(PW7(it,$D00F6,1093809990,m5))
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call QHF()
set G0[304+O5]=false
endif
elseif(i1==1311788336)then
set m5=P47(600.,b5,Condition(function Kn))
if(not J4)and(Bz>TB4[16+O5])and(m5!=null)and(P87(400.,it,Condition(function TZ7))<=2)then
set J4=PC7(it,$D022E,1093814323)
endif
if(not J4)and(m5!=null)then
set J4=GMF(it)
endif
if(not J4)and(Bz>TB4[48+O5])and(m5!=null)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif(i1==1160786507)then
set m5=P47(600.,b5,Condition(function Kn))
if(not J4)and(Bz>TB4[32+O5])then
set J4=IssueTargetOrderById(it,$D0118,it)
endif
elseif(i1==1211122767)then
set m5=P47(600.,b5,Condition(function Kn))
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])then
set J4=PC7(it,$D022E,1093814612)
endif
if(not J4)and(m5!=null)and(Bz>TB4[48+O5])then
set J4=PW7(it,$D02BC,1093814350,m5)
endif
elseif(i1==1160786738)then
set m5=P47(600.,b5,Condition(function Kn))
if(not J4)then
if GetUnitAbilityLevel(it,1093813848)==0 then
set L84=GetUnitFacing(it)
set J4=((m5!=null)and(IssuePointOrderById(it,$D00F8,GetUnitX(it)+20*Cos(L84*bj_DEGTORAD),GetUnitY(it)+20*Sin(L84*bj_DEGTORAD))))
else
set bj_lastCreatedUnit=QA7(GetHandleId(it),"AI|ShredChakram")
if(m5==null)or(not IsUnitInRange(it,bj_lastCreatedUnit,400))then
set J4=IssueImmediateOrderById(it,$D00D1)
endif
endif
endif
if(not J4)and(Bz>TB4[32+O5])then
set J4=GMF(it)
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and(IsUnitInRange(it,m5,300))then
set J4=PC7(it,$D022E,1093813835)
endif
endif
if(not G0[304+O5])and(not J4)then
if(not J4)and((PD7(it,SU[QW]))and(Bz>hq[112+GetPlayerId(pl)]))then
set J4=GMF(it)
endif
if(not J4)and(PD7(it,SU[B0]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((PD7(it,SU[DR4]))and(P77(1200.,b5,Condition(function k6))>0))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((PD7(it,SU[P1]))and(GetUnitLifePercent(it)<35.))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[LL])or PD7(it,SU[D1]))and(GetItemCharges(bj_lastCreatedItem)>0)and(GetUnitLifePercent(it)<35.))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[D44]))and(Bz>hq[96+GetPlayerId(pl)]))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[R3])))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[N3])))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[EC])))then
set m5=P47(600.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if(not J4)and((PD7(it,SU[DO4]))and(Bz>TB4[$B0+GetPlayerId(pl)]))then
set m5=P47(500.,b5,Condition(function Kn))
set J4=(m5!=null)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if(not J4)and((PD7(it,SU[R1]))and(not R87(GetHandleId(it),"Mekansm"))and(Bz>hq[80+GetPlayerId(pl)])and(P77(800.,b5,Condition(function k6))>0))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
if(not J4)and((PD7(it,SU[DX4]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>TB4[$E0+GetPlayerId(pl)])and(GetUnitLifePercent(it)<70.))then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,it))
endif
if(not J4)and(PD7(it,SU[DJ4])and(RG7(it,"ArmletOfMordigan|Active"))and(GetUnitLifePercent(it)<50.))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(PO7(it))and(Bz>TB4[$C0+O5]))then
if(GetUnitState(it,UNIT_STATE_LIFE)<$96)or((GetItemCharges(bj_lastCreatedItem)>=8)and(P77(1000.,PU7(it),Condition(function k6))>0)and(GetUnitLifePercent(it)<50 or GetUnitManaPercent(it)<20)and(N37(it,h9[16+O5])>600))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
endif
if(not J4)and(PD7(it,SU[DQ4])and(Bz>TB4[$F0+GetPlayerId(pl)])and(BI8(m5)==false)and(XT7(m5)==false))then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
if((not J4)and(is(it))and(GetUnitAbilityLevel(it,1110454874)==0)and(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitAbilityLevel(it,1110455864)==0)and(GetUnitAbilityLevel(it,1110454347)==0)and(N37(it,PL7(it))>6000.)and(P77(1400.,b5,Condition(function KX))==0))then
if(IsUnitAlly(it,Y7[0]))then
set J4=SQ7(it,IY4)
else
set J4=SQ7(it,JZ4)
endif
endif
endif
set it=null
set pl=null
set b5=null
set m5=null
return J4
endfunction
function QJF takes nothing returns nothing
local unit it=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer i=1
set LP4="QJF"
if((IsUnitType(it,UNIT_TYPE_HERO))and(not IsUnitIllusion(it)))then
if((GetPlayerController(GetOwningPlayer(it))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(it)>.405)and(IsUnitType(it,UNIT_TYPE_DEAD)==false))then
call ExecuteFunc("QKF")
elseif IF4[O5]then
set h4[O5]=null
if((TimerGetRemaining(T[O5])>20.)and(GetPlayerState(Player(O5),PLAYER_STATE_RESOURCE_GOLD)>5000)and(TimerGetElapsed(T[O5])>4.))then
loop
exitwhen NK4[i]==GetEnumUnit()or i>NO4
set i=i+1
endloop
if NK4[i]!=null and GetUnitAbilityLevel(KT4[O5],1093808213)==0 then
call IssueImmediateOrderById(KT4[O5],V9[O5])
endif
endif
endif
elseif((SC7(it))and(GetUnitTypeId(it)!=1852010352)and(OA7(it)))then
set bj_lastLoadedUnit=GetEnumUnit()
call ExecuteFunc("QMF")
endif
set it=null
endfunction
function QNF takes nothing returns boolean
local unit MQ7=GetEnteringUnit()
local integer i=GetUnitTypeId(MQ7)
set LP4="QNF"
if(i==1966092359 or i==1966092361)and IsPlayerInForce(GetOwningPlayer(GetEnteringUnit()),QW4)then
call RemoveGuardPosition(MQ7)
call GroupAddUnit(QL7(GetHandleId(GetOwningPlayer(GetEnteringUnit())),M27(i==1966092359,"ExorG","NAttG")),MQ7)
call IssueImmediateOrderById(MQ7,$D024D)
endif
if not(WQ7(GetOwningPlayer(GetEnteringUnit())))then
set MQ7=null
return false
endif
set bj_lastLoadedUnit=MQ7
if(i==1966092594 or i==1966092595)then
call ExecuteFunc("QOF")
elseif(i==1865429059)or(i==1865429319)or(i==1865429320)or(i==1865429321)then
call IssueTargetOrderById(MQ7,$D0012,G7[GetPlayerId(GetOwningPlayer(MQ7))])
elseif(i==1747993683)then
call QG7(GetHandleId(G7[GetPlayerId(GetOwningPlayer(MQ7))]),"AI|ShredChakram",MQ7)
elseif(SC7(MQ7)and IsUnitType(MQ7,UNIT_TYPE_HERO)==false)then
call IssueTargetOrderById(MQ7,$D0012,G7[GetPlayerId(GetOwningPlayer(MQ7))])
set B_4=false
call ExecuteFunc("QMF")
endif
set MQ7=null
return false
endfunction
function QPF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YQ7=GetHandleId(t)
local integer O5=R47(YQ7,"OwnerPID")
local unit m5=G7[O5]
local unit QQF=null
local string QRF=I2S(R47(YQ7,"famID"))
local integer HTF
local unit it=QA7(YQ7,"unitFamiliar")
local boolean J4=false
local group g=null
local unit u=null
set LP4="QPF"
if(GetTriggerEventId()==EVENT_UNIT_DEATH)then
call RK7(G7[O5],"AIFamiliar"+QRF+"|Status")
call RI7(G7[O5],"AIFamiliar"+QRF+"|Stone")
call FlushChildHashtable(C7,YQ7)
call RN7(t)
call DestroyTrigger(t)
else
set HTF=GetUnitTypeId(it)
if QRF=="1" then
if(HTF==1966092596 or HTF==1966092597 or HTF==1966092598)then
call RK7(m5,"AIFamiliar"+QRF+"|Stone")
else
call RI7(m5,"AIFamiliar"+QRF+"|Stone")
call RK7(m5,"AIFamiliar|CastStone")
endif
elseif QRF=="2" then
if(HTF==1966092612 or HTF==1966092613 or HTF==1966092614)then
call RK7(m5,"AIFamiliar"+QRF+"|Stone")
else
call RI7(m5,"AIFamiliar"+QRF+"|Stone")
call RK7(m5,"AIFamiliar|CastStone")
endif
elseif QRF=="3" then
if(HTF==1966092626 or HTF==1966092627 or HTF==1966092628)then
call RK7(m5,"AIFamiliar"+QRF+"|Stone")
else
call RI7(m5,"AIFamiliar"+QRF+"|Stone")
call RK7(m5,"AIFamiliar|CastStone")
endif
endif
if(GetUnitState(it,UNIT_STATE_LIFE)<.55*($C8+(GetUnitAbilityLevel(m5,1093750341)*100)))then
set J4=IssueImmediateOrderById(it,$D00AA)or IssueImmediateOrderById(it,$D00BB)or IssueImmediateOrderById(it,$D02B0)or IssueImmediateOrderById(it,$D00AB)or IssueImmediateOrderById(it,$D00BC)or IssueImmediateOrderById(it,$D02B1)
if not J4 then
set J4=PV7(it,$D0012,h9[O5])
endif
elseif((N37(it,PL7(m5))<1000.)and(GetUnitLifePercent(it)<98.))then
set J4=(PV7(it,$D0012,PL7(m5)))
elseif(not OA7(m5))then
set J4=PV7(it,$D0012,PL7(m5))
elseif(not IsUnitInRange(it,m5,1200.))then
set J4=IssueTargetOrderById(it,$D0012,m5)
endif
if not J4 then
set m5=null
if GetUnitState(h4[O5],UNIT_STATE_LIFE)>0 then
set m5=h4[O5]
endif
if m5==null then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(G7[O5]),700,Condition(function TV7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(IsUnitEnemy(u,GetOwningPlayer(it))and(IsUnitVisible(u,GetOwningPlayer(it)))or u==null)
endloop
set m5=u
set u=null
endif
call DestroyGroup(g)
endif
set g=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(G7[O5]),700,Condition(function U67))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(IsUnitEnemy(u,GetOwningPlayer(it))or u==null)
endloop
set QQF=u
set u=null
endif
call DestroyGroup(g)
if QQF!=null and m5!=null then
if N37(it,QQF)<N37(it,m5)and m5!=h4[O5]then
set m5=null
endif
endif
if m5!=null then
if(IsUnitInRange(it,m5,250.)and BJ8(m5)==false and IsUnitType(m5,UNIT_TYPE_MAGIC_IMMUNE)==false and RG7(G7[O5],"AIFamiliar|CastStone")==false)then
set J4=IssueImmediateOrderById(it,$D00AA)or IssueImmediateOrderById(it,$D00BB)or IssueImmediateOrderById(it,$D02B0)or IssueImmediateOrderById(it,$D00AB)or IssueImmediateOrderById(it,$D00BC)or IssueImmediateOrderById(it,$D02B1)
if J4 then
call RI7(G7[O5],"AIFamiliar|CastStone")
endif
else
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
endif
if QQF!=null and J4==false then
if GetUnitCurrentOrder(G7[O5])==$D0012 then
set J4=IssueTargetOrderById(it,$D0012,G7[O5])
else
set J4=IssueTargetOrderById(it,$D000F,QQF)
endif
endif
endif
if(not J4)then
if(eY[O5]==$A)then
set J4=PV7(it,$D000F,G7[O5])
else
set J4=IssueTargetOrderById(it,$D0012,G7[O5])
endif
endif
endif
set t=null
set m5=null
set QQF=null
set it=null
set g=null
return false
endfunction
function QSF takes integer NS7,unit QTF returns nothing
local trigger t=null
local integer YW7=0
local string QRF
local integer i1=GetUnitTypeId(QTF)
set LP4="AISetupFamiliar"
if(not((GetPlayerController(GetOwningPlayer(QTF))==MAP_CONTROL_COMPUTER)and(OA7(QTF))))then
return
endif
if((i1==1966092596 or i1==1966092597 or i1==1966092598))then
set QRF="1"
elseif((i1==1966092612 or i1==1966092613 or i1==1966092614))then
set QRF="2"
elseif((i1==1966092626 or i1==1966092627 or i1==1966092628))then
set QRF="3"
else
return
endif
set t=CreateTrigger()
set YW7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,QTF,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,QTF,EVENT_UNIT_SPELL_FINISH)
call TriggerRegisterTimerEvent(t,1.4,true)
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function QPF))
call RI7(G7[NS7],"AIFamiliar"+QRF+"|Status")
call QG7(YW7,"unitFamiliar",QTF)
call Q97(YW7,"OwnerPID",NS7)
call Q97(YW7,"famID",S2I(QRF))
set t=null
endfunction
function QUF takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer YQ7=GetHandleId(t)
local unit YV7=QA7(YQ7,"NinjaScarab")
local unit YU7=QA7(YQ7,"NinjaSummoner")
local unit QVF=GetTriggerUnit()
set LP4="QUF"
if((IsUnitType(QVF,UNIT_TYPE_HERO))and(IsUnitEnemy(QVF,GetOwningPlayer(YU7)))and(IsUnitVisible(QVF,GetOwningPlayer(YU7)))and(not IsUnitIllusion(QVF)))then
call IssueImmediateOrderById(YV7,$D009F)
call RN7(t)
call DestroyTrigger(t)
endif
set t=null
set YV7=null
set YU7=null
set QVF=null
endfunction
function QWF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YQ7=GetHandleId(t)
local unit YU7=QA7(YQ7,"NAScarabOwner")
local unit YV7=QA7(YQ7,"NAScarabUnit")
local unit QXF=null
local unit JX7=null
local unit u=null
local group g=CreateGroup()
set LP4="QWF"
if((GetTriggerEventId()==EVENT_UNIT_DEATH)or(GetUnitState(YU7,UNIT_STATE_LIFE)<=0))then
if((GetUnitState(YV7,UNIT_STATE_LIFE)>0))then
call PV7(YV7,$D0012,PL7(YU7))
else
call FlushChildHashtable(C7,YQ7)
call RN7(t)
call DestroyTrigger(t)
endif
else
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(YV7),700,Condition(function TX7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(YU7))
endloop
set JX7=u
set u=null
endif
call DestroyGroup(g)
if(JX7!=null)then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(YV7),$96,Condition(function TY7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(GetUnitTypeId(u)==1966092594 or GetUnitTypeId(u)==1966092595)
endloop
set QXF=u
set u=null
endif
call DestroyGroup(g)
if(QXF==null)then
set g=CreateGroup()
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(YU7),500,Condition(function TY7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen(GetUnitTypeId(u)==1966092594 or GetUnitTypeId(u)==1966092595)
endloop
set QXF=u
endif
endif
endif
if(JX7!=null and QXF!=null and GetUnitState(JX7,UNIT_STATE_LIFE)>0 and IsUnitVisible(JX7,GetOwningPlayer(YU7)))then
call IssueTargetOrderById(QXF,$D0012,JX7)
call NX7(3)
if((GetUnitState(YV7,UNIT_STATE_LIFE)>0)and(GetUnitCurrentOrder(YV7)!=$D0012))then
call IssueTargetOrderById(YV7,$D0012,YU7)
endif
else
call IssueTargetOrderById(YV7,$D0012,YU7)
endif
endif
call DestroyGroup(g)
set t=null
set QXF=null
set YU7=null
set YV7=null
set JX7=null
set u=null
set g=null
return false
endfunction
function QOF takes nothing returns nothing
local trigger t=CreateTrigger()
local unit YV7=bj_lastLoadedUnit
local unit YU7=G7[GetPlayerId(GetOwningPlayer(YV7))]
local unit JX7=null
local unit u=null
local group g=CreateGroup()
local boolexpr b=Condition(function TX7)
local boolean QYF=false
set LP4="QOF"
call GroupClear(g)
call GroupEnumUnitsInRangeOfLoc(g,GetUnitLoc(YV7),700,Condition(function TX7))
if(not NQ7(g))then
loop
set u=FirstOfGroup(g)
call GroupRemoveUnit(g,u)
exitwhen IsUnitEnemy(u,GetOwningPlayer(YU7))
endloop
set JX7=u
endif
call DestroyGroup(g)
if(JX7!=null and GetUnitState(JX7,UNIT_STATE_LIFE)>0 and IsUnitVisible(JX7,GetOwningPlayer(YU7)))then
if(N37(YV7,JX7)>250.)then
set QYF=true
call IssueTargetOrderById(YV7,$D0012,YU7)
else
call IssueImmediateOrderById(YV7,$D009F)
call RN7(t)
call DestroyTrigger(t)
endif
else
set QYF=true
call IssueTargetOrderById(YV7,$D0012,YU7)
endif
if(QYF)then
call QG7(GetHandleId(t),"NAScarabOwner",YU7)
call QG7(GetHandleId(t),"NAScarabUnit",YV7)
call TriggerRegisterUnitEvent(t,YV7,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,2.1,true)
call TriggerAddCondition(t,Condition(function QWF))
set t=CreateTrigger()
call QG7(GetHandleId(t),"NinjaSummoner",YU7)
call QG7(GetHandleId(t),"NinjaScarab",YV7)
call TriggerRegisterUnitInRange(t,YV7,70,b)
call TriggerAddAction(t,function QUF)
endif
call DestroyBoolExpr(b)
set t=null
set g=null
set u=null
set YV7=null
set YU7=null
set JX7=null
endfunction
function QZF takes unit Z47,integer n5,integer LW8 returns item
local real x=LS8(Z47)
local real y=LU8(Z47)
local item TS8=CreateItem(n5,x,y)
local integer i=0
local boolean array LX8
local item Z4
local boolean PN7=false
set LP4="aiSafeUnitAddItemToSlotById"
set GD7=IQ4
call SetItemPlayer(TS8,IQ4,false)
call SetItemUserData(TS8,1)
if n5>0 then
loop
exitwhen i>(UnitInventorySize(Z47)-1)
if UnitItemInSlot(Z47,i)==null and i!=LW8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(Z47,Z4)
set LX8[i]=true
else
set LX8[i]=false
endif
if i==LW8 then
set PN7=UnitAddItem(Z47,TS8)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if LX8[i] then
call RemoveItem(UnitItemInSlot(Z47,i))
endif
set i=i+1
endloop
endif
if(not PN7)then
call RemoveItem(TS8)
set TS8=null
endif
set HZ4=TS8
set TS8=null
set Z4=null
return HZ4
endfunction
function QAF takes integer O5,unit it returns nothing
local integer i
local integer j
if(G77[384+O5]!=0)and(Bz>G77[$A0+O5])and(Bz>G77[$B0+O5])then
if GetUnitLifePercent(it)<30 then
set i=2
elseif GetUnitState(it,UNIT_STATE_MANA)<120 then
set i=3
if G77[400+O5]!=3 then
set G77[416+O5]=R2I(140./GetUnitState(it,UNIT_STATE_MAX_MANA)*100)
endif
elseif G77[400+O5]==3 and GetUnitManaPercent(it)<I2R(G77[416+O5])then
set i=3
else
set i=G77[384+O5]
endif
if G77[400+O5]!=i then
set G77[400+O5]=i
set i=0
set j=0
loop
set LI4=UnitItemInSlot(it,j)
set LJ4=GetItemTypeId(LI4)
if LJ4==SU[F6]then
set i=1
elseif LJ4==SU[G6]then
set i=2
elseif LJ4==SU[H6]then
set i=3
endif
if i!=0 then
call DisableTrigger(H84)
call RemoveItem(LI4)
set IQ4=Player(O5)
set LI4=QZF(it,SU[F6+G77[400+O5]-1],j)
call EnableTrigger(H84)
exitwhen true
endif
set j=j+1
exitwhen j>=bj_MAX_INVENTORY
endloop
set LI4=null
endif
endif
endfunction
function QBF takes nothing returns boolean
local integer QCF=P87(600,GetEnumUnit(),Condition(function V47))
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(OA7(GetFilterUnit()))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(GetEnumUnit())))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0))and((GetUnitLifePercent(GetFilterUnit())<30.+7*P87(600,GetEnumUnit(),Condition(function V47))+7*(P87(350,GetFilterUnit(),Condition(function k6)))+3*(P87(350,GetFilterUnit(),Condition(function TZ7))))or QCF>=3 or .73*GetWidgetLife(GetFilterUnit())<=350+QCF*70))!=null
endfunction
function QKF takes nothing returns nothing
local region Q3F=null
local unit it=GetEnumUnit()
local unit m5=null
local integer i1=GetUnitTypeId(it)
local player pl=GetOwningPlayer(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local location b5
local location Q6F=null
local location QLF=null
local boolean J4=false
local item Q1F=null
local boolean Q0F=false
local integer Q5F
local unit Q2F=null
local unit UV7=null
local integer Q_F=GetHandleId(it)
set LP4="QKF"
call TriggerSleepAction(.1)
if G0[288+O5]then
set G0[288+O5]=false
set i1=eY[400+O5]
set G0[304+O5]=true
endif
set G0[64+O5]=false
if(i1!=1211117642)then
set b5=HC[16+O5]
else
if(Q57(GetHandleId(it),"MCSLoc")!=null)then
set b5=Q57(GetHandleId(it),"MCSLoc")
else
set b5=GetUnitLoc(it)
call QT7(GetHandleId(it),"MCSLoc",b5)
endif
endif
call MoveLocation(b5,GetUnitX(it),GetUnitY(it))
if not G0[304+O5]then
if(i1!=1211117642)and(OA7(it))then
call QAF(O5,it)
endif
if(h4[O5]!=null)and((not OA7(h4[O5]))or(not IsHeroUnitId(GetUnitTypeId(h4[O5])))or((IsUnitIllusion(h4[O5]))and((P77(800.,b5,Condition(function K7))>0)or(lA(h4[O5],IsUnitAlly(it,Y7[0])))))or(IsUnitAlly(h4[O5],pl)))then
call ZVE(O5,true)
if(OV7(it))then
call J3(it,true)
endif
endif
if(i1==1429221451)and(GetUnitCurrentOrder(it)==$D0217)and(P87(GetUnitAbilityLevel(it,1093683248)*50+100,it,Condition(function TZ7))<=2)then
set G0[272+O5]=true
call IssueImmediateOrderById(it,$D0004)
call J3(it,false)
set G0[272+O5]=false
endif
if((G0[O5])or(not OV7(it))or(GetUnitAbilityLevel(it,1110459478)>0))then
set J4=true
if(GetUnitAbilityLevel(it,1110459478)>0)then
set G0[64+O5]=true
endif
elseif(((O37(it))and(not Id(O5)))or((G0[32+O5])and(h4[O5]==null)))then
if(h4[O5]!=null)then
call IUF(it,h4[O5])
endif
if(eY[O5]!=2)then
if(i1==1211117642)then
set J4=(O37(it))and(is(it))and(not Id(O5))and(PV7(it,$D0012,h9[O5]))
elseif(not G0[32+O5])then
call SJ7(it,false)
elseif(Jw(it))then
if(O37(it))then
set J4=QHF()
endif
if(not J4)then
call GMF(it)
endif
endif
endif
set J4=true
elseif(h4[O5]==null)then
if((GetHeroLevel(it)>3)and(GetUnitLifePercent(it)>70.)and(G0[$80+O5]))then
if((P77(800.,b5,Condition(function K7))>0)or(lA(h4[O5],IsUnitAlly(it,Y7[0]))))then
set m5=P47(1100.,b5,Condition(function KK))
else
set m5=P47(1100.,b5,Condition(function Kl))
endif
if(m5!=null)then
if(iy(it))then
set h4[$A0+O5]=m5
endif
if((KY(750.,PU7(m5))<=2)and(not SB7(m5))and((OB7(m5,it))or(P87(400.,m5,Condition(function UB7))==0)))then
call ZSE(O5,m5,false,false)
endif
endif
endif
else
set m5=K3(600.,it,Condition(function k6))
if(m5!=h4[O5]and m5!=null)then
if(GetUnitLifePercent(m5)>50.)then
if((GetUnitState(m5,UNIT_STATE_LIFE)+(20.*GetHeroLevel(m5)))<GetUnitState(h4[O5],UNIT_STATE_LIFE))then
call ZSE(O5,m5,false,false)
endif
elseif(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(h4[O5],UNIT_STATE_LIFE))then
call ZSE(O5,m5,false,false)
endif
endif
if((GetUnitTypeId(h4[O5])==1211117641)and(GetUnitLifePercent(h4[O5])>50.))then
set m5=P47(700.,b5,Condition(function KL))
if(m5!=null)then
call ZSE(O5,m5,false,false)
endif
endif
if((GetHeroLevel(it)<6)and(not O67(O5)))then
if((not IsUnitInRange(it,h4[O5],750.))or((GetUnitLifePercent(it)-20.)<GetUnitLifePercent(h4[O5])and G0[$90+O5]==false)or((not IsUnitVisible(h4[O5],pl))and(kD(h4[O5]))))then
call ZVE(O5,false)
call J3(it,true)
endif
elseif(((not IsUnitInRange(it,h4[O5],1500.)or((GetUnitLifePercent(it)+20.)<GetUnitLifePercent(h4[O5])and G0[$90+O5]==false))and(not O67(O5)))or(SB7(h4[O5])))then
call ZVE(O5,true)
call J3(it,true)
elseif((not IsUnitVisible(h4[O5],pl))and(((IsVisibleToPlayer(GetUnitX(h4[O5]),GetUnitY(h4[O5]),pl))and(not IsUnitHidden(h4[O5])))or((eY[32+GetPlayerId(GetOwningPlayer(h4[O5]))]<2)and(kD(h4[O5])))))then
if(not O37(h4[O5]))then
if((GetUnitTypeId(h4[O5])==1212365106)and(PD7(it,SU[VC]))and(GetItemCharges(bj_lastCreatedItem)>1))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,PH7(it,SU[VC]),GetUnitX(h4[O5]),GetUnitY(h4[O5])))
elseif((GetUnitTypeId(h4[O5])==1211119409)and(PD7(it,SU[VC]))and(GetItemCharges(bj_lastCreatedItem)>1))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,PH7(it,SU[VC]),GetUnitX(h4[O5]),GetUnitY(h4[O5])))
else
set h4[O5]=null
call J3(it,true)
endif
elseif(i1==1311781185)then
set J4=IssueImmediateOrderById(it,$D0278)
elseif(PD7(it,SU[S5]))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
elseif(PD7(it,SU[BC]))then
set J4=(N37(it,h4[O5])<=600)and(UnitUseItem(it,bj_lastCreatedItem))
elseif(PD7(it,SU[VC]))then
set J4=((GetUnitX(h4[O5])!=0)or(GetUnitY(h4[O5])!=0))and(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(h4[O5]),GetUnitY(h4[O5])))
else
if(not R87(Q_4,SK7(it)+"|W"))then
call QF7(Q_4,SK7(it)+"|W",true)
endif
call ZVE(O5,true)
call J3(it,true)
endif
endif
endif
endif
if h4[O5]==null then
set hq[624+O5]=0
endif
set m5=h4[O5]
if((iy(it))and(m5!=null))then
set h4[$A0+O5]=m5
endif
set GZ[$80+O5]=(m5!=null)and((GetHeroLevel(it)>5)or(OB7(m5,it)))
if((not J4)and(PD7(it,SU[E54])))and(h4[O5]!=null)then
call UnitUseItemTarget(it,bj_lastCreatedItem,m5)
endif
if((not J4)and(PD7(it,SU[M3])))and(h4[O5]!=null)then
call DisableTrigger(Q14[O5])
call UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(m5),GetUnitY(m5))
call EnableTrigger(Q14[O5])
endif
if(J4)then
elseif(i1==1160785970)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((GetHeroLevel(it)>3)or(OB7(m5,it)))and(IsUnitInRange(it,m5,650.))and(GetUnitManaPercent(it)>25.)and(Bz>TB4[16+O5])and(PC7(it,$D022E,1093748023))
if((not J4)and(G0[256+O5])and(GetHeroLevel(it)>3))then
set E=1
set UV7=O27(700,b5,And(Condition(function k6),Condition(function VE7)))
if UV7==null then
set E=2
set UV7=O27(700,b5,And(Condition(function k6),Condition(function VE7)))
endif
set UV7=MC7(UV7==null,O27(700,b5,Condition(function k6)),UV7)
set m5=MC7(UV7!=null and(m5==null or MV7(m5,30,450,2)or MV7(it,30,400,1)),UV7,m5)
set J4=(m5!=null)and(IsUnitInRange(it,m5,N77((GetUnitMoveSpeed(it)-GetUnitMoveSpeed(m5))>=-20,550+(GetUnitMoveSpeed(it)-GetUnitMoveSpeed(m5)),$FA)))and(IssueTargetOrderById(it,$D02B6,m5))
endif
if((not J4)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=O27(450.,b5,Condition(function k6))
set J4=(m5!=null)and(Bz>TB4[O5])and(((GetUnitAbilityLevel(it,1093747023)>0)and(PC7(it,$D0105,1093747023)))or((GetUnitAbilityLevel(it,1093752150)>0)and(PC7(it,$D0105,1093752150))))
endif
elseif(i1==1160786506)then
if(GetHeroLevel(it)>3)then
set m5=P47(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(Bz>TB4[16+O5])and(IsUnitInRange(it,m5,795.))and(((GetUnitAbilityLevel(it,1093751894)<4)and(GetUnitManaPercent(it)>50.))or(GetUnitLifePercent(m5)<40.)or(h4[O5]!=null))and(PW7(it,$D007F,1093751894,m5))
if(not J4)and(m5!=null)and(Bz>TB4[48+O5])and((GetUnitLifePercent(m5)<30.)or((h4[O5]!=null)and((GetUnitLifePercent(m5)<70.)or(eY[320+O5]>0))))then
if(BM7(it,m5))or(not IsUnitInRange(m5,it,800))then
call ZT7(it,m5,1.2,900)
else
call MoveLocation(DF7,GetUnitX(m5),GetUnitY(m5))
endif
set J4=(NW7(O5)and(J8(O5,IssuePointOrderByIdLoc(it,$D0079,DF7))))
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and(BM7(it,m5))and(not IsUnitInRangeLoc(m5,NHF(m5),600))then
set J4=PW7(it,$D0097,1093751639,m5)
endif
if(not J4)and(h4[O5]!=null)and(BK8(m5)or GetUnitLifePercent(it)<80 or GZ[$D0+O5])then
set J4=(m5!=null)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))
endif
if(not J4)and(Bz>TB4[32+O5])then
set m5=P47(1200.,b5,Condition(function NIF))
set J4=(m5!=null)and(PW7(it,$D0097,1093751639,m5))
endif
elseif(i1==1160786502)then
if((m5==null)and(G0[$80+O5]))then
set m5=VA7(900.,it,Condition(function k6))
endif
if((G0[$80+O5])and(QA7(GetHandleId(it),"Bird4")!=null)and(A47(QA7(GetHandleId(it),"Bird4"))==false))then
if m5==null then
set m5=P47(900.,b5,Condition(function TZ7))
endif
set Q6F=ZR7(it,m5,900,.01,$3E8)
if Q6F!=null then
set J4=IssuePointOrderByIdLoc(it,$D00D9,Q6F)
else
set J4=IssuePointOrderById(it,$D00D9,GetUnitX(m5)+GetRandomReal(-75,75)*GetRandomReal(0,1),GetUnitY(m5)+GetRandomReal(-75,75)*GetRandomReal(0,1))
endif
endif
if(not J4 and(Bz>TB4[16+O5]))then
set UH4[O5]=true
set J4=(m5!=null)and((GetUnitLifePercent(m5)>70.)or((GetUnitLifePercent(m5)<30. and P87(900.,it,Condition(function VU7))>=1))or(GZ[$D0+O5]))and(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5)))
endif
if(not J4)then
set J4=((GetUnitLifePercent(it)>30.)and(GetUnitState(it,UNIT_STATE_MANA)>300. and GetUnitManaPercent(it)>40))and(P87(900.,it,Condition(function VU7))>=1)or(P87(500.,it,Condition(function TZ7))>3)and IssueImmediateOrderById(it,$D020A)or((m5!=null)and(GetRandomInt(1,3)==1)and((GetUnitLevel(it)>5)or(GetUnitLifePercent(m5)<30.))and(IssuePointOrderByIdLoc(it,$D0278,GetUnitLoc(m5))))
endif
if((not J4)and(Bz>hq[O5])and(P87(600.,it,Condition(function VU7))>=2))and(P87(550.,it,Condition(function V47))>=2 or GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D02B6)
endif
set UH4[O5]=false
set IM4=it
if(not J4)then
set E=1
set UV7=VA7(900,it,And(Condition(function V97),Condition(function VE7)))
set E=3
set UV7=MC7(UV7==null,VA7(900,it,And(Condition(function V97),Condition(function VE7))),UV7)
set m5=MC7(UV7!=null,UV7,MC7(m5!=null,m5,VA7($44C,it,And(Condition(function k6),Condition(function TU7)))))
if(m5!=null)and(GetUnitLifePercent(it)>40)and(G0[256+O5])and(not IsUnitInRange(it,m5,300))and(IsUnitInRange(it,m5,$514))then
set h4[O5]=m5
set J4=IssueTargetOrderById(it,$D00FA,m5)
endif
endif
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
if(GetUnitAbilityLevel(it,1112436083)>0)then
if((GetUnitState(it,UNIT_STATE_MANA)<100.)and(not O37(it)))then
call IssueImmediateOrderById(it,$D026E)
call SetPlayerAbilityAvailable(pl,1093684560,false)
endif
elseif((GetHeroLevel(it)>3)and((GetUnitState(it,UNIT_STATE_MANA)>250.)or(O37(it))))then
call SetPlayerAbilityAvailable(pl,1093684560,true)
call IssueImmediateOrderById(it,$D026D)
endif
if((h4[16+O5]!=null)and(G0[$80+O5]))then
if(GetUnitAbilityLevel(h4[16+O5],1114665575)==0)then
set J4=IssueTargetOrderById(it,$D000F,h4[16+O5])
else
set h4[16+O5]=null
endif
endif
call SetPlayerAbilityAvailable(pl,1093682994,(GetUnitManaPercent(it)>75.)and(GetHeroLevel(it)>8))
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=K3(800.,it,Condition(function k6))
endif
set J4=(m5!=null)and(((GetUnitLifePercent(m5)<60.)and(not IsUnitIllusion(m5))and(GetUnitAbilityLevel(m5,1114665575)==0)and(PC7(it,$D0265,1093747028)))or(((GetUnitManaPercent(it)>70.)or(GetUnitLifePercent(m5)<60.))and(PW7(it,$D0097,1093682994,m5))))
elseif(i1==1429221443)then
if((m5==null)and(G0[$80+O5]))then
set m5=P47(600.,b5,Condition(function k6))
endif
if((GetHeroLevel(it)>6)and(m5!=null)and(GetUnitLifePercent(it)>50.))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,false)
if(PD7(it,SU[DK4])and(RG7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,110.)))then
set J4=(m5!=null)and(UnitUseItem(it,PH7(it,SU[DK4])))
elseif(PD7(it,SU[DJ4])and(RG7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,PH7(it,SU[DJ4])))
else
set J4=(Bz>hq[$F0+O5])and((hq[416+O5]>Bz)or(GetUnitLifePercent(m5)<60.))and((PC7(it,$D0131,1093686322))or(PP7(it,SU[A1])))
endif
if((not J4)and((GetUnitLifePercent(m5)<50.)))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,true)
set GZ[O5]=true
set J4=(IssueTargetOrderById(it,$D0097,m5))
set GZ[O5]=false
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093744948,false)
endif
endif
elseif(i1==1162032951)then
if((GetHeroLevel(it)>20)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))then
call SetPlayerAbilityAvailable(pl,1093678404,true)
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(UP>$C8)and(UP<(400*GetUnitAbilityLevel(it,1093679152))or UP<(460*GetUnitAbilityLevel(it,1093752154)))and(PY7(it,$D022F,1093679152,1093752154,m5))
endif
if((not J4)and(PD7(it,SU[B0]))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.)and(G0[$80+O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
set m5=O27(1500.,b5,Condition(function KK))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not PD7(m5,SU[LV]))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.)))then
if((P87(600.,m5,Condition(function VG7))>0)or((GetUnitLifePercent(m5)<75.)and(P87(800.,m5,Condition(function UB7))==0)))then
set GZ[272+O5]=true
set J4=UnitUseItem(it,PH7(it,SU[B0]))
set GZ[272+O5]=J4
endif
endif
endif
elseif(i1==1162032181)then
if((GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(ORF(it)))or(PS4))and(GetUnitState(m5,UNIT_STATE_LIFE)>300.))then
set GZ[O5]=true
set J4=J8(O5,(IsUnitInRange(it,m5,250.))and(PW7(it,$D02AC,1093683761,m5)))
if((not J4)and(IsUnitInRange(it,m5,700.))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>270+(25*GetUnitAbilityLevel(it,1093683761))))then
set QLF=kL(it,m5,200.)
set J4=(QLF!=null)and(P77(800.,QLF,Condition(function VU7))<=2)and(IssuePointOrderByIdLoc(it,$D00FA,QLF))
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,300.))and(Kz(600.,b5)>1)and(P77(600.,b5,Condition(function U_7))>0))then
set GZ[O5]=true
set J4=J8(O5,PW7(it,$D02AC,1093683761,m5))
endif
endif
if((not J4)and(m5!=null)and(OB7(m5,it))and(not IC(O5))and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,I2R(350+($C8*GetUnitAbilityLevel(it,1093684299))))))then
set QLF=kL(it,m5,200.)
set J4=(QLF!=null)and(P77(800.,QLF,Condition(function VU7))<=2)and(IssuePointOrderByIdLoc(it,$D00FA,QLF))
endif
elseif(i1==1160785972)then
call SetPlayerAbilityAvailable(pl,1093678161,(GetUnitLifePercent(it)<70.)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>(120+(80*GetUnitAbilityLevel(it,1093677621)))))
call SetPlayerAbilityAvailable(pl,1093677872,(GetHeroLevel(it)>10.)and(iy(it))and(P77(800.,b5,Condition(function k8))>0)and(GetUnitState(it,UNIT_STATE_MANA)>225.))
if((m5==null)and(G0[$80+O5]))then
set m5=O27(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and((not IsUnitInRange(it,m5,550.))and(PW7(it,$D00CD,1095263841,m5)))
if((GetHeroLevel(it)>8)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110456118)==0))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=O27(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.))and((GetUnitLifePercent(m5)<70.)or(P87(650.,m5,Condition(function VG7))>0)))then
set h4[288+O5]=m5
set J4=(P87(800.,m5,Condition(function UB7))==0)and(IssueImmediateOrderById(it,$D00A1))
endif
endif
elseif(i1==1429221424)then
if(GetUnitAbilityLevel(it,1110454347)==0)then
call SetPlayerAbilityAvailable(pl,1093748789,(GetHeroLevel(it)>3)and(m5!=null))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(800.,b5,Condition(function k6))
endif
else
set J4=true
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>3))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_MANA))
set J4=(UP>100.)and((R2I(GetUnitState(it,UNIT_STATE_MANA))>($DC+(50*GetUnitAbilityLevel(it,1093679445))))or((GetUnitState(m5,UNIT_STATE_LIFE)<200.)and(UP>$C8)))and(PW7(it,$D0118,1093748789,m5))
if((not J4)and(GetUnitLifePercent(m5)<70.))then
set GZ[O5]=true
set J4=J8(O5,(PW7(it,$D024B,1093687351,m5))or(PW7(it,$D0118,1093748789,m5)))
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)>70.)and(G0[$80+O5]))then
if(m5==null)then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=O27(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<75.)and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and((not IsUnitVisible(it,GetOwningPlayer(m5)))or(not IsUnitInRange(it,m5,800.)))and(IsUnitInRange(it,m5,1500.))and(not PD7(m5,SU[LV])))then
if(P87(1000.,m5,Condition(function UB7))==0)then
set GZ[O5]=true
set h4[288+O5]=h4[O5]
set J4=J8(O5,PC7(it,$D00A1,1093679445))
endif
endif
endif
if((m5==null)and(GetUnitAbilityLevel(it,1110454347)==0)and(GetHeroLevel(it)>9)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>60.))then
call SetPlayerAbilityAvailable(pl,1093687351,true)
endif
elseif(i1==1432646245)then
if(not AW7())then
if((Bz>hq[O5])and(not(GetFloatGameState(GAME_STATE_TIME_OF_DAY)==.0)))then
set J4=IssueImmediateOrderById(it,$D028D)
endif
if((m5==null)and(G0[$80+O5]))then
set m5=K3(900.,it,Condition(function k6))
if((m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(it,UNIT_STATE_LIFE)))then
call ZSE(O5,m5,false,false)
endif
endif
set J4=((m5!=null)and((PW7(it,$D007F,1093677640,m5))or((kP(GetUnitTypeId(m5)))and(PW7(it,$D0269,1093679171,m5)))))
else
set J4=(m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<65.)and(PW7(it,$D007F,1093677640,m5))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=P47(700.,b5,Condition(function KN))
if(m5==null)then
set m5=P47(500.,b5,Condition(function k6))
endif
set J4=((m5!=null)and(GetUnitManaPercent(m5)>20.)and(PW7(it,$D0269,1093679171,m5)))or((m5!=null)and(GetUnitLifePercent(m5)<70.)and(AW7())and(Bz>hq[O5])and(IssueImmediateOrderById(it,$D028D)))
endif
endif
elseif(i1==1430466609)then
call SetPlayerAbilityAvailable(pl,1093678145,(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=O27(900.,b5,Condition(function k6))
endif
if(m5!=null)then
if((not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<50.)and(GetHeroLevel(it)>5)and(Bz>hq[O5])and(not IC(O5))and(not IsUnitInRange(it,m5,400.))and(IsUnitInRange(it,m5,750.)))then
set QLF=kL(it,m5,200.)
set J4=(QLF!=null)and((P77(800.,QLF,Condition(function VU7))-P77(800.,QLF,Condition(function V47)))<=1)and(P77(700.,QLF,Condition(function UB7))==0)and(IssuePointOrderByIdLoc(it,$D022D,QLF))
endif
if((not J4)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set J4=(((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<OQF(it))or(Kz(400.,PU7(m5))>1))and(PY7(it,$D009D,1093810258,1093810259,m5)))
endif
if(not J4)then
set J4=(((GetUnitManaPercent(it)>60.)and(GetHeroLevel(it)>5))or(OB7(m5,it)))and(PW7(it,$D022F,1093685559,m5))
endif
endif
if(not J4)then
set J4=((P77(400.,b5,Condition(function k6))>0)or((hq[$F0+O5]>Bz)and(P77(400.,b5,Condition(function KA))>1)))and(PC7(it,$D022E,1093678145))
endif
if((not J4)and(GetHeroLevel(it)>11.)and(GetUnitManaPercent(it)>70.)and(iy(it))and(P77(1400.,b5,Condition(function Ky))==0)and(eY[O5]==1))then
set QLF=kk(it,800.,h8[O5])
set J4=(QLF!=null)and(IssuePointOrderByIdLoc(it,$D022D,QLF))
endif
elseif(i1==1430468913)then
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(((GetUnitLifePercent(m5)<60.)or(h4[O5]!=null)or(P77(800.,b5,Condition(function V47))>0))and(GetUnitAbilityLevel(m5,1110454356)==0)and(PW7(it,$D00B5,1093677876,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<40.)and((GetUnitState(it,UNIT_STATE_LIFE)>1800.)or(P77(1000.,b5,Condition(function k6))<=2))and(not IsUnitInRange(it,m5,350.)))then
set GZ[O5]=true
set J4=J8(O5,PC7(it,$D0084,1093678403))
endif
call SetPlayerAbilityAvailable(pl,1093810507,(GetHeroLevel(it)>$D)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((not J4)and(m5!=null))then
set J4=((IsUnitInRange(it,m5,275.))and(PC7(it,$D00C4,1093810507)))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(1000.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454356)==0)and(PW7(it,$D00B5,1093677876,m5))
endif
endif
elseif(i1==1430467634)then
set UP=GetHeroLevel(it)
call SetPlayerAbilityAvailable(pl,1093742674,(GetUnitManaPercent(it)>40.)and(Bz>TB4[16+O5]))
call SetPlayerAbilityAvailable(pl,1093750608,(UP>$A)and(GetUnitManaPercent(it)>55.))
if((m5==null)and(G0[$80+O5])and(UP>4))then
set m5=O27(900.,b5,Condition(function k6))
endif
if((m5!=null)and(UP>4))then
set J4=((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($FA+($FA*OSF(it))))and(not IsUnitIllusion(m5))and(PY7(it,$D0267,1093684565,1093681458,m5)))or((((GetHeroLevel(m5)==25)or(ModuloInteger(GetHeroLevel(m5),7-GetUnitAbilityLevel(it,1093679412))==0))or(GetUnitManaPercent(it)>60.)or(OB7(m5,it)))and(PW7(it,$D0107,1093679412,m5)))
if((not J4)and(GetUnitManaPercent(it)>60.))then
set GZ[O5]=true
set J4=J8(O5,PC7(it,$D022E,1093750608))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(1000.,it,Condition(function k6))
set J4=(m5!=null)and(PY7(it,$D0267,1093684565,1093681458,m5))
endif
endif
if((not J4)and(IsUnitInRange(it,m5,200.)))then
set J4=(m5!=null)and IssueImmediateOrderById(it,$D009F)
endif
if((not J4)and Bz>TB4[16+O5])then
set m5=O27(300.,PU7(it),Condition(function U17))
set J4=(m5!=null)and(PW7(it,$D0278,1093742674,m5))
endif
elseif(i1==1313026096)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=P47(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>4))or(OB7(m5,it)))and(PW7(it,$D007F,1095267426,m5))
if((not J4)and(GetHeroLevel(it)>$A)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitCurrentOrder(m5)!=$D0005)and(P87(600.,m5,Condition(function V47))>1))then
set J4=PW7(it,$D007F,1095267426,m5)
endif
elseif((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))then
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)<50.)and(Bz>TB4[O5]))then
set bj_lastLoadedUnit=it
set IM4=null
set IN4=null
set L84=GetUnitLifePercent(it)+20.
set L94=GetUnitLifePercent(it)+30.
call P47(700.,PU7(it),Condition(function TL7))
if IM4!=null then
set m5=IM4
else
set m5=IN4
endif
set J4=(m5!=null)and(PW7(it,$D00DD,1093678929,m5))
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(it)>75.)and(Bz>TB4[O5]))then
set m5=O27(600.,b5,Condition(function V97))
if((m5!=null)and(Q[GetPlayerId(GetOwningPlayer(m5))]>U[GetPlayerId(GetOwningPlayer(m5))]+3))then
set J4=(P87(800.,m5,Condition(function k6))>0)and(PW7(it,$D00DD,1093678929,m5))
endif
endif
set m5=h4[O5]
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5)))then
if((not J4)and(i1==1164277353)and(GetUnitLifePercent(m5)<70.))then
set J4=PC7(it,$D02B7,1093751369)
endif
if not J4 and(GetHeroLevel(it)>20 or(GetHeroLevel(it)-GetHeroLevel(m5)>3)or i1!=1164277353)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if((not J4)and((OB7(m5,it))or(GZ[$D0+O5])or(GetUnitLifePercent(m5)<70. and GetUnitManaPercent(it)>70.)))then
set J4=PW7(it,$D0097,1093815130,m5)
endif
endif
elseif(i1==1164666213)then
if(GetHeroLevel(it)>=6)then
set J4=(IsUnitInRange(it,h4[O5],400))or((P77(400.,b5,Condition(function k6))>0)or((GetHeroLevel(it)>18)and(GetUnitManaPercent(it)>70.)and(P77(400.,b5,Condition(function TZ7))>2)))
if not RG7(it,"AI|PulseNova")then
if(J4)then
call SetPlayerAbilityAvailable(pl,1093808455,true)
call PC7(it,$D0084,1093808454)
call TriggerSleepAction(.1)
endif
else
if(not J4)then
call PC7(it,$D0084,1093808456)
call TriggerSleepAction(.1)
endif
endif
call TriggerSleepAction(.1)
set J4=false
endif
set UP=GetHeroLevel(it)
if(not J4)and(P77(300.,b5,Condition(function k6))>0)then
if(PC7(it,$D022E,1093677877))then
call TriggerSleepAction(.1)
endif
endif
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>70.)and(UP>3))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((UP>3)or(GetUnitLifePercent(m5)<60.))and(BK8(m5))and(PW7(it,$D0100,1093678679,m5)))
endif
if((not J4)and(m5!=null))then
set J4=(((UP>3)or(GetUnitLifePercent(m5)<60.))and(PW7(it,$D0097,1093678678,m5)))
endif
if(not J4)and(m5==null)then
set m5=O27(1000.,b5,Condition(function TZ7))
if(not J4)and(m5!=null)and(UP>8)and(GetUnitManaPercent(it)>60.)then
set J4=(PW7(it,$D0097,1093678678,m5))
endif
if(not J4)and(m5!=null)and(UP>$E)and(GetUnitManaPercent(it)>60.)and(P87(150.,it,Condition(function TZ7))>2)then
set J4=(PW7(it,$D0100,1093678679,m5))
endif
if(not J4)and(m5!=null)and((UP>$E)or((UP>$A)and(eY[O5]>9)))and(GetUnitManaPercent(it)>40.)and(P87(500.,it,Condition(function TZ7))>2)then
set J4=(PC7(it,$D022E,1093677877))
endif
endif
set bj_lastLoadedUnit=it
if(not J4)and(h4[O5]!=null)and(eY[320+O5]>=0)and(not IsUnitInRange(it,m5,300))and((GetUnitLifePercent(it)>80)or(GetUnitLifePercent(it)>(GetUnitLifePercent(m5)+30)))and(GetUnitManaPercent(it)>20)and(h4[304+O5]==null)and(P87(900,m5,Condition(function P97))==0)then
set J4=IssuePointOrderById(it,$D02CE,GetUnitX(m5),GetUnitY(m5))
endif
elseif(i1==1433168227)then
call SetPlayerAbilityAvailable(pl,1093678918,(GetHeroLevel(it)>9)and((GetUnitManaPercent(it)>70.)or(m5!=null)or(P77(900.,b5,Condition(function k6))>0)))
if GetUnitManaPercent(it)>60. then
call SetPlayerAbilityAvailable(pl,1093679186,true)
if IssueImmediateOrderById(it,$D01EA)then
call TriggerSleepAction(.1)
endif
else
call SetPlayerAbilityAvailable(pl,1093679186,false)
endif
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>2))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(GetHeroLevel(it)>2))then
if((GetHeroLevel(it)>5)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(GetUnitState(m5,UNIT_STATE_LIFE)>200.))then
set UP=P87(550.,m5,Condition(function KA))
if((UP>1)and(UP<6)and((UP<=(P87(550.,m5,Condition(function k6))*2))or((OB7(m5,it))and(GetUnitState(m5,UNIT_STATE_LIFE)<450.))))then
set GZ[O5]=true
set J4=J8(O5,PY7(it,$D0103,1093678420,1093679176,m5))
endif
endif
if(not J4)then
set J4=((GetUnitManaPercent(it)>60.)or(GetUnitLifePercent(m5)<50.))and(PW7(it,$D0102,1093678918,m5))
endif
endif
if((not J4)and(GetUnitManaPercent(it)<75.))then
set m5=O27(600.,b5,Condition(function KD))
set J4=(m5!=null)and(PW7(it,$D0062,1093678387,m5))
endif
elseif(i1==1429221430)then
if(m5==null)then
set m5=O27(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and((GetUnitState(m5,UNIT_STATE_LIFE)<56.25*GetUnitAbilityLevel(it,1093681736))or(GetUnitState(m5,UNIT_STATE_LIFE)>500. and GetUnitState(it,UNIT_STATE_MANA)>300.)or(GZ[$D0+O5]))then
set J4=PW7(it,$D0279,1093681736,m5)
endif
if(not J4)and(GetUnitAbilityLevel(it,1110454597)>0)then
if(h4[O5]==null)then
call ZSE(O5,m5,false,false)
endif
if((GetUnitCurrentOrder(it)==$D0012)and(not G0[O5])and(hq[512+O5]>Bz)and(G0[$80+O5])and(P77(800.,b5,Condition(function KC))>1))then
call PV7(it,$D000F,h8[O5])
endif
elseif(not J4)and((GetUnitAbilityLevel(it,1110454595)>0)and(GetUnitCurrentOrder(it)==$D0012)and((not IsUnitVisible(it,Y7[0]))or(not IsUnitVisible(it,Z7[0])))and(((P77(800.,b5,Condition(function k8))>0)or(P77(800.,b5,Condition(function KC))>0))))then
call IssueImmediateOrderById(it,$D0019)
endif
if(not J4)and(m5!=null)and((P77(1500.,b5,Condition(function KR))==0)and(P77(400.,b5,Condition(function k6))==0)and(N37(it,IY4)>$5DC)and(N37(it,JZ4)>$5DC)and(GetUnitState(it,UNIT_STATE_MANA)>250.))then
set J4=PX7(it,$D0100,1093681735,b5)
endif
if((not J4)and(GetHeroLevel(it)>$D)and(hq[416+O5]>Bz)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110454597)==0)and(GetUnitState(it,UNIT_STATE_MANA)>200.))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
if(((m5==null)or(not IsUnitInRange(it,m5,400.)))and(G0[$80+O5]))then
set m5=O27(400.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(N37(it,m5)<300)and(PC7(it,$D00C4,1093687121))
endif
endif
if(not J4)and(h4[O5]==null)and GZ[O5]and((GetUnitState(it,UNIT_STATE_MANA)>300 and GetUnitManaPercent(it)>50))then
set L84=GetUnitAbilityLevel(it,1093681736)*75.
set m5=O27(600.,b5,Condition(function U27))
set J4=(m5!=null)and(PW7(it,$D0279,1093681736,m5))
endif
elseif(i1==1430466872)then
call SetPlayerAbilityAvailable(pl,1093687349,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>60.)and(P77(1200.,b5,Condition(function k6))==0))
call SetPlayerAbilityAvailable(pl,1093677646,(GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)<70.)and(iy(it)))
if(m5!=null)then
set GZ[O5]=true
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
if((Bz>hq[O5])and(not IsUnitIllusion(m5))and(UP>$C8)and(UP<OTF(it)+100))then
set J4=J8(O5,(PW7(it,$D0216,1093684558,m5))or(PW7(it,$D024B,1093687349,m5))or((not ke(m5))and(PY7(it,$D0097,1093679413,1093679447,m5))))
elseif((GetHeroLevel(it)>2)or(OB7(m5,it)))then
set J4=(PW7(it,$D024B,1093687349,m5))or((GetUnitLifePercent(m5)<50.)and(not IsUnitIllusion(m5))and(PW7(it,$D0216,1093684558,m5)))
endif
elseif((GetUnitManaPercent(it)>50.)and(G0[$80+O5])and(GetHeroLevel(it)>2))then
set m5=O27(1000.,b5,Condition(function k6))
set J4=(m5!=null)and(PW7(it,$D024B,1093687349,m5))
endif
if((not J4)and(GetHeroLevel(it)>$A)and((GetUnitState(it,UNIT_STATE_MAX_MANA)-GetUnitState(it,UNIT_STATE_MANA))>400.)and(iy(it))and(eY[O5]==1))then
set m5=O27(700.,b5,Condition(function k9))
set J4=(m5!=null)and(PW7(it,$D0062,1093678387,m5))
endif
if((not J4)and(GetHeroLevel(it)>$F)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetUnitLifePercent(m5)<60.)and(UP<$640)and(UP>500)and(not ke(m5))and(PY7(it,$D0097,1093679413,1093679447,m5))
endif
endif
endif
elseif(i1==1162032439)then
set J4=GetUnitAbilityLevel(it,1110456148)>0
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(900.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>2))or(OB7(m5,it)))and(PW7(it,$D02BD,1093744435,m5))
endif
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<70.)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[16+O5])and(G0[$80+O5]))then
set UP=Kz(600.,b5)
if((UP>1)or((UP>0)and(P77(800.,b5,Condition(function V47))>0)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093681462,true)
set J4=J8(O5,(PC7(it,$D0272,1093677363)))
endif
endif
if((not J4)and(G0[$80+O5])and(PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[16+O5])and(GetUnitLifePercent(it)>65.)and(GetUnitManaPercent(it)>50.)and(not IsUnitInRange(it,m5,300.))and(IsUnitInRange(it,m5,800.)))then
set h4[16+O5]=m5
set J4=O6F(it,m5)
endif
if(not J4)and(h4[O5]!=null)then
set J4=PW7(it,$D0218,1093684563,m5)
endif
call SetPlayerAbilityAvailable(pl,1093684563,(not J4)and(((GetHeroLevel(it)>8)and(GetUnitManaPercent(it)>45.))or((GetHeroLevel(it)>$F)and(GetUnitManaPercent(it)>30.))))
elseif(i1==1430466865)then
if(m5==null)then
set m5=O27(800.,b5,Condition(function k6))
endif
call SetPlayerAbilityAvailable(pl,1093677651,(GetHeroLevel(it)>$F)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((G0[$80+O5])and(not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<65. or OB7(it,m5)or GZ[$D0+O5]or eY[320+O5]>=0)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.))and((not IC(O5))or(MP7(it)>1600.))and(TB4[32+O5]>Bz))then
if(PD7(it,SU[QW]))then
set J4=(((Bz>hq[O5])and(GetUnitState(it,UNIT_STATE_MANA)>175.+(GetUnitAbilityLevel(it,1093810508)*100)))or(eY[320+O5]>=1)or(OB7(it,m5)))and(GetUnitState(it,UNIT_STATE_MANA)>400.)and(O6F(it,m5))
endif
if not J4 then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>180.+(GetUnitAbilityLevel(it,1093810508)*100))or(OB7(it,m5)))and(PW7(it,$D00FA,1093751364,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)and(G0[$80+O5]))then
set m5=VX7(800.,it)
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<30 or GZ[$D0+O5]))then
if(Kz(400.,PU7(m5))>1 or GetUnitLifePercent(m5)<30)and(((not IsUnitInRange(it,m5,300.))and(O6F(it,m5)))or(IsUnitInRange(it,m5,300.)))then
if(not is(it))then
call NX7(.1)
endif
set J4=(PC7(it,$D00C4,1093810508))
endif
endif
endif
if(not J4)and(IsUnitInRange(it,m5,200.))and(P77(250.,b5,Condition(function k8))<=1)then
set L84=MY7(it,m5)
set L94=MY7(it,h9[O5])
set L84=RAbsBJ(L84-L94)
if L84<$F then
set L84=RAbsBJ(GetUnitFacing(it)-L94)
if L84<$F then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>180.+(GetUnitAbilityLevel(it,1093810508)*100))or(OB7(it,m5)))and(PW7(it,$D00FA,1093751364,m5))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>60.))then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(600.,b5,Condition(function k6))
endif
if((m5!=null)and(IsUnitInRange(it,m5,600.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093677651,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D009D,GetUnitX(it)+300.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+300.*Sin(UP*bj_DEGTORAD)))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(P77(800.,b5,Condition(function k8))>0))then
set J4=(GetUnitAbilityLevel(it,1110454357)==0)and(GetUnitManaPercent(it)>65.)and(PW7(it,$D0062,1093677879,it))
if((not J4)and(GetUnitAbilityLevel(it,1110454357)>0)and(GetUnitManaPercent(it)>75.))then
set m5=O27(700.,b5,Condition(function V47))
set J4=(m5!=null)and(kq(GetUnitTypeId(m5)))and(GetUnitAbilityLevel(m5,1110454357)==0)and(PW7(it,$D0062,1093677879,m5))
endif
endif
elseif(i1==1430468144)then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(800.,b5,Condition(function k6))
endif
set UP=R47(GetHandleId(it),"Level")
if((m5!=null)and(IsUnitInRange(it,m5,860.))and GetUnitState(m5,UNIT_STATE_LIFE)<20+(60*UP))then
set J4=(IssueTargetOrderById(it,$D0118,m5))
else
set J4=((IsUnitInRange(it,m5,860.))and(UP>GetUnitAbilityLevel(it,1093750337))and(GetUnitManaPercent(it)>35.)and(GetHeroLevel(it)>3)and(IssueTargetOrderById(it,$D0118,m5)))
endif
if((not J4)and(m5!=null)and(PD7(it,SU[DQ4]))and(Bz>TB4[$F0+O5])and(BI8(m5)==false)and(XT7(m5)==false))then
set J4=UnitUseItemTarget(it,PH7(it,SU[DQ4]),m5)
endif
if(not J4 and m5!=null)then
set J4=(((GetUnitLifePercent(m5)<50.)or(P77(500.,b5,Condition(function V47))>0))and((GetHeroLevel(it)>$A)and(PW7(it,$D00DD,1093679192,m5))))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>TB4[O5]))then
if(RG7(it,"AIFamiliar1|Status")==false or RG7(it,"AIFamiliar2|Status")==false or(GetUnitAbilityLevel(it,1093814599)!=0 and RG7(it,"AIFamiliar3|Status")==false))then
call SetPlayerAbilityAvailable(pl,1093750341,true)
set J4=IssueImmediateOrderById(it,$D022E)
elseif(RG7(it,"AIFamiliar1|Stone")and RG7(it,"AIFamiliar2|Stone")and(GetUnitAbilityLevel(it,1093814599)==0 or RG7(it,"AIFamiliar3|Stone")))then
call SetPlayerAbilityAvailable(pl,1093750341,true)
set J4=IssueImmediateOrderById(it,$D022E)
else
call SetPlayerAbilityAvailable(pl,1093750341,false)
endif
endif
elseif((i1==1429221432)or(i1==1160786229))then
call SetPlayerAbilityAvailable(pl,1093687878,(GetHeroLevel(it)>$F)and(GetUnitManaPercent(it)>70.))
call SetPlayerAbilityAvailable(pl,1093677892,(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
if(i1==1160786229)then
set m5=O27(1000.,b5,Condition(function k6))
elseif(Bz>hq[O5])then
set m5=P47(600.,b5,Condition(function k6))
endif
endif
if(m5!=null)then
set J4=(Bz>hq[O5])and(i1==1429221432)and(not IsUnitIllusion(m5))and((GetUnitLifePercent(m5)<60.)or((GetUnitLifePercent(m5)<75.)and(P77(2000.,b5,Condition(function UB7))==0)))and(PC7(it,$D00D4,1093679411))
if((i1==1160786229)or((not J4)and((GetHeroLevel(it)>4)or(GetUnitLifePercent(m5)<60.))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>($FA+(25*(GetUnitAbilityLevel(it,1093679411)))))))then
set J4=(PC7(it,$D0278,1093687878))or(PC7(it,$D009E,1093677892))
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(PC7(it,$D00D4,1093679411))
endif
endif
elseif(i1==1429221441)then
set J4=(m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and(PW7(it,$D0107,1093678389,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(O07(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(GetHeroLevel(it)>$E)and(hq[416+O5]>Bz)and(Bz>hq[16+O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(PC7(it,$D009B,1093677903))
endif
endif
if((not J4)and(GetHeroLevel(it)>17)and(Bz>hq[16+O5]))then
set m5=P47(500.,b5,Condition(function UB7))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<55.)and(GetUnitLifePercent(m5)>15.)and(P87(800.,m5,Condition(function KC))>2)and(PC7(it,$D009B,1093677903))
endif
elseif(i1==1165451634)then
set J4=(m5!=null)and(((GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.))or(O07(m5,it)))and(PW7(it,$D02B6,1093687629,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(O07(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1432642913)then
set J4=(m5!=null)and(GetHeroLevel(it)>5)and((GetUnitLifePercent(it)>75.)or((GetUnitLifePercent(it)-25.)>GetUnitLifePercent(m5)))and(IssueTargetOrderById(it,$D02B6,m5))
if(not J4)then
set m5=O27(800.,b5,Condition(function V97))
if(m5!=null)then
set J4=((P87(800.,m5,Condition(function k6))>0)and(IssueTargetOrderById(it,$D0097,m5)))or((GetUnitLifePercent(it)>60.)and(IssueTargetOrderById(it,$D02B6,m5)))
endif
if((not J4)and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>50.)and(P77(600.,b5,Condition(function KA))>0))then
set J4=IssueTargetOrderById(it,$D0097,it)
endif
endif
elseif(i1==1215722344)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set m5=O27(800.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110454616)==0)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(GetUnitState(m5,UNIT_STATE_LIFE)>300.))then
if(((IsUnitInRange(it,m5,500.))and(GetUnitLifePercent(m5)<60.))or((P87(700.,m5,Condition(function V47))>0)and(GetUnitLifePercent(m5)<80.))or((P87(700.,m5,Condition(function VG7))>0)and(P87(700.,m5,Condition(function k8))<4)))then
set GZ[O5]=true
set J4=J8(O5,PW7(it,$D0107,1093684296,m5))
endif
else
set J4=(GetHeroLevel(it)>5)and(IsUnitInRange(it,m5,300.))and(GetUnitLifePercent(it)>70.)and(PW7(it,$D02BC,1093682499,it))
endif
elseif((GetHeroLevel(it)>5)and(GetUnitAbilityLevel(it,1110454616)==0)and(GetUnitManaPercent(it)>70.))then
set J4=(P77(1200.,b5,Condition(function k6))==0)and(P77(700.,b5,Condition(function KA))>0)and(PW7(it,$D02BC,1093682499,it))
else
call SetPlayerAbilityAvailable(pl,1093682499,false)
endif
elseif(i1==1432510828)then
set J4=(OWF(it)>35.)and((m5!=null)or(P77(1000.,b5,Condition(function k6))>0))and(PC7(it,$D0278,1093682004))
if(not J4)then
set m5=O27(1500.,b5,Condition(function k6))
if(m5!=null)then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
set m5=null
endif
endif
if((not J4)and(G0[$80+O5]))then
if(m5==null)then
set m5=O27(700.,b5,Condition(function k6))
endif
if(m5!=null)then
if(P87(900.,m5,Condition(function UB7))>0)then
if((O07(m5,it))or((GetHeroLevel(it)>4)and(IsUnitInRange(it,m5,250.))and(not IC(O5))and(GetUnitLifePercent(it)>75.)))then
set h4[288+O5]=m5
set J4=IssueImmediateOrderById(it,$D00A1)
endif
else
if((O07(m5,it))or((GetHeroLevel(it)>4)and((GetUnitManaPercent(it)>50.)or(GetHeroLevel(it)>10.))and(P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47))<=1)))then
set h4[288+O5]=m5
set J4=IssueImmediateOrderById(it,$D00A1)
endif
endif
endif
endif
elseif(i1==1332766568)then
if((G0[$80+O5])and(PD7(it,SU[QW]))and(GetHeroLevel(it)>$C)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and((UP<($96+($96*GetUnitAbilityLevel(it,1093682482))))or(UP<($96+($96*GetUnitAbilityLevel(it,1093750098)))))and(UP>$96)and(PY7(it,$D0097,1093682482,1093750098,m5))
if((not J4)and((GetHeroLevel(it)>3)or(OB7(m5,it)))and(R2I(GetUnitState(it,UNIT_STATE_MANA))>($C3+(40*GetUnitAbilityLevel(it,1093682482)))))then
set J4=IssueTargetOrderById(it,$D0118,m5)
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set J4=(GetUnitLifePercent(it)>70.)and(((UP>1)and(P77(280.,b5,Condition(function k6))>1))or((UP<=2)and(P77(280.,b5,Condition(function k6))>0)))and(IssueImmediateOrderById(it,$D0278))
endif
endif
if((not J4)and(GetHeroLevel(it)>3))then
if(m5==null)then
set m5=K3(800.,it,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(O07(m5,it)))and(IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and(P77(800.,b5,Condition(function V97))>0))then
set J4=(P77(280.,b5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1429221451)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitInRange(it,m5,200.))and(GetUnitLifePercent(m5)<50.)and(GetUnitCurrentOrder(it)==$D000F))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(R2I(GetUnitState(it,UNIT_STATE_MANA))>$FA+(75*GetUnitAbilityLevel(it,1093678674))))then
if((Bz>hq[O5])and(Bz>hq[112+O5])and(Bz>hq[$F0+O5])and(PD7(it,SU[QW]))and(IsUnitInRange(it,m5,900.))and(not IsUnitInRange(it,m5,300.)))then
set UP=P77(1000.,b5,Condition(function k6))
if((not IsUnitVisible(it,GetOwningPlayer(m5)))or((hq[416+O5]>Bz)and((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(800.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1))))then
set J4=(P77(500.,b5,Condition(function k6))==0)and(IssueImmediateOrderById(it,$D0265))
endif
endif
if(not J4)then
set J4=(Bz>hq[O5])and(IssueTargetOrderById(it,$D00FA,m5))
endif
if((not J4)and((hq[O5]-Bz)>20.)and(GetUnitLifePercent(it)>70.)and(not IC(O5))and(GetUnitState(it,UNIT_STATE_MANA)>500.)and(IsUnitInRange(it,m5,500.))and(P77(500.,b5,Condition(function V47))>0))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(m5)+100.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+100.*Sin(UP*bj_DEGTORAD))
endif
endif
if(not J4)and(Bz>TB4[32+O5])and(GetUnitAbilityLevel(it,1093683248)>1)and(G0[256+O5])and(h4[304+O5]==null)and(P87(GetUnitAbilityLevel(it,1093683248)*50+100,it,Condition(function TZ7))>4)then
set J4=IssueImmediateOrderById(it,$D0217)
endif
elseif(i1==1315334514)then
set J4=(GetUnitAbilityLevel(it,1110456148)==0)and(GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>3)and((OZF(it,200.,$D00C4,1093682521))or(OZF(it,450.,$D026C,1093682760))or(OZF(it,700.,$D0277,1093682736)))
if((not G0[$80+O5])or(J4))then
elseif((PD7(it,SU[B0]))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(GetUnitManaPercent(it)>50.)and((GetUnitAbilityLevel(it,1093682001))>(GetUnitAbilityLevel(it,1093681746)*4)))then
if(m5==null)then
set m5=O27(1200.,b5,Condition(function KK))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitTypeId(m5)!=1212365106)and(P87(800.,m5,Condition(function UB7))==0)and((P87(600.,m5,Condition(function VG7))>0)or(not IsUnitInRange(it,m5,800.))or(not IsUnitVisible(it,Y7[0]))or(not IsUnitVisible(it,Z7[0]))))then
set GZ[272+O5]=true
set J4=UnitUseItem(it,PH7(it,SU[B0]))
set GZ[272+O5]=J4
endif
elseif((PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and(not IC(O5))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(GetUnitLifePercent(it)>65.)and(GetUnitManaPercent(it)>50.)and((GetUnitAbilityLevel(it,1093682001))>(GetUnitAbilityLevel(it,1093681746)*4)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5])and(GetRandomInt(1,3)==1))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(P77(1000.,b5,Condition(function V47))>0))then
set UP=P77(650.,b5,Condition(function k6))
set J4=((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(PC7(it,$D0131,1093810506))
endif
endif
elseif(i1==1328558154)then
if LoadBoolean(C7,GetHandleId(it),1145131595)then
set J4=true
if J4 then
if WM7(GetOwningPlayer(it))then
set Q3F=WQ4
else
set Q3F=WP4
endif
set UV7=LoadUnitHandle(C7,Q_F,1145131595)
if IsPointInRegion(IT4,GetUnitX(it),GetUnitY(it))==false and not((P87(700,UV7,Condition(function k6))<=IMinBJ(M17(IsUnitInRegion(Q3F,UV7),2+R2I((GetHeroLevel(it)-GetHeroLevel(UV7))/4),999),M17(P87(500,UV7,Condition(function UB7))>0,3+R2I(GetUnitLifePercent(it)-GetUnitLifePercent(UV7))/20,999)))or P87(900,UV7,Condition(function T57))>=2)then
call IssueImmediateOrderById(it,$D0004)
endif
endif
endif
if J4==false and O37(it)and P87(500,it,Condition(function k6))>=1 and MV7(it,30,400,1)then
set I07=$9C4
set UV7=VA7(99999,it,And(Condition(function TZ7),Condition(function TR7)))
if UV7==null then
set I07=$5DC
set UV7=VA7(99999,it,And(Condition(function TZ7),Condition(function TR7)))
endif
set J4=(UV7!=null)and IssueTargetOrderById(it,$D0278,UV7)
endif
if((m5!=null)and(not J4)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(OB7(m5,it)or((GetUnitLifePercent(m5)<60.)and(not IsUnitInRange(it,m5,600.))))and(((P87(900.,m5,Condition(function VU7))<=2)and(PD7(it,SU[H1]))or(PD7(it,SU[S2])))or((P87(900.,m5,Condition(function VU7))<2))))then
set J4=((not ke(m5))and(P77(700.,GetUnitLoc(m5),Condition(function UB7))==0)and(IssueTargetOrderById(it,$D0278,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<60.)and(IsUnitInRange(it,m5,TB4[64+O5])))then
set J4=(IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and PD7(it,SU[DK4])and(RG7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,110.)))then
set J4=(m5!=null)and(UnitUseItem(it,PH7(it,SU[DK4])))
elseif((not J4)and PD7(it,SU[DJ4])and(RG7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,PH7(it,SU[DJ4])))
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[O5]>Bz))then
if((m5==null)or(IsUnitInRange(it,m5,500.)))then
set m5=K3(1500.,it,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitLifePercent(m5)<60.)and((GetUnitState(m5,UNIT_STATE_LIFE)+300.)<GetUnitState(it,UNIT_STATE_LIFE)))and(not IsUnitInRange(it,m5,600.))and(P87(700.,m5,Condition(function VU7))<=2)and(not SB7(m5))and(P77(700.,GetUnitLoc(m5),Condition(function UB7))==0)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(not Id(O5))and(GetHeroLevel(it)>$A)and(hq[O5]>Bz))then
set m5=P47(1300.,b5,Condition(function V97))
if(m5!=null)then
set m5=P47(700.,PU7(m5),Condition(function k6))
set J4=(m5!=null)and(not IsUnitInRange(it,m5,300.))and(IssueTargetOrderById(it,$D0278,m5))
endif
endif
if(not J4 and Bz>TB4[O5])then
set m5=P47(TB4[64+O5],b5,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<40.)and(IssueTargetOrderById(it,$D0118,m5))
endif
if(not J4 and(GetUnitAbilityLevel(it,1093747768)>0))then
set m5=P47(TB4[64+O5],b5,Condition(function k6))
set J4=(m5!=null)and(GetRandomInt(1,2)==1)and(((P87(500.,m5,Condition(function VU7))<=2)and(PD7(it,SU[H1]))or(PD7(it,SU[S2])))or((P87(500.,m5,Condition(function VU7))<2)))and(IssueTargetOrderById(it,$D0118,m5))
endif
if(not J4)and(GetHeroLevel(it)>$A)then
set m5=P47(2000.,b5,Condition(function k6))
set J4=(m5!=null)and(Bz>TB4[16+O5])and(GetUnitLifePercent(it)>90.)and(not SB7(m5))and(not IsUnitInRange(it,m5,700.))and(((P87(900.,m5,Condition(function VU7))<=1)and(PD7(it,SU[H1]))or(PD7(it,SU[S2])))or((P87(900.,m5,Condition(function VU7))<2)))and(P87(750.,m5,Condition(function UB7))==0)and(IssueTargetOrderById(it,$D0278,m5))
endif
elseif(i1==1429221446)then
if((GetUnitAbilityLevel(it,1110454868)>0)and(P77(275.,b5,Condition(function VU7))==0))then
if((m5==null)or(not IsUnitInRange(it,m5,500.)))then
set m5=P47(500.,b5,Condition(function k6))
endif
if((m5!=null)and(G0[$80+O5]))then
call IssueTargetOrderById(it,$D000F,m5)
else
call SetPlayerAbilityAvailable(pl,1093678667,true)
call IssueImmediateOrderById(it,$D00D2)
endif
elseif(GetUnitAbilityLevel(it,1110454868)==0)then
if(P77(225.,b5,Condition(function VU7))==0)then
call SetPlayerAbilityAvailable(pl,1093678667,false)
else
call SetPlayerAbilityAvailable(pl,1093678667,true)
call IssueImmediateOrderById(it,$D00D1)
endif
endif
if(not J4)and(h4[O5]!=null)and(IsUnitInRange(it,m5,$E1))and(GetUnitLifePercent(m5)<70)then
set J4=PY7(it,$D0200,1093682764,1093747544,m5)
endif
if(not J4)and(h4[O5]!=null)and(IsUnitInRange(it,m5,300))and(GetUnitLifePercent(m5)<30)then
set J4=ZKE(it,m5)
endif
if((not J4)and(GetHeroLevel(it)>5)and(GetUnitState(it,UNIT_STATE_MANA)>=150.)and(Bz>hq[16+O5]))then
set UP=$C8+($C8*GetUnitAbilityLevel(it,1093678665))
if((m5==null)or(IsUnitIllusion(m5))or(IsUnitInRange(it,m5,200.))or(not IsUnitInRange(it,m5,UP)))then
set m5=O27(UP,b5,Condition(function VU7))
endif
set J4=(m5!=null)and(not IsUnitInRange(it,m5,200.))and((GetUnitLifePercent(m5)<80.)or(P77(500.,b5,Condition(function V47))>0)or(Bz>hq[O5]))and(ZKE(it,m5))
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(P77(400.,PU7(it),Condition(function k8))==0))then
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-$F
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+$F
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)or(i1==1311788363 or i1==1311788365)then
if(i1==1311788343 or i1==1311788355 or i1==1311788367 or i1==1311788353 or i1==1311788354)then
set UV7=UX7(900,it)
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093815361,(UV7!=null)or(GetUnitState(it,UNIT_STATE_MANA)>600 or GetUnitManaPercent(it)>70.))
set J4=(UV7!=null)and IssueTargetOrderById(it,$D0097,UV7)
if not J4 and G0[$80+O5]then
if IJ7[O5]!=null and IsUnitInRange(it,IJ7[O5],950)and P87(350,IJ7[O5],Condition(function k6))>=2 and(GetUnitLifePercent(IJ7[O5])<=60. and(N87(GetUnitTypeId(IJ7[O5]))==1 or N87(GetUnitTypeId(IJ7[O5]))==2))then
set m5=IJ7[O5]
else
set m5=UT7(800,it,0,Condition(function k6))
endif
set J4=(m5!=null)and(G0[256+O5]or(GetUnitLifePercent(m5)<30.+7*P87(600,it,Condition(function V47))+7*(P87(350,m5,Condition(function k6)))+3*(P87(350,m5,Condition(function TZ7))))or .73*GetWidgetLife(m5)<=350)or(P87(600,it,Condition(function V47))>=3)and IssueTargetOrderById(it,$D0265,m5)
if J4 then
set h4[O5]=MC7(J4,m5,h4[O5])
else
set m5=VA7(800,it,Condition(function QBF))
set J4=(m5!=null)and IssueTargetOrderById(it,$D0265,m5)
endif
endif
if not J4 then
if P87(600,it,Condition(function V47))>=4 and P87(600+100*GetUnitAbilityLevel(it,1093815877),it,Condition(function k6))>=1 and G0[256+O5]or(GetUnitLifePercent(it)<20. and SB7(it)==false)then
set J4=IssueImmediateOrderById(it,$D00D4)
endif
endif
if not J4 then
set m5=VA7($4B0,it,Condition(function VD7))
set J4=(m5!=null)and((((not J_7(m5))or GetUnitLifePercent(m5)<=25.)or(GetUnitCurrentOrder(m5)!=$D000F or(P87(600,m5,Condition(function k6))>=1 and GetUnitLifePercent(m5)<=25.)))or GetUnitState(m5,UNIT_STATE_LIFE)<=$E1)and IssueTargetOrderById(it,$D0238,m5)
endif
else
if(i1==1311788363 or i1==1311788365)then
set UV7=VA7(500+100*GetUnitAbilityLevel(it,1093815601),it,Condition(function TT7))
set m5=MC7(UV7!=null,UV7,m5)
set J4=(G0[256+O5])and(m5!=null)and(GetUnitManaPercent(it)>70 or GetUnitLifePercent(m5)<=30.)and IssueTargetOrderById(it,$D007F,m5)
if not J4 then
set m5=MC7(m5!=null,m5,VA7($7D0,it,Condition(function k6)))
if(not NA7(it,m5,90))then
set J4=(m5!=null)and(G0[$80+O5]or(GetUnitManaPercent(it)>65. or GetUnitLifePercent(m5)<80.))and IssuePointOrderById(it,$D0278,(GetUnitX(m5)+125*Cos(GetUnitFacing(m5)*bj_DEGTORAD+GetRandomReal(-.52,.52))),(GetUnitY(m5)+125*Sin(GetUnitFacing(m5)*bj_DEGTORAD+GetRandomReal(-.52,.52))))
else
set Q6F=ZR7(it,m5,$F423F,3.3,0)
set J4=(m5!=null)and(G0[256+O5]or((GetUnitManaPercent(it)>35. or GetUnitState(it,UNIT_STATE_MANA)>=320)or GetUnitLifePercent(m5)<80.))and(Q6F!=null)and IssuePointOrderByIdLoc(it,$D0278,Q6F)
endif
endif
if not J4 then
set m5=VA7(700,it,Condition(function T07))
set UV7=VA7($44C,it,Condition(function T17))
if m5!=null and UV7!=null then
if IsUnitInRange(UV7,m5,325)then
set J4=((GetUnitManaPercent(it)>=30. or GetUnitState(it,UNIT_STATE_MANA)>=225.)or(GetUnitState(m5,UNIT_STATE_LIFE)<=500 or GetUnitLifePercent(m5)<70.)or(GetUnitLifePercent(UV7)<=100.))and IssuePointOrderById(it,$D02B6,.5*(GetUnitX(m5)+GetUnitX(UV7)),.5*(GetUnitY(m5)+GetUnitY(UV7)))
else
if P87(600,UV7,Condition(function TP7))>=3 and GetUnitLifePercent(m5)>75. then
set m5=UV7
endif
set J4=(m5!=null)and((IsUnitType(m5,UNIT_TYPE_HERO) and(GetUnitLifePercent(m5)<=40. or J27(m5)))or(IsUnitType(m5,UNIT_TYPE_STRUCTURE) and P87(600,UV7,Condition(function TP7))>=2))and IssuePointOrderById(it,$D02B6,GetUnitX(m5)+GetRandomReal(0,100),GetUnitY(m5)+GetRandomReal(0,100))
endif
else
set m5=MC7(m5==null,UV7,m5)
if m5==null then
set m5=VA7($44C,it,Condition(function VG7))
endif
set J4=(m5!=null)and((IsUnitType(m5,UNIT_TYPE_HERO) and(GetUnitLifePercent(m5)<=70. or J27(m5)))or(IsUnitType(m5,UNIT_TYPE_STRUCTURE) and P87(600,UV7,Condition(function TP7))>=2))and IssuePointOrderById(it,$D02B6,GetUnitX(m5)+GetRandomReal(0,100),GetUnitY(m5)+GetRandomReal(0,100))
endif
endif
if J4 then
endif
if not J4 then
set J4=(GetUnitTypeId(it)!=1311788365)and((G0[256+O5]and P87(750,it,Condition(function k6))>=1)or eY[O5]==$A or((PD7(it,1227896388)and P87(500,it,Condition(function TZ7))>=1)or(PD7(it,1227896916)and P87(600,it,And(Condition(function TS7),Condition(function TP7)))>=1)))and GetUnitLifePercent(it)>20. and IssueImmediateOrderById(it,$D0272)
endif
endif
endif
elseif(i1==1429221445)then
call SetPlayerAbilityAvailable(pl,1093678422,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>30.)or(P77(400.,b5,Condition(function k6))>0))
if((m5!=null)and(not ke(m5))and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>200.))then
set UP=GetUnitAbilityLevel(it,1093678647)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093679184)+1
endif
set J4=(GetUnitState(m5,UNIT_STATE_LIFE)<((.2+(I2R(UP)*.2))*(GetUnitState(m5,UNIT_STATE_MAX_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))))and(PY7(it,$D007F,1093678647,1093679184,m5))
endif
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitLifePercent(it)<85.)and(GetUnitManaPercent(it)>35.))then
set J4=((P77(400.,b5,Condition(function KA))>0)or(P77(400.,b5,Condition(function KC))>0))and(IssueImmediateOrderById(it,$D022E))
endif
if((not J4)and(hq[$F0+O5]>Bz))then
set J4=(P77(400.,b5,Condition(function KA))>1)and(PC7(it,$D022E,1093678422))
endif
if((not J4)and(GetUnitManaPercent(it)>35.)and(GetUnitState(it,UNIT_STATE_MANA)>250.))then
set m5=O27(400.,b5,Condition(function U_7))
set J4=(m5!=null)and(((GetUnitLevel(it)>4)and(GetUnitLifePercent(m5)<80.))or(GetUnitLifePercent(m5)<55.))and(PC7(it,$D022E,1093678422))
endif
elseif(i1==1332963428)then
if(GetHeroLevel(it)>2)then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(900.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)>60.))then
set J4=((P87(600.,m5,Condition(function VG7))>0)or((P87(800.,m5,Condition(function U_7))==0)and(P87(800.,m5,Condition(function Ko))==0)and(GetUnitManaPercent(it)>65.)))and(PW7(it,$D0103,1093678169,m5))
endif
if((not J4)and(GetHeroLevel(it)>8)and(m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<80.)and(IsUnitInRange(it,m5,600.)))then
set J4=(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5])and(P77(600.,b5,Condition(function V47))>0)and(PW7(it,$D0200,1093677649,m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(m5!=null)and(kq(GetUnitTypeId(m5))))then
set J4=PW7(it,$D007F,1093816137,m5)
endif
if(GetUnitLifePercent(it)<85.)then
if((m5==null)and(GetUnitManaPercent(it)>70.)and(P77(1200.,b5,Condition(function k6))==0))then
set m5=O27(600.,b5,Condition(function KA))
endif
set J4=(m5!=null)and(PW7(it,$D0097,1093683019,m5))
endif
endif
elseif(i1==1332109682)then
if((G0[$80+O5])and(PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and((GetUnitLifePercent(m5)<70.)or(GetUnitAbilityLevel(m5,1112432994)>0)or(Bz>hq[O5]))and(not IsUnitInRange(it,m5,300.))and(IsUnitInRange(it,m5,700.)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
if(GetHeroLevel(it)>4)then
if((m5==null)and(G0[$80+O5])and(GetUnitManaPercent(it)>40.))then
set m5=O27(800.,b5,Condition(function k6))
endif
else
call SetPlayerAbilityAvailable(pl,1093678134,false)
endif
if((not J4)and(m5!=null)and((GetHeroLevel(it)>5)or(O37(m5))))then
set J4=((GetUnitManaPercent(it)>30.)and(PW7(it,$D02B6,1093678134,m5)))or((GetUnitLifePercent(m5)<50.)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(PC7(it,$D026C,1093810505)))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set J4=(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(P77(600.,b5,Condition(function U_7))>0)and(Kz(600.,b5)>1)and(PC7(it,$D026C,1093810505))
if(not J4)then
set m5=P47(800.,b5,Condition(function V97))
set J4=((m5!=null)and(P87(600.,it,Condition(function k6))>0)and(PC7(it,$D026C,1093810505)))
endif
endif
if((not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70.))and(IsUnitInRange(it,m5,300)))then
set J4=((GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093810505,4)+60)or(Bz+$A<TB4[O5]))and(IssueImmediateOrderById(it,$D00C4))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093810505,4)+$96))and(GetUnitAbilityLevel(it,1093808694)>1)and(P87(400.,it,Condition(function TZ7))>3))then
set J4=(IssueImmediateOrderById(it,$D00C4))
endif
elseif(i1==1211117640)then
if(h4[16+O5]!=null)then
if((OA7(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110454606)>0))then
set J4=(OBF(it,h4[16+O5]))or(IssueTargetOrderById(it,$D0079,h4[16+O5]))
call P7F(it,h4[16+O5])
else
set h4[16+O5]=null
endif
elseif((m5!=null)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,500.))and((GetHeroLevel(it)>4)))then
set J4=(GetUnitAbilityLevel(m5,1110454606)==0)and(GetUnitState(it,UNIT_STATE_MANA)>250.)and(Bz>hq[O5])and(PW7(it,$D0206,1093681989,m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(Bz>hq[16+O5])and(P77(I2R(270+($FA*GetUnitAbilityLevel(it,1093679428))),b5,Condition(function k6))>0))then
set GZ[O5]=true
set J4=J8(O5,PC7(it,$D0272,1093679428))
endif
if((not J4)and(GetHeroLevel(it)>5)and((m5!=null)or(GetUnitLifePercent(it)<70.)))then
if((m5==null)or(IsUnitIllusion(m5)))then
if(P77(800.,b5,Condition(function k6))==0)then
set m5=O27(500.,b5,Condition(function KA))
set J4=(m5!=null)and(GetUnitLifePercent(m5)>80.)and(PY7(it,$D0207,1093681987,1093677658,m5))
endif
elseif((IsUnitInRange(it,m5,400.))and((GetUnitLifePercent(m5)<50.)or(GetUnitAbilityLevel(m5,1110454606)>0)))then
set J4=PY7(it,$D0207,1093681987,1093677658,m5)
endif
if((not J4)and(iy(it)))then
call SetPlayerAbilityAvailable(pl,1093681987,true)
call SetPlayerAbilityAvailable(pl,1093677658,true)
endif
else
call SetPlayerAbilityAvailable(pl,1093681987,false)
call SetPlayerAbilityAvailable(pl,1093677658,false)
endif
elseif(i1==1430468406)then
call SetPlayerAbilityAvailable(pl,kT(it),(GetHeroLevel(it)>$A)and((GetUnitManaPercent(it)>60.)or(m5!=null)))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>40.))or(OB7(m5,it))))then
set J4=PW7(it,$D00FA,kT(it),m5)
endif
if((not J4)and(GetHeroLevel(it)>5)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(G0[$80+O5]))then
set J4=(Kz(500.,b5)>1)and(hq[416+O5]>Bz)and(IssueImmediateOrderById(it,$D024C))
if((not J4)and(m5!=null)and(PD7(it,SU[QW]))and(G0[$80+O5])and(GetHeroLevel(it)>$D)and(GetUnitLifePercent(it)>70.)and(GetUnitManaPercent(it)>30.))then
set h4[16+O5]=m5
set J4=O6F(it,m5)
endif
endif
elseif(i1==1160786241)then
if(GetUnitManaPercent(it)<50.)then
if(GetUnitAbilityLevel(it,1110455882)>0)then
call IssueImmediateOrderById(it,$D00D2)
endif
call SetPlayerAbilityAvailable(pl,1093684805,false)
elseif((GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)>70.))then
call SetPlayerAbilityAvailable(pl,1093684805,true)
if((GetUnitAbilityLevel(it,1110455882)==0)and(hG[O5]>$E)and(not L and not RY4))then
call IssueImmediateOrderById(it,$D00D1)
endif
endif
call SetPlayerAbilityAvailable(pl,1093684813,(m5==null)and(GetHeroLevel(it)>7)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))
if(m5!=null)then
set J4=((GetHeroLevel(it)>4)or(OB7(m5,it)))and((((GetUnitCurrentOrder(m5)==$D0005)or(IsUnitInRange(it,m5,200.)))and(not IsUnitIllusion(m5))and(PW7(it,$D0079,1093684815,m5)))or((GetUnitLifePercent(m5)<70.)and(PW7(it,$D0097,1093684813,m5))))
if((not J4)and(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not kr(it)))then
set UP=Kz(700.,PU7(m5))
if((UP>2)or((UP>1)and(P77(700.,b5,Condition(function U_7))>0)))then
set J4=((P77(700.,b5,Condition(function U_7))>0)and(PW7(it,$D0097,1093684813,m5)))or(PY7(it,$D0275,1093684820,1093684824,m5))
endif
endif
endif
elseif(i1==1429221456)then
if((m5!=null)and(GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5]))then
set UP=Kz(700.,PU7(m5))
if((UP>2)or((UP>1)and(P77(730.,b5,Condition(function V47))>0)))then
set J4=PY7(it,$D0079,1093685067,1093752407,m5)
endif
endif
elseif(i1==1160786243)then
call SetPlayerAbilityAvailable(pl,1093678672,GZ[O5])
set m5=O27(600.,b5,Condition(function V97))
if(m5==null)then
set m5=O27(500.,b5,Condition(function U_7))
endif
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and(P77(900.,b5,Condition(function k6))>0)and(IssueTargetOrderById(it,$D0118,m5))
set m5=h4[O5]
if((not J4)and(m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and(GetUnitLifePercent(it)>70.))then
set m5=O27(800.,b5,Condition(function k6))
endif
if(not J4)then
set J4=((GetUnitLifePercent(it)<65.)and(IssueTargetOrderById(it,$D0118,it)))or((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))or(OB7(m5,it)))and(IssueTargetOrderById(it,$D0118,m5)))
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5))then
set UP=Kz(700.,PU7(m5))
if((UP>2)or(GetUnitLifePercent(m5)<50.)or((UP>1)and(P87(700.,m5,Condition(function V47))>0)))then
set GZ[O5]=true
set J4=J8(O5,PW7(it,$D0100,1395667000,m5))
endif
if((not J4)and(OB7(m5,it))and(GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)>60.)and(P87(700.,m5,Condition(function V47))>0))then
if((not IsUnitInRange(it,m5,250.))and(PD7(it,SU[QW]))and(G0[$80+O5])and(Bz>hq[16+O5]))then
set J4=O6F(it,m5)
endif
if(not J4)then
set GZ[O5]=true
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(it),GetUnitX(h8[O5])-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093678672,true)
set J4=J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD)))
endif
endif
endif
elseif(i1==1160786242)then
call SetPlayerAbilityAvailable(pl,1093683287,(GetHeroLevel(it)>3)or((m5!=null)and(OB7(m5,it))))
set J4=(m5!=null)and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and(IssueTargetOrderById(it,$D02B6,m5))
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function k7))
set J4=(m5!=null)and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<50+($F*GetHeroLevel(it)))and(IssueImmediateOrderById(it,$D020A))
endif
if((not J4)and(Bz<=hq[$F0+O5])and((hq[$F0+O5]-Bz)<2.5)and(not IC(O5))and(not Id(O5)))then
set m5=P47(2500.,b5,Condition(function k7))
set J4=(m5!=null)and(O07(m5,it))and(not IsUnitInRange(m5,it,800.))and((P87(800.,m5,Condition(function k6))-P87(800.,m5,Condition(function V47))<=1))and(P87(1000.,m5,Condition(function UB7))==0)and(IssueTargetOrderById(it,$D00D9,m5))
endif
elseif((i1==1211117641)or(i1==1211117642))then
if(i1==1211117642)then
set J4=((not IsUnitInRange(it,G7[O5],3000.))and(IssueTargetOrderById(it,$D0249,G7[O5])))or(((eY[O5]==2)or(G0[16+O5]))and(PV7(it,$D0012,h9[O5])))
if((not J4)and(kA(it,G7[O5],800.)))then
call PV7(it,$D0012,h9[O5])
endif
set UP=1
else
set UP=0
endif
if(not J4)and(h4[O5]!=null)and(not BK8(m5))then
set J4=O5F(it,m5)
endif
if(not J4)then
if(h4[O5]!=null)and(BK8(m5))and(IsUnitInRange(it,m5,300))then
set J4=IssuePointOrderByIdLoc(it,$D0249,PU7(m5))
endif
if not J4 then
set UV7=VA7(300,it,Condition(function TZ7))
set J4=(UV7!=null)and(GetUnitManaPercent(it)>=65.)and(GetHeroLevel(it)>=$C)and(GetRandomReal(0,100)<=75 and IssuePointOrderByIdLoc(it,$D0249,PU7(m5)))
endif
endif
if((not J4)and(GetHeroLevel(it)>8)and(m5!=null)and(GetUnitAbilityLevel(m5,1110456120)==0))then
if((Kz(700.,PU7(m5))>1)or(P87(500.,m5,Condition(function V47))>UP))then
set J4=O5F(it,m5)
endif
endif
if((not J4)and(GetHeroLevel(it)>2)and(P77(800.,b5,Condition(function V97))>0))then
set m5=O27(800.,b5,Condition(function k6))
set J4=(m5!=null)and(O5F(it,m5))
endif
if(not J4)and(i1==1211117641)and(GetUnitManaPercent(it)>70)and(P77(300.,PU7(it),Condition(function TZ7))>2)then
set J4=IssuePointOrderByIdLoc(it,$D0249,PU7(m5))
endif
elseif(i1==1311781207)then
set J4=((GetUnitLifePercent(it)<80.)and(IssueTargetOrderById(it,$D0105,it)))or((m5!=null)and(GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and(PW7(it,$D007F,1093684817,m5)))
if((not J4)and(GetHeroLevel(it)>3))then
set m5=O27(800.,b5,Condition(function V97))
if(m5==null)then
set m5=O27(600.,b5,Condition(function U_7))
endif
if((m5!=null)and(not IsUnitIllusion(m5)))then
set UP=R2I(GetUnitLifePercent(m5))
if((UP<50)and(GetHeroLevel(it)>$A)and(Bz>hq[O5]))then
set J4=(P87(800.,m5,Condition(function k6))>0)and((IssueTargetOrderById(it,$D0238,m5))or(IssueTargetOrderById(it,$D0105,m5)))
elseif(UP<70)then
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0105,m5))
endif
elseif((GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>75.))then
set m5=O27(600.,b5,Condition(function Kd))
set J4=(m5!=null)and(P87(300.,m5,Condition(function k8))>1)and(IssueTargetOrderById(it,$D0105,m5))
endif
endif
elseif(i1==1311780946)then
call SetPlayerAbilityAvailable(pl,1093677385,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>55.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=O27(700.,b5,Condition(function k6))
endif
if(m5!=null)then
set J4=(((GetUnitLifePercent(m5)<50.)or(IsUnitInRange(it,m5,250.)))and(PW7(it,$D0208,1093685825,m5)))or((P87(300.,it,Condition(function DD8))>1)and(PC7(it,$D022E,1093810232)))
if((not J4)and((GetUnitCurrentOrder(m5)==$D0005)or(IsUnitInRange(it,m5,300.))or(GetUnitLifePercent(m5)<50.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093677385,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D010E,GetUnitX(m5)+150.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+150.*Sin(UP*bj_DEGTORAD)))
endif
endif
if(not J4)then
set m5=P47(700.,b5,Condition(function V97))
set J4=(m5!=null)and(P87(400.,m5,Condition(function k6))>0)and(PW7(it,$D0208,1093685825,m5))
endif
if((not J4)and(GetHeroLevel(it)>9)and((eY[O5]==3)or(eY[O5]==4)or(GetUnitManaPercent(it)>60.)))then
set m5=P47(700.,b5,Condition(function k8))
set J4=(m5!=null)and(P87(300.,m5,Condition(function k8))>2)and(P87(400.,it,Condition(function DD8))>2)and(PC7(it,$D022E,1093810232))
endif
if((not J4)and(is(it))and(GetHeroLevel(it)>9))then
set UP=R2I(N37(it,PL7(it)))
if((UP>$7D0)and(UP<$DAC)and(eY[O5]==1)and(GetUnitAbilityLevel(it,1093685808)>1))then
if(h8[16+O5]==h7[$E])then
set J4=OOF(0)
elseif(h8[16+O5]==h7[35])then
set J4=OOF(1)
elseif(h8[16+O5]==h7[55])then
set J4=OOF(2)
endif
elseif(((eY[O5]==3)or(eY[O5]==4))and(UP>5000)and(P77(1200.,b5,Condition(function k6))==0))then
set J4=OOF(3)
endif
endif
elseif((i1==1211117650)or(i1==1211119433))then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=P47(700.,b5,Condition(function k6))
endif
if((h4[O5]!=null)or OB7(it,m5))and(IsUnitInRange(it,m5,300.))then
set J4=(Bz>TB4[O5])and(PC7(it,$D00D4,1093743946))
endif
if(not J4)and(Bz>TB4[48+O5])and((GZ[$D0+O5])or(GetUnitState(it,UNIT_STATE_MANA)>300.)or(h4[O5]!=null))then
set IM4=it
set UV7=(VA7($E1+$AF*GetUnitAbilityLevel(it,1093743958),it,Condition(function k6)))
set I67=P87(25+$C8+$C8*GetUnitAbilityLevel(it,1093743958),it,Condition(function k6))
set bj_forLoopAIndex=P77(25+$C8+$C8*GetUnitAbilityLevel(it,1093743958),b5,Condition(function LW7))
if((I67>=1+M17(P87(800,it,Condition(function T57))>=3,2,0)and(bj_forLoopAIndex>=R2I(($A-.1*GetUnitLifePercent(it)))or P87(800,it,Condition(function T57))>=3))and h4[O5]!=null)then
set J4=(P87(800,it,Condition(function T57))>=2 or(GetWidgetLife(UV7)<=400. or GetUnitLifePercent(UV7)<=30.))and PX7(it,$D02B6,1093743958,b5)
endif
endif
if(not J4)and(Bz>TB4[32+O5])then
set IM4=it
set UP=P77(1000.,b5,Condition(function ny))
if((not J4)and(UP>=4)and(h4[O5]!=null)and(GetUnitLifePercent(it)>50.))then
set m5=h4[O5]
set J4=(((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.))or(OB7(m5,it)))and(IssueTargetOrderById(it,$D02BD,m5))
endif
if((not J4)and(UP>=4)and(GetUnitManaPercent(it)>40.))then
set m5=O27(800.,b5,Condition(function V97))
if(m5==null)then
set m5=O27(600.,b5,Condition(function U_7))
endif
set J4=(m5!=null)and(((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.))or(O37(m5)))and(IssueTargetOrderById(it,$D02BD,m5))
endif
if(not J4)then
set J4=(UP>=3)and(GetUnitLifePercent(it)<75.)and(IssueTargetOrderById(it,$D02BD,it))
endif
endif
if(not J4)and((h4[O5]!=null)or(GetUnitState(it,UNIT_STATE_MANA)>400)or O37(m5))and(GetUnitState(it,UNIT_STATE_MANA)>$C8)then
set J4=(Bz>TB4[16+O5])and(PW7(it,$D0079,1093743955,h4[O5]))
endif
elseif(i1==1211119187)then
if(not J4)and(GetUnitLevel(it)>5)and(Bz>TB4[O5])and(h4[O5]!=null)then
if(not J4)and(ZR7(it,h4[O5],650.,.5,1300.)!=null)then
if((OB7(it,h4[O5])or GetUnitLifePercent(h4[O5])<50.)and(N67(GetUnitX(it),GetUnitY(it),GetLocationX(DF7),GetLocationY(DF7))>600.))then
set J4=PX7(it,$D02B6,1093742923,DF7)
endif
endif
if(not J4)then
set m5=V27(it)
if(m5!=null)and(ZR7(it,m5,650.,.5,1300.)!=null)and(N67(GetUnitX(it),GetUnitY(it),GetLocationX(DF7),GetLocationY(DF7))>600.)then
set J4=PX7(it,$D02B6,1093742923,DF7)
endif
endif
if(not J4)then
set m5=h4[O5]
if(m5==null)then
set m5=VY7(1500.,it)
endif
if(m5!=null)and(GZ[$D0+O5]or(GetUnitLifePercent(it)<50.)or((GetUnitLifePercent(m5)<50)and(ZR7(it,m5,650.,.5,1300.)!=null)and(N67(GetUnitX(it),GetUnitY(it),GetLocationX(DF7),GetLocationY(DF7))>600.)))then
set J4=PX7(it,$D02B6,1093742923,PU7(m5))
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
endif
endif
set m5=h4[O5]
if m5==null then
set m5=VY7(1300.,it)
endif
if(not J4)and(not IsUnitIllusion(m5))and(Bz>TB4[32+O5])and((Bz>TB4[16+O5])or(GetUnitAbilityLevel(it,1093742926)<=1)or(GetUnitState(it,UNIT_STATE_MANA)<=120.))and((h4[O5]!=null and GetUnitLifePercent(h4[O5])<50.)or((m5!=null)and(O37(m5))))then
set J4=IssueTargetOrderById(it,$D0265,m5)
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(Bz>TB4[16+O5])and(TB4[32+O5]>Bz+2. or(GetUnitAbilityLevel(it,1093743414)>1 and h4[O5]==null)or(h4[O5]!=null and GetUnitLifePercent(h4[O5])>80.)or(GetUnitAbilityLevel(it,1093742926)<=1))and(m5!=null)and((h4[O5]!=null)or(OB7(m5,it))or((GetUnitManaPercent(it)>50.)and(GetUnitLifePercent(m5)<70. or GetUnitState(it,UNIT_STATE_MANA)>400.)))then
if ZT7(it,m5,2.,1500.)!=null then
set J4=PX7(it,$D0079,1093743414,DF7)
set h4[16+O5]=m5
endif
endif
elseif(i1==1211117646)then
call SetPlayerAbilityAvailable(pl,1093685573,(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>70.)and(P77(700.,b5,Condition(function k6))==0))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=P47(700.,b5,Condition(function k6))
endif
if((m5!=null)and((GetUnitLifePercent(m5)<60.)or((GetHeroLevel(it)>4)and((GetUnitManaPercent(it)>60.)or(P87(600.,m5,Condition(function U_7))>0)))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093685573,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(m5)+(50.+100.*GetUnitAbilityLevel(it,1093685573))*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+(50.+100.*GetUnitAbilityLevel(it,1093685573))*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>50.)and(GetRandomInt(1,4)==1))then
set m5=O27(700.,b5,Condition(function Kd))
set J4=(m5!=null)and(GetUnitLifePercent(m5)>65.)and(IsUnitType(m5,UNIT_TYPE_MELEE_ATTACKER))and(P87(250.,m5,Condition(function k8))>2)and(IssueTargetOrderById(it,$D007F,m5))
endif
if(not J4)then
set m5=P47(700.,b5,Condition(function V97))
set J4=(m5!=null)and(P87(250.,m5,Condition(function k6))>0)and(PW7(it,$D0085,1093685815,m5))
endif
if(not J4)then
set m5=P47(700.,b5,Condition(function k7))
if(m5!=null)then
set m5=P47(700.,PU7(m5),Condition(function U_7))
set J4=((m5!=null)and(IsUnitAlly(m5,GetOwningPlayer(it)))and(PW7(it,$D0085,1093685815,m5)))or(PW7(it,$D0085,1093685815,it))
endif
endif
if((not J4)and(GetHeroLevel(it)>14.)and(Bz>hq[O5])and(hq[416+O5]>Bz))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=P47(1000.,b5,Condition(function k7))
if(m5!=null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D00DE,GetUnitX(m5)+300*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300*Sin(UP*bj_DEGTORAD))
else
set m5=P47(1000.,b5,Condition(function k6))
if(m5!=null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[16+O5])-GetUnitY(m5),GetUnitX(h9[16+O5])-GetUnitX(m5)))
set J4=IssuePointOrderById(it,$D00DE,GetUnitX(m5)+300*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300*Sin(UP*bj_DEGTORAD))
endif
endif
endif
endif
elseif(i1==1211117624)then
call SetPlayerAbilityAvailable(pl,1093683024,(GetHeroLevel(it)>$A)and((GetUnitManaPercent(it)>70.)or(m5!=null)))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
set m5=P47(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((IsUnitInRange(it,m5,600.))and((OB7(m5,it))or(GetUnitState(it,UNIT_STATE_MANA)>100 and GetUnitManaPercent(it)>40)or(GetUnitLifePercent(m5)<60))and(PC7(it,$D022E,1093683024)))
set J4=(m5!=null)and(((GetUnitLifePercent(m5)<40.)or((GetUnitAbilityLevel(m5,1110454869)==0)and(hq[416+O5]>Bz)))and(IssueTargetOrderById(it,$D0278,m5)))
elseif(i1==1160785973)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(600.,b5,Condition(function k6))
if((m5==null)and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>30.)and(PD7(it,SU[QW])))then
set m5=O27(1200.,b5,Condition(function k6))
endif
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(G0[$80+O5]))then
if(IsUnitInRange(m5,it,500.))then
set UP=P77(700.,b5,Condition(function k8))-P77(700.,b5,Condition(function k6))
set J4=(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(IssueImmediateOrderById(it,$D0278))
if J4 then
call TriggerSleepAction(0)
call PW7(it,$D0107,1093678130,m5)
endif
elseif((PD7(it,SU[QW]))and(G0[$80+O5])and(IsUnitInRange(m5,it,1000.))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>30.))then
set UP=P87(700.,m5,Condition(function k8))-P87(700.,m5,Condition(function k6))
set h4[16+O5]=m5
set J4=(UP<2)and(GetUnitAbilityLevel(m5,1110454580)==0)and(O6F(it,m5))
endif
endif
if((not J4)and(OB7(m5,it)))then
set J4=(PW7(it,$D0107,1093678130,m5))
endif
if((not J4)and(GetHeroLevel(it)>20))then
set J4=(GetUnitState(it,UNIT_STATE_MANA)>450.)and(PW7(it,$D0107,1093678130,m5))
endif
endif
elseif(i1==1315988077)then
if((G0[$80+O5])and(PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>2))then
set J4=((OB7(m5,it))and(PW7(it,$D0269,1097032808,m5)))or((IsUnitInRange(it,m5,200.))and(PC7(it,$D0080,1093678669)))
endif
call SetPlayerAbilityAvailable(pl,1093678669,(GetHeroLevel(it)>$C)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=P47(800.,b5,Condition(function k6))
if(m5!=null)then
set J4=((kq(GetUnitTypeId(m5)))and(PW7(it,$D0269,1097032808,m5)))or((IsUnitInRange(it,m5,200.))and(PC7(it,$D0080,1093678669)))
endif
endif
endif
elseif(i1==1211117616)then
if((G0[$80+O5])and(PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,700.)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
if((not J4)and(m5!=null)and IsUnitInRange(it,m5,500))then
set J4=((GetHeroLevel(it)>5)and(GetUnitLifePercent(m5)<70.)and((GetUnitState(m5,UNIT_STATE_LIFE)+1000.)<GetUnitState(it,UNIT_STATE_LIFE))and(PW7(it,$D0107,1093816142,m5)))or((IsUnitInRange(it,m5,200.))and(GetHeroLevel(it)>3)and(PC7(it,$D009F,1093677139)))
elseif(not J4)and(m5==null or(not IsUnitInRange(it,m5,800)))then
set UV7=UD7(300,$BE,it,0,Condition(function TZ7),Condition(function TQ7))
set J4=(UV7!=null)and(GetUnitLifePercent(it)>=70. or GetWidgetLife(it)>950.)and(GetHeroLevel(it)>=4)and(GetRandomReal(0,100)<=40 and PW7(it,$D0107,1093816142,UV7))
endif
call SetPlayerAbilityAvailable(pl,1093677139,(GetHeroLevel(it)>$C)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
if(not J4)then
set UV7=P47(800.,b5,Condition(function TC7))
if(GetUnitLifePercent(it)<20.)or(((G0[256+O5])and GetUnitState(it,UNIT_STATE_LIFE)>=300. and UV7!=null and GetUnitLifePercent(UV7)<=70.))then
set J4=IssueImmediateOrderById(it,$D022E)
if(h4[O5]==null or(not IsUnitInRange(it,h4[O5],$5DC)))and GetUnitLifePercent(it)>30. then
set h4[O5]=MC7(((m5!=null or UV7==null)and(IsUnitInRange(m5,it,$3E8))and(GetUnitState(m5,UNIT_STATE_LIFE)<GetUnitState(UV7,UNIT_STATE_LIFE))),m5,UV7)
endif
endif
endif
elseif(i1==1315074670)then
if((m5!=null)and(GetUnitManaPercent(it)>60.)and(kP(GetUnitTypeId(m5)))and(GetUnitCurrentOrder(it)!=$D000F))then
set J4=PW7(it,$D0270,1093685570,m5)
endif
if((m5==null)and(not J4)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(PW7(it,$D0113,1093677622,m5))
if((not J4)and(PD7(it,SU[B0]))and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.)and(G0[$80+O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=O27(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(not PD7(m5,SU[LV]))and(GetUnitTypeId(m5)!=1212365106)and(not IsUnitInRange(it,m5,800.))and(IsUnitInRange(it,m5,1500.))and(P87(600.,m5,Condition(function VG7))>0)or((GetUnitLifePercent(m5)<75.)and(P87(1000.,m5,Condition(function UB7))==0)))then
set h4[288+O5]=m5
set GZ[272+O5]=true
set J4=UnitUseItem(it,PH7(it,SU[B0]))
set GZ[272+O5]=J4
endif
endif
elseif((i1==1215063922)or(i1==1211117638)or(i1==1211117637)or(i1==1211117639))then
call SetPlayerAbilityAvailable(pl,1093677894,(GetHeroLevel(it)>6)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
if(i1!=1215063922)then
set m5=O27(1000.,b5,Condition(function k6))
call ZSE(O5,m5,false,false)
elseif((GetHeroLevel(it)>3)and(GetUnitManaPercent(m5)>70.))then
set m5=O27(700.,b5,Condition(function k6))
endif
endif
set J4=(m5!=null)and((GetUnitLifePercent(m5)<60)or(h4[O5]!=null))and(PW7(it,$D007F,1093681490,m5))
set J4=(m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>40.))or(O37(m5)))and(PW7(it,$D0264,1093677894,m5))
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(900.,it,Condition(function k6))
set J4=(m5!=null)and(GetUnitLifePercent(m5)<80.)and(PC7(it,$D00D4,1093677895))
endif
endif
elseif(i1==1164207469)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set m5=O27(800.,b5,Condition(function k6))
endif
if((m5!=null)and(GetHeroLevel(it)>5))then
if(((GetUnitManaPercent(m5)<15.)and(GetUnitLifePercent(m5)<50.))or(GetUnitState(m5,UNIT_STATE_LIFE)<((GetUnitState(m5,UNIT_STATE_MAX_MANA)-GetUnitState(m5,UNIT_STATE_MANA))*(.35+(I2R(GetUnitAbilityLevel(it,1093682483))*.25)))))then
set J4=(not IsUnitIllusion(m5))and(not ke(m5))and(PW7(it,$D007F,1093682483,m5))
endif
if((not J4)and(GetUnitLifePercent(m5)<70.)and(G0[$80+O5])and(not IsUnitInRange(m5,it,300.))and(GetUnitLifePercent(it)>70.)and(P87(800.,m5,Condition(function UB7))==0)and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1))then
set QLF=kL(it,m5,200.)
set J4=(QLF!=null)and(IssuePointOrderByIdLoc(it,$D022D,QLF))
endif
endif
if((not J4)and(GetHeroLevel(it)>11.)and(GetUnitManaPercent(it)>70.)and(iy(it))and(P77(1400.,b5,Condition(function Ky))==0)and(eY[O5]==1))then
set QLF=kk(it,800.,h8[O5])
set J4=(QLF!=null)and(IssuePointOrderByIdLoc(it,$D022D,QLF))
endif
elseif(i1==1433631084)then
call SetPlayerAbilityAvailable(pl,1093678644,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>70.))
if((GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if(m5==null)then
set m5=O27(1200.+(500.*GetUnitAbilityLevel(it,1093678160)),b5,Condition(function k7))
endif
set J4=(m5!=null)and(not IsUnitIllusion(m5))and(not ke(m5))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<($C8+($96*GetUnitAbilityLevel(it,1093678160))))and(PW7(it,$D007F,1093678160,m5))
if((not J4)and(hq[416+O5]>Bz)and(GetHeroLevel(it)>$A)and(P77(800.,b5,Condition(function V47))>0))then
if(m5==null)then
set m5=O27(1200.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(not IsUnitIllusion(m5))and(PW7(it,$D007F,1093678160,m5))
endif
endif
elseif(i1==1214345830)then
call SetPlayerAbilityAvailable(pl,1093679190,P77(1000.,b5,Condition(function k6))>0)
set m5=O27(800.,b5,Condition(function V97))
if(m5==null)then
set m5=O27(600.,b5,Condition(function U_7))
endif
if((m5!=null)and(GetUnitLifePercent(m5)<70.))then
set J4=(((GetHeroLevel(it)>4)or(OB7(m5,it)))and(PW7(it,$D0101,1093679182,m5)))or((GetUnitLifePercent(m5)<40.)and(P87(600.,m5,Condition(function k6))>0)and(PW7(it,$D00DA,1093679190,m5)))
endif
if((not J4)and(GetHeroLevel(it)>$C)and(hq[416+O5]>Bz)and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and(P87(600.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0277))
endif
endif
if(not J4)then
set J4=(GetUnitLifePercent(it)<75.)and(PW7(it,$D0101,1093679182,it))
endif
if((not J4)and(GetHeroLevel(it)>$A))then
set m5=O27(450.,b5,Condition(function UB7))
if((m5!=null)and(GetUnitLifePercent(m5)<30.)and(GetUnitLifePercent(m5)>10.))then
set J4=(P77(600.,b5,Condition(function KC))>4)and(IssueImmediateOrderById(it,$D0277))
endif
endif
elseif((i1==1311781174)or(i1==1311781175)or(i1==1311781442))then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(700.,b5,Condition(function k6))
if(GetUnitAbilityLevel(it,1110454338)>0 or OB7(it,m5))then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(h4[O5]!=null)then
if(i1==1311781174)then
set J4=(IsUnitInRange(it,h4[O5],500.)and(PC7(it,$D022E,1093748042)))
else
set J4=(IsUnitInRange(it,h4[O5],200.)and(PC7(it,$D022E,1093748042)))
endif
endif
if(not J4)and(h4[O5]!=null)then
if(i1==1311781174)then
set J4=PW7(it,$D00FA,1093808461,m5)
else
set J4=(IsUnitInRange(it,h4[O5],400.)and(PC7(it,$D0080,1093808462)))
endif
endif
if(not J4)then
if(m5!=null)and(IsUnitInRange(it,m5,200.))then
if(i1==1311781174)then
set J4=(PC7(it,$D00AA,1093681733))
if J4 then
set i1=1311781175
endif
endif
elseif(m5!=null)and((GetUnitLifePercent(m5)<15.)or((not G0[256+O5])and(MP7(it)<2000.)))then
if(i1!=1311781174)then
set J4=(PC7(it,$D00AB,1093681733))
if J4 then
set i1=1311781174
endif
endif
elseif(h4[O5]!=null)and(not IsUnitInRange(it,m5,200.))and(Bz>TB4[32+O5])then
if(i1!=1311781174)then
set J4=(PC7(it,$D00AB,1093681733))
if J4 then
set i1=1311781174
endif
endif
elseif(GetHeroLevel(it)>=6 or h4[O5]!=null)and(PM7(it,SU[A1]))then
set J4=(i1==1311781174)and(PC7(it,$D00AA,1093681733))
else
set J4=(i1!=1311781174)and(PC7(it,$D00AB,1093681733))
endif
endif
elseif(i1==1315007329)then
set J4=GetUnitAbilityLevel(it,1110455864)>0
if((m5==null)or(GetUnitLifePercent(m5)>50.))then
set m5=K3(1000.,it,Condition(function k6))
endif
if((not J4)and(m5!=null))then
set J4=(((GetUnitState(m5,UNIT_STATE_LIFE)<hq[272+O5])or((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>55.)))and(PW7(it,$D007F,1093677108,m5)))or((GetUnitAbilityLevel(m5,1110454348)==0)and((GetUnitLifePercent(m5)<75.)or((GetHeroLevel(it)>$B)and(GetUnitState(it,UNIT_STATE_MANA)>250.)))and(not IsUnitIllusion(m5))and(PW7(it,$D00B5,1093681716,m5)))
endif
if((not J4)and(GetHeroLevel(it)>8)and(G0[$80+O5])and(Bz>hq[O5]))then
if((m5==null)and(GetUnitLifePercent(it)>70.))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1500.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=P47(1500.,b5,Condition(function KK))
endif
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not kD(m5))and(GetUnitTypeId(m5)!=1212365106)and((not IsUnitInRange(it,m5,600.))or(not IsUnitVisible(it,GetOwningPlayer(m5))))and(IsUnitInRange(it,m5,1500.))and((GetUnitLifePercent(m5)<70.)or(P87(650.,m5,Condition(function VG7))>0)))then
set h4[288+O5]=m5
set J4=(P87(800.,m5,Condition(function UB7))==0)and(IssueImmediateOrderById(it,$D00A1))
endif
endif
elseif(i1==1332898670)then
call SetPlayerAbilityAvailable(pl,1093677360,(GetHeroLevel(it)>7)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5]))then
set m5=O27(900.,b5,Condition(function k6))
endif
if((m5!=null)and((OB7(m5,it))or((GetUnitLifePercent(m5)<70.)and(P87(500.,m5,Condition(function U_7))>0))))then
set J4=(IsUnitInRange(it,m5,400)or BK8(m5))and(PW7(it,$D0200,1093677136,m5))
endif
if((not J4)and(m5!=null)and((GetHeroLevel(it)>3)or(OB7(m5,it))))then
set J4=((GetUnitLifePercent(m5)<70.)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(PW7(it,$D0216,1093685848,m5)))or((GetUnitManaPercent(it)>60.)and(PW7(it,$D026B,1093677360,m5)))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
if((m5==null)or(GetUnitCurrentOrder(m5)!=$D0005)or(not IsUnitInRange(it,m5,500.)))then
set m5=O27(900.,b5,Condition(function KM))
endif
if(m5!=null)then
set GZ[O5]=true
set J4=J8(O5,PY7(it,$D0218,1093677128,1093681457,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>17)and(Bz>hq[O5]))then
set m5=P47(900.,b5,Condition(function UB7))
if((m5!=null)and(GetUnitLifePercent(m5)<55.)and(GetUnitLifePercent(m5)>15.)and(P87(800.,m5,Condition(function KC))>2))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093677128,true)
call SetPlayerAbilityAvailable(pl,1093681457,true)
set J4=IssuePointOrderById(it,$D0218,GetUnitX(m5)+300.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+300.*Sin(UP*bj_DEGTORAD))
set GZ[O5]=false
endif
endif
elseif(i1==1215723364)then
call SetPlayerAbilityAvailable(pl,1093744463,GetUnitManaPercent(it)>60.)
if((m5!=null)and((GetHeroLevel(it)>4)or(OB7(m5,it))))then
set J4=PW7(it,$D007F,1093677633,m5)
if((not J4)and(GetUnitLifePercent(m5)<60.)and(not IsUnitIllusion(m5))and(kA(it,m5,600.)))then
set J4=PY7(it,$D026B,1093683534,1093747031,m5)
endif
endif
if((not J4)and(Bz>hq[O5])and(Bz>hq[16+O5])and(G0[$80+O5])and(GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)>80.)and(P77(400.,b5,Condition(function V47))>0))then
if(m5==null)then
set m5=K3(1000.,it,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<70.)and(not IsUnitInRange(it,m5,500.)))then
if((P87(500.,m5,Condition(function k6))<=2)and(P77(500.,b5,Condition(function k6))==0))then
set J4=PY7(it,$D026B,1093683534,1093747031,m5)
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$C)and(GetUnitLifePercent(it)>60.))then
set J4=(P77(700.,b5,Condition(function k6))>0)and(P77(700.,b5,Condition(function V47))>0)and(PW7(it,$D02BD,1093744463,m5))
endif
elseif(i1==1215128178)then
call SetPlayerAbilityAvailable(pl,1093677616,(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>70.))
set UP=GetUnitAbilityLevel(it,1093810503)
if(UP==0)then
set UP=GetUnitAbilityLevel(it,1093810504)+1
endif
set L84=90+(120*UP)
if((GetHeroLevel(it)>5)and(Bz>hq[O5])and((Ie(bj_mapInitialPlayableArea,Condition(function O1F))!=null)or(PS4)))then
set GZ[O5]=true
call SetPlayerAbilityAvailable(pl,1093810504,true)
set J4=J8(O5,PC7(it,$D00C4,1093810503))
endif
if((not J4)and(GetHeroLevel(it)>4))then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(1000.,b5,Condition(function k6))
endif
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(OB7(m5,it)))and(PW7(it,$D007F,1093683779,m5))
endif
elseif(i1==1164799855)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(800.,b5,Condition(function k6))
endif
set J4=((GetUnitLifePercent(it)<60.)and(PC7(it,$D024C,1093677378)))or((m5!=null)and(GetUnitLifePercent(m5)<50.)and(PW7(it,$D006B,1093682264,m5)))or((m5!=null)and(GetUnitAbilityLevel(it,1093682265)>0)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(PW7(it,$D011E,1093682265,m5)))or((m5!=null)and(GetUnitAbilityLevel(it,1093752642)>0)and(not IsUnitInRange(it,m5,700.))and(GetUnitManaPercent(it)>55.)and(GetRandomInt(1,2)==1)and(PW7(it,$D011E,1093752642,m5)))
elseif(i1==1433105516)then
if((not J4)and(GetHeroLevel(it)>3))then
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(OB7(m5,it)))and(IssueTargetOrderById(it,$D02B6,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>7)and(((GetUnitLifePercent(m5)<75.)and(Bz>hq[O5]))or((GetUnitLifePercent(m5)<50.)and(Bz>hq[16+O5])))and(not kr(it))and(G0[$80+O5]))then
set J4=(Kz(400.,PU7(m5))>0)and(IssuePointOrderById(it,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
if((not J4)and(GetHeroLevel(it)>10.)and(Bz>hq[O5])and(hq[416+O5]>Bz))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=P47(800.,b5,Condition(function k6))
if(m5!=null)then
set UP=P87(400.,m5,Condition(function k6))
set J4=((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(IssuePointOrderById(it,$D0278,GetUnitX(m5),GetUnitY(m5)))
endif
endif
endif
if((not J4)and(GetUnitAbilityLevel(it,1093744688)>0)and(GetUnitManaPercent(it)>50.)and GZ[O5])then
if(GetUnitAbilityLevel(it,1093744688)>1)then
set m5=O27(600.,b5,Condition(function KD))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D007F,m5))
elseif(GetUnitManaPercent(it)>70.)then
set m5=O27(600.,b5,Condition(function KD))
set J4=(m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)<150.)and(IssueTargetOrderById(it,$D007F,m5))
endif
endif
if((not J4)and(GetUnitAbilityLevel(it,1093681713)>0)and(GetUnitManaPercent(it)>50.))then
set m5=P47(500.,b5,Condition(function k6))
set J4=(m5!=null)and(PW7(it,$D0278,1093681713,m5))
endif
endif
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
if(not J4)and((i1==1214409837)and(GetHeroLevel(it)>=6)and(Bz>TB4[O5])and(h4[O5]!=null))then
set J4=PC7(it,$D00D4,1093742932)
if J4 then
set i1=1211119192
call NX7(.3)
set J4=false
endif
endif
if((not J4)and(GetHeroLevel(it)>5))then
set bj_lastLoadedUnit=m5
set m5=Ie(bj_mapInitialPlayableArea,Condition(function V97))
if(m5!=null)and(GetUnitLifePercent(m5)<30)and(OV7(m5))and(N37(m5,PL7(m5))>N37(it,PL7(it))+1500.)and(P87(750.,m5,Condition(function k6))==0)and(not PD7(m5,SU[PC]))then
set J4=(i1!=1214409837 or PC7(it,$D00D4,1093742932))and(IssueTargetOrderById(it,$D0118,m5))
if J4 then
call NX7(1.)
call ZPE(it,true)
endif
endif
set m5=bj_lastLoadedUnit
endif
if((not J4)and(h4[O5]!=null)and(Bz>TB4[32+O5]))then
set J4=(m5!=null)and(GetUnitManaPercent(m5)>20.)and(GetUnitAbilityLevel(m5,1110455126)==0)and(PW7(it,$D02B6,1093742680,m5))
endif
if((not J4)and(GetUnitManaPercent(it)>40.))then
set m5=O27(700.,b5,Condition(function U_7))
set J4=(m5!=null)and(GetUnitManaPercent(m5)<75.)and(PW7(it,$D00D9,1093742898,m5))
endif
if((not J4)and((GetUnitManaPercent(it)<50.)))then
set J4=PW7(it,$D00D9,1093742898,it)
endif
if((not J4)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1093679157)>1)and((GetUnitManaPercent(it)>30.)or((P77(1300.,b5,Condition(function k6))<=1)and((GetUnitState(it,UNIT_STATE_MANA)>$96+ANE(it,1093742898,4))and(Bz>TB4[48+O5]))))and(Bz>TB4[16+O5])and((i1!=1214409837)or(((P77(300.,b5,Condition(function k8))<=2)and(P77(800.,b5,Condition(function TB7))>2))and((P77(500.,b5,Condition(function k6))==0)or(P77(400.,b5,Condition(function VG7))>0)))))then
set m5=h4[O5]
if m5==null then
set m5=O27(1300.,PU7(it),Condition(function k6))
endif
if m5==null then
set m5=O27(1300.,PU7(it),Condition(function TZ7))
endif
if m5!=null then
set L84=MY7(it,m5)
if(IsUnitType(m5,UNIT_TYPE_HERO)and((not OY7(it))or BK8(m5))and GetUnitLifePercent(m5)>30)or(h4[O5]==null)then
set L84=MY7(it,m5)
if(not ZN7(it,m5,GetUnitX(it)+1300.*Cos(L84*bj_DEGTORAD),GetUnitY(it)+1300.*Sin(L84*bj_DEGTORAD),400,Condition(function k8)))and(bj_forLoopAIndex>2)then
set J4=IssuePointOrderById(it,$D00FA,GetUnitX(it)+150.*Cos(L84*bj_DEGTORAD),GetUnitY(it)+150.*Sin(L84*bj_DEGTORAD))
endif
endif
endif
endif
if((not J4)and(h4[O5]!=null)and(i1!=1214409837))then
set L84=GetUnitFacing(m5)
set J4=(m5!=null)and(IssuePointOrderById(it,$D0079,GetUnitX(m5)+200.*Cos(L84*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(L84*bj_DEGTORAD)))
endif
elseif(i1==1316252014)then
call SetPlayerAbilityAvailable(pl,1093678405,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.)and((m5!=null)or(P77(1500.,b5,Condition(function k6))>0)))
if(GetHeroLevel(it)>4)then
set J4=(m5!=null)and((GetUnitManaPercent(it)>60.)or(OB7(m5,it)))and(PW7(it,$D0269,1093678137,m5))
if(not J4)then
if(m5==null)then
set m5=O27(2400.,b5,Condition(function k7))
endif
set J4=(m5!=null)and(PC7(it,$D022E,1093678405))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(GetUnitManaPercent(it)>50.))then
set UP=0
if((Bz+10.)<hq[O5])then
set UP=UP+1
endif
if((Bz+10.)<hq[16+O5])then
set UP=UP+1
endif
if((Bz+10.)<hq[32+O5])then
set UP=UP+1
endif
if(((Bz+10.)<hq[80+O5])or((Bz+10.)<hq[96+O5]))then
set UP=UP+1
endif
if(((UP>1)and(P77(800.,b5,Condition(function k6))==0))or((UP>2)and(GetUnitLifePercent(it)>50.)))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
elseif(i1==1164799603)then
call SetPlayerAbilityAvailable(pl,1095067246,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>30.))
if(not J4)and(Bz>TB4[O5])and(GetUnitLevel(it)>=6)then
if GetUnitAbilityLevel(it,1093752632)>0 then
set L84=105+GetUnitAbilityLevel(it,1093752632)*30
else
set L84=116.25+GetUnitAbilityLevel(it,1093752633)*41.25
endif
set LE4=true
set m5=Ie(bj_mapInitialPlayableArea,Condition(function O1F))
if m5==null then
set LE4=false
if h4[O5]!=null then
set CK4=h4[O5]
endif
set m5=VX7(99999.,it)
set CK4=null
if m5==null then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function TZ7))
endif
endif
if((m5!=null))then
if(LE4)or((not IsUnitType(m5,UNIT_TYPE_HERO))and((Bz-20>TB4[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.)))or(IsUnitType(m5,UNIT_TYPE_HERO)and((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-$F>TB4[O5])and(GetUnitState(it,UNIT_STATE_MANA)>200.)))))then
set J4=PY7(it,$D0097,1093752632,1093752633,m5)
endif
endif
endif
if(is(it))then
if((N37(it,PL7(it))<1500.)and(eY[O5]==1))then
if(h8[16+O5]==h7[$E])then
set J4=OOF(0)
elseif(h8[16+O5]==h7[35])then
set J4=OOF(1)
elseif(h8[16+O5]==h7[55])then
set J4=OOF(2)
endif
elseif(((eY[O5]==3)or(eY[O5]==4))and(N37(it,PL7(it))>6000.)and(P77(1200.,b5,Condition(function k6))==0))then
set J4=OOF(3)
endif
endif
if(not J4)then
if(((m5==null)or(not OB7(m5,it)))and(G0[$80+O5]))then
set m5=K3(800.,it,Condition(function k7))
endif
set J4=(m5!=null)and(OB7(m5,it))and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600))and(PW7(it,$D00FA,1093808453,m5))
endif
elseif(i1==1328558160)then
if(PD7(it,SU[E54]))then
call SetPlayerAbilityAvailable(pl,1093682998,false)
endif
if((GetUnitAbilityLevel(it,1093684056)>0)and(N37(it,PL7(it))>2000.)and(GetUnitState(it,UNIT_STATE_MANA)>100.))then
if((GetHeroStr(it,true)>(30+(2*GetHeroLevel(it))))and(GetHeroStr(it,false)>($F+GetHeroLevel(it))))then
if(GetUnitLifePercent(it)>75.)then
set J4=IssueImmediateOrderById(it,$D0245)
else
set J4=PV7(it,$D0012,h9[O5])
endif
elseif((GetHeroStr(it,true)<(20+(2*GetHeroLevel(it))))and(IsTriggerEnabled(Q67(GetHandleId(pl),"MorphAgi"))))then
set J4=IssueImmediateOrderById(it,$D0246)
endif
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>9)and(Bz>TB4[32+O5])and(PD7(it,SU[E54]))and(Bz>TB4[$D0+O5])and(GetUnitState(it,UNIT_STATE_MANA)>315.))then
call ZSE(O5,m5,false,false)
call SetPlayerAbilityAvailable(pl,1093682998,true)
set J4=UnitUseItemTarget(it,PH7(it,SU[E54]),m5)
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=IssueTargetOrderById(it,$D02B6,m5)
if((not J4)and(IsUnitInRange(it,m5,850.))and(not IsUnitInRange(it,m5,400.))and(GetUnitLifePercent(it)>75.)and((not IC(O5))or(GetUnitLifePercent(m5)<55.)))then
set QLF=kL(it,m5,200.)
if((QLF!=null)and((P77(800.,QLF,Condition(function VU7))-P77(800.,QLF,Condition(function V47)))<=1)and(P77(700.,QLF,Condition(function UB7))==0))then
call SetPlayerAbilityAvailable(pl,1093682766,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderByIdLoc(it,$D00FA,QLF))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$F)and(m5!=null)and(GetUnitAbilityLevel(it,1093683011)==0)and((GetUnitLifePercent(m5)<60.)or((P77(600.,b5,Condition(function k6))>=2)and(P77(600.,b5,Condition(function U_7))>0))))then
set m5=GEF(800.,it)
set J4=(m5!=null)and(PW7(it,$D0132,1093683000,m5))
endif
elseif(i1==1212363833)then
call SetPlayerAbilityAvailable(pl,1093678643,(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>70.))
set UP=R2I(hq[16+O5]-Bz)
set J4=(m5!=null)and((GetHeroLevel(it)>$D)or((GetHeroLevel(it)>4)and(GetUnitLifePercent(m5)<70.)))and((UP<=0)or(UP>50))and(PW7(it,$D007F,1093809220,m5))
if(not J4)then
set h4[O5]=MC7(h4[O5]==null,m5,h4[O5])
set bj_lastLoadedUnit=it
set UV7=MC7(h4[O5]!=null and P87(450,h4[O5],Condition(function ZB7))>0,h4[O5],VA7(99999,it,Condition(function ZC7)))
set J4=((UV7!=null and(MV7(UV7,65,100+30*GetUnitAbilityLevel(it,1093815125)+300.,1)))or(P87(450,it,Condition(function TZ7))>=3 and MR7(it,70.,500.,2)))and PC7(it,$D022E,1093815125)
endif
if((not J4)and(GetHeroLevel(it)>$A)and(Bz>hq[32+O5]))then
set m5=P47(800.,b5,Condition(function V97))
set J4=(m5!=null)and(P87(600.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1315070563)then
if(not GZ[O5])then
call SetPlayerAbilityAvailable(pl,1093678407,(GetHeroLevel(it)>4)and((not iy(it))or(GetHeroLevel(it)>$B))and(GetUnitManaPercent(it)>70.))
endif
if((GetHeroLevel(it)>5)and(Bz>TB4[O5])and(G0[$80+O5]))then
if(m5==null)then
set m5=O27(700.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(not ke(m5)))then
set UP=P87(600.,m5,Condition(function k6))+1
if(GetHeroLevel(it)<$B)then
set J4=(GetUnitState(m5,UNIT_STATE_LIFE)<600.)and(UP>=P87(700.,m5,Condition(function KA)))and(PY7(it,$D007F,1093684529,1093747032,m5))
elseif((GetUnitState(m5,UNIT_STATE_LIFE)<1200.)or(UP>2)or((UP>1)and(P87(600.,m5,Condition(function U_7))>0)))then
set J4=(UP>=P87(700.,m5,Condition(function KA)))and(PY7(it,$D007F,1093684529,1093747032,m5))
endif
endif
endif
elseif(i1==1214931305)then
set UP=GetHeroLevel(it)
call SetPlayerAbilityAvailable(pl,1093748025,(UP>9)and((GetUnitManaPercent(it)>55.)or(m5!=null)or(P77(900.,b5,Condition(function k6))>0)))
set J4=(h4[O5]!=null)and(PW7(it,$D00CB,1093678147,m5))
if((m5==null)and(G0[$80+O5])and(UP>3))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetUnitState(it,UNIT_STATE_LIFE)>GetUnitState(m5,UNIT_STATE_LIFE))and((GetUnitState(it,UNIT_STATE_LIFE)-GetUnitState(m5,UNIT_STATE_LIFE))>(40*GetHeroLevel(it))))then
if((PD7(it,SU[QW]))and(not IsUnitIllusion(m5))and(G0[$80+O5])and(GetUnitLifePercent(it)>75.)and(GetHeroLevel(it)>$A)and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+120.)and(Bz>hq[O5]))then
set h4[16+O5]=m5
set J4=O6F(it,m5)
endif
if(not J4)then
set J4=((((UP>5)and(Bz>hq[O5])and(not IsUnitIllusion(m5))and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+150.))or(GetUnitLifePercent(m5)<50.))and(PW7(it,$D00CB,1093678147,m5)))or((((GetUnitManaPercent(it)>55.)and(UP>3))or(OB7(m5,it)))and(GetUnitAbilityLevel(m5,1110454583)==0)and(PW7(it,$D0079,1093748025,m5)))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(Bz>hq[O5]))then
set J4=(Kz(500.,b5)>1)and(GetUnitState(it,UNIT_STATE_MANA)>hq[272+O5]+100.)and((GetUnitAbilityLevel(m5,1110454583)>0)or(P77(850.,b5,Condition(function V47))>0))and((PP7(it,SU[A1]))or(IssueImmediateOrderById(it,$D0278)))
endif
endif
endif
elseif(i1==1328558389)then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(1500.,b5,Condition(function k6))
endif
if((not J4)and(Bz>TB4[O5])and(not IsUnitIllusion(m5))and(GetUnitLevel(it)>=6)and(h4[O5]!=null)and(IsUnitInRange(it,m5,1200.))and((GetUnitLifePercent(m5)<60.)or((BK8(m5)or GZ[$D0+O5])and(GetUnitLifePercent(m5)<80.))))then
if BK8(m5)or(NA7(it,m5,30))then
set J4=(IssuePointOrderByIdLoc(it,$D0278,PU7(m5)))
endif
endif
if((not J4)and(m5!=null)and(Bz>TB4[32+O5])and(not IsUnitIllusion(m5))and(GetUnitAbilityLevel(it,1093747000)>1)and(((((GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093747000,4)+ANE(it,1093747009,4))and(Bz+$A<TB4[O5]))or(GetUnitState(it,UNIT_STATE_MANA)>430))and(GetUnitLifePercent(m5)>40.))or(GetWidgetLife(m5)<80*GetUnitAbilityLevel(it,1093747000))))then
set J4=(PW7(it,$D02BD,1093747000,m5))
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and(not G0[O5])and(IsUnitInRange(it,m5,300))and(GetUnitLifePercent(m5)<70.)and((GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093747009,4)+ANE(it,1093746993,4))or(Bz+$A<TB4[O5]))then
set J4=(IssueImmediateOrderById(it,$D0265))
endif
elseif(i1==1328558390)then
if((m5==null))then
set m5=O27(1200.,b5,Condition(function k6))
endif
if(not J4)and(h4[O5]!=null)and(Bz>TB4[O5])and(GetUnitLevel(it)>=6)and(GetUnitLifePercent(m5)<60.)then
set J4=(PW7(it,$D0097,1093744975,m5))
endif
if(not J4)and(h4[O5]!=null)and(Bz>TB4[48+O5])and(O37(m5))and(not IsUnitInRange(it,m5,400.))and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093744982,4)+100)then
call PC7(it,$D00D4,1093744986)
call NX7(.1)
endif
if(not J4)and(Bz>TB4[16+O5])and(GetUnitLevel(it)>=4)and((GetUnitState(it,UNIT_STATE_MANA)>390.)or((h4[O5]!=null)and(GetUnitState(it,UNIT_STATE_MANA)>100+ANE(it,1093744982,4)))or(GetUnitLifePercent(m5)<70.))then
set J4=(PW7(it,$D0079,1093748044,m5))
endif
if(not J4)and(Bz>TB4[32+O5])and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70.)or(GetUnitState(it,UNIT_STATE_MANA)>=400.))then
if(ZR7(it,m5,750,.2,$5DC)!=null)then
set J4=(PX7(it,$D00FA,1093744982,DF7))
endif
endif
if(not J4)and(Bz>TB4[32+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093744982)>1)and((GetUnitState(it,UNIT_STATE_MANA)>=400.)or(GetUnitLifePercent(m5)<70.))then
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(P77(400.,b5,Condition(function k8))==0))then
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1160786510)then
if(not J4)and(Bz>TB4[O5])and(GetUnitLevel(it)>=6)then
if GetUnitAbilityLevel(it,1093808949)>0 then
set L84=$96+GetUnitAbilityLevel(it,1093808949)*37.5
set UP=99999
elseif GetUnitAbilityLevel(it,1093751861)>0 then
set L84=$96+GetUnitAbilityLevel(it,1093751861)*37.5
set UP=$3E8
else
set UP=0
endif
if UP!=0 then
set LE4=true
set m5=O27(UP,GetUnitLoc(it),Condition(function O1F))
if m5==null then
set LE4=false
if h4[O5]==null then
set m5=O27(UP,GetUnitLoc(it),Condition(function k6))
else
set m5=h4[O5]
endif
endif
if((m5!=null))then
if(LE4)or((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-20>TB4[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.))and(not IsUnitIllusion(m5))))then
if O37(m5)or(BM7(it,m5))then
if ZT7(it,m5,2,UP)!=null then
set J4=PZ7(it,$D0079,1093751861,1093808949,GetLocationX(DF7),GetLocationY(DF7))
endif
else
set J4=PZ7(it,$D0079,1093751861,1093808949,GetUnitX(m5),GetUnitY(m5))
endif
endif
if J4 then
call NX7(.1)
set J4=false
endif
endif
endif
endif
set m5=h4[O5]
if((m5==null))then
set m5=O27(800.,b5,Condition(function k6))
endif
if(not J4)and(Bz>TB4[16+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70.)and(IsUnitInRange(it,m5,400))then
set J4=PC7(it,$D0278,1093751631)
endif
if(not J4)and(Bz>TB4[32+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or OB7(m5,it))then
set J4=PW7(it,$D0097,1093751633,m5)
endif
set UP=P87(800.,it,Condition(function k6))
if(not J4)and(Bz>TB4[48+O5])and((h4[O5]!=null and UP>1 and IsUnitInRange(it,m5,500))or(UP>2 and GetUnitState(it,UNIT_STATE_MANA)>350)or(GetUnitState(it,UNIT_STATE_MANA)>450 and P87(800,it,Condition(function TZ7))>5))then
set J4=PC7(it,$D022E,1093808697)
endif
elseif(i1==1328558406)then
if(not J4)and(h4[O5]!=null)and(is(it))and(Bz>TB4[16+O5])then
set m5=VK7(900.,it,false)
if m5!=null then
set J4=PW7(it,$D0097,1093751873,m5)
endif
endif
if(not J4)and(is(it))and(h8[$A0+O5]!=null)then
set GZ[$E0+O5]=(LoadUnitHandle(C7,(GetHandleId(it)),(652))!=null)
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(h8[$A0+O5])+GetRandomReal(-200.,200.),GetUnitY(h8[$A0+O5])+GetRandomReal(-200.,200.))
set h8[$A0+O5]=null
endif
if(not J4)then
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,b5,Condition(function k6))
endif
if(h4[O5]!=null)and(GetUnitLifePercent(it)+10.>GetUnitLifePercent(m5))then
call SetPlayerAbilityAvailable(Player(O5),1093810257,true)
set GZ[O5]=true
set J4=(GetUnitAbilityLevel(it,1110456385)==0)and(IssueImmediateOrderById(it,$D026D))
else
set GZ[O5]=false
set J4=(GetUnitAbilityLevel(it,1110456385)!=0)and(PC7(it,$D026E,1093810257))
endif
if J4 then
call NX7(.1)
set J4=false
endif
if(not J4)and(m5!=null)and(h4[O5]!=null or GetUnitManaPercent(it)>90 or(GetUnitLifePercent(m5)<70 and GetUnitManaPercent(it)>60))then
if RG7(it,"AI|IoSpirits")then
set UP=R2I(N37(it,m5))
if UP<425 then
set J4=(R87(GetHandleId(it),"AI|IoSpiritsFar"))and(IssueImmediateOrderById(it,$D00F9))
else
set J4=(not R87(GetHandleId(it),"AI|IoSpiritsFar"))and(IssueImmediateOrderById(it,$D020A))
endif
else
if(Bz>TB4[32+O5])then
set J4=PC7(it,$D022E,1093751864)and(IssueImmediateOrderById(it,$D020A))
endif
endif
endif
endif
elseif(i1==1160786504)then
if(m5==null)then
set m5=O27(800.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[O5])and((GetUnitLifePercent(m5)<50. and(UnitCountBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE,bj_BUFF_RESIST_EITHER,m5,false,false)==0))or OL7(m5))then
set J4=PW7(it,$D008F,1093751617,m5)
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and(IsUnitInRange(it,m5,600))and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or OB7(m5,it))then
if P77(450,PU7(m5),Condition(function TZ7))<=1 then
set J4=PW7(it,$D0079,1093751618,m5)
endif
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or OB7(m5,it))and(P87(450,m5,Condition(function TZ7))<=1)then
set J4=PW7(it,$D0097,1093751608,m5)
endif
if(not J4)then
if(m5==null)then
set m5=O27(1200.,b5,Condition(function k6))
endif
if(m5!=null)and(Bz>TB4[48+O5])and(h4[O5]!=null or GetUnitLifePercent(m5)<70. or OB7(m5,it)or GetUnitManaPercent(it)>50.)and(IsUnitVisible(m5,Player(O5)))then
set J4=IssuePointOrderByIdLoc(it,$D0278,PU7(m5))
call NX7(.5)
endif
endif
elseif i1==1211119409 then
if((m5==null)and(G0[$80+O5]))then
set m5=O27(800.,b5,Condition(function k6))
endif
if((not J4)and(Bz>TB4[32+O5])and(m5!=null)and(GetUnitLifePercent(m5)<60.)and((not IsUnitInRange(it,m5,200.))or(O37(m5))))then
if(ZR7(it,m5,28/.03,0,(GetUnitAbilityLevel(it,1093749303)+3)*100)!=null)and(ZN7(it,m5,GetLocationX(DF7),GetLocationY(DF7),120,Condition(function LC7)))then
set J4=(NA7(it,m5,$F))and(IssueImmediateOrderById(it,$D0278))
call ZSE(O5,m5,false,false)
endif
endif
if((not J4)and(Bz>TB4[16+O5])and(m5!=null)and(IsUnitInRange(it,m5,300.))and(GetUnitLifePercent(it)>GetUnitLifePercent(m5)+20.)and(G0[256+O5])and((GetUnitState(it,UNIT_STATE_MANA)>200.)or O37(m5)))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if(not J4)and(h4[O5]!=null)and(Bz>TB4[O5])and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,200.))then
set J4=PC7(it,$D00A1,1093749070)
endif
if(not J4)and(h4[O5]==null)and(Bz>TB4[16+O5])and(P87(325.,it,Condition(function UL7))>3)and(GetUnitState(it,UNIT_STATE_MANA)>400.)then
set J4=IssueImmediateOrderById(it,$D022E)
endif
elseif(i1==1211117653)then
if(m5==null and(G0[$80+O5]))then
set m5=O27(800.,b5,Condition(function k6))
endif
set UP=(P77(1200.,b5,Condition(function KX)))
set J4=(GetUnitAbilityLevel(it,1110456408)>0)and(UP>0)and(GetUnitLifePercent(it)<70.)
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>$AF)and((Bz>TB4[O5])or(WZ7(it,1093686855)))and(Bz>TB4[$90+O5]))then
set L84=(37.5+(46.87*GetUnitAbilityLevel(it,1093808470)))
set Q2F=Ie(bj_mapInitialPlayableArea,Condition(function O1F))
set J4=(Q2F!=null)and W27(it,A54,A54,A54,1093686855)and IssuePointOrderByIdLoc(it,$D0079,ZT7(it,Q2F,1.7,99999))
elseif((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>$AF)and(Bz>TB4[$90+O5]))then
set L84=(37.5+(46.87*GetUnitAbilityLevel(it,1093808470)))
set Q2F=Ie(bj_mapInitialPlayableArea,Condition(function O1F))
if(Q2F!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),YS[9],true)
set J4=IssuePointOrderByIdLoc(it,$D0079,ZT7(it,Q2F,1.7,99999))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),YS[9],false)
endif
endif
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5)))then
call ZSE(O5,m5,false,false)
if(((GetUnitState(it,UNIT_STATE_MANA))>410)and(GetUnitLevel(it)>=$A)and(Bz>TB4[O5])and(Bz>TB4[48+O5])and(Bz>TB4[112+O5])and((WZ7(it,1093686862))or(WZ7(it,1093686861))))then
set J4=W27(it,A54,A54,A04,1093686862)and(W67(it,A54,A54,A54,false))and IssuePointOrderById(it,$D00F8,GetUnitX(m5),GetUnitY(m5))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>350)and(GetUnitLevel(it)>=$E)and(Bz>TB4[O5])and(Bz>TB4[96+O5])and(Bz>TB4[$90+O5])and((WZ7(it,1093686859))or(WZ7(it,1093686855))))then
set J4=W27(it,A04,A04,A14,1093686859)and IssuePointOrderById(it,$D020B,GetUnitX(m5),GetUnitY(m5))
endif
if(not J4 and(GetUnitLevel(it)<$E)and((GetUnitState(it,UNIT_STATE_MANA))>290)and(WZ7(it,1093686861)or(Bz>TB4[O5])))then
set J4=(W27(it,A14,A04,A54,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5)))
endif
if(not J4)then
set J4=(((Bz>TB4[64+O5])and W27(it,A54,A54,A14,1093686863)and(IssueImmediateOrderById(it,$D00A4)))or((Bz>TB4[16+O5])and W27(it,A14,A14,A14,1093686874)and(PW7(it,$D0219,1093686874,m5)))or(((GetUnitState(it,UNIT_STATE_MANA))>350)and(Bz>TB4[112+O5])and W27(it,A14,A04,A54,1093686861)and IssuePointOrderById(it,$D00F7,GetUnitX(m5),GetUnitY(m5))))
endif
if((not J4)and((GetUnitState(it,UNIT_STATE_MANA))>120))then
set J4=((Bz>TB4[$A0+O5])and(IsUnitInRange(it,m5,106.))and W27(it,A14,A14,A54,1093686864)and(IssueImmediateOrderById(it,$D00A6)))or((Bz>TB4[48+O5])and W27(it,A54,A54,A04,1093686862)and IssuePointOrderById(it,$D00F8,GetUnitX(m5),GetUnitY(m5)))or((Bz>TB4[32+O5])and W27(it,A04,A04,A04,1093686867)and(W67(it,A54,A54,A54,false))and(IssuePointOrderByIdLoc(it,$D00F9,GetUnitLoc(m5))))
endif
endif
if((GetUnitAbilityLevel(it,1110456408)==0))then
if(not J4 and(Bz>TB4[O5])and(Bz>TB4[48+O5])and(not WZ7(it,1093686862))and(GetRandomInt(1,2)==1))then
call W27(it,A54,A54,A04,1093686862)
elseif(not J4 and(GetUnitLevel(it)<$E)and(Bz>TB4[O5])and(Bz>TB4[112+O5])and(not WZ7(it,1093686861)))then
call W27(it,A14,A04,A54,1093686861)
elseif(not J4 and(GetUnitLevel(it)>=$E)and(Bz>TB4[O5])and(Bz>TB4[96+O5])and(not WZ7(it,1093686859))and(GetRandomInt(1,2)==1))then
call W27(it,A04,A04,A14,1093686859)
elseif(not J4 and(Bz>TB4[O5])and(Bz>TB4[16+O5])and(not WZ7(it,1093686874)))then
call W27(it,A14,A14,A14,1093686874)
endif
set UP=P87(1500.,it,Condition(function k8))
if((m5!=null and(WY7(it)<3))or((GetUnitLevel(it)<5)and(WY7(it)<3))or((WY7(it)<3)and(UP>1)))then
call W67(it,A54,A54,A54,false)
elseif(m5==null and(not J4)and(GetUnitLevel(it)>5)and(GetUnitAbilityLevel(it,1093808472)>0)and(GetUnitLifePercent(it)>80.)and(WV7(it)<3)and(UP<2))then
call W67(it,A04,A04,A04,false)
elseif(m5==null and(not J4)and(GetUnitAbilityLevel(it,1093808471)>0)and(GetUnitLifePercent(it)<58.)and(WX7(it)<3))then
call W67(it,A14,A14,A14,false)
endif
if(not J4)then
set m5=null
set m5=O27(700.,b5,Condition(function VF7))
set J4=(m5!=null)and(GetUnitCurrentOrder(m5)==$D000F)and W27(it,A04,A04,A54,1093686865)and PW7(it,$D020A,1093686865,m5)
endif
endif
elseif(i1==1311787088)then
if(not J4)and(Bz>TB4[O5])and(GetUnitLevel(it)>=6)then
set L84=100+GetUnitAbilityLevel(it,1093750089)*$96
set LE4=true
set m5=Ie(bj_mapInitialPlayableArea,Condition(function O1F))
if m5==null then
set LE4=false
if h4[O5]==null then
set m5=O27(99999.,GetUnitLoc(it),Condition(function k6))
else
set m5=h4[O5]
endif
endif
if((m5!=null))then
if(LE4)or((GetUnitLifePercent(m5)<50. or(GZ[$D0+O5]and h4[O5]!=null)or((Bz-20>TB4[O5])and(GetUnitState(it,UNIT_STATE_MANA)>300.))and(not IsUnitIllusion(m5))))then
if O37(m5)or(BM7(it,m5))then
if ZR7(it,m5,500.,.02,1500.)!=null then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DF7)
if J4 then
call Q97(GetHandleId(it),"AI|IBClose",1)
endif
elseif ZR7(it,m5,1500.,2.02,99999.)!=null then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DF7)
if J4 then
call Q97(GetHandleId(it),"AI|IBClose",0)
endif
endif
else
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
if J4 then
call Q97(GetHandleId(it),"AI|IBClose",2)
endif
endif
endif
if J4 then
call QG7(GetHandleId(it),"AI|IBTgt",m5)
call TriggerSleepAction(.1)
set J4=false
endif
endif
endif
if(m5==null)then
set m5=O27(800.,b5,Condition(function k6))
endif
if(not J4)and(not IsUnitIllusion(m5)and(IsUnitInRange(it,m5,750.))and((GetUnitState(it,UNIT_STATE_MANA))>(GetUnitState(it,UNIT_STATE_MAX_MANA)/2.5)))then
set J4=(m5!=null)and(PW7(it,$D0278,1093750087,m5))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,1500.))and((GetUnitState(it,UNIT_STATE_MANA))>(GetUnitState(it,UNIT_STATE_MAX_MANA)/2.5))and((GetUnitLevel(it)>$A)or(GetUnitManaPercent(it)>65.)))then
set J4=(m5!=null)and(PW7(it,$D0079,1093748819,m5))
endif
if((not J4)and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,600.))and(GetUnitManaPercent(it)>30.))then
set J4=(m5!=null)and(PW7(it,$D0084,1093748817,it))
endif
if(not J4)then
set J4=(IsUnitType(m5,UNIT_TYPE_HERO))and(PQ7(it,m5))
endif
elseif(i1==1160786505)then
if(m5==null and(G0[$80+O5]))then
set m5=O27(1100.,b5,Condition(function k6))
endif
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<60.))then
set J4=(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5)))or(IssueTargetOrderById(it,$D00D9,m5))
endif
if((not J4)and(G0[$80+O5])and(Bz>TB4[32+O5])and(Bz>TB4[16+O5])and(GetUnitLevel(it)>6))then
set J4=(m5!=null)and(GetUnitLevel(it)>3)and((GetUnitLifePercent(it)>75.)or(IsUnitInRange(it,m5,300.)))and(not IsUnitIllusion(m5))and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=2)and((P77(750.,GetUnitLoc(m5),Condition(function UB7))==0)or(GetRandomInt(1,2)==1))and(GetUnitState(it,UNIT_STATE_MANA)>300.)and(IssueTargetOrderById(it,$D00D9,m5))
endif
if(not J4 and(m5!=null))then
set J4=(not IsUnitIllusion(m5))and(Bz>TB4[O5])and(GetUnitLifePercent(m5)<48.)and(IsUnitInRange(it,m5,200.))and(IssueImmediateOrderById(it,$D022E))
endif
if(not J4 and(m5!=null))then
set UP=P77(780.,GetUnitLoc(m5),Condition(function UB7))
set Q5F=P87(800.,m5,Condition(function VU7))
set J4=((Bz>TB4[32+O5])and(GetUnitLevel(it)>3)and(IsUnitInRange(it,m5,800.))and((Q5F-P87(800.,m5,Condition(function V47)))<=2)and((UP>0)and(Q5F<2)or(UP==0)and(Q5F<=2))and(IssueTargetOrderById(it,$D00D9,m5)))or((Bz>TB4[16+O5])and(GetUnitLevel(it)>3)and(GetUnitState(it,UNIT_STATE_MANA)>$96)and(GetUnitLifePercent(m5)<90.)and(IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))))
endif
elseif(i1==1212365106)then
call SetPlayerAbilityAvailable(pl,1093685831,(GetHeroLevel(it)>$D)and(P77(1200.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>70.))
if((m5!=null)and(not IsUnitIllusion(m5))and(((GetHeroLevel(it)>5)and(not IC(O5)))or(O07(m5,it)))and(not IsUnitInRangeLoc(m5,b5,250.)))then
set J4=(kJ(GetUnitX(m5),GetUnitY(m5)))and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(IssueTargetOrderById(it,$D0278,m5))
endif
if((not J4)and(GetHeroLevel(it)>$E)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and((P87(I2R($E1+(25*GetUnitAbilityLevel(it,1093685831))),m5,Condition(function k6))>1)or(GetUnitLifePercent(m5)<80.))and(PW7(it,$D0079,1093685831,m5))
endif
endif
elseif(i1==1211117617)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=O27(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((GetHeroLevel(it)>4)and(not IsUnitInRange(it,m5,300.)))or(OB7(m5,it)))and(PW7(it,$D02B6,1093744944,m5))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(G0[$80+O5])and(GetUnitAbilityLevel(it,1110454329)==0)and(GetUnitState(it,UNIT_STATE_MANA)>200.))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set J4=((((Bz>hq[O5])or(GetUnitCurrentOrder(m5)==$D0005))and(IsUnitInRange(it,m5,600.)))or(IsUnitInRange(it,m5,300.)))and((PC7(it,$D022E,1093814611))or(PP7(it,SU[A1]))or(PC7(it,$D02B7,1093752648)))
endif
endif
if(GetUnitAbilityLevel(it,1110454329)>0)and(GetUnitLifePercent(it)>70)then
if(h4[O5]==null)then
set LK4=O27(700.,b5,Condition(function k6))
call ZSE(O5,LK4,false,false)
endif
if((GetUnitCurrentOrder(it)==$D0012)and(G0[$80+O5])and(hq[512+O5]>Bz)and(not G0[O5])and(P77(800.,b5,Condition(function KC))>1))then
call PV7(it,$D000F,h8[O5])
endif
endif
elseif(i1==1211117633)then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<60.)and((not IsUnitIllusion(m5))or(GetUnitLifePercent(m5)>35.))and(PW7(it,$D0269,1093684045,m5))
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function V97))
set J4=(m5!=null)and(P87(800.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
if((not J4)and(m5!=null)and(IsUnitInRange(it,m5,800.)))then
set J4=(GetUnitLifePercent(m5)<25.)and(not Id(GetPlayerId(GetOwningPlayer(m5))))and(PW7(it,$D0080,1093815619,m5))
endif
endif
if((not J4)and(h4[16+O5]!=null))then
if((OA7(h4[16+O5]))and(GetUnitAbilityLevel(h4[16+O5],1110455624)>0))then
set J4=PW7(it,$D007F,1093684310,h4[16+O5])
call P7F(it,h4[16+O5])
else
set h4[16+O5]=null
endif
endif
if((N37(it,PL7(it))<1500.)and(eY[O5]==1)and(GetHeroLevel(it)>5)and(IH(pl,Condition(function ZV9))<2))then
if(IsUnitAlly(it,Y7[0]))then
if((h8[16+O5]==h7[35])and(G2!=1)and(G4!=1))then
set h8[16+O5]=h7[55]
set h8[O5]=h7[51]
endif
else
if((h8[16+O5]==h7[$9B])and(G1!=2)and(G3!=2))then
set h8[16+O5]=h7[$87]
set h8[O5]=h7[$83]
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>21)and(IH(pl,Condition(function ZV9))==0))then
set m5=O27(600.,b5,Condition(function k8))
set J4=(m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)>800.)and(PW7(it,$D00A3,1093810260,m5))
endif
elseif(i1==1211117620)then
call SetPlayerAbilityAvailable(pl,1093677382,(GetHeroLevel(it)>$A)and(iy(it))and(GetUnitManaPercent(it)>60.))
call SetPlayerAbilityAvailable(pl,1093677105,(GetUnitManaPercent(it)>70.)and(GetUnitAbilityLevel(it,1110454324)==0))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((GetHeroLevel(it)>5)and(not IsUnitIllusion(m5))and(not ke(m5))and(Bz>hq[O5]))then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(UP<OUF(it))and(UP>$96)and(PY7(it,$D0097,1093677392,1093679450,m5))
endif
if((not J4)and((GetUnitManaPercent(it)>40.)or(OB7(m5,it))))then
if(((Bz>hq[16+O5])and(GetHeroLevel(it)>3))or(GetUnitLifePercent(m5)<55.))then
set GZ[64+O5]=true
set J4=PX7(it,$D0108,1093677623,ZT7(it,m5,.95,600.))
set GZ[64+O5]=false
endif
if(not J4)then
set J4=(Bz>hq[16+O5])and(GetHeroLevel(it)>3)and(GetRandomInt(1,2)==1)and(PW7(it,$D009D,1093677382,m5))
endif
endif
endif
if((not J4)and(GetHeroLevel(it)>$F)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
if(m5==null)then
set m5=K3(700.,it,Condition(function k6))
endif
if(m5!=null)then
set UP=R2I(GetUnitState(m5,UNIT_STATE_LIFE))
set J4=(GetUnitLifePercent(m5)<60.)and(UP<$640)and(UP>500)and(not ke(m5))and(PY7(it,$D0097,1093677392,1093679450,m5))
endif
endif
endif
elseif(i1==1432580716)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>60.))then
set m5=O27(600.,b5,Condition(function k6))
endif
if((G0[$80+O5])and(PD7(it,SU[QW]))and(GetHeroLevel(it)>8)and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5])and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,600.)))then
set J4=((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
call SetPlayerAbilityAvailable(pl,1093684300,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>60.))
if(not J4)then
set J4=(m5!=null)and((OB7(m5,it))or((GetHeroLevel(it)>7)and(GetUnitState(it,UNIT_STATE_MANA)>350.)and(Bz>hq[O5])and(IsUnitInRange(it,m5,220.))))and(PW7(it,$D0079,1093684300,m5))
endif
elseif(i1==1333027688)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>60.))then
set m5=O27(1000.,b5,Condition(function k6))
endif
if(m5!=null)then
if((G0[$80+O5])and(PD7(it,SU[QW]))and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(P87(500.,m5,Condition(function k8))>5))then
set J4=O6F(it,m5)
endif
if((not J4)and(Bz>hq[O5])and(IsUnitInRange(it,m5,400.))and(GetUnitState(m5,UNIT_STATE_LIFE)>180.))then
set UP=P2F(it)
if((R2I(GetUnitState(m5,UNIT_STATE_LIFE))<UP)or((UP>100)and((R2I(GetUnitState(m5,UNIT_STATE_LIFE))-UP)<GetHeroLevel(it)*30)))then
set J4=PC7(it,$D022E,1093682248)or(PC7(it,$D022E,1093750594))
endif
endif
if((not J4)and(GetUnitCurrentOrder(m5)==$D0012)and(GetUnitLifePercent(m5)<50.))then
set J4=PW7(it,$D0278,1093686091,m5)
endif
if((not J4)and(GetHeroLevel(it)>3))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[16+O5])-GetUnitY(m5),GetUnitX(h8[16+O5])-GetUnitX(m5)))
call SetPlayerAbilityAvailable(pl,1093686091,true)
set J4=IssuePointOrderById(it,$D0278,GetUnitX(m5)+50.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+50.*Sin(UP*bj_DEGTORAD))
endif
endif
set m5=P47(400.,b5,Condition(function k6))
if((not J4)and(Bz>hq[O5])and(m5!=null))then
set hr=it
set UP=P77(500.,b5,Condition(function P5F))
set J4=(((UP>3)and(P77(400.,b5,Condition(function k6))>1))or((UP>4)and(GetUnitLifePercent(m5)<60.)))and((PC7(it,$D022E,1093682248))or(PC7(it,$D022E,1093750594)))
endif
if(not J4)then
call SetPlayerAbilityAvailable(pl,1093686091,(GetHeroLevel(it)>5)and(GetUnitManaPercent(it)>70.))
set J4=(GetHeroLevel(it)>$A)and(Bz>hq[O5])and(P77(500.,b5,Condition(function KA))>8)and((PC7(it,$D022E,1093682248))or(PC7(it,$D022E,1093750594)))
endif
elseif(i1==1311781185)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3))then
set m5=O27(800.,b5,Condition(function k6))
endif
if(m5!=null)then
set J4=((GetHeroLevel(it)>$F)and((OB7(m5,it))or(GetUnitManaPercent(m5)<35.)or(GetUnitAbilityLevel(m5,1110454607)>0))and(IssueTargetOrderById(it,$D02B6,m5)))or((m5!=null)and(not IsUnitInRange(it,m5,550.))and(GetUnitManaPercent(it)>60.)and(GetRandomInt(1,3)==1)and(GetHeroLevel(it)>3)and(PW7(it,$D011E,1093684314,m5)))
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitManaPercent(it)>70))then
set J4=PW7(it,$D0079,1093743692,m5)
endif
if(not J4)then
if h4[O5]!=null and IsUnitInRange(h4[O5],it,850)and GetUnitLifePercent(h4[O5])<GetUnitLifePercent(m5)or GetUnitManaPercent(h4[O5])<GetUnitManaPercent(m5)then
set m5=h4[O5]
endif
if m5==null then
set E=1
set m5=VA7(900,it,Condition(function VE7))
endif
set E=5
set UV7=VA7(900,it,Condition(function VE7))
set m5=MC7((m5!=null)and(((GetHeroLevel(m5)>$B and GetHeroLevel(m5)>GetHeroLevel(UV7))or GetUnitManaPercent(UV7)<30.)or UV7==null),m5,UV7)
if m5==null then
set m5=MC7(GetUnitManaPercent(it)>40.or GetUnitState(it,UNIT_STATE_MANA)>700.,VA7(700,it,Condition(function k6)),null)
endif
set J4=(m5!=null)and(G0[$80+O5]and(GetUnitLifePercent(m5)<=50)or GetUnitManaPercent(it)>50.)and IssueTargetOrderById(it,$D007F,m5)
if h4[O5]==null then
set h4[O5]=m5
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[O5]))then
set m5=Ie(bj_mapInitialPlayableArea,Condition(function V97))
set J4=(m5!=null)and(P87(700.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D0278))
endif
elseif(i1==1211117643)then
if m5==null then
set m5=VY7(700.,it)
endif
if((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitIllusion(m5))and(IsUnitInRange(it,m5,400.))and(GetUnitAbilityLevel(m5,1113815395)==0)and(GetUnitAbilityLevel(m5,1113815346)==0)and((GetUnitLifePercent(it)<50.)or(GetHeroLevel(it)<8))and(R2I(GetUnitState(m5,UNIT_STATE_LIFE))<(300+(120*GetUnitAbilityLevel(it,1093678658)))))then
set J4=PW7(it,$D0048,1093678658,m5)
endif
if(not J4)and(is(it))then
if(h4[O5]!=null)then
if(not J4)and(Bz>TB4[O5])then
set J4=PY7(it,$D0218,1093681483,1093748313,m5)
endif
if(not J4)and(Bz>TB4[32+O5])and(P87(600.,it,Condition(function VH7))==0)then
set J4=PW7(it,$D0092,1093678664,it)
endif
if(not J4)then
set L84=Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5))
call MoveLocation(HA,GetUnitX(m5)+Cos(L84)*$C8,GetUnitY(m5)+Sin(L84)*$C8)
if(not J4)and(Bz>TB4[16+O5])and(GetUnitLifePercent(it)>60.)then
set J4=PX7(it,$D0136,1093678410,HA)
endif
if(not J4)and(Bz>TB4[32+O5])and(GetUnitLifePercent(it)>60.)and(P87(600.,m5,Condition(function VH7))==0)then
set J4=PX7(it,$D0092,1093678664,HA)
endif
endif
elseif(eY[O5]==1 or eY[O5]==3 or eY[O5]==4)then
if((not J4)and(is(it))and(eY[O5]==1)and((P77(400.,b5,Condition(function Ka))>1)or((h4[$80+O5]!=null)and(OA7(h4[$80+O5]))and(IsUnitInRange(it,h4[$80+O5],400.)))))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it)))
call IssuePointOrderById(it,$D0012,GetUnitX(it)+350.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+350.*Sin(UP*bj_DEGTORAD))
endif
if((not J4)and(is(it))and(not SB7(it))and(P77(1200.,b5,Condition(function UB7))==0)and(not OY7(it)))then
set UP=GetUnitUserData(h8[32+O5])
set L84=300
if((eY[O5]==3)or(eY[O5]==4))and(h8[64+O5]!=null)then
set h9[48+O5]=h8[64+O5]
if P87(600.,it,Condition(function k6))>0 or P87(600.,h9[48+O5],Condition(function k6))>0 then
set L84=-1
endif
elseif(h9[48+O5]==null)or(not IsUnitInRange(it,h9[48+O5],1800.))then
set LE4=IsUnitAlly(it,Y7[O5])
set UP=EFF(GetUnitUserData(h8[80+O5]),(not LE4),0)
if UP==35 then
set UP=351
elseif UP==55 then
set UP=352
endif
if UP!=0 and(P87(900.,h7[UP],Condition(function UB7))==0)and((LE4 and(not IsVisibleToPlayer(GetUnitX(h7[UP]),GetUnitY(h7[UP]),Z7[0])))or((not LE4)and(not IsVisibleToPlayer(GetUnitX(h7[UP]),GetUnitY(h7[UP]),Y7[0]))))then
set h9[48+O5]=h7[UP]
endif
endif
if L84!=-1 then
if(not J4)and(h9[48+O5]!=null)and(Bz>TB4[16+O5])and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093678410,4)+ANE(it,1093678658,4))then
call MoveLocation(HA,GetUnitX(h9[48+O5])+GetRandomReal(-L84,L84),GetUnitY(h9[48+O5])+GetRandomReal(-L84,L84))
set J4=(PX7(it,$D0136,1093678410,HA))
endif
set bj_lastLoadedUnit=it
if(not J4)and(h9[48+O5]!=null)and(Bz>TB4[32+O5])and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093678664,4)+ANE(it,1093678658,4))and(P87(600.,h9[48+O5],Condition(function VH7))==0)then
call MoveLocation(HA,GetUnitX(h9[48+O5])+GetRandomReal(-100.,100.),GetUnitY(h9[48+O5])+GetRandomReal(-100.,100.))
set J4=(PX7(it,$D0092,1093678664,HA))
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>TB4[O5]))then
set m5=O27(1800.,b5,Condition(function VG7))
set bj_forLoopAIndex=(P87(600.,m5,Condition(function KG)))
if((m5!=null)and(not BR8(m5))and(bj_forLoopAIndex<4))then
set UP=R2I(OVF(m5))
set GZ[272+O5]=false
if(bj_forLoopAIndex>0)then
set hq[$F0+O5]=Bz+5.
else
set hq[$F0+O5]=.0
endif
set J4=PZ7(it,$D0218,1093681483,1093748313,GetUnitX(m5)+GetRandomReal(400.,450.)*Cos(UP*bj_DEGTORAD)+GetRandomReal(-300.,300.),GetUnitY(m5)+GetRandomReal(400.,450.)*Sin(UP*bj_DEGTORAD)+GetRandomReal(-300.,300.))
endif
set bj_forLoopAIndex=(P87(600.,h8[64+O5],Condition(function KG)))
if((not J4)and((eY[O5]==3)or(eY[O5]==4))and(h8[64+O5]!=null)and(IsUnitInRange(it,h8[64+O5],900.))and(bj_forLoopAIndex<6))then
set GZ[272+O5]=false
if(bj_forLoopAIndex>0)then
set hq[$F0+O5]=Bz+5.
else
set hq[$F0+O5]=.0
endif
set J4=PZ7(it,$D0218,1093681483,1093748313,GetUnitX(h8[64+O5])+GetRandomReal(-300,300),GetUnitY(h8[64+O5])+GetRandomReal(-300.,300.))
endif
if(not J4)then
set GZ[272+O5]=true
set m5=O27(1800.,b5,Condition(function KG))
set bj_forLoopAIndex=(P87(600.,h9[48+O5],Condition(function KG)))
if(m5!=null)then
set hq[$F0+O5]=Bz+5.
set J4=PZ7(it,$D0218,1093681483,1093748313,GetUnitX(m5)+GetRandomReal(-100.,100.),GetUnitY(m5)+GetRandomReal(-100.,100.))
elseif(h9[48+O5]!=null)and(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093681483,4)+ANE(it,1093748313,4)+ANE(it,1093678658,4))and(bj_forLoopAIndex<8)then
set hq[$F0+O5]=Bz+5.
set J4=(PZ7(it,$D0218,1093681483,1093748313,GetUnitX(h9[48+O5])+GetRandomReal(-L84,L84),GetUnitY(h9[48+O5])+GetRandomReal(-L84,L84)))
endif
endif
endif
endif
endif
if((not J4)and(Bz>TB4[O5])and(G0[256+O5])and(GetUnitManaPercent(it)>50.))then
set m5=O27(700.,b5,Condition(function k8))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_HERO))and(P87(400.,m5,Condition(function k8))>2)and(PY7(it,$D0218,1093681483,1093748313,m5))
endif
if((not J4)and(Bz>TB4[16+O5])and(G0[256+O5])and(GetUnitAbilityLevel(it,1093678410)>1)and(GetUnitManaPercent(it)>50.))then
set m5=O27(700.,b5,Condition(function TZ7))
set J4=(m5!=null)and(P87(500.,m5,Condition(function TZ7))>2)and(PX7(it,$D0136,1093678410,PU7(m5)))
endif
endif
endif
elseif(i1==1215657064)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>$A))then
set m5=O27(800.,b5,Condition(function k6))
endif
call SetPlayerAbilityAvailable(pl,1093677913,(GetHeroLevel(it)>$E)and(P77(1500.,b5,Condition(function k6))==0)and(GetUnitManaPercent(it)>75.))
call SetPlayerAbilityAvailable(pl,1093750841,false)
if(m5!=null)then
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
endif
if((G0[$80+O5])and(PD7(it,SU[QW]))and(m5!=null)and(not IsUnitIllusion(m5))and(Bz>hq[O5]))then
set J4=(GetHeroLevel(it)>5)and(UP>$FA)and(UP<700)and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1)and(O6F(it,m5))
endif
call SetPlayerAbilityAvailable(pl,1093684291,(GetUnitAbilityLevel(it,1110454856)>0)or(m5!=null))
if((not J4)and(m5!=null)and(not IsUnitIllusion(m5))and(GetHeroLevel(it)>5))then
set J4=((UP<300)and(GetUnitAbilityLevel(it,1110454856)==0)and(PC7(it,$D0084,1093684291)))or((UP<$C8)and(PC7(it,$D0278,1093750841)))or((UP<280)and(PC7(it,$D0080,1093677913)))
endif
elseif(i1==1332179560)then
set J4=(m5!=null)and((GetUnitLifePercent(m5)<50.)or(i2(m5)))and(PW7(it,$D02B6,1093742660,m5))
if((not J4)and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>4)and(P77(800.,b5,Condition(function VG7))>0))then
if((m5==null)or(not IsUnitInRange(it,m5,800.)))then
set m5=O27(800.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(PW7(it,$D02B6,1093742660,m5))
endif
elseif(i1==1214344551)then
if((m5!=null)and(not IsUnitIllusion(m5))and(GetUnitLifePercent(m5)<70.)and(P77(700.,b5,Condition(function k6))>1)and(P77(700.,b5,Condition(function V47))>0))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if(m5!=null)then
set J4=PW7(it,$D007F,1093809742,m5)
endif
if(not J4)then
set m5=VB7(99999,it)
set UV7=VA7(99999,it,Condition(function LE7))
set m5=MC7(((m5!=null and GetUnitLifePercent(m5)<=45.)or(UV7==null and m5!=null and GetUnitLifePercent(m5)<=70)),m5,UV7)
set J4=((m5!=null)and IssueTargetOrderById(it,$D0118,m5))
endif
if((not J4)and(GetUnitManaPercent(it)>50.)and(GetHeroLevel(it)>2))then
set m5=O27(1500.,b5,Condition(function VG7))
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<40.)and(GetUnitCurrentOrder(m5)==$D0012))then
set J4=(K6(m5))and(IssueTargetOrderById(it,$D0065,m5))
endif
endif
if((not J4)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(P77(1000.,b5,Condition(function V47))>0))then
set m5=P47(500.,b5,Condition(function k6))
if(m5!=null)and(GetUnitLifePercent(m5)<70.)then
set UP=P77(700.,b5,Condition(function k6))
set J4=((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(IssueImmediateOrderById(it,$D0278))
endif
endif
endif
elseif((i1==1311781199)or(i1==1311781171)or(i1==1311781172)or(i1==1311781173))then
if((GetHeroLevel(it)>$F)and(GetUnitTypeId(it)==1311781199)and(GetUnitAbilityLevel(it,1093681479)>2)and(N37(it,PL7(it))<2000.))then
set J4=PC7(it,$D00AA,1093681479)
endif
if((GetUnitTypeId(it)==1311781199)and(GetUnitAbilityLevel(it,1093681479)>1))then
set J4=PC7(it,$D00AA,1093681479)
endif
if((P77(700.,b5,Condition(function TW7))==0)and(((GetUnitTypeId(it)==1311781171)and(GetUnitAbilityLevel(it,1093681479)>1))or((GetUnitTypeId(it)==1311781172)and(GetUnitAbilityLevel(it,1093681479)>2))))then
set J4=PC7(it,$D00AB,1093681479)
endif
set m5=QA7(GetHandleId(pl),"MyBear")
if((m5==null)or(not OA7(m5))or(GetUnitLifePercent(m5)<20 and Bz>TB4[16+O5]))then
set J4=IssueImmediateOrderById(it,$D0272)
endif
if((not J4)and(IsUnitInRange(it,m5,600.))and(GetUnitAbilityLevel(m5,1110454582)==0)and((h4[O5]!=null)or((GetUnitManaPercent(it)>50.)and(P77(700.,b5,Condition(function KA))>0))))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if((not J4)and(GetUnitAbilityLevel(it,1110454582)==0)and((h4[O5]!=null)or((GetUnitManaPercent(it)>30.)and(P77(700.,b5,Condition(function KA))>0))))then
set J4=IssueImmediateOrderById(it,$D022E)
endif
if(P77(700.,b5,Condition(function VG7))>0)then
set hq[$F0+O5]=Bz+4.
endif
if((not J4)and(GetUnitTypeId(it)!=1311781199)and(m5!=null)and(IsUnitInRange(it,m5,600.))and(hq[416+O5]>Bz))then
set J4=IssueImmediateOrderById(it,$D0277)
endif
elseif(i1==1215130471)then
call SetPlayerAbilityAvailable(pl,S27(it),(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>40.))
call SetPlayerAbilityAvailable(pl,S_7(it),(GetHeroLevel(it)>$C)and(GetUnitManaPercent(it)>70.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>2))then
set m5=O27(1000.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(((((GetUnitManaPercent(it)>40.)and(GetHeroLevel(it)>2))or(OB7(m5,it)))and(PW7(it,$D007F,S27(it),m5)))or((OB7(m5,it))and(PW7(it,$D02B6,S_7(it),m5))))
if((not J4)and(GetUnitManaPercent(it)>70.)and(GetHeroLevel(it)>$C))then
set J4=(P77(700.,b5,Condition(function k6))==0)and(P77(700.,b5,Condition(function k8))>0)and(GetUnitAbilityLevel(it,1113746543)==0)and(PW7(it,$D0085,T47(it),it))
if(not J4)then
set m5=O27(700.,b5,Condition(function V47))
set J4=(m5!=null)and(kq(GetUnitTypeId(m5)))and(P77(700.,b5,Condition(function KA))>0)and(GetUnitAbilityLevel(m5,1113746543)==0)and(PW7(it,$D0085,T47(it),m5))
endif
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60))then
set J4=(R87(GetHandleId(it),"AI|Magi2Blast")and PW7(it,$D0278,1093815121,m5))
endif
elseif(i1==1211117636)then
set UP=GetHeroLevel(it)
if(UP>7)then
call SetPlayerAbilityAvailable(pl,1093685041,(m5==null)and(GetUnitManaPercent(it)>50.))
else
call SetPlayerAbilityAvailable(pl,1093685041,false)
endif
if((h4[16+O5]!=null)and(not OA7(h4[16+O5])))then
set h4[16+O5]=null
endif
call SetPlayerAbilityAvailable(pl,1093685071,(UP>9)and(h4[16+O5]==null)and(GetUnitManaPercent(it)>60.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4)and(GetUnitManaPercent(it)>70.))then
set m5=O27(800.,b5,Condition(function k6))
endif
if((m5!=null)and(UP>2)and(GetUnitManaPercent(it)>30.)and(not IsUnitInRange(it,m5,250.))and(IsUnitInRange(it,m5,900.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))
call SetPlayerAbilityAvailable(pl,1093685041,true)
set GZ[O5]=true
set J4=J8(O5,IssuePointOrderById(it,$D00FA,GetUnitX(it)+1100.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+1100.*Sin(UP*bj_DEGTORAD)))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>$A)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if(((UP>1)or(UP==P17(not IsUnitAlly(it,Y7[0]))))and(P77(1000.,b5,Condition(function V47))>0))then
set J4=(GetUnitLifePercent(m5)<75.)and(PY7(it,$D007F,1093685042,1093810233,m5))
endif
endif
elseif(i1==1160786000)then
call SetPlayerAbilityAvailable(pl,1093685047,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>70.))
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=O27(700.,b5,Condition(function k6))
endif
set J4=(m5!=null)and(GetHeroLevel(it)>3)and((GetUnitManaPercent(it)>40.)or(OB7(m5,it)))and(PW7(it,$D00FA,1093685047,m5))
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(Kz(700.,PU7(m5))>1)and((Bz>hq[O5])or(P87(700.,m5,Condition(function U_7))>0))and(PW7(it,$D009D,1093685045,m5))
endif
elseif((i1==1311781193)or(i1==1311781192)or(i1==1311781204)or(i1==1311781194))then
if(i1==1311781193)then
set J4=(((GetHeroLevel(it)>=6)and(h4[O5]!=null))or((GetHeroLevel(it)>$A)and(GetUnitLifePercent(it)<80.)and(P77(700.,b5,Condition(function k8))>0)))and(IssueImmediateOrderById(it,$D02B7))
elseif((m5==null)and(G0[$80+O5])and(i1!=1311781193))then
set m5=O27(700.,b5,Condition(function k6))
call ZSE(O5,m5,false,false)
endif
if((not J4)and(G0[$80+O5])and(eY[320+O5]>=-1)and(h4[O5]!=null or GetUnitManaPercent(it)>70)and(GetUnitAbilityLevel(it,1093750345)>1))then
if m5==null then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1000.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5])))and(IsUnitVisible(h4[$90+O5],GetOwningPlayer(it))))then
set m5=h4[$90+O5]
else
set m5=O27(800.,b5,Condition(function k6))
endif
endif
set J4=(m5!=null)and(IsUnitInRange(it,m5,300))and(IssueImmediateOrderById(it,$D022E))
endif
if((not J4)and(m5!=null)and(GetHeroLevel(it)>5))then
set J4=(P87(700.,m5,Condition(function k6))>1)and(P87(700.,m5,Condition(function U_7))>0)and(PW7(it,$D0079,1093683532,m5))
endif
if((not J4)and(GetHeroLevel(it)>$B)and(GetUnitManaPercent(it)>55.)and(P77(500.,b5,Condition(function KA))>2)and(Bz>hq[O5]))then
call SetPlayerAbilityAvailable(pl,1093683532,true)
set J4=IssuePointOrderById(it,$D0079,GetUnitX(it)+GetRandomReal(0,200.)-100.,GetUnitY(it)+GetRandomReal(0,200.)-100.)
else
call SetPlayerAbilityAvailable(pl,1093683532,(GetHeroLevel(it)>$B)and(GetUnitManaPercent(it)>50.))
endif
elseif(i1==1311781206)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>4))then
if((eY[O5]==9)and(h4[$90+O5]!=null)and(OA7(h4[$90+O5]))and(IsUnitInRange(it,h4[$90+O5],1200.))and(not IsUnitVisible(it,GetOwningPlayer(h4[$90+O5]))))then
set m5=h4[$90+O5]
else
set m5=O27(800.,b5,Condition(function k6))
endif
endif
if((m5!=null)and(GetHeroLevel(it)>4))then
if(not IsUnitInRange(it,m5,800.))then
set J4=((eY[O5]==9)or(not IsUnitVisible(it,GetOwningPlayer(m5))))and(ZME(it,m5))
elseif(not IsUnitInRange(it,m5,300.))then
set UP=R2I(RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it)))-GetUnitFacing(it)))
set J4=((GetUnitLifePercent(m5)<60.)or(P87(600.,m5,Condition(function U_7))>0))and((ZME(it,m5))or((Bz>hq[O5])and(UP<50)and(GetUnitState(it,UNIT_STATE_MANA)>230.)and(GHF(it,true))))
elseif(GetUnitLifePercent(m5)<40. and IsUnitInRange(it,m5,300.))then
set J4=ZME(it,m5)
endif
if(not J4)and((GetUnitManaPercent(it)>50.)or(GetUnitLifePercent(m5)<60.))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
endif
if((not J4)and(GetHeroLevel(it)>5)and(Bz>hq[16+O5]))then
set bj_lastLoadedUnit=m5
set m5=Ie(bj_mapInitialPlayableArea,Condition(function V97))
set J4=(m5!=null)and(P87(800.,m5,Condition(function k6))>0)and(IssueImmediateOrderById(it,$D020D))
set m5=bj_lastLoadedUnit
endif
if(not J4)and(Bz>TB4[32+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093684280)>1)and(GetUnitState(it,UNIT_STATE_MANA)>=230.)then
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(P77(400.,b5,Condition(function k8))==0))then
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1211117651)then
if m5==null then
set m5=VY7(450.,it)
if m5==null then
set m5=VY7(1000.,it)
endif
endif
if RG7(it,"OverloadActive")then
if(h4[O5]!=null)and(GetUnitLevel(it)>5)and(not IsUnitInRange(it,h4[O5],450.))and(OB7(m5,it))then
call ZR7(it,m5,625*(GetUnitAbilityLevel(it,1093743695)+1),1.,99999)
if DF7!=null then
set J4=PX7(it,$D00FA,1093743695,DF7)
endif
endif
if(not J4)then
set J4=IssueTargetOrderById(it,$D000F,m5)
endif
elseif m5!=null and(GetUnitLevel(it)>3)then
if(not J4)and((h4[O5]!=null)or(GetUnitState(it,UNIT_STATE_MANA)>200.))and((IsUnitInRange(it,m5,300.)or G0[256+O5]))then
set J4=(PW7(it,$D0097,1093743698,m5))
endif
if(not J4)and(IsUnitInRange(it,m5,200.))then
set J4=(PC7(it,$D022E,1093743696))
endif
if(not J4)and(h4[O5]!=null)then
if(not IsUnitInRange(it,h4[O5],450.))and((OB7(m5,it))or(G0[256+O5]))then
call ZR7(it,m5,625*(GetUnitAbilityLevel(it,1093743695)+1),1.,99999)
if DF7!=null then
set J4=PX7(it,$D00FA,1093743695,DF7)
endif
elseif GetUnitState(it,UNIT_STATE_MANA)>300. then
set L84=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
call MoveLocation(HB,GetUnitX(it)+$96*Cos(L84),GetUnitY(it)+$96*Sin(L84))
set J4=PX7(it,$D00FA,1093743695,HB)
endif
endif
if(not J4)then
if P87(200.,it,Condition(function TZ7))>2 and(GetUnitState(it,UNIT_STATE_MANA)>500. or GetUnitManaPercent(it)>90.)then
set J4=(PC7(it,$D022E,1093743696))
endif
endif
endif
elseif(i1==1211117649)then
if(GetHeroLevel(it)>6)then
set m5=K3(700.,it,Condition(function k6))
set J4=(m5!=null)and((GetUnitState(it,UNIT_STATE_LIFE)*.5)>GetUnitState(m5,UNIT_STATE_LIFE))and(IssueTargetOrderById(it,$D0107,m5))
endif
if(not J4)then
set m5=O27(800.,b5,Condition(function V97))
if(m5==null)then
set m5=O27(600.,b5,Condition(function U_7))
endif
set J4=((m5!=null)and(GetUnitLifePercent(m5)<70.)and((GetHeroLevel(it)>4)or(OB7(m5,it)))and(IssueTargetOrderById(it,$D007F,m5)))or((GetUnitLifePercent(it)<70.)and(IssueTargetOrderById(it,$D007F,it)))
endif
elseif(i1==1160786265)then
call SetPlayerAbilityAvailable(pl,1093685844,false)
call SetPlayerAbilityAvailable(pl,1093685846,false)
set J4=(m5!=null)and(IsUnitInRange(it,m5,$91+(40*GetUnitAbilityLevel(it,1093685839))))and(PC7(it,$D00A1,1093685846))
if((not J4)and(GetHeroLevel(it)>5)and(P77(900.,b5,Condition(function UB7))==0))then
set J4=(GetRandomInt(1,3)==1)and(GetUnitManaPercent(it)>60.)and(P77(800.,b5,Condition(function k8))>2)and(P77(800.,b5,Condition(function Kh))==0)and(not SB7(it))and(IssuePointOrderById(it,$D00DE,GetUnitX(it)+GetRandomReal(-100.,100.),GetUnitY(it)+GetRandomReal(-100.,100.)))
if((not J4)and(m5!=null)and(GetUnitAbilityLevel(m5,1110456397)==0))then
set J4=((GetUnitManaPercent(it)>60.)or(GetUnitLifePercent(m5)<70.))and(P87(600.,m5,Condition(function Kh))==0)and(IssuePointOrderById(it,$D00DE,GetUnitX(m5)+GetRandomReal(-100.,100.),GetUnitY(m5)+GetRandomReal(-100.,100.)))
endif
endif
elseif(i1==1311780930)then
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=O27(1100.,b5,Condition(function k6))
endif
if((m5!=null)and(((GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>50.))or(GetUnitLifePercent(m5)<60.)))then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5)+150.*Cos(GetUnitFacing(m5)*bj_DEGTORAD),GetUnitY(m5)+150.*Sin(GetUnitFacing(m5)*bj_DEGTORAD))
if((GetUnitLifePercent(it)>70.)and((Bz>hq[16+O5])or(O07(m5,it)))and(G0[$80+O5])and(GetUnitLifePercent(m5)<60.)and(GetUnitState(it,UNIT_STATE_LIFE)>(GetUnitState(m5,UNIT_STATE_LIFE)+(15.*GetHeroLevel(m5))))and((P87(800.,m5,Condition(function VU7))-P87(800.,m5,Condition(function V47)))<=1))then
set h4[16+O5]=m5
else
set h4[16+O5]=null
endif
set hq[$F0+O5]=Bz+3.
endif
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<60.)and(IsUnitInRange(it,m5,700.)))then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(PL7(m5)),GetUnitX(m5)-GetUnitX(PL7(m5))))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
call J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5)+250.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+250.*Sin(UP*bj_DEGTORAD)))
endif
if(not J4)then
set m5=K3(400.,it,Condition(function k6))
set J4=(m5!=null)and(IssueImmediateOrderById(it,$D0278))
endif
if((not J4)and(GetHeroLevel(it)>$D)and(hq[416+O5]>Bz)and(Bz>hq[O5])and(G0[$80+O5]))then
set UP=P77(1000.,b5,Condition(function k6))
if((UP>1)and((P77(1000.,b5,Condition(function V47))>0)or(P17(IsUnitAlly(it,Y7[0]))==1)))then
set m5=O27(800.,b5,Condition(function k6))
if(P87(375.,m5,Condition(function k6))>0)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093686072,true)
set GZ[O5]=true
call J8(O5,IssuePointOrderById(it,$D0079,GetUnitX(m5),GetUnitY(m5)))
endif
endif
endif
elseif(i1==1311786311)then
if m5==null then
set m5=O27(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and((GetUnitLifePercent(m5)<60)or(h4[O5]!=null))then
set L84=Atan2(GetUnitY(m5)-GetUnitY(it),GetUnitX(m5)-GetUnitX(it))
if(DW8(it,m5,L84)!=null)or(DS8(it,m5,L84)!=null)then
set J4=PW7(it,$D0097,1093743178,m5)
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(not ZN7(it,m5,GetUnitX(m5),GetUnitY(m5),64,Condition(function LX7)))and(IsUnitInRange(it,bj_lastLoadedUnit,550.))then
set J4=PW7(it,$D0097,1093743178,bj_lastLoadedUnit)
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(h4[O5]!=null)and(GetUnitLifePercent(m5)<20.)then
set J4=PW7(it,$D0097,1093743178,m5)
endif
endif
if(not J4)and(Bz>TB4[O5])and(m5!=null)and(BK8(m5)or GetUnitMoveSpeed(m5)<300.)and(IsUnitInRange(it,m5,700.))and((m5==h4[O5])or(GetUnitLifePercent(m5)<70))then
set J4=PY7(it,$D0265,1093743184,1093747766,m5)
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if m5==null then
set m5=O27(1200.,b5,Condition(function k6))
endif
set UP=GetUnitAbilityLevel(it,1093743184)
if UP==0 then
set UP=GetUnitAbilityLevel(it,1093747766)
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and(GetUnitAbilityLevel(it,1093743179)>1)and((GetUnitState(it,UNIT_STATE_MANA)>200.+UP*100.)or(h4[O5]!=null))and((GetUnitLifePercent(m5)>40.)or(GetWidgetLife(m5)<GetUnitAbilityLevel(it,1093743179)*70))and(ZR7(it,m5,3000.,1.,1800.)!=null)then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DF7)
endif
if(not J4)and(Bz>TB4[48+O5])and(((hq[704+O5]<-.1)and(m5!=null))or((hq[704+O5]<-.8)and(GetUnitLifePercent(it)<60.)))then
set J4=PC7(it,$D022E,1093743689)
endif
if(not J4)and(Bz>TB4[32+O5])and(GetUnitAbilityLevel(it,1093743179)>1)and(GetUnitState(it,UNIT_STATE_MANA)>300.+UP*100.)then
set m5=K3(1500.,it,Condition(function U37))
if(m5!=null)then
set IM4=it
call ZN7(it,m5,GetUnitX(m5),GetUnitY(m5),$AF,Condition(function LF7))
if bj_forLoopAIndex>2 then
set J4=IssuePointOrderById(it,$D02B6,GetUnitX(m5),GetUnitY(m5))
endif
endif
endif
if(not J4)and(Bz>TB4[16+O5])and(h4[O5]==null)and(GetUnitAbilityLevel(it,1093743178)>1)and(GetUnitState(it,UNIT_STATE_MANA)>=250.)then
if m5==null or(not IsUnitInRange(m5,it,700))then
set m5=O27(700.,b5,Condition(function k6))
endif
if((not J4)and(m5!=null)and(not IsUnitInRange(it,m5,450.))and(iU(it))and(G0[$80+O5])and(not G0[48+O5])and(P77(400.,b5,Condition(function k8))==0))then
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
if(GetRandomInt(1,2)==1)then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))-25
else
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(it)-GetUnitY(m5),GetUnitX(it)-GetUnitX(m5)))+25
endif
set J4=IssuePointOrderById(it,$D0012,GetUnitX(m5)+UP*Cos(i1*bj_DEGTORAD),GetUnitY(m5)+UP*Sin(i1*bj_DEGTORAD))
endif
endif
elseif(i1==1211117652)then
if(m5==null)then
set m5=O27(1200.,b5,Condition(function k6))
endif
if(not J4)and(GetUnitLevel(it)>5)and(Bz>TB4[O5])and(not IsUnitInRange(it,m5,300))and(h4[O5]!=null)and(GZ[$D0+O5]or((P87(700.,m5,Condition(function P97))==0)and(GetUnitLifePercent(m5)<70. or O67(O5))))then
set UP=GetUnitAbilityLevel(it,1093687864)
if UP==0 then
set UP=GetUnitAbilityLevel(it,1093747542)
endif
if(ZT7(it,m5,.5,(UP+3)*500)!=null)then
if(ZN7(it,m5,GetLocationX(DF7),GetLocationY(DF7),125,Condition(function LT7)))or(IsUnitInRange(bj_lastReplacedUnit,m5,$AF)and(IsUnitEnemy(bj_lastReplacedUnit,Player(O5))or PD7(it,SU[F_4])))then
set J4=(PZ7(it,$D02AC,1093687864,1093747542,GetLocationX(DF7),GetLocationY(DF7)))
endif
endif
if J4 then
call NX7(.1)
set J4=false
endif
endif
if(not J4)and(Bz>TB4[48+O5])and(GetUnitAbilityLevel(it,1093687862)>1)then
if(m5==null)then
set m5=O27(99999.,GetUnitLoc(it),Condition(function k6))
endif
if((m5!=null))then
if(GetUnitLifePercent(m5)<50. or GetUnitState(it,UNIT_STATE_MANA)>300.)then
if OB7(m5,it)or GZ[$D0+O5]or h4[O5]!=null then
if ZR7(it,m5,1200.,0,99999.)!=null then
set J4=PX7(it,$D0079,1093687862,DF7)
endif
else
set J4=PX7(it,$D0079,1093687862,PU7(m5))
endif
endif
endif
endif
if(not J4)and(Bz>TB4[32+O5])and(m5!=null)and(MP7(it)>1000.)and(G0[256+O5])and(GetUnitState(it,UNIT_STATE_MANA)>200.)and(IsUnitInRange(it,m5,$D2))then
set J4=IssueImmediateOrderById(it,$D0265)
endif
if(not J4)and(Bz>TB4[16+O5])and(h4[O5]!=null)and(IsUnitInRange(it,m5,275))then
set J4=IssueImmediateOrderById(it,$D0278)
endif
elseif(i1==1160786520)then
call SetPlayerAbilityAvailable(pl,1093809991,(GetHeroLevel(it)>9)and(GetUnitManaPercent(it)>70.))
if eY[448+O5]!=0 and OV7(it)then
if(IsUnitInRange(it,h4[320+O5],950.))and(LoadInteger(C7,(GetHandleId(h4[320+O5])),(705))==eY[448+O5])then
set J4=IssueTargetOrderById(it,$D02B9,h4[320+O5])
else
set eY[448+O5]=0
endif
endif
if((m5==null)and(G0[$80+O5])and(GetHeroLevel(it)>3)and(GetUnitManaPercent(it)>70.))then
set m5=O27(700.,b5,Condition(function k6))
endif
if not J4 then
set J4=(m5!=null)and(GetHeroLevel(it)>3)and((GetUnitManaPercent(it)>40.)or(OB7(m5,it)))and(PW7(it,$D00D8,1093809991,m5))
endif
if(not J4)and hq[816+O5]>Bz then
set G0[288+O5]=true
call QKF()
endif
set G0[304+O5]=false
elseif(i1==1311788336)then
if m5==null then
set m5=O27(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and((h4[O5]!=null)or(GetUnitLifePercent(m5)<60))and(GetUnitState(it,UNIT_STATE_MANA)>100)then
set UP=1
loop
exitwhen UP>3
set bj_lastCreatedUnit=(LoadUnitHandle(C7,GetHandleId(it),($5AA+UP)))
exitwhen bj_lastCreatedUnit==null
if(GetWidgetLife(bj_lastCreatedUnit)>0)and(IsUnitInRange(bj_lastCreatedUnit,m5,300))then
set J4=IssuePointOrderById(it,$D00D9,GetUnitX(bj_lastCreatedUnit),GetUnitY(bj_lastCreatedUnit))
exitwhen true
endif
set UP=UP+1
endloop
if(not J4)and(not IsUnitInRange(it,m5,400))and(LoadInteger(C7,GetHandleId(it),(747))>0)and(ZR7(it,m5,GetUnitMoveSpeed(it)*2.5,.2,1500.)!=null)then
set J4=IssuePointOrderByIdLoc(it,$D020A,DF7)
endif
if J4 then
call ZSE(O5,m5,false,false)
endif
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and((h4[O5]!=null)or(GetUnitLifePercent(m5)<70))and(IsUnitInRange(it,m5,350))and(P87(400.,it,Condition(function TZ7))<=2)then
set J4=PC7(it,$D022E,1093814323)
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and((h4[O5]!=null)or(GetUnitManaPercent(it)>50 and GetUnitState(it,UNIT_STATE_MANA)>$DC))then
set J4=PW7(it,$D0079,1093814320,m5)
endif
if(not J4)and(m5!=null)and(Bz>TB4[48+O5])and(h4[O5]!=null)then
set J4=IssueImmediateOrderById(it,$D0278)
endif
if(not J4)and(Bz>TB4[32+O5])and(GetUnitManaPercent(it)>50 and GetUnitState(it,UNIT_STATE_MANA)>400)then
set m5=O27(700.,b5,Condition(function TZ7))
if(m5!=null)then
set J4=PW7(it,$D0079,1093814320,m5)
endif
endif
elseif(i1==1160786507)then
if m5==null then
set m5=O27(700.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and((GetUnitLifePercent(m5)<70.)or(h4[O5]!=null))then
set UP=P77(315.,PU7(m5),Condition(function k8))
if(not J4)then
set J4=(UP>=3)and(PW7(it,$D0079,1093814850,m5))
endif
endif
if(not J4)and(Bz>TB4[32+O5])and((GetUnitLifePercent(it)<60)or((h4[O5]!=null)and((GetUnitLifePercent(it)<80)or(UnitCountBuffsEx(it,false,true,true,true,false,false,false)>=0))))then
set J4=IssueTargetOrderById(it,$D0118,it)
endif
if(not J4)and(Bz>TB4[O5])and(G0[256+O5])and((GetUnitLifePercent(m5)<30 and GetUnitLifePercent(it)>GetUnitLifePercent(m5)+25)or(GZ[$D0+O5]and GetUnitLifePercent(m5)<60))then
set J4=IssueTargetOrderById(it,$D007F,m5)
endif
if(not J4)and(Bz>TB4[32+O5])then
set m5=O27(800.,b5,Condition(function V97))
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0118,m5))
endif
elseif(i1==1211122767)then
if m5==null then
set m5=O27(800.,b5,Condition(function k6))
endif
if(not J4)and(m5!=null)and(Bz>TB4[48+O5])and((h4[O5]!=null)or(GetUnitManaPercent(m5)>60 and GetUnitLifePercent(m5)<70))and((Bz<TB4[O5])or(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093812807,4)+100))then
set J4=PW7(it,$D02BC,1093814350,m5)
endif
if(not J4)and(m5!=null)and(Bz>TB4[O5])and((GetUnitLifePercent(m5)<30)or(BK8(m5))or(GetUnitAbilityLevel(m5,1110459993)!=0))then
set J4=(ZT7(it,m5,.5,$4B0)!=null)and(IssuePointOrderByIdLoc(it,$D02B6,DF7))
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and((GetUnitLifePercent(m5)<70)or(h4[O5]!=null))and(P87(N37(it,m5),it,Condition(function k6))<=1)then
set J4=PC7(it,$D022E,1093814612)
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and((GetUnitLifePercent(m5)<70)or(h4[O5]!=null)or(GetUnitManaPercent(m5)>80))and((Bz<TB4[O5])or(GetUnitState(it,UNIT_STATE_MANA)>ANE(it,1093812807,4)+100))then
set J4=PW7(it,$D0097,1093812805,m5)
endif
elseif(i1==1160786738)then
if m5==null then
set m5=O27(700.,b5,Condition(function k6))
endif
if(not J4)then
if GetUnitAbilityLevel(it,1093813848)==0 then
if(h4[O5]!=null)and(not IsUnitInRange(it,m5,400))then
if ZR7(it,m5,$3E8,.1,$4B0)!=null then
call IssuePointOrderByIdLoc(it,$D00F8,DF7)
endif
endif
else
if(h4[O5]==null)or(IsUnitInRange(it,m5,400))or(P87($E1,QA7(GetHandleId(it),"AI|ShredChakram"),Condition(function k6))==0)then
call IssueImmediateOrderById(it,$D00D1)
endif
endif
call TriggerSleepAction(.1)
endif
if(not J4)and(m5!=null)and(Bz>TB4[32+O5])and((h4[O5]!=null)or(GetUnitLifePercent(it)<70))then
set UP=600+$C8*GetUnitAbilityLevel(it,1093813555)
if ZR7(it,m5,2*UP,.8,UP)!=null then
if WD7(it,UP)or((V14!=null)and(bj_enumDestructableRadius==0)and(N37(V14,it)>400.))then
set J4=IssuePointOrderByIdLoc(it,$D02B6,DF7)
endif
endif
if(not J4)and(GetUnitLifePercent(m5)<30)then
if W87(PU7(m5),300)and(N37(V14,it)>400.)then
set J4=IssuePointOrderById(it,$D02B6,GetDestructableX(V14),GetDestructableY(V14))
endif
endif
endif
if(not J4)and(m5!=null)and(Bz>TB4[16+O5])and(IsUnitInRange(it,m5,300))then
set J4=PC7(it,$D022E,1093813835)
endif
endif
if not G0[304+O5]then
if((not J4)and(is(it)))then
if(GetUnitAbilityLevel(it,1110454609)>0)then
set m5=O27(250.,b5,Condition(function k6))
if(m5!=null)then
call UnitRemoveAbility(it,1110454609)
set J4=IssueTargetOrderById(it,$D000F,m5)
else
set m5=O27(800.,b5,Condition(function k6))
set J4=(m5!=null)and(not IsUnitVisible(it,GetOwningPlayer(m5)))and(IssueTargetOrderById(it,$D0012,m5))
endif
elseif((N37(it,PL7(it))<1000.)and(eY[O5]==1))then
if(PD7(it,SU[E6]))then
if(h8[16+O5]==h7[$E])then
set J4=OOF(0)
elseif(h8[16+O5]==h7[35])then
set J4=OOF(1)
elseif(h8[16+O5]==h7[55])then
set J4=OOF(2)
endif
elseif((GetHeroLevel(it)<$B)and(not PE7(it)))then
set m5=null
if(((i1==1211117641)and(GetHeroLevel(it)>5))or(i1==1211117642))then
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[$E])and(PL4<1))then
set m5=J64
elseif((IsPlayerAlly(pl,Y7[0]))and(h8[16+O5]==h7[$E])and(PC4<1))then
set m5=JG4
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[35])and(P14<1))then
set m5=J34
elseif((IsPlayerAlly(pl,Y7[0]))and(h8[16+O5]==h7[35])and(P34<1))then
set m5=JF4
elseif((IsPlayerAlly(pl,Z7[0]))and(h8[16+O5]==h7[55])and(P04<1))then
set m5=JL4
elseif((IsPlayerAlly(pl,Y7[0]))and(h8[16+O5]==h7[55])and(P64<1))then
set m5=JH4
endif
if(m5!=null)then
loop
call TriggerSleepAction(.5)
exitwhen(Bz>G77[$A0+O5])
endloop
set J4=SQ7(it,m5)
if(not J4 or not Q0F)then
call DisableTrigger(H84)
call RemoveItem(Q1F)
call EnableTrigger(H84)
else
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,(GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)-0))
call Q97(StringHash("Stats"+I2S(O5)),"NumOfConsumables",R47(StringHash("Stats"+I2S(O5)),"NumOfConsumables")+1)
endif
endif
endif
endif
if((not J4)and(PD7(it,SU[DO4])))then
set m5=O27(700.,b5,Condition(function KA))
if((m5!=null)and(GetUnitState(m5,UNIT_STATE_LIFE)>100.)and(GetUnitState(m5,UNIT_STATE_LIFE)<400.))then
if(not(IsUnitInRange(m5,it,550)))then
call IssuePointOrderById(it,$D0012,GetUnitX(m5),GetUnitY(m5))
call NX7(.5)
endif
set J4=(P87(600.,it,Condition(function KA))>3)and(UnitUseItem(it,bj_lastCreatedItem))
endif
set m5=null
set J4=false
endif
if((not J4)and(PD7(it,SU[N6])))then
if((GetRandomInt(1,$A)<=4)and(Bz>hq[$90+O5]))then
set m5=O27(700.,b5,Condition(function k8))
set J4=(m5!=null)and(not IsUnitType(m5,UNIT_TYPE_MECHANICAL))and(not IsUnitType(m5,UNIT_TYPE_HERO))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and PD7(it,SU[H3]))then
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and PD7(it,SU[DK4])and(RG7(it,"ArmletOfMordigan|Active")==false)and(GetUnitLifePercent(it)>90.)and(IsUnitInRange(it,m5,150.)))then
set J4=(m5!=null)and(UnitUseItem(it,bj_lastCreatedItem))
elseif(PD7(it,SU[DJ4])and(RG7(it,"ArmletOfMordigan|Active"))and((not IsUnitInRange(it,m5,150.))or(GetUnitLifePercent(it)<60.)))then
set J4=(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and PD7(it,SU[EC]))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<40)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(PD7(it,SU[DT4])))then
set J4=(m5!=null)and(GetUnitLifePercent(m5)<30)and(G0[256+O5]or GZ[$D0+O5])and(NA7(m5,it,30))and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(PD7(it,SU[DX4]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>TB4[$E0+O5])and(GetUnitState(m5,UNIT_STATE_LIFE)<120))then
set J4=(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(PD7(it,SU[RB]))and(GetItemCharges(bj_lastCreatedItem)>0)and(Bz>TB4[256+O5]))then
set J4=((P87(900.,it,Condition(function VU7)))>2)and((P87(900.,it,Condition(function V47)))>1)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(PO7(it))and(Bz>TB4[$C0+O5]))then
if(GetUnitState(it,UNIT_STATE_LIFE)<$96)or((GetItemCharges(bj_lastCreatedItem)>=8)and(GetUnitLifePercent(it)<50 or GetUnitManaPercent(it)<20)and(N37(it,h9[16+O5])>600))then
set J4=UnitUseItem(it,bj_lastCreatedItem)
endif
endif
if((not J4)and(PD7(it,SU[F44])))then
set J4=(Bz>hq[$80+O5])and((GetUnitState(it,UNIT_STATE_MAX_MANA)-GetUnitState(it,UNIT_STATE_MANA))>150.)and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(PD7(it,SU[Z2])))then
set J4=((Bz+20.)<hq[O5]or(Bz+20.)<TB4[O5])and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(PD7(it,SU[S2])))then
set J4=(GetUnitLifePercent(it)<50)and((h4[O5]!=null)or(G0[256+O5])or(GZ[$D0+O5]))and(UnitUseItem(it,bj_lastCreatedItem))
endif
if((not J4)and(PD7(it,SU[VC])))then
if(R87(Q_4,SK7(it)+"|G"))then
set m5=P47(700.,b5,Condition(function Km))
set J4=(m5!=null)and(GetRandomInt(1,8)==1)and(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(m5)+GetRandomReal(.0,200.)-100.,GetUnitY(m5)+GetRandomReal(.0,200.)-100.))
if((not J4)and(GetRandomInt(1,4)==1)and(P47(1000.,b5,Condition(function UB7))==null)and(P47(1200.,b5,Condition(function Km))!=null))then
set J4=(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(it)+GetRandomReal(.0,200.)-100.,GetUnitY(it)+GetRandomReal(.0,200.)-100.))
endif
endif
if((not J4)and(GetRandomInt(1,5)==1)and(N37(it,PL7(it))>5000.)and(GetItemCharges(bj_lastCreatedItem)>1)and(P47(800.,b5,Condition(function k8))!=null)and(P47(1000.,b5,Condition(function UB7))==null)and(P47(1100.,b5,Condition(function K7))==null))then
set J4=(UnitUseItemPoint(it,bj_lastCreatedItem,GetUnitX(it)+GetRandomReal(.0,200.)-100.,GetUnitY(it)+GetRandomReal(.0,200.)-100.))
endif
endif
if((not J4)and(PD7(it,SU[V6])))then
if(m5!=null)and(GetUnitLifePercent(m5)<30)then
set J4=UnitUseItemTarget(it,bj_lastCreatedItem,m5)
else
set m5=VL7(500.,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and(PD7(it,SU[DD4])))then
if not((m5!=null)and(IsUnitType(m5,UNIT_TYPE_HERO))and(IsUnitEnemy(m5,Player(O5))))then
set m5=P47(900.,b5,Condition(function k6))
endif
if(m5!=null)then
set m5=V37(900.,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
if((not J4)and(PD7(it,SU[N3])))and(h4[O5]!=null)then
set m5=V07(600,it)
set J4=(m5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
if((not J4)and(PD7(it,SU[DT4])))then
set m5=VC7(800,it)
if(O37(m5))then
set bj_forLoopAIndexEnd=GetPlayerId(GetOwningPlayer(m5))
if NA7(m5,h9[16+bj_forLoopAIndexEnd],20)then
set b5=kk(m5,600.,h9[16+bj_forLoopAIndexEnd])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
if J4 then
set h9[bj_forLoopAIndexEnd]=h9[16+bj_forLoopAIndexEnd]
endif
elseif(NA7(m5,h9[bj_forLoopAIndexEnd],20))and(h9[bj_forLoopAIndexEnd]!=h9[16+bj_forLoopAIndexEnd])then
set b5=kk(m5,600.,h9[bj_forLoopAIndexEnd])
set J4=(b5!=null)and(UnitUseItemTarget(it,bj_lastCreatedItem,m5))
endif
endif
endif
endif
if((not J4)and(h4[O5]!=null)and(G0[$80+O5])and(GetHeroLevel(it)>5))then
set UP=GetUnitCurrentOrder(it)
set m5=h4[O5]
if(((UP==$D000F)or(UP==$D0019))and(IsUnitVisible(m5,pl))and(GetUnitAbilityLevel(m5,1110454854)==0)and(not IC(O5))and((GetUnitLifePercent(it)+15.)>GetUnitLifePercent(m5))and(not G0[48+O5]))then
call IssueTargetOrderById(it,$D000F,m5)
elseif((UP==$D0012)and(IsUnitInRange(it,m5,600.)))then
call IUF(it,m5)
endif
endif
endif
set it=null
set pl=null
set b5=null
set QLF=null
set m5=null
set Q2F=null
set UV7=null
set Q6F=null
set Q3F=null
endfunction
function QMF takes nothing returns nothing
local unit it=bj_lastLoadedUnit
local unit m5=null
local integer i1=GetUnitTypeId(it)
local integer O5=GetPlayerId(GetOwningPlayer(it))
local integer UP
local boolean J4=false
set LP4="QMF"
if B_4 then
call TriggerSleepAction(GetRandomReal(.2,.4))
endif
set B_4=true
if((i1==1848651848)or(i1==1848651847)or(i1==1848651851)or(i1==1848651850)or(i1==1848651841)or(i1==1848651830))then
set m5=h4[O5]
if(m5==null)then
set m5=O27(1000.,PU7(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(G7[O5])>50.)and(GetHeroLevel(G7[O5])>5)and(not G0[O5])and(G0[$80+O5])and(is(G7[O5]))and(IsUnitInRange(G7[O5],m5,800.)))then
set UP=GetUnitTypeId(G7[O5])
if(UP==1332963428)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<70.)and(GetUnitState(G7[O5],UNIT_STATE_MANA)>hq[272+O5])and(PW7(G7[O5],$D0200,1093677649,m5))
elseif(UP==1429221446)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<80.)and(IsUnitInRange(G7[O5],m5,450.))and(PY7(G7[O5],$D0200,1093682764,1093747544,m5))
elseif(UP==1164799855)then
call PW7(G7[O5],$D006B,1093682264,m5)
elseif(UP==1433105516)then
set J4=(Bz>hq[O5])and(GetUnitLifePercent(m5)<70.)and(not kr(G7[O5]))and(IssueTargetOrderById(G7[O5],$D00DC,m5))
elseif(UP==1332898670)then
if(IsUnitInRange(G7[O5],m5,400)or BK8(m5))then
set GZ[O5]=true
call J8(O5,PW7(G7[O5],$D0200,1093677136,m5))
endif
elseif(UP==1214931305)then
call PW7(G7[O5],$D00CB,1093678147,m5)
elseif(UP==1211117633)then
call PW7(G7[O5],$D0269,1093684045,m5)
elseif(UP==1211117636)then
set J4=(GetUnitLifePercent(m5)<50.)and(PY7(G7[O5],$D007F,1093685042,1093810233,m5))
elseif(UP==1160786243)then
if((GetUnitLifePercent(m5)<50.)and(IsUnitInRange(G7[O5],m5,650.)))then
set GZ[O5]=true
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h8[O5])-GetUnitY(G7[O5]),GetUnitX(h8[O5])-GetUnitX(G7[O5])))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093678672,true)
call J8(O5,IssuePointOrderById(G7[O5],$D0079,GetUnitX(m5)+200.*Cos(UP*bj_DEGTORAD),GetUnitY(m5)+200.*Sin(UP*bj_DEGTORAD)))
endif
elseif(UP==1311781207)then
set J4=PW7(G7[O5],$D007F,1093684817,m5)
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and((IssueTargetOrderById(it,$D0118,m5))or(IssueTargetOrderById(it,$D000F,m5)))
elseif((i1==1429221441)or(i1==1212363833)or(i1==1164277357)or(i1==1865429047)or(i1==1865429062)or(i1==1752654196)or(i1==1752658994)or(i1==1752658995)or(i1==1747988534)or(GetUnitAbilityLevel(it,1110455088)>0))then
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(G7[O5])>50.)and(not G0[O5])and(G0[$80+O5])and(is(G7[O5]))and(IsUnitInRange(G7[O5],m5,800.)))then
set UP=GetUnitTypeId(G7[O5])
if(UP==1429221441)then
set J4=(PW7(G7[O5],$D0107,1093678389,m5))or(IssueTargetOrderById(G7[O5],$D000F,m5))
elseif(UP==1212363833)then
set J4=(PW7(G7[O5],$D007F,1093809220,m5))or(IssueTargetOrderById(G7[O5],$D000F,m5))
elseif((UP==1160786229)or(UP==1164277357)or(UP==1433105516))then
call IssueTargetOrderById(G7[O5],$D000F,m5)
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
elseif(i1==1848652343)then
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
if((m5!=null)and(GetUnitLifePercent(G7[O5])>50.)and(not G0[O5])and(G0[$80+O5])and(is(G7[O5]))and(IsUnitInRange(G7[O5],m5,800.)))then
set UP=GetUnitTypeId(G7[O5])
if(UP==1211117653)then
set J4=((Bz>TB4[16+O5])and W27(G7[O5],A14,A14,A14,1093686874)and(PW7(G7[O5],$D0219,1093686874,m5)))or(IssueTargetOrderById(G7[O5],$D000F,m5))
endif
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and((GetUnitLevel(G7[O5])>16)or(GetUnitLifePercent(m5)<10.))and(GetUnitLifePercent(m5)<25.)and(IssueTargetOrderById(it,$D000F,m5))
elseif((i1==1848652103)or(i1==1848652099)or(i1==1848652088)or(i1==1848651828))then
if(((GetUnitLifePercent(it)<25.)or(GZ[288+O5]))and((h4[O5]==null)or(not IsUnitInRange(it,G7[O5],1000.))))then
set J4=PV7(it,$D0012,PL7(it))
set GZ[288+O5]=GetUnitLifePercent(it)<50.
elseif((not GZ[272+O5])and(not G0[16+O5])and(G0[$80+O5]))then
set m5=G7[O5]
set J4=(GetUnitLifePercent(it)<90.)and(N37(PL7(it),it)<400.)and(PV7(it,$D0012,PL7(it)))
set UP=R2I(N67(GetUnitX(it),GetUnitY(it),GetUnitX(m5),GetUnitY(m5)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1093681463,UP>800)
if(not J4)then
if(UP>$3E8)then
set J4=((UP>$BB8)and(IssueImmediateOrderById(it,$D0272)))or(IssueTargetOrderById(it,$D0003,m5))
else
set J4=((not G0[$80+O5])or((GetUnitCurrentOrder(m5)==$D0012)and((N37(it,h8[O5])+700.)<N37(m5,h8[O5]))))and(PV7(it,$D0012,h9[O5]))
endif
endif
if((not J4)and(GetHeroLevel(G7[O5])<$C)and(Bz>hq[$F0+O5])and(eY[O5]==1))then
set m5=O27(600.,PU7(it),Condition(function KD))
if(m5==null)then
set m5=O27(600.,PU7(it),Condition(function Kc))
endif
set J4=(m5!=null)and(IssueTargetOrderById(it,$D0003,m5))
if((not J4)and(P77(400.,PU7(it),Condition(function Ka))>0))then
set m5=O27(400.,PU7(it),Condition(function k6))
if(m5==null)then
set UP=R2I(bj_RADTODEG*Atan2(GetUnitY(h9[O5])-GetUnitY(it),GetUnitX(h9[O5])-GetUnitX(it)))
set J4=IssuePointOrderById(it,$D0012,GetUnitX(it)+350.*Cos(UP*bj_DEGTORAD),GetUnitY(it)+350.*Sin(UP*bj_DEGTORAD))
else
set J4=IssueTargetOrderById(it,$D0003,m5)
endif
endif
endif
else
set J4=PV7(it,$D0012,PL7(it))
endif
elseif(GetUnitTypeId(G7[O5])==1211117633)then
set m5=G7[O5]
set J4=(((GetUnitLifePercent(it)<90.)and(N37(PL7(it),it)<400.))or(not OA7(m5)))and(PV7(it,$D0012,PL7(it)))
if((not J4)and(GetUnitLifePercent(it)<30.))then
set J4=((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(PV7(it,$D0012,PL7(it)))
endif
if(i1==1852796263)then
if((not J4)and(GetRandomInt(0,5)>1))then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,true)
set J4=((GetUnitAbilityLevel(m5,1112893025)==0)and(IsUnitInRange(it,m5,800.))and(IssueTargetOrderById(it,$D0101,m5)))or((GetUnitAbilityLevel(it,1112893025)==0)and(IssueTargetOrderById(it,$D0101,it)))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,J4)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094936114,false)
endif
endif
if(not J4)then
if(not IsUnitInRange(it,m5,1000.))then
if((h9[O5]!=PL7(it))and(not IsUnitInRange(it,m5,3000.))and((RAbsBJ(GetUnitX(it)-GetUnitX(m5))>3000.)and(RAbsBJ(GetUnitY(it)-GetUnitY(m5))>3000.)))then
set J4=PV7(it,$D000F,h9[O5])
else
set J4=IssueTargetOrderById(it,$D0003,m5)
endif
else
set J4=((not G0[$80+O5])or((GetUnitCurrentOrder(m5)==$D0012)and((N37(it,h8[O5])+450.)<N37(m5,h8[O5]))))and(PV7(it,$D0012,h9[O5]))
endif
endif
if((GetUnitLifePercent(it)<50.)and(IsUnitInRange(it,m5,600.))and(iU(m5)))then
if(((i1==1852796263)or(i1==1852207203)or(i1==1853060200)or(i1==1852010091))and(N37(it,PL7(it))>4000.))then
call PW7(m5,$D00A3,1093810260,it)
endif
endif
if((not J4)and(h4[O5]!=null))then
set m5=h4[O5]
if(i1==1853060200)then
set J4=(IsUnitInRange(it,m5,700.))and(IssueTargetOrderById(it,$D009D,m5))
elseif((i1==1852207203)or(i1==1852010091))then
set J4=(IsUnitInRange(it,m5,250.))and(IssueTargetOrderById(it,$D009F,m5))
endif
endif
elseif((i1==1848652113)or(i1==1848652114))then
set J4=((OA7(G7[O5]))and(IssueTargetOrderById(it,$D0012,G7[O5])))
elseif((i1==1966092339)or(i1==1966092341)or(i1==1966092345))then
elseif((i1==1966092596)or(i1==1966092597)or(i1==1966092598))then
if(RG7(G7[O5],"AIFamiliar1|Status")==false)then
call QSF(O5,it)
endif
set J4=true
elseif((i1==1966092612)or(i1==1966092613)or(i1==1966092614))then
if(RG7(G7[O5],"AIFamiliar2|Status")==false)then
call QSF(O5,it)
endif
set J4=true
elseif((i1==1697656907)or(i1==1697656905)or(i1==1697656908))then
set h4[16+O5]=it
if(is(it))then
set J4=(((G0[16+O5])or((GetUnitLifePercent(it)<90.)and(N37(PL7(it),it)<400.)))and(PV7(it,$D0012,PL7(it))))or((GetUnitState(it,UNIT_STATE_LIFE)<175.)and((PV7(it,$D022D,PL7(it)))or(PV7(it,$D0012,PL7(it)))))
if((h8[528+O5]!=null)and(not J4))then
set UP=GetUnitUserData(h8[528+O5])
if((UP<$A)or(UP>60))then
set UP=GetUnitUserData(h9[512+O5])
endif
if((UP>=$A)and(UP<=18))then
set m5=h7[$A+P54]
elseif((UP>=30)and(UP<=40))then
set m5=h7[30+P24]
elseif((UP>=50)and(UP<=60))then
set m5=h7[50+P_4]
endif
if((Bz>hq[$F0+O5])and(GetRandomInt(1,2)==1))then
if((m5!=h7[$A+P54])and(P87(900.,h7[$A+P54],Condition(function KC))>4)and(P87(900.,h7[$A+P54],Condition(function UB7))>0))then
set m5=h7[$A+P54]
set hq[$F0+O5]=Bz+30.
elseif((m5!=h7[30+P24])and(P87(900.,h7[30+P24],Condition(function KC))>4)and(P87(900.,h7[30+P24],Condition(function UB7))>0))then
set m5=h7[30+P24]
set hq[$F0+O5]=Bz+30.
elseif((m5!=h7[50+P_4])and(P87(900.,h7[50+P_4],Condition(function KC))>4)and(P87(900.,h7[50+P_4],Condition(function UB7))>0))then
set m5=h7[50+P_4]
set hq[$F0+O5]=Bz+30.
endif
endif
if((UP>=$A)and(UP<=60))then
if(IsUnitAlly(it,Z7[0]))then
set UP=hj[512+GetUnitUserData(m5)]
else
set UP=GetUnitUserData(m5)
endif
set h8[512+O5]=h7[UP+1]
set h8[528+O5]=h7[UP]
set h9[512+O5]=h7[UP-1]
endif
endif
if(GZ[O5])then
set J4=IssueImmediateOrderById(it,$D0229)
set GZ[O5]=false
else
if(h8[512+O5]!=null)then
set J4=((not IsUnitInRange(it,h8[528+O5],3500.))and(PV7(it,$D022D,h8[528+O5])))or(PV7(it,$D000F,h8[512+O5]))
else
set J4=((G7[O5]!=null)and(not IsUnitInRange(it,G7[O5],400.))and(PV7(it,$D000F,G7[O5])))
endif
endif
endif
elseif((i1==1697656909)or(i1==1697656910)or(i1==1697656911))then
if((eY[O5]!=3)and(eY[O5]!=4))then
if(((GetUnitY(it)>4000.)and(GetUnitY(it)<7000.))or((GetUnitX(it)>-7500.)and(GetUnitX(it)<-5000.)))then
set m5=h7[30+P24]
elseif(((GetUnitY(it)>-8000.)and(GetUnitY(it)<-5500.))or((GetUnitX(it)>4500.)and(GetUnitX(it)<7000.)))then
set m5=h7[50+P_4]
else
set m5=h7[$A+P54]
endif
if(IsUnitAlly(it,Z7[0]))then
set UP=hj[512+GetUnitUserData(m5)]
else
set UP=GetUnitUserData(m5)
endif
set J4=PV7(it,$D000F,h7[UP+1])
endif
elseif((i1==1848651861)or(i1==1848651865)or(i1==1848651866))then
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
set J4=(GetUnitLifePercent(it)<90.)and(GetUnitLifePercent(G7[O5])>50.)and(not G0[O5])and(is(G7[O5]))and(IsUnitInRange(G7[O5],it,800.))and(IssueTargetOrderById(G7[O5],$D0118,it))
if((not J4)and(m5!=null)and(GetUnitLifePercent(m5)<50.)and(GetUnitLifePercent(G7[O5])>50.)and(not G0[O5])and(is(G7[O5]))and(IsUnitInRange(G7[O5],m5,800.)))then
set GZ[O5]=true
set J4=J8(O5,PW7(G7[O5],$D0079,1093678672,m5))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
elseif(GetUnitAbilityLevel(it,1110455105)>0)then
set J4=(GetUnitLifePercent(it)<50.)and(PV7(it,$D0012,h9[O5]))
elseif((i1==1852862003)or(i1==1852862006)or(i1==1848652080)or(i1==1848657754))then
call NLF(it,16+O5)
if(GZ[272+O5])then
set J4=PV7(it,$D0012,h9[16+O5])
else
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
set J4=(m5!=null)and((IssueTargetOrderById(it,$D011C,m5))or(IssueImmediateOrderById(it,$D0228))or((GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))))
endif
call N1F(it,16+O5,J4)
set J4=true
elseif((i1==1852862002)or(i1==1852862005)or(i1==1848652082)or(i1==1848657969))then
call NLF(it,512+O5)
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
if(m5!=null)then
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,true)
set J4=(GZ[272+O5])and(IssueTargetOrderById(it,$D00B0,m5))
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,J4)
if(not J4)then
set J4=((UnitCountBuffsExBJ(bj_BUFF_POLARITY_POSITIVE,bj_BUFF_RESIST_EITHER,GetFilterUnit(),false,false)>0)and(IssueTargetOrderById(it,$D0059,m5)))or((GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5)))
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(it),1094935417,false)
endif
call N1F(it,512+O5,J4)
if(GetUnitLifePercent(it)<25.)then
set J4=IssueImmediateOrderById(it,$D00A1)
elseif(GetUnitAbilityLevel(it,1112504171)>0)then
set J4=PV7(it,$D0012,h9[16+O5])
endif
set J4=true
elseif((i1==1852862001)or(i1==1852862004)or(i1==1848652081)or(i1==1848657968))then
call NLF(it,528+O5)
set m5=h4[O5]
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
call N1F(it,528+O5,J4)
set J4=true
elseif((i1==1848652109)or(i1==1848652115))then
set m5=h4[O5]
set h4[16+O5]=it
if(m5==null)then
set m5=O27(800.,PU7(it),Condition(function k6))
endif
set J4=(m5!=null)and(GetUnitAbilityLevel(m5,1110454854)==0)and(IssueTargetOrderById(it,$D000F,m5))
endif
if(not J4)then
if h4[O5]!=null then
call IssueTargetOrderById(it,$D000F,h4[O5])
elseif((eY[O5]>=9))then
call IssueTargetOrderById(it,$D0016,G7[O5])
elseif((eY[O5]!=3)and(eY[O5]!=4))then
call PV7(it,$D000F,h8[O5])
else
if((OA7(G7[O5]))and(IsUnitInRange(it,G7[O5],1200.)))then
set m5=G7[O5]
else
set m5=O27(1200.,PU7(it),Condition(function k8))
endif
set J4=((m5!=null)and(IssuePointOrderById(it,$D000F,GetUnitX(m5),GetUnitY(m5))))or(PV7(it,$D000F,h8[64+O5]))
endif
endif
set it=null
set m5=null
endfunction
function R4F takes nothing returns nothing
local integer O5=1
local real NC7
set LP4="R4F"
loop
exitwhen O5>$B
if(IsPlayerInForce(Player(O5),QW4))then
call GroupClear(Q04)
call GroupEnumUnitsOfPlayer(Q04,Player(O5),Q54)
call ForGroup(Q04,function QJF)
endif
if G7[O5]!=null and GetWidgetLife(G7[O5])>.405 then
set NC7=GetUnitState(G7[O5],UNIT_STATE_LIFE)/GetUnitState(G7[O5],UNIT_STATE_MAX_LIFE)
set hq[704+O5]=(NC7-hq[688+O5])
if(Bz>hq[736+O5])or(hq[720+O5]>hq[704+O5])then
set hq[720+O5]=hq[704+O5]
set hq[736+O5]=Bz+10.
endif
set hq[688+O5]=NC7
endif
set O5=O5+1
endloop
endfunction
function R7F takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)and(not S17(GetSpellAbilityId())))!=null
endfunction
function R8F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
set LP4="R8F"
if((O37(m5))or(not iU(m5)))then
elseif((i1==1430466609)and(GetUnitLifePercent(m5)<40.))then
call PY7(m5,$D009D,1093810258,1093810259,j5)
elseif(i1==1429221446)then
call ZKE(m5,j5)
elseif((i1==1332766568)and(IsUnitInRange(m5,j5,400.)))then
call IssueImmediateOrderById(m5,$D0278)
elseif((i1==1332109682)and(IsUnitInRange(m5,j5,500.)))then
call PC7(m5,$D026C,1093810505)
elseif(i1==1433105516)then
call IssueTargetOrderById(m5,$D0278,j5)
elseif((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))then
set i1=R2I(bj_RADTODEG*Atan2(GetUnitY(j5)-GetUnitY(m5),GetUnitX(j5)-GetUnitX(m5)))
call IssuePointOrderById(m5,$D0278,GetUnitX(m5)+150.*Cos(i1*bj_DEGTORAD),GetUnitY(j5)+150.*Sin(i1*bj_DEGTORAD))
elseif(i1==1316252014)then
call IssueTargetOrderById(m5,$D00DE,j5)
elseif((i1==1214931305)and(IsUnitInRange(m5,j5,500.))and(GetUnitLifePercent(m5)<50.))then
call IssueImmediateOrderById(m5,$D0278)
elseif(i1==1311787088)then
elseif(i1==1211117643)then
call PZ7(m5,$D0218,1093681483,1093748313,GetUnitX(j5),GetUnitY(j5))
elseif(i1==1311781206)then
call ZME(m5,j5)
elseif(i1!=1429221445)then
call O_F(m5,j5)
endif
set j5=null
set m5=null
endfunction
function R9F takes unit u returns boolean
local real RDF=1.
set LP4="AI_WillDodge"
if(TY4)then
if(X_4[GetPlayerId(GetOwningPlayer(u))]==1)then
set RDF=10.-GetRandomReal(0,100)
elseif(X_4[GetPlayerId(GetOwningPlayer(u))]==3)then
set RDF=45.-GetRandomReal(0,100)
elseif(X_4[GetPlayerId(GetOwningPlayer(u))]==5)then
set RDF=65.-GetRandomReal(0,100)
endif
else
if(X_4[GetPlayerId(GetOwningPlayer(u))]==1)then
set RDF=.0
endif
endif
return(RDF>0)
endfunction
function REF takes unit j5,unit RFF,real kl returns nothing
local real IW=bj_RADTODEG*Atan2(GetUnitY(RFF)-GetUnitY(j5),GetUnitX(RFF)-GetUnitX(j5))
set LP4="AI_Dodge_Old"
if(IW>kl)then
set IW=IW+90
else
set IW=IW-90
endif
if not((GetUnitAbilityLevel(RFF,1311780930)>0)and(PC7(RFF,$D0222,1093686082)))then
call IssuePointOrderById(RFF,$D0012,GetUnitX(RFF)+250.*Cos(IW*bj_DEGTORAD),GetUnitY(RFF)+250.*Sin(IW*bj_DEGTORAD))
endif
endfunction
function RGF takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))and(IsUnitEnemy(GetFilterUnit(),QK4))and(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_COMPUTER)and(GetWidgetLife(GetFilterUnit())>.405)and(OV7(GetFilterUnit())))!=null
endfunction
function RHF takes aidifficulty d returns real
if d==AI_DIFFICULTY_NEWBIE then
return .2
elseif d==AI_DIFFICULTY_NORMAL then
return .1
endif
return .05
endfunction
function RIF takes nothing returns nothing
local integer RJF=GetHandleId(GetExpiredTimer())
local unit u
local real x0
local real y0
local real x1
local real y1
local real r
if LoadReal(C7,RJF,7)<TimerGetElapsed(V)then
call FlushChildHashtable(C7,RJF)
call DestroyTimer(GetExpiredTimer())
else
set u=LoadUnitHandle(C7,RJF,1)
set x0=LoadReal(C7,RJF,2)
set y0=LoadReal(C7,RJF,3)
set x1=LoadReal(C7,RJF,4)
set y1=LoadReal(C7,RJF,5)
set r=LoadReal(C7,RJF,6)
set u=null
endif
endfunction
function AI_DodgeLineStarter takes nothing returns nothing
local integer RJF
set bj_lastStartedTimer=CreateTimer()
set RJF=GetHandleId(bj_lastStartedTimer)
call SaveUnitHandle(C7,RJF,1,GetEnumUnit())
call SaveReal(C7,RJF,2,QE4)
call SaveReal(C7,RJF,3,QF4)
call SaveReal(C7,RJF,4,QG4)
call SaveReal(C7,RJF,5,QH4)
call SaveReal(C7,RJF,6,QI4)
call SaveReal(C7,RJF,7,QJ4)
call TimerStart(bj_lastStartedTimer,RHF(GetAIDifficulty(GetOwningPlayer(GetEnumUnit()))),true,function RIF)
endfunction
function RKF takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local real x1=GetUnitX(ZO7)
local real y1=GetUnitY(ZO7)
local real dx=QG4-QE4
local real dy=QH4-QF4
local real r=SquareRoot(dx*dx+dy*dy)
local real r1=((x1-QE4)*dx+(y1-QF4)*dy)/r
if r1>0 and r1<=r then
set dx=x1-QE4-dx*r1/r
set dy=y1-QF4-dy*r1/r
set r=SquareRoot(dx*dx+dy*dy)
if not((GetUnitAbilityLevel(ZO7,1311780930)>0)and(PC7(ZO7,$D0222,1093686082)))then
if r==.0 then
call IssuePointOrderById(ZO7,$D0012,x1-(y1-QF4)*QI4/r1,y1+(x1-QE4)*QI4/r1)
elseif r<QI4 then
call IssuePointOrderById(ZO7,$D0012,x1+dx*(QI4/r-1),y1+dy*(QI4/r-1))
endif
endif
endif
set ZO7=null
endfunction
function RMF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit ZO7=GetEnumUnit()
local real IW
local real kl
set LP4="RMF"
set IW=N67(GetUnitX(j5),GetUnitY(j5),GetUnitX(ZO7),GetUnitY(ZO7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((OV7(ZO7))and(N67(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<300.))then
call REF(j5,ZO7,kl*bj_RADTODEG)
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=j5
endif
endif
set j5=null
set ZO7=null
endfunction
function RNF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit ZO7=GetEnumUnit()
local real IW=N67(GetUnitX(j5),GetUnitY(j5),GetUnitX(ZO7),GetUnitY(ZO7))
local real kl=Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5))
set LP4="RNF"
if((R9F(ZO7))and(OV7(ZO7))and(N67(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<300.))then
call REF(j5,ZO7,kl*bj_RADTODEG)
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=j5
endif
endif
set j5=null
set ZO7=null
endfunction
function ROF takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local unit j5=GetTriggerUnit()
local real IW
local real kl
set LP4="ROF"
set IW=N67(GetUnitX(j5),GetUnitY(j5),GetUnitX(ZO7),GetUnitY(ZO7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((OV7(ZO7))and(((IsUnitInRange(ZO7,j5,750.))and(not ZNE(ZO7,j5,true)))or(not GMF(ZO7)))and(N67(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<700.))then
call REF(j5,ZO7,kl*bj_RADTODEG)
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=j5
endif
endif
set j5=null
set ZO7=null
endfunction
function RPF takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local unit j5=GetTriggerUnit()
local real IW
local real kl
set LP4="RPF"
set IW=N67(GetUnitX(j5),GetUnitY(j5),GetUnitX(ZO7),GetUnitY(ZO7))
set kl=RAbsBJ(Atan2(GetLocationY(Hb)-GetUnitY(j5),GetLocationX(Hb)-GetUnitX(j5)))
if((R9F(ZO7))and(OV7(ZO7))and(N67(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(j5)+IW*Cos(kl),GetUnitY(j5)+IW*Sin(kl))<700.))then
call REF(j5,ZO7,kl*bj_RADTODEG)
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=j5
endif
endif
set j5=null
set ZO7=null
endfunction
function RQF takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local unit IB=null
local real kl
set LP4="RQF"
if(OV7(GetEnumUnit()))then
set IB=h4[272+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
if((IB!=null)and(IsUnitVisible(IB,GetOwningPlayer(GetEnumUnit()))))then
set kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(GetEnumUnit())-GetUnitY(IB),GetUnitX(GetEnumUnit())-GetUnitX(IB)))-GetUnitFacing(IB))
if(kl<50.)then
call REF(IB,GetEnumUnit(),GetUnitFacing(IB))
set G0[64+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=true
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=GetTriggerUnit()
endif
endif
endif
set IB=null
endif
set ZO7=null
endfunction
function RRF takes nothing returns nothing
local unit ZO7=GetEnumUnit()
local unit IB=null
local real kl
set LP4="RRF"
if((R9F(ZO7))and(OV7(ZO7)))then
set IB=h4[272+GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]
if((IB!=null)and(IsUnitVisible(IB,GetOwningPlayer(ZO7))))then
set kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(ZO7)-GetUnitY(IB),GetUnitX(ZO7)-GetUnitX(IB)))-GetUnitFacing(IB))
if(kl<50.)then
call REF(IB,ZO7,GetUnitFacing(IB))
set G0[64+GetPlayerId(GetOwningPlayer(ZO7))]=true
if h4[352+GetPlayerId(GetOwningPlayer(ZO7))]==null then
set h4[352+GetPlayerId(GetOwningPlayer(ZO7))]=GetTriggerUnit()
endif
endif
endif
set IB=null
endif
endfunction
function RSF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
local real kl=RAbsBJ((bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5)))-GetUnitFacing(j5))
local real IW=N67(GetUnitX(m5),GetUnitY(m5),GetUnitX(j5),GetUnitY(j5))
local boolean Q9F
local boolean J4
set LP4="RSF"
if(IW>900)then
set Q9F=kl<140.
elseif(IW>600)then
set Q9F=(GetWidgetLife(m5)<1500.)and(kl<110.)
elseif(IW>300)then
set Q9F=(GetWidgetLife(m5)<1000.)and(kl<80.)
else
set Q9F=(GetWidgetLife(m5)<1000.)and(kl<50.)
endif
if(not iU(m5))then
elseif(not Q9F)then
set J4=(IW<700.)and((h4[O5]==null)or(h4[O5]==j5))and((ZNE(m5,j5,true))or(IssueTargetOrderById(m5,$D000F,j5)))
else
if(IW<600.)then
if(bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5))>GetUnitFacing(j5))then
call IssuePointOrderById(m5,$D0012,GetUnitX(j5)+300.*Cos((GetUnitFacing(j5)+90.)*bj_DEGTORAD),GetUnitY(j5)+300.*Sin((GetUnitFacing(j5)+90.)*bj_DEGTORAD))
else
call IssuePointOrderById(m5,$D0012,GetUnitX(j5)+300.*Cos((GetUnitFacing(j5)-90.)*bj_DEGTORAD),GetUnitY(j5)+300.*Sin((GetUnitFacing(j5)-90.)*bj_DEGTORAD))
endif
elseif((GetWidgetLife(m5)<1200.)or((IW>800.)and(h4[O5]==null)))then
set G0[64+O5]=true
call PV7(m5,$D0012,h9[O5])
if((GetUnitAbilityLevel(m5,1093681461)>0)and(QA7(GetHandleId(GetOwningPlayer(m5)),"MyBear")!=null))then
call PV7(QA7(GetHandleId(GetOwningPlayer(m5)),"MyBear"),$D0012,h9[O5])
endif
endif
endif
set j5=null
set m5=null
endfunction
function RTF takes nothing returns boolean
return((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit())))and((GetUnitAbilityLevel(GetFilterUnit(),1097102451)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1097102385)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093684533)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1098150517)>0)or(GetUnitAbilityLevel(GetFilterUnit(),1093683785)>0)))
endfunction
function RUF takes nothing returns boolean
return((GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(GetTriggerUnit()))and(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())))
endfunction
function RVF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
local item jp=PH7(m5,SU[VC])
set LP4="RVF"
if((jp!=null)and((GetUnitLifePercent(j5)<50.)or((h4[GetPlayerId(GetOwningPlayer(m5))]==j5)and(GetUnitLifePercent(j5)<70.))))then
if(IsUnitInRange(j5,m5,1000.))then
call UnitUseItemPoint(m5,jp,GetUnitX(j5),GetUnitY(j5))
endif
endif
set m5=null
set j5=null
set jp=null
endfunction
function RWF takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=null
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set LP4="RWF"
if(h4[O5]==GetTriggerUnit())then
set j5=O27(500.,PU7(GetTriggerUnit()),Condition(function RUF))
if(j5!=null)then
set h4[O5]=j5
if(not OV7(m5))then
elseif(not iU(m5))then
call IssueTargetOrderById(m5,$D000F,j5)
else
call J3(m5,false)
endif
endif
endif
set m5=null
set j5=null
endfunction
function RXF takes nothing returns boolean
local integer i1=GetUnitTypeId(GetFilterUnit())
set LP4="RXF"
return(((i1==1848651848)or(i1==1848651847)or(i1==1848651851))and(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())))
endfunction
function RYF takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
local unit RZF=P47(800.,PU7(GetTriggerUnit()),Condition(function RXF))
set LP4="RYF"
if((not OV7(m5))or(RZF==null))then
elseif((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))then
call PC7(m5,$D0265,1093747028)
elseif(i1==1164799855)then
call PW7(m5,$D006B,1093682264,RZF)
elseif(PD7(m5,SU[H1]))then
call UnitUseItemTarget(m5,PH7(m5,SU[H1]),RZF)
elseif(PD7(m5,SU[LL]))then
call UnitUseItemTarget(m5,PH7(m5,SU[LL]),RZF)
endif
set m5=null
set RZF=null
endfunction
function RAF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set LP4="RAF"
if((OV7(m5))and((not IsUnitInRange(j5,m5,500.))or(not ZNE(m5,j5,false))))then
if((O37(j5))and(not O37(m5))and(IsUnitInRange(j5,m5,500.)))then
call IssueTargetOrderById(m5,$D000F,j5)
else
if(P87(900.,j5,Condition(function k2))<(1+GetUnitAbilityLevel(j5,GetSpellAbilityId())))then
call PV7(m5,$D0012,h9[O5])
endif
endif
endif
set j5=null
set m5=null
endfunction
function RBF takes nothing returns nothing
if((GetUnitAbilityLevel(GetEnumUnit(),1110459185)==0)or(not GMF(GetEnumUnit())))then
call ExecuteFunc("QFF")
if((GetUnitTypeId(GetEnumUnit())==1315070563)and(GetUnitAbilityLevel(GetEnumUnit(),1110459185)>0)and(not RG7(GetEnumUnit(),"Omnislashing")))then
call PC7(GetEnumUnit(),$D00A0,1093678407)
endif
endif
endfunction
function RCF takes nothing returns nothing
call ExecuteFunc("R3F")
endfunction
function R3F takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i1=GetUnitTypeId(m5)
local integer MTF=GetSpellAbilityId()
set LP4="R3F"
if(not OV7(m5))then
elseif((PD7(m5,SU[B0]))and(MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and(UnitUseItem(m5,PH7(m5,SU[B0]))))then
elseif((PD7(m5,SU[X0]))and(MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and(UnitUseItem(m5,PH7(m5,SU[X0]))))then
elseif(GMF(m5))then
elseif((MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and((i1==1315007329)or(i1==1160785972)or(i1==1432510828)))then
call IssueImmediateOrderById(m5,$D00A1)
elseif((MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and(i1==1429221424))then
call PC7(m5,$D00A1,1093679445)
elseif((MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and(i1==1212363833))then
call PC7(m5,$D009B,1093678643)
elseif(((MTF!=1093684529)or(MTF!=1093747032))and(i1==1429221443))then
call PC7(m5,$D0131,1093686322)
elseif((MTF!=1093678674)and(MTF!=1093677906)and(MTF!=1093681494)and(i1==1429221441))then
call PC7(m5,$D009B,1093677903)
elseif(i1==1315988077)then
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),PC7(m5,$D026A,1093684561))
elseif((MTF==1093684529)and(i1==1332963428))then
call PW7(m5,$D0103,1093678169,m5)
elseif(i1==1214345830)then
if(MTF!=1093684529)then
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),PW7(m5,$D00DA,1093679190,m5))
else
call IssueImmediateOrderById(m5,$D0277)
endif
elseif(i1==1311781206)then
if((MTF!=1093677906)and(MTF!=1093681494)and(MTF!=1093678674))then
call IssueImmediateOrderById(m5,$D020D)
endif
endif
set m5=null
endfunction
function R6F takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer MTF
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set LP4="R6F"
set G0[64+O5]=true
if(OV7(m5))then
if((i2(j5))and(ZNE(m5,j5,false)))then
elseif(N37(m5,h9[O5])<N37(j5,h9[O5]))then
call PV7(m5,$D0012,h9[O5])
else
call PV7(m5,$D0012,h8[O5])
endif
set MTF=GetSpellAbilityId()
if((MTF==1093678388)or(MTF==1093677141)or(MTF==1093677906)or(MTF==1093681494)or((MTF==1093678674)and(GZ[GetPlayerId(GetOwningPlayer(j5))])))then
call RCF()
endif
endif
set j5=null
set m5=null
endfunction
function RLF takes nothing returns nothing
local unit m5=GetEnumUnit()
set LP4="RLF"
if((not iU(m5))and(GetUnitLifePercent(m5)<95.)and(h4[GetPlayerId(GetOwningPlayer(m5))]==null)and(not IsUnitInRange(GetTriggerUnit(),m5,300.)))then
call IssuePointOrderById(m5,$D0012,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
set m5=null
endfunction
function R1F takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer MTF=GetSpellAbilityId()
local integer O5=GetPlayerId(GetOwningPlayer(m5))
set LP4="R1F"
set G0[64+O5]=true
if((MTF==1093683761)or(MTF==1093747288))then
if(OV7(m5))then
if(N37(m5,h9[O5])<N67(GetLocationX(Hb),GetLocationY(Hb),GetUnitX(h9[O5]),GetUnitY(h9[O5])))then
call PV7(m5,$D0012,h9[O5])
else
call PV7(m5,$D0012,h8[O5])
endif
endif
else
if((OV7(m5))and((GetUnitLevel(m5)<6)or(GetUnitLifePercent(m5)<75.)or(not Id(O5))))then
if(((MTF==1093683532)or(MTF==1093681745))and(GetUnitLevel(m5)>5)and(GetUnitState(m5,UNIT_STATE_LIFE)>1300.))then
elseif((MTF==1093685825)and(N37(m5,h9[O5])<N67(GetLocationX(Hb),GetLocationY(Hb),GetUnitX(h9[O5]),GetUnitY(h9[O5]))))then
call PV7(m5,$D0012,h9[O5])
else
call PV7(m5,$D0012,h9[O5])
endif
endif
endif
set m5=null
endfunction
function R0F takes nothing returns nothing
local unit m5=GetEnumUnit()
set LP4="R0F"
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
if((is(m5))and((GetUnitLevel(m5)<5)or(GetUnitLifePercent(m5)<75.)or(h4[GetPlayerId(GetOwningPlayer(m5))]==null)))then
if((GetSpellAbilityId()!=1093677877)or(P87(500.,GetTriggerUnit(),Condition(function k0))<3))then
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
set m5=null
endfunction
function R5F takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
set LP4="R5F"
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(OV7(m5))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if(not ZNE(m5,j5,true))then
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
set m5=null
set j5=null
endfunction
function R2F takes nothing returns nothing
local unit m5=GetEnumUnit()
local unit j5=GetTriggerUnit()
set LP4="R2F"
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(OT7(m5))and(IsUnitType(m5,UNIT_TYPE_HERO)))then
if((GetUnitLifePercent(m5)>45. or GetUnitState(m5,UNIT_STATE_LIFE)>500.)and((P87(800.,j5,Condition(function V87))>=2)or(P87(650.,j5,Condition(function V77))>=2)or((P87(800.,j5,Condition(function V87))>=1)and(P87(650.,j5,Condition(function V77))>=1))))then
set j5=P47(800.,PU7(m5),Condition(function UC7))
if(j5!=null)then
set h4[GetPlayerId(GetOwningPlayer(m5))]=j5
call IUF(m5,j5)
call IssueTargetOrderById(m5,$D000F,j5)
endif
else
if(GMF(m5))then
elseif(N37(m5,h9[GetPlayerId(GetOwningPlayer(m5))])<N37(j5,h9[GetPlayerId(GetOwningPlayer(m5))]))then
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
else
call PV7(m5,$D0012,h8[GetPlayerId(GetOwningPlayer(m5))])
endif
endif
endif
set m5=null
set j5=null
endfunction
function R_F takes real S4F,real S7F returns boolean
return S4F!=null and S7F!=null
endfunction
function S8F takes location S9F,real c,real SDF,boolean SEF returns location
local real SFF=GetLocationX(S9F)
local real SGF=GetLocationY(S9F)
local real S4F=AY7(SFF+(Cos(SDF*bj_DEGTORAD)*c))
local real S7F=AZ7(SGF+(Sin(SDF*bj_DEGTORAD)*c))
set LP4="knutz_NewPos"
if((SEF)and(R_F(S4F,S7F)!=true))then
return null
endif
return Location(S4F,S7F)
endfunction
function SHF takes nothing returns nothing
local unit PR7=GetTriggerUnit()
local unit JX7=GetEnumUnit()
local location SIF=GetUnitLoc(PR7)
local location SJF=GetUnitLoc(JX7)
local real SDF=AngleBetweenPoints(SIF,SJF)
local real SKF=DistanceBetweenPoints(SIF,SJF)
local real c=SKF+100.
local location SMF=S8F(SIF,c,SDF,true)
set LP4="SHF"
if((GetPlayerController(GetOwningPlayer(JX7))==MAP_CONTROL_COMPUTER)and(OV7(JX7))and(IsUnitType(JX7,UNIT_TYPE_HERO)))then
if(SMF!=null)then
call IssuePointOrderByIdLoc(JX7,$D0012,SMF)
endif
endif
set PR7=null
set JX7=null
call RemoveLocation(SIF)
set SIF=null
call RemoveLocation(SJF)
set SJF=null
call RemoveLocation(SMF)
set SMF=null
endfunction
function SNF takes nothing returns nothing
local unit m5=GetEnumUnit()
local integer i=0
if(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and((PD7(m5,SU[ZA])or PD7(m5,SU[QC])))then
set IH4=N37(LD4,m5)
if(IM4==null)or(IH4<L84)then
set IM4=m5
set L84=IH4
endif
endif
set m5=null
endfunction
function SOF takes nothing returns nothing
call ExecuteFunc("QFF")
endfunction
function SPF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer SQF=GetSpellAbilityId()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local real JD
local real Je
local integer UP
local real GSF
local integer i=1
local real x0
local real y0
local real x1
local real y1
local real r
set LP4="SPF"
if(SQF==1093684296)then
if((GetPlayerController(GetOwningPlayer(m5))!=MAP_CONTROL_USER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
set GSF=Bz
set UP=3+(2*GetUnitAbilityLevel(j5,SQF))
loop
set JD=GetUnitX(m5)
set Je=GetUnitY(m5)
call NX7(.2)
if((GetWidgetLife(m5)<1500.)and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(OV7(m5))and((GetUnitX(m5)!=JD)or(GetUnitY(m5)!=Je)))then
call IssueImmediateOrderById(m5,$D0019)
endif
exitwhen((RAbsBJ(Bz-GSF)>=UP)or(not OA7(m5)))
endloop
endif
elseif(SQF==1093744975)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call NX7(.5)
loop
set i=i+1
if((IsUnitInRange(j5,m5,500.))and(is(m5))and(ZNE(m5,j5,true)))then
elseif((IsUnitInRange(j5,m5,800.))and(is(m5)))then
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
exitwhen((i==6)or(not OA7(j5))or(not OA7(m5)))
call NX7(.5)
endloop
endif
elseif(SQF==1093744986)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if(OV7(m5))then
if(not ZNE(m5,j5,true))then
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
endif
set i=i+1
exitwhen((i>$F)or(not OA7(m5))or(not OA7(j5)))
call NX7(.5)
endloop
endif
elseif(SQF==1093743692)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(is(m5)))then
call NX7(1.5)
set UP=GetUnitTypeId(m5)
if(UP==1429221446)then
call PC7(m5,$D00D1,1093678667)
elseif(UP==1430466865)then
call PW7(m5,$D0062,1093677879,m5)
elseif(UP==1214344551)then
call PW7(m5,$D007F,1093809742,m5)
elseif(UP==1211117643)then
call PW7(m5,$D0136,1093678410,m5)
else
call O_F(m5,j5)
endif
endif
elseif(SQF==1093750840)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
call NX7(.5)
loop
if((IsUnitInRange(j5,m5,600.))and(is(m5))and(ZNE(m5,j5,true)))then
elseif((P77(700.,PU7(m5),Condition(function TK7))==0)and(P77(700.,PU7(m5),Condition(function KQ))==0)and(IsUnitInRange(j5,m5,1500.))and(is(m5)))then
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
endif
exitwhen((GetUnitAbilityLevel(m5,1110454617)==0)or(not OA7(j5))or(not OA7(m5)))
call NX7(.5)
endloop
endif
elseif((SQF==1093808453)or(SQF==1093681729)or(SQF==1093678147))then
set LE4=false
if(SQF==1093808453)then
call NX7(1)
set bj_lastLoadedUnit=j5
set m5=P47($96,HC[O5],Condition(function TD7))
if m5!=null then
set L84=99999
set IG4=GetPlayerId(GetOwningPlayer(m5))
set LD4=null
if((h4[IG4]!=null)or((G0[256+IG4])and(not O37(m5))and(GetHeroLevel(m5)>4)))then
if(h4[IG4]!=null)then
set IM4=h4[IG4]
else
set IM4=h8[IG4]
endif
else
set IM4=h9[IG4]
endif
set UP=1
loop
exitwhen UP>8
set bj_lastCreatedDestructable=QZ7(GetHandleId(j5),"AI|SproutTree"+I2S(UP))
set IH4=N37(bj_lastCreatedDestructable,IM4)
if IH4<L84 then
set LD4=bj_lastCreatedDestructable
set L84=IH4
endif
call QM7(GetHandleId(j5),"AI|SproutTree"+I2S(UP),null)
set UP=UP+1
endloop
set L84=99999
set IM4=null
call IV(GetLocationX(HC[O5]),GetLocationY(HC[O5]),350,Condition(function TD7),function SNF)
set m5=IM4
if(m5!=null)and(PD7(m5,SU[ZA])or PD7(m5,SU[QC]))then
call UnitUseItemTarget(m5,bj_lastCreatedItem,LD4)
endif
endif
endif
if((SQF!=1093808453)or(L84>600))and((m5!=null)and(GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(OV7(m5)))then
if(SQF!=1093808453)then
call NX7(1)
endif
set UP=GetUnitTypeId(m5)
if((UP==1211117653)and(Bz>TB4[80+GetPlayerId(GetOwningPlayer(m5))])and W27(m5,A14,A14,A04,1093687372)and(W67(m5,A04,A04,A04,false)))then
call IssueImmediateOrderById(m5,$D00A1)
elseif((UP==1429221441)or(UP==1165451634)or(UP==1212365106))then
call IssueTargetOrderById(m5,$D0278,j5)
elseif((SQF==1093678147)and(UP==1315070563))then
if(not RG7(m5,"Omnislashing"))then
call PC7(m5,$D00A0,1093678407)
endif
elseif((SQF==1093808453)and(UP==1164666213))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093678679,true)
call IssuePointOrderById(m5,$D0100,GetUnitX(m5)+10.,GetUnitY(m5)+10.)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((SQF==1093808453)and(UP==1211117636))then
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093685041,true)
if((GetUnitLifePercent(m5)>50.)or(GetUnitLifePercent(j5)<50.))then
set GSF=bj_RADTODEG*Atan2(GetUnitY(j5)-GetUnitY(m5),GetUnitX(j5)-GetUnitX(m5))
else
set GSF=bj_RADTODEG*Atan2(GetUnitY(m5)-GetUnitY(j5),GetUnitX(m5)-GetUnitX(j5))
endif
set GZ[GetPlayerId(GetOwningPlayer(m5))]=true
call J8(GetPlayerId(GetOwningPlayer(m5)),IssuePointOrderById(m5,$D00FA,GetUnitX(m5)+900.*Cos(GSF*bj_DEGTORAD),GetUnitY(m5)+900.*Sin(GSF*bj_DEGTORAD)))
elseif((SQF==1093808453)and(UP==1211117620))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call MoveLocation(HA,GetWidgetX(m5)+$A,GetWidgetY(m5)+$A)
call PX7(m5,$D0108,1093677623,HA)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((SQF==1093808453)and(UP==1212365106))then
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=true
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093685831,true)
call IssuePointOrderById(m5,$D0079,GetUnitX(m5)+10.,GetUnitY(m5)+10.)
set GZ[64+GetPlayerId(GetOwningPlayer(m5))]=false
elseif((GetUnitLifePercent(j5)<50.)and(kJ(GetUnitX(j5),GetUnitY(j5)))and(GetUnitLifePercent(m5)>50.))then
if(UP==1162032181)then
call IssueTargetOrderById(m5,$D00FA,j5)
elseif((UP==1430466609)or(UP==1164207469))then
call IssueTargetOrderById(m5,$D022D,j5)
elseif(UP==1429221451)then
call IssueTargetOrderById(m5,$D00FA,j5)
elseif(UP==1328558160)then
call PW7(m5,$D00FA,1093682766,j5)
elseif(PD7(m5,SU[QW]))then
call UnitUseItemPoint(m5,PH7(m5,SU[QW]),GetUnitX(j5),GetUnitY(j5))
else
call GMF(m5)
endif
else
call GMF(m5)
endif
endif
elseif((SQF==1093684565)or(SQF==1093681458)or(SQF==1093679152)or(SQF==1093752154))then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO))and(not IsUnitIllusion(m5))and(GetWidgetLife(m5)<1200.))then
call SJ7(m5,false)
endif
elseif(SQF==1093750345)then
elseif(SQF==1093677646)then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if((iU(m5))and(not O37(m5)))then
call IssueTargetOrderById(m5,$D000F,j5)
endif
exitwhen((GetUnitCurrentOrder(j5)!=$D0207)or(not OA7(m5))or(not OA7(j5)))
call NX7(.5)
endloop
endif
elseif((SQF==1093753177)or(SQF==1093808181))then
if((IsUnitVisible(j5,Y7[0]))and(IsUnitVisible(j5,Z7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call NX7(.2)
call MoveLocation(Hb,JD,Je)
call TriggerSleepAction(.5)
loop
call IV(GetUnitX(j5),GetUnitY(j5),1800.,Condition(function VN7),function ROF)
call NX7(.8)
exitwhen((GetUnitAbilityLevel(m5,1110459478)==0)or(not OA7(m5))or(not OA7(j5)))
endloop
endif
elseif(SQF==1093751371)then
call NX7(.2)
set GSF=Bz
loop
call IV(GetUnitX(j5),GetUnitY(j5),1100.,Condition(function VN7),function R2F)
call NX7(1.)
exitwhen((RAbsBJ(Bz-GSF)>=7.7)or(not OA7(j5)))
endloop
elseif((SQF==1093681987)or(SQF==1093677658)or(SQF==1093678156))then
if((GetPlayerController(GetOwningPlayer(m5))==MAP_CONTROL_COMPUTER)and(IsUnitType(m5,UNIT_TYPE_HERO)))then
loop
if(OV7(m5))then
if(not ZNE(m5,j5,true))then
call PV7(m5,$D0012,h9[GetPlayerId(GetOwningPlayer(m5))])
set G0[64+GetPlayerId(GetOwningPlayer(m5))]=true
endif
endif
exitwhen((GetUnitCurrentOrder(j5)!=$D0207)or(not OA7(m5))or(not OA7(j5)))
call NX7(.5)
endloop
endif
elseif((SQF==1093677367)or(SQF==1093678913)or(SQF==1093677621)or(SQF==1093679445)or(SQF==1093677402))then
call TriggerSleepAction(.5)
if((not IsUnitVisible(j5,Y7[0]))or(not IsUnitVisible(j5,Z7[0])))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function KO),function RVF)
endif
elseif((SQF==1093681720)or(SQF==1093678643)or(SQF==1093677903))then
call TriggerSleepAction(1.)
if((P87(800.,j5,Condition(function RTF))==0)and(not lA(j5,not IsUnitAlly(j5,Y7[0]))))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function VN7),function RWF)
endif
elseif(SQF==1093682231)then
call TriggerSleepAction(.5)
if((not IsUnitVisible(j5,Y7[0]))or(not IsUnitVisible(j5,Z7[0])))then
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function VN7),function RWF)
endif
elseif((SQF==1093687351)or(SQF==1093687349)or(SQF==1093678671)or(SQF==1093686091))then
if((IsUnitVisible(j5,Y7[0]))and(IsUnitVisible(j5,Z7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QI4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
if(SQF==1093686091)then
set r=1200.
else
set r=700.
endif
set x1=x0+(JD-x0)*r/QI4
set y1=y0+(Je-y0)*r/QI4
call NX7(.2)
set QK4=GetOwningPlayer(j5)
set QI4=250.
set QE4=x0
set QF4=y0
set QG4=x1
set QH4=y1
call IV(x0,y0,r,Condition(function RGF),function RKF)
endif
elseif(SQF==1093686862)then
if(WP7(GetOwningPlayer(j5))or GetRandomInt(1,4)==4)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call IV(JD,Je,1100.,Condition(function VN7),function SHF)
endif
elseif((SQF==1093750841)or(SQF==1093684291))then
if(P77(1200.,GetUnitLoc(j5),Condition(function TH7))>1)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call IV(JD,Je,1100.,Condition(function VN7),function R5F)
endif
elseif(SQF==1093678665)then
set r=400+($C8*GetUnitAbilityLevel(j5,1093678665))
set GSF=TimerGetElapsed(V)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QI4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QI4
set y1=y0+(Je-y0)*r/QI4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1966092360
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>1.)
endloop
call NX7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>1.)
set QK4=GetOwningPlayer(j5)
set QI4=250.
set QE4=GetUnitX(m5)
set QF4=GetUnitY(m5)
set QG4=x1
set QH4=y1
call IV(QE4,QF4,r,Condition(function RGF),function RKF)
call NX7(.4)
endloop
elseif(SQF==1093685041)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call NX7(.1)
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1697657172
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.3)
exitwhen(m5==null)
endloop
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1697657172
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=FirstOfGroup(iF)
exitwhen(m5==null)
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,1000.,Condition(function VN7),function RPF)
call NX7(.5)
endloop
elseif(SQF==1093679157)then
call NX7(.1)
set GSF=I2R($47E+($FA*GetUnitAbilityLevel(j5,1093679157)))
loop
call GroupClear(iF)
set bj_groupEnumTypeId=1966092362
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=FirstOfGroup(iF)
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.3)
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not OA7(j5)))
endloop
loop
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not OA7(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),GSF,Condition(function VN7),function RSF)
call NX7(.5)
endloop
elseif(SQF==1093684280)then
set GSF=TimerGetElapsed(V)+3.5
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=JD-GetUnitX(j5)
set y0=Je-GetUnitY(j5)
set r=SquareRoot(x0*x0+y0*y0)
set x0=x0*1000./r
set y0=y0*1000./r
loop
set bj_groupEnumTypeId=1747988533
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
loop
set m5=FirstOfGroup(iF)
exitwhen m5==null or(GetWidgetLife(m5)>.405)
call GroupRemoveUnit(iF,m5)
endloop
set h4[272+O5]=m5
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.1)
exitwhen TimerGetElapsed(V)>GSF
endloop
call NX7(.1)
loop
exitwhen(TimerGetElapsed(V)>GSF)or(GetWidgetLife(m5)<.405)
set QK4=GetOwningPlayer(j5)
set QE4=GetUnitX(m5)
set QF4=GetUnitY(m5)
set QG4=QE4+x0
set QH4=QF4+y0
set QI4=300.
call IV(QE4,QF4,1000.,Condition(function RGF),function RKF)
call NX7(.1)
endloop
elseif(SQF==1093751604)then
set GSF=TimerGetElapsed(V)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set r=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x0=(JD-GetUnitX(j5))*1000./r
set y0=(Je-GetUnitY(j5))*1000./r
loop
set bj_groupEnumTypeId=1747993394
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=FirstOfGroup(iF)
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.3)
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>3.5)
endloop
set h4[272+O5]=m5
call NX7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>3.5)or(not OA7(m5))
set QK4=GetOwningPlayer(j5)
set QE4=GetUnitX(m5)
set QF4=GetUnitY(m5)
set QG4=QE4+x0
set QH4=QF4+y0
set QI4=200.
call IV(QE4,QF4,1000.,Condition(function RGF),function RKF)
call NX7(.2)
endloop
elseif(SQF==1093677136)then
loop
call NX7(.8)
exitwhen((GetUnitAbilityLevel(m5,1110454328)==0)or(GetUnitCurrentOrder(j5)!=$D0200))
call IUF(j5,m5)
endloop
elseif((SQF==1093684815)or(SQF==1093686072)or(SQF==1093685573))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
if(SQF==1093684815)then
set UP=$B4
elseif(SQF==1093685573)then
set UP=$C8+100*GetUnitAbilityLevel(j5,1093685573)
else
set UP=400
endif
call IV(JD,Je,UP,Condition(function VN7),function SOF)
elseif((SQF==1093684564)or(SQF==1093677623)or(SQF==1093678644)or(SQF==1093681754)or(SQF==1093678679))then
if((IsUnitVisible(j5,Y7[0]))and(IsUnitVisible(j5,Z7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
if(SQF==1093678679)then
set UP=$82+(25*GetUnitAbilityLevel(j5,1093678679))
elseif(SQF==1093677623)then
set UP=$FA
else
set UP=500
if(SQF==1093678644)then
call NX7(.5)
endif
endif
set GSF=Bz
loop
exitwhen(RAbsBJ(Bz-GSF)>=1.5)
call IV(JD,Je,UP,Condition(function VN7),function R1F)
call NX7(.4)
endloop
call NX7(.4)
call IV(JD,Je,UP,Condition(function VN7),function SOF)
endif
elseif((SQF==1093678420)or(SQF==1093679176)or(SQF==1093684529)or(SQF==1093747032))then
call NX7(.5)
call IV(GetUnitX(m5),GetUnitY(m5),600.,Condition(function VN7),function RCF)
elseif((SQF==1093677382)or(SQF==1093677651)or(SQF==1093685047)or(SQF==1093677645)or(SQF==1093678670)or(SQF==1093678898)or(SQF==1093678900)or(SQF==1093678904)or(SQF==1093682766)or(SQF==1093677894)or(SQF==1093810258)or(SQF==1093810259))then
call IV(GetUnitX(j5)+350.*Cos(GetUnitFacing(j5)*bj_DEGTORAD),GetUnitY(j5)+350.*Sin(GetUnitFacing(j5)*bj_DEGTORAD),450.,Condition(function VN7),function SOF)
elseif((SQF==1093678405)or(SQF==1093810505)or(SQF==1093677363)or(SQF==1093681462))then
call NX7(.5)
call IV(GetUnitX(j5),GetUnitY(j5),900.,Condition(function VN7),function SOF)
elseif((SQF==1093678669)or(SQF==1093679182)or(SQF==1093677913)or(SQF==1093677139)or(SQF==1093810507)or(SQF==1093682252)or(SQF==1093686083))then
call IV(GetUnitX(j5),GetUnitY(j5),350.,Condition(function VN7),function SOF)
elseif((SQF==1093678422)or(SQF==1093682248)or(SQF==1093810508)or(SQF==1093684054))then
call IV(GetUnitX(j5),GetUnitY(j5),550.,Condition(function VN7),function SOF)
elseif((SQF==1093677145)or(SQF==1093682994)or(SQF==1093677360)or(SQF==1093677616))then
call IV(GetUnitX(m5),GetUnitY(m5),450.,Condition(function VN7),function SOF)
elseif(SQF==1093678938)then
call NX7(1.)
call IV(GetUnitX(j5),GetUnitY(j5),950.,Condition(function VN7),function RBF)
elseif((SQF==1093683266)or(SQF==1093682227)or(SQF==1093682246))then
call NX7(1.)
call IV(GetUnitX(j5),GetUnitY(j5),1000.,Condition(function VN7),function RYF)
elseif((SQF==1093682521)or(SQF==1093682760)or(SQF==1093682736))then
if(SQF==1093682521)then
set GSF=200.
elseif(SQF==1093682760)then
set GSF=450.
elseif(SQF==1093682736)then
set GSF=700.
endif
call IV(GetUnitX(j5)+GSF*Cos(GetUnitFacing(j5)*bj_DEGTORAD),GetUnitY(j5)+GSF*Sin(GetUnitFacing(j5)*bj_DEGTORAD),350.,Condition(function VN7),function SOF)
elseif((SQF==1093678388)or(SQF==1093677141)or(SQF==1093810506))then
call IV(GetUnitX(j5),GetUnitY(j5),850.,Condition(function VN7),function R6F)
elseif((SQF==1093683248)or(SQF==1093685846))then
call TriggerSleepAction(.1)
loop
call IV(GetUnitX(j5),GetUnitY(j5),700.,Condition(function VN7),function R8F)
exitwhen(((IsUnitVisible(j5,Y7[0]))and(IsUnitVisible(j5,Z7[0])))or(not OA7(j5)))
call NX7(1.5)
endloop
elseif(SQF==1093677378)then
set GSF=Bz
loop
exitwhen(RAbsBJ(Bz-GSF)>=9.)
call IV(GetUnitX(j5),GetUnitY(j5),700.,Condition(function Kq),function RLF)
call NX7(.8)
endloop
elseif(SQF==1093681713)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=7.5)
call IV(JD,Je,550.,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093677385)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=6.5)
call IV(JD,Je,300.,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093685825)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=9.)
call IV(JD,Je,450.,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093683532)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=10.5)
call IV(JD,Je,630.,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093681745)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=7.5)
call IV(JD,Je,1000.,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093685831)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set UP=360+(80*GetUnitAbilityLevel(j5,1093685831))
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=6.5)
call IV(JD,Je,UP,Condition(function VN7),function R1F)
call NX7(.6)
endloop
elseif(SQF==1093678407)then
set GSF=Bz
loop
exitwhen(RAbsBJ(Bz-GSF)>=4.5)
call IV(GetUnitX(j5),GetUnitY(j5),420.,Condition(function VN7),function R0F)
call NX7(.6)
endloop
elseif(SQF==1093677877)then
set GSF=Bz
call NX7(.5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=7.5)
call IV(GetUnitX(j5),GetUnitY(j5),680.,Condition(function VN7),function R0F)
call NX7(.6)
endloop
elseif(SQF==1093685045)then
set GSF=Bz
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
loop
exitwhen(RAbsBJ(Bz-GSF)>=4.5)
call IV(JD,Je,950.,Condition(function VN7),function R1F)
call NX7(.5)
endloop
elseif(SQF==1093683761)then
call NX7(1.)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set GSF=Bz
loop
exitwhen((not GZ[384+O5])or(RAbsBJ(Bz-GSF)>=5.))
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,750.,Condition(function VN7),function R1F)
call NX7(.5)
endloop
set GZ[384+O5]=false
elseif(SQF==1093678674)then
loop
call NX7(.5)
exitwhen((GetUnitCurrentOrder(j5)!=$D0265)or(not OA7(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),750.,Condition(function VN7),function R6F)
endloop
call NX7(.5)
if(GZ[384+O5])then
set UP=0
loop
exitwhen((not GZ[384+O5])or(UP>$C))
call IV(GetUnitX(j5),GetUnitY(j5),550.,Condition(function VN7),function R6F)
call NX7(.6)
set UP=UP+1
endloop
set GZ[384+O5]=false
endif
elseif((SQF==1093684820)or(SQF==1093684824))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
call NX7(.5)
loop
call NX7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D0275)or(not OA7(j5)))
call IV(JD,Je,900.,Condition(function VN7),function R6F)
endloop
elseif((SQF==1093677906)or(SQF==1093681494))then
call NX7(.5)
loop
call NX7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D0278)or(not OA7(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),900.,Condition(function VN7),function R6F)
endloop
elseif((SQF==1093678899)or(SQF==1093677898)or(SQF==1093678154)or(SQF==1093678157)or(SQF==1093678158))then
set GSF=Bz
loop
exitwhen((RAbsBJ(Bz-GSF)>=29.)or(not OA7(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),1200.,Condition(function VN7),function RAF)
call NX7(.8)
endloop
elseif(SQF==1093747288)then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
loop
call NX7(.6)
exitwhen((GetUnitCurrentOrder(j5)!=$D00DC)or(not OA7(j5)))
call MoveLocation(Hb,JD,Je)
call IV(JD,Je,1000.,Condition(function VN7),function R1F)
endloop
elseif((SQF==1093808454)or(SQF==1093808455))then
loop
call NX7(1.)
exitwhen((GetUnitAbilityLevel(j5,1110454836)==0)or(not OA7(j5)))
call IV(GetUnitX(j5),GetUnitY(j5),350.,Condition(function VN7),function R0F)
endloop
elseif(SQF==1093747009)then
if((IsUnitVisible(j5,Y7[0]))and(IsUnitVisible(j5,Z7[0])))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitX(j5)
set GSF=Bz
call KGF(j5,j5)
loop
exitwhen(RAbsBJ(Bz-GSF)>=1.5)
call IV(JD,Je,475,Condition(function VN7),function R1F)
call IV(x0,y0,475,Condition(function VN7),function R1F)
call NX7(.4)
endloop
call NX7(.4)
call IV(JD,Je,UP,Condition(function VN7),function SOF)
endif
elseif(SQF==1093746993)then
set r=$960
set GSF=TimerGetElapsed(V)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QI4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QI4
set y1=y0+(Je-y0)*r/QI4
set m5=j5
call NX7(1.)
loop
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>3.5)
set QK4=GetOwningPlayer(j5)
set QI4=350.
set QE4=GetUnitX(m5)
set QF4=GetUnitY(m5)
set QG4=x1
set QH4=y1
call IV(QE4,QF4,r,Condition(function RGF),function RKF)
call NX7(.4)
endloop
elseif(SQF==1093678929)then
if GetPlayerController(GetOwningPlayer(j5))==MAP_CONTROL_COMPUTER then
call RemoveGuardPosition(j5)
endif
elseif(SQF==1093678658)then
call KGF(j5,j5)
elseif(SQF==1093813555)then
set r=600+($C8*GetUnitAbilityLevel(j5,1093813555))
set GSF=TimerGetElapsed(V)
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set x0=GetUnitX(j5)
set y0=GetUnitY(j5)
set QI4=SquareRoot((JD-x0)*(JD-x0)+(Je-y0)*(Je-y0))
set x1=x0+(JD-x0)*r/QI4
set y1=y0+(Je-y0)*r/QI4
set m5=j5
loop
exitwhen((m5!=null)and(IsUnitVisible(m5,Y7[0]))and(IsUnitVisible(m5,Z7[0])))
call NX7(.3)
call GroupClear(iF)
set bj_groupEnumTypeId=1966092360
call GroupEnumUnitsOfPlayer(iF,GetOwningPlayer(j5),filterGetUnitsOfPlayerAndTypeId)
set m5=GroupPickRandomUnit(iF)
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>1.)
endloop
call NX7(.2)
loop
exitwhen(RAbsBJ(TimerGetElapsed(V)-GSF)>1.)
set QK4=GetOwningPlayer(j5)
set QI4=250.
set QE4=GetUnitX(m5)
set QF4=GetUnitY(m5)
set QG4=x1
set QH4=y1
call IV(QE4,QF4,r,Condition(function RGF),function RKF)
call NX7(.4)
endloop
elseif(SQF==DX7[1]or SQF==DX7[2]or SQF==DX7[3])and WQ7(Player(O5))then
set JD=GetLocationX(HC[O5])
set Je=GetLocationY(HC[O5])
set L84=N67(GetUnitX(j5),GetUnitY(j5),JD,Je)/(2.5*GetUnitMoveSpeed(j5))-.4
if L84>0 then
call PolledWait(L84)
else
call PolledWait(.1)
endif
set bj_lastLoadedUnit=j5
call MoveLocation(HA,JD,Je)
set LE4=(iU(j5))and((RG7(j5,"AI|EmberEscape")or(P77(300,HA,Condition(function TD7))!=0))and IssuePointOrderById(j5,$D00D9,JD,Je))
call RK7(j5,"AI|EmberEscape")
elseif(SQF==1093751349 or SQF==1093743415 or SQF==1093808945)then
set eY[$E0+O5]=R2I(Bz)+67
set hq[832+O5]=R2I(Bz)+9
endif
set j5=null
set m5=null
endfunction
function SRF takes nothing returns nothing
local unit j5=GetTriggerUnit()
local integer O5=GetPlayerId(GetOwningPlayer(j5))
local integer SQF=GetSpellAbilityId()
local boolean P3F=(GetPlayerController(Player(O5))==MAP_CONTROL_COMPUTER)
local unit m5=GetSpellTargetUnit()
local integer X5
local integer i1
local integer UP=1
if(SQF==1093751349 or SQF==1093743415 or SQF==1093808945)then
set hq[832+O5]=0
endif
if(SQF==1093751349 or SQF==1093743415)and P3F then
call NX7(.1)
if(U44[O5]!=null)and(not UnitHasItem(j5,U44[O5]))then
if PD7(j5,SU[XC])then
call RemoveItem(bj_lastCreatedItem)
endif
if UnitAddItem(j5,U44[O5])then
set U44[O5]=null
endif
endif
endif
if(SQF==1093751349 or SQF==1093743415)or(SQF==1093808945)or(SQF==1093677391)or(SQF==1093683265)then
call NX7(.1)
call XG7(j5)
endif
if(SQF==1093751874)then
call NX7(11.)
set DK7=LoadUnitHandle(C7,(GetHandleId(j5)),(652))
set bj_forLoopAIndex=GetPlayerId(GetOwningPlayer(DK7))
if(not GZ[$E0+O5])or(h4[bj_forLoopAIndex]!=null)or WP7(Player(bj_forLoopAIndex))then
call IssueImmediateOrderById(j5,$D0278)
endif
endif
call NX7(2)
loop
exitwhen UP>$B
if h4[352+UP]==j5 then
set i1=GetUnitTypeId(G7[UP])
set X5=GetUnitCurrentOrder(G7[UP])
set G0[272+UP]=true
if i1==1429221451 and(X5==$D0217)then
call IssueImmediateOrderById(G7[UP],$D0004)
call J3(G7[UP],false)
elseif i1==1311780930 and(X5==$D0222)then
call IssueImmediateOrderById(G7[UP],$D0004)
call J3(G7[UP],false)
endif
set G0[272+UP]=false
set h4[352+UP]=null
endif
set UP=UP+1
endloop
set j5=null
endfunction
function SSF takes nothing returns nothing
call K7F(GetEnumUnit())
endfunction
function STF takes unit u returns nothing
if(O37(u))then
if OV7(u)then
call PV7(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
elseif(N37(u,PL7(u))>5500.)then
if OV7(u)then
call PV7(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
set h4[GetPlayerId(GetOwningPlayer(u))]=null
else
if OV7(u)then
call PV7(u,$D000F,JW(u))
endif
endif
if((eY[GetPlayerId(GetOwningPlayer(u))]!=4)and(eY[GetPlayerId(GetOwningPlayer(u))]!=2))then
set eY[GetPlayerId(GetOwningPlayer(u))]=3
endif
endfunction
function SUF takes unit u returns nothing
if(O37(u))then
if OV7(u)then
call PV7(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
elseif(N37(u,PL7(u))>5500.)then
if OV7(u)then
call PV7(u,$D0012,h9[GetPlayerId(GetOwningPlayer(u))])
endif
set h4[GetPlayerId(GetOwningPlayer(u))]=null
else
if OV7(u)then
call PV7(u,$D000F,JW(u))
endif
endif
set eY[GetPlayerId(GetOwningPlayer(u))]=4
set GZ[480+GetPlayerId(GetOwningPlayer(u))]=true
endfunction
function SVF takes nothing returns nothing
call STF(GetEnumUnit())
endfunction
function SWF takes nothing returns nothing
call SUF(GetEnumUnit())
endfunction
function SXF takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetEnumUnit()))
set LP4="SXF"
if((N37(GetEnumUnit(),PL7(GetEnumUnit()))<5000.)and(eY[O5]!=4))then
if(IsUnitAlly(GetEnumUnit(),Z7[0]))then
if(G3==0)then
set h8[O5]=h7[111]
set h8[16+O5]=h7[114]
elseif(G3==1)then
set h8[O5]=h7[$83]
set h8[16+O5]=h7[$87]
elseif(G3==2)then
set h8[O5]=h7[$97]
set h8[16+O5]=h7[$9B]
endif
elseif(IsUnitAlly(GetEnumUnit(),Y7[0]))then
if(G4==0)then
set h8[O5]=h7[$B]
set h8[16+O5]=h7[$E]
elseif(G4==1)then
set h8[O5]=h7[31]
set h8[16+O5]=h7[35]
elseif(G4==2)then
set h8[O5]=h7[51]
set h8[16+O5]=h7[55]
endif
endif
set h9[O5]=PL7(GetEnumUnit())
set h9[16+O5]=PL7(GetEnumUnit())
if(OV7(GetEnumUnit()))then
call PV7(GetEnumUnit(),$D000F,h8[O5])
endif
set eY[O5]=1
elseif((IsUnitAlly(GetEnumUnit(),Y7[0]))and(eY[O5]!=9))then
if(((G4==1)and(N17(GetEnumUnit())==2))or((G4==2)and(N17(GetEnumUnit())==1)))then
set G0[32+O5]=true
call J3(GetEnumUnit(),true)
elseif(G4==0)then
call GBF(GetEnumUnit(),h7[9+P54])
elseif(G4==1)then
call GBF(GetEnumUnit(),h7[29+P24])
elseif(G4==2)then
call GBF(GetEnumUnit(),h7[49+P_4])
endif
elseif((IsUnitAlly(GetEnumUnit(),Z7[0]))and(eY[O5]!=9))then
if(((G3==1)and(N17(GetEnumUnit())==2))or((G3==2)and(N17(GetEnumUnit())==1)))then
set G0[32+O5]=true
call J3(GetEnumUnit(),true)
elseif(G3==0)then
call GBF(GetEnumUnit(),h7[117-P54])
elseif(G3==1)then
call GBF(GetEnumUnit(),h7[$8B-P24])
elseif(G3==2)then
call GBF(GetEnumUnit(),h7[$9F-P_4])
endif
endif
endfunction
function SYF takes nothing returns nothing
set eY[GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=$B
set h8[48+GetPlayerId(GetOwningPlayer(GetEnumUnit()))]=h7[$FA]
endfunction
function FCF takes nothing returns nothing
local unit it=QA7(Q_4,"OB|U")
local integer GVF
set LP4="FCF"
if(OV7(it))then
call PV7(it,$D0012,h9[GetPlayerId(GetOwningPlayer(it))])
endif
set G0[48+GetPlayerId(GetOwningPlayer(it))]=true
set GVF=GOF(6.,it,false,true)
set G0[48+GetPlayerId(GetOwningPlayer(it))]=false
if(GetWidgetLife(it)<=.405)then
elseif((GVF==2)and(not O37(it))and(not G0[32+GetPlayerId(GetOwningPlayer(it))])and(OV7(it)))then
call IssueImmediateOrderById(it,$D0019)
elseif(GVF==3)then
if((not O37(it))and(not G0[32+GetPlayerId(GetOwningPlayer(it))]))then
if OV7(it)then
call PV7(it,$D000F,h8[GetPlayerId(GetOwningPlayer(it))])
endif
else
call SJ7(it,false)
endif
endif
endfunction
function SZF takes player SAF,player SBF,boolean SCF,string S3F returns nothing
if(SCF)then
call DisplayTimedTextToPlayer(SBF,0,0,10.,P[GetPlayerId(SAF)]+GetPlayerName(SAF)+"|r has learned "+S3F)
else
call DisplayTimedTextToPlayer(SBF,0,0,10.,P[GetPlayerId(SAF)]+GetPlayerName(SAF)+"|r didn't yet learn "+S3F)
endif
endfunction
function S6F takes player SBF,unit SLF,integer S1F,string S0F returns nothing
call DisplayTimedTextToPlayer(SBF,0,0,10.,"        - |c0000cc00"+GetAbilityName(S1F)+"|r "+S0F+"[|c00ffff00Level "+I2S(GetUnitAbilityLevel(SLF,S1F))+"|r]")
endfunction
function S5F takes player S2F,player S_F returns nothing
local integer iZ=GetPlayerId(S2F)
local unit it=G7[iZ]
local integer T4F
local integer T7F=0
local integer array T8F
local boolean array T9F
set LP4="skillb_view"
if(it==null)then
return
endif
set T8F[1]=eY[336+iZ]
if(GetUnitAbilityLevel(it,T8F[1])!=0)then
set T9F[1]=true
set T7F=T7F+1
else
set T9F[1]=false
endif
set T8F[2]=eY[352+iZ]
if(GetUnitAbilityLevel(it,T8F[2])!=0)then
set T9F[2]=true
set T7F=T7F+1
else
set T9F[2]=false
endif
set T8F[3]=eY[368+iZ]
if((GetUnitTypeId(it)==1311781199)or(GetUnitTypeId(it)==1311781171)or(GetUnitTypeId(it)==1311781172)or(GetUnitTypeId(it)==1311781173))then
set T8F[3]=1093681477
endif
if(GetUnitAbilityLevel(it,T8F[3])!=0)then
set T9F[3]=true
set T7F=T7F+1
else
set T9F[3]=false
endif
set T8F[4]=eY[$AC+iZ]
if(GetUnitAbilityLevel(it,T8F[4])!=0)then
set T9F[4]=true
set T7F=T7F+1
else
set T9F[4]=false
endif
set T8F[5]=eY[$BC+iZ]
if(GetUnitAbilityLevel(it,T8F[5])!=0)then
set T9F[5]=true
set T7F=T7F+1
else
set T9F[5]=false
endif
set T8F[6]=1096904043
if((GetUnitTypeId(it)==1315334514)or(GetUnitTypeId(it)==1328558160)or(GetUnitTypeId(it)==1311781199)or(GetUnitTypeId(it)==1311781171)or(GetUnitTypeId(it)==1311781172)or(GetUnitTypeId(it)==1311781173)or(GetUnitTypeId(it)==1214409837))then
set T8F[6]=1093684818
endif
if(GetUnitAbilityLevel(it,T8F[6])!=0)then
set T9F[6]=true
set T7F=T7F+1
else
set T9F[6]=false
endif
if(T7F==0)then
call SZF(S2F,S_F,false,"any skill!")
return
endif
if((T7F==1))then
call SZF(S2F,S_F,true,"the following skill:")
endif
if((T7F>1))then
call SZF(S2F,S_F,true,"the following skills:")
endif
set T4F=1
loop
if(T9F[T4F])then
if(GetUnitAbilityLevel(it,T8F[T4F])==1)then
call S6F(S_F,it,T8F[T4F],"")
else
call S6F(S_F,it,T8F[T4F],"up to ")
endif
endif
exitwhen T4F>2
set T4F=T4F+1
endloop
if(GetUnitAbilityLevel(it,T8F[4])>=GetUnitAbilityLevel(it,T8F[5]))then
if(T9F[4])then
if(GetUnitAbilityLevel(it,T8F[4])==1)then
call S6F(S_F,it,T8F[4],"")
else
call S6F(S_F,it,T8F[4],"up to ")
endif
endif
elseif(T9F[5])then
if(GetUnitAbilityLevel(it,T8F[5])==1)then
call S6F(S_F,it,T8F[5],"")
else
call S6F(S_F,it,T8F[5],"up to ")
endif
endif
if(T9F[6])then
if(GetUnitAbilityLevel(it,T8F[6])==1)then
call S6F(S_F,it,T8F[6],"")
else
call S6F(S_F,it,T8F[6],"up to ")
endif
endif
if((T7F<4))then
call SZF(S2F,S_F,false,"the following skills:")
endif
if((T7F==4))then
call SZF(S2F,S_F,false,"the following skill:")
endif
set T4F=1
loop
if(not(T9F[T4F]))then
call S6F(S_F,it,T8F[T4F],"")
endif
exitwhen T4F>2
set T4F=T4F+1
endloop
if((GetUnitAbilityLevel(it,T8F[4])==0)and(GetUnitAbilityLevel(it,T8F[5])==0))then
call S6F(S_F,it,T8F[4],"")
endif
if(not(T9F[6]))then
call S6F(S_F,it,T8F[6],"")
endif
set it=null
endfunction
function TDF takes string VH returns nothing
local player pl=null
local unit m5=null
local integer UP
local integer E_F=0
local integer kg
local boolean H4F=false
local string TEF=""
local group TFF=null
local integer i=0
set LP4="yBv"
if((SubString(VH,0,2)=="-o")or(SubString(VH,0,2)=="-c")or(SubString(VH,0,2)==" c"))then
set VH=SubString(VH,2,StringLength(VH))
else
return
endif
set LG4=null
if(VH=="tango")then
if(Bz<60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496330553))
set PX4=true
endif
elseif(VH=="flask")then
if(Bz<60.)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496330800))
set PX4=false
endif
elseif(VH=="ld")then
if(TY4==false)then
set TY4=true
else
set TY4=false
endif
elseif(VH=="aen")then
if(GetTriggerPlayer()==QS4 and QT4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VR7)),function SSF)
set bj_lastLoadedUnit=JZ4
set H4F=true
elseif(GetTriggerPlayer()==QT4 and QS4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VQ7)),function SSF)
set bj_lastLoadedUnit=IY4
set H4F=true
endif
set TEF=GetObjectName(1496330803)
elseif(VH=="den")then
if(GetTriggerPlayer()==QS4 and QT4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VR7)),function SVF)
set bj_lastLoadedUnit=JZ4
set H4F=true
elseif(GetTriggerPlayer()==QT4 and QS4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VQ7)),function SVF)
set bj_lastLoadedUnit=IY4
set H4F=true
endif
set TEF=GetObjectName(1496330804)
elseif(VH=="sden")then
if(GetTriggerPlayer()==QS4 and QT4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VR7)),function SWF)
set bj_lastLoadedUnit=JZ4
set H4F=true
elseif(GetTriggerPlayer()==QT4 and QS4==null)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VQ7)),function SWF)
set bj_lastLoadedUnit=IY4
set H4F=true
endif
set TEF=GetObjectName(1496330806)
elseif(VH=="roshanen")then
if GetWidgetLife(T4)<.405 then
if(GetTriggerPlayer()==QS4)then
set bj_lastLoadedUnit=JZ4
elseif(GetTriggerPlayer()==QT4)then
set bj_lastLoadedUnit=IY4
endif
set H4F=true
set TEF=GetObjectName(1496330807)
else
if(GetTriggerPlayer()==QS4)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VR7)),function SYF)
set bj_lastLoadedUnit=JZ4
set H4F=true
elseif(GetTriggerPlayer()==QT4)then
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VQ7)),function SYF)
set bj_lastLoadedUnit=IY4
set H4F=true
endif
set TEF=GetObjectName(1496330546)
endif
elseif(SubString(VH,0,7)=="itemfix")then
set VH=SubString(VH,7,StringLength(VH))
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
loop
call TriggerSleepAction(.0)
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
if((pl!=null)and(WQ7(pl))and((IsPlayerAlly(pl,Y7[0])and(QS4==null or GetTriggerPlayer()==QS4))or(IsPlayerAlly(pl,Z7[0])and(QT4==null or GetTriggerPlayer()==QT4))))then
set UP=GetPlayerId(pl)
if G7[UP]==null then
else
if GetWidgetLife(G7[UP])>.405 then
call SJ7(G7[UP],true)
set hq[528+UP]=Bz+30.
call QG7(Q_4,"OB|U",G7[UP])
call ExecuteFunc("FCF")
if(eY[UP]>=9)then
set eY[UP]=1
endif
endif
set GZ[$C0+UP]=true
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,"Fixing itembuild")
endif
endif
exitwhen kg<0
endloop
call DestroyForce(LG4)
elseif((VH=="neut")or(VH=="neu"))then
if(GetTriggerPlayer()==QS4)then
set bj_lastLoadedUnit=IY4
set Gv=not Gv
if(Gv)then
set E_F=1
endif
else
set bj_lastLoadedUnit=JZ4
set Gw=not Gw
if(Gw)then
set E_F=1
endif
endif
set H4F=true
set TEF=GetObjectName(1496330550)+M27(E_F==1,GetObjectName(1496403790),GetObjectName(1498369862))
elseif(VH=="ui")then
call ExecuteFunc("TGF")
elseif(SubString(VH,0,2)=="sv")then
set VH=SubString(VH,2,StringLength(VH))
loop
call TriggerSleepAction(.0)
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
if((pl!=null)and(WQ7(pl)))then
call S5F(pl,GetTriggerPlayer())
endif
exitwhen kg<0
endloop
elseif(SubString(VH,0,1)=="b")then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="b" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set H4F=true
set UP=GetPlayerId(pl)
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
else
call QG7(Q_4,"OB|U",G7[UP])
call ExecuteFunc("FCF")
if(eY[UP]>=9)then
set eY[UP]=1
endif
set TEF=GetObjectName(1496330291)
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
elseif(SubString(VH,0,1)=="f")then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="f" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set H4F=true
set UP=GetPlayerId(pl)
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
else
call SJ7(G7[UP],true)
set hq[528+UP]=Bz+30.
call QG7(Q_4,"OB|U",G7[UP])
call ExecuteFunc("FCF")
if(eY[UP]>=9)then
set eY[UP]=1
endif
set TEF=GetObjectName(1496330290)
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
elseif((SubString(VH,0,1)=="a")and(VH!="auto"))then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="a" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set H4F=true
set UP=GetPlayerId(pl)
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
else
call K7F(G7[UP])
set TEF=GetObjectName(1496330289)
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
elseif(SubString(VH,0,1)=="d")then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="d" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,1,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set H4F=true
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
else
call STF(G7[UP])
set TEF=GetObjectName(1496330804)
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
elseif(SubString(VH,0,2)=="sd")then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="sd" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,2,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set H4F=true
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
else
call SUF(G7[UP])
set TEF=GetObjectName(1496330805)
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
elseif(SubString(VH,0,6)=="roshan")then
if GetWidgetLife(T4)<.405 then
if(GetTriggerPlayer()==QS4)then
set bj_lastLoadedUnit=JZ4
elseif(GetTriggerPlayer()==QT4)then
set bj_lastLoadedUnit=IY4
endif
set H4F=true
set TEF=GetObjectName(1496330807)
else
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if VH=="roshan" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
else
set VH=SubString(VH,6,StringLength(VH))
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set H4F=true
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
else
set eY[UP]=$B
set h8[48+UP]=h7[$FA]
set TEF=GetObjectName(1496330546)
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
endif
exitwhen kg<0
endloop
set H4F=false
call DestroyForce(LG4)
endif
elseif(PD4)then
elseif(VH=="auto")then
if(GetTriggerPlayer()==QS4)then
set PY4=(not PY4)
set bj_lastLoadedUnit=IY4
set TEF=GetObjectName(1496331831)+M27(PY4,GetObjectName(1496403790),GetObjectName(1498369862))
else
set PZ4=(not PZ4)
set bj_lastLoadedUnit=JZ4
set TEF=GetObjectName(1496331831)+M27(PZ4,GetObjectName(1496403790),GetObjectName(1498369862))
endif
set H4F=true
elseif(VH=="p")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332082)+"
"+GetObjectName(1497446194)+"
"+GetObjectName(1497517121)+"
"+"|c00dd8dff"+GetObjectName(1496332083)+"
"+"|c00dd8dff"+GetObjectName(1496332084)+"
"+"|c00dd8dff"+GetObjectName(1496332085)+"
"+"|c00dd8dff"+GetObjectName(1496332086))
elseif(VH=="pn")then
if(GetTriggerPlayer()==QS4)then
set G4=-1
set bj_lastLoadedUnit=IY4
else
set G3=-1
set bj_lastLoadedUnit=JZ4
endif
set H4F=true
set TEF=GetObjectName(1496332081)
elseif((VH=="pl")or(VH=="pr")or(VH=="pm"))then
if(VH=="pl")then
set E_F=1
elseif(VH=="pr")then
set E_F=2
else
set E_F=0
endif
if(GetTriggerPlayer()==QS4)then
set G4=E_F
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VQ7)),function SXF)
set bj_lastLoadedUnit=IY4
else
set G3=E_F
call ju(JG7(bj_mapInitialPlayableArea,Condition(function VR7)),function SXF)
set bj_lastLoadedUnit=JZ4
endif
set H4F=true
if(E_F==1)then
set TEF=GetObjectName(1496332087)
elseif(E_F==2)then
set TEF=GetObjectName(1496332088)
else
set TEF=GetObjectName(1496332089)
endif
elseif(SubString(VH,0,1)=="t")then
if VH!="t" then
set VH=SubString(VH,1,StringLength(VH))
set kg=kE(VH," ")
if kg==0 then
set VH=SubString(VH,1,StringLength(VH))
set kg=kE(VH," ")
endif
set bj_lastLoadedUnit=MC7(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),IY4,JZ4)
if(kg>=0)then
set L74=SubString(VH,kg+1,StringLength(VH))
if L74=="0" then
set E_F=$A
else
set E_F=S2I(L74)
endif
set pl=OW7(E_F)
set bj_forLoopAIndex=GetPlayerId(pl)
if(G7[bj_forLoopAIndex]==null)then
set TEF=GetObjectName(1496332336)
set E_F=0
elseif(not OA7(G7[bj_forLoopAIndex]))then
set TEF=GetObjectName(1496332337)
set E_F=0
set kg=0
elseif(not IsUnitVisible(G7[bj_forLoopAIndex],GetTriggerPlayer()))and(eY[32+bj_forLoopAIndex]<=2)then
set TEF=GetObjectName(1496332338)
set E_F=0
set kg=0
elseif(not IsPlayerEnemy(GetTriggerPlayer(),pl))then
set TEF=GetObjectName(1496332339)
set E_F=0
set kg=0
else
set VH=SubString(VH,0,kg+1)
set m5=G7[bj_forLoopAIndex]
endif
set H4F=(E_F==0)
else
set E_F=0
set VH="t"
endif
if(E_F>0)then
set E_F=N17(m5)
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if SubString(VH,0,1)==" " then
set VH=SubString(VH,1,StringLength(VH))
endif
set kg=kh(VH)
if(kg==-1)then
set VH=SubString(VH,0,1)
if VH=="a" or VH=="x" then
set VH=M27(IsPlayerAlly(GetTriggerPlayer(),Y7[0]),"1,2,3,4,5","6,7,8,9,0")
endif
endif
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WR7(pl))and(GetPlayerController(pl)==MAP_CONTROL_COMPUTER)and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set H4F=true
if(G7[UP]==null)then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
elseif h4[UP]!=null and O37(h4[UP])then
set TEF=GetObjectName(1496331056)
elseif((((E_F==1)and(N17(G7[UP])==2))or((E_F==2)and(N17(G7[UP])==1)))and N37(G7[UP],PL7(G7[UP]))>10000.)then
set TEF=GetObjectName(1496331057)
else
call ZPE(G7[UP],false)
call GCF(G7[UP],m5)
set G0[$A0+UP]=true
set h4[$90+UP]=m5
set TEF=GetObjectName(1496330295)+P[GetPlayerId(GetOwningPlayer(m5))]+GetPlayerName(GetOwningPlayer(m5))+"|r"
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
exitwhen kg<0
endloop
call DestroyForce(LG4)
set H4F=false
endif
endif
if VH=="t" then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332341)+"
"+GetObjectName(1497446453)+"
"+GetObjectName(1497511989)+"
"+"
"+"|c00dd8dff"+GetObjectName(1496332342)+"
"+"|c00dd8dff"+GetObjectName(1496332343)+"
")
endif
elseif(VH=="g")then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.,GetObjectName(1496332344)+"
"+GetObjectName(1497446456)+"
"+GetObjectName(1497511992)+"
"+"
"+"|c00dd8dff"+GetObjectName(1496332345)+"
"+"|c00dd8dff"+GetObjectName(1496332592)+"
"+"|c00dd8dff"+GetObjectName(1496332593)+"
")
elseif((SubString(VH,0,2)=="gl")or(SubString(VH,0,2)=="gr")or(SubString(VH,0,2)=="gm"))then
set LG4=CreateForce()
call ForceAddPlayer(LG4,GetTriggerPlayer())
if(SubString(VH,0,2)=="gl")then
set E_F=1
elseif(SubString(VH,0,2)=="gr")then
set E_F=2
else
set E_F=0
endif
set VH=SubString(VH,2,StringLength(VH))
set TFF=CreateGroup()
set i=1
loop
exitwhen i>5
if IsPlayerAlly(GetTriggerPlayer(),Y7[0])then
set pl=Y7[i]
else
set pl=Z7[i]
endif
set UP=GetPlayerId(pl)
if(WQ7(pl)and G7[UP]!=null and OA7(G7[UP])and O37(G7[UP])==false and N17(G7[UP])==0)then
call GroupAddUnit(TFF,G7[UP])
endif
set i=i+1
endloop
loop
set kg=kh(VH)
if(kg>=0)then
set pl=OX7(SubString(VH,0,kg))
set VH=SubString(VH,kg+1,StringLength(VH))
else
set pl=OX7(SubString(VH,0,StringLength(VH)))
endif
set H4F=false
if((pl!=null)and(WQ7(pl))and(IsPlayerAlly(pl,GetTriggerPlayer())))then
set UP=GetPlayerId(pl)
set H4F=true
if G7[UP]==null then
set H4F=false
elseif not OA7(G7[UP])then
set TEF=GetObjectName(1496330808)
elseif O37(G7[UP])then
set TEF=GetObjectName(1496330809)
elseif h4[UP]!=null and O37(h4[UP])then
set TEF=GetObjectName(1496331056)
else
set G0[64+UP]=true
set h4[UP]=null
call ZPE(G7[UP],false)
if(E_F==N17(G7[UP]))then
set E_F=-1
elseif((((E_F==1)and(N17(G7[UP])==2))or((E_F==2)and(N17(G7[UP])==1)))and N37(G7[UP],PL7(G7[UP]))>10000.)then
if(eY[$E0+UP]<R2I(Bz))then
if(E_F==1)then
set eY[$D0+UP]=M17(GetTriggerPlayer()==QS4,29+P24,$8B-P24)
elseif(E_F==2)then
set eY[$D0+UP]=M17(GetTriggerPlayer()==QS4,49+P_4,$9F-P_4)
endif
else
set E_F=$A+E_F
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[9+P54],h7[117-P54]))
endif
elseif(E_F==1)then
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[29+P24],h7[$8B-P24]))
elseif(E_F==2)then
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[49+P_4],h7[$9F-P_4]))
else
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[9+P54],h7[117-P54]))
endif
set G0[$A0+UP]=true
set hq[320+UP]=Bz+45.
if(E_F==1)then
set TEF=GetObjectName(1496331060)
elseif(E_F==2)then
set TEF=GetObjectName(1496331061)
elseif(E_F==$B)then
set TEF=GetObjectName(1496331062)
elseif(E_F==$C)then
set TEF=GetObjectName(1496331063)
elseif(E_F==-1)then
set TEF=GetObjectName(1496331059)
else
set TEF=GetObjectName(1496331058)
endif
endif
endif
if H4F then
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,TEF)
endif
if(E_F>$A)then
set E_F=E_F-$A
set bj_lastLoadedUnit=FirstOfGroup(TFF)
if bj_lastLoadedUnit!=null then
call GroupRemoveUnit(TFF,bj_lastLoadedUnit)
set UP=GetPlayerId(GetOwningPlayer(bj_lastLoadedUnit))
if(E_F==1)then
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[29+P24],h7[$8B-P24]))
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,GetObjectName(1496330552))
elseif(E_F==2)then
call GBF(G7[UP],MC7(GetTriggerPlayer()==QS4,h7[49+P_4],h7[$9F-P_4]))
call SH7(G7[UP],LG4)
call S97(G7[UP],LG4,GetObjectName(1496330551))
endif
endif
endif
exitwhen kg<0
endloop
call DestroyForce(LG4)
call DestroyGroup(TFF)
set H4F=false
endif
if H4F and TEF!="" then
call RY7(bj_lastLoadedUnit,TEF,GetTriggerPlayer())
endif
call DestroyForce(LG4)
set pl=null
set m5=null
set LG4=null
set TFF=null
endfunction
function THF takes nothing returns nothing
if(GetEventPlayerChatString()==" ")then
call TDF("-oui")
else
call TDF(GetEventPlayerChatString())
endif
endfunction
function TIF takes unit MQ7 returns integer
local integer i1=GetUnitTypeId(MQ7)
if i1==1211117643 then
return 0
endif
if(i1==1212363833 or i1==1212365106 or(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or((i1==1311781174)or(i1==1311781175)or(i1==1311781442))or i1==1315074670 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1429221430 or i1==1165451634 or i1==1160785972 or i1==1162032181 or i1==1162032951 or i1==1315334514 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409)then
return 0+GetHeroLevel(MQ7)/5
endif
if(i1==1215723364 or i1==1328558160 or i1==1211117617 or i1==1212363833 or i1==1212365106 or i1==1311781199 or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or i1==1433631084 or i1==1211117624 or i1==1315007329 or i1==1215063922 or i1==1164207469 or i1==1315074670 or i1==1211117636 or i1==1311781206 or i1==1211117649 or i1==1160786265 or i1==1211117652 or i1==1211119187 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1162032439 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1429221430 or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or i1==1432646245 or i1==1430467634 or i1==1429221424 or i1==1430468913 or i1==1162032181 or i1==1162032951 or i1==1160785970 or i1==1429221443 or i1==1328558154 or i1==1432510828 or i1==1315334514 or i1==1429221451 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409 or i1==1160786505 or i1==1160786510 or i1==1311788336 or i1==1160786507)then
return 3
endif
if(i1==1211117617 or i1==1214344551 or i1==1432580716 or i1==1211117624 or i1==1315988077 or i1==1211117616 or i1==1215063922 or i1==1311781193 or i1==1211119187 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1313026096 or i1==1429221443 or i1==1332109682 or i1==1429221446 or i1==1332766568 or i1==1432642913 or i1==1211117650 or i1==1328558389 or i1==1328558406 or i1==1160786502 or i1==1160786738)then
return 2
endif
if(i1==1164799855 or i1==1333027688 or i1==1311781185 or i1==1433105516 or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or i1==1215130471 or i1==1164799603 or i1==1432580716 or i1==1211117633 or i1==1332898670 or i1==1214345830 or i1==1160786000 or i1==1311780930 or i1==1311786311 or i1==1430466872 or i1==1430468144 or i1==1430466609 or i1==1211117640 or i1==1332963428 or i1==1429221445 or i1==1160786241 or i1==1429221456 or i1==1160786243 or i1==1311781207 or i1==1311780946 or i1==1211117646 or i1==1211117653 or i1==1311787088 or i1==1328558390 or i1==1160786506 or i1==1160786504 or i1==1211122767)then
return 3
endif
if(i1==1215128178 or i1==1164799855 or i1==1214931305 or i1==1211117620 or i1==1215130471 or i1==1316252014 or i1==1160786000 or i1==1211117651 or i1==1164666213 or i1==1433168227 or i1==1430468406 or i1==1430466872 or i1==1211117640 or i1==1332963428 or i1==1160786241 or i1==1429221456 or i1==1211117653 or i1==1160786520)then
return 3
endif
return 0
endfunction
function TJF takes unit MQ7 returns integer
local integer i1=GetUnitTypeId(MQ7)
if(i1==1212363833 or i1==1212365106 or(i1==1311781199 or i1==1311781171 or i1==1311781172 or i1==1311781173)or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or((i1==1311781174)or(i1==1311781175)or(i1==1311781442))or i1==1315074670 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1429221430 or i1==1165451634 or i1==1160785972 or i1==1162032181 or i1==1162032951 or i1==1315334514 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409)then
return 3
endif
if(i1==1215723364 or i1==1328558160 or i1==1211117617 or i1==1212363833 or i1==1212365106 or i1==1311781199 or i1==1315070563 or i1==1215657064 or i1==1332179560 or i1==1160785973 or i1==1433631084 or i1==1211117624 or i1==1315007329 or i1==1215063922 or i1==1164207469 or i1==1315074670 or i1==1211117636 or i1==1311781206 or i1==1211117649 or i1==1160786265 or i1==1211117652 or i1==1211119187 or((i1==1164277353)or(i1==1164277357)or(i1==1160786518)or(i1==1160786519)or(i1==1160786517))or i1==1162032439 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1429221430 or((i1==1211117654)or(i1==1211119684)or(i1==1211119683)or(i1==1211119668)or(i1==1211119682))or i1==1432646245 or i1==1430467634 or i1==1429221424 or i1==1430468913 or i1==1162032181 or i1==1162032951 or i1==1160785970 or i1==1429221443 or i1==1328558154 or i1==1432510828 or i1==1315334514 or i1==1429221451 or i1==1215722344 or i1==1160786242 or i1==1211117641 or i1==1211119409 or i1==1160786505 or i1==1160786510 or i1==1311788336)then
return 2
endif
if(i1==1211117617 or i1==1214344551 or i1==1432580716 or i1==1211117624 or i1==1315988077 or i1==1211117616 or i1==1215063922 or i1==1311781193 or i1==1211119187 or i1==1430466865 or i1==1429221441 or i1==1429221432 or i1==1313026096 or i1==1429221443 or i1==1332109682 or i1==1429221446 or i1==1332766568 or i1==1432642913 or i1==1211117650 or i1==1328558389 or i1==1328558406 or i1==1160786502 or i1==1160786507 or i1==1160786738)then
return 1
endif
if(i1==1164799855 or i1==1333027688 or i1==1311781185 or i1==1433105516 or((i1==1214409837)or(i1==1211119192)or(i1==1211119193)or(i1==1211119191))or i1==1215130471 or i1==1164799603 or i1==1432580716 or i1==1211117633 or i1==1332898670 or i1==1214345830 or i1==1160786000 or i1==1311780930 or i1==1311786311 or i1==1430466872 or i1==1430468144 or i1==1430466609 or i1==1211117640 or i1==1332963428 or i1==1429221445 or i1==1160786241 or i1==1429221456 or i1==1160786243 or i1==1311781207 or i1==1311780946 or i1==1211117646 or i1==1211117653 or i1==1311787088 or i1==1328558390 or i1==1160786506 or i1==1160786504 or i1==1211122767)then
return 1
endif
if(i1==1215128178 or i1==1164799855 or i1==1214931305 or i1==1211117620 or i1==1215130471 or i1==1316252014 or i1==1211117643 or i1==1160786000 or i1==1211117651 or i1==1164666213 or i1==1433168227 or i1==1430468406 or i1==1430466872 or i1==1211117640 or i1==1332963428 or i1==1160786241 or i1==1429221456 or i1==1211117653 or i1==1160786520)then
return 2
endif
return 1
endfunction
function TKF takes boolean NK7 returns nothing
local integer O5=0
local integer i=1
set LP4="aiRoshan"
if NK7 then
set LG4=W7
else
set LG4=X7
endif
set i=1
loop
exitwhen i>5
if NK7 then
set O5=GetPlayerId(Y7[i])
else
set O5=GetPlayerId(Z7[i])
endif
if G7[O5]!=null and GetUnitLifePercent(G7[O5])>50 and WQ7(Player(O5))and eY[O5]!=$B then
call SH7(G7[O5],LG4)
call S97(G7[O5],LG4,GetObjectName(1496330546))
set eY[O5]=$B
set h8[48+O5]=h7[$FA]
endif
set i=i+1
endloop
set LG4=null
endfunction
function TMF takes nothing returns nothing
local integer O5=0
local integer SN7=0
local integer i
local integer CVE=-1
local integer j
local integer k
local integer TNF
local integer TOF
local boolean TPF=false
local boolean TQF=false
local boolean NK7
local real TRF=0
local real TSF=0
set LP4="TMF"
set k=0
set i=1
loop
exitwhen i>5
set O5=GetPlayerId(Y7[i])
if(G7[O5]!=null)then
if GetHeroLevel(G7[O5])>=6 then
set TPF=true
endif
if(GetHeroLevel(G7[O5])>$B and GetUnitLifePercent(G7[O5])>50)then
set TRF=TRF+C_4
endif
endif
set O5=GetPlayerId(Z7[i])
if(G7[O5]!=null)then
if GetHeroLevel(G7[O5])>=6 then
set TQF=true
endif
if(GetHeroLevel(G7[O5])>$B and GetUnitLifePercent(G7[O5])>50)then
set TSF=TSF+L44
endif
endif
set i=i+1
endloop
set i=1
loop
exitwhen i>5
set O5=GetPlayerId(Y7[i])
if(eY[O5]==9 and eY[272+O5]!=0)then
set TPF=false
endif
if(G7[O5]!=null and(GetUnitLifePercent(G7[O5])>$A))then
set TSF=TSF-C_4
endif
set O5=GetPlayerId(Z7[i])
if(eY[O5]==9 and eY[272+O5]!=0)then
set TQF=false
endif
if(G7[O5]!=null and(GetUnitLifePercent(G7[O5])>$A))then
set TRF=TRF-L44
endif
set i=i+1
endloop
if(not TPF)and(not TQF)then
return
endif
if GetWidgetLife(T4)>.405 then
if(TRF>=3 and(P54>4 and P24>5 and P_4>5))then
call TKF(true)
endif
if(TRF>=3 and(P54<4 and P24<5 and P_4<5))then
call TKF(false)
endif
endif
set i=0
set k=0
if TQF then
set i=i+HA4
set bj_forLoopAIndex=1
else
set bj_forLoopAIndex=6
endif
if TPF then
set i=i+HB4
set bj_forLoopAIndexEnd=$A
else
set bj_forLoopAIndexEnd=5
endif
set SN7=-1
loop
exitwhen((bj_forLoopAIndex>bj_forLoopAIndexEnd)or(SN7!=-1))
set O5=GetPlayerId(OW7(bj_forLoopAIndex))
set NK7=(bj_forLoopAIndex<6)
if(G7[O5]!=null)then
if((GetWidgetLife(G7[O5])>.405)and(not O37(G7[O5])))then
call GroupClear(H8)
set bj_lastLoadedUnit=G7[O5]
set j=GetUnitUserData(h8[80+O5])
if((SN7==-1)and(P87(1200.,G7[O5],Condition(function TI7))<=1)and(OY7(G7[O5]))and((GetRandomInt(1,i)==1)and(GetRandomInt(1,$A)<=7+TJF(G7[O5]))))then
if((j>$B and j<17)or(j==$B and NK7==false)or(j==17 and NK7)or(j>$B and j<17)or(j==$B and NK7==false)or(j==17 and NK7)or(j>31 and j<39)or(j==31 and NK7==false)or(j==39 and NK7)or(j>$B and j<17)or(j==$B and NK7==false)or(j==17 and NK7)or(j>51 and j<59)or(j==51 and NK7==false)or(j==59 and NK7))then
set SN7=O5
endif
endif
endif
set i=i-1
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if SN7!=-1 then
set TOF=N17(G7[SN7])
if(TOF==0 and PF4)or(TOF==1 and PG4)or(TOF==2 and PE4)or(TOF!=0 and PD4)then
return
endif
set bj_forLoopAIndex=1
set i=M17(NK7,HB4,HA4)
set j=0
set k=0
loop
exitwhen((bj_forLoopAIndex>$A)or(eY[320+SN7]+j+k>LY4 and k!=0))
if bj_forLoopAIndex==6 then
set i=M17(NK7,HB4,HA4)
endif
if bj_forLoopAIndex<=5 then
if NK7 then
set O5=GetPlayerId(Z7[bj_forLoopAIndex])
else
set O5=GetPlayerId(Y7[bj_forLoopAIndex])
endif
else
if NK7 then
set O5=GetPlayerId(Z7[bj_forLoopAIndex-5])
else
set O5=GetPlayerId(Y7[bj_forLoopAIndex-5])
endif
endif
if(G7[O5]!=null)then
if(GetUnitLifePercent(G7[O5])>70)and(GetUnitManaPercent(G7[O5])>50. and GetUnitState(G7[O5],UNIT_STATE_MANA)>$C8)then
set TNF=N17(G7[O5])
if(TNF==TOF)and(bj_forLoopAIndex<=5)then
set j=j+1
if(WQ7(Player(O5)))and((CVE==-1)or(GetRandomInt(1,3)<=TIF(G7[O5])))then
set CVE=O5
endif
elseif((TNF!=TOF)and((TOF==0)or(TNF==0)))and(eY[272+O5]!=-1)then
if((WQ7(Player(O5)))and(GetHeroLevel(G7[O5])>=6)and(eY[O5]==1)and(h4[O5]==null)and(Bz>hq[320+O5])and(Bz>hq[480+O5])and(Bz>hq[528+O5])and(Bz>hq[576+O5])and(eY[544+O5]==0)and(Bz>hq[848+O5]))then
if(GetRandomInt(1,3)<=TIF(G7[O5]))and((GetRandomInt(1,i)<=2)or(bj_forLoopAIndex>5))then
set k=k+1
set eY[272+O5]=-1
endif
endif
endif
endif
set i=i-1
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
if(h4[304+SN7]!=null)then
set k=k-1
endif
if(j>2)then
set CVE=-1
endif
if(k>eY[320+SN7]+LY4)then
if NK7 then
set LG4=X7
else
set LG4=W7
endif
set O5=1
if k==0 and CVE!=-1 then
set O5=CVE
endif
loop
if(eY[272+O5]==-1)or((O5==CVE)and(k==0))then
call SH7(G7[O5],LG4)
call S97(G7[O5],LG4,GetObjectName(1496330295)+P[SN7]+GetUnitName(G7[SN7])+"|r")
call GCF(G7[O5],G7[SN7])
endif
set O5=O5+1
exitwhen(O5>$B)or(k==0)
endloop
set LX4=GetRandomInt(0,2)
endif
set O5=1
loop
exitwhen O5>$B
if eY[272+O5]==-1 then
set eY[272+O5]=0
endif
set O5=O5+1
endloop
endif
set LG4=null
endfunction
function TTF takes nothing returns nothing
local button TUF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=R97(ki,"PlHost")
local string kf=R97(ki,"Oid")
local integer UP=0
set LP4="TTF"
if(GetTriggerPlayer()!=QS4)then
set UP=5
endif
if(TUF==RD7(Q_4,VH+"|Btn11"))then
call TDF(kf+" "+I2S(1+UP))
elseif(TUF==RD7(Q_4,VH+"|Btn12"))then
call TDF(kf+" "+I2S(2+UP))
elseif(TUF==RD7(Q_4,VH+"|Btn13"))then
call TDF(kf+" "+I2S(3+UP))
elseif(TUF==RD7(Q_4,VH+"|Btn14"))then
call TDF(kf+" "+I2S(4+UP))
elseif(TUF==RD7(Q_4,VH+"|Btn15"))then
call TDF(kf+" "+I2S(5+UP))
elseif(TUF==RD7(Q_4,VH+"|Btn1A"))then
call TDF(kf)
endif
call Q47(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set TUF=null
endfunction
function TVF takes string ki,boolean J4 returns nothing
local dialog TWF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
local integer O5=1
set LP4="yfv"
if(GetTriggerPlayer()==QS4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(TWF,GetObjectName(1496331827))
loop
if(IsPlayerInForce(P57(O5,GetTriggerPlayer()==QS4),QW4))then
call QV7(Q_4,VH+"|Btn1"+I2S(O5),DialogAddButton(TWF,GetPlayerName(P57(O5,GetTriggerPlayer()==QS4)),0))
endif
set O5=O5+1
exitwhen O5>5
endloop
if(J4)then
call QV7(Q_4,VH+"|Btn1A",DialogAddButton(TWF,GetObjectName(1496331826),0))
endif
call QV7(Q_4,VH+"|Btn1X",DialogAddButton(TWF,GetObjectName(1496331568),0))
call QE7(GetHandleId(t),"PlHost",VH)
call QE7(GetHandleId(t),"Oid",ki)
call TriggerRegisterDialogEvent(t,TWF)
call TriggerAddAction(t,function TTF)
call DialogDisplay(GetTriggerPlayer(),TWF,true)
set t=null
endfunction
function TXF takes nothing returns nothing
local button TUF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=R97(ki,"PlHost")
local string kf=R97(ki,"Oid")
set LP4="TXF"
if(TUF==RD7(Q_4,VH+"|Btn21"))then
call TVF(kf+"l",false)
elseif(TUF==RD7(Q_4,VH+"|Btn22"))then
call TVF(kf+"r",false)
elseif(TUF==RD7(Q_4,VH+"|Btn23"))then
call TVF(kf+"m",false)
elseif(TUF==RD7(Q_4,VH+"|Btn21X"))then
call TDF(kf+"l")
elseif(TUF==RD7(Q_4,VH+"|Btn22X"))then
call TDF(kf+"r")
elseif(TUF==RD7(Q_4,VH+"|Btn23X"))then
call TDF(kf+"m")
elseif(TUF==RD7(Q_4,VH+"|Btn24"))then
call TDF(kf+"n")
endif
call Q47(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set TUF=null
endfunction
function TYF takes string ki,boolean J4 returns nothing
local dialog TWF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
local string kf=""
local string TZF=""
set LP4="yGv"
if(J4)then
set TZF="X"
endif
if(GetTriggerPlayer()==QS4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(TWF,GetObjectName(1496331569))
call QV7(Q_4,VH+"|Btn21"+TZF,DialogAddButton(TWF,GetObjectName(1496331571),0))
call QV7(Q_4,VH+"|Btn22"+TZF,DialogAddButton(TWF,GetObjectName(1496331570),0))
call QV7(Q_4,VH+"|Btn23"+TZF,DialogAddButton(TWF,GetObjectName(1496331572),0))
if(J4)then
call QV7(Q_4,VH+"|Btn24",DialogAddButton(TWF,GetObjectName(1496331573),0))
endif
call DialogAddButton(TWF,GetObjectName(1496331568),0)
call QE7(GetHandleId(t),"PlHost",VH)
call QE7(GetHandleId(t),"Oid",ki)
call TriggerRegisterDialogEvent(t,TWF)
call TriggerAddAction(t,function TXF)
call DialogDisplay(GetTriggerPlayer(),TWF,true)
set t=null
endfunction
function TAF takes nothing returns nothing
local button TUF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=R97(ki,"PlHost")
set LP4="TAF"
if(TUF==RD7(Q_4,VH+"|Btn61"))then
call TVF("-osd",true)
elseif(TUF==RD7(Q_4,VH+"|Btn62"))then
call TVF("-oroshan",true)
elseif(TUF==RD7(Q_4,VH+"|Btn63"))then
call TDF("-oneut")
elseif(TUF==RD7(Q_4,VH+"|Btn64"))then
call TDF("-oauto")
endif
call Q47(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set TUF=null
endfunction
function TBF takes nothing returns nothing
local dialog TWF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
set LP4="TBF"
if(GetTriggerPlayer()==QS4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(TWF,GetObjectName(1496331315))
call QV7(Q_4,VH+"|Btn61",DialogAddButton(TWF,GetObjectName(1496331574),0))
call QV7(Q_4,VH+"|Btn62",DialogAddButton(TWF,GetObjectName(1496331575),0))
if(((GetTriggerPlayer()==QS4)and(Gv))or((GetTriggerPlayer()==QT4)and(Gw)))then
call QV7(Q_4,VH+"|Btn63",DialogAddButton(TWF,GetObjectName(1496331576),0))
else
call QV7(Q_4,VH+"|Btn63",DialogAddButton(TWF,GetObjectName(1496331577),0))
endif
if(PD4)then
elseif(((GetTriggerPlayer()==QS4)and(PY4))or((GetTriggerPlayer()==QT4)and(PZ4)))then
call QV7(Q_4,VH+"|Btn64",DialogAddButton(TWF,GetObjectName(1496331824),0))
else
call QV7(Q_4,VH+"|Btn64",DialogAddButton(TWF,GetObjectName(1496331825),0))
endif
call DialogAddButton(TWF,GetObjectName(1496331568),0)
call QE7(GetHandleId(t),"PlHost",VH)
call TriggerRegisterDialogEvent(t,TWF)
call TriggerAddAction(t,function TAF)
call DialogDisplay(GetTriggerPlayer(),TWF,true)
set t=null
endfunction
function TCF takes nothing returns nothing
local button TUF=GetClickedButton()
local integer ki=GetHandleId(GetTriggeringTrigger())
local string VH=R97(ki,"PlHost")
set LP4="TCF"
if(TUF==RD7(Q_4,VH+"|Btn01"))then
call TVF("-oa",true)
elseif(TUF==RD7(Q_4,VH+"|Btn02"))then
call TVF("-od",true)
elseif(TUF==RD7(Q_4,VH+"|Btn03"))then
call TVF("-ob",false)
elseif(TUF==RD7(Q_4,VH+"|Btn04"))then
call TVF("-of",false)
elseif(TUF==RD7(Q_4,VH+"|Btn05"))then
call TYF("-og",false)
elseif(TUF==RD7(Q_4,VH+"|Btn06"))then
call TYF("-op",true)
elseif(TUF==RD7(Q_4,VH+"|Btn07"))then
call TBF()
endif
call Q47(ki)
call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set TUF=null
endfunction
function TGF takes nothing returns nothing
local dialog TWF=DialogCreate()
local trigger t=CreateTrigger()
local string VH=""
set LP4="TGF"
if(GetTriggerPlayer()==QS4)then
set VH="Sent"
else
set VH="Scrg"
endif
call DialogSetMessage(TWF,GetObjectName(1496331315))
call QV7(Q_4,VH+"|Btn01",DialogAddButton(TWF,GetObjectName(1496331316),0))
call QV7(Q_4,VH+"|Btn02",DialogAddButton(TWF,GetObjectName(1496331317),0))
call QV7(Q_4,VH+"|Btn03",DialogAddButton(TWF,GetObjectName(1496331318),0))
call QV7(Q_4,VH+"|Btn04",DialogAddButton(TWF,GetObjectName(1496331319),0))
if(not PD4)then
call QV7(Q_4,VH+"|Btn05",DialogAddButton(TWF,GetObjectName(1496331320),0))
call QV7(Q_4,VH+"|Btn06",DialogAddButton(TWF,GetObjectName(1496332340),0))
endif
call QV7(Q_4,VH+"|Btn07",DialogAddButton(TWF,GetObjectName(1496331321),0))
call DialogAddButton(TWF,GetObjectName(1496331568),0)
call QE7(GetHandleId(t),"PlHost",VH)
call TriggerRegisterDialogEvent(t,TWF)
call TriggerAddAction(t,function TCF)
call DialogDisplay(GetTriggerPlayer(),TWF,true)
set t=null
endfunction
function T3F takes nothing returns nothing
local integer T6F
local integer MTF
local integer FIF
local integer TLF=1
local location T1F=null
local location T0F=null
local string T5F=""
local string T2F=""
set LP4="T3F"
if(Bz<150.)then
set T6F=0
elseif(Bz<1200.)then
set T6F=GetRandomInt(1,2)
else
set T6F=GetRandomInt(1,3)
endif
if(T6F==0)then
return
elseif(T6F==1)then
set MTF=1848651827
set T5F="Siege Golems"
elseif(T6F==2)then
set MTF=1848651845
set T5F="Scary Fish"
else
set MTF=1848651844
set T5F="Ancient Hydras"
endif
if(Bz>2400.)then
set TLF=TLF+1
endif
if PD4 then
set FIF=3
else
set FIF=GetRandomInt(2,4)
endif
if(FIF==2)then
set T1F=Wv
set T0F=qv
set T2F="west"
elseif(FIF==3)then
set T1F=Tv
set T0F=mv
set T2F="middle"
elseif(FIF==4)then
set T1F=Uv
set T0F=pv
set T2F="east"
endif
call CreateNUnitsAtLoc(TLF,MTF,Y7[0],T1F,bj_UNIT_FACING)
call E29(bj_lastCreatedGroup,FIF)
call CreateNUnitsAtLoc(TLF,MTF,Z7[0],T0F,bj_UNIT_FACING)
call E29(bj_lastCreatedGroup,FIF)
call YM7(bj_FORCE_ALL_PLAYERS,10.,"|c000000ff"+T5F+"|r spawned in the "+T2F+" path!")
set T1F=null
set T0F=null
endfunction
function T_F takes boolean O6,string VH,integer U4F returns nothing
local integer U7F=0
local integer U8F=0
local integer U9F=0
local boolean UDF=false
local boolean UEF=false
local integer O5=1
local integer i1
local player pl
set LP4="AI_DecideWardsGemCloak"
loop
set pl=P57(O5,not O6)
if((WR7(pl))and(G7[GetPlayerId(pl)]!=null))then
set i1=GetUnitTypeId(G7[GetPlayerId(pl)])
if((i1==1211117643)or(i1==1212365106)or(i1==1211119409))then
set UEF=true
elseif((i1==1315007329)or(i1==1160785972)or(i1==1429221424)or(i1==1332179560)or(i1==1311781206)or(i1==1429221430)or(i1==1214344551))then
set UDF=true
endif
if(IsUnitType(G7[GetPlayerId(pl)],UNIT_TYPE_MELEE_ATTACKER))then
set U7F=U7F+1
endif
if(ND7(i1,5))then
set U8F=U8F+1
endif
if(N87(i1)<=2)then
set U9F=U9F+1
endif
endif
set O5=O5+1
exitwhen O5>5
endloop
if(UEF)then
call QF7(Q_4,VH+"|G",true)
call QF7(Q_4,VH+"|W",true)
elseif(UDF)then
call QF7(Q_4,VH+"|W",true)
endif
if(U7F!=0)and((U7F==U4F)or((U4F>3)and(U7F>=3)))then
call QF7(Q_4,VH+"|M",true)
endif
if(U8F!=0)and((U8F==U4F)or((U4F>3)and(U8F>=3)))then
call QF7(Q_4,VH+"|X",true)
endif
if(U4F>3 and U8F<=2)or(U4F<=3 and U8F<U4F)then
call QF7(Q_4,VH+"|Xb",true)
endif
if(U9F!=0)and((U9F==U4F)or((U4F>3)and(U9F>=3)))then
call QF7(Q_4,VH+"|D",true)
endif
set pl=null
endfunction
function UFF takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call T_F(true,"Sent",HB4)
call T_F(false,"Scrg",HA4)
endfunction
function UGF takes player pl returns nothing
if((CT))then
elseif(X_4[GetPlayerId(pl)]==1)then
if(not AT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+20.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+40.))
endif
elseif(X_4[GetPlayerId(pl)]==3)then
if(not AT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+45.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+70.))
endif
else
if(not AT)then
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+80.))
else
call SetPlayerHandicapXPBJ(pl,(GetPlayerHandicapXPBJ(pl)+110.))
endif
endif
set X_4[16+GetPlayerId(pl)]=R2I(GetPlayerHandicapXPBJ(pl))
endfunction
function UHF takes player pl,integer O5 returns nothing
local integer i=0
local integer RX7=GetPlayerId(pl)
set hG[48+RX7]=GetRandomInt(0,1)
if(L or RY4)then
set hG[48+RX7]=GetRandomInt(0,2)
endif
set hG[64+RX7]=GetRandomInt(0,2)
set hG[80+RX7]=GetRandomInt(0,2)
set O64[RX7]=false
call ForceRemovePlayer(C8,pl)
if X4 then
set i=i+8
endif
if(BT)then
set i=i+8
endif
if((VT)or(O5==0))then
elseif(X_4[RX7]==1)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(100/O5)+($A*(O5-1)))
elseif(X_4[RX7]==3)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(300/O5)+($A*(O5-1)))
set i=i+4
else
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)+(500/O5)+($A*(O5-1)))
set i=i+8
endif
if(BT)then
call SetPlayerStateBJ(pl,PLAYER_STATE_RESOURCE_GOLD,R2I(GetPlayerState(pl,PLAYER_STATE_RESOURCE_GOLD)*1.1))
endif
set X_4[32+RX7]=i
set X_4[48+RX7]=i
set X_4[64+RX7]=0
endfunction
function UIF takes trigger t,boolean O6,boolean UJF,boolean UKF returns nothing
if(P27(O6)!=null)then
call TriggerRegisterPlayerChatEvent(t,P27(O6),"-o",false)
call TriggerRegisterPlayerChatEvent(t,P27(O6),"-c",false)
call TriggerRegisterPlayerChatEvent(t,P27(O6)," c",false)
call TriggerRegisterPlayerChatEvent(t,P27(O6)," ",true)
if(IsTriggerEnabled(QZ4))then
call TriggerRegisterPlayerChatEvent(QZ4,P27(O6),"-pa",true)
call TriggerRegisterPlayerChatEvent(QZ4,P27(O6),"-px",true)
if((P27(not O6)==null)and(UKF))then
if(UJF)then
call DisplayTimedTextToPlayer(P27(O6),0,0,10.,GetObjectName(1496395824)+"|c00dd8dff"+"-pa|r/"+"|c00dd8dff"+"-pe|r")
else
call DisplayTimedTextToPlayer(P27(O6),0,0,10.,GetObjectName(1496395825)+"|c00dd8dff"+"-pe|r")
endif
call TriggerRegisterPlayerChatEvent(QZ4,P27(O6),"-pe",true)
elseif(UJF)then
call DisplayTimedTextToPlayer(P27(O6),0,0,10.,GetObjectName(1496395826)+"|c00dd8dff"+"-pa|r")
endif
endif
endif
endfunction
function UMF takes nothing returns nothing
local integer i=0
set LP4="UMF"
loop
exitwhen i>$F
if G7[i]!=null and GetPlayerController(Player(i))==MAP_CONTROL_COMPUTER and IsUnitInRange(G7[i],IY4,$3E8)==false and IsUnitInRange(G7[i],JZ4,$3E8)==false then
set G77[$B0+i]=0
endif
set i=i+1
endloop
endfunction
function UNF takes nothing returns nothing
local trigger t
set LP4="UNF"
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,JZ4,700.,null)
call TriggerAddCondition(t,Condition(function VP7))
call TriggerAddAction(t,function E4F)
set t=CreateTrigger()
call TriggerRegisterUnitInRange(t,IY4,700.,null)
call TriggerAddCondition(t,Condition(function VO7))
call TriggerAddAction(t,function E4F)
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,$A,true)
call TriggerAddAction(t,function UMF)
set t=null
endfunction
function UOF takes nothing returns nothing
local trigger t=null
local string VH=GetEventPlayerChatString()
local player pl=OW7(S2I(SubString(VH,8,StringLength(VH))))
if(pl!=null)and(pl!=GetTriggerPlayer())and WP7(pl)then
if GetTriggerPlayer()==QS4 then
if IsPlayerAlly(GetLocalPlayer(),QS4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,P[0]+"The Sentinel|r's AI Leadership has been granted to "+P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r.")
endif
set QS4=pl
set t=GetTriggeringTrigger()
call DestroyTrigger(t)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QS4,"-aigrant",false)
call TriggerAddAction(t,function UOF)
call DestroyTrigger(CM4)
set CM4=CreateTrigger()
call UIF(CM4,true,false,false)
call TriggerAddAction(CM4,function THF)
else
if IsPlayerAlly(GetLocalPlayer(),QT4)then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,10.,P[6]+"The Scourge|r's AI Leadership has been granted to "+P[GetPlayerId(pl)]+GetPlayerName(pl)+"|r.")
endif
set QT4=pl
set t=GetTriggeringTrigger()
call DestroyTrigger(t)
set t=CreateTrigger()
call TriggerRegisterPlayerChatEvent(t,QT4,"-aigrant",false)
call TriggerAddAction(t,function UOF)
call DestroyTrigger(CN4)
set CN4=CreateTrigger()
call UIF(CN4,false,false,false)
call TriggerAddAction(CN4,function THF)
endif
else
call AV7(GetTriggerPlayer(),"Invalid Leader Choice")
endif
endfunction
function UPF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local real YU9=R77(RP7,"Damage")
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or GetUnitAbilityLevel(GetTriggerUnit(),1110455089)==0 then
call DestroyEffect(Q17(RP7,"FX"))
call WF7(D18)
call Q47(RP7)
call RN7(t)
set E77=true
call D38(p5,m5,1,YU9)
set E77=false
if YU9>0 then
call BO7("+"+I2S(R2I(YU9)),1,m5,.023,$FF,0,0,$D8)
endif
elseif GetEventDamage()>1 then
call QD7(RP7,"Damage",(YU9+GetEventDamage()*.3)*1.)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function UQF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
call Q47(RP7)
call RN7(t)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Source",p5)
call Q97(RP7,"TargetIndex",WI7(m5))
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl",m5,"overhead"))
call QD7(RP7,"Damage",(0)*1.)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function UPF))
set t=null
return false
endfunction
function URF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="URF"
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function UQF))
call QG7(RP7,"Target",GetSpellTargetUnit())
call QG7(RP7,"Source",GetTriggerUnit())
set t=null
endfunction
function USF takes nothing returns nothing
if GetSpellAbilityId()==1093682756 and ZG7(GetSpellTargetUnit())==false then
call URF()
endif
endfunction
function UTF takes nothing returns nothing
local unit u=GetTriggerUnit()
local item TS8
local integer i=0
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer BB8
local item UUF
set LP4="UTF"
call DisableTrigger(H84)
loop
exitwhen i>5
set TS8=UnitItemInSlot(u,i)
set BB8=OK7(TS8)
if BB8==W3 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[YX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[OZ],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==B3 or BB8==C3 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[ZX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[UY],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==DO4 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[RX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[ZW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[EA4],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==DP4 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[RX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[ZW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[EA4],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==DD4 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[NW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[AL],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[E64],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==F44 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[EV],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[BV],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==H1 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[HW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[UW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==J1 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[HW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[UW],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==X0 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[HL],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[HZ],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[EJ4],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==E54 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[AV],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[DZ4],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==YB then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[EV],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[ZX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[AX],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==T1 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[OL],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[HL],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==GC or BB8==JC then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[A6],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[B3],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
elseif BB8==R3 then
set IQ4=GetItemPlayer(TS8)
call RemoveItem(TS8)
set UUF=CreateItem(RU[HY],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
set UUF=CreateItem(RU[RL],x,y)
call SetItemPlayer(UUF,IQ4,false)
call SetItemUserData(UUF,1)
endif
set i=i+1
endloop
call EnableTrigger(H84)
set u=null
set TS8=null
set UUF=null
endfunction
function UVF takes nothing returns boolean
if GetSpellAbilityId()==1093684021 or GetSpellAbilityId()==1093751366 then
call UTF()
endif
return false
endfunction
function UWF takes nothing returns nothing
local unit m5=GetEnumUnit()
local group WC9=pw
local unit p5=qw
set LP4="UWF"
if IsUnitInGroup(m5,WC9)==false then
call GroupAddUnit(WC9,m5)
call IssueTargetOrderById(Qw,$D006B,m5)
set E77=true
call D38(p5,m5,1,$C8)
set E77=false
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",m5,"origin"))
endif
set m5=null
set WC9=null
set p5=null
endfunction
function UXF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit DA8=QA7(RP7,"Caster")
local group WC9=QL7(RP7,"AlreadyDamaged")
local real d
local real x
local real x0=GetUnitX(p5)
local real y
local real y0=GetUnitY(p5)
local group g=ZI7()
local integer VT9=GetTriggerEvalCount(t)
local integer i
set LP4="UXF"
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
set pw=WC9
set qw=p5
set Qw=QA7(RP7,"Nuker")
if GetTriggerEvalCount(t)>33 then
call KillUnit(DA8)
call ZH7(WC9)
call Q47(RP7)
call RN7(t)
else
set d=VT9*18
set i=0
loop
exitwhen i>36
set x=x0+d*Cos(360*i/ 36*bj_DEGTORAD)
set y=y0+d*Sin(360*i/ 36*bj_DEGTORAD)
set IM4=p5
call GroupEnumUnitsInRange(g,x,y,$96,Condition(function LW7))
call ForGroup(g,function UWF)
set i=i+1
endloop
endif
call ZH7(g)
set t=null
set DA8=null
set WC9=null
set p5=null
set g=null
return false
endfunction
function UYF takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real x=GetUnitX(Z47)
local real y=GetUnitY(Z47)
local group WC9=ZI7()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1747990833,x,y,0)
local unit UZF=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="UYF"
call UnitAddAbility(UZF,1093686320)
call QP7(RP7,"AlreadyDamaged",WC9)
call QG7(RP7,"Caster",DA8)
call QG7(RP7,"Nuker",UZF)
call QG7(RP7,"Source",Z47)
call TriggerRegisterTimerEvent(t,.06,true)
call TriggerAddCondition(t,Condition(function UXF))
set t=null
set WC9=null
set DA8=null
set UZF=null
set Z47=null
endfunction
function UAF takes nothing returns nothing
if GetSpellAbilityId()==1093686329 then
call UYF()
endif
endfunction
function UBF takes unit CP7,integer Q5E returns nothing
local integer JZ7=GetHandleId(CP7)
call SaveInteger(C7,(JZ7),(750),(Q5E))
endfunction
function UCF takes nothing returns nothing
local integer i=0
local integer U3F=0
local boolean U6F=false
set LP4="UCF"
if GetSpellAbilityId()==1093683801 then
loop
exitwhen i>5
if OM7(UnitItemInSlot(GetTriggerUnit(),i))==YA or OM7(UnitItemInSlot(GetTriggerUnit(),i))==DS4 then
set U3F=GetItemCharges(UnitItemInSlot(GetTriggerUnit(),i))
if U3F>0 then
call SetItemCharges(UnitItemInSlot(GetTriggerUnit(),i),0)
call UBF(GetTriggerUnit(),0)
if U6F==false then
set U6F=true
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+$F*U3F)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+$F*U3F)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl",GetTriggerUnit(),"origin"))
endif
endif
return
endif
set i=i+1
endloop
endif
endfunction
function ULF takes integer id returns boolean
local integer i=1
set LP4="MagicStick_IsSpell"
loop
exitwhen i>MB4
if id==MA4[i]then
return false
endif
set i=i+1
endloop
return true
endfunction
function U1F takes unit U0F,unit p5 returns nothing
if IsUnitVisible(U0F,GetOwningPlayer(p5))==false and GetRandomInt(1,100)<$A then
call PlaySoundOnUnitBJ(RI,100,p5)
endif
endfunction
function U5F takes nothing returns nothing
local unit Z47=GetEnumUnit()
local integer i=0
set LP4="U5F"
loop
exitwhen i>5
if IsUnitVisible(GetTriggerUnit(),GetOwningPlayer(GetEnumUnit())) then
if OM7(UnitItemInSlot(Z47,i))==YA or OM7(UnitItemInSlot(Z47,i))==DS4 then
if OM7(UnitItemInSlot(Z47,i))==DS4 then
if GetItemCharges(UnitItemInSlot(Z47,i))==$F then
call U1F(GetTriggerUnit(),Z47)
endif
call UBF(Z47,A_7(GetItemCharges(UnitItemInSlot(Z47,i))+1,$F))
call SetItemCharges(UnitItemInSlot(Z47,i),A_7(GetItemCharges(UnitItemInSlot(Z47,i))+1,$F))
else
if GetItemCharges(UnitItemInSlot(Z47,i))==$A then
call U1F(GetTriggerUnit(),Z47)
endif
call UBF(Z47,A_7(GetItemCharges(UnitItemInSlot(Z47,i))+1,$A))
call SetItemCharges(UnitItemInSlot(Z47,i),A_7(GetItemCharges(UnitItemInSlot(Z47,i))+1,$A))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",Z47,"chest"))
set i=5
endif
endif
set i=i+1
endloop
set Z47=null
endfunction
function U2F takes nothing returns nothing
local group g=ZI7()
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
set LP4="U2F"
call GroupEnumUnitsInRange(g,x,y,$4C9,Condition(function L07))
call ForGroup(g,function U5F)
call ZH7(g)
set g=null
set p5=null
endfunction
function U_F takes nothing returns nothing
if ULF(GetSpellAbilityId()) and XW7(GetSpellAbilityId()) and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 and F38(GetSpellAbilityId())==false then
call U2F()
endif
endfunction
function V4F takes unit p5,unit m5 returns nothing
local integer X37=GetUnitAbilityLevel(p5,1093686099)
local real BD7=(.03+.01*X37)*GetUnitState(m5,UNIT_STATE_LIFE)
set LP4="Feast_SuccessfulAttack"
if GetUnitAbilityLevel(m5,1093678162)==0 then
call D38(p5,m5,2,BD7)
call SetUnitState(p5,UNIT_STATE_LIFE,BD7+GetUnitState(p5,UNIT_STATE_LIFE))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",p5,"origin"))
endif
endfunction
function V7F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local unit p5=QA7(RP7,"Source")
set LP4="V7F"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 then
call DisableTrigger(t)
call V4F(p5,m5)
call Q47(RP7)
call RN7(t)
endif
else
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function V8F takes nothing returns nothing
local trigger t=CreateTrigger()
local unit m5=GetTriggerUnit()
local unit p5=GetAttacker()
local integer RP7=GetHandleId(t)
set LP4="V8F"
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1,false)
call TriggerAddCondition(t,Condition(function V7F))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
set m5=null
set p5=null
set t=null
endfunction
function V9F takes nothing returns nothing
local unit p5=GetAttacker()
set LP4="V9F"
if RG7(p5,"CooldownState")==false then
call RR7(p5,"CooldownState",.4)
call V8F()
endif
endfunction
function VDF takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093686099)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Hero")and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call V9F()
endif
return false
endfunction
function VEF takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
set LP4="Feast_Learned"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function VDF))
call QG7(GetHandleId(t),"Hero",Z47)
if XY9 then
set aj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
endfunction
function VFF takes nothing returns boolean
if GetLearnedSkill()==1093686099 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093686099)==1 then
call VEF(GetTriggerUnit(),false)
endif
return false
endfunction
function PI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PI8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function VFF))
set t=null
endfunction
function VGF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="VGF"
if GetUnitTypeId(Z47)==1160786520 then
call SetUnitVertexColor(Z47,$FF,$FF,$FF,$FF)
else
call SetUnitVertexColor(Z47,100,100,100,$FF)
endif
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
call UnitRemoveAbility(Z47,1093686098)
call UnitRemoveAbility(Z47,1093686100)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function VHF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093686322)
set LP4="VHF"
call SetUnitVertexColor(Z47,0,0,0,$FF)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),1093686100,false)
call Z27(Z47,1093686100)
call Z27(Z47,1093686098)
call SetUnitAbilityLevel(Z47,1093686098,X37)
call BT8(Z47,0,0)
call QG7(RP7,"Hero",Z47)
call QH7(RP7,"FX1",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",Z47,"right hand"))
call QH7(RP7,"FX2",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",Z47,"left hand"))
call TriggerRegisterTimerEvent(t,2+X37,false)
call TriggerAddCondition(t,Condition(function VGF))
set Z47=null
set t=null
endfunction
function VIF takes nothing returns boolean
if GetSpellAbilityId()==1093686322 then
call VHF()
endif
return false
endfunction
function PJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VIF))
set t=null
endfunction
function Snatch_Damage takes nothing returns nothing
call D38(AC4,GetEnumUnit(),1,A34*125+25)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",GetEnumUnit(),"overhead"))
endfunction
function VJF takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local real YU9=R77(JZ7,"Damage")
set LP4="VJF"
call D38(CP7,J67,1,YU9)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl",J67,"overhead"))
set CP7=null
set J67=null
endfunction
function VKF takes nothing returns nothing
local unit CP7=AC4
local unit J67=GetEnumUnit()
local integer DB8=A34
local trigger t=B27(CP7,J67,1747993670,"ENE",600)
local integer JZ7=GetHandleId(t)
set LP4="VKF"
call QD7(JZ7,"Damage",((DB8*125+25)*1.))
set CP7=null
set J67=null
endfunction
function VMF takes unit CP7,unit J67,integer DB8 returns nothing
local group g=ZI7()
set LP4="Snatch_AOE"
set IM4=CP7
set AC4=CP7
set A34=DB8
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),725,Condition(function LF7))
call ForGroup(g,function VKF)
call ZH7(g)
set g=null
endfunction
function VNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YQ7=GetHandleId(t)
local integer NS7=R47(YQ7,"HeroPID")
local unit VOF=QA7(YQ7,"ConsumeCaster")
set LP4="VNF"
call DisableTrigger(Q14[NS7])
call IssueImmediateOrderById(VOF,$D0275)
call EnableTrigger(Q14[NS7])
call Q47(YQ7)
call RN7(t)
set t=null
set VOF=null
return false
endfunction

function VPF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=QA7(JZ7,"Target")
local unit ZO7=QA7(JZ7,"Hero")
local unit DA8=QA7(JZ7,"Caster")
local integer DB8=R47(JZ7,"Level")
set LP4="VPF"
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call UnitShareVision(J67,GetOwningPlayer(ZO7),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(J67),GetUnitY(J67)))
call SetUnitPosition(ZO7,GetUnitX(J67),GetUnitY(J67))
call PauseUnit(ZO7,false)
call ShowUnit(ZO7,true)
call SetUnitPathing(ZO7,true)
call ClearSelectionForPlayer(GetOwningPlayer(ZO7))
call SelectUnitForPlayerSingle(ZO7,GetOwningPlayer(ZO7))
call SetUnitInvulnerable(ZO7,false)
call DestroyEffect(Q17(JZ7,"FX"))
call DestroyEffect(Q17(JZ7,"FX3"))
call RemoveUnit(DA8)
call Q47(JZ7)
call RN7(t)
call VMF(ZO7,J67,DB8)
call SaveInteger(C7,(GetHandleId((ZO7))),((4310)),(2))
elseif IsUnitType(J67,UNIT_TYPE_HERO) and IsUnitEnemy(J67,GetOwningPlayer(ZO7)) then
call UnitShareVision(J67,GetOwningPlayer(ZO7),false)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(J67),GetUnitY(J67)))
call SetUnitPosition(ZO7,GetUnitX(J67),GetUnitY(J67))
call PauseUnit(ZO7,false)
call ShowUnit(ZO7,true)
call SetUnitPathing(ZO7,true)
call ClearSelectionForPlayer(GetOwningPlayer(ZO7))
call SelectUnitForPlayerSingle(ZO7,GetOwningPlayer(ZO7))
call SetUnitInvulnerable(ZO7,false)
call DestroyEffect(Q17(JZ7,"FX"))
call DestroyEffect(Q17(JZ7,"FX3"))
call RemoveUnit(DA8)
call Q47(JZ7)
call RN7(t)
call VMF(ZO7,J67,DB8)
call SaveInteger(C7,(GetHandleId((ZO7))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686104 then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",GetUnitX(J67),GetUnitY(J67)))
if IsUnitEnemy(J67,GetOwningPlayer(ZO7))then
call SetUnitState(ZO7,UNIT_STATE_LIFE,GetUnitState(ZO7,UNIT_STATE_LIFE)+GetUnitState(J67,UNIT_STATE_LIFE))
endif
call UnitShareVision(J67,GetOwningPlayer(ZO7),false)
call SetUnitPosition(ZO7,GetUnitX(J67),GetUnitY(J67))
call PauseUnit(ZO7,false)
call ShowUnit(ZO7,true)
call SetUnitPathing(ZO7,true)
call SetUnitAnimation(ZO7,"Stand Victory")
call CG7(ZO7,1.5)
call ClearSelectionForPlayer(GetOwningPlayer(ZO7))
call SelectUnitForPlayerSingle(ZO7,GetOwningPlayer(ZO7))
call SetUnitInvulnerable(ZO7,false)
call DestroyEffect(Q17(JZ7,"FX"))
call DestroyEffect(Q17(JZ7,"FX3"))
call RemoveUnit(DA8)
call Q47(JZ7)
call RN7(t)
call VMF(ZO7,J67,DB8)
if IsUnitEnemy(J67,GetOwningPlayer(ZO7))then
call UnitRemoveBuffs(J67,true,true)
call BT8(J67,0,0)
call D38(ZO7,J67,1,$186A0)
call D38(ZO7,J67,2,$186A0)
call D38(ZO7,J67,3,$186A0)
endif
call SaveInteger(C7,(GetHandleId((ZO7))),((4310)),(2))
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SELECTED and GetTriggerUnit()==J67 then
call ClearSelectionForPlayer(GetOwningPlayer(ZO7))
call SelectUnitAddForPlayer(DA8,GetOwningPlayer(ZO7))
else
call SetUnitPosition(ZO7,GetUnitX(J67),GetUnitY(J67))
endif
set t=null
set J67=null
set ZO7=null
return false
endfunction
function VQF takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local trigger VRF=CreateTrigger()
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1697657136,7260,-7732,0)
local string VSF="Objects\\Spawnmodels\\Naga\\NagaBlood\\NagaBloodWindserpent.mdl"
local string VTF="Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBase.mdl"
local string VUF="Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl"
set LP4="VQF"
if IsPlayerEnemy(GetLocalPlayer(),GetOwningPlayer(Z47))and Y27(GetLocalPlayer())==false then
set VSF=""
set VTF=""
set VUF=""
endif
call UnitRemoveBuffs(Z47,true,true)
call BT8(Z47,0,0)
call SetUnitInvulnerable(DA8,true)
call Z27(DA8,1093686104)
call ClearSelectionForPlayer(GetOwningPlayer(Z47))
call SelectUnitForPlayerSingle(DA8,GetOwningPlayer(Z47))
call UnitShareVision(m5,GetOwningPlayer(Z47),true)
call SetUnitInvulnerable(Z47,true)
call ShowUnit(Z47,false)
call PauseUnit(Z47,true)
call SetUnitPathing(Z47,false)
call DestroyEffect(AddSpecialEffectTarget(VSF,m5,"overhead"))
call QG7(RP7,"Target",m5)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",DA8)
call QH7(RP7,"FX",AddSpecialEffectTarget(VTF,m5,"overhead"))
call QH7(RP7,"FX3",AddSpecialEffectTarget(VUF,m5,"overhead"))
call Q97(RP7,"Level",(GetUnitAbilityLevel(Z47,1093686103)))
call TriggerRegisterDeathEvent(t,m5)
call TriggerRegisterPlayerUnitEvent(t,GetOwningPlayer(Z47),EVENT_PLAYER_UNIT_SELECTED,Condition(function WE7))
call TriggerRegisterUnitEvent(t,DA8,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function VPF))
call SaveInteger(C7,(GetHandleId((Z47))),((4310)),(1))
if WQ7(GetOwningPlayer(Z47))then
call QG7(GetHandleId(VRF),"ConsumeCaster",DA8)
call Q97(GetHandleId(VRF),"HeroPID",GetPlayerId(GetOwningPlayer(Z47)))
call TriggerRegisterTimerEvent(VRF,1.,false)
call TriggerAddCondition(VRF,Condition(function VNF))
endif
set t=null
set VRF=null
set Z47=null
set m5=null
endfunction
function VVF takes nothing returns boolean
if GetSpellAbilityId()==1093686103 then
call VQF()
endif
return false
endfunction
function VWF takes nothing returns boolean
if GetSpellAbilityId()==1093686103 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))and(IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO) or IsUnitIllusion(GetSpellTargetUnit()))then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659030))
endif
return false
endfunction
function PM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VVF))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function VWF))
set t=null
endfunction
function VXF takes integer ZD8,unit CP7,unit J67 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="Wound_Slow"
if ZD8==0 then
call IssueTargetOrderById(CP7,$D000F,J67)
elseif ZD8==1 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,1)
call IssueTargetOrderById(DA8,$D006B,J67)
elseif ZD8==2 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,1)
call IssueTargetOrderById(DA8,$D006B,J67)
elseif ZD8==3 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,2)
call IssueTargetOrderById(DA8,$D006B,J67)
elseif ZD8==4 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,3)
call IssueTargetOrderById(DA8,$D006B,J67)
elseif ZD8==5 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,4)
call IssueTargetOrderById(DA8,$D006B,J67)
elseif ZD8==6 then
call Z27(DA8,1093686344)
call SetUnitAbilityLevel(DA8,1093686344,5)
call IssueTargetOrderById(DA8,$D006B,J67)
endif
set DA8=null
endfunction
function VYF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer X37=R47(RP7,"Level")
local integer XB8=R47(RP7,"Count")
local unit p5=QA7(RP7,"Source")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local real VZF=(10.+X37*5.)/ 100.
set LP4="VYF"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set XB8=XB8+1
call VXF(XB8,p5,m5)
if XB8==8 then
call WF7(D18)
call Q47(RP7)
call RN7(t)
else
call Q97(RP7,"Count",XB8)
endif
elseif E38(GetEventDamage())and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*VZF)
else
call SetUnitState(G7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE,GetUnitState(G7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],UNIT_STATE_LIFE)+GetEventDamage()*VZF)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",GetEventDamageSource(),"origin"))
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function VAF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="VAF"
call VXF(0,p5,m5)
call Q97(RP7,"Count",0)
call Q97(RP7,"Level",GetUnitAbilityLevel(p5,1093744948))
call QG7(RP7,"Source",p5)
call Q97(RP7,"TargetIndex",WI7(m5))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function VYF))
set t=null
set p5=null
set m5=null
endfunction
function VBF takes nothing returns boolean
if GetSpellAbilityId()==1093744948 and ZG7(GetSpellTargetUnit())==false then
call VAF()
endif
return false
endfunction
function PK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VBF))
set t=null
call AC7(1093686344)
endfunction
function IsUnitHeroFilter takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunction
function V3F takes nothing returns boolean
local integer i1=GetSpellAbilityId()
set LP4="V3F"
if(i1==1093681473 or i1==1093748054 or i1==1093686104 or i1==1093683018 or i1==1093683013 or i1==1093683027 or i1==1093681474 or i1==1093748818 or i1==1093751605 or i1==1093749070 or i1==1093751608 or i1==1093681475 or i1==1093681476 or i1==1093681477 or i1==1093747023 or i1==1093752150 or i1==1093747786 or i1==1093752119)or i1==1093751607 or i1==1093687350 or i1==1093810228 or i1==1093683277 or(i1==1093678936 or i1==1093681484)or i1==1093678932 or i1==1093687350 or i1==1093683271 or i1==1093682778 then
elseif i1==1093743697 then
call KillUnit(GetTriggerUnit())
else
call UnitRemoveAbility(GetTriggerUnit(),i1)
endif
return true
endfunction
function V6F takes nothing returns boolean
local unit u=GetTriggerUnit()
local boolean VLF
if GetUnitAbilityLevel(u,1097625443)>0 and GetPlayerController(GetOwningPlayer(u))==MAP_CONTROL_COMPUTER then
if(GetUnitAbilityLevel(u,1093686104)==0 and GetUnitAbilityLevel(u,1093748823)==0 and GetUnitAbilityLevel(u,1093748824)==0 and GetUnitAbilityLevel(u,1093750342)==0 and GetUnitAbilityLevel(u,1093682778)==0 and GetUnitAbilityLevel(u,1093748301)==0 and GetUnitAbilityLevel(u,1093747786)==0 and GetUnitAbilityLevel(u,1093752119)==0 and GetUnitTypeId(u)!=1747993137 and GetUnitTypeId(u)!=1697657136 and GetUnitTypeId(u)!=1747993395 and GetUnitTypeId(u)!=1697657424 and GetUnitTypeId(u)!=1747988559 and GetUnitTypeId(u)!=1697657412 and GetUnitTypeId(u)!=1747990577 and GetUnitTypeId(u)!=1865429305)then
set VLF=GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_ENDCAST and V3F()
endif
endif
set u=null
return false
endfunction
function V1F takes unit MQ7,integer B58 returns item
local integer JA7
local item V0F
set LP4="FindItemOfIndex"
set JA7=0
loop
exitwhen JA7>5
set V0F=UnitItemInSlot(MQ7,JA7)
if(V0F!=null)and(OK7(V0F)==B58)then
set V0F=null
return UnitItemInSlot(MQ7,JA7)
endif
set JA7=JA7+1
endloop
set V0F=null
return null
endfunction
function TT8 takes nothing returns nothing
local unit Z47=IM4
local integer i=1
local integer V5F
set LP4="TT8"
if GetUnitTypeId(Z47)!=1211117653 then
return
endif
loop
exitwhen i>$B
set V5F=YS[i]
call Z27(Z47,V5F)
call SetPlayerAbilityAvailable(GetOwningPlayer(Z47),V5F,false)
set i=i+1
endloop
set Z47=null
endfunction
function V2F takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1211117653 and IsUnitIllusion(GetTriggerUnit())==false then
set IM4=GetTriggerUnit()
call TT8()
elseif(GetUnitTypeId(GetTriggerUnit())==1432510828 or GetUnitTypeId(GetTriggerUnit())==1160786520)and IsUnitIllusion(GetTriggerUnit())==false then
set IM4=GetTriggerUnit()
call ExecuteFunc("SWE")
elseif GetUnitTypeId(GetTriggerUnit())==1211117641 and IsUnitIllusion(GetTriggerUnit())==false then
set IM4=GetTriggerUnit()
call ExecuteFunc("AUD")
endif
return false
endfunction
function V_F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
set LP4="V_F"
call UnitRemoveAbility(m5,1093686858)
call UnitRemoveAbility(m5,1093742649)
if GetUnitAbilityLevel(m5,1093686858)==0 or GetUnitAbilityLevel(m5,1093742649)==0 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function W4F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
set LP4="W4F"
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
call UnitRemoveAbility(m5,1093686858)
call UnitRemoveAbility(m5,1093742649)
if GetUnitAbilityLevel(m5,1093686858)>0 or GetUnitAbilityLevel(m5,1093742649)>0 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QG7(RP7,"Target",m5)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function V_F))
endif
set t=null
set m5=null
return false
endfunction
function W7F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local integer W8F=GetHandleId(Z47)
local unit m5=GetSpellTargetUnit()
local integer W9F=R47(W8F,"WexLevel")
local integer WDF=R47(W8F,"ExortLevel")
set LP4="W7F"
call Z27(m5,1093686858)
call SetUnitAbilityLevel(m5,1093686858,W9F)
call Z27(m5,1093742649)
call SetUnitAbilityLevel(m5,1093742649,WDF)
call TriggerRegisterTimerEvent(t,9,false)
call TriggerAddCondition(t,Condition(function W4F))
call QG7(RP7,"Target",m5)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",m5,"origin"))
set t=null
set Z47=null
set m5=null
endfunction
function WEF takes nothing returns boolean
if GetSpellAbilityId()==1093686865 then
call W7F()
endif
return false
endfunction
function WFF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="WFF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WEF))
call A17(1093686858,GetRandomReal(1,25))
call A17(1093742649,GetRandomReal(1,25))
set t=null
endfunction
function WGF takes unit p5 returns real
return 400+400.*(R47(GetHandleId(p5),"WexLevel"))
endfunction
function WHF takes unit p5,unit m5,integer W9F,integer WIF returns nothing
local unit oA=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local unit WJF=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local real WKF=.5+.3*WIF
set LP4="YUv"
if WIF==7 then
set WKF=2.5
endif
call Z27(oA,1093687371)
call SetUnitAbilityLevel(oA,1093687371,WIF)
call IssueTargetOrderById(oA,$D00B0,m5)
call D58(WJF,m5,1,70+(W9F+WIF)*20.,WKF)
set oA=null
set WJF=null
endfunction
function WMF takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
call GroupAddUnit(IP4,GetEnumUnit())
call WHF(IM4,GetEnumUnit(),IG4,tl)
endif
endfunction
function WNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit oA=QA7(RP7,"Caster")
local real x2=R77(RP7,"x2")
local real y2=R77(RP7,"y2")
local real a=R77(RP7,"a")
local integer W9F=R47(RP7,"WexLevel")
local integer WIF=R47(RP7,"QuasLevel")
local group g=QL7(RP7,"g")
local real x=GetUnitX(oA)+25*Cos(a)
local real y=GetUnitY(oA)+25*Sin(a)
local group WOF=ZI7()
local real WPF=N67(x,y,x2,y2)
set LP4="WNF"
if WPF<=30 then
set x=x2
set y=y2
endif
call SetUnitX(oA,AY7(x))
call SetUnitY(oA,AZ7(y))
set IM4=oA
set IP4=g
set IG4=W9F
set tl=WIF
call GroupEnumUnitsInRange(WOF,x,y,$C8,Condition(function LF7))
call ForGroup(WOF,function WMF)
call ZH7(WOF)
if WPF<=30 or GetTriggerEvalCount(t)>125 then
call KillUnit(oA)
call Q47(RP7)
call RN7(t)
endif
set t=null
set oA=null
set g=null
set WOF=null
return false
endfunction
function WQF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit p5=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local unit oA
set LP4="WQF"
set x=GetUnitX(p5)
set y=GetUnitY(p5)
set oA=CreateUnit(GetOwningPlayer(p5),1848652117,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function WNF))
call QG7(RP7,"Caster",oA)
call QD7(RP7,"x2",x+WGF(p5)*Cos(a))
call QD7(RP7,"y2",y+WGF(p5)*Sin(a))
call Q97(RP7,"WexLevel",(R47(GetHandleId(p5),"WexLevel")))
call Q97(RP7,"QuasLevel",(R47(GetHandleId(p5),"QuasLevel")))
call QD7(RP7,"a",a)
call QP7(RP7,"g",ZI7())
call RemoveLocation(l)
set t=null
set l=null
set p5=null
endfunction
function WRF takes nothing returns boolean
if GetSpellAbilityId()==1093686859 then
call WQF()
endif
return false
endfunction
function WSF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="WSF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WRF))
call A17(1093687371,GetRandomReal(1,25))
set t=null
endfunction
function WTF takes nothing returns nothing
local real WUF=B97(B87(GetUnitState(GetEnumUnit(),UNIT_STATE_MANA),pB),0)
local real WVF=WUF*.5
set LP4="WTF"
if Y57(GetEnumUnit())==false and WUF>0 and YF7(GetEnumUnit())==false then
if GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)>(WVF+.5)then
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,GetUnitState(GetEnumUnit(),UNIT_STATE_LIFE)-WVF)
else
call SetUnitState(GetEnumUnit(),UNIT_STATE_LIFE,1)
call D38(PB,GetEnumUnit(),1,WVF)
endif
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)-WUF)
endif
endfunction
function WWF takes unit p5,integer W9F,integer WDF returns nothing
local group g=ZI7()
set LP4="Y6v"
set PB=p5
set IM4=p5
set pB=W9F*50+50
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),700,Condition(function LF7))
call ForGroup(g,function WTF)
call ZH7(g)
set g=null
endfunction
function WXF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit oA=QA7(RP7,"Caster")
local unit WYF
local real WZF=XN-.28*R47(RP7,"WexLevel")
local real WAF=VN+(EN-VN)*iX/(WZF/ .05)
set LP4="WXF"
call SetUnitScale(oA,WAF,WAF,WAF)
if iX>(WZF/ .05)then
call WWF(oA,R47(RP7,"WexLevel"),R47(RP7,"ExortLevel"))
set WYF=CreateUnit(GetOwningPlayer(oA),1697657167,GetUnitX(oA),GetUnitY(oA),0)
call SetUnitTimeScale(WYF,.3)
call RemoveUnit(oA)
call KillUnit(WYF)
call Q47(RP7)
call RN7(t)
endif
set t=null
set oA=null
set WYF=null
return false
endfunction
function WBF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit p5=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local unit oA=CreateUnit(GetOwningPlayer(p5),1697657165,x,y,a*bj_RADTODEG)
set LP4="WBF"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function WXF))
call QG7(RP7,"Caster",oA)
call Q97(RP7,"WexLevel",((R47(GetHandleId(p5),"WexLevel"))))
call Q97(RP7,"QuasLevel",((R47(GetHandleId(p5),"QuasLevel"))))
call Q97(RP7,"ExortLevel",((R47(GetHandleId(p5),"ExortLevel"))))
call RemoveLocation(l)
set t=null
set l=null
set p5=null
endfunction
function WCF takes nothing returns boolean
if GetSpellAbilityId()==1093686867 then
call WBF()
endif
return false
endfunction
function W3F takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="W3F"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WCF))
set t=null
endfunction
function W6F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit WLF=QA7(RP7,"Caster")
local unit hn=QA7(RP7,"Hero")
set LP4="W6F"
if GetUnitAbilityLevel(hn,1110456408)==0 then
call KillUnit(WLF)
call Q47(RP7)
call RN7(t)
else
call SetUnitAbilityLevel(WLF,1093686856,(R47(GetHandleId(hn),"QuasLevel")))
call SetUnitX(WLF,GetUnitX(hn))
call SetUnitY(WLF,GetUnitY(hn))
endif
set t=null
set WLF=null
set hn=null
return false
endfunction
function W1F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit WLF=CreateUnit(GetOwningPlayer(hn),1697657174,GetUnitX(hn),GetUnitY(hn),0)
set LP4="W1F"
call Z27(WLF,1093686856)
call SetUnitAbilityLevel(WLF,1093686856,(R47(GetHandleId(hn),"QuasLevel")))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function W6F))
call QG7(RP7,"Caster",WLF)
call QG7(RP7,"Hero",hn)
set t=null
set hn=null
endfunction
function W0F takes nothing returns boolean
if GetSpellAbilityId()==1093687372 then
call W1F()
endif
return false
endfunction
function W5F takes unit hn returns nothing
if GetUnitAbilityLevel(hn,1093687372)>0 then
call SetUnitAbilityLevel(hn,1093687372,(R47(GetHandleId(hn),"WexLevel")))
endif
endfunction
function W2F takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false then
call W5F(GetTriggerUnit())
endif
return false
endfunction
function W_F takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="W_F"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W0F))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function W2F))
call A17(1093686856,GetRandomReal(1,25))
set t=null
endfunction
function X4F takes unit X7F,unit m5,integer W9F returns nothing
local unit X8F=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="Invoke5_Effect"
call Z27(X8F,1093686868)
call SetUnitAbilityLevel(X8F,1093686868,W9F)
call IssueTargetOrderById(X8F,$D0269,m5)
set X8F=null
endfunction
function X9F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit X7F=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real XDF=R77(RP7,"Angle")
local real XEF=R77(RP7,"Rate")
local integer W9F=R47(RP7,"WexLevel")
local integer WIF=R47(RP7,"QuasLevel")
local integer XFF=WIF*25/ 3
local real x
local real y
local integer JYE=GetTriggerEvalCount(t)
set LP4="X9F"
if JYE>XFF/ 3 then
call QD7(RP7,"Rate",XEF*.98)
endif
if JYE>XFF or GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(RP7)
call RN7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call X4F(X7F,m5,W9F)
endif
else
set x=AY7(GetUnitX(m5)+XEF*Cos(XDF))
set y=AZ7(GetUnitY(m5)+XEF*Sin(XDF))
call BW7(x,y,$96)
call SetUnitPosition(m5,x,y)
endif
set t=null
set X7F=null
set m5=null
return false
endfunction
function XGF takes unit X7F,unit m5,integer W9F,integer WIF,integer XHF returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real XDF=Atan2(GetUnitY(m5)-GetUnitY(X7F),GetUnitX(m5)-GetUnitX(X7F))
set LP4="InvokeDeafeningBlastHelp5"
call D38(X7F,m5,1,XHF*40)
call QG7(RP7,"Source",X7F)
call QG7(RP7,"Target",m5)
call QD7(RP7,"Angle",XDF)
call QD7(RP7,"Rate",6)
call Q97(RP7,"WexLevel",W9F)
call Q97(RP7,"QuasLevel",WIF)
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function X9F))
set t=null
endfunction
function XIF takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false and Y57(GetEnumUnit())==false then
call GroupAddUnit(IP4,GetEnumUnit())
call XGF(IM4,GetEnumUnit(),IG4,tl,Tl)
endif
endfunction
function XJF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit X8F=QA7(RP7,"Caster")
local real a=R77(RP7,"a")
local real x2=R77(RP7,"x2")
local real y2=R77(RP7,"y2")
local group g=QL7(RP7,"g")
local integer W9F=R47(RP7,"WexLevel")
local integer WIF=R47(RP7,"QuasLevel")
local integer XHF=R47(RP7,"ExortLevel")
local real x=GetUnitX(X8F)
local real y=GetUnitY(X8F)
local group g2
set LP4="XJF"
if N67(x,y,x2,y2)<100 then
set x=x2
set y=y2
else
set x=x+33*Cos(a)
set y=y+33*Sin(a)
endif
call SetUnitX(X8F,AY7(x))
call SetUnitY(X8F,AZ7(y))
set g2=ZI7()
set IM4=X8F
set IP4=g
set IG4=W9F
set tl=WIF
set Tl=XHF
call GroupEnumUnitsInRange(g2,x,y,$C8,Condition(function LF7))
call ForGroup(g2,function XIF)
call ZH7(g2)
if(x==x2 and y==y2)or GetTriggerEvalCount(t)>35 then
set g2=ZI7()
set IM4=X8F
set IP4=g
set IG4=W9F
set tl=WIF
set Tl=XHF
call GroupEnumUnitsInRange(g2,x,y,$FA,Condition(function LF7))
call ForGroup(g2,function XIF)
call ZH7(g2)
call Q47(RP7)
call RN7(t)
call KillUnit(X8F)
call ZH7(g)
endif
set t=null
set X8F=null
set g=null
set g2=null
return false
endfunction
function XKF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit X7F=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(X7F),x-GetUnitX(X7F))
local unit X8F=CreateUnit(GetOwningPlayer(X7F),1848652120,GetUnitX(X7F),GetUnitY(X7F),a*bj_RADTODEG)
set LP4="XKF"
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function XJF))
call QG7(RP7,"Caster",X8F)
call QD7(RP7,"a",a)
call QD7(RP7,"x2",GetUnitX(X7F)+$3E8*Cos(a))
call QD7(RP7,"y2",GetUnitY(X7F)+$3E8*Sin(a))
call QP7(RP7,"g",ZI7())
call Q97(RP7,"WexLevel",(R47(GetHandleId(X7F),"WexLevel")))
call Q97(RP7,"QuasLevel",(R47(GetHandleId(X7F),"QuasLevel")))
call Q97(RP7,"ExortLevel",(R47(GetHandleId(X7F),"ExortLevel")))
call RemoveLocation(l)
set t=null
set l=null
set X7F=null
endfunction
function XMF takes nothing returns boolean
if GetSpellAbilityId()==1093686861 then
call XKF()
endif
return false
endfunction
function XNF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="XNF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XMF))
call A17(1093686868,GetRandomReal(1,25))
set t=null
endfunction
function XOF takes unit hn returns real
local integer XPF=(R47(GetHandleId(hn),"ExortLevel"))
set LP4="Invoke6_GetDamage"
return(80+XPF*35.)/ 2
endfunction
function XQF takes unit hn returns real
local integer XRF=(R47(GetHandleId(hn),"WexLevel"))
set LP4="Invoke6_GetDistance"
return 325+XRF*175.
endfunction
function XSF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit X7F=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local real BD7=R77(RP7,"Damage")
local effect FX=Q17(RP7,"FX")
local integer JYE=GetTriggerEvalCount(t)
set LP4="XSF"
call D38(X7F,m5,1,BD7)
if JYE==3 then
call Q47(RP7)
call RN7(t)
call DestroyEffect(FX)
endif
set t=null
set X7F=null
set m5=null
set FX=null
return false
endfunction
function XTF takes unit X7F,unit m5,real BD7 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="zjv"
call QG7(RP7,"Source",X7F)
call QG7(RP7,"Target",m5)
call QD7(RP7,"Damage",BD7)
call QH7(RP7,"FX",AddSpecialEffectTarget("Environment\\SmallBuildingFire\\SmallBuildingFire2.mdl",m5,"chest"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function XSF))
set t=null
endfunction
function XUF takes nothing returns nothing
call XTF(IM4,GetEnumUnit(),IH4/ 5)
call D38(IM4,GetEnumUnit(),1,IH4)
endfunction
function XVF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local real a=R77(RP7,"a")
local integer JYE=GetTriggerEvalCount(t)-26
local unit X7F=QA7(RP7,"Source")
local real XWF
local real XXF
local unit XYF
local group g
set LP4="XVF"
if JYE==1 then
set XYF=CreateUnit(GetOwningPlayer(X7F),1697657164,x,y,a*bj_RADTODEG)
call QG7(RP7,"Caster",XYF)
elseif JYE>1 then
set XYF=QA7(RP7,"Caster")
endif
if JYE>0 then
set XWF=AY7(GetUnitX(XYF)+$F*Cos(a))
set XXF=AZ7(GetUnitY(XYF)+$F*Sin(a))
call SetUnitX(XYF,XWF)
call SetUnitY(XYF,XXF)
if(JYE>1 and ModuloInteger(JYE,$A)==0)or JYE==1 then
set g=ZI7()
set IM4=X7F
set IH4=XOF(X7F)
call GroupEnumUnitsInRange(g,XWF,XXF,300,Condition(function LF7))
call ForGroup(g,function XUF)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",XWF,XXF))
endif
if JYE>XQF(X7F)/ 16.6 then
call Q47(RP7)
call RN7(t)
call KillUnit(XYF)
endif
endif
set t=null
set g=null
set XYF=null
set X7F=null
return false
endfunction
function XZF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local location l=GetSpellTargetLoc()
local unit X7F=GetTriggerUnit()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(X7F),x-GetUnitX(X7F))
local unit XAF=CreateUnit(GetOwningPlayer(X7F),1697657163,x,y,a*bj_RADTODEG)
set LP4="XZF"
call SetUnitTimeScale(XAF,.58)
call UnitApplyTimedLife(XAF,1112820806,1.75)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function XVF))
call QG7(RP7,"Source",X7F)
call QD7(RP7,"x",x)
call QD7(RP7,"y",y)
call QD7(RP7,"a",a)
call RemoveLocation(l)
set t=null
set l=null
set X7F=null
endfunction
function XBF takes nothing returns boolean
if GetSpellAbilityId()==1093686862 then
call XZF()
endif
return false
endfunction
function XCF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="XCF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XBF))
set t=null
endfunction
function X3F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real X6F=R77(GetHandleId(m5),"MeltingStrike|Last")
set LP4="X3F"
if X6F+5<=O97()then
call UnitRemoveAbility(m5,1093686871)
endif
call Q47(RP7)
call RN7(t)
set t=null
set m5=null
return false
endfunction
function XLF takes unit m5 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(m5,1093686871)
set LP4="zsv"
if X37==0 then
call Z27(m5,1093686871)
endif
call SetUnitAbilityLevel(m5,1093686871,X37+1)
call QG7(RP7,"Target",m5)
call QD7(GetHandleId(m5),"MeltingStrike|Last",O97())
call TriggerRegisterTimerEvent(t,5,false)
call TriggerAddCondition(t,Condition(function X3F))
set t=null
endfunction
function X1F takes nothing returns boolean
local real d
set LP4="X1F"
if GetUnitAbilityLevel(GetTriggerUnit(),1110456625)>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093686870)>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call UnitRemoveAbility(GetTriggerUnit(),1110456625)
call DisableTrigger(GetTriggeringTrigger())
call XLF(GetTriggerUnit())
call Q47(GetHandleId(GetTriggeringTrigger()))
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function X0F takes nothing returns nothing
local trigger t
local unit m5
local unit p5
set LP4="X0F"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
set m5=GetSpellTargetUnit()
set p5=GetTriggerUnit()
else
set m5=GetTriggerUnit()
set p5=GetAttacker()
endif
if IsUnitIllusion(p5)==false then
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",p5)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function X1F))
endif
set t=null
set m5=null
set p5=null
endfunction
function X5F takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetUnitAbilityLevel(GetAttacker(),1093686870)>0 and R87(GetHandleId(GetTriggeringTrigger()),"OrbOn")and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetAttacker()==QA7(GetHandleId(GetTriggeringTrigger()),"Source")then
call X0F()
endif
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if(GetIssuedOrderId()==$D011F)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",true)
elseif(GetIssuedOrderId()==$D0120)then
call QF7(GetHandleId(GetTriggeringTrigger()),"OrbOn",false)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093686870 then
call X0F()
endif
return false
endfunction
function X2F takes unit p5 returns nothing
local trigger t=CreateTrigger()
set LP4="zuv"
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function X5F))
call QG7(GetHandleId(t),"Source",p5)
call QF7(GetHandleId(t),"OrbOn",true)
set t=null
endfunction
function X_F takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Y4F takes nothing returns boolean
return(GetUnitTypeId(GetFilterUnit())==1848652343)
endfunction
function Y7F takes player p returns nothing
local group g=ZI7()
set LP4="zWv"
call GroupEnumUnitsOfPlayer(g,p,Condition(function Y4F))
call ForGroup(g,function X_F)
call ZH7(g)
set g=null
endfunction
function Y8F takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit oA
local integer WIF=(R47(GetHandleId(p5),"QuasLevel"))
local integer WDF=(R47(GetHandleId(p5),"ExortLevel"))
set LP4="Y8F"
call Y7F(GetOwningPlayer(p5))
set oA=CreateUnit(GetOwningPlayer(p5),1848652343,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitColor(oA,GetPlayerColor(Y7[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",oA,"chest")
call UnitApplyTimedLife(oA,1112820806,$A+$A*WIF)
call SetUnitAbilityLevel(oA,1093686870,WDF)
call X2F(oA)
if Ab[GetPlayerId(GetOwningPlayer(p5))]then
call SelectUnitAddForPlayer(oA,GetOwningPlayer(p5))
endif
if WIF>3 and WDF>3 then
set oA=CreateUnit(GetOwningPlayer(p5),1848652343,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call SetUnitColor(oA,GetPlayerColor(Y7[0]))
call AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",oA,"chest")
call UnitApplyTimedLife(oA,1112820806,$A+$A*WIF)
call SetUnitAbilityLevel(oA,1093686870,WDF)
call X2F(oA)
if Ab[GetPlayerId(GetOwningPlayer(p5))]then
call SelectUnitAddForPlayer(oA,GetOwningPlayer(p5))
endif
endif
call SetPlayerTechResearched(GetOwningPlayer(p5),1378889799,WDF)
call SetPlayerTechResearched(GetOwningPlayer(p5),1378889800,WIF)
set p5=null
set oA=null
endfunction
function Y9F takes nothing returns boolean
if GetSpellAbilityId()==1093686863 then
call Y8F()
endif
return false
endfunction
function YDF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="YDF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y9F))
call A17(1093686870,GetRandomReal(1,25))
call A17(1093686871,GetRandomReal(1,25))
set t=null
endfunction
function YEF takes unit CP7 returns integer
local integer DB8=(R47(GetHandleId(CP7),"QuasLevel"))
set LP4="Invoke8_GetSlowAbility"
if DB8==1 then
return 1093808944
elseif DB8==2 then
return 1093808730
elseif DB8==3 then
return 1093808729
elseif DB8==4 then
return 1093808725
elseif DB8==5 then
return 1093808726
elseif DB8==6 then
return 1093808727
elseif DB8==7 then
return 1093808728
endif
return 1093808944
endfunction
function YFF takes unit J67 returns nothing
call UnitRemoveAbility(J67,1093808944)
call UnitRemoveAbility(J67,1093808730)
call UnitRemoveAbility(J67,1093808729)
call UnitRemoveAbility(J67,1093808725)
call UnitRemoveAbility(J67,1093808726)
call UnitRemoveAbility(J67,1093808727)
call UnitRemoveAbility(J67,1093808728)
call UnitRemoveAbility(J67,1110456410)
endfunction
function YGF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real JID=(LoadReal(C7,(GetHandleId(J67)),(681)))
set LP4="YGF"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JID<(TimerGetElapsed(V))then
call YFF(J67)
endif
set t=null
set J67=null
return false
endfunction
function YHF takes nothing returns nothing
local unit CP7=IM4
local unit J67=GetEnumUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real JID=(LoadReal(C7,(GetHandleId(J67)),(681)))
set LP4="YHF"
if JID<(TimerGetElapsed(V))then
call Z27(J67,YEF(CP7))
endif
call SaveReal(C7,(GetHandleId(J67)),(681),(((TimerGetElapsed(V))+2)*1.))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call TriggerRegisterTimerEvent(t,2.01,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function YGF))
set t=null
set CP7=null
endfunction
function YIF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real LN9=(LoadReal(C7,(JZ7),(6)))
local real LO9=(LoadReal(C7,(JZ7),(7)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real DY8=(LoadReal(C7,(JZ7),(57)))
local real x
local real y
local integer i=1
local integer ZD8=GetTriggerEvalCount(t)
local group g
set LP4="YIF"
if ZD8*.1>DY8 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
loop
exitwhen i>7
set x=LN9+80*i*Cos((a+90)*bj_DEGTORAD)
set y=LO9+80*i*Sin((a+90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function LQ7))
call ForGroup(g,function YHF)
set x=LN9+80*i*Cos((a-90)*bj_DEGTORAD)
set y=LO9+80*i*Sin((a-90)*bj_DEGTORAD)
call GroupEnumUnitsInRange(g,x,y,105,Condition(function LQ7))
call ForGroup(g,function YHF)
set i=i+1
endloop
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function YJF takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real a=GetUnitFacing(p5)
local integer i=1
local unit oA
local real x
local real y
local real LN9=GetUnitX(p5)+$E1*Cos(a*bj_DEGTORAD)
local real LO9=GetUnitY(p5)+$E1*Sin(a*bj_DEGTORAD)
local integer WIF=(R47(GetHandleId(p5),"QuasLevel"))
local integer WDF=(R47(GetHandleId(p5),"ExortLevel"))
local real DY8=1.5+1.5*WIF
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="YJF"
loop
exitwhen i>7
set x=LN9+80*i*Cos((a+90)*bj_DEGTORAD)
set y=LO9+80*i*Sin((a+90)*bj_DEGTORAD)
set oA=CreateUnit(GetOwningPlayer(p5),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(oA,1395667016,WIF)
call SetUnitAbilityLevel(oA,1093687374,WDF)
call SetUnitAnimation(oA,"birth")
call QueueUnitAnimation(oA,"stand")
call UnitApplyTimedLife(oA,1112820806,DY8)
set x=LN9+80*i*Cos((a-90)*bj_DEGTORAD)
set y=LO9+80*i*Sin((a-90)*bj_DEGTORAD)
set oA=CreateUnit(GetOwningPlayer(p5),1966092367,x,y,GetRandomReal(0,360))
call SetUnitAbilityLevel(oA,1395667016,WIF)
call SetUnitAbilityLevel(oA,1093687374,WDF)
call SetUnitAnimation(oA,"birth")
call QueueUnitAnimation(oA,"stand")
call UnitApplyTimedLife(oA,1112820806,DY8)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function YIF))
call TriggerRegisterTimerEvent(t,.1,true)
call SaveReal(C7,(JZ7),(6),((LN9)*1.))
call SaveReal(C7,(JZ7),(7),((LO9)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveUnitHandle(C7,(JZ7),(2),(p5))
call SaveReal(C7,(JZ7),(57),((DY8)*1.))
set oA=null
set p5=null
set t=null
endfunction
function YKF takes nothing returns boolean
if GetSpellAbilityId()==1093686864 then
call YJF()
endif
return false
endfunction
function YMF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="YMF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YKF))
call A17(1395667016,GetRandomReal(1,25))
call A17(1093687374,GetRandomReal(1,25))
set t=null
endfunction
function YNF takes nothing returns nothing
if OI7(GetEnumUnit())==false then
call D38(IM4,GetEnumUnit(),3,IH4)
endif
endfunction
function YOF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit hn=QA7(RP7,"Hero")
local real BD7=R77(RP7,"Damage")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local group g=ZI7()
local integer JYE
set LP4="YOF"
set IM4=hn
call GroupEnumUnitsInRange(g,x,y,$C8,Condition(function LF7))
set JYE=CountUnitsInGroup(g)
if JYE<1 then
set JYE=1
endif
set IH4=BD7/ JYE
call ForGroup(g,function YNF)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",x,y))
call ZH7(g)
call DestroyEffect(Q17(RP7,"Effect"))
call Q47(RP7)
call RN7(t)
set t=null
set hn=null
set g=null
return false
endfunction
function YPF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real BD7=(R47(GetHandleId(hn),"ExortLevel"))*62.5+12.5+25
local string s=""
set LP4="YPF"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(hn)) or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
set s="Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl"
endif
call BA7(GetOwningPlayer(hn),5.7,x,y,400)
call TriggerRegisterTimerEvent(t,1.7,false)
call TriggerAddCondition(t,Condition(function YOF))
call QG7(RP7,"Hero",hn)
call QD7(RP7,"x",x)
call QD7(RP7,"y",y)
call QD7(RP7,"Damage",BD7)
call QH7(RP7,"Effect",AddSpecialEffect(s,x,y))
call RemoveLocation(l)
set t=null
set hn=null
set l=null
endfunction
function YQF takes nothing returns boolean
if GetSpellAbilityId()==1093686855 then
call YPF()
endif
return false
endfunction
function YRF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="YRF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YQF))
set t=null
endfunction
function YSF takes unit X7F,unit m5 returns nothing
local unit YTF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
set LP4="Invoke10_Ministun"
call Z27(YTF,1093686857)
call IssueTargetOrderById(YTF,$D007F,m5)
if Y57(m5)==false then
call D38(X7F,m5,1,30)
endif
set YTF=null
endfunction
function YUF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local unit X7F=QA7(RP7,"Source")
set LP4="YUF"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>$A and RH7(t,"Cooldown")==false and GetOwningPlayer(GetEventDamageSource())!=GetOwningPlayer(GetTriggerUnit())then
call DisableTrigger(t)
call YSF(X7F,m5)
call EnableTrigger(t)
call RS7(t,"Cooldown",.8-X37*.0285)
endif
else
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set X7F=null
return false
endfunction
function YVF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit hn=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer X37=(R47(GetHandleId(hn),"QuasLevel"))
set LP4="YVF"
call TriggerRegisterTimerEvent(t,2.5+X37*.5,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function YUF))
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Source",hn)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl",m5,"overhead"))
call YSF(hn,m5)
set t=null
set hn=null
set m5=null
endfunction
function YWF takes nothing returns boolean
if GetSpellAbilityId()==1093686874 then
call YVF()
endif
return false
endfunction
function YXF takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="YXF"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YWF))
call A17(1093686857,GetRandomReal(1,25))
set t=null
endfunction
function YYF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit hn=QA7(RP7,"Hero")
local integer X37=R47(RP7,"Level")
set LP4="YYF"
call SetUnitState(hn,UNIT_STATE_LIFE,GetUnitState(hn,UNIT_STATE_LIFE)+X37*1)
return false
endfunction
function YZF takes unit hn,integer X37 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(hn)
set LP4="Zov"
call QF7(RP7,"Invoker|HasQuas",true)
call QI7(RP7,"Invoker|QuasTrigger",t)
call QG7(GetHandleId(t),"Hero",hn)
call Q97(GetHandleId(t),"Level",X37)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function YYF))
set t=null
endfunction
function YAF takes unit hn returns nothing
local integer RP7=GetHandleId(hn)
local boolean YBF=R87(RP7,"Invoker|HasQuas")
local trigger t
set LP4="Zrv"
if YBF then
call QF7(RP7,"Invoker|HasQuas",false)
set t=Q67(RP7,"Invoker|QuasTrigger")
call Q47(GetHandleId(t))
call RN7(t)
endif
set t=null
endfunction
function YCF takes unit hn returns nothing
local integer RP7=GetHandleId(hn)
local integer Y3F=R47(RP7,"Invoker|Wex")
local integer Y6F=R47(RP7,"Invoker|Quas")
local integer YLF=R47(RP7,"Invoker|Exort")
local integer W9F=GetUnitAbilityLevel(hn,1093808472)
local integer WIF=GetUnitAbilityLevel(hn,1093808471)
local integer WDF=GetUnitAbilityLevel(hn,1093808470)
set LP4="InvokerCore_UpdateUpgrades"
call UnitRemoveAbility(hn,1093687108)
call UnitRemoveAbility(hn,1093686853)
call YAF(hn)
call UnitRemoveAbility(hn,1093686839)
if Y3F>0 then
call Z27(hn,1093687108)
call Z27(hn,1093686853)
call SetUnitAbilityLevel(hn,1093687108,Y3F*W9F)
call SetUnitAbilityLevel(hn,1093686853,Y3F*W9F)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),1093687108,false)
endif
if Y6F>0 then
call YZF(hn,Y6F*WIF)
endif
if YLF>0 then
call Z27(hn,1093686839)
call SetUnitAbilityLevel(hn,1093686839,YLF*WDF)
endif
endfunction
function Y1F takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and(GetLearnedSkill()==1093808472 or GetLearnedSkill()==1093808471 or GetLearnedSkill()==1093808470)then
call YCF(GetTriggerUnit())
if GetLearnedSkill()==1093808472 then
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+2,true)
call Q97((GetHandleId(GetTriggerUnit())),"WexLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808472)))
endif
if GetLearnedSkill()==1093808471 then
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+2,true)
call Q97((GetHandleId(GetTriggerUnit())),"QuasLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808471)))
endif
if GetLearnedSkill()==1093808470 then
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+2,true)
call Q97((GetHandleId(GetTriggerUnit())),"ExortLevel",(GetUnitAbilityLevel(GetTriggerUnit(),1093808470)))
endif
endif
return false
endfunction
function Y0F takes unit hn returns nothing
if GetUnitAbilityLevel(hn,1093687372)>0 then
call SetUnitAbilityLevel(hn,1093687372,GetUnitAbilityLevel(hn,1093808472))
endif
endfunction
function Y5F takes nothing returns nothing
local integer Y2F=0
local unit hn=GetTriggerUnit()
local integer WB7=GetHandleId(hn)
local integer Y_F=R47(WB7,"Invoker|Wex")
local integer Z4F=R47(WB7,"Invoker|Quas")
local integer Z7F=R47(WB7,"Invoker|Exort")
local integer WC7=R47(WB7,"Invoker|Current1")
local integer W37=R47(WB7,"Invoker|Current2")
set LP4="Y5F"
if Y_F==3 and Z4F==0 and Z7F==0 then
set Y2F=1
elseif Y_F==2 and Z4F==1 and Z7F==0 then
set Y2F=2
elseif Y_F==2 and Z4F==0 and Z7F==1 then
set Y2F=3
elseif Y_F==1 and Z4F==2 and Z7F==0 then
set Y2F=4
elseif Y_F==1 and Z4F==1 and Z7F==1 then
set Y2F=5
elseif Y_F==1 and Z4F==0 and Z7F==2 then
set Y2F=6
elseif Y_F==0 and Z4F==1 and Z7F==2 then
set Y2F=7
elseif Y_F==0 and Z4F==2 and Z7F==1 then
set Y2F=8
elseif Y_F==0 and Z4F==0 and Z7F==3 then
set Y2F=9
elseif Y_F==0 and Z4F==3 and Z7F==0 then
set Y2F=$A
endif
if YS[Y2F]==W37 then
return
endif
if GetUnitAbilityLevel(hn,1093808473)==1 or GetUnitAbilityLevel(hn,1093748565)==1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,false)
set W37=YS[Y2F]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,true)
else
if WC7!=0 and W37!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),WC7,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,false)
set WC7=W37
set W37=YS[Y2F]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),WC7,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,true)
elseif WC7==0 and W37!=0 then
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,false)
set WC7=W37
set W37=YS[Y2F]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),WC7,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,true)
else
set W37=YS[Y2F]
call SetPlayerAbilityAvailable(GetOwningPlayer(hn),W37,true)
endif
endif
call Q97(WB7,"Invoker|Current1",WC7)
call Q97(WB7,"Invoker|Current2",W37)
call Y0F(hn)
set hn=null
endfunction
function Z8F takes unit ZO7,integer Z9F,integer ZDF,integer ZEF returns nothing
local integer Orb1=0
local integer Orb2=0
local integer Orb3=0
local integer ZFF
local integer ZGF
local integer ZHF
local integer ZIF
local integer ZJF
local integer ZKF
local integer ZMF
local integer ZNF
local integer ZOF
set LP4="InvokerCore_UpdateBuffs"
call UnitRemoveAbility(ZO7,1093682254)
call UnitRemoveAbility(ZO7,1093682247)
call UnitRemoveAbility(ZO7,1093683544)
call UnitRemoveAbility(ZO7,1093683505)
call UnitRemoveAbility(ZO7,1093683504)
call UnitRemoveAbility(ZO7,1093683290)
call UnitRemoveAbility(ZO7,1093683523)
call UnitRemoveAbility(ZO7,1093683522)
call UnitRemoveAbility(ZO7,1093683524)
call UnitRemoveAbility(ZO7,1093808707)
call UnitRemoveAbility(ZO7,1093808708)
call UnitRemoveAbility(ZO7,1093808709)
call UnitRemoveAbility(ZO7,1093808710)
call UnitRemoveAbility(ZO7,1093808711)
call UnitRemoveAbility(ZO7,1093808712)
call UnitRemoveAbility(ZO7,1093808713)
call UnitRemoveAbility(ZO7,1093808714)
call UnitRemoveAbility(ZO7,1093808715)
if V1F(ZO7,GI4)==null then
set ZFF=1093682254
set ZGF=1093682247
set ZHF=1093683544
set ZIF=1093683505
set ZJF=1093683504
set ZKF=1093683290
set ZMF=1093683523
set ZNF=1093683522
set ZOF=1093683524
else
set ZFF=1093808707
set ZGF=1093808708
set ZHF=1093808709
set ZIF=1093808710
set ZJF=1093808711
set ZKF=1093808712
set ZMF=1093808713
set ZNF=1093808714
set ZOF=1093808715
endif
if Z9F==1 and ZDF==0 and ZEF==0 then
call Z27(ZO7,ZFF)
elseif Z9F==0 and ZDF==1 and ZEF==0 then
call Z27(ZO7,ZIF)
elseif Z9F==0 and ZDF==0 and ZEF==1 then
call Z27(ZO7,ZMF)
elseif Z9F==2 and ZDF==0 and ZEF==0 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZGF)
elseif Z9F==1 and ZDF==1 and ZEF==0 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZJF)
elseif Z9F==1 and ZDF==0 and ZEF==1 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZNF)
elseif Z9F==0 and ZDF==2 and ZEF==0 then
call Z27(ZO7,ZIF)
call Z27(ZO7,ZJF)
elseif Z9F==0 and ZDF==1 and ZEF==1 then
call Z27(ZO7,ZIF)
call Z27(ZO7,ZNF)
elseif Z9F==0 and ZDF==0 and ZEF==2 then
call Z27(ZO7,ZMF)
call Z27(ZO7,ZNF)
elseif Z9F==3 and ZDF==0 and ZEF==0 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZGF)
call Z27(ZO7,ZHF)
elseif Z9F==2 and ZDF==1 and ZEF==0 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZGF)
call Z27(ZO7,ZKF)
elseif Z9F==2 and ZDF==0 and ZEF==1 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZGF)
call Z27(ZO7,ZOF)
elseif Z9F==1 and ZDF==2 and ZEF==0 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZJF)
call Z27(ZO7,ZKF)
elseif Z9F==1 and ZDF==1 and ZEF==1 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZJF)
call Z27(ZO7,ZOF)
elseif Z9F==1 and ZDF==0 and ZEF==2 then
call Z27(ZO7,ZFF)
call Z27(ZO7,ZNF)
call Z27(ZO7,ZOF)
elseif Z9F==0 and ZDF==1 and ZEF==2 then
call Z27(ZO7,ZMF)
call Z27(ZO7,ZNF)
call Z27(ZO7,ZKF)
elseif Z9F==0 and ZDF==2 and ZEF==1 then
call Z27(ZO7,ZIF)
call Z27(ZO7,ZJF)
call Z27(ZO7,ZOF)
elseif Z9F==0 and ZDF==0 and ZEF==3 then
call Z27(ZO7,ZMF)
call Z27(ZO7,ZNF)
call Z27(ZO7,ZOF)
elseif Z9F==0 and ZDF==3 and ZEF==0 then
call Z27(ZO7,ZIF)
call Z27(ZO7,ZJF)
call Z27(ZO7,ZKF)
endif
endfunction
function D8F takes nothing returns nothing
local unit ZO7=IM4
local integer JZ7=GetHandleId(ZO7)
local integer ZPF=R47(JZ7,"Invoker|OrbFirst")
local integer ZQF=R47(JZ7,"Invoker|OrbSecond")
local integer ZRF=R47(JZ7,"Invoker|OrbThird")
local integer Z9F=0
local integer ZDF=0
local integer ZEF=0
set LP4="D8F"
if ZPF==1093808472 then
set Z9F=Z9F+1
elseif ZPF==1093808471 then
set ZDF=ZDF+1
elseif ZPF==1093808470 then
set ZEF=ZEF+1
endif
if ZQF==1093808472 then
set Z9F=Z9F+1
elseif ZQF==1093808471 then
set ZDF=ZDF+1
elseif ZQF==1093808470 then
set ZEF=ZEF+1
endif
if ZRF==1093808472 then
set Z9F=Z9F+1
elseif ZRF==1093808471 then
set ZDF=ZDF+1
elseif ZRF==1093808470 then
set ZEF=ZEF+1
endif
call Z8F(ZO7,Z9F,ZDF,ZEF)
set ZO7=null
endfunction
function ZSF takes nothing returns nothing
local unit hn=GetTriggerUnit()
local integer RP7=GetHandleId(hn)
local integer ZTF=GetSpellAbilityId()
local integer ZUF=R47(RP7,"Invoker|OrbFirst")
local integer ZVF=R47(RP7,"Invoker|OrbSecond")
local integer ZWF=R47(RP7,"Invoker|OrbThird")
local integer Y3F=0
local integer Y6F=0
local integer YLF=0
set LP4="ZSF"
set ZUF=ZVF
set ZVF=ZWF
set ZWF=ZTF
if ZUF==1093808472 then
set Y3F=Y3F+1
elseif ZUF==1093808471 then
set Y6F=Y6F+1
elseif ZUF==1093808470 then
set YLF=YLF+1
endif
if ZVF==1093808472 then
set Y3F=Y3F+1
elseif ZVF==1093808471 then
set Y6F=Y6F+1
elseif ZVF==1093808470 then
set YLF=YLF+1
endif
if ZWF==1093808472 then
set Y3F=Y3F+1
elseif ZWF==1093808471 then
set Y6F=Y6F+1
elseif ZWF==1093808470 then
set YLF=YLF+1
endif
call Q97(RP7,"Invoker|OrbFirst",ZUF)
call Q97(RP7,"Invoker|OrbSecond",ZVF)
call Q97(RP7,"Invoker|OrbThird",ZWF)
call Q97(RP7,"Invoker|Wex",Y3F)
call Q97(RP7,"Invoker|Quas",Y6F)
call Q97(RP7,"Invoker|Exort",YLF)
call Z8F(hn,Y3F,Y6F,YLF)
call YCF(hn)
call Y0F(hn)
endfunction
function ZXF takes nothing returns boolean
if GetSpellAbilityId()==1093808472 or GetSpellAbilityId()==1093808471 or GetSpellAbilityId()==1093808470 then
call ZSF()
elseif GetSpellAbilityId()==1093808473 or GetSpellAbilityId()==1093748565 then
call Y5F()
endif
return false
endfunction
function PN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PN8"
call AC7(YS[1])
call AC7(YS[2])
call AC7(YS[3])
call AC7(YS[4])
call AC7(YS[5])
call AC7(YS[6])
call AC7(YS[7])
call AC7(YS[8])
call AC7(YS[9])
call AC7(YS[$A])
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZXF))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function Y1F))
set t=null
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,15.,GetObjectName(1848653383))
call A17(1093687375,GetRandomReal(1,25))
call A17(1093687108,GetRandomReal(1,25))
call A17(1093686853,GetRandomReal(1,25))
call A17(1093686839,GetRandomReal(1,25))
call A17(1093808470,GetRandomReal(1,25))
call A17(1093808472,GetRandomReal(1,25))
call A17(1093808471,GetRandomReal(1,25))
call WFF()
call WSF()
call W3F()
call W_F()
call XNF()
call XCF()
call YDF()
call YMF()
call YRF()
call YXF()
endfunction
function ZYF takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
call CA7(GetEnumUnit(),RA4,1,7,1110458966)
call UnitMakeAbilityPermanent(GetEnumUnit(),true,RA4)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),RA4,false)
endfunction
function ZZF takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093814611)
local group g=ZI7()
set LP4="ZZF"
if DB8==1 then
set RA4=1093748278
elseif DB8==2 then
set RA4=1093748279
elseif DB8==3 then
set RA4=1093748275
elseif DB8==4 then
set RA4=1093748277
endif
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),925,Condition(function C17))
call ForGroup(g,function ZYF)
call ZH7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",CP7,"overhead"))
set CP7=null
set g=null
endfunction
function ZAF takes nothing returns boolean
if GetSpellAbilityId()==1093814611 then
call ZZF()
endif
return false
endfunction
function PP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PP8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZAF))
set t=null
endfunction
function ZBF takes nothing returns nothing
call DZ8(RB4,GetEnumUnit(),2)
call D38(RB4,GetEnumUnit(),1,FN7*75+25)
endfunction
function ZCF takes player p,unit m5,integer X37 returns nothing
local unit DA8=CreateUnit(p,1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer o6
local group g=ZI7()
set FN7=X37
set IM4=G7[GetPlayerId(p)]
call GroupEnumUnitsInRange(g,GetUnitX(m5),GetUnitY(m5),280,Condition(function LF7))
call GroupAddUnit(g,m5)
set RB4=DA8
call ForGroup(g,function ZBF)
call ZH7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",m5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl",m5,"origin"))
set DA8=null
set g=null
endfunction
function Z3F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local player p=QC7(RP7,"p")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local integer X37=R47(RP7,"Level")
local unit DT8=QA7(RP7,"Projectile")
local real x=GetUnitX(DT8)
local real y=GetUnitY(DT8)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real F4=$3E8*.035
local real l4=MZ7(x,y,Y5,Z5)
local real DSD=x+F4*Cos(l4*bj_DEGTORAD)
local real DTD=y+F4*Sin(l4*bj_DEGTORAD)
local boolean C38=R87(RP7,"Active")
set LP4="Z3F"
call SetUnitX(DT8,DSD)
call SetUnitY(DT8,DTD)
call SetUnitFacing(DT8,l4)
if N67(Y5,Z5,DSD,DTD)<=F4 then
if C38 then
call ZCF(p,m5,X37)
endif
call KillUnit(DT8)
call WF7(D18)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set DT8=null
return false
endfunction
function Z6F takes nothing returns nothing
local unit p5=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(p5,1093744944)
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=CreateUnit(GetOwningPlayer(p5),1747990353,GetUnitX(p5),GetUnitY(p5),MZ7(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5)))
local boolean C38=ZG7(GetSpellTargetUnit())==false
set LP4="Z6F"
call QF7(RP7,"Active",C38)
call QN7(RP7,"p",GetOwningPlayer(p5))
call Q97(RP7,"TargetIndex",WI7(m5))
call QG7(RP7,"Projectile",DT8)
call Q97(RP7,"Level",X37)
call TriggerRegisterTimerEvent(t,.035,true)
call TriggerAddCondition(t,Condition(function Z3F))
set t=null
set p5=null
set m5=null
set DT8=null
endfunction
function ZLF takes nothing returns boolean
if GetSpellAbilityId()==1093744944 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetTriggerUnit(),"weapon"))
else
call Z6F()
endif
endif
return false
endfunction
function PO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function ZLF))
set t=null
endfunction
function Z1F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=QA7(JZ7,"Hero")
local integer ZD8=(R47(JZ7,"Count"))
set LP4="Z1F"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
set ZD8=ZD8+1
call Q97(JZ7,"Count",ZD8)
endif
if(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and ZD8>1)or(GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT and BX8(GetSpellAbilityId())and GetSpellTargetUnit()==ZO7)then
if(GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT and ZD8>1)then
if A47(ZO7)==false then
call UnitRemoveAbility(ZO7,1093687119)
call UnitRemoveAbility(ZO7,1110454329)
call UnitRemoveAbility(ZO7,1110459472)
endif
call Q47(JZ7)
call RN7(t)
endif
elseif GetTriggerEventId()!=EVENT_PLAYER_UNIT_SPELL_EFFECT then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\BattleCryCaster.mdx",ZO7,"overhead"))
call Z27(ZO7,1093687119)
call SetUnitAbilityLevel(ZO7,1093687119,GetUnitAbilityLevel(ZO7,1093752648))
call UnitMakeAbilityPermanent(ZO7,true,1093687119)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093687119,false)
endif
set t=null
set ZO7=null
return false
endfunction
function Z0F takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
set LP4="Z0F"
call TriggerRegisterTimerEvent(t,25,false)
call TriggerRegisterTimerEvent(t,.31,false)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z1F))
call QG7(JZ7,"Hero",ZO7)
call Q97(JZ7,"Count",0)
set t=null
set ZO7=null
endfunction
function Z5F takes nothing returns boolean
if GetSpellAbilityId()==1093752648 and GetUnitTypeId(GetTriggerUnit())==1211117617 then
call Z0F()
endif
return false
endfunction
function PQ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PQ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z5F))
set t=null
endfunction
function Z2F takes nothing returns nothing
local location l
local unit Z47=GetTriggerUnit()
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real a
local real x2
local real y2
local integer X37=GetUnitAbilityLevel(Z47,1093687349)
local real BD7
local real Hk
local unit m5=null
set LP4="Z2F"
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if X37==1 then
set BD7=60
set Hk=.5
elseif X37==2 then
set BD7=$82
set Hk=1
elseif X37==3 then
set BD7=$C8
set Hk=1.5
elseif X37==4 then
set BD7=260
set Hk=2
endif
if GetSpellTargetUnit()!=null and ZG7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call K8E(Z47,m5,BD7,Hk,.52,x1,y1,x2,y2,$96,null,true,$640)
call RemoveLocation(l)
set l=null
set Z47=null
endfunction
function Z_F takes nothing returns boolean
if GetSpellAbilityId()==1093687349 then
call Z2F()
endif
return false
endfunction
function PR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PR8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z_F))
call AC7(1093687350)
set t=null
endfunction
function A4F takes nothing returns boolean
if(GetSpellAbilityId()==1093679413 or GetSpellAbilityId()==1093679447)and Y57(GetSpellTargetUnit())then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function PS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function A4F))
set t=null
endfunction
function A7F takes nothing returns nothing
local location l
local unit Z47=GetTriggerUnit()
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real a
local real x2
local real y2
local integer X37=GetUnitAbilityLevel(Z47,1093687351)
local real BD7
local real Hk
local unit m5=null
set LP4="A7F"
if GetSpellTargetUnit()!=null then
set l=GetUnitLoc(GetSpellTargetUnit())
else
set l=GetSpellTargetLoc()
endif
set x2=GetLocationX(l)
set y2=GetLocationY(l)
set a=Atan2(y2-y1,x2-x1)
set x2=x1+700*Cos(a)
set y2=y1+700*Sin(a)
if X37==1 then
set BD7=80
set Hk=.75
elseif X37==2 then
set BD7=$8C
set Hk=1.25
elseif X37==3 then
set BD7=$C8
set Hk=1.75
elseif X37==4 then
set BD7=260
set Hk=2.25
endif
if GetSpellTargetUnit()!=null and ZG7(GetSpellTargetUnit())then
set m5=GetSpellTargetUnit()
endif
call K8E(Z47,m5,BD7,Hk,.52,x1,y1,x2,y2,$96,null,true,$640)
call RemoveLocation(l)
set l=null
set Z47=null
endfunction
function A8F takes nothing returns boolean
if GetSpellAbilityId()==1093687351 then
call A7F()
endif
return false
endfunction
function PT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A8F))
call AC7(1093687350)
set t=null
endfunction
function A9F takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real r=GetHeroInt(m5,true)*5
local integer ADF=IMinBJ(R2I(r),R2I(GetUnitState(m5,UNIT_STATE_MANA)))
set LP4="A9F"
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)-ADF)
call D38(p5,m5,1,ADF)
call PY9("MBUR",p5,m5,1,1,1,1,.5)
call BO7("-"+I2S(ADF),3,m5,.023,82,82,$FF,$FF)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl",m5,"chest"))
set p5=null
set m5=null
endfunction
function AEF takes nothing returns boolean
if GetSpellAbilityId()==1093748789 and ZG7(GetSpellTargetUnit())==false then
call A9F()
endif
return false
endfunction
function PU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AEF))
set t=null
endfunction
function AFF takes nothing returns nothing
call IssueTargetOrderById(TX4,$D02BC,GetEnumUnit())
endfunction
function AGF takes nothing returns nothing
local unit CB9=GetTriggerUnit()
local real x=GetUnitX(CB9)
local real y=GetUnitY(CB9)
local unit FOE=CreateUnit(GetOwningPlayer(CB9),1697656901,x,y,0)
local group g=ZI7()
set LP4="AGF"
set TX4=FOE
call Z27(FOE,1093748551)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LV7))
call ForGroup(g,function AFF)
call ZH7(g)
call KillUnit(CB9)
call SetUnitAnimation(CB9,"death")
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadLargeDeathExplode\\UndeadLargeDeathExplode.mdl",x,y))
set CB9=null
set FOE=null
set g=null
endfunction
function AHF takes nothing returns boolean
if GetSpellAbilityId()==1093748808 then
call AGF()
endif
return false
endfunction
function PV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AHF))
call AC7(1093748551)
set t=null
endfunction
function AIF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67
local integer DB8=GetUnitAbilityLevel(CP7,1093815119)
local group DND=(LoadGroupHandle(C7,(JZ7),(22)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>0 and IsPlayerEnemy(GetOwningPlayer(GetEventDamageSource()),GetOwningPlayer(CP7)) then
if WO7(GetOwningPlayer(GetEventDamageSource()))and E38(GetEventDamage())then
set J67=G7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
if IsUnitInGroup(J67,DND)==false then
call GroupAddUnit(DND,J67)
call BE7(CP7,GetEventDamage())
if A47(J67)==false then
call DZ8(CP7,J67,.6*DB8)
call D38(CP7,J67,3,GetEventDamage())
endif
set J67=null
endif
endif
endif
else
call UnitRemoveAbility(CP7,1093815120)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function AJF takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,2.25,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function AIF))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveGroupHandle(C7,(JZ7),(22),(ZI7()))
call Z27(CP7,1093815120)
set CP7=null
set t=null
endfunction
function AKF takes nothing returns boolean
if GetSpellAbilityId()==1093815119 then
call AJF()
endif
return false
endfunction
function PW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AKF))
set t=null
endfunction
function AMF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ANF=GetHandleId(t)
local group g=QL7(ANF,"g")
set LP4="AMF"
call ZH7(g)
call Q47(ANF)
call RN7(t)
set t=null
set g=null
return false
endfunction
function AOF takes group g returns nothing
local trigger t=CreateTrigger()
local integer ANF=GetHandleId(t)
set LP4="Zuv"
call QP7(ANF,"g",g)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function AMF))
set t=null
endfunction
function APF takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit oA
local integer i=1
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real x2
local real y2
local real BD7
local real Hk
local integer X37=GetUnitAbilityLevel(Z47,1093810505)
local group g=ZI7()
set LP4="APF"
if X37==1 then
set Hk=1.5
set BD7=$C8
elseif X37==2 then
set Hk=1.8
set BD7=325
elseif X37==3 then
set Hk=2.25
set BD7=450
endif
loop
exitwhen i>16
set x2=x1+(500+X37*100)*Cos(22.5*i*bj_DEGTORAD)
set y2=y1+(500+X37*100)*Sin(22.5*i*bj_DEGTORAD)
call K8E(Z47,null,BD7,Hk,.52,x1,y1,x2,y2,$FA,g,false,775)
set i=i+1
endloop
call AOF(g)
set Z47=null
set oA=null
set g=null
endfunction
function AQF takes nothing returns boolean
if GetSpellAbilityId()==1093810505 then
call APF()
endif
return false
endfunction
function MC8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="MC8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AQF))
call AC7(1093687350)
set t=null
endfunction
function ARF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real JID=(LoadReal(C7,(GetHandleId(J67)),(715)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or JID<(TimerGetElapsed(V))then
call UnitRemoveAbility(J67,1093808696)
call UnitRemoveAbility(J67,1110459704)
endif
set t=null
set J67=null
return false
endfunction
function ASF takes unit J67 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call Z27(J67,1093808696)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,6.,false)
call TriggerAddCondition(t,Condition(function ARF))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(GetHandleId(J67)),(715),((5.9+(TimerGetElapsed(V)))*1.))
set t=null
endfunction
function ATF takes nothing returns nothing
if BP8(GetEnumUnit())==false then
call ASF(GetEnumUnit())
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093808696,false)
call D38(Y04,GetEnumUnit(),2,25+50*Y54)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",GetEnumUnit(),"chest"))
endfunction
function AUF takes nothing returns nothing
local group g=ZI7()
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093808694)
set LP4="AUF"
set IM4=CP7
set Y54=DB8
set Y04=CP7
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),425,Condition(function LF7))
call ForGroup(g,function ATF)
call ZH7(g)
set g=null
set CP7=null
endfunction
function AVF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="AVF"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitTimeScale(CP7,1)
set t=null
set CP7=null
return false
endfunction
function AWF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="AWF"
call TriggerRegisterTimerEvent(t,.3,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function AVF))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SetUnitTimeScale(CP7,2)
set t=null
set CP7=null
endfunction
function AXF takes nothing returns boolean
if GetSpellAbilityId()==1093808694 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call AUF()
else
call AWF()
endif
endif
return false
endfunction
function M38 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M38"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function AXF))
set t=null
endfunction
function AYF takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local integer DB8=R47(JZ7,"Level")
local real YU9=DB8*50
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="AYF"
call Z27(DA8,1093687628)
call SetUnitAbilityLevel(DA8,1093687628,DB8)
call IssueTargetOrderById(DA8,$D006B,J67)
if IsUnitType(J67,UNIT_TYPE_HERO) then
set YU9=YU9/2
endif
call D38(CP7,J67,3,YU9)
set CP7=null
set J67=null
set DA8=null
endfunction
function AZF takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=B27(ZO7,J67,1747988784,"AYF",$4B0)
local integer AAF=GetHandleId(t)
set LP4="AZF"
call Q97(AAF,"Level",GetUnitAbilityLevel(ZO7,1093687629))
set ZO7=null
set J67=null
set t=null
endfunction
function ABF takes nothing returns boolean
if GetSpellAbilityId()==1093687629 and ZG7(GetSpellTargetUnit())==false then
call AZF()
endif
return false
endfunction
function ME8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="ME8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ABF))
set t=null
endfunction
function ACF takes nothing returns nothing
local location l=GetSpellTargetLoc()
set LP4="ACF"
call BK7("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",GetLocationX(l),GetLocationY(l),2)
call TerrainDeformationRippleBJ(.3,false,l,0,300,100,.4,20)
call RemoveLocation(l)
set l=null
endfunction
function A3F takes nothing returns boolean
if GetSpellAbilityId()==1093678679 then
call ACF()
endif
return false
endfunction
function KT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A3F))
endfunction
function A6F takes itemtype ALF,integer A1F returns nothing
local group g
set LP4="Z5v"
set bj_stockPickedItemType=ALF
set bj_stockPickedItemLevel=A1F
set g=CreateGroup()
call GroupEnumUnitsOfType(g,"marketplace",bH)
call ForGroup(g,function UpdateEachStockBuildingEnum)
call DestroyGroup(g)
set g=null
endfunction
function A0F takes nothing returns nothing
local integer pickedItemId
local itemtype A5F
local integer A2F=0
local integer A_F=0
local integer A1F
set LP4="A0F"
set A1F=1
loop
if(bj_stockAllowedPermanent[A1F])then
set A_F=A_F+1
if(GetRandomInt(1,A_F)==1)then
set A5F=ITEM_TYPE_PERMANENT
set A2F=A1F
endif
endif
if(bj_stockAllowedCharged[A1F])then
set A_F=A_F+1
if(GetRandomInt(1,A_F)==1)then
set A5F=ITEM_TYPE_CHARGED
set A2F=A1F
endif
endif
if(bj_stockAllowedArtifact[A1F])then
set A_F=A_F+1
if(GetRandomInt(1,A_F)==1)then
set A5F=ITEM_TYPE_ARTIFACT
set A2F=A1F
endif
endif
set A1F=A1F+1
exitwhen A1F>$A
endloop
if(A_F==0)then
set A5F=null
return
endif
call A6F(A5F,A2F)
set A5F=null
endfunction
function B4F takes nothing returns nothing
call A0F()
call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function A0F)
endfunction
function B7F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer OO7=R47(JZ7,"itemId")
local real x=R77(JZ7,"x")
local real y=R77(JZ7,"y")
local player p=QC7(JZ7,"p")
local boolean B8F=R87(JZ7,"consumable")
local integer YT8=R47(JZ7,"charges")
local item B9F=CreateItem(OO7,x,y)
set LP4="B7F"
call SetItemPlayer(B9F,p,true)
call SetItemUserData(B9F,0)
if B8F then
call SetItemCharges(B9F,YT8)
endif
call Q47(JZ7)
call RN7(t)
set eY[512+GetPlayerId(p)]=3
set G47[288+GetPlayerId(p)]=B9F
set t=null
set p=null
return false
endfunction
function BDF takes integer OO7,real x,real y,player p,boolean B8F,integer YT8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call Q97(JZ7,"itemId",OO7)
call QD7(JZ7,"x",x*1.)
call QD7(JZ7,"y",y*1.)
call QN7(JZ7,"p",p)
call QF7(JZ7,"consumable",B8F)
call Q97(JZ7,"charges",YT8)
call TriggerAddCondition(t,Condition(function B7F))
call TriggerRegisterTimerEvent(t,0,false)
set eY[512+GetPlayerId(p)]=2
set t=null
endfunction
function BEF takes player p,unit MQ7,integer B58,item BFF returns item
local integer JA7
local item V0F
set JA7=0
loop
exitwhen JA7>5
set V0F=UnitItemInSlot(MQ7,JA7)
if V0F!=null and V0F!=BFF and OK7(V0F)==B58 and(GetItemPlayer(V0F)==p or B58==TC or B58==VC)then
set V0F=null
return UnitItemInSlot(MQ7,JA7)
endif
set JA7=JA7+1
endloop
set V0F=null
return null
endfunction
function BGF takes player p,unit MQ7,integer B58 returns item
local integer JA7
local item V0F
set JA7=0
loop
exitwhen JA7>5
set V0F=UnitItemInSlot(MQ7,JA7)
if(V0F!=null)and(OK7(V0F)==B58)and(GetItemPlayer(V0F)==p or B58==TC or B58==VC)then
set V0F=null
return UnitItemInSlot(MQ7,JA7)
endif
set JA7=JA7+1
endloop
set V0F=null
return null
endfunction
function BHF takes item Z4 returns integer
local integer n5
local integer i=1
set LP4="ItemMute2Real"
if Z4==null then
return-2
endif
set n5=GetItemTypeId(Z4)
loop
exitwhen i>DV
if AU[i]==n5 then
return SU[i]
endif
set i=i+1
endloop
return-1
endfunction
function BIF takes item Z4 returns boolean
return GetItemType(Z4)==ITEM_TYPE_POWERUP or GetItemType(Z4)==ITEM_TYPE_PURCHASABLE or GetItemType(Z4)==ITEM_TYPE_MISCELLANEOUS
endfunction
function BJF takes unit p5 returns nothing
local real x
local real y
set LP4="DeliverItems_GoHome"
if WM7(GetOwningPlayer(p5))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
call IssuePointOrderById(p5,$D0012,x,y)
call QF7(GetHandleId(p5),"aiCrow|Away",false)
endfunction
function BKF takes nothing returns nothing
local item M47=GetEnumItem()
if GetWidgetLife(M47)>0 and GetItemPlayer(M47)==G24 and TI4==0 and IsItemVisible(M47) then
set TI4=TI4+1
call UnitAddItem(G_4,M47)
endif
set M47=null
endfunction
function BMF takes nothing returns nothing
local item M47=GetEnumItem()
if GetWidgetLife(M47)>0 and GetItemPlayer(M47)==G24 and IsItemVisible(M47) then
call UnitAddItem(zh,M47)
endif
set M47=null
endfunction
function BNF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit HH9=QA7(RP7,"Courier")
local player p=QC7(RP7,"p")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local rect r=Rect(x-300,y-300,x+300,y+300)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call Q47(RP7)
call RN7(t)
set G24=p
set G_4=p5
set zh=HH9
call EnumItemsInRect(r,Condition(function WE7),function BMF)
else
if GetTriggerEvalCount(t)>9 then
call Q47(RP7)
call RN7(t)
set G24=p
set G_4=p5
set zh=HH9
call EnumItemsInRect(r,Condition(function WE7),function BMF)
else
set G24=p
set G_4=p5
set TI4=0
call EnumItemsInRect(r,Condition(function WE7),function BKF)
endif
endif
call RemoveRect(r)
set t=null
set p5=null
set HH9=null
set r=null
return false
endfunction
function BOF takes unit HH9,unit p5 returns nothing
local player p=GetOwningPlayer(p5)
local integer i
local item M47
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real x=GetUnitX(HH9)
local real y=GetUnitY(HH9)
local integer B58
set LP4="DeliverItems_DropOff"
if IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)then
set x=GetUnitX(p5)
set y=GetUnitY(p5)
endif
call TriggerRegisterDeathEvent(t,p5)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function BNF))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Courier",HH9)
call QN7(RP7,"p",p)
call QD7(RP7,"x",x*1.)
call QD7(RP7,"y",y*1.)
set i=0
loop
exitwhen i>5
set M47=UnitItemInSlot(HH9,i)
set B58=OK7(M47)
if M47!=null and GetItemPlayer(M47)==p and I59(M47)==false and(B58!=IA and B58!=JA and B58!=NA and B58!=QA and B58!=WA)then
call UnitRemoveItem(HH9,M47)
call SetItemPosition(M47,x,y)
endif
set i=i+1
endloop
set t=null
set M47=null
endfunction
function BPF takes trigger t returns nothing
local integer JZ7=GetHandleId(t)
local unit A08=QA7(JZ7,"Courier")
local unit ZO7=QA7(JZ7,"Source")
local real x
local real y
local real BQF
local real BRF
local real BSF
local real BTF
local real BUF
local real CFD
local real BVF
local real BWF=GetUnitX(ZO7)
local real BXF=GetUnitY(ZO7)
set LP4="MonitorHeroSpeedVector"
if(OQ7(ZO7)==false)then
set x=GetUnitX(ZO7)
set y=GetUnitY(ZO7)
set BTF=R77(JZ7,"DeliveryTargetX")
set BUF=R77(JZ7,"DeliveryTargetY")
call QD7(JZ7,"DeliveryTargetX",x*1.)
call QD7(JZ7,"DeliveryTargetY",y*1.)
set BSF=Atan2(y-BUF,x-BTF)
set BQF=SquareRoot((x-BTF)*(x-BTF)+(y-BUF)*(y-BUF))/.2
set BRF=GetUnitMoveSpeed(A08)
set CFD=N67(GetUnitX(ZO7),GetUnitY(ZO7),GetUnitX(A08),GetUnitY(A08))
set BVF=RAbsBJ(BSF*bj_RADTODEG-GetUnitFacing(A08))
if(CFD<BRF-BQF and BRF>BQF)or(CFD<RMaxBJ(BRF,BQF)and BVF>=90)then
else
set BWF=x+BQF*Cos(BSF)
set BXF=y+BQF*Sin(BSF)
endif
endif
call Q97(JZ7,"OnDelivery",(1))
call IssuePointOrderById(A08,$D0012,BWF,BXF)
set A08=null
set ZO7=null
set t=null
endfunction
function BYF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit HH9=QA7(JZ7,"Courier")
local unit CP7=QA7(JZ7,"Source")
local real x
local real y
local integer i
local player p=GetOwningPlayer(CP7)
local item M47
local integer O5=GetPlayerId(p)
set LP4="BYF"
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
if GetTriggerUnit()==CP7 then
call BJF(HH9)
endif
call Q47(JZ7)
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_TARGET_ORDER or GetTriggerEventId()==EVENT_UNIT_ISSUED_POINT_ORDER then
if(R47(JZ7,"OnDelivery"))==1 then
call Q97(JZ7,"OnDelivery",0)
elseif GetIssuedOrderId()!=$D0084 and GetIssuedOrderId()!=$D007A and(not QX4[O5])then
call RN7(t)
endif
elseif(QX4[O5]and IF4[O5])then
call BJF(HH9)
else
if N37(HH9,CP7)<$96 then
call Q47(JZ7)
call RN7(t)
if QX4[O5]and R47(GetHandleId(HH9),"aiCrow|CurrentOwner")==O5 then
set G77[432+O5]=2
call DCF(O5,G7[O5],false)
set G77[432+O5]=0
else
call BOF(HH9,CP7)
endif
call BJF(HH9)
else
if QX4[O5]then
set IM4=HH9
set i=P87(1000.,IM4,Condition(function DP8))
if(i==0)then
call BPF(t)
else
call IssuePointOrderByIdLoc(HH9,$D0012,PU7(KT4[O5]))
if N37(HH9,G7[O5])<800 and is(G7[O5])and h4[O5]==null then
call IssuePointOrderByIdLoc(G7[O5],$D0012,PU7(KT4[O5]))
endif
endif
else
call BPF(t)
endif
if(Bz>hq[880+O5])and WQ7(p)and(N37(HH9,CP7)<$708)then
call IssueImmediateOrderById(HH9,$D0084)
set hq[880+O5]=Bz+5
endif
endif
endif
set t=null
set HH9=null
set CP7=null
set M47=null
return false
endfunction
function BZF takes unit ZO7,boolean BAF returns nothing
local trigger t=null
local integer JZ7=0
local unit A08=GetSellingUnit()
local integer BBF=R47(GetHandleId(A08),"DeliveryIndex")
local integer O5=GetPlayerId(GetOwningPlayer(ZO7))
set LP4="DeliverItems"
if ZO7!=null then
if QX4[O5]and(R47(GetHandleId(A08),"aiCrow|CurrentOwner")==O5)then
set t=Q67(GetHandleId(A08),"aiCrow|DeliverTrigger")
if(t!=null and IsTriggerEnabled(t))then
set t=null
set A08=null
return
endif
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
if ZO7!=QA7(GetHandleId(A08),"DeliveryTarget"+I2S(BBF))and BAF then
set BBF=BBF+1
call Q97(GetHandleId(A08),"DeliveryIndex",BBF)
call QG7(GetHandleId(A08),"DeliveryTarget"+I2S(BBF),(ZO7))
endif
call QD7(JZ7,"DeliveryTargetX",(GetUnitX(ZO7)*1.))
call QD7(JZ7,"DeliveryTargetY",(GetUnitY(ZO7)*1.))
call IssueTargetOrderById(A08,$D0012,ZO7)
call TriggerRegisterDeathEvent(t,A08)
call TriggerRegisterDeathEvent(t,ZO7)
call TriggerRegisterUnitEvent(t,A08,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,A08,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,A08,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function BYF))
call QG7(JZ7,"Source",ZO7)
call QG7(JZ7,"Courier",A08)
call QI7(GetHandleId(A08),"aiCrow|DeliverTrigger",t)
endif
set t=null
set A08=null
endfunction
function BCF takes nothing returns nothing
local item M47=GetEnumItem()
local unit u=OH4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(M47)>0 and GetItemPlayer(M47)==p and IsItemVisible(M47) then
call SetItemPosition(M47,KU4[id],KV4[id])
call UnitAddItem(OI4,M47)
endif
set M47=null
set u=null
set p=null
endfunction
function B3F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit u=(LoadUnitHandle(C7,(JZ7),(53)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="B3F"
set OH4=u
set OI4=CP7
if WM7(GetOwningPlayer(u))then
call EnumItemsInRect(ND,Condition(function WE7),function BCF)
else
call EnumItemsInRect(OD,Condition(function WE7),function BCF)
endif
if GetTriggerEvalCount(t)==3 then
call KillUnit(u)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set u=null
set CP7=null
return false
endfunction
function B6F takes unit J4D returns nothing
local unit u=GetSoldUnit()
local integer i=0
local item M47
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
local trigger t
local integer JZ7
local unit CP7=GetSellingUnit()
set LP4="CollectItems"
if WM7(GetOwningPlayer(u))then
call RegionAddRect(r,ND)
else
call RegionAddRect(r,OD)
endif
if IsUnitInRegion(r,CP7)then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function B3F))
call SaveUnitHandle(C7,(JZ7),(53),(u))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
loop
exitwhen i>5
set M47=UnitItemInSlot(CP7,i)
if YC7(OK7(M47))==false and OK7(M47)!=T0 and I59(M47)==false then
call UnitRemoveItemFromSlot(CP7,i)
if IsUnitInRegion(r,CP7)and IsPlayerAlly(GetItemPlayer(M47),GetOwningPlayer(CP7)) then
set id=GetPlayerId(GetItemPlayer(M47))
call SetItemPosition(M47,KU4[id],KV4[id])
endif
endif
set i=i+1
endloop
endif
call RemoveRegion(r)
set u=null
set M47=null
set t=null
set r=null
set CP7=null
endfunction
function BLF takes nothing returns nothing
if GetUnitTypeId(GetSoldUnit())==1747990581 then
if G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null and A47(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])==false then
call BZF(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],true)
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993174 then
if G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call B6F(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
endif
call KillUnit(GetSoldUnit())
elseif GetUnitTypeId(GetSoldUnit())==1747993669 then
if G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
call BZF(QA7(GetHandleId(GetSellingUnit()),("DeliveryTarget"+I2S(R47(GetHandleId(GetSellingUnit()),"DeliveryIndex")-1))),false)
endif
call KillUnit(GetSoldUnit())
elseif EK8(GetUnitTypeId(GetSoldUnit()))then
if G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]!=null then
if A47(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]) and GetOwningPlayer(GetSoldUnit())==GetOwningPlayer(GetSellingUnit())and(RG7(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],"JustUseAegis")==false)then
call YP8(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))])
set D47=true
call ReviveHero(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),true)
set D47=false
call SetUnitState(G7[GetPlayerId(GetOwningPlayer(GetSoldUnit()))],UNIT_STATE_MANA,$2710)
set VF4[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]=IMaxBJ(0,VF4[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]-W9[EN8(GetHeroLevel(G7[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
call EZ8(GetOwningPlayer(GetSoldUnit()))
else
call SetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(GetSoldUnit()),PLAYER_STATE_RESOURCE_GOLD)+W9[EN8(GetHeroLevel(G7[GetPlayerId(GetOwningPlayer(GetSellingUnit()))]))])
endif
endif
call KillUnit(GetSoldUnit())
endif
endfunction
function B1F takes player p4,unit S4,integer C2E,integer C_E,integer GUD,integer GVD,integer GWD,integer L4E,integer L7E returns nothing
local item TS8
set LP4="CombineItems"
call DisableTrigger(SU4)
if C_E>0 then
set TS8=UnitItemInSlot(S4,0)
call OJ7(TS8)
endif
if GUD>0 then
set TS8=UnitItemInSlot(S4,1)
call OJ7(TS8)
endif
if GVD>0 then
set TS8=UnitItemInSlot(S4,2)
call OJ7(TS8)
endif
if GWD>0 then
set TS8=UnitItemInSlot(S4,3)
call OJ7(TS8)
endif
if L4E>0 then
set TS8=UnitItemInSlot(S4,4)
call OJ7(TS8)
endif
if L7E>0 then
set TS8=UnitItemInSlot(S4,5)
call OJ7(TS8)
endif
set GE7=C2E
set GD7=p4
set TS8=UnitAddItemById(S4,SU[C2E])
call SetItemPlayer(TS8,p4,true)
call SetItemUserData(TS8,0)
if IsPlayerInForce(p4,QW4)and(S4==QA7(GetHandleId(p4),"aiBearDummy"))then
set GM7=QA7(GetHandleId(p4),"MyBear")
if GM7!=null and GetUnitState(GM7,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GM7,"origin"))
endif
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",S4,"origin"))
endif
if OK7(TS8)==DH4 then
call SetItemCharges(TS8,6)
endif
call EnableTrigger(SU4)
if IsPlayerAlly(GetLocalPlayer(),p4) then
if C2E==R1 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(p4)]+(KY4[GetPlayerId((p4))])+"|r |c00ffff00"+GetObjectName(1848659032)+"|r")
elseif C2E==A5 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(p4)]+(KY4[GetPlayerId((p4))])+"|r |c00ffff00"+GetObjectName(1848659033)+"|r")
endif
endif
set G47[288+GetPlayerId(p4)]=TS8
set TS8=null
endfunction
function B0F takes player p,unit S4,integer BB8 returns boolean
local integer i
local integer x
local integer y
local integer array LDE
local boolean array LEE
local integer array LFE
local boolean array LGE
local boolean array LHE
local integer array LIE
local player LJE
local integer B5F=1
local integer k
local player array LKE
local integer m
local item LME
local item LNE
local item LOE
local item LPE
local item LQE
local item LRE
local player LSE
local player LTE
local player LUE
local player LVE
local player LWE
local player LXE
local integer LYE
local integer LZE
local integer LAE
local integer LBE
local integer LCE
local integer L3E
local integer L6E
local integer LLE
local integer L1E
local integer L0E
local integer L5E
local integer L2E
local boolean B2F=false
local boolean L_E=true
set LP4=LP4+"(CheckRecipes)"
set LME=UnitItemInSlot(S4,0)
set LNE=UnitItemInSlot(S4,1)
set LOE=UnitItemInSlot(S4,2)
set LPE=UnitItemInSlot(S4,3)
set LQE=UnitItemInSlot(S4,4)
set LRE=UnitItemInSlot(S4,5)
set LSE=GetItemPlayer(LME)
set LTE=GetItemPlayer(LNE)
set LUE=GetItemPlayer(LOE)
set LVE=GetItemPlayer(LPE)
set LWE=GetItemPlayer(LQE)
set LXE=GetItemPlayer(LRE)
set LYE=GetItemUserData(LME)
set LZE=GetItemUserData(LNE)
set LAE=GetItemUserData(LOE)
set LBE=GetItemUserData(LPE)
set LCE=GetItemUserData(LQE)
set L3E=GetItemUserData(LRE)
set L6E=OK7(LME)
set LLE=OK7(LNE)
set L1E=OK7(LOE)
set L0E=OK7(LPE)
set L5E=OK7(LQE)
set L2E=OK7(LRE)
if(GetPlayerSlotState((p))==PLAYER_SLOT_STATE_LEFT)then
set B5F=5
set B2F=true
endif
set LKE[1]=p
if B2F then
set k=2
set m=1
loop
exitwhen k>B5F
if WM7(p)then
if p!=Y7[m]then
set LKE[k]=Y7[m]
set k=k+1
endif
else
if p!=Z7[m]then
set LKE[k]=Z7[m]
set k=k+1
endif
endif
set m=m+1
endloop
endif
set k=1
loop
exitwhen k>B5F
set LJE=LKE[k]
set i=0
if LME!=null and LYE==1 and(LSE==LJE or PJ4 or(GetPlayerSlotState((LSE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L6E
else
set LDE[i+1]=0
endif
set i=1
if LNE!=null and LZE==1 and(LTE==LJE or PJ4 or(GetPlayerSlotState((LTE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=LLE
else
set LDE[i+1]=0
endif
set i=2
if LOE!=null and LAE==1 and(LUE==LJE or PJ4 or(GetPlayerSlotState((LUE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L1E
else
set LDE[i+1]=0
endif
set i=3
if LPE!=null and LBE==1 and(LVE==LJE or PJ4 or(GetPlayerSlotState((LVE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L0E
else
set LDE[i+1]=0
endif
set i=4
if LQE!=null and LCE==1 and(LWE==LJE or PJ4 or(GetPlayerSlotState((LWE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L5E
else
set LDE[i+1]=0
endif
set i=5
if LRE!=null and L3E==1 and(LXE==LJE or PJ4 or(GetPlayerSlotState((LXE))==PLAYER_SLOT_STATE_LEFT))then
set LDE[i+1]=L2E
else
set LDE[i+1]=0
endif
set LDE[0]=BB8
set i=1
loop
exitwhen i>(FP4)
set LFE[0]=FI4[i]
set LFE[1]=FJ4[i]
set LFE[2]=FK4[i]
set LFE[3]=FM4[i]
set LFE[4]=FN4[i]
if L_E then
set LGE[0]=true
set LGE[1]=true
set LGE[2]=true
set LGE[3]=true
set LGE[4]=true
set LGE[5]=true
set LGE[6]=true
set LEE[0]=true
set LEE[1]=true
set LEE[2]=true
set LEE[3]=true
set LEE[4]=true
set LEE[5]=true
set LEE[6]=true
set LIE[0]=0
set LIE[1]=0
set LIE[2]=0
set LIE[3]=0
set LIE[4]=0
set LIE[5]=0
set LIE[6]=0
set L_E=false
endif
set LHE[0]=false
set LHE[1]=false
set LHE[2]=false
set LHE[3]=false
set LHE[4]=false
set x=0
loop
exitwhen x==5
if LFE[x]==0 then
set LHE[x]=true
else
set y=0
loop
exitwhen y==7
if LDE[y]==LFE[x]and LEE[y]and LGE[x]then
set LEE[y]=false
set LGE[x]=false
set LHE[x]=true
set LIE[y]=1
set y=7
set L_E=true
else
set y=y+1
endif
endloop
endif
if LHE[x] then
set x=x+1
else
set x=5
endif
endloop
if LHE[0]and LHE[1]and LHE[2]and LHE[3]and LHE[4]then
call B1F(LJE,S4,FO4[i],LIE[1],LIE[2],LIE[3],LIE[4],LIE[5],LIE[6])
set i=FP4+2
else
set i=i+1
endif
endloop
set EL=LIE[0]==1
if i==(FP4+2)then
set LME=null
set LNE=null
set LOE=null
set LPE=null
set LQE=null
set LRE=null
return true
endif
set k=k+1
endloop
set LME=null
set LNE=null
set LOE=null
set LPE=null
set LQE=null
set LRE=null
return false
endfunction
function B_F takes player p4,unit S4,integer BB8 returns boolean
local boolean L98
set LP4=LP4+"(eve)"
set EL=false
set L98=B0F(p4,S4,BB8)
return L98
endfunction
function C4F takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IM4)) and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetPlayerAlliance(GetOwningPlayer(GetFilterUnit()),GetOwningPlayer(IM4),ALLIANCE_SHARED_CONTROL)and GetOwningPlayer(IM4)!=GetOwningPlayer(GetFilterUnit())and IsUnitIllusion(GetFilterUnit())==false and A47(GetFilterUnit())==false then
if OI7(GetFilterUnit()) then
set IG4=IG4+1
set IN4=GetFilterUnit()
endif
endif
return false
endfunction
function C7F takes nothing returns boolean
if IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IM4)) and GetUnitAbilityLevel(GetFilterUnit(),1097625443)==0 and UnitInventorySize(GetFilterUnit())>1 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitIllusion(GetFilterUnit())==false and A47(GetFilterUnit())==false then
if GetOwningPlayer(IM4)==GetOwningPlayer(GetFilterUnit())then
if IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) then
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 then
set IN4=GetFilterUnit()
endif
elseif IsUnitType(IN4,UNIT_TYPE_HERO)==false then
set IN4=GetFilterUnit()
endif
endif
endif
return false
endfunction
function C8F takes unit S4,integer C9F returns unit
local group g=ZI7()
set LP4="FindBuyer"
set IM4=S4
set IN4=null
call GroupEnumUnitsInRange(g,GetUnitX(eH),GetUnitY(eH),$514+C9F,Condition(function C7F))
if IN4==null then
set IG4=0
call ZH7(g)
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(eH),GetUnitY(eH),$44C+C9F,Condition(function C4F))
if IG4>1 then
set IN4=null
endif
endif
call ZH7(g)
set g=null
return IN4
endfunction
function CDF takes player p4,unit S4,unit CEF,integer BB8,real x,real y,integer U3F,integer CFF returns nothing
local unit CGF
local item UUF=null
set LP4=LP4+"(CheckFuse)"
set eH=CEF
if GetUnitPointValue(S4)==$C8 then
set CGF=C8F(S4,0)
if CGF==null then
set CGF=C8F(S4,300)
endif
else
set CGF=S4
endif
set GE7=BB8
set GD7=p4
if CGF==null or B_F(p4,CGF,BA8(BB8))==false or EL==false then
if B_8(BA8(BB8))then
if BXE(CGF)==0 or CGF==null then
call BDF(RU[BB8],x,y,p4,true,U3F)
else
set LP4=LP4+"[CFa]"
set UUF=UnitAddItemById(CGF,SU[BB8])
call SetItemCharges(UUF,U3F)
call SetItemPlayer(UUF,p4,true)
call SetItemUserData(UUF,CFF)
endif
elseif B28(BA8(BB8))then
if CGF==null or(BXE(CGF)==0 and PH7(CGF,SU[BB8])==null)then
call BDF(RU[BB8],x,y,p4,true,C48(BB8))
else
set LP4=LP4+"[CFb]"
set UUF=CreateItem(RU[BB8],x,y)
call SetItemPlayer(UUF,p4,true)
call SetItemUserData(UUF,CFF)
call SetItemCharges(UUF,C48(BB8))
call UnitAddItem(CGF,UUF)
endif
else
if BXE(CGF)==0 or CGF==null then
call BDF(RU[BB8],x,y,p4,false,0)
else
set LP4=LP4+"[CFc]"
set UUF=UnitAddItemById(CGF,SU[BB8])
call SetItemPlayer(UUF,p4,true)
call SetItemUserData(UUF,0)
endif
endif
endif
if UUF!=null then
set G47[288+GetPlayerId(p4)]=UUF
endif
set CGF=null
set UUF=null
endfunction
function CHF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit CIF=QA7(RP7,"Tower")
set LP4="CHF"
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call UnitRemoveAbility(CIF,1093744466)
call UnitRemoveAbility(CIF,1093809222)
endif
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
set t=null
set CIF=null
return false
endfunction
function CJF takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>.5 and IsUnitAlly(GetFilterUnit(),Sh) and GetOwningPlayer(GetFilterUnit())!=B7 and GetUnitTypeId(GetFilterUnit())!=1852010352 and GetUnitTypeId(GetFilterUnit())!=1848657482 and GetUnitTypeId(GetFilterUnit())!=1848657481 and GetUnitTypeId(GetFilterUnit())!=1848657462 and GetUnitTypeId(GetFilterUnit())!=1848657480)!=null
endfunction
function CKF takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit S4=GetEnumUnit()
local string s
set LP4="CKF"
call UnitAddAbility(S4,1093744466)
call UnitAddAbility(S4,1093809222)
if WM7(Sh)then
set s="effects\\GlyphSent.mdx"
else
set s="effects\\GlyphScourge.mdx"
endif
call QH7(RP7,"FX",AddSpecialEffectTarget(s,S4,"origin"))
call QG7(RP7,"Tower",S4)
call TriggerRegisterUnitEvent(t,S4,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,E27,false)
call TriggerAddCondition(t,Condition(function CHF))
set t=null
set S4=null
endfunction
function CMF takes unit CNF,player p returns nothing
local integer i
if WM7(p)then
set i=1
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=2
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=3
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=4
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=5
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
else
set i=7
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=8
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=9
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=$A
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
set i=$B
if CNF!=KT4[i]then
call IssueImmediateOrderById(KT4[i],$D0114)
endif
endif
endfunction
function COF takes nothing returns nothing
local group g
local unit CNF=GetTriggerUnit()
local player p=GetOwningPlayer(CNF)
set LP4="COF"
if(WM7(p)and Th==false)or(WM7(p)==false and Uh==false)then
set g=ZI7()
set Sh=p
call GroupEnumUnitsInRange(g,0,0,$2EE0,Condition(function CJF))
call ForGroup(g,function CKF)
call ZH7(g)
if WM7(p)then
set Th=true
call CMF(CNF,p)
set Th=false
call QD7(Q_4,"AI|Glyph|Sent",Bz+300.)
else
set Uh=true
call CMF(CNF,p)
set Uh=false
call QD7(Q_4,"AI|Glyph|Scrg",Bz+300.)
endif
endif
set g=null
set CNF=null
set p=null
endfunction
function CPF takes nothing returns nothing
if GetSpellAbilityId()==1093743665 or GetSpellAbilityId()==1093752649 then
call COF()
endif
endfunction
function CQF takes player p,integer BB8 returns nothing
local integer i=GetPlayerId(p)
set LP4="ItemStats_Track"
if BB8==NC then
set Zh[i]=Zh[i]+1
elseif BB8==PC then
set Zh[i]=Zh[i]+1
elseif BB8==QC then
set Zh[i]=Zh[i]+3
elseif BB8==TC then
set Zh[i]=Zh[i]+2
set H44[i]=H44[i]+2
elseif BB8==VC then
set Zh[i]=Zh[i]+2
set H44[i]=H44[i]+2
elseif BB8==WC then
set Zh[i]=Zh[i]+1
elseif BB8==XC then
set Zh[i]=Zh[i]+1
elseif BB8==BC then
set Zh[i]=Zh[i]+2
elseif BB8==OC then
set Zh[i]=Zh[i]+2
elseif BB8==CC then
set Zh[i]=Zh[i]+2
endif
endfunction
function CRF takes unit CSF,unit CTF returns boolean
local integer BB8
if GetUnitTypeId(CTF)==1311788365 then
return true
endif
if(CSF==JB4 or CSF==JA4)and IsUnitAlly(CTF,Z7[0])then
return false
elseif(CSF==I04 or CSF==IZ4)and IsUnitAlly(CTF,Y7[0])then
return false
endif
set BB8=Y17(CTF)
if BB8==TC or BB8==LV or BB8==LC then
return true
endif
return false
endfunction
function CUF takes unit CEF,unit CVF returns real
if CEF==IZ4 or CEF==I34 or CEF==IL4 or CEF==I04 or CEF==I_4 or CEF==J44 or CEF==J74 or CEF==J84 or CEF==J94 or CEF==JD4 then
return KU4[GetPlayerId(GetOwningPlayer(CVF))]
elseif CEF==JA4 or CEF==zs or CEF==Zs or CEF==JB4 or CEF==eS or CEF==oS or CEF==rS or CEF==aS or CEF==nS or CEF==VS then
return KU4[GetPlayerId(GetOwningPlayer(CVF))]
elseif CEF==A24 or CEF==B74 then
return-7133.
elseif CEF==A_4 or CEF==B44 then
return 7207.
endif
return GetUnitX(CVF)
endfunction
function CWF takes unit CEF,unit CVF returns real
if CEF==IZ4 or CEF==I34 or CEF==IL4 or CEF==I04 or CEF==I_4 or CEF==J44 or CEF==J74 or CEF==J84 or CEF==J94 or CEF==JD4 then
return KV4[GetPlayerId(GetOwningPlayer(CVF))]
elseif CEF==JA4 or CEF==zs or CEF==Zs or CEF==JB4 or CEF==eS or CEF==oS or CEF==rS or CEF==aS or CEF==nS or CEF==VS then
return KV4[GetPlayerId(GetOwningPlayer(CVF))]
elseif CEF==A24 or CEF==B74 then
return 4317.
elseif CEF==A_4 or CEF==B44 then
return-4243.
endif
return GetUnitY(CVF)
endfunction
function CXF takes unit CEF,unit CVF returns real
if CEF==IZ4 or CEF==I34 or CEF==IL4 or CEF==I04 or CEF==I_4 or CEF==J44 or CEF==J74 or CEF==J84 or CEF==J94 or CEF==JD4 then
return GetRectCenterX(L9)
elseif CEF==JA4 or CEF==zs or CEF==Zs or CEF==JB4 or CEF==eS or CEF==oS or CEF==rS or CEF==aS or CEF==nS or CEF==VS then
return GetRectCenterX(C9)
endif
return GetUnitX(CVF)
endfunction
function CYF takes unit CEF,unit CVF returns real
if CEF==IZ4 or CEF==I34 or CEF==IL4 or CEF==I04 or CEF==I_4 or CEF==J44 or CEF==J74 or CEF==J84 or CEF==J94 or CEF==JD4 then
return GetRectCenterY(L9)
elseif CEF==JA4 or CEF==zs or CEF==Zs or CEF==JB4 or CEF==eS or CEF==oS or CEF==rS or CEF==aS or CEF==nS or CEF==VS then
return GetRectCenterY(C9)
endif
return GetUnitY(CVF)
endfunction
function CZF takes nothing returns nothing
local unit u=GetSoldUnit()
local player p=GetOwningPlayer(u)
local integer BB8=Y17(u)
local real x
local real y
set LP4="CZF"
if CRF(GetSellingUnit(),u)then
call AV7(p,(GetObjectName((1848652359))))
if IsUnitAlly(u,Y7[0])then
set p=Z7[0]
else
set p=Y7[0]
endif
set x=CXF(GetSellingUnit(),u)
set y=CYF(GetSellingUnit(),u)
call BDF(RU[Y17(u)],x,y,p,true,C48(Y17(u)))
else
call CQF(p,BA8(BB8))
if SU[BB8]==0 then
call AV7(p,GetObjectName(1848652360))
else
set x=CUF(GetSellingUnit(),u)
set y=CWF(GetSellingUnit(),u)
if BB8==BC then
call CDF(p,u,GetSellingUnit(),BA8(BB8),x,y,2,0)
else
call CDF(p,u,GetSellingUnit(),BA8(BB8),x,y,0,0)
endif
endif
endif
call UnitAddAbility(u,1097625443)
call ShowUnit(u,true)
call UnitApplyTimedLife(u,1112820806,2)
set u=null
set p=null
endfunction
function CAF takes nothing returns boolean
if VG4==false then
if GetUnitPointValue(GetSoldUnit())>=$C8 then
call CZF()
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(GetSoldUnit()))or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
if GetUnitTypeId(GetSoldUnit())==1747989062 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658005)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989329 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,20,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658759)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747990326 then
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658767)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989059 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658768)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747989060 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658769)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993153 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848658772)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747988807 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659010)+"|r")
elseif GetUnitTypeId(GetSoldUnit())==1747993651 then
call PingMinimapEx(GetUnitX(GetSoldUnit()),GetUnitY(GetSoldUnit()),3,$FF,$FF,$FF,false)
call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,4,P[GetPlayerId(GetOwningPlayer(GetSoldUnit()))]+(KY4[GetPlayerId((GetOwningPlayer(GetSoldUnit())))])+"|r |c00ffff00"+GetObjectName(1848659024)+"|r")
endif
endif
else
call BLF()
endif
endif
return false
endfunction
function CBF takes nothing returns boolean
if GetSpellAbilityId()==1093751369 or GetSpellAbilityId()==1093681733 then
if A47(GetTriggerUnit())==false then
call BWE(GetTriggerUnit())
endif
endif
return false
endfunction
function RestrictedItems_UpdateMeleeRange_All2 takes nothing returns nothing
call BWE(IM4)
endfunction
function CCF takes unit ZO7,item M47 returns boolean
local unit u=ZO7
local integer z8=GetUnitTypeId(u)
local integer B58=OK7(M47)
local real x
local real y
local boolean C3F=true
set LP4="eGe"
set x=GetUnitX(u)
set y=GetUnitY(u)
set GD7=GetItemPlayer(M47)
if B58==UZ then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call AU7(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[CZ])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if B58==LL and GetItemCharges(M47)==0 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[E1])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if B58==RB and GetItemCharges(M47)==0 then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[VB])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
call DisableTrigger(H84)
if(B58==G6 or B58==F6 or B58==H6)and(PG7(u,SU[G6],M47)!=null or PG7(u,SU[F6],M47)!=null or PG7(u,SU[H6],M47)!=null)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848652364))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if(B58==ZA)and(PG7(u,SU[ZA],M47)!=null or PG7(u,SU[BA],M47)!=null)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848657996))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set C3F=false
endif
if C3F and(B58==BA)and(PG7(u,SU[ZA],M47)!=null or PG7(u,SU[BA],M47)!=null)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848657996))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set C3F=false
endif
if(B58==DK4 or B58==DJ4 or B58==DN4 or B58==DM4)and(PG7(u,SU[DK4],M47)!=null or PG7(u,SU[DJ4],M47)!=null or PG7(u,SU[DN4],M47)!=null or PG7(u,SU[DM4],M47)!=null)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848652355))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if(B58==A5 and IsPlayerEnemy(GetItemPlayer(M47),GetOwningPlayer(u)))then
set IQ4=GetItemPlayer(M47)
call OJ7(M47)
set HZ4=UnitAddItemById(u,SU[B5])
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if(B58==T0)and(OH7(u)or LR7(u))then
if OH7(u)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848652363))))
endif
set IQ4=GetItemPlayer(M47)
set IG4=GetItemCharges(M47)
call RemoveItem(M47)
if B58==T0 then
set HZ4=CreateItem(RU[B58],GetRectCenterX(MD),GetRectCenterY(MD))
endif
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
if B58==T0 then
call SetItemCharges(HZ4,IG4)
endif
endif
if B58==QW and(z8==1215723364 or z8==1429221446)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848652362))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if C3F and(B58==ZA or B58==BA)and(z8==1211119187)then
call AV7(GetOwningPlayer(u),(GetObjectName((1848652362))))
set IQ4=GetItemPlayer(M47)
call RemoveItem(M47)
set HZ4=CreateItem(RU[B58],x,y)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set C3F=false
endif
if(B58==A1 or B58==D0 or B58==E0 or B58==J0 or B58==N0 or B58==O0)and z8==1429221443 then
call DisplayTimedTextToPlayer(GetOwningPlayer(u),0,D9,$A,"|c00ff0303"+(GetObjectName((1848652368)))+"|r")
endif
call EnableTrigger(H84)
if C3F then
call BUE(ZO7,M47)
endif
set u=null
set M47=null
return false
endfunction
function C6F takes integer B58 returns boolean
return B58==J1 or B58==DM4 or B58==DN4 or B58==DP4 or B58==H1 or B58==DJ4 or B58==DK4 or B58==DO4 or B58==LV or B58==EW or B58==N6 or B58==S6
endfunction
function CLF takes integer B58 returns boolean
return B58==LV or B58==EW
endfunction
function C1F takes unit Z47,item TS8 returns boolean
local item ON7=TS8
local integer B58=OM7(ON7)
local integer C0F=0
local boolean L98=false
local integer C5F=OP7(ON7)
local boolean C2F=false
if IsUnitType(Z47,UNIT_TYPE_HERO) then
if B58==J1 then
set C0F=H1
endif
if B58==S6 then
set C0F=N6
endif
if B58==DM4 then
set C0F=DJ4
endif
if B58==DN4 then
set C0F=DK4
endif
if B58==DP4 then
set C0F=DO4
endif
if B58==EW then
set C0F=LV
endif
if C5F==EW then
set C0F=LV
set C2F=true
endif
if C0F!=0 then
set IQ4=GetItemPlayer(ON7)
call OJ7(ON7)
if C2F then
set HZ4=UnitAddItemById(Z47,AU[C0F])
else
set HZ4=UnitAddItemById(Z47,SU[C0F])
endif
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set L98=true
endif
else
if B58==H1 then
set C0F=J1
endif
if B58==N6 then
set C0F=S6
endif
if B58==DJ4 then
set C0F=DM4
endif
if B58==DK4 then
set C0F=DN4
endif
if B58==DO4 then
set C0F=DP4
endif
if B58==LV then
set C0F=EW
endif
if C5F==LV then
set C0F=EW
set C2F=true
endif
if C0F!=0 then
set IQ4=GetItemPlayer(ON7)
call OJ7(ON7)
if C2F then
set HZ4=UnitAddItemById(Z47,AU[C0F])
else
set HZ4=UnitAddItemById(Z47,SU[C0F])
endif
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set L98=true
endif
endif
set ON7=null
return L98
endfunction
function C_F takes unit Z47,item TS8 returns boolean
if C6F(OM7(TS8))or CLF(OP7(TS8))then
return C1F(Z47,TS8)
endif
return false
endfunction
function L4F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit CGF=QA7(RP7,"Unit")
local integer L7F=R47(RP7,"EventType")
local integer BB8=R47(RP7,"indexId")
local boolean L8F=R87(RP7,"Temporary")
local item TS8
local player p=GetOwningPlayer(CGF)
local player L9F
local integer U3F
local boolean LDF=false
local item UUF
local integer n5
local integer D7F
local integer newCharges
local item Z4
local integer targetCount
local item LEF
local boolean LFF=false
local integer BU7
call DisableTrigger(SU4)
if L8F then
set LEF=null
set L9F=QC7(RP7,"p")
set U3F=R47(RP7,"charges")
else
set TS8=Q27(RP7,"Item")
set LEF=TS8
set L9F=GetItemPlayer(TS8)
set U3F=GetItemCharges(TS8)
endif
set GE7=BB8
set GD7=L9F
set eY[512+GetPlayerId(GD7)]=1
if L8F then
set G47[288+GetPlayerId(L9F)]=null
else
set G47[288+GetPlayerId(L9F)]=TS8
endif
if L8F==false and TS8==null then
call FlushChildHashtable(C7,(RP7))
call RN7(t)
call EnableTrigger(SU4)
set t=null
set CGF=null
set p=null
return false
endif
if L7F==1 then
if p!=L9F and GetUnitTypeId(CGF)==1852010352 then
set LP4=LP4+"a"
if B28(BA8(BB8))or B_8(BA8(BB8))then
set LDF=true
endif
if IsPlayerEnemy(p,L9F)then
call BDF(RU[BB8],KU4[GetPlayerId(p)],KV4[GetPlayerId(p)],L9F,LDF,U3F)
else
call BDF(RU[BB8],KU4[GetPlayerId(L9F)],KV4[GetPlayerId(L9F)],L9F,LDF,U3F)
endif
call AV7(p,(GetObjectName((1848656978))))
if L8F==false then
set LFF=true
call OJ7(TS8)
endif
elseif PJ4==false and L8F==false and GetItemType(TS8)==ITEM_TYPE_CAMPAIGN and BHF(TS8)!=0 and(p==L9F or(GetPlayerSlotState((L9F))==PLAYER_SLOT_STATE_LEFT))then
set LP4=LP4+"b"
if B_8(BB8)then
set LDF=true
else
set LDF=false
endif
if(GetPlayerSlotState((L9F))==PLAYER_SLOT_STATE_LEFT)and YC7(BB8)then
else
call OJ7(TS8)
set LFF=true
set UUF=UnitAddItemById(CGF,SU[BB8])
set LEF=UUF
call SetItemPlayer(UUF,L9F,false)
call SetItemUserData(UUF,0)
if LDF then
call SetItemCharges(UUF,U3F)
endif
endif
elseif PJ4==false and L8F==false and GetItemType(TS8)==ITEM_TYPE_PERMANENT and p!=L9F and AU[OK7(TS8)]!=0 and(GetPlayerSlotState((L9F))==PLAYER_SLOT_STATE_LEFT)==false then
set LP4=LP4+"c"
if B_8(BB8)then
set LDF=true
else
set LDF=false
endif
call OJ7(TS8)
set LFF=true
set UUF=UnitAddItemById(CGF,AU[BB8])
set LEF=UUF
call SetItemPlayer(UUF,L9F,false)
call SetItemUserData(UUF,0)
if LDF then
call SetItemCharges(UUF,U3F)
endif
elseif L8F==false and GetItemType(TS8)==ITEM_TYPE_PERMANENT and B08(TS8)and IsUnitType(CGF,UNIT_TYPE_HERO) then
set LP4=LP4+"d"
set n5=I19(CGF)
set D7F=I09(CGF)
if D7F!=0 then
call UnitAddAbility(CGF,D7F)
call UnitMakeAbilityPermanent(CGF,true,D7F)
call SetPlayerAbilityAvailable(p,D7F,false)
if GetUnitTypeId(CGF)==1211117653 then
set IM4=CGF
call ExecuteFunc("D8F")
elseif GetUnitTypeId(CGF)==1215130471 then
set IM4=CGF
call ExecuteFunc("HAD")
endif
endif
set BU7=B68(CGF,4)
if n5==GW4 and HP4[BU7]!=0 then
call UnitRemoveAbility(CGF,HT4[BU7])
call UnitAddAbility(CGF,HU4[BU7])
call SetPlayerAbilityAvailable(p,HU4[BU7],false)
endif
if BB8!=n5 then
call OJ7(TS8)
set UUF=UnitAddItemById(CGF,SU[n5])
set LEF=UUF
call SetItemPlayer(UUF,L9F,false)
call SetItemUserData(UUF,1)
endif
elseif L8F==false and GetItemType(TS8)==ITEM_TYPE_ARTIFACT then
set LP4=LP4+"e"
call DisableTrigger(H84)
set Z4=BEF(L9F,CGF,BB8,TS8)
if Z4==null then
else
call SetItemCharges(Z4,U3F+GetItemCharges(Z4))
call OJ7(TS8)
set LEF=null
endif
call EnableTrigger(H84)
elseif L8F and B28(BA8(BB8))then
set LP4=LP4+"f"
call DisableTrigger(H84)
if BXE(CGF)==0 and BGF(L9F,CGF,BB8)==null then
call AV7(p,(GetObjectName((1848652367))))
call BDF(RU[(BB8)],((R77(RP7,"x"))*1.),((R77(RP7,"y"))*1.),(L9F),(true),(U3F))
else
set Z4=BGF(L9F,CGF,BB8)
if Z4==null then
call DisableTrigger(H84)
set UUF=UnitAddItemById(CGF,SU[BB8])
set LEF=UUF
call SetItemPlayer(UUF,L9F,false)
call SetItemUserData(UUF,1)
call SetItemCharges(UUF,U3F)
else
call SetItemCharges(Z4,U3F+GetItemCharges(Z4))
set G47[288+GetPlayerId(L9F)]=Z4
endif
endif
call EnableTrigger(H84)
elseif L8F then
set LP4=LP4+"g"
call CDF(L9F,CGF,null,BB8,R77(RP7,"x"),R77(RP7,"y"),U3F,1)
elseif L8F==false and(GetItemType(TS8)==ITEM_TYPE_PERMANENT or GetItemType(TS8)==ITEM_TYPE_CAMPAIGN)then
set LP4=LP4+"h"
call SetItemUserData(TS8,1)
set LFF=B_F(L9F,CGF,0)
endif
if LFF==false and LEF!=null and BIF(LEF)==false then
set LFF=C_F(CGF,LEF)
endif
if LFF==false and LEF!=null and BIF(LEF)==false then
call CCF(CGF,LEF)
endif
else
if GetWidgetLife(TS8)>0 then
set n5=I19(CGF)
set D7F=I09(CGF)
if PH7(CGF,SU[n5])==null and GetUnitAbilityLevel(CGF,D7F)>0 then
call UnitRemoveAbility(CGF,D7F)
if GetUnitTypeId(CGF)==1215130471 then
set IM4=CGF
call ExecuteFunc("HBD")
endif
endif
set BU7=B68(CGF,4)
if n5==GW4 and HP4[BU7]!=0 then
call UnitRemoveAbility(CGF,HU4[BU7])
call UnitAddAbility(CGF,HT4[BU7])
call SetPlayerAbilityAvailable(p,HT4[BU7],false)
endif
if IsItemOwned(TS8)==false then
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(BB8)then
set LDF=true
endif
call BDF(RU[BB8],GetItemX(TS8),GetItemY(TS8),L9F,LDF,U3F)
call OJ7(TS8)
endif
endif
endif
call Q47(RP7)
call RN7(t)
call EnableTrigger(SU4)
if LEF!=null then
set G47[288+GetPlayerId(L9F)]=LEF
endif
set t=null
set TS8=null
set CGF=null
set p=null
set L9F=null
set UUF=null
set Z4=null
set LEF=null
return false
endfunction
function LGF takes nothing returns boolean
local item TS8
local integer L7F
local unit CGF=GetTriggerUnit()
local trigger t
local integer RP7
local integer n5
local integer D7F
local integer id
set LP4=LP4+"|cffff0000[ManipulateItem]|r"
set id=GetPlayerId(GetOwningPlayer(CGF))
if(IsUnitType(CGF,UNIT_TYPE_HERO) or LR7(CGF))and IsUnitIllusion(CGF)==false and GetUnitTypeId(CGF)!=1311788365 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if GetItemTypeId(GetManipulatedItem())==SU[RZ]then
set HD4=HD4+1
set RJ4[id]=RJ4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[QW]then
set HE4=HE4+1
set RK4[id]=RK4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[DH4]then
set HF4=HF4+1
set RM4[id]=RM4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[RL]or GetItemTypeId(GetManipulatedItem())==SU[R3]then
set HG4=HG4+1
set RN4[id]=RN4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[T5]then
set H94=H94+1
set RO4[id]=RO4[id]+1
call UnitAddItemById(CGF,1227901005)
elseif GetItemTypeId(GetManipulatedItem())==SU[P2]then
set HH4=HH4+1
set RP4[id]=RP4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[T1]then
set B84=B84+1
set RQ4[id]=RQ4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[OL]then
set B94=B94+1
set RR4[id]=RR4[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[N3]then
set EW7=EW7+1
set EY7[id]=EY7[id]+1
elseif GetItemTypeId(GetManipulatedItem())==SU[YB]then
set EX7=EX7+1
set EB7[id]=EB7[id]+1
endif
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
if GetItemTypeId(GetManipulatedItem())==SU[RZ]then
set RJ4[id]=RJ4[id]-1
set HD4=HD4-1
elseif GetItemTypeId(GetManipulatedItem())==SU[QW]and GetUnitTypeId(CGF)!=1311788365 then
set RK4[id]=RK4[id]-1
set HE4=HE4-1
elseif GetItemTypeId(GetManipulatedItem())==SU[YB]then
set EB7[id]=EB7[id]-1
set EX7=EX7-1
elseif GetItemTypeId(GetManipulatedItem())==SU[DH4]then
set RM4[id]=RM4[id]-1
set HF4=HF4-1
elseif GetItemTypeId(GetManipulatedItem())==SU[RL]or GetItemTypeId(GetManipulatedItem())==SU[R3]then
set HG4=HG4-1
set RN4[id]=RN4[id]-1
if RN4[id]<1 or PG7(CGF,SU[RL],GetManipulatedItem())==null or PG7(CGF,SU[R3],GetManipulatedItem())==null then
call UnitRemoveAbility(CGF,1093744436)
endif
elseif GetItemTypeId(GetManipulatedItem())==SU[T5]then
set H94=IMaxBJ(H94-1,0)
set RO4[id]=IMaxBJ(RO4[id]-1,0)
call UnitRemoveAbility(CGF,1110458953)
elseif GetItemTypeId(GetManipulatedItem())==SU[P2]and GetUnitTypeId(CGF)!=1311788365 then
set RP4[id]=RP4[id]-1
set HH4=HH4-1
endif
endif
endif
if QX4[id]and(not G97[304+id])and(GetManipulatedItem()!=G47[336+id])then
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
set TS8=GetSoldItem()
call SetItemUserData(TS8,-2)
set n5=I19(CGF)
set D7F=I09(CGF)
if PG7(CGF,SU[n5],TS8)==null and GetUnitAbilityLevel(CGF,D7F)>0 then
call UnitRemoveAbility(CGF,D7F)
if GetUnitTypeId(CGF)==1215130471 then
set IM4=CGF
call ExecuteFunc("HBD")
endif
endif
elseif GetItemTypeId(GetManipulatedItem())!=1227894853 and GetItemTypeId(GetManipulatedItem())!=1227895373 then
set TS8=GetManipulatedItem()
if IsUnitIllusion(CGF)or GetItemUserData(TS8)==-2 then
set TS8=null
set CGF=null
set t=null
return false
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
set L7F=1
else
set L7F=2
endif
if(L7F==1 or(L7F==2 and BIF(TS8)==false and GetWidgetLife(TS8)>0))and GetUnitTypeId(CGF)!=1211117642 then
set GE7=OK7(TS8)
if(GetItemPlayer(TS8)!=Player($F))then
set GD7=GetItemPlayer(TS8)
endif
set G47[288+GetPlayerId(GD7)]=null
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function L4F))
call QG7(RP7,"Unit",CGF)
call Q97(RP7,"EventType",L7F)
call Q97(RP7,"indexId",GE7)
if BIF(TS8)then
call QF7(RP7,"Temporary",true)
call QN7(RP7,"p",GD7)
call Q97(RP7,"charges",GetItemCharges(TS8))
call QD7(RP7,"x",(GetItemX(TS8))*1.)
call QD7(RP7,"y",(GetItemY(TS8))*1.)
else
call QF7(RP7,"Temporary",false)
call QO7(RP7,"Item",TS8)
call SetItemUserData(TS8,0)
endif
endif
endif
set G97[304+id]=false
set TS8=null
set CGF=null
set t=null
return false
endfunction
function LHF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="LHF"
if GetUnitAbilityLevel(Z47,1110454611)==0 then
call UnitRemoveAbility(Z47,1110454611)
call UnitRemoveAbility(Z47,1110455361)
call Q47(RP7)
call RN7(t)
elseif GetUnitState(Z47,UNIT_STATE_LIFE)==GetUnitState(Z47,UNIT_STATE_MAX_LIFE)and GetUnitState(Z47,UNIT_STATE_MANA)==GetUnitState(Z47,UNIT_STATE_MAX_MANA)then
call UnitRemoveAbility(Z47,1110454611)
call UnitRemoveAbility(Z47,1110455361)
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function LIF takes unit Z47,item TS8 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="RuneOfRegeneration_Setup"
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function LHF))
call QG7(RP7,"Hero",Z47)
set t=null
endfunction
function LJF takes unit Z47,item TS8 returns nothing
local unit u=Z47
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local unit DA8=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)
local unit LKF=CreateUnit(GetOwningPlayer(u),1697656901,x,y,0)
set LP4="RuneOfIllusion_Action"
call UnitAddAbility(DA8,1093683026)
call UnitAddAbility(LKF,1093683026)
call IssueTargetOrderById(DA8,$D0132,u)
call IssueTargetOrderById(LKF,$D0132,u)
set u=null
set DA8=null
set LKF=null
endfunction
function LMF takes unit Z47,item TS8 returns nothing
if GetItemTypeId(TS8)==1227894839 or GetItemTypeId(TS8)==1227894838 or GetItemTypeId(TS8)==1227894840 or GetItemTypeId(TS8)==1227894859 or GetItemTypeId(TS8)==1227894858 then
call IK9(Z47,GetItemTypeId(TS8),false)
endif
if GetItemTypeId(TS8)==1227894839 then
call LJF(Z47,TS8)
elseif GetItemTypeId(TS8)==1227894858 then
if GetUnitAbilityLevel(Z47,1110456665)>0 then
call UnitRemoveAbility(Z47,1110456665)
call UnitRemoveAbility(Z47,1110454609)
call DisableTrigger(GetTriggeringTrigger())
call UnitAddItemById(Z47,1227894858)
call EnableTrigger(GetTriggeringTrigger())
endif
elseif GetItemTypeId(TS8)==1227894840 then
call LIF(Z47,TS8)
endif
endfunction
function LNF takes unit ZO7,item M47 returns nothing
local integer Z_7
local integer DB8
call UnitRemoveAbility(ZO7,1093810003)
call UnitRemoveAbility(ZO7,1093810001)
call UnitRemoveAbility(ZO7,1093810002)
call UnitRemoveAbility(ZO7,1093810004)
if GetUnitAbilityLevel(ZO7,1093810246)>0 then
call UnitRemoveAbility(ZO7,1093810246)
call UnitAddAbility(ZO7,1093810246)
endif
if GetUnitTypeId(ZO7)==1164207469 then
set Z_7=1093684057
elseif GetUnitTypeId(ZO7)==1429221446 then
set Z_7=1093678660
elseif GetUnitTypeId(ZO7)==1162032951 then
set Z_7=1093684557
elseif GetUnitTypeId(ZO7)==1332179560 then
set Z_7=1093687627
else
set ZO7=null
return
endif
set DB8=GetUnitAbilityLevel(ZO7,Z_7)
if DB8>0 then
call UnitRemoveAbility(ZO7,Z_7)
call UnitAddAbility(ZO7,Z_7)
call SetUnitAbilityLevel(ZO7,Z_7,DB8)
endif
endfunction
function LOF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"Unit")
local integer LPF=R47(RP7,"itemslot")
local item TS8=UnitItemInSlot(u,LPF)
set LP4="LOF"
if TS8!=null and YC7(OK7(TS8))==false and GetWidgetLife(TS8)>0 and I59(TS8)==false then
call SetItemDroppable(TS8,true)
endif
call Q47(RP7)
call RN7(t)
set t=null
set TS8=null
return false
endfunction
function LQF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"Unit")
local integer LPF=R47(RP7,"itemslot")
local item TS8=UnitItemInSlot(u,LPF)
set LP4="LQF"
call Q47(RP7)
call RN7(t)
if(u!=null and GetUnitTypeId(u)>1 and IsUnitType(u,UNIT_TYPE_DEAD)==false)and(TS8!=null and GetWidgetLife(TS8)>0)then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call SetItemDroppable(TS8,false)
call Q97(RP7,"itemslot",LPF)
call QG7(RP7,"Unit",u)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerAddCondition(t,Condition(function LOF))
endif
set TS8=null
set u=null
set t=null
return false
endfunction
function LRF takes nothing returns nothing
local integer LPF
local unit u=GetTriggerUnit()
local trigger t
local integer RP7
local item TS8
set LP4="LRF"
if GetIssuedOrderId()==$D0028 then
set LPF=0
elseif GetIssuedOrderId()==$D0029 then
set LPF=1
elseif GetIssuedOrderId()==$D002A then
set LPF=2
elseif GetIssuedOrderId()==$D002B then
set LPF=3
elseif GetIssuedOrderId()==$D002C then
set LPF=4
elseif GetIssuedOrderId()==$D002D then
set LPF=5
endif
set TS8=UnitItemInSlot(u,LPF)
if TS8!=null and GetWidgetLife(TS8)>0 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call Q97(RP7,"itemslot",LPF)
call QG7(RP7,"Unit",u)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function LQF))
endif
set TS8=null
set u=null
set t=null
endfunction
function LSF takes nothing returns boolean
if GetIssuedOrderId()==$D0028 or GetIssuedOrderId()==$D0029 or GetIssuedOrderId()==$D002A or GetIssuedOrderId()==$D002B or GetIssuedOrderId()==$D002C or GetIssuedOrderId()==$D002D then
call LRF()
endif
return false
endfunction
function LTF takes integer BB8 returns boolean
return BB8!=A5 and BB8!=DH4 and BB8!=LV and BB8!=T0
endfunction
function LUF takes nothing returns nothing
set LP4=LP4+"(e2e)"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
call SetItemPawnable(GetManipulatedItem(),false)
else
call SetItemPawnable(GetManipulatedItem(),true)
endif
endfunction
function LVF takes nothing returns boolean
set LP4=LP4+"(e3e)"
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and LTF(OM7(GetManipulatedItem()))and OI7(GetTriggerUnit())then
call LUF()
endif
return false
endfunction
function LWF takes nothing returns boolean
local unit Z47=GetTriggerUnit()
local integer X37=1
if PH7(Z47,SU[LB])!=null then
set X37=2
endif
if PG7(Z47,SU[EV],GetManipulatedItem())!=null then
set X37=3
endif
if PG7(Z47,SU[DR4],GetManipulatedItem())!=null then
set X37=4
endif
if PG7(Z47,SU[F6],GetManipulatedItem())!=null or PG7(Z47,SU[G6],GetManipulatedItem())!=null or PG7(Z47,SU[H6],GetManipulatedItem())!=null then
set X37=5
endif
if PG7(Z47,SU[F44],GetManipulatedItem())!=null then
set X37=6
endif
if PG7(Z47,SU[YB],GetManipulatedItem())!=null then
set X37=7
endif
if PG7(Z47,SU[E6],GetManipulatedItem())!=null then
set X37=8
endif
if PG7(Z47,SU[P1],GetManipulatedItem())!=null then
call UnitAddAbility(Z47,1093686832)
call SetUnitAbilityLevel(Z47,1093686832,X37)
call UnitMakeAbilityPermanent(Z47,true,1093686832)
else
call UnitRemoveAbility(Z47,1093686832)
endif
set Z47=null
return false
endfunction
function LXF takes nothing returns boolean
local unit Z47=GetTriggerUnit()
local integer X37=1
if PH7(Z47,SU[LB])!=null then
set X37=2
endif
if PG7(Z47,SU[EV],GetManipulatedItem())!=null then
set X37=3
endif
if PH7(Z47,SU[DR4])!=null then
set X37=4
endif
if PH7(Z47,SU[F6])!=null or PG7(Z47,SU[G6],GetManipulatedItem())!=null or PG7(Z47,SU[H6],GetManipulatedItem())!=null then
set X37=5
endif
if PH7(Z47,SU[F44])!=null then
set X37=6
endif
if PG7(Z47,SU[YB],GetManipulatedItem())!=null then
set X37=7
endif
if PH7(Z47,SU[E6])!=null then
set X37=8
endif
if PH7(Z47,SU[P1])!=null then
call UnitAddAbility(Z47,1093686832)
call SetUnitAbilityLevel(Z47,1093686832,X37)
call UnitMakeAbilityPermanent(Z47,true,1093686832)
endif
set Z47=null
return false
endfunction
function LYF takes nothing returns nothing
local unit Z47=GetTriggerUnit()
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM then
if OM7(GetManipulatedItem())==DK4 then
call UnitRemoveAbility(Z47,1093685333)
endif
if OM7(GetManipulatedItem())==S2 then
call UnitRemoveAbility(Z47,1093747287)
endif
if OM7(GetManipulatedItem())==DJ4 then
call UnitRemoveAbility(Z47,1093685333)
call UnitRemoveAbility(Z47,1093686339)
call UnitRemoveAbility(Z47,1093686603)
endif
endif
if GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
if OM7(GetManipulatedItem())==DK4 then
call UnitAddAbility(Z47,1093685333)
call UnitMakeAbilityPermanent(Z47,true,1093685333)
endif
if OM7(GetManipulatedItem())==S2 then
call UnitAddAbility(Z47,1093747287)
call UnitMakeAbilityPermanent(Z47,true,1093747287)
endif
if OM7(GetManipulatedItem())==DJ4 then
call UnitAddAbility(Z47,1093685333)
call UnitMakeAbilityPermanent(Z47,true,1093685333)
call UnitAddAbility(Z47,1093686339)
call UnitMakeAbilityPermanent(Z47,true,1093686339)
call UnitAddAbility(Z47,1093686603)
call UnitMakeAbilityPermanent(Z47,true,1093686603)
endif
endif
set Z47=null
endfunction
function LZF takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and(OM7(GetManipulatedItem())==DJ4 or OM7(GetManipulatedItem())==DK4 or OM7(GetManipulatedItem())==S2)then
call LYF()
endif
return false
endfunction
function LAF takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local item TS8=Q27(RP7,"Item")
if GetTriggerEventId()==EVENT_UNIT_DROP_ITEM and GetManipulatedItem()==TS8 then
call Q47(RP7)
call RN7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DROP_ITEM then
if((LoadInteger(C7,(GetHandleId((Z47))),((4310))))==1)==false then
call SetUnitState(Z47,UNIT_STATE_LIFE,B97(GetUnitState(Z47,UNIT_STATE_LIFE)-HI4,1))
endif
endif
set t=null
set Z47=null
set TS8=null
return false
endfunction
function LBF takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DROP_ITEM)
call TriggerAddCondition(t,Condition(function LAF))
call QG7(RP7,"Hero",Z47)
call QO7(RP7,"Item",GetManipulatedItem())
call TriggerEvaluate(t)
set t=null
set Z47=null
endfunction
function LCF takes nothing returns boolean
if GetItemType(GetManipulatedItem())==ITEM_TYPE_PERMANENT and OM7(GetManipulatedItem())==DJ4 then
call LBF()
endif
return false
endfunction
function L3F takes unit u returns boolean
local item L6F=CreateItem(1227901771,GetUnitX(u),GetUnitY(u))
local boolean LT8=UnitAddItem(u,L6F)
set LP4="AegisCheck"
if LT8==false then
call RemoveItem(L6F)
endif
return LT8
endfunction
function LLF takes unit Z47,item TS8,integer LW8 returns item
local real x=LS8(Z47)
local real y=LU8(Z47)
local integer i=0
local boolean array LX8
local item Z4
set LP4="AddItemWithTrig"
loop
exitwhen i>(UnitInventorySize(Z47)-1)
if UnitItemInSlot(Z47,i)==null and i!=LW8 then
set Z4=CreateItem(1227895373,x,y)
call UnitAddItem(Z47,Z4)
set LX8[i]=true
else
set LX8[i]=false
endif
if i==LW8 then
call UnitAddItem(Z47,TS8)
endif
set i=i+1
endloop
set i=0
loop
exitwhen i>5
if LX8[i] then
call RemoveItem(UnitItemInSlot(Z47,i))
endif
set i=i+1
endloop
set HZ4=TS8
set Z4=null
return HZ4
endfunction
function L1F takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer i=0
local item L0F
local integer BB8
local unit DA8
local item L5F
set LP4="L1F"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call QF7(GetHandleId(Z47),"LinkenSphere|CD",false)
call Q47(RP7)
call RN7(t)
elseif L3F(Z47)==false then
call TriggerRegisterTimerEvent(t,5.5,false)
else
call QF7(GetHandleId(Z47),"LinkenSphere|CD",false)
set GD7=GetOwningPlayer(Z47)
call DisableTrigger(H84)
if RO4[GetPlayerId(GetOwningPlayer(Z47))]>0 then
call SetItemVisible(UnitAddItemById(Z47,1227901005),false)
endif
loop
exitwhen i>5
set L0F=UnitItemInSlot(Z47,i)
set BB8=OM7(L0F)
if BB8==W5 then
set IQ4=GetItemPlayer(L0F)
call RemoveItem(L0F)
set DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
call UnitAddAbility(DA8,1095331446)
set L5F=UnitAddItemById(DA8,SU[T5])
call UnitUseItem(DA8,L5F)
set HZ4=LLF(Z47,L5F,i)
call SetItemPlayer(L5F,IQ4,false)
call SetItemUserData(L5F,1)
call UnitRemoveAbility(DA8,1095331446)
set DA8=null
set L5F=null
endif
set L0F=null
set i=i+1
endloop
call EnableTrigger(H84)
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
return false
endfunction
function L2F takes unit Z47 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer i=0
local item L0F
local integer BB8
local unit DA8
local item L5F
set LP4="LinkensSphereHelp"
call DisableTrigger(H84)
call QF7(GetHandleId(Z47),"LinkenSphere|CD",true)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function L1F))
call QG7(RP7,"Hero",Z47)
loop
exitwhen i>5
set L0F=UnitItemInSlot(Z47,i)
set BB8=OM7(L0F)
if BB8==T5 or BB8==W5 then
set IQ4=GetItemPlayer(L0F)
set GD7=IQ4
call RemoveItem(L0F)
set DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
call UnitAddAbility(DA8,1095331446)
set L5F=UnitAddItemById(DA8,SU[W5])
call UnitUseItem(DA8,L5F)
set HZ4=LLF(Z47,L5F,i)
call SetItemPlayer(L5F,IQ4,false)
call SetItemUserData(L5F,1)
call UnitRemoveAbility(DA8,1095331446)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",Z47,"origin"))
set DA8=null
set L5F=null
endif
set L0F=null
set i=i+1
endloop
call EnableTrigger(H84)
set t=null
endfunction
function L_F takes nothing returns boolean
local integer i=1
local unit Z47
local integer id
set LP4="L_F"
if L8 then
return false
endif
if H94>0 then
loop
exitwhen i>5
set id=GetPlayerId(Y7[i])
set Z47=G7[id]
if RO4[id]>0 and Z47!=null and GetUnitTypeId(Z47)>1 and IsUnitType(Z47,UNIT_TYPE_DEAD)==false and R87(GetHandleId(Z47),"LinkenSphere|CD")==false and ZG7(Z47)==false and R87(GetHandleId(Z47),"MantaBlocked")==false then
call L2F(Z47)
endif
set id=GetPlayerId(Z7[i])
set Z47=G7[id]
if RO4[id]>0 and Z47!=null and GetUnitTypeId(Z47)>1 and IsUnitType(Z47,UNIT_TYPE_DEAD)==false and R87(GetHandleId(Z47),"LinkenSphere|CD")==false and ZG7(Z47)==false and R87(GetHandleId(Z47),"MantaBlocked")==false then
call L2F(Z47)
endif
set i=i+1
endloop
endif
set Z47=null
return false
endfunction
function D4G takes unit hn,item x5 returns integer
local integer i=0
set LP4="GetItemSlot"
loop
exitwhen i>5
if UnitItemInSlot(hn,i)==x5 then
return i
endif
set i=i+1
endloop
return-1
endfunction
function D7G takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer BB8=OM7(Z4)
local integer LW8
set LP4="D7G"
call DisableTrigger(H84)
if BB8==B3 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[C3],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==C3 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[B3],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if BB8==GC then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[JC],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==JC then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[GC],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
if BB8==L5 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[E2],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==E2 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[L5],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
call EnableTrigger(H84)
set S4=null
set Z4=null
endfunction
function D8G takes nothing returns nothing
local unit D9G=GetTriggerUnit()
local item DDG=GetManipulatedItem()
local integer DEG=OM7(DDG)
local integer LPF
set LP4="D8G"
call DisableTrigger(H84)
if DEG==F2 then
set LPF=D4G(D9G,DDG)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(DDG)
set HZ4=LV8(D9G,SU[H2],LPF)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif DEG==H2 then
set LPF=D4G(D9G,DDG)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(DDG)
set HZ4=LV8(D9G,SU[F2],LPF)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
call EnableTrigger(H84)
set D9G=null
set DDG=null
endfunction
function DFG takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer BB8=OM7(Z4)
local integer LW8
set LP4="DFG"
call DisableTrigger(H84)
if GetUnitTypeId(S4)!=1211117642 then
if BB8==F6 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H84)
set HZ4=LV8(S4,SU[G6],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==G6 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H84)
set HZ4=LV8(S4,SU[H6],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==H6 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
call DisableTrigger(H84)
set HZ4=LV8(S4,SU[F6],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
endif
call EnableTrigger(H84)
set S4=null
set Z4=null
endfunction
function DGG takes integer n5 returns integer
if n5==1227894838 then
return NA
elseif n5==1227894840 then
return QA
elseif n5==1227894858 then
return IA
elseif n5==1227894859 then
return JA
elseif n5==1227894839 then
return WA
endif
return-1
endfunction
function DHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"Unit")
local integer LPF=R47(RP7,"itemslot")
local item TS8=UnitItemInSlot(u,LPF)
local integer DIG=R47(RP7,"itemhandleid")
local item L5F
local integer LW8
set LP4="DHG"
if TS8!=null and YC7(OK7(TS8))and GetHandleId(TS8)==DIG and A47(u)==false then
set L5F=CreateItem(LoadInteger(C7,GetHandleId(TS8),GetHandleId(u)),GetUnitX(u),GetUnitY(u))
call Q47(GetHandleId(TS8))
set LW8=D4G(u,TS8)
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[CZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call Q47(RP7)
call RN7(t)
call UnitAddItem(u,L5F)
endif
set t=null
set u=null
set TS8=null
set L5F=null
return false
endfunction
function DJG takes unit u,item L5F returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer LPF=D4G(u,L5F)
set LP4="xCe"
call Q97(RP7,"itemslot",LPF)
call Q97(RP7,"itemhandleid",GetHandleId(L5F))
call QG7(RP7,"Unit",u)
call TriggerRegisterTimerEvent(t,120.,true)
call TriggerAddCondition(t,Condition(function DHG))
set t=null
endfunction
function DKG takes nothing returns nothing
local unit u=GetTriggerUnit()
local item TS8=GetManipulatedItem()
local integer BB8=OK7(TS8)
local unit DMG
local integer DNG
local boolean TargetFrog
local integer LW8
local item L5F
local integer DOG
set LP4="DKG"
if BB8==XZ then
set LW8=D4G(u,TS8)
set DMG=QA7(GetHandleId(u),"BottleTargetUnit")
set DNG=R47(GetHandleId(u),"BottleTargetItemId")
if GetUnitTypeId(DMG)==1852206952 or GetUnitTypeId(DMG)==1852073580 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
call AU7(GetOwningPlayer(u),"Abilities\\Spells\\Human\\Heal\\HealTarget.wav")
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[CZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif H79(DNG)then
set DOG=DGG(DNG)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",u,"overhead"))
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
call DisableTrigger(H84)
if GetOwningPlayer(u)==IQ4 then
set HZ4=LV8(u,SU[DOG],LW8)
else
set HZ4=LV8(u,AU[DOG],LW8)
endif
call EnableTrigger(H84)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
set L5F=UnitItemInSlot(u,LW8)
call SaveInteger(C7,GetHandleId(L5F),GetHandleId(u),DNG)
call DJG(u,L5F)
endif
elseif BB8==CZ then
set LW8=D4G(u,TS8)
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[BZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==BZ then
set LW8=D4G(u,TS8)
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[AZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==AZ then
set LW8=D4G(u,TS8)
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[XZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,0)
elseif YC7(BB8)then
if LoadInteger(C7,GetHandleId(TS8),GetHandleId(u))>0 then
set NH=true
set LW8=D4G(u,TS8)
set L5F=CreateItem(LoadInteger(C7,GetHandleId(TS8),GetHandleId(u)),GetUnitX(u),GetUnitY(u))
call Q47(GetHandleId(TS8))
set IQ4=GetItemPlayer(TS8)
call OJ7(TS8)
set HZ4=LV8(u,SU[CZ],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call UnitAddItem(u,L5F)
set NH=false
endif
endif
set u=null
set TS8=null
set DMG=null
set L5F=null
endfunction
function DPG takes nothing returns boolean
local integer LW8
local real DR8
set LP4="DPG"
call DisableTrigger(H84)
if OM7(GetManipulatedItem())==DK4 then
set DR8=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set LW8=D4G(GetTriggerUnit(),GetManipulatedItem())
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set HZ4=LV8(GetTriggerUnit(),SU[DJ4],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,B97(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-DR8,1))
call RR7(GetTriggerUnit(),"ArmletOfMordiganState",.04)
call RI7(GetTriggerUnit(),"ArmletOfMordigan|Active")
endif
if OM7(GetManipulatedItem())==DJ4 then
set DR8=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)
set LW8=D4G(GetTriggerUnit(),GetManipulatedItem())
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(GetManipulatedItem())
set HZ4=LV8(GetTriggerUnit(),SU[DK4],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,B97(GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)-DR8,1))
call RK7(GetTriggerUnit(),"ArmletOfMordigan|Active")
endif
call EnableTrigger(H84)
return false
endfunction
function DQG takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==SU[W3]then
call AV7(GetOwningPlayer(GetTriggerUnit()),(GetObjectName((1848657713))))
endif
endfunction
function DRG takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer BB8=OM7(Z4)
local integer LW8
set LP4="DRG"
call DisableTrigger(H84)
if BB8==A1 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[D0],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call I69(HZ4)
elseif BB8==D0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[E0],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call I69(HZ4)
elseif BB8==E0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[J0],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call I69(HZ4)
elseif BB8==J0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[N0],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call I69(HZ4)
elseif BB8==N0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[O0],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
call I69(HZ4)
endif
call EnableTrigger(H84)
set S4=null
set Z4=null
endfunction
function DSG takes nothing returns nothing
local unit S4=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer BB8=OM7(Z4)
local integer LW8
set LP4="DSG"
call DisableTrigger(H84)
if BB8==LL and GetItemCharges(Z4)==0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[E1],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==D1 and GetItemCharges(Z4)==0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[F1],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
elseif BB8==RB and GetItemCharges(Z4)==0 then
set LW8=D4G(S4,Z4)
set IQ4=GetItemPlayer(GetManipulatedItem())
call RemoveItem(Z4)
set HZ4=LV8(S4,SU[VB],LW8)
call SetItemPlayer(HZ4,IQ4,false)
call SetItemUserData(HZ4,1)
endif
call EnableTrigger(H84)
set S4=null
set Z4=null
endfunction
function DTG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="DTG"
if L3F(p5)then
call UnitAddItemById(p5,1227901005)
endif
call Q47(RP7)
call RN7(t)
call QF7(GetHandleId(p5),"MantaBlocked",false)
set t=null
set p5=null
return false
endfunction
function DUG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local item Z4=GetManipulatedItem()
local integer BB8=OM7(Z4)
local trigger t
set LP4="DUG"
if(BB8==X0 or BB8==Y0)and R87(GetHandleId(p5),"MantaBlocked") then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.41,false)
call TriggerAddCondition(t,Condition(function DTG))
call QG7(GetHandleId(t),"Source",p5)
set t=null
endif
set p5=null
set Z4=null
endfunction
function DVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local integer ZD8=R47(JZ7,"Count")
set LP4="DVG"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1097163124 then
call Q97(JZ7,"Count",16)
endif
elseif A47(CP7)or GetTriggerEventId()==EVENT_UNIT_DEATH or ZD8==0 then
call UnitRemoveAbility(CP7,1093685334)
call UnitRemoveAbility(CP7,1110456140)
call RK7(CP7,"ActiveTango")
call Q47(JZ7)
call RN7(t)
else
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+115/ 16)
call Q97(JZ7,"Count",ZD8-1)
endif
return false
endfunction
function DWG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="DWG"
call RI7(p5,"ActiveTango")
call Z27(p5,1093685334)
call QG7(RP7,"Source",p5)
call Q97(RP7,"Count",16)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DVG))
call TriggerEvaluate(t)
set p5=null
set t=null
endfunction
function DXG takes nothing returns nothing
if GetSpellAbilityId()==1097163124 and RG7(GetTriggerUnit(),"ActiveTango")==false then
call DWG()
endif
endfunction
function DYG takes integer id,real x,real y returns nothing
if IsPointInRegion(T84,x,y)==false then
set T74=T74+1
set S54[T74]=Player(id)
set S24[T74]=x
set S_4[T74]=y
set T44[T74]=(TimerGetElapsed(V))
endif
endfunction
function DZG takes integer id,real x,real y returns integer
local real EO8=(TimerGetElapsed(V))
local integer i=0
local integer XB8=0
set LP4="TPMemoryGetDuration"
if IsPointInRegion(T84,x,y) then
return XB8
endif
loop
exitwhen i>T74
if(EO8<T44[i]+e4)and(N67(x,y,S24[i],S_4[i])<o4*2+50)and IsPlayerAlly(Player(id),S54[i]) then
set XB8=XB8+1
endif
set i=i+1
endloop
return XB8
endfunction
function DAG takes integer DBG returns integer
if DBG==GetPlayerId(Y7[1])then
return 1747993161
elseif DBG==GetPlayerId(Y7[2])then
return 1747993163
elseif DBG==GetPlayerId(Y7[3])then
return 1747993159
elseif DBG==GetPlayerId(Y7[4])then
return 1747993158
elseif DBG==GetPlayerId(Y7[5])then
return 1747993164
elseif DBG==GetPlayerId(Z7[1])then
return 1747993160
elseif DBG==GetPlayerId(Z7[2])then
return 1747993162
elseif DBG==GetPlayerId(Z7[3])then
return 1747993165
elseif DBG==GetPlayerId(Z7[4])then
return 1747992885
elseif DBG==GetPlayerId(Z7[5])then
return 1747993166
endif
return 1747993166
endfunction
function DCG takes integer DBG returns integer
return 1747992920
endfunction
function D3G takes integer DBG returns string
if DBG==GetPlayerId(Y7[1])then
return"war3mapImported\\TeleportTarget_Blue.mdx"
elseif DBG==GetPlayerId(Y7[2])then
return"war3mapImported\\TeleportTarget_Teal.mdx"
elseif DBG==GetPlayerId(Y7[3])then
return"war3mapImported\\TeleportTarget_Purple.mdx"
elseif DBG==GetPlayerId(Y7[4])then
return"war3mapImported\\TeleportTarget_Yellow.mdx"
elseif DBG==GetPlayerId(Y7[5])then
return"war3mapImported\\TeleportTarget_Orange.mdx"
elseif DBG==GetPlayerId(Z7[1])then
return"war3mapImported\\TeleportTarget_Pink.mdx"
elseif DBG==GetPlayerId(Z7[2])then
return"war3mapImported\\TeleportTarget_Gray.mdx"
elseif DBG==GetPlayerId(Z7[3])then
return"war3mapImported\\TeleportTarget_LightBlue.mdx"
elseif DBG==GetPlayerId(Z7[4])then
return"war3mapImported\\TeleportTarget_DarkGreen.mdx"
elseif DBG==GetPlayerId(Z7[5])then
return"war3mapImported\\TeleportTarget_Brown.mdx"
endif
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl"
endfunction
function D6G takes integer DBG returns string
return"Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl"
endfunction
function DLG takes nothing returns boolean
local real d
set LP4="DLG"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0 and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) and GetUnitTypeId(GetFilterUnit())!=1966092371 and GetUnitTypeId(GetFilterUnit())!=1852010352 and IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false then
set d=N67(IJ4,IK4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IH4 then
set IH4=d
set IM4=GetFilterUnit()
endif
endif
return false
endfunction
function D1G takes unit S4,real x,real y returns unit
local group g=ZI7()
set LP4="ScrollOfTPFindBuilding"
set IM4=null
set IN4=S4
set IH4=99999
set IJ4=x
set IK4=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function DLG))
call ZH7(g)
set g=null
return IM4
endfunction
function D0G takes unit u returns boolean
local integer id=GetUnitTypeId(u)
set LP4="IsTombstone"
return id==1848657480 or id==1848657462 or id==1848657481 or id==1848657482
endfunction
function D5G takes unit u returns boolean
local integer id=GetUnitTypeId(u)
set LP4="IsSiege"
return id==1966092370 or id==1970107511 or id==1697657398 or id==1700946284
endfunction
function D2G takes nothing returns boolean
local real d
set LP4="D2G"
if(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 or D5G(GetFilterUnit())or GetUnitTypeId(GetFilterUnit())==1852206952 or GetUnitTypeId(GetFilterUnit())==1852073580 or D0G(GetFilterUnit()))and A47(GetFilterUnit())==false and GetUnitAbilityLevel(GetFilterUnit(),1098085732)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) and GetOwningPlayer(GetFilterUnit())!=B7 and IsUnitIllusion(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_FLYING)==false and GetUnitTypeId(GetFilterUnit())!=1848657461 then
set d=N67(IJ4,IK4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IH4 then
set IH4=d
set IM4=GetFilterUnit()
endif
endif
return false
endfunction
function D_G takes unit MQ7,real x,real y returns unit
local group g=ZI7()
set LP4="BootsOfTravel_FindUnit"
set IM4=null
set IN4=MQ7
set IH4=99999
set IJ4=x
set IK4=y
call GroupEnumUnitsInRange(g,x,y,99999,Condition(function D2G))
call ZH7(g)
set g=null
return IM4
endfunction
function E4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=(LoadUnitHandle(C7,(RP7),($E)))
local real x=(LoadReal(C7,(RP7),(6)))
local real y=(LoadReal(C7,(RP7),(7)))
local unit E7G=(LoadUnitHandle(C7,(RP7),(448)))
local unit E8G=(LoadUnitHandle(C7,(RP7),(447)))
local ubersplat E9G=(LoadUbersplatHandle(C7,(RP7),($83)))
local integer XB8=(LoadInteger(C7,(RP7),(34)))
local real CB7=(LoadReal(C7,(RP7),(57)))
local real EO8=R77(RP7,"OriginalTime")
local integer id=GetPlayerId(GetOwningPlayer(Z47))
local boolean EDG=false
local integer i=0
set LP4="E4G"
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093751349 or GetSpellAbilityId()==1093743415 then
set EDG=true
endif
else
set XB8=XB8+1
call SaveInteger(C7,(RP7),(34),(XB8))
if XB8==1 then
if CB7>3 then
call SetUnitAnimationByIndex(E7G,1)
call SetUnitAnimationByIndex(E8G,1)
endif
elseif XB8==2 then
set EDG=true
endif
endif
if EDG then
call SaveInteger(C7,(GetHandleId((Z47))),((4256)),(2))
call KillUnit(E7G)
call KillUnit(E8G)
call DestroyUbersplat(E9G)
call FlushChildHashtable(C7,(RP7))
call RN7(t)
if XB8==2 then
call DestroyEffect(AddSpecialEffect(D6G(id),GetUnitX(Z47),GetUnitY(Z47)))
call DestroyEffect(AddSpecialEffect(D3G(id),x,y))
call SetUnitX(Z47,x)
call SetUnitY(Z47,y)
call PauseUnit(Z47,true)
call PauseUnit(Z47,false)
call BW7(x,y,$F0)
set IM4=Z47
call ExecuteFunc("EEG")
endif
endif
set hq[832+GetPlayerId(GetOwningPlayer(Z47))]=0
set t=null
set Z47=null
set E7G=null
set E8G=null
set E9G=null
return false
endfunction
function EFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit EGG=(LoadUnitHandle(C7,(JZ7),(448)))
local unit EHG=(LoadUnitHandle(C7,(JZ7),(447)))
local ubersplat P39=(LoadUbersplatHandle(C7,(JZ7),($83)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local real DY8=(LoadReal(C7,(JZ7),(57)))
local real YJ8=(LoadReal(C7,(JZ7),(442)))
local integer id=GetPlayerId(GetOwningPlayer(ZO7))
local boolean JT7=false
local integer i=0
local integer YT8
set LP4="EFG"
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093808945 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call SaveInteger(C7,(GetHandleId((ZO7))),((4256)),(2))
call KillUnit(EGG)
call KillUnit(EHG)
call DestroyUbersplat(P39)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveType(J67,UNIT_TYPE_PEON)
set h8[$B0+id]=null
endif
elseif GetTriggerEventId()==EVENT_UNIT_DEATH then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call UnitRemoveType(J67,UNIT_TYPE_PEON)
call SaveInteger(C7,(GetHandleId((ZO7))),((4256)),(2))
call KillUnit(EGG)
call KillUnit(EHG)
call DestroyUbersplat(P39)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set h8[$B0+id]=null
else
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(ZO7),GetUnitY(ZO7)))
call SaveInteger(C7,(GetHandleId((ZO7))),((4256)),(2))
call KillUnit(EGG)
call KillUnit(EHG)
call DestroyUbersplat(P39)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveType(J67,UNIT_TYPE_PEON)
call SetUnitX(ZO7,GetUnitX(J67)-1)
call SetUnitY(ZO7,GetUnitY(J67)-1)
call PauseUnit(ZO7,true)
call PauseUnit(ZO7,false)
call BW7(x,y,$F0)
set IM4=ZO7
call ExecuteFunc("EEG")
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(ZO7),GetUnitY(ZO7)))
set h8[$B0+id]=null
endif
set t=null
set ZO7=null
set EGG=null
set EHG=null
set P39=null
set J67=null
return false
endfunction
function EIG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer RP7
local unit E7G
local unit E8G
local ubersplat E9G
local integer id=GetPlayerId(GetOwningPlayer(Z47))
local integer XB8
local real EJG
set LP4="EIG"
if(WW4 and GetSpellAbilityId()==1093743415)then
set WW4=false
call SetUnitState(Z47,UNIT_STATE_MANA,GetUnitState(Z47,UNIT_STATE_MANA)+75)
return
endif
set t=CreateTrigger()
set RP7=GetHandleId(t)
call SaveInteger(C7,(GetHandleId((Z47))),((4256)),(1))
if m5==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if GetSpellAbilityId()==1093751349 then
if x==TV4[id]and y==TW4[id]then
if WM7(GetOwningPlayer(Z47))then
set x=GetUnitX(IY4)
set y=GetUnitY(IY4)
else
set x=GetUnitX(JZ4)
set y=GetUnitY(JZ4)
endif
endif
endif
set m5=D1G(Z47,x,y)
call RemoveLocation(l)
else
set x=GetUnitX(m5)
set y=GetUnitY(m5)
endif
if N67(x,y,GetUnitX(m5),GetUnitY(m5))>o4 then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+o4*Cos(a)
set y=GetUnitY(m5)+o4*Sin(a)
elseif N67(x,y,GetUnitX(m5),GetUnitY(m5))<50 then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+120*Cos(a)
set y=GetUnitY(m5)+120*Sin(a)
endif
if IsPointInRegion(IT4,x,y) then
set a=Atan2(y-GetUnitY(m5),x-GetUnitX(m5))
set x=GetUnitX(m5)+$C8*Cos(a)
set y=GetUnitY(m5)+$C8*Sin(a)
endif
set x=AY7(x)
set y=AZ7(y)
if(IsUnitAlly(Z47,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(Z47))or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set E8G=CreateUnit(GetOwningPlayer(Z47),DAG(id),x,y,0)
set E7G=CreateUnit(GetOwningPlayer(Z47),DCG(id),GetUnitX(Z47),GetUnitY(Z47),0)
set E9G=CreateUbersplat(GetUnitX(Z47),GetUnitY(Z47),"SCTP",$FF,$FF,$FF,$FF,false,false)
if IsUnitVisible(Z47,GetLocalPlayer()) then
call SetUbersplatRenderAlways(E9G,true)
else
call SetUbersplatRenderAlways(E9G,false)
endif
set XB8=DZG(GetPlayerId(GetOwningPlayer(Z47)),x,y)
if XB8>0 then
set XB8=XB8+1
endif
set EJG=3+XB8
call DYG(GetPlayerId(GetOwningPlayer(Z47)),x,y)
if XB8>0 then
call SetUnitAnimationByIndex(E7G,2)
call SetUnitAnimationByIndex(E8G,2)
endif
call TriggerRegisterTimerEvent(t,EJG-3,false)
call TriggerRegisterTimerEvent(t,EJG,false)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function E4G))
call BA7(GetOwningPlayer(Z47),EJG,x,y,$C8)
call SaveUnitHandle(C7,(RP7),(447),(E8G))
call SaveUnitHandle(C7,(RP7),(448),(E7G))
call SaveReal(C7,(RP7),(6),((x)*1.))
call SaveReal(C7,(RP7),(7),((y)*1.))
call QD7(RP7,"OriginalTime",TimerGetElapsed(V))
call SaveReal(C7,(RP7),(57),((EJG)*1.))
call SaveUbersplatHandle(C7,(RP7),($83),(E9G))
call SaveUnitHandle(C7,(RP7),($E),(Z47))
call SaveInteger(C7,(RP7),(34),(0))
call CO7(Z47,VQ4,x,y,$960)
set h8[$B0+id]=m5
set Z47=null
set m5=null
set E7G=null
set E8G=null
set l=null
set t=null
set E9G=null
endfunction
function EKG takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local location l
local real x
local real y
local real a
local trigger t
local integer JZ7
local unit EGG
local unit EHG
local ubersplat P39
local integer id=GetPlayerId(GetOwningPlayer(ZO7))
local integer ZD8
local real EMG
set LP4="EKG"
set t=CreateTrigger()
set JZ7=GetHandleId(t)
if J67==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
if x==TV4[id]and y==TW4[id]then
if WM7(GetOwningPlayer(ZO7))then
set x=GetUnitX(IY4)
set y=GetUnitY(IY4)
else
set x=GetUnitX(JZ4)
set y=GetUnitY(JZ4)
endif
endif
set J67=D_G(ZO7,x,y)
call RemoveLocation(l)
endif
set x=GetUnitX(J67)
set y=GetUnitY(J67)
if(IsUnitAlly(ZO7,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(ZO7))or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set P39=CreateUbersplat(GetUnitX(ZO7),GetUnitY(ZO7),"SCTP",$FF,$FF,$FF,$FF,false,false)
if IsUnitVisible(ZO7,GetLocalPlayer()) then
call SetUbersplatRenderAlways(P39,true)
else
call SetUbersplatRenderAlways(P39,false)
endif
set EMG=3
call UnitAddType(J67,UNIT_TYPE_PEON)
call TriggerRegisterTimerEvent(t,EMG,false)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function EFG))
call BA7(GetOwningPlayer(ZO7),EMG,x,y,$C8)
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V)))*1.))
call SaveReal(C7,(JZ7),(57),((EMG)*1.))
call SaveUbersplatHandle(C7,(JZ7),($83),(P39))
call SaveUnitHandle(C7,(JZ7),($E),(ZO7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",ZO7,"origin")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",ZO7,"origin")))
call SaveEffectHandle(C7,(JZ7),($B1),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTo.mdl",J67,"origin")))
call CO7(ZO7,VQ4,x,y,$960)
set ZO7=null
set J67=null
set EGG=null
set EHG=null
set l=null
set t=null
set P39=null
endfunction
function ENG takes nothing returns nothing
if(GetSpellAbilityId()==1093751349 or GetSpellAbilityId()==1093743415)and OI7(GetTriggerUnit())==false then
call EIG()
endif
if GetSpellAbilityId()==1093808945 then
call EKG()
endif
endfunction
function EOG takes nothing returns nothing
if GetSpellAbilityId()==1093743415 and GetSpellTargetItem()!=null then
call IssueImmediateOrderById(GetTriggerUnit(),$D0004)
if WM7(GetOwningPlayer(GetTriggerUnit()))then
call UnitUseItemTarget(GetTriggerUnit(),PH7(GetTriggerUnit(),XC),IY4)
set WW4=true
else
call UnitUseItemTarget(GetTriggerUnit(),PH7(GetTriggerUnit(),XC),JZ4)
set WW4=true
endif
endif
endfunction
function EPG takes nothing returns nothing
if E57==(LoadInteger(C7,(GetHandleId(GetEnumUnit())),(784)))then
call KillUnit(GetEnumUnit())
endif
endfunction
function EQG takes nothing returns boolean
local integer i=GetUnitTypeId(GetFilterUnit())
return i==1848651848 or i==1848651847 or i==1848651851 or i==1848651850 or i==1848651841 or i==1848651830
endfunction
function ERG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit ESG
local unit ETG
local integer EUG
local integer EVG
local group g=ZI7()
local real a=GetUnitFacing(CP7)*bj_DEGTORAD
local real x1=GetUnitX(CP7)+50*Cos(a)
local real y1=GetUnitY(CP7)+50*Sin(a)
local real x2=GetUnitX(CP7)+50*Cos(a)
local real y2=GetUnitY(CP7)+50*Sin(a)
if GetSpellAbilityId()==1093683266 then
set EUG=1848651848
set EVG=1848651850
elseif GetSpellAbilityId()==1093682227 then
set EUG=1848651847
set EVG=1848651841
elseif GetSpellAbilityId()==1093682246 then
set EUG=1848651851
set EVG=1848651830
endif
set E57=GetUnitTypeId(CP7)
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function EQG))
call ForGroup(g,function EPG)
call ZH7(g)
set ESG=CreateUnit(GetOwningPlayer(CP7),EUG,x1,y1,GetUnitFacing(CP7))
call SaveInteger(C7,(GetHandleId(ESG)),(784),(E57))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",ESG,"origin"))
call UnitApplyTimedLife(ESG,1112820806,35)
set ETG=CreateUnit(GetOwningPlayer(CP7),EVG,x2,y2,GetUnitFacing(CP7))
call SaveInteger(C7,(GetHandleId(ETG)),(784),(E57))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl",ETG,"origin"))
call UnitApplyTimedLife(ETG,1112820806,35)
set g=null
set ESG=null
set ETG=null
set CP7=null
endfunction
function EWG takes nothing returns nothing
if GetSpellAbilityId()==1093683266 or GetSpellAbilityId()==1093682227 or GetSpellAbilityId()==1093682246 then
call ERG()
endif
endfunction
function EXG takes nothing returns nothing
if GetSpellAbilityId()==1093748304 then
call BJ7("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl",GetTriggerUnit(),"origin",3.5)
call CW7(GetTriggerUnit(),1093747534,1,3.5)
endif
endfunction
function EYG takes nothing returns boolean
return(RG7(GetFilterUnit(),"4323"))
endfunction
function EZG takes nothing returns nothing
local group g
local unit u
if GetSpellAbilityId()==1094935400 then
set g=ZI7()
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(GetTriggerUnit()),Condition(function EYG))
set u=FirstOfGroup(g)
call ZH7(g)
if u!=null then
call KillUnit(u)
endif
call RI7(GetSpellTargetUnit(),"4323")
call UnitAddAbility(GetSpellTargetUnit(),1097167976)
call UnitAddAbility(GetSpellTargetUnit(),1094939243)
call BG7(GetSpellTargetUnit())
set g=null
set u=null
endif
endfunction
function EAG takes integer i returns integer
if i==OJ4 then
return OR4
endif
if i==OK4 then
return OS4
endif
if i==OM4 then
return OT4
endif
if i==ON4 then
return OU4
endif
if i==OO4 then
return OV4
endif
if i==OP4 then
return OW4
endif
if i==OQ4 then
return OX4
endif
return 0
endfunction
function EBG takes integer i returns integer
if i==OJ4 then
return $A
endif
if i==OK4 then
return 9
endif
if i==OM4 then
return 8
endif
if i==ON4 then
return 7
endif
if i==OO4 then
return 6
endif
if i==OP4 then
return 5
endif
if i==OQ4 then
return 4
endif
return 0
endfunction
function ECG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
if A47(Z47)==false and Z47!=null then
call SetUnitScale(Z47,AP7(Z47)*BS,AP7(Z47)*BS,AP7(Z47)*BS)
endif
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function E3G takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local unit DA8=CreateUnit(GetOwningPlayer(ZO7),1697656901,GetUnitX(ZO7),GetUnitY(ZO7),0)
local trigger t=CreateTrigger()
local real DY8=EBG(GetSpellAbilityId())
set LP4="E3G"
call C47(ZO7,OY4,DY8)
call UnitMakeAbilityPermanent(ZO7,true,OY4)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),OY4,false)
call UnitAddAbility(DA8,EAG(GetSpellAbilityId()))
call IssueTargetOrderById(DA8,$D00DA,ZO7)
call BT8(ZO7,0,0)
if OI7(ZO7)then
call B_7(ZO7,DY8,3)
else
call B_7(ZO7,DY8,1.4)
endif
call TriggerRegisterTimerEvent(t,DY8+7.,false)
call TriggerAddCondition(t,Condition(function ECG))
call QG7(GetHandleId(t),"Hero",ZO7)
set t=null
set ZO7=null
set DA8=null
endfunction
function E6G takes nothing returns nothing
if EAG(GetSpellAbilityId())>0 then
call E3G()
endif
endfunction
function ELG takes nothing returns nothing
if GetSpellAbilityId()==1093677655 then
call UnitResetCooldown(GetTriggerUnit())
endif
endfunction
function E1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit HH9=QA7(RP7,"chicken")
local integer HQ9=R47(RP7,"newability")
local integer HR9=R47(RP7,"itemId0")
local integer HS9=R47(RP7,"itemId1")
local integer HT9=R47(RP7,"itemId2")
local integer HU9=R47(RP7,"itemId3")
local integer HV9=R47(RP7,"itemId4")
local integer HW9=R47(RP7,"itemId5")
local player HX9=QC7(RP7,"pPlayer0")
local player HY9=QC7(RP7,"pPlayer1")
local player HZ9=QC7(RP7,"pPlayer2")
local player HA9=QC7(RP7,"pPlayer3")
local player HB9=QC7(RP7,"pPlayer4")
local player HC9=QC7(RP7,"pPlayer5")
local integer H39=R47(RP7,"charges0")
local integer H69=R47(RP7,"charges1")
local integer HL9=R47(RP7,"charges2")
local integer H19=R47(RP7,"charges3")
local integer H09=R47(RP7,"charges4")
local integer H59=R47(RP7,"charges5")
set LP4="E1G"
call DisableTrigger(H84)
if GetTriggerEvalCount(t)==1 then
call UnitAddAbility(HH9,HQ9)
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
else
if HR9>0 then
set HZ4=CreateItem(HR9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HX9,false)
call SetItemUserData(HZ4,1)
endif
if H39>0 then
call SetItemCharges(HZ4,H39)
endif
if HS9>0 then
set HZ4=CreateItem(HS9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HY9,false)
call SetItemUserData(HZ4,1)
endif
if H69>0 then
call SetItemCharges(HZ4,H69)
endif
if HT9>0 then
set HZ4=CreateItem(HT9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HZ9,false)
call SetItemUserData(HZ4,1)
endif
if HL9>0 then
call SetItemCharges(HZ4,HL9)
endif
if HU9>0 then
set HZ4=CreateItem(HU9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HA9,false)
call SetItemUserData(HZ4,1)
endif
if H19>0 then
call SetItemCharges(HZ4,H19)
endif
if HV9>0 then
set HZ4=CreateItem(HV9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HB9,false)
call SetItemUserData(HZ4,1)
endif
if H09>0 then
call SetItemCharges(HZ4,H09)
endif
if HW9>0 then
set HZ4=CreateItem(HW9,GetUnitX(HH9),GetUnitY(HH9))
call UnitAddItem(HH9,HZ4)
call SetItemPlayer(HZ4,HC9,false)
call SetItemUserData(HZ4,1)
endif
if H59>0 then
call SetItemCharges(HZ4,H59)
endif
if MT[GetPlayerId(GetOwningPlayer(HH9))]==false then
call UnitRemoveType(HH9,UNIT_TYPE_PEON)
else
call UnitAddType(HH9,UNIT_TYPE_PEON)
endif
call SetUnitFlyHeight(HH9,$F0,0)
call Q47(RP7)
call RN7(t)
endif
call EnableTrigger(H84)
set t=null
set HH9=null
set HX9=null
set HY9=null
set HZ9=null
set HA9=null
set HB9=null
set HC9=null
return false
endfunction
function E0G takes unit HH9 returns nothing
local integer H_9=GetUnitTypeId(HH9)
local real x=GetUnitX(HH9)
local real y=GetUnitY(HH9)
local item I49
local item I79
local item I89
local item I99
local item ID9
local item IE9
local player HX9
local player HY9
local player HZ9
local player HA9
local player HB9
local player HC9
local integer HR9
local integer HS9
local integer HT9
local integer HU9
local integer HV9
local integer HW9
local integer H39=-1
local integer H69=-1
local integer HL9=-1
local integer H19=-1
local integer H09=-1
local integer H59=-1
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer HQ9
local item TS8
local integer i
local item E5G
set LP4="MorphCrow_Start"
set i=0
loop
exitwhen i>5
set E5G=UnitItemInSlot(HH9,i)
if OK7(E5G)==LV then
call UnitRemoveItem(HH9,E5G)
endif
set i=i+1
endloop
set I49=UnitItemInSlot(HH9,0)
set I79=UnitItemInSlot(HH9,1)
set I89=UnitItemInSlot(HH9,2)
set I99=UnitItemInSlot(HH9,3)
set ID9=UnitItemInSlot(HH9,4)
set IE9=UnitItemInSlot(HH9,5)
set HR9=GetItemTypeId(I49)
set HS9=GetItemTypeId(I79)
set HT9=GetItemTypeId(I89)
set HU9=GetItemTypeId(I99)
set HV9=GetItemTypeId(ID9)
set HW9=GetItemTypeId(IE9)
set HX9=GetItemPlayer(I49)
set HY9=GetItemPlayer(I79)
set HZ9=GetItemPlayer(I89)
set HA9=GetItemPlayer(I99)
set HB9=GetItemPlayer(ID9)
set HC9=GetItemPlayer(IE9)
set TS8=I49
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H39=GetItemCharges(TS8)
endif
set TS8=I79
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H69=GetItemCharges(TS8)
endif
set TS8=I89
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set HL9=GetItemCharges(TS8)
endif
set TS8=I99
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H19=GetItemCharges(TS8)
endif
set TS8=ID9
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H09=GetItemCharges(TS8)
endif
set TS8=IE9
if GetItemType(TS8)==ITEM_TYPE_ARTIFACT or B_8(OK7(TS8))then
set H59=GetItemCharges(TS8)
endif
call OJ7(I49)
call OJ7(I79)
call OJ7(I89)
call OJ7(I99)
call OJ7(ID9)
call OJ7(IE9)
if WM7(GetOwningPlayer(HH9))then
set HQ9=1395667017
else
set HQ9=1395667018
endif
if GetRandomInt(1,3)==1 then
set HQ9=1395667034
endif
call QN7(RP7,"pPlayer0",HX9)
call QN7(RP7,"pPlayer1",HY9)
call QN7(RP7,"pPlayer2",HZ9)
call QN7(RP7,"pPlayer3",HA9)
call QN7(RP7,"pPlayer4",HB9)
call QN7(RP7,"pPlayer5",HC9)
call Q97(RP7,"itemId0",HR9)
call Q97(RP7,"itemId1",HS9)
call Q97(RP7,"itemId2",HT9)
call Q97(RP7,"itemId3",HU9)
call Q97(RP7,"itemId4",HV9)
call Q97(RP7,"itemId5",HW9)
call Q97(RP7,"charges0",H39)
call Q97(RP7,"charges1",H69)
call Q97(RP7,"charges2",HL9)
call Q97(RP7,"charges3",H19)
call Q97(RP7,"charges4",H09)
call Q97(RP7,"charges5",H59)
call QG7(RP7,"chicken",HH9)
call Q97(RP7,"newability",HQ9)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function E1G))
set t=null
set HH9=null
set I49=null
set I79=null
set I89=null
set I99=null
set ID9=null
set IE9=null
set HX9=null
set HY9=null
set HZ9=null
set HA9=null
set HB9=null
set HC9=null
endfunction
function E2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(QA7(JZ7,"Source"))
local item E_G=PH7(CP7,SU[EW4])
set LP4="E2G"
if E_G==null then
set E_G=PH7(CP7,AU[EW4])
endif
if E_G!=null then
call RemoveItem(E_G)
call E0G(CP7)
else
call AV7(GetOwningPlayer(CP7),GetObjectName(1848652369))
endif
call Q47(JZ7)
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function F4G takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="MorphCrow"
call H99(CP7)
call TriggerRegisterTimerEvent(t,.05,false)
call TriggerAddCondition(t,Condition(function E2G))
call QG7(JZ7,"Source",CP7)
set t=null
endfunction
function F7G takes nothing returns boolean
if GetSpellAbilityId()==1093683012 then
call F4G(GetTriggerUnit())
endif
return false
endfunction
function F8G takes nothing returns boolean
local unit ZO7=GetTriggerUnit()
local item M47=GetManipulatedItem()
local integer id=GetItemTypeId(M47)
local integer i
set LP4=LP4+"(CustomPickUpItems_Main)"
if(id==SU[WC]or id==SU[E6])and IsUnitType(ZO7,UNIT_TYPE_HERO) then
set TV4[GetPlayerId(GetOwningPlayer(ZO7))]=GetItemX(M47)
set TW4[GetPlayerId(GetOwningPlayer(ZO7))]=GetItemY(M47)
endif
call LMF(ZO7,M47)
call LNF(ZO7,M47)
if(GetItemTypeId(M47)==SU[DJ4]or GetItemTypeId(M47)==SU[DK4])and OI7(ZO7)then
call UnitRemoveItem(ZO7,M47)
elseif GetItemTypeId(M47)==SU[DS4]and IsUnitType(ZO7,UNIT_TYPE_HERO) then
set i=(LoadInteger(C7,(GetHandleId(ZO7)),(750)))
if i>0 then
if(LoadBoolean(C7,(GetHandleId(ZO7)),(751)))==false then
call SaveBoolean(C7,(GetHandleId(ZO7)),(751),(true))
call SetItemCharges(M47,i)
endif
endif
elseif GetItemTypeId(M47)==SU[T0]and GetUnitTypeId(ZO7)!=1848651852 and NW4==false then
set NV4=ZO7
set NW4=true
call E58("AegisOn",GetPlayerId(GetOwningPlayer(ZO7)))
call YM7(bj_FORCE_ALL_PLAYERS,10.,P[GetPlayerId(GetOwningPlayer(ZO7))]+GetUnitName(ZO7)+"|r "+GetObjectName(1848657233))
elseif GetItemTypeId(M47)==SU[EW4]and OG7(ZO7)then
call F4G(ZO7)
elseif GetItemTypeId(M47)==SU[G34]and GetUnitTypeId(ZO7)==1164799855 then
call SetPlayerTechResearched(GetOwningPlayer(ZO7),1378889802,1)
elseif GetItemTypeId(M47)==SU[G14]and GetUnitTypeId(ZO7)==1211117641 then
set IM4=ZO7
call ExecuteFunc("ASD")
elseif GetItemTypeId(M47)==SU[GA4]and GetUnitTypeId(ZO7)==1432580716 then
call UnitAddAbility(ZO7,1093815106)
call UnitRemoveAbility(ZO7,1093815106)
call AddUnitAnimationProperties(ZO7,"upgrade",true)
call SetPlayerTechResearched(GetOwningPlayer(ZO7),1378889803,1)
endif
set ZO7=null
set M47=null
return false
endfunction
function F9G takes nothing returns nothing
local unit FDG=GetTriggerUnit()
local item FEG=PH7(FDG,SU[EW4])
set LP4="F9G"
if FEG==null then
set FEG=PH7(FDG,AU[EW4])
endif
if FEG!=null then
call OJ7(FEG)
call UnitRemoveAbility(FDG,1093686866)
call UnitAddAbility(FDG,1093686869)
call SetUnitState(FDG,UNIT_STATE_MANA,400)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",FDG,"origin"))
else
call AV7(GetOwningPlayer(FDG),(GetObjectName((1848652369))))
endif
set FDG=null
endfunction
function FFG takes nothing returns nothing
if GetSpellAbilityId()==1093686866 then
call F9G()
endif
endfunction
function FGG takes nothing returns nothing
local unit u=GetEnumUnit()
local integer i=0
local player p=GetOwningPlayer(GetTriggerUnit())
local item TS8
local integer id=GetPlayerId(p)
set LP4="FGG"
loop
exitwhen i>5
set TS8=UnitItemInSlot(u,i)
if TS8!=null and GetItemPlayer(TS8)==p then
call UnitRemoveItem(u,TS8)
call SetItemPosition(TS8,KU4[id],KV4[id])
endif
set i=i+1
endloop
set u=null
set TS8=null
endfunction
function FHG takes nothing returns nothing
local item TS8=GetEnumItem()
local unit u=OH4
local player p=GetOwningPlayer(u)
local integer id=GetPlayerId(p)
if GetWidgetLife(TS8)>0 and GetItemPlayer(TS8)==p and IsItemVisible(TS8) then
call SetItemPosition(TS8,KU4[id],KV4[id])
call UnitAddItem(KT4[id],TS8)
endif
set TS8=null
set u=null
set p=null
endfunction
function FIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit u=QA7(RP7,"u")
set OH4=u
if WM7(GetOwningPlayer(OH4))then
call EnumItemsInRect(ND,Condition(function WE7),function FHG)
else
call EnumItemsInRect(OD,Condition(function WE7),function FHG)
endif
if GetTriggerEvalCount(t)==2 then
call Q47(RP7)
call RN7(t)
endif
set t=null
set u=null
return false
endfunction
function FJG takes nothing returns boolean
return OI7(GetFilterUnit())
endfunction
function B_E takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local group g=ZI7()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="B_E"
call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),$514,Condition(function FJG))
call ForGroup(g,function FGG)
call ZH7(g)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function FIG))
call QG7(RP7,"u",u)
set u=null
set g=null
endfunction
function FKG takes nothing returns nothing
if GetSpellAbilityId()==1093743684 then
call B_E()
endif
endfunction
function FMG takes nothing returns nothing
local unit u=GetTriggerUnit()
local integer i=0
local item TS8
local integer id=GetPlayerId(GetOwningPlayer(u))
local region r=CreateRegion()
set LP4="FMG"
if WM7(GetOwningPlayer(u))then
call RegionAddRect(r,ND)
else
call RegionAddRect(r,OD)
endif
loop
exitwhen i>5
set TS8=UnitItemInSlot(u,i)
if YC7(OK7(TS8))==false and OK7(TS8)!=T0 and I59(TS8)==false then
call UnitRemoveItemFromSlot(u,i)
if(GetUnitTypeId(u)==1852010352 or IsUnitInRegion(r,u))and IsPlayerAlly(GetItemPlayer(TS8),GetOwningPlayer(u)) then
set id=GetPlayerId(GetItemPlayer(TS8))
call SetItemPosition(TS8,KU4[id],KV4[id])
endif
endif
set i=i+1
endloop
call RemoveRegion(r)
set u=null
set r=null
endfunction
function FNG takes nothing returns nothing
if GetSpellAbilityId()==1093743416 or GetSpellAbilityId()==1093743683 then
call FMG()
endif
endfunction
function FOG takes nothing returns nothing
if GetSpellAbilityId()==1093743191 and GetUnitAbilityLevel(GetTriggerUnit(),1114665832)>0 then
call UnitRemoveAbility(GetTriggerUnit(),1114665832)
endif
endfunction
function FPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="FPG"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
else
if E38(GetEventDamage())and IsUnitAlly(GetEventDamageSource(),GetOwningPlayer(GetTriggerUnit()))==false and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and p3==false then
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)or GetUnitAbilityLevel(GetEventDamageSource(),1093678162)==0 then
call DisableTrigger(t)
set p3=true
call D38(GetTriggerUnit(),GetEventDamageSource(),3,GetEventDamage())
set p3=false
call EnableTrigger(t)
else
call DisableTrigger(t)
set p3=true
call D38(GetTriggerUnit(),G7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))],3,GetEventDamage())
set p3=false
call EnableTrigger(t)
endif
endif
endif
set t=null
return false
endfunction
function FQG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,4.5,false)
call TriggerAddCondition(t,Condition(function FPG))
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpikeBarrier\\SpikeBarrier.mdl",p5,"chest"))
set t=null
set p5=null
endfunction
function FRG takes nothing returns nothing
if GetSpellAbilityId()==1093743959 then
call FQG()
endif
endfunction
function FSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real a=R77(RP7,"a")
local real d=R77(RP7,"d")
local real x=AY7(GetUnitX(m5)+d/ $A*Cos(a*bj_DEGTORAD))
local real y=AZ7(GetUnitY(m5)+d/ $A*Sin(a*bj_DEGTORAD))
if GetTriggerEvalCount(t)==$B or GetTriggerEventId()==EVENT_UNIT_DEATH or RG7(m5,"PowerCogShocked") then
if(R87(RP7,"AI"))then
call J3(m5,false)
endif
call Q47(RP7)
call RN7(t)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",x,y))
if RG7(m5,"4306")==false and RG7(m5,"4324")==false and GetUnitAbilityLevel(m5,1110456406)==0 then
call BW7(x,y,$96)
call SetUnitX(m5,x)
call SetUnitY(m5,y)
endif
endif
set m5=null
set t=null
return false
endfunction
function FTG takes nothing returns nothing
local unit m5=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local real x
local real y
local real d
local real a
local integer i=-1
local boolean FUG=false
if GetSpellTargetItem()!=null then
set m5=GetTriggerUnit()
endif
call RR7(m5,"4414",3)
set a=GetUnitFacing(m5)
loop
exitwhen FUG or i==23
set i=i+1
set x=AY7(GetUnitX(m5)+(600-i*25)*Cos(a*bj_DEGTORAD))
set y=AZ7(GetUnitY(m5)+(600-i*25)*Sin(a*bj_DEGTORAD))
if(IsPointInRegion(IT4,((x)*1.),((y)*1.)))==false then
set FUG=true
endif
endloop
set d=N67(x,y,GetUnitX(m5),GetUnitY(m5))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FSG))
call QG7(RP7,"Target",m5)
call QD7(RP7,"a",(a)*1.)
call QD7(RP7,"d",(d)*1.)
call QF7(RP7,"AI",(WQ7(GetOwningPlayer(m5)))and(IsUnitAlly(m5,GetOwningPlayer(GetTriggerUnit()))))
set m5=null
set t=null
endfunction
function FVG takes nothing returns nothing
if GetSpellAbilityId()==1093744973 and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) or R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")==false then
call FTG()
endif
endif
endfunction
function FWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="FWG"
if GetTriggerEvalCount(t)>40 or GetTriggerEventId()==EVENT_UNIT_DEATH or Y57(p5)or RG7(p5,"Teleporting")then
call UnitRemoveAbility(p5,1097167980)
call Q47(RP7)
call RN7(t)
endif
set p5=null
set t=null
return false
endfunction
function FXG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t
local integer JZ7
set LP4="FXG"
if OI7(p5)==false then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call UnitAddAbility(p5,1097167980)
call UnitMakeAbilityPermanent(p5,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1097167980,false)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function FWG))
call QG7(JZ7,"Source",p5)
endif
set p5=null
set t=null
endfunction
function FYG takes nothing returns nothing
if GetSpellAbilityId()==1093747011 and Y57(GetTriggerUnit())==false then
call FXG()
endif
endfunction
function FZG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x
local real y
set LP4="FZG"
if WM7(GetOwningPlayer(p5))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
call IssuePointOrderById(p5,$D0012,x,y)
set p5=null
endfunction
function FAG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x
local real y
if WM7(GetOwningPlayer(CP7))then
set x=-4533
set y=$486
else
set x=$C76
set y=-35
endif
call IssuePointOrderById(CP7,$D0012,x,y)
set CP7=null
endfunction
function FBG takes nothing returns nothing
if GetSpellAbilityId()==1093747027 then
call FZG()
elseif GetSpellAbilityId()==1093815123 then
call FAG()
endif
endfunction
function FCG takes nothing returns nothing
if RG7(GetEnumUnit(),"PipeOfInsightOn") then
call AV7(GetOwningPlayer(GetEnumUnit()),GetObjectName(1848652365))
else
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call RR7(GetEnumUnit(),"PipeOfInsightOn",50)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1110458964)==0 and GetUnitAbilityLevel(GetEnumUnit(),1110458965)==0 then
call IssueTargetOrderById(Mw,$D00DA,GetEnumUnit())
endif
endif
endfunction
function F3G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local group g=ZI7()
set LP4="F3G"
set Mw=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call UnitAddAbility(Mw,1093748054)
call GroupEnumUnitsInRange(g,GetUnitX(p5),GetUnitY(p5),525,Condition(function DM8))
call ForGroup(g,function FCG)
call ZH7(g)
set p5=null
set g=null
endfunction
function F6G takes nothing returns nothing
if GetSpellAbilityId()==1093748055 then
call F3G()
endif
endfunction
function FLG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
set LP4="FLG"
call QF7(GetHandleId(Z47),"MantaBlocked",true)
set Z47=null
endfunction
function F1G takes nothing returns nothing
if(GetSpellAbilityId()==1093681720 or GetSpellAbilityId()==1093752645)and ZG7(GetTriggerUnit()) then
call FLG()
endif
endfunction
function F0G takes integer id returns boolean
return id==1969711215 or id==1970169187 or id==1702061422 or id==1701081721 or id==1966092337 or id==1966092338 or id==1697656918 or id==1697656919 or id==1700946284 or id==1697657398 or id==1970107511 or id==1966092370
endfunction
function F5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
set LP4="F5G"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>8 then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
else
if GetUnitState(m5,UNIT_STATE_LIFE)>(150./8.+.5)then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)-150./8.)
else
set VL4[GetPlayerId(GetOwningPlayer(m5))]=true
set E77=true
call D38(p5,m5,1,50)
set VL4[GetPlayerId(GetOwningPlayer(m5))]=false
set E77=false
endif
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function F2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
set LP4="F2G"
if GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and(F0G(GetUnitTypeId(GetEventDamageSource()))==false and(GetOwningPlayer(GetEventDamageSource())!=A7 or GetUnitTypeId(GetEventDamageSource())==1848651852)and GetEventDamage()>0)or V64)then
call UnitRemoveAbility(m5,1110459207)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
return false
endfunction
function F_G takes nothing returns nothing
local trigger t
local integer RP7
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit DA8
local integer i=0
local boolean G4G=false
local boolean G7G=false
local integer YT8
set LP4="F_G"
if m5==null then
set m5=GetTriggerUnit()
endif
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
loop
exitwhen i>5 or G7G
if OM7(UnitItemInSlot(p5,i))==DX4 then
set YT8=GetItemCharges(UnitItemInSlot(p5,i))
if YT8>0 then
set G4G=true
set YT8=YT8-1
else
set G7G=true
set G4G=false
endif
endif
set i=i+1
endloop
if G4G then
set t=CreateTrigger()
set RP7=GetHandleId(t)
if IsUnitAlly(m5,GetOwningPlayer(p5)) then
call UnitAddAbility(DA8,1093750093)
call IssueTargetOrderById(DA8,$D0281,m5)
call QG7(RP7,"Target",m5)
call TriggerRegisterTimerEvent(t,L3,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function F2G))
else
call QG7(RP7,"Target",m5)
call QG7(RP7,"Source",p5)
call QH7(RP7,"FX",AddSpecialEffectTarget("war3mapImported\\Urn_Enemy.mdx",m5,"overhead"))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function F5G))
endif
endif
set p5=null
set DA8=null
set m5=null
set t=null
endfunction
function G8G takes nothing returns nothing
if GetSpellAbilityId()==1093750095 then
call F_G()
endif
endfunction
function G9G takes nothing returns nothing
local integer i=0
set LP4="G9G"
loop
exitwhen i>16
set VL4[i]=false
set i=i+1
endloop
endfunction
function GDG takes nothing returns nothing
if BP8(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093753432,false)
call CA7(GetEnumUnit(),1093753432,1,XC4,1110459480)
endif
endfunction
function GEG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer i=0
local boolean GFG=false
local boolean GGG=false
local integer YT8
local group g
set LP4="GEG"
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),925,Condition(function C07))
call ForGroup(g,function GDG)
call ZH7(g)
set g=null
set CP7=null
endfunction
function GHG takes nothing returns nothing
if GetSpellAbilityId()==1093753431 then
call GEG()
endif
endfunction
function GIG takes unit u returns boolean
local integer JM7=GetUnitTypeId(u)
return JM7==1211122232 or JM7==1848657482 or JM7==1848657481 or JM7==1848657462 or JM7==1848657480 or JM7==1966092371
endfunction
function GJG takes unit u returns boolean
local integer id=GetUnitTypeId(u)
return YI7(id)
endfunction
function GKG takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),X34)and A47(GetFilterUnit())==false and(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) or IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE) or GJG(GetFilterUnit()))and GIG(GetFilterUnit())==false)!=null
endfunction
function GMG takes unit CP7 returns boolean
local group g=ZI7()
local boolean GFG
set LP4="SmokeOfDeceit_IsNearby"
set X34=GetOwningPlayer(CP7)
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$41A,Condition(function GKG))
set GFG=FirstOfGroup(g)!=null
call ZH7(g)
return GFG
endfunction
function GNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g
local integer ZD8
local boolean GOG
set LP4="GNG"
if GetTriggerEventId()==EVENT_PLAYER_UNIT_ATTACKED then
if GetAttacker()==CP7 then
call UnitRemoveAbility(CP7,1093808204)
call UnitRemoveAbility(CP7,1093808211)
call UnitRemoveAbility(CP7,1110459698)
call UnitRemoveAbility(CP7,1110456665)
if((LoadInteger(C7,(GetHandleId((CP7))),((4302))))==1)==false then
call UnitSetUsesAltIcon(CP7,false)
endif
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
set GOG=(LoadBoolean(C7,(JZ7),(671)))
set ZD8=(LoadInteger(C7,(JZ7),(34)))
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
set g=ZI7()
set X34=GetOwningPlayer(CP7)
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$41A,Condition(function GKG))
if GetUnitAbilityLevel(CP7,1110456665)>0 then
call SaveBoolean(C7,(JZ7),(671),(true))
elseif GOG then
call SaveBoolean(C7,(JZ7),(671),(false))
call UnitRemoveAbility(CP7,1093808204)
call Z27(CP7,1093808204)
endif
if ZD8>400 or FirstOfGroup(g)!=null then
call UnitRemoveAbility(CP7,1093808204)
call UnitRemoveAbility(CP7,1093808211)
call UnitRemoveAbility(CP7,1110459698)
call UnitRemoveAbility(CP7,1110456665)
if((LoadInteger(C7,(GetHandleId((CP7))),((4302))))==1)==false then
call UnitSetUsesAltIcon(CP7,false)
endif
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
call ZH7(g)
endif
set t=null
set CP7=null
set g=null
return false
endfunction
function GPG takes nothing returns nothing
local unit CP7=GetEnumUnit()
local trigger t
local integer JZ7
if WO7(GetOwningPlayer(CP7))and GMG(CP7)==false then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7))==false and Y27(GetLocalPlayer())==false then
call UnitSetUsesAltIcon(CP7,true)
endif
call Z27(CP7,1093808204)
call UnitMakeAbilityPermanent(CP7,true,1093808204)
if BP8(CP7)==false then
call Z27(CP7,1093808211)
call UnitMakeAbilityPermanent(CP7,true,1093808211)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093808211,false)
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveInteger(C7,(JZ7),(34),(0))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveBoolean(C7,(JZ7),(671),(false))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\SmokeOfDeceit.mdx",CP7,"chest")))
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function GNG))
set t=null
endif
set CP7=null
endfunction
function GQG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
set LP4="GQG"
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$4C9,Condition(function C17))
call ForGroup(g,function GPG)
call ZH7(g)
set CP7=null
set g=null
endfunction
function GRG takes nothing returns nothing
if GetSpellAbilityId()==1093808182 then
call GQG()
endif
endfunction
function InitTrig_Smoke_of_Deceit takes nothing returns nothing
call SetAltMinimapIcon("war3mapImported\\black.blp")
endfunction
function GSG takes nothing returns nothing
if BP8(GetEnumUnit())==false then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810246,false)
call CA7(GetEnumUnit(),1093810246,1,ZN4,1110459729)
endif
endfunction
function GTG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
call GroupEnumUnitsInRange(g,x,y,575,Condition(function LV7))
call ForGroup(g,function GSG)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\DarkLightningNova.mdx",x,y))
set CP7=null
set g=null
endfunction
function GUG takes nothing returns nothing
if GetSpellAbilityId()==1093810244 then
call GTG()
endif
endfunction
function GVG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1093815091)
call IssueTargetOrderById(DA8,$D006B,J67)
set CP7=null
set J67=null
set DA8=null
endfunction
function GWG takes nothing returns nothing
if GetSpellAbilityId()==1093813569 and ZG7(GetSpellTargetUnit())==false then
call GVG()
endif
endfunction
function GXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZD8==$A or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetEventDamage()>20)then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+17)
endif
set t=null
set CP7=null
return false
endfunction
function GYG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function GXG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\TranquilBootsHeal.mdx",CP7,"origin")))
set CP7=null
set t=null
endfunction
function GZG takes nothing returns nothing
if GetSpellAbilityId()==1093815089 then
call GYG()
endif
endfunction
function GAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local unit DA8
if GetUnitX(CP7)!=x or GetUnitY(CP7)!=y or(GetUnitAbilityLevel(CP7,1110460216)==0 and GetTriggerEvalCount(t)>R2I(2.6/.05))then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call RK7(CP7,"ShadowAmu|4330")
call UnitRemoveAbility(CP7,1110460214)
call UnitRemoveAbility(CP7,1110460216)
elseif GetTriggerEvalCount(t)==R2I(2.6/.05)then
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call UnitAddAbility(DA8,1093815861)
call IssueTargetOrderById(DA8,$D0065,CP7)
call RK7(CP7,"ShadowAmu|4330")
set DA8=null
endif
set t=null
set CP7=null
return false
endfunction
function GBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local integer GCG=(LoadInteger(C7,(JZ7),(375)))
local integer id=GetUnitCurrentOrder(CP7)
if GetUnitX(CP7)!=x or GetUnitY(CP7)!=y then
call IssueImmediateOrderById(CP7,$D0019)
call SaveReal(C7,(GCG),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(GCG),(7),((GetUnitY(CP7))*1.))
elseif id==0 or id==$D0005 or id==$D000F or id==$D0003 then
call IssueImmediateOrderById(CP7,$D0019)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function G3G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local trigger t2=CreateTrigger()
local integer MED=GetHandleId(t2)
local string G6G="Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl"
if GetLocalPlayer()!=GetOwningPlayer(CP7)then
set G6G=""
endif
call RI7(CP7,"ShadowAmu|4330")
call DestroyEffect(AddSpecialEffectTarget(G6G,CP7,"chest"))
call DestroyEffect(AddSpecialEffectTarget(G6G,CP7,"hand left"))
call DestroyEffect(AddSpecialEffectTarget(G6G,CP7,"hand right"))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function GAG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(CP7))*1.))
call TriggerRegisterTimerEvent(t2,.01,false)
call TriggerAddCondition(t2,Condition(function GBG))
call SaveUnitHandle(C7,(MED),(2),(CP7))
call SaveReal(C7,(MED),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(MED),(7),((GetUnitY(CP7))*1.))
call SaveInteger(C7,(MED),(375),(JZ7))
set CP7=null
set t=null
endfunction
function GLG takes nothing returns nothing
if GetSpellAbilityId()==1093815857 and RG7(GetTriggerUnit(),"ShadowAmu|4330")==false then
call G3G()
endif
endfunction
function G1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JA7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,JA7,(17)))
local integer G0G=(LoadInteger(C7,JA7,(34)))
if(GetTriggerEventId()==EVENT_WIDGET_DEATH or GetTriggerEvalCount(t)>=G0G or Y57(J67))then
call L97(J67)
call DestroyEffect((LoadEffectHandle(C7,JA7,(32))))
call FlushChildHashtable(C7,JA7)
call RN7(t)
endif
set t=null
set J67=null
return false
endfunction
function G5G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8
local integer DB8=2
local real G2G=4.5
local trigger t=CreateTrigger()
local integer JA7=GetHandleId(t)
if IsUnitType(J67,UNIT_TYPE_MELEE_ATTACKER) then
set DB8=1
set G2G=3
endif
call L77(J67)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function G1G))
call SaveUnitHandle(C7,JA7,(17),(J67))
call SaveInteger(C7,JA7,(34),(R2I(G2G*$A)))
call SaveEffectHandle(C7,JA7,(32),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",J67,"overhead")))
set CP7=null
set J67=null
set DA8=null
endfunction
function G_G takes nothing returns nothing
if GetSpellAbilityId()==1093815092 and ZG7(GetSpellTargetUnit())==false then
call G5G()
endif
endfunction
function H4G takes integer DB8,unit CP7,unit J67 returns nothing
set E77=true
call D38(CP7,J67,1,300+100*DB8)
set E77=false
endfunction
function H7G takes nothing returns nothing
local integer H8G=0
if GetSpellAbilityId()==1093677647 then
set H8G=1
endif
if GetSpellAbilityId()==1093679193 then
set H8G=2
endif
if GetSpellAbilityId()==1093679194 then
set H8G=3
endif
if GetSpellAbilityId()==1093679408 then
set H8G=4
endif
if GetSpellAbilityId()==1093679410 then
set H8G=5
endif
if H8G>0 and ZG7(GetSpellTargetUnit())==false then
call H4G(H8G,GetTriggerUnit(),GetSpellTargetUnit())
endif
endfunction
function H9G takes nothing returns nothing
if GetSpellAbilityId()==1093814353 then
call YZ8(GetTriggerUnit(),GetSpellTargetUnit())
endif
endfunction
function HDG takes unit CP7,integer XZ7,real x,real y returns nothing
local unit HEG=CreateUnit(GetOwningPlayer(CP7),XZ7,x,y,0)
set LP4="Corruptor_Spawn"
call UnitApplyTimedLife(HEG,1112820806,$F)
set HEG=null
endfunction
function HFG takes nothing returns nothing
local unit HEG
local real x
local real y
set LP4="HFG"
if GetSpellAbilityId()==1093753420 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call HDG(GetTriggerUnit(),1848659021,x,y)
elseif GetSpellAbilityId()==1093753421 then
set x=GetDestructableX(GetSpellTargetDestructable())
set y=GetDestructableY(GetSpellTargetDestructable())
call HDG(GetTriggerUnit(),1848659022,x,y)
endif
set HEG=null
endfunction
function HGG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="HGG"
call UnitRemoveAbility(CP7,1093753418)
call UnitRemoveAbility(J67,1093753418)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
set J67=null
return false
endfunction
function HHG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="HHG"
call TriggerRegisterTimerEvent(t,7,false)
call TriggerAddCondition(t,Condition(function HGG))
call SaveUnitHandle(C7,(JZ7),(2),(GetTriggerUnit()))
call SaveUnitHandle(C7,(JZ7),(17),(GetSpellTargetUnit()))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetSpellTargetUnit(),"chest")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",GetTriggerUnit(),"chest")))
call UnitAddAbility(GetTriggerUnit(),1093753418)
call UnitAddAbility(GetSpellTargetUnit(),1093753418)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093753418)
call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093753418)
set t=null
endfunction
function HIG takes nothing returns nothing
if GetSpellAbilityId()==1093753417 and ZG7(GetSpellTargetUnit())==false then
call HHG()
endif
endfunction
function HJG takes nothing returns nothing
local unit MQ7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8
set LP4="HJG"
if GetSpellTargetUnit()==null then
if GetSpellAbilityId()==1095331948 then
set DA8=CreateUnit(GetOwningPlayer(MQ7),1697656901,GetUnitX(MQ7),GetUnitY(MQ7),0)
call UnitAddAbility(DA8,1093752641)
call IssueTargetOrderById(DA8,$D0281,MQ7)
set DA8=null
elseif GetSpellAbilityId()==1095331954 then
set DA8=CreateUnit(GetOwningPlayer(MQ7),1697656901,GetUnitX(MQ7),GetUnitY(MQ7),0)
call UnitAddAbility(DA8,1095331954)
call IssueTargetOrderById(DA8,$D0281,MQ7)
set DA8=null
endif
endif
set MQ7=null
set J67=null
endfunction
function HKG takes nothing returns nothing
if GetSpellAbilityId()==1095331948 or GetSpellAbilityId()==1095331954 then
call HJG()
endif
endfunction
function HMG takes integer DB8 returns integer
if DB8==1 then
return 25
elseif DB8==2 then
return 41
elseif DB8==3 then
return 62
elseif DB8==4 then
return 88
elseif DB8==5 then
return 119
elseif DB8==6 then
return $9B
endif
return 25
endfunction
function HNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(34)))
set LP4="HNG"
if(GetTriggerEventId()==EVENT_UNIT_DEATH and GetKillingUnit()==CP7)or(GetTriggerEventId()==EVENT_UNIT_DAMAGED and GetUnitAbilityLevel(J67,1110459731)>0)then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl",GetUnitX(J67),GetUnitY(J67)))
call AddHeroXP(CP7,R2I(HMG(DB8)*2.5),true)
call CH7(GetOwningPlayer(CP7),J67,$BE)
set VF4[GetPlayerId(GetOwningPlayer(CP7))]=VF4[GetPlayerId(GetOwningPlayer(CP7))]+$BE
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(J67)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function HOG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitLevel(J67)
set LP4="HOG"
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(34),(DB8))
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function HNG))
set t=null
set CP7=null
set J67=null
endfunction
function HPG takes nothing returns nothing
if GetSpellAbilityId()==1093810265 then
call HOG()
endif
endfunction
function HQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer YY7=GetHandleId(t)
local unit CB9=(LoadUnitHandle(C7,(YY7),(2)))
local real HRG=(LoadReal(C7,(YY7),($F2)))
local real HSG=(LoadReal(C7,(YY7),(529)))
local real HTG=(LoadReal(C7,(YY7),(530)))
local real HUG=GetUnitState(CB9,UNIT_STATE_MANA)
local real HVG=GetUnitState(CB9,UNIT_STATE_MAX_MANA)
local real HWG=HRG-HUG
set LP4="HQG"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(YY7))
call RN7(t)
elseif GetTriggerEvalCount(t)==20*$A then
call FlushChildHashtable(C7,(YY7))
call RN7(t)
if HSG<$96 then
call SetUnitState(CB9,UNIT_STATE_MANA,HUG-($96-HSG-HTG))
endif
else
if HWG>0 then
set HSG=HSG+(HRG-HUG)
if HTG>0 then
if HWG>HTG then
call SetUnitState(CB9,UNIT_STATE_MANA,HUG+HTG)
set HTG=0
else
if HTG>(HVG-HUG)then
set HTG=HTG-(HVG-HUG)
call SetUnitState(CB9,UNIT_STATE_MANA,HUG+HVG-HUG)
else
set HTG=HTG-HWG
call SetUnitState(CB9,UNIT_STATE_MANA,HUG+HWG)
endif
endif
endif
endif
set HRG=HUG
call SaveReal(C7,(YY7),($F2),((HRG)*1.))
call SaveReal(C7,(YY7),(529),((HSG)*1.))
call SaveReal(C7,(YY7),(530),((HTG)*1.))
endif
set t=null
set CB9=null
return false
endfunction
function HXG takes nothing returns nothing
local unit CB9=GetTriggerUnit()
local real E7E=GetUnitState(CB9,UNIT_STATE_LIFE)
local trigger t=CreateTrigger()
local integer YY7=GetHandleId(t)
local real HUG=GetUnitState(CB9,UNIT_STATE_MANA)
set LP4="HXG"
if E7E>$97 then
call SetUnitState(CB9,UNIT_STATE_LIFE,E7E-$96)
else
call SetUnitState(CB9,UNIT_STATE_LIFE,1)
endif
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",CB9,"origin",2)
call SetUnitState(CB9,UNIT_STATE_MANA,HUG+$96)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,CB9,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HQG))
call SaveUnitHandle(C7,(YY7),(2),(CB9))
call SaveReal(C7,(YY7),($F2),((GetUnitState(CB9,UNIT_STATE_MANA))*1.))
call SaveReal(C7,(YY7),(529),((0)*1.))
if(HUG+$96)>GetUnitState(CB9,UNIT_STATE_MAX_MANA)then
call SaveReal(C7,(YY7),(530),(((HUG+$96)-GetUnitState(CB9,UNIT_STATE_MAX_MANA))*1.))
endif
set CB9=null
endfunction
function HYG takes nothing returns nothing
if GetSpellAbilityId()==1093751096 then
call HXG()
endif
endfunction
function HZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="HZG"
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(CP7,1093751107)
call UnitRemoveAbility(CP7,1110459225)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set CP7=null
set t=null
return false
endfunction
function HAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="HAG"
if GetTriggerEvalCount(t)>30 or GetTriggerEventId()==EVENT_UNIT_DEATH or((LoadInteger(C7,(GetHandleId((CP7))),((4256))))==1)then
call UnitRemoveAbility(CP7,1097167980)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set CP7=null
set t=null
return false
endfunction
function HBG takes unit u returns nothing
local unit CP7=u
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call UnitAddAbility(CP7,1097167980)
call UnitMakeAbilityPermanent(CP7,true,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1097167980,false)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HAG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function HCG takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local real THD=(LoadReal(C7,(JZ7),(20)))
local trigger t
if IsPlayerAlly(GetOwningPlayer(J67),GetOwningPlayer(CP7)) and CP7!=J67 then
call HBG(J67)
elseif CP7!=J67 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093751107,false)
call UnitAddAbility(J67,1093751107)
call UnitMakeAbilityPermanent(J67,true,1093751107)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function HZG))
call SaveUnitHandle(C7,(JZ7),(2),(J67))
call HBG(J67)
call BO7("+"+I2S(R2I(THD)),2,J67,.027,3,$D8,120,$D8)
set E77=true
call D38(CP7,J67,1,THD)
set E77=false
endif
call HBG(CP7)
set CP7=null
set J67=null
endfunction
function H3G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t2=B27(CP7,J67,1747993171,"HCG",$3E8)
local integer MED=GetHandleId(t2)
local integer CJ9=Y_7(CP7)
local real H6G
if CJ9==2 then
set H6G=GetHeroAgi(CP7,true)
elseif CJ9==3 then
set H6G=GetHeroStr(CP7,true)
elseif CJ9==1 then
set H6G=GetHeroInt(CP7,true)
endif
call SaveReal(C7,(MED),(20),((H6G*2.+75)*1.))
set CP7=null
set J67=null
set t2=null
endfunction
function HLG takes nothing returns nothing
if GetSpellAbilityId()==1093751108 and(IsPlayerAlly(GetOwningPlayer(GetSpellTargetUnit()),GetOwningPlayer(GetTriggerUnit())) or ZG7(GetSpellTargetUnit())==false)then
call H3G()
endif
endfunction
function H1G takes nothing returns nothing
call SetUnitState(GetEnumUnit(),UNIT_STATE_MANA,GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)+$87)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",GetEnumUnit(),"origin"))
endfunction
function H0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group g=ZI7()
set LP4="H0G"
set IM4=CP7
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),25+600,Condition(function LA7))
call ForGroup(g,function H1G)
call ZH7(g)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set g=null
set CP7=null
set t=null
return false
endfunction
function H5G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g
local trigger t
set LP4="H5G"
if GetSpellAbilityId()==1093684023 then
if GetUnitTypeId(CP7)!=1211117642 then
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function H0G))
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(CP7))
set t=null
else
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)+25)
endif
endif
set CP7=null
set g=null
set t=null
endfunction
function H2G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8
set LP4="H2G"
if GetSpellAbilityId()==1093751863 and(ZG7(GetSpellTargetUnit())==false or IsPlayerAlly(GetOwningPlayer(CP7),GetOwningPlayer(J67)))then
if GetSpellTargetItem()!=null then
set J67=GetTriggerUnit()
endif
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1095328633)
call IssueTargetOrderById(DA8,$D00B0,J67)
endif
set CP7=null
set J67=null
set DA8=null
endfunction
function H_G takes nothing returns boolean
if GetUnitTypeId(GetTriggerUnit())==1697656901 then
return false
endif
call IQ9()
call HO9()
call IG9()
call DXG()
call ENG()
call EWG()
call EZG()
call E6G()
call IJ9()
call EXG()
call ELG()
call USF()
call H49()
call UAF()
call FFG()
call U_F()
call UCF()
call FNG()
call FKG()
call CPF()
call FOG()
call FRG()
call FVG()
call FYG()
call FBG()
call F7G()
call F6G()
call F1G()
call G8G()
call HYG()
call HLG()
call H2G()
call H5G()
call HPG()
call HKG()
call HIG()
call HFG()
call GHG()
call GRG()
call GUG()
call GWG()
call H9G()
call H7G()
call GZG()
call G_G()
call GLG()
if GetSpellAbilityId()==1093815095 and ZG7(GetSpellTargetUnit())==false then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\LevelerStunFX.mdx",GetSpellTargetUnit(),"head"))
endif
return false
endfunction
function I4G takes nothing returns boolean
call D7G()
call D8G()
call DFG()
call DKG()
call IW9()
call DPG()
call DQG()
call DRG()
call DSG()
call DUG()
return false
endfunction
function I7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit I8G=QA7(RP7,"Caster")
local unit m5=QA7(RP7,"Target")
local effect FX=Q17(RP7,"FX")
local player p=GetOwningPlayer(Z47)
set LP4="I7G"
call UnitShareVision(m5,p,false)
call DestroyEffect(FX)
call RemoveUnit(I8G)
call UnitRemoveAbility(m5,1110455880)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
set I8G=null
set m5=null
set FX=null
set p=null
return false
endfunction
function I9G takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local player p=GetOwningPlayer(Z47)
local unit I8G
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local string s="effects\\Snipe Target.mdx"
set LP4="I9G"
if IsPlayerAlly(GetLocalPlayer(),p)==false and Y27(GetLocalPlayer())==false then
set s=""
endif
call UnitShareVision(m5,p,true)
set I8G=CreateUnit(GetOwningPlayer(m5),1697657170,0,0,0)
call Z27(I8G,1093684809)
call QG7(RP7,"Target",m5)
call QG7(RP7,"Hero",Z47)
call QG7(RP7,"Caster",I8G)
call QH7(RP7,"FX",AddSpecialEffectTarget(s,m5,"overhead"))
call TriggerRegisterTimerEvent(t,4,false)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function I7G))
set t=null
set Z47=null
set m5=null
set I8G=null
set p=null
endfunction
function IDG takes nothing returns boolean
if GetSpellAbilityId()==1093678160 then
call I9G()
endif
return false
endfunction
function J78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="J78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(t,Condition(function IDG))
set t=null
endfunction
function IEG takes nothing returns boolean
local real d
set LP4="IEG"
if IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) then
set d=N67(IJ4,IK4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IH4 then
set IH4=d
set IM4=GetFilterUnit()
endif
endif
return false
endfunction
function IFG takes unit IGG,real x,real y returns unit
local group g=ZI7()
set LP4="oWe"
set IM4=null
set IN4=IGG
set IH4=99999
set IJ4=x
set IK4=y
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function IEG))
call ZH7(g)
set g=null
return IM4
endfunction
function IHG takes nothing returns boolean
local real d
set LP4="IHG"
if GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and A47(GetFilterUnit())==false and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==false and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(IN4)) then
set d=N67(IJ4,IK4,GetUnitX(GetFilterUnit()),GetUnitY(GetFilterUnit()))
if d<IH4 then
set IH4=d
set IM4=GetFilterUnit()
endif
endif
return false
endfunction
function IIG takes unit IGG,real x,real y returns unit
local group g=ZI7()
set LP4="oze"
set IM4=null
set IN4=IGG
set IH4=99999
set IJ4=x
set IK4=y
call GroupEnumUnitsInRange(g,x,y,$7D0,Condition(function IHG))
call ZH7(g)
set g=null
return IM4
endfunction
function IJG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l
local real x
local real y
local unit m5=GetSpellTargetUnit()
set LP4="IJG"
if m5==null then
set l=GetSpellTargetLoc()
set x=GetLocationX(l)
set y=GetLocationY(l)
call RemoveLocation(l)
if GetSpellAbilityId()==1093682008 then
set m5=IFG(Z47,x,y)
else
set m5=IIG(Z47,x,y)
endif
set x=GetUnitX(m5)
set y=GetUnitY(m5)
else
set x=GetUnitX(GetSpellTargetUnit())
set y=GetUnitY(GetSpellTargetUnit())
endif
if(IsUnitAlly(Z47,GetLocalPlayer())and GetLocalPlayer()!=GetOwningPlayer(Z47))or(R8 and(GetLocalPlayer()==KW4 or GetLocalPlayer()==KX4))then
call PingMinimapEx(x,y,3,$FF,$FF,$FF,false)
endif
set Z47=null
set l=null
endfunction
function IKG takes nothing returns boolean
if GetSpellAbilityId()==1093682008 or GetSpellAbilityId()==1095331188 then
call IJG()
endif
return false
endfunction
function IMG takes unit ING returns nothing
local group g=ZI7()
local real x=GetUnitX(ING)
local real y=GetUnitY(ING)
local unit IOG
local unit IPG=CreateUnit(GetOwningPlayer(ING),1697656901,x,y,0)
local integer IQG=GetUnitAbilityLevel(ING,1093687860)
set LP4="BatteryAssault_Attack"
set IM4=ING
call GroupEnumUnitsInRange(g,x,y,300,Condition(function LL7))
set IOG=GroupPickRandomUnit(g)
call ZH7(g)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",ING,"origin"))
if IOG!=null then
call Z27(IPG,1093687863)
call SetUnitAbilityLevel(IPG,1093687863,IQG)
call IssueTargetOrderById(IPG,$D007F,IOG)
endif
set g=null
set IOG=null
set IPG=null
endfunction
function IRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer ISG=GetHandleId(t)
local integer ITG=GetTriggerEvalCount(t)
local unit IUG=QA7(ISG,"Hero")
set LP4="IRG"
if ITG>$F or GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(ISG)
call RN7(t)
else
call IMG(IUG)
endif
set t=null
set IUG=null
return false
endfunction
function IVG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer ISG=GetHandleId(t)
local unit IUG=GetTriggerUnit()
set LP4="IVG"
call TriggerRegisterTimerEvent(t,.7,true)
call TriggerRegisterUnitEvent(t,IUG,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function IRG))
call QG7(ISG,"Hero",IUG)
call TriggerEvaluate(t)
set t=null
set IUG=null
endfunction
function IWG takes nothing returns boolean
if GetSpellAbilityId()==1093687860 then
call IVG()
endif
return false
endfunction
function PX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function IWG))
set t=null
endfunction
function IXG takes real s,real IYG,real IZG,real IAG returns boolean
return s<=IYG and s<=IZG and s<=IAG
endfunction
function IBG takes unit u,real x,real y,real d returns real
local real x2=GetUnitX(u)
local real y2=GetUnitY(u)
local real ICG=N67(x-d,y,x2,y2)
local real I3G=N67(x+d,y,x2,y2)
local real I6G=N67(x,y+d,x2,y2)
local real ILG=N67(x,y-d,x2,y2)
set LP4="PowerCog_GetAngle"
if IXG(ICG,I3G,ILG,I6G)then
return 180.
elseif IXG(I3G,ICG,ILG,I6G)then
return .0
elseif IXG(ILG,I3G,ICG,I6G)then
return 270.
endif
return 90.
endfunction
function I1G takes real s,real IYG,real IZG,real IAG,real I0G,real I5G,real I2G,real I_G returns boolean
return s<=IYG and s<=IZG and s<=IAG and s<=I0G and s<=I5G and s<=I2G and s<=I_G
endfunction
function J4G takes unit u,integer RP7 returns unit
local real x1=GetUnitX(u)
local real y1=GetUnitY(u)
local unit J7G=QA7(RP7,"Cog1")
local unit J8G=QA7(RP7,"Cog2")
local unit J9G=QA7(RP7,"Cog3")
local unit JDG=QA7(RP7,"Cog4")
local unit JEG=QA7(RP7,"Cog5")
local unit JFG=QA7(RP7,"Cog6")
local unit JGG=QA7(RP7,"Cog7")
local unit JHG=QA7(RP7,"Cog8")
local real IYG=N67(x1,y1,GetUnitX(J7G),GetUnitY(J7G))
local real IZG=N67(x1,y1,GetUnitX(J8G),GetUnitY(J8G))
local real IAG=N67(x1,y1,GetUnitX(J9G),GetUnitY(J9G))
local real I0G=N67(x1,y1,GetUnitX(JDG),GetUnitY(JDG))
local real I5G=N67(x1,y1,GetUnitX(JEG),GetUnitY(JEG))
local real I2G=N67(x1,y1,GetUnitX(JFG),GetUnitY(JFG))
local real I_G=N67(x1,y1,GetUnitX(JGG),GetUnitY(JGG))
local real JIG=N67(x1,y1,GetUnitX(JHG),GetUnitY(JHG))
set LP4="rNe"
if I1G(IYG,IZG,IAG,I0G,I5G,I2G,I_G,JIG)then
return J7G
elseif I1G(IZG,IYG,IAG,I0G,I5G,I2G,I_G,JIG)then
return J8G
elseif I1G(IAG,IZG,IYG,I0G,I5G,I2G,I_G,JIG)then
return J9G
elseif I1G(I0G,IZG,IAG,IYG,I5G,I2G,I_G,JIG)then
return JDG
elseif I1G(I5G,IZG,IAG,I0G,IYG,I2G,I_G,JIG)then
return JEG
elseif I1G(I2G,IZG,IAG,I0G,I5G,IYG,I_G,JIG)then
return JFG
elseif I1G(I_G,IZG,IAG,I0G,I5G,I2G,IYG,JIG)then
return JGG
elseif I1G(JIG,IZG,IAG,I0G,I5G,I2G,I_G,IYG)then
return JHG
endif
return null
endfunction
function JJG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real JKG=R77(RP7,"Angle")
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real XEF=$C
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local integer JMG=40+40*X37
set LP4="JJG"
if GetTriggerEvalCount(t)>21 then
call Q47(RP7)
call RN7(t)
call RK7(m5,"PowerCogShocked")
call D38(p5,m5,1,I2R(JMG))
call SetUnitState(m5,UNIT_STATE_MANA,B97(GetUnitState(m5,UNIT_STATE_MANA)-JMG,0))
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",x,y))
call BW7(x,y,$96)
if RG7(m5,"TimeWalk|Active")==false then
call SetUnitPosition(m5,x+XEF*Cos(JKG*bj_DEGTORAD),y+XEF*Sin(JKG*bj_DEGTORAD))
endif
endif
set t=null
set m5=null
return false
endfunction
function JNG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit m5=GetEnumUnit()
local real x=IH4
local real y=IJ4
local real d=IK4
local real JKG=IBG(m5,x,y,d)
local real JOG=$C8
local real JPG=d-N67(GetUnitX(m5),GetUnitY(m5),x,y)+JOG/2
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",m5,"chest"))
call RI7(m5,"PowerCogShocked")
if JPG>0 then
call SetUnitX(m5,GetUnitX(m5)+JPG*Cos(JKG*bj_DEGTORAD))
call SetUnitY(m5,GetUnitY(m5)+JPG*Sin(JKG*bj_DEGTORAD))
endif
call QG7(RP7,"Target",m5)
call QD7(RP7,"Angle",JKG*1.)
call Q97(RP7,"Level",IG4)
call QG7(RP7,"Source",IM4)
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function JJG))
set t=null
set m5=null
endfunction
function JQG takes unit u,integer RP7 returns boolean
local unit JRG=J4G(u,RP7)
local boolean JSG=true
set LP4="PowerCog_IsNearestUsable"
if A47(JRG)or R47(GetHandleId(JRG),"PowerCogUsed")==1 then
set JSG=false
endif
call Q97(GetHandleId(JRG),"PowerCogUsed",1)
call SetUnitVertexColor(JRG,25,25,25,$AF)
set JRG=null
return JSG
endfunction
function JTG takes nothing returns nothing
if GetUnitState(GetEnumUnit(),UNIT_STATE_MANA)>0 and IsUnitInGroup(GetEnumUnit(),IP4)==false and RG7(GetEnumUnit(),"PowerCogShocked")==false and JQG(GetEnumUnit(),tl)then
call RI7(GetEnumUnit(),"PowerCogShocked")
call GroupAddUnit(aL,GetEnumUnit())
endif
endfunction
function JUG takes trigger t,unit Z47,real x,real y,real d,integer X37 returns nothing
local integer RP7=GetHandleId(t)
local real JVG=$C8
local rect r1=Rect(x-d,y-d,x+d,y+d)
local rect r2=Rect(x-d-JVG,y-d-JVG,x+d+JVG,y+d+JVG)
local group g1=ZI7()
local group g2=ZI7()
local group g3=ZI7()
set LP4="PowerCog_Shock"
set IM4=Z47
call GroupEnumUnitsInRect(g1,r1,Condition(function LF7))
call GroupEnumUnitsInRect(g2,r2,Condition(function LF7))
set IP4=g1
set aL=g3
set IH4=x
set IJ4=y
set IK4=d
set tl=RP7
call ForGroup(g2,function JTG)
set IG4=X37
call ForGroup(g3,function JNG)
call ZH7(g1)
call ZH7(g2)
call ZH7(g3)
call RemoveRect(r1)
call RemoveRect(r2)
set g1=null
set g2=null
set g3=null
set r1=null
set r2=null
endfunction
function JWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local player p=QC7(RP7,"p")
local boolean JXG=R87(RP7,"NeedFix")
set LP4="JWG"
call Q47(RP7)
call RN7(t)
if JXG then
call BA7(p,.2,x,y,500)
endif
set t=null
set p=null
return false
endfunction
function JYG takes unit JRG returns nothing
local real x=GetUnitX(JRG)
local real y=GetUnitY(JRG)
local player p=GetOwningPlayer(JRG)
local unit oA=CreateUnit(p,1966092375,x,y,0)
set LP4="rPe"
call KillUnit(oA)
set p=null
set oA=null
endfunction
function JZG takes integer RP7,real x,real y,boolean JXG,player p returns nothing
local unit J7G=QA7(RP7,"Cog1")
local unit J8G=QA7(RP7,"Cog2")
local unit J9G=QA7(RP7,"Cog3")
local unit JDG=QA7(RP7,"Cog4")
local unit JEG=QA7(RP7,"Cog5")
local unit JFG=QA7(RP7,"Cog6")
local unit JGG=QA7(RP7,"Cog7")
local unit JHG=QA7(RP7,"Cog8")
local trigger t=CreateTrigger()
set LP4="PowerCog_EndCogs"
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function JWG))
call QD7(GetHandleId(t),"x",x*1.)
call QD7(GetHandleId(t),"y",y*1.)
call QN7(GetHandleId(t),"p",p)
call QF7(GetHandleId(t),"NeedFix",JXG)
call JYG(J7G)
call RemoveUnit(J7G)
call JYG(J8G)
call RemoveUnit(J8G)
call JYG(J9G)
call RemoveUnit(J9G)
call JYG(JDG)
call RemoveUnit(JDG)
call JYG(JEG)
call RemoveUnit(JEG)
call JYG(JFG)
call RemoveUnit(JFG)
call JYG(JGG)
call RemoveUnit(JGG)
call JYG(JHG)
call RemoveUnit(JHG)
set J7G=null
set J8G=null
set J9G=null
set JDG=null
set JEG=null
set JFG=null
set JGG=null
set JHG=null
endfunction
function JAG takes unit JRG,integer RP7,integer JBG,player p returns nothing
if IsUnitVisible(JRG,p)then
call QF7(RP7,"NeedFix",true)
endif
call QG7(RP7,"Cog"+I2S(JBG),JRG)
endfunction
function JCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real Hk=R77(RP7,"Duration")
local integer JYE=GetTriggerEvalCount(t)
set LP4="JCG"
if JYE>R2I(Hk*100)then
call JZG(RP7,R77(RP7,"x"),R77(RP7,"y"),R87(RP7,"NeedFix"),QC7(RP7,"Enemy"))
call Q47(RP7)
call RN7(t)
else
call JUG(t,QA7(RP7,"Hero"),R77(RP7,"x"),R77(RP7,"y"),R77(RP7,"d"),R47(RP7,"Level"))
endif
set t=null
return false
endfunction
function J3G takes nothing returns nothing
call SetUnitX(GetEnumUnit(),GetUnitX(IM4))
call SetUnitY(GetEnumUnit(),GetUnitY(IM4))
endfunction
function J6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local integer X37=GetUnitAbilityLevel(Z47,1093687861)
local integer ID=1966092371
local real x1=GetUnitX(Z47)
local real y1=GetUnitY(Z47)
local real x2
local real y2
local real d=125
local unit JRG
local real Hk=4+X37
local real BufferDuration=5
local group g
local rect JLG
local player J1G
set LP4="J6G"
if WM7(GetOwningPlayer(Z47))then
set J1G=Z7[0]
else
set J1G=Y7[0]
endif
call Q47(RP7)
call RN7(t)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call QF7(RP7,"NeedFix",false)
set x2=x1+d
set y2=y1
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,1,J1G)
if WQ7(GetOwningPlayer(Z47))then
call QG7(GetHandleId(Z47),"AI|Cog1",JRG)
endif
set x2=x1+d
set y2=y1+d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,2,J1G)
set x2=x1
set y2=y1+d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,3,J1G)
if WQ7(GetOwningPlayer(Z47))then
call QG7(GetHandleId(Z47),"AI|Cog2",JRG)
endif
set x2=x1-d
set y2=y1+d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,4,J1G)
set x2=x1-d
set y2=y1
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,5,J1G)
if WQ7(GetOwningPlayer(Z47))then
call QG7(GetHandleId(Z47),"AI|Cog3",JRG)
endif
set x2=x1-d
set y2=y1-d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,6,J1G)
set x2=x1
set y2=y1-d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,7,J1G)
if WQ7(GetOwningPlayer(Z47))then
call QG7(GetHandleId(Z47),"AI|Cog4",JRG)
endif
set x2=x1+d
set y2=y1-d
set JRG=CreateUnit(GetOwningPlayer(Z47),ID,x2,y2,0)
call SetUnitPosition(JRG,x2,y2)
call JAG(JRG,RP7,8,J1G)
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function JCG))
call QD7(RP7,"Duration",Hk*1.)
call QD7(RP7,"x",x1*1.)
call QD7(RP7,"y",y1*1.)
call QD7(RP7,"d",d*1.)
call QG7(RP7,"Hero",Z47)
call Q97(RP7,"Level",X37)
call QN7(RP7,"Enemy",J1G)
set d=d+110
set g=ZI7()
set JLG=Rect(x1-d,y1-d,x1+d,y1+d)
set IM4=Z47
call GroupEnumUnitsInRect(g,JLG,Condition(function L27))
call ForGroup(g,function J3G)
call ZH7(g)
set t=null
set g=null
set Z47=null
set JRG=null
set JLG=null
set J1G=null
return false
endfunction
function J0G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
set LP4="J0G"
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerAddCondition(t,Condition(function J6G))
call QG7(RP7,"Hero",Z47)
set t=null
set Z47=null
endfunction
function J5G takes nothing returns boolean
if GetSpellAbilityId()==1093687861 then
call J0G()
endif
return false
endfunction
function PY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function J5G))
set t=null
endfunction
function J2G takes nothing returns nothing
if OI7(GetEnumUnit())==false then
call D38(IM4,GetEnumUnit(),1,IH4)
endif
endfunction
function J_G takes unit K4G,real x,real y returns nothing
local real x1
local real y1
local group g=ZI7()
local integer K7G=GetUnitAbilityLevel(K4G,1093687862)
local real K8G=40+40*K7G
set LP4="rYe"
set IM4=K4G
set IH4=K8G
call GroupEnumUnitsInRange(g,x,y,600,Condition(function LF7))
call ForGroup(g,function J2G)
call ZH7(g)
set x1=x
set y1=y
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+$C8
set y1=y+$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x+$C8
set y1=y-$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-$C8
set y1=y+$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
set x1=x-$C8
set y1=y-$C8
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FlyingMachine\\FlyingMachineImpact.mdl",x1,y1))
call BA7(GetOwningPlayer(K4G),$A,x,y,600)
set g=null
endfunction
function K9G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit hn
local unit KDG=QA7(RP7,"Projectile")
local real KEG=R77(RP7,"TargetX")
local real KFG=R77(RP7,"TargetY")
local real KGG=R77(RP7,"Angle")
local real KHG=R77(RP7,"SourceX")
local real KIG=R77(RP7,"SourceY")
local real KJG=AY7(KHG+30*Cos(KGG))
local real KKG=AZ7(KIG+30*Sin(KGG))
set LP4="K9G"
call SetUnitX(KDG,KJG)
call SetUnitY(KDG,KKG)
call QD7(RP7,"SourceX",KJG)
call QD7(RP7,"SourceY",KKG)
if N67(KEG,KFG,KJG,KKG)<=35 then
call KillUnit(KDG)
set hn=QA7(RP7,"Hero")
call J_G(hn,KJG,KKG)
call Q47(RP7)
call RN7(t)
endif
set t=null
set hn=null
set KDG=null
return false
endfunction
function KMG takes nothing returns nothing
local unit hn=GetTriggerUnit()
local real KHG=AY7(GetUnitX(hn))
local real KIG=AZ7(GetUnitY(hn))
local location KNG=GetSpellTargetLoc()
local real KEG=AY7(GetLocationX(KNG))
local real KFG=AZ7(GetLocationY(KNG))
local real KGG=Atan2(KFG-KIG,KEG-KHG)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit KDG=CreateUnit(GetOwningPlayer(hn),1747989337,KHG,KIG,KGG*bj_RADTODEG)
set LP4="KMG"
call RemoveLocation(KNG)
call SetUnitFacing(KDG,KGG*bj_RADTODEG)
call SetUnitPathing(KDG,false)
call Z27(KDG,1097625443)
call ShowUnit(KDG,false)
call UnitRemoveAbility(KDG,1097625443)
call ShowUnit(KDG,true)
call QD7(RP7,"OriginalX",KHG)
call QD7(RP7,"OriginalY",KIG)
call QD7(RP7,"SourceX",KHG)
call QD7(RP7,"SourceY",KIG)
call QD7(RP7,"TargetX",KEG)
call QD7(RP7,"TargetY",KFG)
call QD7(RP7,"Angle",KGG)
call QG7(RP7,"Hero",hn)
call QG7(RP7,"Projectile",KDG)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function K9G))
set hn=null
set KNG=null
set t=null
set KDG=null
endfunction
function KOG takes nothing returns boolean
if GetSpellAbilityId()==1093687862 then
call KMG()
endif
return false
endfunction
function PZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PZ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KOG))
set t=null
endfunction
function KPG takes unit p5,unit m5 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
local integer X37=GetUnitAbilityLevel(p5,1093687864)
set LP4="ixe"
if X37==0 then
set X37=GetUnitAbilityLevel(p5,1093747542)
endif
call Z27(DA8,1093687865)
call SetUnitAbilityLevel(DA8,1093687865,X37)
call IssueTargetOrderById(DA8,$D007F,m5)
set DA8=null
endfunction
function KQG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
call GroupAddUnit(IP4,GetEnumUnit())
call KPG(IM4,GetEnumUnit())
endif
endfunction
function KRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit m5=QA7(RP7,"Target")
local integer KSG=R47(RP7,"MaxLinks")
local integer XB8=GetTriggerEvalCount(t)
local unit KTG
local group KUG=QL7(RP7,"AlreadyAdded")
local group g
local real KVG=$C8
set LP4="KRG"
if m5==null then
set KTG=QA7(RP7,"KWG"+I2S(KSG+1-XB8))
call RemoveUnit(KTG)
else
set KTG=QA7(RP7,"KWG"+I2S(XB8))
call SetUnitX(Z47,GetUnitX(KTG))
call SetUnitY(Z47,GetUnitY(KTG))
call RemoveUnit(KTG)
if XB8==KSG then
set KVG=$E1
endif
set g=ZI7()
set IM4=Z47
set IP4=KUG
call GroupEnumUnitsInRange(g,GetUnitX(Z47),GetUnitY(Z47),KVG,Condition(function LF7))
call ForGroup(g,function KQG)
call ZH7(g)
endif
if XB8==KSG then
if m5!=null then
call PauseUnit(m5,false)
endif
call BW7(GetUnitX(Z47),GetUnitY(Z47),100)
call ZH7(KUG)
call Q47(RP7)
call RN7(t)
endif
set t=null
set Z47=null
set m5=null
set KTG=null
set KUG=null
set g=null
return false
endfunction
function KXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real l4=R77(RP7,"Angle")
local integer RBD=R47(RP7,"MaxCount")
local integer XB8=GetTriggerEvalCount(t)
local real x=GetUnitX(Z47)+XB8*50*Cos(l4*bj_DEGTORAD)
local real y=GetUnitY(Z47)+XB8*50*Sin(l4*bj_DEGTORAD)
local boolean HTD=R87(RP7,"Scepter")
local unit KYG
local trigger KZG=Q67(RP7,"Retract")
local integer IGE=GetHandleId(KZG)
local group g=ZI7()
local unit m5
local integer ID=1966092374
local real KVG=125
set LP4="KXG"
if XB8==1 then
set KVG=100
endif
set IM4=Z47
call GroupEnumUnitsInRange(g,x,y,KVG,Condition(function LT7))
call GroupRemoveUnit(g,Z47)
set m5=GroupPickRandomUnit(g)
call ZH7(g)
if m5!=null or XB8==RBD or XB8==(RBD-1)or XB8==(RBD-2)then
set ID=1966092373
endif
set KYG=CreateUnit(GetOwningPlayer(Z47),ID,x,y,l4)
call QG7(IGE,"KWG"+I2S(XB8),KYG)
if m5!=null then
if(IsUnitAlly(m5,GetOwningPlayer(Z47)) and HTD==false)or GetOwningPlayer(m5)==A7 or RG7(m5,"Frozen") then
set m5=null
endif
call Q47(RP7)
call RN7(t)
if m5!=null and IsUnitAlly(m5,GetOwningPlayer(Z47))==false then
call PauseUnit(m5,true)
endif
call TriggerRegisterTimerEvent(KZG,.5/ RBD,true)
call TriggerAddCondition(KZG,Condition(function KRG))
call Q97(IGE,"MaxLinks",XB8)
call QG7(IGE,"Target",m5)
call QG7(IGE,"Hero",Z47)
call QP7(IGE,"AlreadyAdded",ZI7())
elseif XB8>RBD then
set m5=null
call Q47(RP7)
call RN7(t)
call TriggerRegisterTimerEvent(KZG,.5/ RBD,true)
call TriggerAddCondition(KZG,Condition(function KRG))
call Q97(IGE,"MaxLinks",XB8)
call QG7(IGE,"Target",m5)
call QG7(IGE,"Hero",Z47)
call QP7(IGE,"AlreadyAdded",ZI7())
endif
set t=null
set Z47=null
set KYG=null
set KZG=null
set g=null
set m5=null
return false
endfunction
function KWG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real l4=MZ7(GetUnitX(Z47),GetUnitY(Z47),GetLocationX(l),GetLocationY(l))
local integer X37=GetUnitAbilityLevel(Z47,1093687864)
local integer KAG
local integer RBD
local boolean HTD=true
set LP4="KWG"
if X37==0 then
set X37=GetUnitAbilityLevel(Z47,1093747542)
set HTD=true
endif
set KAG=$5DC+500*X37
set RBD=KAG/ 50
call QG7(RP7,"Hero",Z47)
call Q97(RP7,"Level",X37)
call QD7(RP7,"Angle",l4*1.)
call Q97(RP7,"MaxCount",RBD)
call QI7(RP7,"Retract",CreateTrigger())
call QF7(RP7,"Scepter",HTD)
call TriggerRegisterTimerEvent(t,.5/ RBD,true)
call TriggerAddCondition(t,Condition(function KXG))
call RemoveLocation(l)
set t=null
set Z47=null
set l=null
endfunction
function KBG takes nothing returns boolean
if GetSpellAbilityId()==1093687864 or GetSpellAbilityId()==1093747542 then
call KWG()
endif
return false
endfunction
function PA8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PA8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function KBG))
set t=null
endfunction
function KCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real YU9
set LP4="KCG"
if DB8==1 then
set YU9=$F
elseif DB8==2 then
set YU9=30
elseif DB8==3 then
set YU9=40
elseif DB8==4 then
set YU9=50
endif
if GetTriggerEvalCount(t)==3 or GetTriggerEvalCount(t)==4 then
call D38(CP7,J67,1,YU9)
endif
if GetTriggerEvalCount(t)==4 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call UnitRemoveAbility(J67,1093752403)
call UnitRemoveAbility(J67,1110459470)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function K3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1095267426)
set LP4="K3G"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetEventDamageSource()==CP7 and GetEventDamage()==0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function KCG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",J67,"chest")))
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093752403,false)
call Z27(J67,1093752403)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function K6G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local real d=N37(CP7,J67)
set LP4="K6G"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function K3G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set CP7=null
set J67=null
endfunction
function KLG takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"weapon"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetTriggerUnit(),"hand"))
endfunction
function K1G takes nothing returns boolean
if GetSpellAbilityId()==1095267426 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call KLG()
elseif ZG7(GetSpellTargetUnit())==false then
call K6G()
endif
endif
return false
endfunction
function P68 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P68"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function K1G))
set t=null
endfunction
function K0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="K0G"
call UnitAddAbility(DA8,1093809972)
call IssueImmediateOrderById(DA8,$D0080)
call SelectUnitForPlayerSingle(CP7,GetOwningPlayer(CP7))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
set DA8=null
return false
endfunction
function K5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093677401)
local real DY8=360-100*DB8
if DB8==3 then
set DY8=50
endif
if TimerGetRemaining(N74[GetPlayerId(GetOwningPlayer(CP7))])==0 and GetUnitState(CP7,UNIT_STATE_MANA)>=$8C then
call TimerStart(N74[GetPlayerId(GetOwningPlayer(CP7))],DY8,false,null)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3+.01,false)
call TriggerAddCondition(t,Condition(function K0G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
endif
set t=null
set CP7=null
return false
endfunction
function K2G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="K2G"
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function K5G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function K_G takes nothing returns boolean
if GetLearnedSkill()==1093677401 and GetUnitAbilityLevel(GetTriggerUnit(),1093677401)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call K2G()
endif
return false
endfunction
function PL8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="PL8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function K_G))
set t=null
endfunction
function M4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="M4G"
call Q47(RP7)
call RN7(t)
call D28(p5,0)
set t=null
set p5=null
return false
endfunction
function M7G takes nothing returns boolean
if GetUnitTypeId(GetFilterUnit())==GetUnitTypeId(BB)and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(BB)and IsUnitIllusion(GetFilterUnit()) then
call SetUnitX(GetFilterUnit(),OB)
call SetUnitY(GetFilterUnit(),AB)
call IssueTargetOrderById(GetFilterUnit(),$D000F,cB)
endif
return false
endfunction
function M8G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real t5=GetUnitX(p5)
local real w5=GetUnitY(p5)
local real Y5=GetUnitX(m5)
local real Z5=GetUnitY(m5)
local real l4=MZ7(t5,w5,Y5,Z5)
local real DAE=N67(t5,w5,Y5,Z5)
local real d=GetRandomReal(DAE*.3,DAE*.8)
local integer X37=GetUnitAbilityLevel(p5,1093685847)
local real VIE=t5+d*Cos(l4*bj_DEGTORAD)
local real VJE=w5+d*Sin(l4*bj_DEGTORAD)
local unit u=CreateUnit(GetOwningPlayer(p5),EB,VIE,VJE,0)
local unit u2
local group g
local trigger t
local integer RP7
set LP4="M8G"
call SetUnitX(p5,VIE)
call SetUnitY(p5,VJE)
call SetUnitFacing(p5,-l4)
call PlaySoundOnUnitBJ(zE,100,m5)
if IsUnitEnemy(m5,GetOwningPlayer(p5))and GetUnitTypeId(m5)!=1848651852 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function M4G))
call QG7(RP7,"Source",p5)
set t=null
call D28(p5,25*X37)
set VIE=t5+(d-25)*Cos(l4*bj_DEGTORAD)
set VJE=w5+(d-25)*Sin(l4*bj_DEGTORAD)
call RR7(m5,"4405",1)
call SetUnitX(m5,VIE)
call SetUnitY(m5,VJE)
call SetUnitFacing(m5,l4)
call IssueTargetOrderById(p5,$D000F,m5)
set g=ZI7()
set OB=VIE
set AB=VJE
set BB=p5
set cB=m5
call GroupEnumUnitsInRange(g,t5,w5,$578,Condition(function M7G))
call ZH7(g)
set u2=CreateUnit(GetOwningPlayer(p5),EB,VIE,VJE,0)
call KillUnit(u2)
endif
call KillUnit(u)
set p5=null
set m5=null
set u=null
set u2=null
set g=null
endfunction
function M9G takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call M8G()
endif
return false
endfunction
function MDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local unit u=CreateUnit(GetOwningPlayer(Z47),EB,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="MDG"
call PlaySoundOnUnitBJ(zE,100,Z47)
call KillUnit(u)
call Q47(RP7)
call RN7(t)
set u=null
set t=null
set Z47=null
return false
endfunction
function MEG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="MEG"
call TriggerAddCondition(t,Condition(function MDG))
call TriggerRegisterTimerEvent(t,.3,false)
call QG7(RP7,"Hero",GetTriggerUnit())
set t=null
endfunction
function MFG takes nothing returns boolean
if GetSpellAbilityId()==1093685847 then
call MEG()
endif
return false
endfunction
function KJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="KJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M9G))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function MFG))
set t=null
endfunction
function MGG takes nothing returns boolean
return GetSpellAbilityId()==1093678645
endfunction
function MHG takes nothing returns nothing
local integer T8=0
local integer U8=5
local integer array MIG
local player array MJG
local integer BB8
local item Z4
set LP4="MHG"
set MIG[0]=0
set MIG[1]=0
set MIG[2]=0
set MIG[3]=0
set MIG[4]=0
set MIG[5]=0
call DisableTrigger(H84)
loop
exitwhen T8>U8
set BB8=OM7(UnitItemInSlot(GetTriggerUnit(),T8))
if BB8==A1 or BB8==D0 or BB8==E0 or BB8==J0 or BB8==N0 or BB8==O0 or BB8==H1 or BB8==N5 or BB8==R5 or BB8==S5 or BB8==N6 or BB8==Z2 or BB8==D94 or BB8==F44 then
set MIG[T8]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),T8))
set MJG[T8]=GetItemPlayer(UnitItemInSlot(GetTriggerUnit(),T8))
call RemoveItem(UnitItemInSlot(GetTriggerUnit(),T8))
endif
set T8=T8+1
endloop
call UnitResetCooldown(GetTriggerUnit())
set T8=0
set U8=5
loop
exitwhen T8>U8
if MIG[T8]>0 then
set Z4=CreateItem(MIG[T8],0,0)
call SetItemPlayer(Z4,MJG[T8],false)
call SetItemUserData(Z4,1)
call UnitAddItem(GetTriggerUnit(),Z4)
endif
set T8=T8+1
endloop
call EnableTrigger(H84)
set Z4=null
endfunction
function JM8 takes nothing returns nothing
set XJ=CreateTrigger()
call BT7(XJ,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(XJ,Condition(function MGG))
call TriggerAddAction(XJ,function MHG)
endfunction
function MKG takes nothing returns nothing
call D38(XA4,GetEnumUnit(),1,(60.+20.*XB4)*.25)
endfunction
function MMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=GetTriggerEvalCount(t)
local group g
set LP4="MMG"
if ZD8==20 or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set IM4=CP7
set XA4=CP7
set XB4=GetUnitAbilityLevel(CP7,1093678407)
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),275,Condition(function LF7))
call ForGroup(g,function MKG)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function MNG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="MNG"
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function MMG))
call SaveUnitHandle(C7,(JZ7),(2),(GetTriggerUnit()))
call TriggerEvaluate(t)
call RR7(GetTriggerUnit(),"BladeFury|Active",5)
endfunction
function MOG takes nothing returns boolean
if GetSpellAbilityId()==1093678407 then
call MNG()
endif
return false
endfunction
function IH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="IH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MOG))
set t=null
endfunction
function MPG takes nothing returns nothing
local integer O5=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local integer i1
local unit it=null
local item ON7=null
local integer i
local boolean J4=false
local player p=null
if(not QX4[O5])or(GetItemTypeId(GetManipulatedItem())==1227895373)or(not IsTriggerEnabled(H84))or(GetUnitTypeId(GetTriggerUnit())==1697656901)then
return
elseif(GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP)then
call J3(it,false)
return
endif
set ON7=GetManipulatedItem()
set p=GetItemPlayer(ON7)
if(p==Player($F))then
set p=GD7
endif
if(p!=Player(O5))or(ON7==G47[336+O5])then
set it=GetTriggerUnit()
set i1=OK7(ON7)
if(IsUnitType(it,UNIT_TYPE_HERO)and(GetUnitTypeId(it)!=1211117642))then
set bj_lastCreatedItem=null
if G77[288+O5]==0 and(Bz>G77[$A0+O5])and((BYE(i1)or BZE(i1))and((not IsItemPowerup(ON7))or(not PE7(it))or(PD7(it,SU[OW]))))then
set G77[288+O5]=i1
if bj_lastCreatedItem!=null and IsItemPowerup(ON7)then
set J4=true
endif
endif
if(i1==G77[288+O5]or i1==T0 or i1==A5 or i1==B5)then
set G77[288+O5]=i1
if IsItemPowerup(ON7)and PE7(it)and(CZE(O5,it)!=-1 or CAE(O5,it))then
set J4=(i1!=OK7(bj_lastCreatedItem))
endif
endif
if J4 then
set eY[512+O5]=0
set G97[304+O5]=true
call UnitRemoveItem(it,bj_lastCreatedItem)
call SetItemPosition(bj_lastCreatedItem,GetUnitX(it),GetUnitY(it))
loop
exitwhen eY[512+O5]!=0
call TriggerSleepAction(.1)
endloop
set G47[320+O5]=G47[288+O5]
call J3(it,false)
call J3F(it)
endif
endif
if(not IsItemPowerup(ON7))then
if i1==G77[288+O5]then
call NX7(1.)
set G77[288+O5]=0
else
if PJ4 and GetItemType(ON7)==ITEM_TYPE_PERMANENT and GetItemTypeId(ON7)==SU[i1]then
else
set G97[304+O5]=true
call UnitDropItemPoint(it,ON7,GetUnitX(it),GetUnitY(it))
endif
endif
endif
set it=null
endif
set ON7=null
set p=null
endfunction
function DisplayOrder takes nothing returns nothing
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,$A,I2S(GetIssuedOrderId())+": "+OrderId2String(GetIssuedOrderId()))
endfunction
function MQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer iX=GetTriggerEvalCount(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local integer X37=R47(RP7,"Level")
local real MRG
local unit MSG
set LP4="MQG"
set MRG=.6*(iX-25)*(iX-25)
if iX<51 then
if ModuloInteger(iX,5)==0 then
call D38(p5,m5,1,3+3*X37)
endif
if OCD(m5)==false then
call SetUnitFlyHeight(m5,500-MRG,0)
endif
else
set MSG=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(MSG,1093742924)
call SetUnitAbilityLevel(MSG,1093742924,X37)
call IssueTargetOrderById(MSG,$D006B,m5)
if OCD(m5)==false then
call SetUnitFlyHeight(m5,GetUnitDefaultFlyHeight(m5),0)
endif
if L8==false then
call PauseUnit(m5,false)
endif
call SetUnitPathing(m5,true)
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
set m5=null
set MSG=null
return false
endfunction
function MTG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=IM4
local unit m5=GetEnumUnit()
local integer X37=IG4
set LP4="MTG"
call PauseUnit(m5,true)
call SetUnitPathing(m5,false)
if OCD(m5)==false then
call Z27(m5,1097691750)
call UnitRemoveAbility(m5,1097691750)
endif
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerAddCondition(t,Condition(function MQG))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call D38(p5,m5,1,30+30*X37)
set t=null
set p5=null
set m5=null
endfunction
function MUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local integer X37=R47(RP7,"Level")
local group g=ZI7()
local ubersplat P39=CreateUbersplat(x,y,"THNN",$FF,$FF,$FF,$FF,false,false)
set LP4="MUG"
call SetUbersplatRenderAlways(P39,true)
call BA7(GetOwningPlayer(Z47),4,x,y,400)
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
call DestroyEffect(Q17(RP7,"FX3"))
call DestroyEffect(Q17(RP7,"FX4"))
call DestroyEffect(Q17(RP7,"FX5"))
call DestroyEffect(Q17(RP7,"FX6"))
call Q47(RP7)
call RN7(t)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",x,y))
call DestroyEffect(AddSpecialEffect("effects\\TidalErruption.mdx",x,y))
set IM4=Z47
set IG4=X37
call GroupEnumUnitsInRange(g,x,y,$D7+25,Condition(function LQ7))
call ForGroup(g,function MTG)
call ZH7(g)
set t=null
set Z47=null
return false
endfunction
function MVG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(Z47,1093743414)
local string s=""
local real a
set LP4="MVG"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(Z47)) or Y27(GetLocalPlayer())then
set s="Objects\\Spawnmodels\\Other\\IllidanFootprint\\IllidanWaterSpawnFootPrint.mdl"
endif
call RemoveLocation(l)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Hero",Z47)
call QD7(RP7,"x",x)
call QD7(RP7,"y",y)
call Q97(RP7,"Level",X37)
set a=0
call QH7(RP7,"FX1",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=1
call QH7(RP7,"FX2",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=2
call QH7(RP7,"FX3",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=3
call QH7(RP7,"FX4",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=4
call QH7(RP7,"FX5",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
set a=5
call QH7(RP7,"FX6",AddSpecialEffect(s,x+40*Cos(a/ 6*360*bj_DEGTORAD),y+40*Sin(a/ 6*360*bj_DEGTORAD)))
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerAddCondition(t,Condition(function MUG))
set Z47=null
set t=null
set l=null
endfunction
function MWG takes nothing returns boolean
if GetSpellAbilityId()==1093743414 then
call MVG()
endif
return false
endfunction
function P18 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P18"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function MWG))
set t=null
endfunction
function OV9 takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(B2),1093743673,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(C2),1093743673,false)
endfunction
function MXG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer WB7=GetHandleId(t)
local unit ZO7=QA7(WB7,"Hero")
local real MYG=O97()
local integer DB8=GetUnitAbilityLevel(ZO7,1093743444)
local real MZG=R77(GetHandleId(ZO7),"WaterSword|LastUsed")
local boolean MAG=R87(GetHandleId(ZO7),"WaterSword|Active")
set LP4="MXG"
if MYG-MZG>16-DB8*3 and MAG==false and GetUnitTypeId(ZO7)==1211119187 and A47(ZO7)==false then
call QF7(GetHandleId(ZO7),"WaterSword|Active",true)
call UnitAddAbility(ZO7,1093742927)
call SetUnitAbilityLevel(ZO7,1093742927,DB8)
call UnitAddAbility(ZO7,1093742930)
if DB8==1 then
call Z27(ZO7,1093743671)
elseif DB8==2 then
call Z27(ZO7,1093743672)
elseif DB8==3 then
call Z27(ZO7,1093742933)
elseif DB8==4 then
call Z27(ZO7,1093743673)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093743671,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093743672,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093742933,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(ZO7),1093743673,false)
elseif MAG==false then
call UnitRemoveAbility(ZO7,1093742927)
call UnitRemoveAbility(ZO7,1093742930)
call UnitRemoveAbility(ZO7,1093743671)
call UnitRemoveAbility(ZO7,1093743672)
call UnitRemoveAbility(ZO7,1093742933)
call UnitRemoveAbility(ZO7,1093743673)
endif
set t=null
set ZO7=null
endfunction
function MBG takes nothing returns boolean
local unit ZO7=GetTriggerUnit()
set LP4="MBG"
call QF7(GetHandleId(ZO7),"WaterSword|Active",false)
call QD7(GetHandleId(ZO7),"WaterSword|LastUsed",O97())
call UnitRemoveAbility(ZO7,1093742927)
call UnitRemoveAbility(ZO7,1093742930)
call UnitRemoveAbility(ZO7,1093743671)
call UnitRemoveAbility(ZO7,1093743672)
call UnitRemoveAbility(ZO7,1093742933)
call UnitRemoveAbility(ZO7,1093743673)
set ZO7=null
return false
endfunction
function MCG takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer WB7=GetHandleId(t)
set LP4="MCG"
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddAction(t,function MXG)
call QG7(WB7,"Hero",ZO7)
call QD7(WB7,"WaterSword|LastUsed",.0)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function MBG))
set ZO7=null
set t=null
endfunction
function M3G takes nothing returns boolean
if GetLearnedSkill()==1093743444 and GetUnitAbilityLevel(GetTriggerUnit(),1093743444)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call MCG()
endif
return false
endfunction
function M6G takes nothing returns boolean
return GetUnitAbilityLevel(GetAttacker(),1093743444)>0
endfunction
function MLG takes nothing returns nothing
local unit ZO7=GetEventDamageSource()
set LP4="MLG"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetUnitAbilityLevel(ZO7,1093743444)>0 and IsPlayerEnemy(GetOwningPlayer(ZO7),GetOwningPlayer(GetTriggerUnit()))then
if R87(GetHandleId(ZO7),"WaterSword|Active") then
call QF7(GetHandleId(ZO7),"WaterSword|Active",false)
call QD7(GetHandleId(ZO7),"WaterSword|LastUsed",O97())
call UnitRemoveAbility(ZO7,1093742927)
call UnitRemoveAbility(ZO7,1093742930)
call UnitRemoveAbility(ZO7,1093743671)
call UnitRemoveAbility(ZO7,1093743672)
call UnitRemoveAbility(ZO7,1093742933)
call UnitRemoveAbility(ZO7,1093743673)
call YO7(GetTriggeringTrigger())
endif
endif
else
call YO7(GetTriggeringTrigger())
endif
set ZO7=null
endfunction
function M1G takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="M1G"
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddAction(t,function MLG)
set t=null
endfunction
function P08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P08"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function M3G))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function M6G))
call TriggerAddAction(t,function M1G)
set t=null
endfunction
function M0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local image i=Q_7(RP7,"i")
local real x=R77(RP7,"x")
local real y=R77(RP7,"y")
local unit CP7=QA7(RP7,"Source")
set LP4="M0G"
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093743428)then
if GetTriggerEventId()!=EVENT_UNIT_DEATH and Y57(m5)==false then
call SetUnitPosition(m5,x,y)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093743428,false)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093742926,true)
endif
call QF7(GetHandleId(m5),"XMarked",false)
call DestroyEffect(Q17(RP7,"FX"))
call ShowImage(i,false)
call DestroyImage(i)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set i=null
set CP7=null
return false
endfunction
function M5G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real x=GetUnitX(m5)
local real y=GetUnitY(m5)
local real M2G=90
local image i=CreateImage("Fonts\\X.blp",M2G,M2G,0,x-M2G/ 2,y-M2G/ 2,0,0,0,0,2)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local string fx=""
local integer X37=GetUnitAbilityLevel(p5,1093742926)
set LP4="M5G"
call RR7(m5,"4401",5)
call Z27(p5,1093743428)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093743428,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093742926,false)
call SetImageRenderAlways(i,true)
if IsUnitAlly(p5,GetOwningPlayer(m5))==false or IsUnitAlly(m5,GetLocalPlayer()) or Y27(GetLocalPlayer())then
set fx="effects\\BlackTide.mdx"
call ShowImage(i,true)
else
call ShowImage(i,false)
endif
call SetImageColor(i,$FF,0,0,$FF)
call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(p5),1865429063,x,y,0),1112820806,5)
call TriggerRegisterTimerEvent(t,X37,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function M0G))
call QF7(GetHandleId(m5),"XMarked",true)
call QW7(RP7,"i",i)
call QG7(RP7,"Target",m5)
call QD7(RP7,"x",x)
call QD7(RP7,"y",y)
call QH7(RP7,"FX",AddSpecialEffectTarget(fx,m5,"overhead"))
call QG7(RP7,"Source",p5)
call QD7(GetHandleId(m5),"AI|XMark|X",x)
call QD7(GetHandleId(m5),"AI|XMark|Y",y)
set p5=null
set m5=null
set i=null
set t=null
endfunction
function M_G takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093742926 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))or ZG7(GetSpellTargetUnit())==false)then
call M5G()
endif
else
if GetLearnedSkill()==1093742926 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093743428,false)
call Z27(GetTriggerUnit(),1093743428)
endif
endif
return false
endfunction
function N4G takes nothing returns boolean
if GetSpellAbilityId()==1093742926 then
if R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),YK7(1848652600))
endif
endif
return false
endfunction
function P58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P58"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function M_G))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function N4G))
set t=null
endfunction
function N7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local integer N8G=1
local player p
local real d
local unit m5=QA7(RP7,"Target")
local integer N9G=R47(RP7,"MaxIndex")
local unit MSG
local integer Hk=R47(RP7,"Duration")
set LP4="N7G"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>Hk then
call Q47(RP7)
call RN7(t)
else
loop
exitwhen N8G>N9G
set p=QC7(RP7,"Player|"+I2S(N8G))
set d=R77(RP7,"Damage|"+I2S(N8G))
if p==null then
set N8G=N9G
else
set MSG=CreateUnit(p,1697656901,0,0,0)
call SetUnitState(m5,UNIT_STATE_LIFE,B97(1,GetUnitState(m5,UNIT_STATE_LIFE)-d/ Hk))
endif
set N8G=N8G+1
endloop
endif
set t=null
set p=null
set m5=null
set MSG=null
return false
endfunction
function NDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local player p=QC7(RP7,"p")
local trigger NEG=Q67(RP7,"Phase2")
local integer N8G=GetTriggerEvalCount(t)
set LP4="NDG"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call Q47(RP7)
call RN7(t)
call TriggerRegisterTimerEvent(NEG,1,true)
call TriggerAddCondition(NEG,Condition(function N7G))
call UnitRemoveAbility(m5,1110456661)
else
set RP7=GetHandleId(NEG)
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+.5*GetEventDamage())
call QN7(RP7,"Player|"+I2S(N8G),GetOwningPlayer(GetEventDamageSource()))
call QD7(RP7,"Damage|"+I2S(N8G),.5*GetEventDamage())
call Q97(RP7,"MaxIndex",N8G)
endif
set t=null
set m5=null
set p=null
set NEG=null
return false
endfunction
function NFG takes nothing returns nothing
local unit p5=ET
local unit m5=GetEnumUnit()
local integer X37=FT
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer Hk=8
local trigger NEG=CreateTrigger()
set LP4="NFG"
call CW7(m5,1093743158,1,Hk)
call SetPlayerAbilityAvailable(GetOwningPlayer(m5),1093743158,false)
call TriggerRegisterTimerEvent(t,Hk+.01,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function NDG))
call QN7(RP7,"p",GetOwningPlayer(p5))
call QG7(RP7,"Target",m5)
call QI7(RP7,"Phase2",NEG)
call QG7(GetHandleId(NEG),"Target",m5)
call Q97(GetHandleId(NEG),"Duration",Hk)
set p5=null
set m5=null
set t=null
set NEG=null
endfunction
function NGG takes nothing returns boolean
if(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and IsUnitInGroup(GetFilterUnit(),gN)==false then
call GroupAddUnit(gN,GetFilterUnit())
return true
endif
return false
endfunction
function NHG takes nothing returns nothing
local unit p5=ET
local unit m5=GetEnumUnit()
local integer X37=FT
call DZ8(p5,m5,1.4)
call D38(p5,m5,1,$C8+100*X37)
set p5=null
set m5=null
endfunction
function NIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit IJ=QA7(RP7,"Projectile")
local unit NJG
local real RK=R77(RP7,"Angle")
local real iN=GetUnitX(IJ)
local real io=GetUnitY(IJ)
local real NKG=R77(RP7,"x2")
local real NMG=R77(RP7,"y2")
local integer iX=GetTriggerEvalCount(t)
local real NNG=AY7(NKG+13.33*iX*Cos(RK))
local real NOG=AZ7(NMG+13.33*iX*Sin(RK))
local integer X37=R47(RP7,"Level")
local group NPG=QL7(RP7,"AlreadyHit")
local group g
set LP4="NIG"
if iX<19 then
call SetUnitVertexColor(IJ,$FF,$FF,$FF,5+iX*$A)
set NJG=QA7(RP7,"Projectile2")
call SetUnitVertexColor(NJG,$FF,$FF,$FF,5+iX*$A)
elseif iX<125 then
call SetUnitVertexColor(IJ,$FF,$FF,$FF,$BE)
elseif iX<$96 then
endif
set g=ZI7()
set gN=NPG
set IM4=IJ
set ET=IJ
set FT=X37
call GroupEnumUnitsInRange(g,GetUnitX(IJ),GetUnitY(IJ),425,Condition(function NGG))
call ForGroup(g,function NFG)
call ZH7(g)
call SetUnitX(IJ,NNG)
call SetUnitY(IJ,NOG)
if iX==$8C then
set NJG=QA7(RP7,"Projectile2")
call KillUnit(NJG)
elseif iX<$8C then
set NJG=QA7(RP7,"Projectile2")
call SetUnitX(NJG,NNG)
call SetUnitY(NJG,NOG)
endif
if iX==$96 then
set g=ZI7()
set IM4=IJ
call GroupEnumUnitsInRange(g,NNG,NOG,425+25,Condition(function LF7))
call ForGroup(g,function NHG)
call ZH7(g)
call KillUnit(IJ)
call ZH7(NPG)
call Q47(RP7)
call RN7(t)
endif
set t=null
set IJ=null
set NJG=null
set NPG=null
set g=null
return false
endfunction
function NQG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local real iN=GetUnitX(Z47)
local real io=GetUnitY(Z47)
local location l=GetSpellTargetLoc()
local real MPD=GetLocationX(l)
local real MQD=GetLocationY(l)
local real RK
local real x1
local real y1
local real x2
local real y2
local trigger t
local integer RP7
local integer X37
local unit IJ
local unit NJG
local string s=""
local integer NRG=1747990101
if GetRandomInt(0,5)==0 then
set NRG=1747993674
endif
if IsPlayerAlly(GetOwningPlayer(Z47),GetLocalPlayer())or Y27(GetLocalPlayer())then
set s="war3mapImported\\Whirlpool.mdx"
endif
if MPD==GetUnitX(Z47)and MQD==GetUnitY(Z47)then
set MPD=MPD+50*Cos(GetUnitFacing(Z47)*bj_DEGTORAD)
set MQD=MQD+50*Sin(GetUnitFacing(Z47)*bj_DEGTORAD)
endif
set RK=Atan2(MQD-io,MPD-iN)
set x1=iN-$3E8*Cos(RK)
set y1=io-$3E8*Sin(RK)
set x2=iN+$3E8*Cos(RK)
set y2=io+$3E8*Sin(RK)
set t=CreateTrigger()
set RP7=GetHandleId(t)
set X37=GetUnitAbilityLevel(Z47,1093742923)
set IJ=CreateUnit(GetOwningPlayer(Z47),NRG,x1,y1,Atan2(MQD-io,MPD-iN)*bj_RADTODEG)
set NJG=CreateUnit(GetOwningPlayer(Z47),1747990102,x1,y1,Atan2(MQD-io,MPD-iN)*bj_RADTODEG)
call SetUnitVertexColor(IJ,$FF,$FF,$FF,0)
call SetUnitPathing(IJ,false)
call RemoveLocation(l)
call Q97(RP7,"Level",X37)
call QD7(RP7,"Angle",RK)
call QG7(RP7,"Projectile",IJ)
call QG7(RP7,"Projectile2",NJG)
call QD7(RP7,"x2",x1)
call QD7(RP7,"y2",y1)
call QP7(RP7,"AlreadyHit",ZI7())
call DestroyEffect(AddSpecialEffect(s,AY7(x2),AZ7(y2)))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function NIG))
set Z47=null
set t=null
set IJ=null
set NJG=null
set l=null
endfunction
function NSG takes nothing returns boolean
if GetSpellAbilityId()==1093742923 then
call NQG()
endif
return false
endfunction
function P28 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NSG))
call AC7(1093742924)
set t=null
endfunction
function NTG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
set LP4="NTG"
if Q07(RP7,"Light")!=null then
call DestroyLightning(Q07(RP7,"Light"))
endif
call Q47(RP7)
call RN7(t)
set t=null
return false
endfunction
function NUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=QA7(RP7,"Projectile")
local unit m5=QA7(RP7,"Target")
local real NVG=R77(RP7,"OriginalAngle")
local real l4=Atan2(GetUnitY(m5)-GetUnitY(DT8),GetUnitX(m5)-GetUnitX(DT8))
local integer X37=R47(RP7,"Level")
local real x=GetUnitX(DT8)+50*Cos(l4)
local real y=GetUnitY(DT8)+50*Sin(l4)
local unit DA8
local destructable d
local lightning J9E
local unit LKF
local boolean C38=R87(RP7,"Active")
set LP4="NUG"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call Q47(RP7)
call RN7(t)
call KillUnit(DT8)
else
call SetUnitX(DT8,x)
call SetUnitY(DT8,y)
call SetUnitFacing(DT8,l4*bj_RADTODEG)
if N67(x,y,GetUnitX(m5),GetUnitY(m5))<45 then
set WT4=(LoadReal(C7,(RP7),(6)))
set WU4=(LoadReal(C7,(RP7),(7)))
call Q47(RP7)
call RN7(t)
if GetUnitTypeId(m5)!=1848651852 and C38 then
set DA8=DV8(DT8,m5,NVG)
set d=DS8(DT8,m5,NVG)
if DA8!=null then
set t=CreateTrigger()
set RP7=GetHandleId(t)
set LKF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(LKF,1093743177)
call SetUnitAbilityLevel(LKF,1093743177,X37+1)
call IssueTargetOrderById(LKF,$D007F,m5)
set LKF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(DA8),GetUnitY(DA8),0)
call Z27(LKF,1093743177)
call SetUnitAbilityLevel(LKF,1093743177,X37+1)
call IssueTargetOrderById(LKF,$D007F,DA8)
call TriggerRegisterTimerEvent(t,.25+X37*.75,false)
call TriggerAddCondition(t,Condition(function NTG))
set J9E=AddLightning("MFPB",true,GetUnitX(m5),GetUnitY(m5),GetUnitX(DA8),GetUnitY(DA8))
call SetLightningColor(J9E,.5,.5,1,1)
call QJ7(RP7,"Light",J9E)
elseif d!=null then
set t=CreateTrigger()
set RP7=GetHandleId(t)
set LKF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(LKF,1093743177)
call SetUnitAbilityLevel(LKF,1093743177,X37+1)
call IssueTargetOrderById(LKF,$D007F,m5)
call TriggerRegisterTimerEvent(t,.25+X37*.75,false)
call TriggerAddCondition(t,Condition(function NTG))
set J9E=AddLightning("MFPB",true,GetUnitX(m5),GetUnitY(m5),GetDestructableX(d),GetDestructableY(d))
call SetLightningColor(J9E,.5,.5,1,1)
call QJ7(RP7,"Light",J9E)
call SetDestructableAnimation(d,"stand hit")
else
set LKF=CreateUnit(GetOwningPlayer(m5),1697656901,GetUnitX(m5),GetUnitY(m5),0)
call Z27(LKF,1093743177)
call SetUnitAbilityLevel(LKF,1093743177,1)
call IssueTargetOrderById(LKF,$D007F,m5)
endif
endif
call KillUnit(DT8)
endif
endif
set t=null
set DT8=null
set m5=null
set J9E=null
set DA8=null
set d=null
set LKF=null
return false
endfunction
function NWG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real l4=Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit DT8=CreateUnit(GetOwningPlayer(p5),1747990327,GetUnitX(p5),GetUnitY(p5),l4*bj_RADTODEG)
local integer X37=GetUnitAbilityLevel(p5,1093743178)
local boolean C38=ZG7(GetSpellTargetUnit())==false
set LP4="NWG"
call QG7(RP7,"Projectile",DT8)
call QG7(RP7,"Target",m5)
call Q97(RP7,"Level",X37)
call QD7(RP7,"OriginalAngle",(l4)*1.)
call QF7(RP7,"Active",C38)
call SaveReal(C7,(RP7),(6),((GetUnitX(p5))*1.))
call SaveReal(C7,(RP7),(7),((GetUnitY(p5))*1.))
call TriggerRegisterTimerEvent(t,.033,true)
call TriggerAddCondition(t,Condition(function NUG))
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
set p5=null
set m5=null
set t=null
endfunction
function NXG takes nothing returns boolean
if GetSpellAbilityId()==1093743178 then
call NWG()
endif
return false
endfunction
function P_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="P_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NXG))
set t=null
endfunction
function NYG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer X37=R47(RP7,"Level")
local integer NZG=R47(RP7,"BonusID")
set LP4="NYG"
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",GetUnitX(p5),GetUnitY(p5)))
if GetTriggerEvalCount(t)>$A*(2+.75*X37)or GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitRemoveAbility(p5,NZG)
call UnitRemoveAbility(p5,1110456663)
call DestroyEffect(Q17(RP7,"FX1"))
call DestroyEffect(Q17(RP7,"FX2"))
call Q47(RP7)
call RN7(t)
endif
set t=null
set p5=null
return false
endfunction
function NAG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093743689)
local integer NZG
set LP4="NAG"
if X37==1 then
set NZG=1093743413
elseif X37==2 then
set NZG=1093743183
elseif X37==3 then
set NZG=1093743412
elseif X37==4 then
set NZG=1093743417
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),NZG,false)
call CW7(p5,NZG,1,2+.75*X37)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function NYG))
call QG7(RP7,"Source",p5)
call Q97(RP7,"Level",X37)
call Q97(RP7,"BonusID",NZG)
call QH7(RP7,"FX1",AddSpecialEffectTarget("effects\\Tornado.mdx",p5,"hand,left"))
call QH7(RP7,"FX2",AddSpecialEffectTarget("effects\\Tornado.mdx",p5,"hand,right"))
set p5=null
set t=null
endfunction
function NBG takes nothing returns boolean
if GetSpellAbilityId()==1093743689 then
call NAG()
endif
return false
endfunction
function Q48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q48"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function NBG))
set t=null
endfunction
function NCG takes unit p5,unit m5,real BD7,integer N3G,integer N6G returns nothing
call D38(p5,m5,1,(BD7)*Pow(.9,N3G)*Pow(.99,N6G))
endfunction
function NLG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),ZB)==false and GetUnitAbilityLevel(GetEnumUnit(),1113815395)==0 then
call NCG(vc,GetEnumUnit(),ec,ac,xc)
call GroupAddUnit(ZB,GetEnumUnit())
set ac=ac+1
endif
endfunction
function N1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit IJ=QA7(RP7,"Projectile")
local real NKG=R77(RP7,"TargetX")
local real NMG=R77(RP7,"TargetY")
local real RK=R77(RP7,"Angle")
local real BD7=R77(RP7,"Damage")
local integer N6G=R47(RP7,"TreeCount")
local integer N3G=R47(RP7,"UnitCount")
local group NPG=QL7(RP7,"AlreadyHit")
local real x=AY7(GetUnitX(IJ)+(60*Pow(.9,N3G)*Pow(.99,N6G))*Cos(RK))
local real y=AZ7(GetUnitY(IJ)+(60*Pow(.9,N3G)*Pow(.99,N6G))*Sin(RK))
local group g=ZI7()
local real d
set LP4="N1G"
if GetTriggerEvalCount(t)>2 then
set d=$96
else
set d=75
endif
call DestroyEffect(AddSpecialEffect("effects\\Tornado.mdx",x,y))
set N6G=N6G+BW7(x,y,75)
call Q97(RP7,"TreeCount",N6G)
set ZB=NPG
set vc=IJ
set ec=BD7
set xc=N6G
set ac=N3G
set IM4=IJ
call GroupEnumUnitsInRange(g,x,y,d,Condition(function LF7))
call ForGroup(g,function NLG)
call ZH7(g)
call Q97(RP7,"UnitCount",ac)
call SetUnitX(IJ,x)
call SetUnitY(IJ,y)
if GetTriggerEvalCount(t)>29 then
call KillUnit(IJ)
call ZH7(NPG)
call Q47(RP7)
call RN7(t)
endif
set t=null
set IJ=null
set NPG=null
set g=null
return false
endfunction
function N0G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local real x2=R77(GetHandleId(p5),"ReverseLance|x")
local real y2=R77(GetHandleId(p5),"ReverseLance|y")
local real N5G=B87(O97()-R77(GetHandleId(p5),"ReverseLance|Time"),1.)
local real RK=Atan2(y2-GetUnitY(p5),x2-GetUnitX(p5))
local trigger t
local integer RP7
local unit IJ
local integer X37=GetUnitAbilityLevel(p5,1093743179)
local real BD7=(40+80*X37)*(N5G)
set LP4="N0G"
set t=CreateTrigger()
set RP7=GetHandleId(t)
set IJ=CreateUnit(GetOwningPlayer(p5),1747990328,GetUnitX(p5),GetUnitY(p5),RK*bj_RADTODEG)
set x2=GetUnitX(p5)+$6A4*Cos(RK)
set y2=GetUnitY(p5)+$6A4*Sin(RK)
call QG7(RP7,"Projectile",IJ)
call QD7(RP7,"TargetX",x2)
call QD7(RP7,"TargetY",y2)
call QD7(RP7,"Angle",RK)
call QD7(RP7,"Damage",BD7)
call Q97(RP7,"TreeCount",0)
call Q97(RP7,"UnitCount",0)
call QP7(RP7,"AlreadyHit",ZI7())
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function N1G))
set p5=null
set t=null
set IJ=null
endfunction
function N2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=QA7(RP7,"Hero")
set LP4="N2G"
call SetUnitTimeScale(Z47,1)
call Q47(RP7)
call RN7(t)
set t=null
set Z47=null
return false
endfunction
function N_G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit Z47=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
set LP4="N_G"
call RemoveLocation(l)
call QD7(GetHandleId(Z47),"ReverseLance|x",x)
call QD7(GetHandleId(Z47),"ReverseLance|y",y)
call QD7(GetHandleId(Z47),"ReverseLance|Time",O97())
call SetUnitTimeScale(Z47,.75)
call QG7(RP7,"Hero",Z47)
call TriggerRegisterTimerEvent(t,.75,false)
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function N2G))
set t=null
set Z47=null
endfunction
function O4G takes nothing returns boolean
if GetSpellAbilityId()==1093743179 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call QF7(GetHandleId(GetTriggerUnit()),"ReverseLance|Active",false)
call N_G()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call QF7(GetHandleId(GetTriggerUnit()),"ReverseLance|Active",true)
elseif R87(GetHandleId(GetTriggerUnit()),"ReverseLance|Active") then
call N0G()
endif
endif
return false
endfunction
function Q78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function O4G))
set t=null
endfunction
function O7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local integer D18=R47(RP7,"TargetIndex")
local unit m5=WG7(D18)
local real O8G=R77(RP7,"Rate")
local boolean HTD=R87(RP7,"Scepter")
set LP4="O7G"
if GetTriggerEvalCount(t)==1 then
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
endif
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==p5 and HTD==false then
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+(O8G)*GetEventDamage())
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766 then
call WF7(D18)
call Q47(RP7)
call RN7(t)
endif
else
call UnitRemoveAbility(p5,1093743186)
call UnitRemoveAbility(p5,1110456664)
call WF7(D18)
call Q47(RP7)
call RN7(t)
call UnitRemoveAbility(p5,1093748299)
call UnitRemoveAbility(p5,1093748300)
call UnitRemoveAbility(p5,1093748298)
endif
set t=null
set p5=null
set m5=null
return false
endfunction
function O9G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(CP7,1093743184)
local real U9D=.6-X37*.1
local boolean WGD=false
set LP4="O9G"
call UnitRemoveAbility(CP7,1093743186)
call UnitRemoveAbility(CP7,1110456664)
if X37==0 then
call UnitRemoveAbility(CP7,1093748299)
call UnitRemoveAbility(CP7,1093748300)
call UnitRemoveAbility(CP7,1093748298)
set WGD=true
set X37=GetUnitAbilityLevel(CP7,1093747766)
set U9D=.6-X37*.15
if X37==1 then
call Z27(CP7,1093748299)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093748299,false)
elseif X37==2 then
call Z27(CP7,1093748300)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093748300,false)
elseif X37==3 then
call Z27(CP7,1093748298)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093748298,false)
endif
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093743186,false)
call Z27(CP7,1093743186)
call IssueTargetOrderById(CP7,$D000F,J67)
call QG7(RP7,"Source",CP7)
call QF7(RP7,"Scepter",WGD)
call Q97(RP7,"TargetIndex",WI7(J67))
call QD7(RP7,"Rate",U9D)
call Q97(RP7,"Attacks",0)
call QG7(GetHandleId(CP7),"Target",J67)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function O7G))
set CP7=null
set J67=null
set t=null
endfunction
function ODG takes nothing returns boolean
if(GetSpellAbilityId()==1093743184 or GetSpellAbilityId()==1093747766)and ZG7(GetSpellTargetUnit())==false then
call O9G()
endif
return false
endfunction
function OEG takes unit CP7 returns nothing
local unit J67=QA7(GetHandleId(CP7),"Target")
set LP4="aTe"
if GetTriggerUnit()==J67 then
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",CP7,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("effects\\Tornado.mdx",CP7,"hand,right"))
elseif GetTriggerUnit()!=J67 then
call UnitRemoveAbility(CP7,1093743186)
call UnitRemoveAbility(CP7,1110456664)
call UnitRemoveAbility(CP7,1093748299)
call UnitRemoveAbility(CP7,1093748300)
call UnitRemoveAbility(CP7,1093748298)
endif
set J67=null
endfunction
function OFG takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093743186)>0 then
call OEG(GetAttacker())
endif
return false
endfunction
function Q88 takes nothing returns nothing
local trigger t=CreateTrigger()
local trigger t2=CreateTrigger()
set LP4="Q88"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ODG))
call BT7(t2,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t2,Condition(function OFG))
set t=null
set t2=null
endfunction
function OGG takes unit Z47,integer X37 returns integer
local integer OHG
local integer OIG
set LP4="aUe"
if X37==1 then
set OIG=1110458929
set OHG=1093744730
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458928
set OHG=1093744970
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458713
set OHG=1093744970
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
return 1093744729
elseif X37==2 then
set OIG=1110458936
set OHG=1093744968
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458935
set OHG=1093744967
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458930
set OHG=1093744967
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
return 1093744969
elseif X37==3 then
set OIG=1110458931
set OHG=1093744965
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458937
set OHG=1093744964
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458934
set OHG=1093744964
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
return 1093744971
elseif X37==4 then
set OIG=1110458933
set OHG=1093744950
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458932
set OHG=1093744949
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
set OIG=1110458945
set OHG=1093744949
if GetUnitAbilityLevel(Z47,OIG)>0 then
call UnitRemoveAbility(Z47,OIG)
return OHG
endif
return 1093744972
endif
return 0
endfunction
function OJG takes nothing returns nothing
local unit Z47=GetTriggerUnit()
local integer X37=GetUnitAbilityLevel(Z47,1093744728)
local integer OIG=OGG(Z47,X37)
local unit DA8=CreateUnit(GetOwningPlayer(Z47),1697656901,GetUnitX(Z47),GetUnitY(Z47),0)
set LP4="OJG"
call Z27(DA8,OIG)
call IssueTargetOrderById(DA8,$D0085,Z47)
set Z47=null
set DA8=null
endfunction
function OKG takes nothing returns boolean
if GetSpellAbilityId()==1093677382 or GetSpellAbilityId()==1093677623 or GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450 or(GetUnitPointValue(GetTriggerUnit())==500 and XW7(GetSpellAbilityId()))then
call OJG()
endif
return false
endfunction
function OMG takes unit Z47,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="aze"
call TriggerRegisterUnitEvent(t,Z47,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OKG))
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(Z47))]=t
endif
set t=null
set Z47=null
endfunction
function ONG takes nothing returns boolean
if GetLearnedSkill()==1093744728 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093744728)==1 then
call OMG(GetTriggerUnit(),false)
endif
return false
endfunction
function Q98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q98"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ONG))
set t=null
endfunction
function OOG takes nothing returns boolean
if(GetSpellAbilityId()==1093677392 or GetSpellAbilityId()==1093679450)and Y57(GetSpellTargetUnit())then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848659026))
endif
return false
endfunction
function QD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function OOG))
set t=null
endfunction
function OPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local unit J67=QA7(JZ7,"Target")
local integer ZD8=R47(GetHandleId(J67),"StickyNapalm|Count")
local boolean OQG=R87(JZ7,"Locked")
set LP4="OPG"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call SetUnitTurnSpeed(J67,GetUnitDefaultTurnSpeed(J67))
call Q97(GetHandleId(J67),"StickyNapalm|Count",0)
call Q47(JZ7)
call RN7(t)
call BT8(J67,0,0)
elseif ZD8==0 then
call SetUnitTurnSpeed(J67,GetUnitDefaultTurnSpeed(J67))
call Q97(GetHandleId(J67),"StickyNapalm|Count",0)
call Q47(JZ7)
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED and OQG==false then
if ZD8>0 and GetUnitAbilityLevel(GetEventDamageSource(),1093748044)>0 and QA7(GetHandleId(GetTriggeringTrigger()),"Source")==GetEventDamageSource()then
call QF7(JZ7,"Locked",true)
if R_4 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",J67,"chest"))
call D38(CP7,J67,1,.5*(5+5*GetUnitAbilityLevel(CP7,1093748044))*ZD8)
elseif(GetEventDamage()>34 and IsUnitType(J67,UNIT_TYPE_HERO))or(GetEventDamage()>45 and IsUnitType(J67,UNIT_TYPE_HERO)==false)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",J67,"chest"))
call D38(CP7,J67,1,(5+5*GetUnitAbilityLevel(CP7,1093748044))*ZD8)
endif
call QF7(JZ7,"Locked",false)
endif
else
call SetUnitTurnSpeed(J67,GetUnitDefaultTurnSpeed(J67)*.3)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function ORG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(QA7(JZ7,"Source"))
local unit J67=(QA7(JZ7,"Target"))
local real CS8=(R77(GetHandleId(J67),"StickyNapalm|LastTime"))
local integer StickyCount=(R47(GetHandleId(J67),"StickyNapalm|Count"))
set LP4="ORG"
if(TimerGetElapsed(V))-CS8>=8 then
call SetUnitTurnSpeed(J67,GetUnitDefaultTurnSpeed(J67))
call Q97(GetHandleId(J67),"StickyNapalm|Count",0)
call BT8(J67,0,0)
endif
call Q47(JZ7)
call RN7(t)
set t=null
set CP7=null
set J67=null
return false
endfunction
function OSG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(CP7,1093748044)
local integer ZD8=IMinBJ(R47(GetHandleId(J67),"StickyNapalm|Count")+1,$A)
set LP4="OSG"
if Y57(J67)then
set CP7=null
set J67=null
return
endif
call BT8(J67,DB8,ZD8)
call Q97(GetHandleId(J67),"StickyNapalm|Count",ZD8)
call QD7(GetHandleId(J67),"StickyNapalm|LastTime",(TimerGetElapsed(V))*1.)
call SetUnitTurnSpeed(J67,GetUnitDefaultTurnSpeed(J67)*.3)
if IsUnitType(J67,UNIT_TYPE_HERO) then
call BP7(GetOwningPlayer(CP7),I2S(ZD8)+"!",2,J67,.026,50,0,$FF,$D8)
endif
if ZD8==1 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
call QF7(JZ7,"Locked",false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function OPG))
endif
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,8,false)
call TriggerAddCondition(t,Condition(function ORG))
call QG7(JZ7,"Source",CP7)
call QG7(JZ7,"Target",J67)
set t=null
set CP7=null
set J67=null
endfunction
function OTG takes nothing returns nothing
local group g=ZI7()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local unit p5=GetTriggerUnit()
set LP4="OTG"
call GroupEnumUnitsInRange(g,x,y,400,Condition(function LV7))
call ForGroup(g,function OSG)
call BA7(GetOwningPlayer(p5),2,x,y,500)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x,y-$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x+$82,y-$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y+$82))
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGargoyle.mdl",x-$82,y-$82))
call RemoveLocation(l)
call ZH7(g)
set g=null
set l=null
set p5=null
endfunction
function OUG takes nothing returns boolean
if GetSpellAbilityId()==1093748044 then
call OTG()
endif
return false
endfunction
function QF8 takes nothing returns nothing
local integer i
local trigger t=CreateTrigger()
set LP4="QF8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OUG))
set WG4[1]=1093752899
set WG4[2]=1093752898
set WG4[3]=1093752884
set WG4[4]=1093752885
set WG4[5]=1093752886
set WG4[6]=1093752887
set WG4[7]=1093752897
set WG4[8]=1093752888
set WG4[9]=1093752889
set WG4[$A]=1093752900
set WH4[1]=1093752909
set WH4[2]=1093752901
set WH4[3]=1093752902
set WH4[4]=1093752903
set WH4[5]=1093752904
set WH4[6]=1093752905
set WH4[7]=1093752906
set WH4[8]=1093752907
set WH4[9]=1093752910
set WH4[$A]=1093752908
set WI4[1]=1093752911
set WI4[2]=1093752918
set WI4[3]=1093752919
set WI4[4]=1093752913
set WI4[5]=1093752914
set WI4[6]=1093752915
set WI4[7]=1093752920
set WI4[8]=1093752916
set WI4[9]=1093752917
set WI4[$A]=1093752912
set WJ4[1]=1093752921
set WJ4[2]=1093752922
set WJ4[3]=1093753141
set WJ4[4]=1093753142
set WJ4[5]=1093753143
set WJ4[6]=1093753137
set WJ4[7]=1093753138
set WJ4[8]=1093753139
set WJ4[9]=1093753140
set WJ4[$A]=1093753136
set i=1
loop
exitwhen i>$A
call AC7(WG4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call AC7(WH4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call AC7(WI4[i])
set i=i+1
endloop
set i=1
loop
exitwhen i>$A
call AC7(WJ4[i])
set i=i+1
endloop
set t=null
endfunction
function OVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit m5=QA7(RP7,"Target")
local real a=R77(RP7,"a")
local real d=R77(RP7,"d")
local real x1=R77(RP7,"x")
local real y1=R77(RP7,"y")
local real x2
local real y2
local real x
local real y
set LP4="OVG"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>$A then
call BW7(GetUnitX(m5),GetUnitY(m5),$C8)
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
else
set x2=x1+d*Cos(a)
set y2=y1+d*Sin(a)
if(IsPointInRegion(IT4,((x2)*1.),((y2)*1.)))==false then
call QD7(RP7,"x",(x2)*1.)
call QD7(RP7,"y",(y2)*1.)
set x=x2
set y=y2
else
set x=x1
set y=y1
endif
if IsUnitType(m5,UNIT_TYPE_HERO) then
call SetUnitPosition(m5,x,y)
else
call SetUnitX(m5,x)
call SetUnitY(m5,y)
endif
endif
set t=null
set m5=null
return false
endfunction
function OWG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetEnumUnit()
local integer X37=GetUnitAbilityLevel(p5,1093744982)
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="OWG"
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function OVG))
call QG7(RP7,"Target",m5)
call QD7(RP7,"a",(Atan2(GetUnitY(m5)-C1,GetUnitX(m5)-B1))*1.)
call QD7(RP7,"d",(B97((400-N67(B1,C1,GetUnitX(m5),GetUnitY(m5))),$A)/ $A)*1.)
call QD7(RP7,"x",(GetUnitX(m5))*1.)
call QD7(RP7,"y",(GetUnitY(m5))*1.)
set p5=null
set m5=null
set t=null
call D38(S44,GetEnumUnit(),1,S74*75)
endfunction
function OXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit DA8=QA7(RP7,"Caster")
local unit p5=QA7(RP7,"Source")
local real a=R77(RP7,"a")
local group g=ZI7()
local unit m5
local real x=GetUnitX(DA8)
local real y=GetUnitY(DA8)
local real KME=R77(RP7,"FinalX")
local real KNE=R77(RP7,"FinalY")
set LP4="OXG"
set x=AY7(x+36*Cos(a))
set y=AZ7(y+36*Sin(a))
call SetUnitX(DA8,x)
call SetUnitY(DA8,y)
set IM4=DA8
call GroupEnumUnitsInRange(g,x,y,125,Condition(function LQ7))
set m5=FirstOfGroup(g)
call ZH7(g)
if N67(x,y,KME,KNE)<40 or GetTriggerEvalCount(t)>100 then
set m5=null
set x=KME
set y=KNE
set S44=p5
set S74=R47(RP7,"Level")
set N1=m5
if m5==null then
set B1=x
set C1=y
else
set B1=GetUnitX(m5)
set C1=GetUnitY(m5)
endif
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,400,Condition(function LQ7))
if m5!=null then
call GroupRemoveUnit(g,m5)
call DZ8(p5,m5,.3)
call D38(S44,m5,1,S74*75)
endif
call ForGroup(g,function OWG)
call KillUnit(DA8)
call ZH7(g)
call Q47(RP7)
call RN7(t)
endif
set t=null
set m5=null
set DA8=null
set p5=null
set g=null
return false
endfunction
function OYG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer X37=GetUnitAbilityLevel(p5,1093744982)
local unit DA8
set LP4="OYG"
set DA8=CreateUnit(GetOwningPlayer(p5),1747993924,GetUnitX(p5),GetUnitY(p5),a*bj_RADTODEG)
call RemoveLocation(l)
call QD7(RP7,"a",a)
call Q97(RP7,"Level",X37)
call QG7(RP7,"Source",p5)
call QG7(RP7,"Caster",DA8)
call QD7(RP7,"FinalX",((x)*1.))
call QD7(RP7,"FinalY",((y)*1.))
call TriggerRegisterTimerEvent(t,.04,true)
call TriggerAddCondition(t,Condition(function OXG))
set p5=null
set DA8=null
set l=null
set t=null
endfunction
function OZG takes nothing returns boolean
if GetSpellAbilityId()==1093744982 then
call OYG()
endif
return false
endfunction
function QG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function OZG))
set t=null
endfunction
function OAG takes nothing returns nothing
local unit CP7=S84
local unit CIF=GetEnumUnit()
local unit J67
local group g
set LP4="OAG"
if GetUnitCurrentOrder(CIF)==0 then
set g=ZI7()
set IM4=CIF
call GroupEnumUnitsInRange(g,GetUnitX(CIF),GetUnitY(CIF),825,Condition(function LF7))
set J67=FirstOfGroup(g)
if J67!=null then
call GroupRemoveUnit(g,J67)
endif
if FirstOfGroup(g)==null and J67==CP7 then
call IssueTargetOrderById(CIF,$D000F,J67)
endif
call ZH7(g)
set J67=null
set g=null
endif
set CP7=null
set CIF=null
endfunction
function OBG takes unit CP7 returns nothing
local group g=ZI7()
set LP4="Firefly_SearchTowers"
set IM4=CP7
set S84=CP7
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$3E8,Condition(function DE8))
call ForGroup(g,function OAG)
call ZH7(g)
set g=null
endfunction
function OCG takes nothing returns nothing
set LP4="OCG"
call D38(S84,GetEnumUnit(),1,S94*$A)
endfunction
function O3G takes unit CP7,integer JZ7,integer ZD8 returns nothing
local group g1=ZI7()
local group g2=ZI7()
local integer i=0
set LP4="Firefly_Hit"
set IM4=CP7
loop
exitwhen i>ZD8
call GroupEnumUnitsInRange(g2,R77(JZ7,"X"+I2S(i)),R77(JZ7,"Y"+I2S(i)),$E1,Condition(function LF7))
call GroupAddGroup(g2,g1)
call GroupClear(g2)
set i=i+1
endloop
call ZH7(g2)
if FirstOfGroup(g1)!=null then
set S84=CP7
set S94=GetUnitAbilityLevel(CP7,1093744986)
call ForGroup(g1,function OCG)
endif
call ZH7(g1)
set g1=null
set g2=null
endfunction
function O6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
local real WN9=R77(JZ7,"LastX")
local real WO9=R77(JZ7,"LastY")
local integer ZD8=R47(JZ7,"Count")
local integer i
local real x
local real y
set LP4="O6G"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>360 then
set i=0
loop
exitwhen i>ZD8
call DestroyEffect(Q17(JZ7,"FX"+I2S(i)))
set i=i+1
endloop
call Q47(JZ7)
call RN7(t)
else
set x=GetUnitX(CP7)
set y=GetUnitY(CP7)
if R8 then
call OBG(CP7)
endif
if N67(x,y,WN9,WO9)>125 then
set ZD8=ZD8+1
call Q97(JZ7,"Count",ZD8)
call QD7(JZ7,"LastX",x)
call QD7(JZ7,"LastY",y)
call QH7(JZ7,"FX"+I2S(ZD8),AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",x,y))
call QD7(JZ7,"X"+I2S(ZD8),x)
call QD7(JZ7,"Y"+I2S(ZD8),y)
endif
if ModuloInteger(GetTriggerEvalCount(t),$A)==0 then
set R_4=true
call O3G(CP7,JZ7,ZD8)
set R_4=false
endif
call BW7(GetUnitX(CP7),GetUnitY(CP7),100)
endif
return false
endfunction
function OLG takes nothing returns nothing
local unit p5=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
set LP4="OLG"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function O6G))
call QG7(RP7,"Source",p5)
call QH7(RP7,"FX"+I2S(0),AddSpecialEffect("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",GetUnitX(p5),GetUnitY(p5)))
call QD7(RP7,"LastX",GetUnitX(p5))
call QD7(RP7,"LastY",GetUnitY(p5))
call QD7(RP7,"X"+I2S(0),GetUnitX(p5))
call QD7(RP7,"Y"+I2S(0),GetUnitY(p5))
set p5=null
set t=null
endfunction
function O1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
set LP4="O1G"
if A47(p5)then
return false
endif
if GetUnitTypeId(p5)==1328558390 then
call SetUnitFlyHeight(p5,$AA,0)
elseif GetUnitTypeId(p5)==1328558391 then
call SetUnitFlyHeight(p5,$DC,0)
endif
set t=null
set p5=null
return false
endfunction
function O0G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
set LP4="O0G"
call TriggerRegisterTimerEvent(t,2,true)
call TriggerAddCondition(t,Condition(function O1G))
call QG7(RP7,"Source",p5)
set t=null
set p5=null
endfunction
function O5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
set LP4="O5G"
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
return false
endfunction
function O2G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
set LP4="O2G"
call SetTerrainPathable(x,y,PATHING_TYPE_WALKABILITY,true)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function O5G))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
set CP7=null
set t=null
endfunction
function O_G takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093744986 then
if GetUnitTypeId(GetTriggerUnit())==1328558390 then
call OLG()
elseif IsTerrainPathable(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),PATHING_TYPE_WALKABILITY)then
call O2G()
endif
endif
else
if GetLearnedSkill()==1093744986 and GetUnitAbilityLevel(GetTriggerUnit(),1093744986)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call O0G()
endif
endif
return false
endfunction
function QH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function O_G))
set t=null
endfunction
function P4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=QA7(RP7,"Source")
local unit m5=QA7(RP7,"Target")
local unit DA8=QA7(RP7,"Caster")
local real d=N67(GetUnitX(p5),GetUnitY(p5),GetUnitX(m5),GetUnitY(m5))
local real a
local real CB7=R77(RP7,"Duration")
local real JEE=R77(RP7,"rRealX0")
local real JFE=R77(RP7,"rRealY0")
local real S4D
local real S7D
set LP4="P4G"
if GetTriggerEventId()==EVENT_UNIT_DEATH or GetTriggerEvalCount(t)>R2I(20*CB7)then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
call KillUnit(DA8)
call SetUnitPathing(m5,true)
call L97(p5)
call BW7(GetUnitX(m5),GetUnitY(m5),$AF)
call RK7(p5,"AI|Lasso")
else
call SetUnitX(DA8,GetUnitX(p5))
call SetUnitY(DA8,GetUnitY(p5))
if N67(JEE,JFE,GetUnitX(p5),GetUnitY(p5))>400 then
call DestroyEffect(Q17(RP7,"FX"))
call Q47(RP7)
call RN7(t)
call KillUnit(DA8)
call SetUnitPathing(m5,true)
call L97(p5)
call BW7(GetUnitX(m5),GetUnitY(m5),$AF)
else
call QD7(RP7,"rRealX0",GetUnitX(p5))
call QD7(RP7,"rRealY0",GetUnitY(p5))
if d>300 then
set a=Atan2(GetUnitY(m5)-GetUnitY(p5),GetUnitX(m5)-GetUnitX(p5))
set S4D=GetUnitX(p5)+300*Cos(a)
set S7D=GetUnitY(p5)+300*Sin(a)
if(IsPointInRegion(IT4,((S4D)*1.),((S7D)*1.)))==false then
call SetUnitX(m5,S4D)
call SetUnitY(m5,S7D)
endif
endif
endif
endif
set t=null
set p5=null
set m5=null
set DA8=null
return false
endfunction
function P7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(p5),1966092377,GetUnitX(p5),GetUnitY(p5),0)
local integer X37=GetUnitAbilityLevel(p5,1093744975)
set LP4="P7G"
if X37==0 then
set X37=GetUnitAbilityLevel(p5,1093750102)+2
endif
call Z27(DA8,1093744974)
call SetUnitAbilityLevel(DA8,1093744974,GetUnitAbilityLevel(p5,1093744975))
call IssueTargetOrderById(DA8,$D0200,m5)
call SetUnitPathing(DA8,false)
call SetUnitPathing(m5,false)
call L77(p5)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function P4G))
call QG7(RP7,"Source",p5)
call QG7(RP7,"Target",m5)
call QG7(RP7,"Caster",DA8)
call QD7(RP7,"Duration",(2.5+X37*.5)*1.)
call QH7(RP7,"FX",AddSpecialEffectTarget("Abilities\\Spells\\Human\\AerialShackles\\AerialShacklesTarget.mdl",m5,"chest"))
call QD7(RP7,"rRealX0",GetUnitX(p5))
call QD7(RP7,"rRealY0",GetUnitY(p5))
call RI7(p5,"AI|Lasso")
set t=null
set p5=null
set m5=null
set DA8=null
endfunction
function P8G takes nothing returns boolean
if(GetSpellAbilityId()==1093744975 or GetSpellAbilityId()==1093750102)and ZG7(GetSpellTargetUnit())==false and GetUnitTypeId(GetSpellTargetUnit())!=1848651852 then
call P7G()
endif
return false
endfunction
function QI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QI8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P8G))
set t=null
endfunction
function P9G takes nothing returns boolean
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if WO7(GetOwningPlayer(GetEventDamageSource()))and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource())) and w1==false then
if W1==false then
call UnitRemoveAbility(GetTriggerUnit(),1110458957)
call RN7(GetTriggeringTrigger())
endif
endif
if W1 then
set W1=false
endif
if w1 then
set w1=false
endif
else
call RN7(GetTriggeringTrigger())
endif
return false
endfunction
function PDG takes nothing returns nothing
local unit m5=GetEnumUnit()
local trigger t=CreateTrigger()
set LP4="PDG"
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,6,false)
call TriggerAddCondition(t,Condition(function P9G))
set m5=null
set t=null
endfunction
function PEG takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110458957)>0 and GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0
endfunction
function PFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local real x=(LoadReal(C7,(RP7),(6)))
local real y=(LoadReal(C7,(RP7),(7)))
local group g=ZI7()
set LP4="PFG"
call GroupEnumUnitsInRange(g,x,y,$3E8,Condition(function PEG))
call ForGroup(g,function PDG)
call ZH7(g)
call FlushChildHashtable(C7,(RP7))
call RN7(t)
set t=null
set g=null
return false
endfunction
function PGG takes nothing returns nothing
if SD4==1 or SD4==2 then
call D38(GetTriggerUnit(),GetEnumUnit(),2,80)
endif
if SD4==1 or SD4==3 then
call D38(GetTriggerUnit(),GetEnumUnit(),1,80)
endif
endfunction
function PHG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local unit DA8=CreateUnit(GetOwningPlayer(p5),1747990362,x,y,0)
local group g=ZI7()
local unit u
set LP4="PHG"
set L_4=GetUnitAbilityLevel(p5,1093747009)
if((LoadInteger(C7,(GetHandleId((p5))),((4270))))==1)==false then
call SetUnitTimeScale(DA8,2.5)
call UnitApplyTimedLife(DA8,1112820806,2)
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call Z27(DA8,1093747001)
call SetUnitAbilityLevel(DA8,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(DA8,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function LV7))
set SD4=1
call ForGroup(g,function PGG)
call ZH7(g)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function PFG))
call SaveReal(C7,(RP7),(6),((x)*1.))
call SaveReal(C7,(RP7),(7),((y)*1.))
else
call SetUnitTimeScale(DA8,2.5)
call UnitApplyTimedLife(DA8,1112820806,2)
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call Z27(DA8,1093747001)
call SetUnitAbilityLevel(DA8,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(DA8,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function LV7))
set SD4=2
call ForGroup(g,function PGG)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function PFG))
call SaveReal(C7,(RP7),(6),((x)*1.))
call SaveReal(C7,(RP7),(7),((y)*1.))
set t=CreateTrigger()
set RP7=GetHandleId(t)
set u=(SJ4[GetPlayerId(GetOwningPlayer((p5)))])
call IssueImmediateOrderById(u,$D0004)
set x=GetUnitX(u)
set y=GetUnitY(u)
set DA8=CreateUnit(GetOwningPlayer(p5),1747990362,x,y,0)
call SetUnitTimeScale(DA8,2.5)
call UnitApplyTimedLife(DA8,1112820806,2)
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,x,y,0)
call Z27(DA8,1093747001)
call SetUnitAbilityLevel(DA8,1093747001,GetUnitAbilityLevel(p5,1093747009))
call IssueImmediateOrderById(DA8,$D009F)
call GroupEnumUnitsInRange(g,x,y,500,Condition(function LV7))
set SD4=3
call ForGroup(g,function PGG)
call ZH7(g)
call TriggerRegisterTimerEvent(t,.65,false)
call TriggerAddCondition(t,Condition(function PFG))
call SaveReal(C7,(RP7),(6),((x)*1.))
call SaveReal(C7,(RP7),(7),((y)*1.))
call SetUnitAnimationByIndex(u,3)
endif
set t=null
set p5=null
set DA8=null
set g=null
endfunction
function PIG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local unit PJG=(LoadUnitHandle(C7,(RP7),(335)))
local boolean PKG=(LoadBoolean(C7,(RP7),(336)))
if GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
call SaveInteger(C7,(GetHandleId((p5))),((4269)),(2))
call SaveBoolean(C7,(GetHandleId(PJG)),(337),(true))
if PKG then
call ShowUnit(PJG,false)
call KillUnit(PJG)
else
call ShowUnit(PJG,false)
call UnitRemoveAbility(PJG,1097625443)
call ShowUnit(PJG,true)
endif
call FlushChildHashtable(C7,(RP7))
call RN7(t)
else
if PKG then
call SetUnitFacing(PJG,GetUnitFacing(p5))
endif
endif
set t=null
set PJG=null
return false
endfunction
function PMG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local unit PJG
local boolean KillImage
set LP4="PMG"
call SaveBoolean(C7,(RP7),(336),(false))
if((LoadInteger(C7,(GetHandleId((p5))),((4270))))==1)==false then
call SaveBoolean(C7,(RP7),(336),(true))
set PJG=CreateUnit(GetOwningPlayer(p5),1747990357,GetUnitX(p5),GetUnitY(p5),GetUnitFacing(p5))
call Z27(PJG,1097625443)
call Z27(PJG,1097167980)
call SetUnitPosition(PJG,GetUnitX(p5),GetUnitY(p5))
call SetUnitScale(PJG,1.4,1.4,1.4)
else
set PJG=(SJ4[GetPlayerId(GetOwningPlayer((p5)))])
call UnitAddAbility(PJG,1097625443)
endif
call IssueImmediateOrderById(PJG,$D0004)
call SaveInteger(C7,(GetHandleId((p5))),((4269)),(1))
call SetUnitAnimation(PJG,"spell slam")
call QueueUnitAnimation(PJG,"spell slam")
call SaveUnitHandle(C7,(RP7),(335),(PJG))
call SaveUnitHandle(C7,(RP7),(2),(p5))
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(t,Condition(function PIG))
call SaveUnitHandle(C7,(RP7),(335),(PJG))
set t=null
set p5=null
set PJG=null
endfunction
function PNG takes nothing returns boolean
if GetSpellAbilityId()==1093747009 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_FINISH then
call PHG()
else
call PMG()
endif
endif
return false
endfunction
function QN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QN8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function PNG))
set t=null
endfunction
function POG takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747521)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747513)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747522)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093747523)
call UnitRemoveAbility(GetEnumUnit(),1110458960)
endif
call E98(GetEnumUnit(),0)
endfunction
function PPG takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if m1==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747521)==0 then
call Z27(GetEnumUnit(),1093747521)
endif
elseif m1==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747513)==0 then
call Z27(GetEnumUnit(),1093747513)
endif
elseif m1==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747522)==0 then
call Z27(GetEnumUnit(),1093747522)
endif
elseif m1==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093747523)==0 then
call Z27(GetEnumUnit(),1093747523)
endif
endif
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call E98(GetEnumUnit(),R2I((I2R(GetHeroAgi(GetEnumUnit(),true))/ 7)*I2R(m1)/ 5))
endif
endfunction
function PQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local group TLE=(LoadGroupHandle(C7,(RP7),(340)))
local real x=GetUnitX(p5)
local real y=GetUnitY(p5)
local group g=ZI7()
local group g2
set LP4="PQG"
if p5==null then
call FlushChildHashtable(C7,(RP7))
call RN7(t)
call ZH7(TLE)
call ZH7(g)
return false
endif
set IM4=p5
set m1=GetUnitAbilityLevel(p5,1093747524)
call GroupEnumUnitsInRange(g,x,y,300,Condition(function LF7))
if((LoadInteger(C7,(GetHandleId((p5))),((4270))))==1) then
set g2=ZI7()
call GroupEnumUnitsInRange(g2,GetUnitX((SJ4[GetPlayerId(GetOwningPlayer((p5)))])),GetUnitY((SJ4[GetPlayerId(GetOwningPlayer((p5)))])),300,Condition(function LF7))
call GroupAddGroup(g2,g)
call ZH7(g2)
set g2=null
endif
call GroupRemoveGroup(g,TLE)
call ForGroup(TLE,function POG)
if A47(p5)==false then
call ForGroup(g,function PPG)
endif
call SaveGroupHandle(C7,(RP7),(340),(g))
call ZH7(TLE)
set t=null
set p5=null
set TLE=null
return false
endfunction
function PRG takes unit p5,boolean XY9 returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local integer i
local player p
set LP4="nFe"
call Z27(p5,1093747537)
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function PQG))
call SaveUnitHandle(C7,(RP7),(2),(p5))
call SaveGroupHandle(C7,(RP7),(340),(ZI7()))
call SaveTriggerHandle(C7,(GetHandleId(p5)),(338),(t))
call SaveBoolean(C7,(GetHandleId(p5)),(339),(true))
set i=0
loop
exitwhen i>5
set p=Y7[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093747521,false)
call SetPlayerAbilityAvailable(p,1093747513,false)
call SetPlayerAbilityAvailable(p,1093747522,false)
call SetPlayerAbilityAvailable(p,1093747523,false)
set i=i+1
endloop
if XY9 then
set nj[GetPlayerId(GetOwningPlayer(p5))]=t
endif
set t=null
set p5=null
endfunction
function PSG takes nothing returns boolean
if GetLearnedSkill()==1093747524 and GetUnitAbilityLevel(GetTriggerUnit(),1093747524)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call PRG(GetTriggerUnit(),false)
endif
return false
endfunction
function QM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QM8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function PSG))
set t=null
endfunction
function PTG takes nothing returns nothing
local real x1=Z1
local real y1=v2
local real x2=SK4
local real y2=o2
local real x3=GetUnitX(GetEnumUnit())
local real y3=GetUnitY(GetEnumUnit())
local real u=((x3-x1)*(x2-x1)+(y3-y1)*(y2-y1))/((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))
local real x4=x1+u*(x2-x1)
local real y4=y1+u*(y2-y1)
local real BD7=GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*.35/ 2
set LP4="PTG"
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call SetUnitPosition(GetEnumUnit(),x4,y4)
else
call SetUnitX(GetEnumUnit(),x4)
call SetUnitY(GetEnumUnit(),y4)
endif
call IssueTargetOrderById(Y1,$D006B,GetEnumUnit())
call D38(z1,GetEnumUnit(),1,BD7)
call D38(z1,GetEnumUnit(),2,BD7)
endfunction
function PUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local real x0=(LoadReal(C7,(RP7),(282)))
local real y0=(LoadReal(C7,(RP7),(283)))
local real a0=(LoadReal(C7,(RP7),(341)))
local integer i=0
local real x
local real y
local group g=ZI7()
local group L1D=ZI7()
local integer X37=GetUnitAbilityLevel(p5,1093746993)
local integer B59=(LoadInteger(C7,(RP7),(34)))
set LP4="PUG"
call FlushChildHashtable(C7,(RP7))
call RN7(t)
set IM4=p5
set z1=p5
set Y1=CreateUnit(GetOwningPlayer(p5),1697656901,x0,y0,0)
call Z27(Y1,1093747525)
call SetUnitAbilityLevel(Y1,1093747525,X37)
loop
exitwhen i>B59
set x=x0+i*$C8*Cos(a0)
set y=y0+i*$C8*Sin(a0)
call BK7("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl",x,y,1.6)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y-$FA))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x,y))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",x+$FA,y))
call BW7(x,y,300)
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LF7))
call GroupAddGroup(g,L1D)
call GroupClear(g)
set i=i+1
endloop
set Z1=x0
set v2=y0
set SK4=x
set o2=y
call ForGroup(L1D,function PTG)
call ZH7(L1D)
call ZH7(g)
set t=null
set p5=null
return false
endfunction
function PVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local real a=(LoadReal(C7,(RP7),($89)))
local real x0=(LoadReal(C7,(RP7),(282)))
local real y0=(LoadReal(C7,(RP7),(283)))
local real a0
local real PWG
local real PXG
local real PYG
local real PZG
local real PAG
local real PBG
local real PCG
local real P3G
local real P6G
local real PLG
local real P1G
local real P0G
local real x
local real y
local ubersplat E9G
local integer XB8=GetTriggerEvalCount(t)
local integer B59=(LoadInteger(C7,(RP7),(34)))
set LP4="PVG"
set x=x0+$C8*XB8*Cos(a)
set y=y0+$C8*XB8*Sin(a)
set E9G=CreateUbersplat(x,y,"THND",$FF,$FF,$FF,$FF,false,false)
call SetUbersplatRenderAlways(E9G,true)
set PWG=x+$C8*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set PXG=y+$C8*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set PYG=x+$C8*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set PZG=y+$C8*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set PAG=x-100*Cos(bj_DEGTORAD*(a*bj_RADTODEG-45))
set PBG=y-100*Sin(bj_DEGTORAD*(a*bj_RADTODEG-45))
set PCG=x-100*Cos(bj_DEGTORAD*(a*bj_RADTODEG+45))
set P3G=y-100*Sin(bj_DEGTORAD*(a*bj_RADTODEG+45))
set P6G=x
set PLG=y
set P1G=x
set P0G=y
call BA7(GetOwningPlayer(p5),4,x,y,500)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PWG,PXG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PYG,PZG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PAG,PBG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PCG,P3G))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",P6G,PLG))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",P1G,P0G))
if GetTriggerEvalCount(t)>B59 then
set x0=(LoadReal(C7,(RP7),(282)))
set y0=(LoadReal(C7,(RP7),(283)))
set a0=(LoadReal(C7,(RP7),(341)))
call FlushChildHashtable(C7,(RP7))
call RN7(t)
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function PUG))
call SaveUnitHandle(C7,(RP7),(2),(p5))
call SaveReal(C7,(RP7),(282),((x0)*1.))
call SaveReal(C7,(RP7),(283),((y0)*1.))
call SaveReal(C7,(RP7),(341),((a0)*1.))
call SaveInteger(C7,(RP7),(34),(B59))
endif
set t=null
set p5=null
return false
endfunction
function P5G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=Atan2(y-GetUnitY(p5),x-GetUnitX(p5))
local integer B59=$B
set LP4="P5G"
call TriggerRegisterTimerEvent(t,.22,true)
call TriggerAddCondition(t,Condition(function PVG))
call SaveUnitHandle(C7,(RP7),(2),(p5))
call SaveReal(C7,(RP7),(6),((GetUnitX(p5))*1.))
call SaveReal(C7,(RP7),(7),((GetUnitY(p5))*1.))
call SaveReal(C7,(RP7),($89),((a)*1.))
call SaveReal(C7,(RP7),(282),((GetUnitX(p5))*1.))
call SaveReal(C7,(RP7),(283),((GetUnitY(p5))*1.))
call SaveReal(C7,(RP7),(341),((a)*1.))
call SaveInteger(C7,(RP7),(34),(B59))
set t=null
set p5=null
endfunction
function P2G takes nothing returns boolean
if GetSpellAbilityId()==1093746993 then
call P5G()
endif
return false
endfunction
function QJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function P2G))
set t=null
endfunction
function P_G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call UnitRemoveAbility(CP7,1093815881)
call UnitAddAbility(CP7,1093815881)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function Q4G takes unit CP7 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function P_G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
endfunction
function Q7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
set LP4="Q7G"
call DestroyEffect((LoadEffectHandle(C7,(RP7),(32))))
call FlushChildHashtable(C7,(RP7))
call RN7(t)
call D28(p5,0)
set t=null
set p5=null
return false
endfunction
function Q8G takes unit p5,unit PJG,integer Q9G,integer QDG returns nothing
local trigger t
local integer RP7
local unit DA8
set LP4="AncestralCharge_Collide"
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",PJG,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"hand,left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",p5,"hand,right"))
call ShowUnit(PJG,false)
call KillUnit(PJG)
call SaveInteger(C7,(GetHandleId((p5))),((4270)),(2))
if QDG>0 or Q9G>0 then
set t=CreateTrigger()
set RP7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,9.1,false)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function Q7G))
call SaveUnitHandle(C7,(RP7),(2),(p5))
set DA8=CreateUnit(GetOwningPlayer(p5),1697656901,GetUnitX(p5),GetUnitY(p5),0)
call Z27(DA8,1093748537)
call SetUnitAbilityLevel(DA8,1093748537,QDG)
call IssueTargetOrderById(DA8,$D0085,p5)
call D28(p5,Q9G)
call SaveEffectHandle(C7,(RP7),(32),(AddSpecialEffectTarget("war3mapImported\\RadianceHands.mdx",p5,"weapon")))
endif
set t=null
set DA8=null
endfunction
function QEG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),M1)==false then
if IsUnitIllusion(GetEnumUnit())==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set SH4=SH4+(SG4*$A)
set SI4=SI4+5
else
set SH4=SH4+(SG4*3)
set SI4=SI4+1
endif
endif
call GroupAddUnit(M1,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",GetEnumUnit(),"chest"))
set w1=true
set W1=true
call D38(SE4,GetEnumUnit(),1,SF4)
set w1=false
set W1=false
endif
endfunction
function QFG takes real QGG,real QHG,real QIG,real QJG,real QKG,real QMG returns real
local real QNG
local real QOG
local real QPG
local real QQG
local real QRG
local real QSG
local real QTG
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real QUG
local real QVG
local real QWG
local real QXG
local real QYG
local real QZG
local real QAG
local real QBG
set LP4="nWe"
set QWG=QIG-QKG
set QXG=QJG-QMG
set QYG=-1*QXG
set QZG=QWG
set QAG=SquareRoot(QYG*QYG+QZG*QZG)
set QYG=QYG/ QAG
set QZG=QZG/ QAG
set QNG=QGG-QIG
set QOG=QHG-QJG
set QPG=SquareRoot(QNG*QNG+QOG*QOG)
set QQG=QNG/ QPG
set QRG=QOG/ QPG
set QBG=QNG*QYG+QOG*QZG
set QSG=-1*QGG+2*QIG+2*QYG*QBG
set QTG=-1*QHG+2*QJG+2*QZG*QBG
set QUG=QKG+QIG-QSG
set QVG=QMG+QJG-QTG
return QUG
endfunction
function QCG takes real QGG,real QHG,real QIG,real QJG,real QKG,real QMG returns real
local real QNG
local real QOG
local real QPG
local real QQG
local real QRG
local real QSG
local real QTG
local real REFLECTED_SCALED_V_X
local real REFLECTED_SCALED_V_Y
local real QUG
local real QVG
local real QWG
local real QXG
local real QYG
local real QZG
local real QAG
local real QBG
set LP4="Vae"
set QWG=QIG-QKG
set QXG=QJG-QMG
set QYG=-1*QXG
set QZG=QWG
set QAG=SquareRoot(QYG*QYG+QZG*QZG)
set QYG=QYG/ QAG
set QZG=QZG/ QAG
set QNG=QGG-QIG
set QOG=QHG-QJG
set QPG=SquareRoot(QNG*QNG+QOG*QOG)
set QQG=QNG/ QPG
set QRG=QOG/ QPG
set QBG=QNG*QYG+QOG*QZG
set QSG=-1*QGG+2*QIG+2*QYG*QBG
set QTG=-1*QHG+2*QJG+2*QZG*QBG
set QUG=QKG+QIG-QSG
set QVG=QMG+QJG-QTG
return QVG
endfunction
function Q3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer RP7=GetHandleId(t)
local unit p5=(LoadUnitHandle(C7,(RP7),(2)))
local unit PJG=(LoadUnitHandle(C7,(RP7),(335)))
local real x0=(LoadReal(C7,(RP7),(282)))
local real y0=(LoadReal(C7,(RP7),(283)))
local real x1=GetUnitX(p5)
local real y1=GetUnitY(p5)
local real x2=GetUnitX(PJG)
local real y2=GetUnitY(PJG)
local real x3
local real y3
local real a
local group L1D=(LoadGroupHandle(C7,(RP7),($BB)))
local group g
local real d
local integer X37=GetUnitAbilityLevel(p5,1093747000)
local real Q6G=(LoadReal(C7,(RP7),(342)))
local real EO8=(TimerGetElapsed(V))
set LP4="Q3G"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call ZH7(L1D)
call FlushChildHashtable(C7,(RP7))
call RN7(t)
call ShowUnit(PJG,false)
call KillUnit(PJG)
call SaveInteger(C7,(GetHandleId((p5))),((4270)),(2))
if(LoadInteger(C7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(C7,(GetHandleId(p5)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,false)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093815881 then
call IssueImmediateOrderById(PJG,$D0004)
call SaveBoolean(C7,(RP7),($F9),(true))
call SetUnitAnimationByIndex(PJG,3)
call Q4G(GetTriggerUnit())
elseif GetSpellAbilityId()==1093815371 then
if IssueImmediateOrderById(p5,$D0265)then
call UnitRemoveAbility(PJG,1093815371)
endif
endif
elseif N67(x1,y1,x2,y2)<100 then
call Q8G(p5,PJG,(LoadInteger(C7,(RP7),(344))),(LoadInteger(C7,(RP7),(345))))
call ZH7(L1D)
call FlushChildHashtable(C7,(RP7))
call RN7(t)
if(LoadInteger(C7,(GetHandleId(p5)),(704)))==0 or(LoadInteger(C7,(GetHandleId(p5)),(704)))==1093747000 then
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,false)
elseif GetTriggerEvalCount(t)>400 or(LoadBoolean(C7,(RP7),($F9))) then
call Z27(PJG,1097625443)
if GetTriggerEvalCount(t)==401 and(LoadBoolean(C7,(RP7),($F9)))==false then
call IssueImmediateOrderById(PJG,$D0004)
call SetUnitAnimationByIndex(PJG,3)
endif
set g=ZI7()
set SG4=X37
set SH4=(LoadInteger(C7,(RP7),(344)))
set SI4=(LoadInteger(C7,(RP7),(345)))
set SF4=80+40*X37
set SE4=p5
set IM4=p5
set M1=L1D
call GroupEnumUnitsInRange(g,GetUnitX(PJG),GetUnitY(PJG),300,Condition(function LF7))
call ForGroup(g,function QEG)
call ZH7(g)
set g=null
call SaveInteger(C7,(RP7),(344),(SH4))
call SaveInteger(C7,(RP7),(345),(SI4))
if((LoadInteger(C7,(GetHandleId((p5))),((4269))))==1)==false then
set a=Atan2(y1-y2,x1-x2)
call SetUnitFacing(PJG,a*bj_RADTODEG)
set x3=GetUnitX(PJG)+$C*Cos(a)
set y3=GetUnitY(PJG)+$C*Sin(a)
call SetUnitX(PJG,AY7(x3))
call SetUnitY(PJG,AZ7(y3))
call SaveReal(C7,(RP7),(282),((x1)*1.))
call SaveReal(C7,(RP7),(283),((y1)*1.))
endif
else
call SetUnitMoveSpeed(PJG,GetUnitMoveSpeed(p5))
call UnitRemoveAbility(PJG,1097625443)
set g=ZI7()
set SG4=X37
set SH4=(LoadInteger(C7,(RP7),(344)))
set SI4=(LoadInteger(C7,(RP7),(345)))
set SF4=80+40*X37
set SE4=p5
set IM4=p5
set M1=L1D
call GroupEnumUnitsInRange(g,GetUnitX(PJG),GetUnitY(PJG),300,Condition(function LF7))
call ForGroup(g,function QEG)
call ZH7(g)
set g=null
call SaveInteger(C7,(RP7),(344),(SH4))
call SaveInteger(C7,(RP7),(345),(SI4))
if x0!=x1 or y0!=y1 then
set Q6G=EO8
call SaveReal(C7,(RP7),(342),((Q6G)*1.))
endif
if((LoadInteger(C7,(GetHandleId((p5))),((4269))))==1)==false then
if Q6G==EO8 then
set x3=QFG(x0,y0,x1,y1,x2,y2)
set y3=QCG(x0,y0,x1,y1,x2,y2)
set a=Atan2(y3-y2,x3-x2)*bj_RADTODEG
call SaveReal(C7,(RP7),(282),((x1)*1.))
call SaveReal(C7,(RP7),(283),((y1)*1.))
endif
if(Q6G+.3)<EO8 then
call SaveInteger(C7,(RP7),(343),(1))
elseif(Q6G+.3)>EO8 and(LoadInteger(C7,(RP7),(343)))==1 then
call SaveInteger(C7,(RP7),(343),(2))
elseif(LoadInteger(C7,(RP7),(343)))==3 then
call SaveInteger(C7,(RP7),(343),(1))
endif
else
call SaveInteger(C7,(RP7),(343),(3))
endif
endif
set t=null
set p5=null
set PJG=null
set L1D=null
return false
endfunction
function QLG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer RP7=GetHandleId(t)
local unit p5=GetTriggerUnit()
local real x0=GetUnitX(p5)
local real y0=GetUnitY(p5)
local location l=GetSpellTargetLoc()
local real MLD=GetLocationX(l)
local real M1D=GetLocationY(l)
local real a=Atan2(M1D-y0,MLD-x0)
local real d=B97(N67(x0,y0,MLD,M1D),300)
local real x1=AY7(x0+d*Cos(a))
local real y1=AZ7(y0+d*Sin(a))
local unit PJG=CreateUnit(GetOwningPlayer(p5),1747990357,x1,y1,(a*bj_RADTODEG)-$B4)
call SetUnitMoveSpeed(PJG,GetUnitMoveSpeed(p5))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",PJG,"chest"))
if GetUnitAbilityLevel(p5,1093747524)>0 then
call Z27(PJG,1093747537)
endif
if GetUnitAbilityLevel(p5,1093747009)==0 then
call UnitRemoveAbility(PJG,1093815371)
endif
call UnitAddAbility(p5,1093815881)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093747000,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(p5),1093815881,true)
call RemoveLocation(l)
set SJ4[GetPlayerId(GetOwningPlayer(p5))]=PJG
call SaveInteger(C7,(GetHandleId((p5))),((4270)),(1))
call Z27(PJG,1098282348)
call Z27(PJG,1097167980)
if(LoadBoolean(C7,(GetHandleId(p5)),(339))) then
call TriggerEvaluate((LoadTriggerHandle(C7,(RP7),(338))))
endif
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,p5,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,PJG,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q3G))
call SaveUnitHandle(C7,(RP7),(2),(p5))
call SaveUnitHandle(C7,(RP7),(335),(PJG))
call SaveReal(C7,(RP7),(282),((x0)*1.))
call SaveReal(C7,(RP7),(283),((y0)*1.))
call SaveGroupHandle(C7,(RP7),($BB),(ZI7()))
call SaveInteger(C7,(RP7),(343),(2))
call SaveReal(C7,(RP7),(342),(((TimerGetElapsed(V))-5)*1.))
call SaveBoolean(C7,(RP7),($F9),(false))
set t=null
set p5=null
set PJG=null
endfunction
function Q1G takes nothing returns boolean
if GetSpellAbilityId()==1093747000 then
call QLG()
endif
return false
endfunction
function QK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="QK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Q1G))
call AC7(1093748537)
set t=null
endfunction
function Q0G takes nothing returns boolean
if GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER and(GetItemTypeId(GetManipulatedItem())==SU[G6]or GetItemTypeId(GetManipulatedItem())==SU[F6]or GetItemTypeId(GetManipulatedItem())==SU[H6])then
call UnitRemoveAbility(GetTriggerUnit(),1093743681)
endif
return false
endfunction
function Q5G takes unit u,integer d returns nothing
local texttag t=CreateTextTag()
set LP4="VIe"
call SetTextTagText(t,"+"+I2S(d)+" "+GetObjectName(1848659025),.03)
call SetTextTagPosUnit(t,u,0)
call SetTextTagColorBJ(t,50,75,$FF,$F)
call SetTextTagVelocity(t,0,.035)
call SetTextTagFadepoint(t,3)
call SetTextTagLifespan(t,2.5)
call SetTextTagPermanent(t,false)
call SetTextTagVisibility(t,false)
call SetTextTagVisibility(t,true)
if IsUnitVisible(u,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(t,true)
else
call SetTextTagVisibility(t,false)
endif
set t=null
endfunction
function Q2G takes nothing returns nothing
local unit p5=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
set LP4="Q2G"
if GetSpellAbilityId()==1093678387 and GetUnitState(p5,UNIT_STATE_LIFE)>1 then
call SetUnitState(p5,UNIT_STATE_MANA,GetUnitState(p5,UNIT_STATE_MANA)+GetUnitState(m5,UNIT_STATE_LIFE)*GetUnitAbilityLevel(p5,1093678387)*.15)
call Q5G(m5,R2I(GetUnitState(m5,UNIT_STATE_LIFE)*GetUnitAbilityLevel(p5,1093678387)*.15))
call KillUnit(m5)
endif
set p5=null
set m5=null
endfunction
function Q_G takes nothing returns boolean
if GetSpellAbilityId()==1093678387 and OI7(GetSpellTargetUnit())==false then
call Q2G()
endif
return false
endfunction
function R4G takes item M47,unit CP7,boolean ARD returns nothing
local integer B58=OK7(M47)
local integer JZ7=GetHandleId(CP7)
local string s=""
if(B58==LV and PG7(CP7,LV,M47)==null)or(B58==EW and PG7(CP7,EW,M47)==null)then
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7)) or Y27(GetLocalPlayer())then
set s="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"
endif
if ARD then
if BXE(CP7)>0 or GetItemType(M47)==ITEM_TYPE_PERMANENT or GetItemType(M47)==ITEM_TYPE_CAMPAIGN then
if GetUnitAbilityLevel(CP7,1093809729)==0 and GetUnitAbilityLevel(CP7,1093809730)==0 then
if s=="Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl" then
call Z27(CP7,1093809729)
else
call Z27(CP7,1093809730)
endif
endif
endif
else
if not(GetUnitAbilityLevel(CP7,1093809729)==0 and GetUnitAbilityLevel(CP7,1093809730)==0)then
call UnitRemoveAbility(CP7,1093809730)
call UnitRemoveAbility(CP7,1093809729)
call RemoveSavedHandle(C7,(JZ7),(670))
endif
endif
endif
endfunction
function R7G takes nothing returns boolean
local unit p5=GetTriggerUnit()
local item M47=GetManipulatedItem()
local integer id=GetItemTypeId(M47)
if M47==null or IsUnitIllusion(p5) or IsUnitType(p5,UNIT_TYPE_HERO)==false or FA8(GetUnitTypeId(p5))or GetItemTypeId(M47)==1227894853 or GetItemTypeId(M47)==1227895373 then
set p5=null
set M47=null
return false
endif
if(GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM and GetItemType(M47)!=ITEM_TYPE_PURCHASABLE)or GetTriggerEventId()==EVENT_PLAYER_UNIT_PAWN_ITEM then
    call R4G(M47,p5,false)
    call E58("DRI_"+I2S(GetPlayerId(GetOwningPlayer(p5))),SU[BA8(OK7(M47))])
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM then
    call R4G(M47,p5,true)
    call E58("PUI_"+I2S(GetPlayerId(GetOwningPlayer(p5))),SU[BA8(OK7(M47))])
endif
set p5=null
set M47=null
return false
endfunction
function R8G takes unit BL8 returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(BL8))
local integer RDG=B68(BL8,1)
local integer REG=GetUnitAbilityLevel(BL8,HK4[RDG])
set LP4="Vce"
call UnitRemoveAbility(BL8,HQ4[RDG])
call UnitRemoveAbility(BL8,1094004784)
call DisableTrigger(rj[R9G])
call DisableTrigger(Ej[R9G])
call UnitRemoveAbility(BL8,1093686081)
if RDG==43 then
call Q97(GetHandleId(BL8),"RefractionPrevent_Remaining",0)
call Q97(GetHandleId(BL8),"RefractionDamage_Remaining",0)
call UnitRemoveAbility(BL8,1093685830)
call UnitRemoveAbility(BL8,1093685837)
call UnitRemoveAbility(BL8,1093685838)
endif
call YO7(rj[R9G])
call YO7(Ej[R9G])
if REG>0 then
call UnitAddAbility(BL8,1094004784)
call SetUnitAbilityLevel(BL8,1094004784,REG)
endif
set rj[R9G]=null
set Ej[R9G]=null
endfunction
function RFG takes unit BL8 returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(BL8))
local integer RDG=B68(BL8,2)
local integer RGG=GetUnitAbilityLevel(BL8,HM4[RDG])
local integer i=1
set LP4="Vfe"
call UnitRemoveAbility(BL8,HR4[RDG])
call UnitRemoveAbility(BL8,1094004785)
call DisableTrigger(aj[R9G])
call DisableTrigger(Rj[R9G])
if RDG==59 then
call UnitRemoveAbility(BL8,1093677617)
call Q97(GetHandleId(BL8),"TotalWebs",0)
loop
exitwhen i>8
call RemoveUnit(QA7(GetHandleId(BL8),"Web"+I2S(i)))
set i=i+1
endloop
endif
if RDG==62 then
call UnitRemoveAbility(BL8,1093679171)
call RemoveUnit(QA7(GetHandleId(Rj[R9G]),"VisionUnit"))
if GetUnitAbilityLevel(BL8,1093679158)==0 then
call UnitRemoveAbility(BL8,1093742902)
call UnitRemoveAbility(BL8,1093742903)
endif
endif
if RDG==78 then
call D28(BL8,0)
endif
call YO7(aj[R9G])
call YO7(Rj[R9G])
if RGG>0 then
call UnitAddAbility(BL8,1094004785)
call SetUnitAbilityLevel(BL8,1094004785,RGG)
endif
set aj[R9G]=null
set Rj[R9G]=null
endfunction
function Vge takes nothing returns nothing
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(L7),false)
endfunction
function RHG takes unit BL8 returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(BL8))
local integer RDG=B68(BL8,3)
local integer RIG=GetUnitAbilityLevel(BL8,HN4[RDG])
local group g=null
set LP4="VGe"
call UnitRemoveAbility(BL8,HS4[RDG])
call UnitRemoveAbility(BL8,1094004786)
call DisableTrigger(nj[R9G])
call DisableTrigger(Aj[R9G])
call UnitRemoveAbility(BL8,1093743428)
if RDG==$F then
call UnitRemoveAbility(BL8,1093747537)
call ForGroup(QL7(GetHandleId(nj[R9G]),"ActiveGroup"),function POG)
call ZH7(QL7(GetHandleId(nj[R9G]),"ActiveGroup"))
endif
if RDG==27 then
call UnitRemoveAbility(BL8,1093684826)
endif
if RDG==38 then
call UnitRemoveAbility(BL8,1093748291)
endif
if RDG==41 then
call DestroyEffect(Q17(GetHandleId(BL8),"OverloadFX1"))
call DestroyEffect(Q17(GetHandleId(BL8),"OverloadFX2"))
endif
if RDG==42 then
call DestroyEffect(Q17(GetHandleId(nj[R9G]),"FX1"))
call DestroyEffect(Q17(GetHandleId(nj[R9G]),"FX2"))
call D28(BL8,0)
call E88(BL8,0)
endif
if RDG==58 then
call RemoveUnit(QA7(GetHandleId(BL8),"FeralHeartCaster"))
endif
if RDG==60 then
call SetUnitVertexColorBJ(BL8,100,100,100,0)
call UnitRemoveAbility(BL8,1093743430)
call UnitRemoveAbility(BL8,1093743432)
call UnitRemoveAbility(BL8,1093743431)
call UnitRemoveAbility(BL8,1110458674)
call UnitRemoveAbility(BL8,1110458673)
call UnitRemoveAbility(BL8,1110458675)
call UnitRemoveAbility(BL8,1093743433)
call UnitRemoveAbility(BL8,1110458672)
endif
if RDG==62 then
call UnitRemoveAbility(BL8,1395667009)
call RemoveUnit(QA7(GetHandleId(Aj[R9G]),"VisionUnit"))
if GetUnitAbilityLevel(BL8,1093679173)==0 then
call UnitRemoveAbility(BL8,1093742902)
call UnitRemoveAbility(BL8,1093742903)
endif
endif
if RDG==87 then
call UnitRemoveAbility(BL8,1093685068)
call UnitRemoveAbility(BL8,1093685069)
call UnitRemoveAbility(BL8,1093685070)
call UnitRemoveAbility(BL8,1093685064)
endif
call YO7(nj[R9G])
call YO7(Aj[R9G])
if RIG>0 then
call UnitAddAbility(BL8,1094004786)
call SetUnitAbilityLevel(BL8,1094004786,RIG)
endif
set nj[R9G]=null
set Aj[R9G]=null
set g=null
endfunction
function RJG takes unit BL8 returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(BL8))
local integer RDG=B68(BL8,4)
local boolean HTD=PD7(BL8,SU[GW4])
local integer RKG=GetUnitAbilityLevel(BL8,HO4[RDG])
set LP4="VHe"
if HTD and HP4[RDG]!=0 then
set RKG=GetUnitAbilityLevel(BL8,HP4[RDG])
endif
call UnitRemoveAbility(BL8,HT4[RDG])
call UnitRemoveAbility(BL8,HU4[RDG])
call UnitRemoveAbility(BL8,1094004787)
call DisableTrigger(Vj[R9G])
call DisableTrigger(Nj[R9G])
call UnitRemoveAbility(BL8,1093684546)
call UnitRemoveAbility(BL8,1093677652)
call UnitRemoveAbility(BL8,1093685844)
call UnitRemoveAbility(BL8,1093683265)
call UnitRemoveAbility(BL8,1093749061)
call UnitRemoveAbility(BL8,1110459193)
call UnitRemoveAbility(BL8,1093749062)
call UnitRemoveAbility(BL8,1110459193)
call UnitRemoveAbility(BL8,1093749063)
call UnitRemoveAbility(BL8,1110459193)
if RDG==29 then
call RemoveUnit(QA7(GetHandleId(BL8),"Warpath|Caster"))
call D28(BL8,0)
endif
call YO7(Vj[R9G])
call YO7(Nj[R9G])
if RKG>0 then
call UnitAddAbility(BL8,1094004787)
call SetUnitAbilityLevel(BL8,1094004787,RKG)
endif
call TimerStart(N74[R9G],0,false,null)
set Vj[R9G]=null
set Nj[R9G]=null
endfunction
function RMG takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit BL8=QA7(GetHandleId(t),"FormlessUnit")
local integer RNG=R47(GetHandleId(t),"ST8")
set LP4="RMG"
call IssueImmediateOrderById(BL8,$D00D2)
if RNG==1094004788 then
call R8G(BL8)
call RFG(BL8)
call RHG(BL8)
call RJG(BL8)
elseif RNG==1094004789 then
call R8G(BL8)
elseif RNG==1094004790 then
call RFG(BL8)
elseif RNG==1094004791 then
call RHG(BL8)
elseif RNG==1094004792 then
call RJG(BL8)
endif
call DestroyTimer(t)
set BL8=null
set t=null
endfunction
function ROG takes unit BL8,integer RNG returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(BL8))
local timer t=CreateTimer()
set LP4="VKe"
call IssueImmediateOrderById(BL8,$D0004)
call QG7(GetHandleId(t),"FormlessUnit",BL8)
call Q97(GetHandleId(t),"ST8",RNG)
call TimerStart(t,0,false,function RMG)
set t=null
endfunction
function RPG takes nothing returns boolean
if GetSpellAbilityId()==1094004788 or GetSpellAbilityId()==1094004789 or GetSpellAbilityId()==1094004790 or GetSpellAbilityId()==1094004791 or GetSpellAbilityId()==1094004792 then
call ROG(GetTriggerUnit(),GetSpellAbilityId())
endif
return false
endfunction
function ST8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="ST8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RPG))
set t=null
endfunction
function RQG takes nothing returns boolean
return GetSpellAbilityId()==1094004784 or GetSpellAbilityId()==1094004785 or GetSpellAbilityId()==1094004786 or GetSpellAbilityId()==1094004787
endfunction
function RRG takes nothing returns nothing
local unit BL8=GetTriggerUnit()
local player p=GetOwningPlayer(BL8)
local integer RSG=GetUnitPointValue(GetSpellTargetUnit())
local integer RTG=GetUnitAbilityLevel(BL8,GetSpellAbilityId())
local integer RUG=GetSpellAbilityId()
local integer R9G=GetPlayerId(p)
local unit G58=null
local integer RVG=0
local integer RWG=0
local integer RXG=0
local string RYG=""
local string RZG=""
local boolean HTD=PD7(BL8,SU[GW4])
local trigger t
local integer RAG=B68(BL8,1)
local integer RBG=B68(BL8,2)
local integer RCG=B68(BL8,3)
local integer R3G=B68(BL8,4)
set LP4="RRG"
if RUG==1094004784 then
set RVG=HK4[RSG]
set RWG=HQ4[RSG]
set RYG=HV4[RSG]
set RZG="Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl"
elseif RUG==1094004785 then
set RVG=HM4[RSG]
set RWG=HR4[RSG]
set RYG=HW4[RSG]
set RZG="Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl"
elseif RUG==1094004786 then
set RVG=HN4[RSG]
set RWG=HS4[RSG]
set RYG=HX4[RSG]
set RZG="Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl"
elseif RUG==1094004787 then
set RVG=HO4[RSG]
set RWG=HT4[RSG]
set RYG=HY4[RSG]
set RZG="Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl"
if HTD and HP4[RSG]!=0 then
set RVG=HP4[RSG]
set RWG=HU4[RSG]
endif
endif
if RWG==0 then
call AV7(p,"Unable to copy "+GetAbilityName(RVG)+".")
elseif bj[R9G]==false and RYG!="passive" and(RYG==HV4[RAG]or RYG==HW4[RBG]or RYG==HX4[RCG]or RYG==HY4[R3G])then
if RYG==HV4[RAG]then
set RXG=HK4[RAG]
elseif RYG==HW4[RBG]then
set RXG=HM4[RBG]
elseif RYG==HX4[RCG]then
set RXG=HN4[RCG]
elseif RYG==HY4[R3G]then
set RXG=HO4[R3G]
endif
call AV7(p,"Cannot copy "+GetAbilityName(RVG)+" because you already
        have an ability with this base order ("+GetAbilityName(RXG)+").
        Use -override to disable this.")
else
call DestroyEffect(AddSpecialEffectTarget(RZG,BL8,"origin"))
call UnitRemoveAbility(BL8,RUG)
call UnitAddAbility(BL8,RVG)
call UnitAddAbility(BL8,RWG)
call SetPlayerAbilityAvailable(p,RWG,false)
call SetUnitAbilityLevel(BL8,RVG,RTG)
if RVG==1093686073 then
call UnitAddAbility(BL8,1093686081)
elseif RVG==1093742926 then
call UnitAddAbility(BL8,1093743428)
elseif RVG==1093677130 then
call UnitAddAbility(BL8,1093684546)
call SetUnitAbilityLevel(BL8,1093684546,RTG)
elseif RVG==1093681483 or RVG==1093748313 then
call UnitAddAbility(BL8,1093687110)
elseif RVG==1093685840 then
call UnitAddAbility(BL8,1093685844)
elseif RVG==1093683257 then
call UnitAddAbility(BL8,1093683265)
endif
if RVG==1093682265 then
call B49(BL8,true)
elseif RVG==1093744728 then
call OMG(BL8,true)
elseif RVG==1093684314 then
call J5D(BL8,true)
elseif RVG==1093747524 then
call PRG(BL8,true)
elseif RVG==1093744977 then
call PAD(BL8,true)
elseif RVG==1093684531 then
call YN9(BL8,true)
elseif RVG==1093682774 then
call YE9(BL8,true)
elseif RVG==1093749073 then
call XX9(BL8,true)
elseif RVG==1093685048 then
call LY9(BL8,true)
elseif RVG==1093685591 then
call MAD(BL8,true)
elseif RVG==1093685582 then
call C_9(BL8,true)
elseif RVG==1093685585 then
call LE9(BL8,true)
elseif RVG==1093748033 then
call QLD(BL8,true)
elseif RVG==1093677893 then
call Z7E(BL8,true)
elseif RVG==1093681735 then
call UXD(BL8,true)
elseif RVG==1093679173 or RVG==1093679158 then
call FVE(BL8,true,RVG)
elseif RVG==1093682010 then
call WXD(BL8,true)
elseif RVG==1093679153 then
call XRD(BL8,true)
elseif RVG==1093748022 then
call ILE(BL8,true)
elseif RVG==1093686099 then
call VEF(BL8,true)
elseif RVG==1093678149 then
call OPE(BL8,true)
elseif RVG==1093677390 then
call EFE(BL8,true)
elseif RVG==1093678660 then
elseif RVG==1093682515 then
call NDE(BL8,true)
elseif RVG==1093682004 then
elseif RVG==1093684819 or RVG==1093747777 then
call T7D(BL8,true)
elseif RVG==1093684801 then
call MUE(BL8,true)
elseif RVG==1093685065 then
call VMD(BL8,true)
elseif RVG==1093683526 then
call VJD(BL8,true)
elseif RVG==1093749070 then
call UBE(BL8,true)
endif
endif
set BL8=null
set p=null
set t=null
endfunction
function SS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function RQG))
call TriggerAddAction(t,function RRG)
set t=null
endfunction
function R6G takes nothing returns boolean
return(GetLearnedSkill()==1094004784 or GetLearnedSkill()==1094004785 or GetLearnedSkill()==1094004786 or GetLearnedSkill()==1094004787)and GetUnitAbilityLevel(GetTriggerUnit(),1094004788)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004789)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004790)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004791)==0 and GetUnitAbilityLevel(GetTriggerUnit(),1094004792)==0
endfunction
function RLG takes nothing returns boolean
return GetIssuedOrderId()==$D023F
endfunction
function R1G takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit R0G=QA7(GetHandleId(t),"FormlessUnit")
local integer R5G
set LP4="R1G"
call IssueImmediateOrderById(R0G,$D0240)
if GetUnitAbilityLevel(R0G,1094004788)>0 then
set R5G=1094004793
elseif GetUnitAbilityLevel(R0G,1094004789)>0 then
set R5G=1094004801
elseif GetUnitAbilityLevel(R0G,1094004790)>0 then
set R5G=1094004802
elseif GetUnitAbilityLevel(R0G,1094004791)>0 then
set R5G=1094004803
elseif GetUnitAbilityLevel(R0G,1094004792)>0 then
set R5G=0
endif
call UnitRemoveAbility(R0G,1094004793)
call UnitRemoveAbility(R0G,1094004801)
call UnitRemoveAbility(R0G,1094004802)
call UnitRemoveAbility(R0G,1094004803)
if R5G!=0 then
call UnitAddAbility(R0G,R5G)
call SetPlayerAbilityAvailable(GetOwningPlayer(R0G),R5G,false)
endif
call Q47(GetHandleId(t))
call DestroyTimer(t)
set t=null
set R0G=null
endfunction
function R2G takes nothing returns nothing
local unit R0G=GetTriggerUnit()
local timer t=CreateTimer()
set LP4="R2G"
call QG7(GetHandleId(t),"FormlessUnit",R0G)
call TimerStart(t,0,false,function R1G)
set R0G=null
set t=null
endfunction
function R_G takes nothing returns nothing
local integer R9G=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local trigger t=CreateTrigger()
set LP4="R_G"
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function RLG))
call TriggerAddAction(t,function R2G)
if GetLearnedSkill()!=1094004784 then
call UnitAddAbility(GetTriggerUnit(),1094004784)
call UnitRemoveAbility(GetTriggerUnit(),1094004784)
elseif GetLearnedSkill()!=1094004785 then
call UnitAddAbility(GetTriggerUnit(),1094004785)
call UnitRemoveAbility(GetTriggerUnit(),1094004785)
elseif GetLearnedSkill()!=1094004786 then
call UnitAddAbility(GetTriggerUnit(),1094004786)
call UnitRemoveAbility(GetTriggerUnit(),1094004786)
elseif GetLearnedSkill()!=1094004787 then
call UnitAddAbility(GetTriggerUnit(),1094004787)
call UnitRemoveAbility(GetTriggerUnit(),1094004787)
endif
call UnitAddAbility(GetTriggerUnit(),1094004789)
call UnitRemoveAbility(GetTriggerUnit(),1094004789)
call UnitAddAbility(GetTriggerUnit(),1094004790)
call UnitRemoveAbility(GetTriggerUnit(),1094004790)
call UnitAddAbility(GetTriggerUnit(),1094004791)
call UnitRemoveAbility(GetTriggerUnit(),1094004791)
call UnitAddAbility(GetTriggerUnit(),1094004792)
call UnitRemoveAbility(GetTriggerUnit(),1094004792)
call UnitAddAbility(GetTriggerUnit(),1094004788)
set t=null
endfunction
function SU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SU8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function R6G))
call TriggerAddAction(t,function R_G)
set t=null
endfunction
function S4G takes nothing returns nothing
local unit ZO7=GetTriggerUnit()
local player p=GetOwningPlayer(ZO7)
local real x
local real y
local integer GV8
set LP4="S4G"
set IF4[GetPlayerId(GetOwningPlayer((ZO7)))]=false
if WM7(GetOwningPlayer(ZO7))then
set x=GetRectCenterX(L9)
set y=GetRectCenterY(L9)
else
set x=GetRectCenterX(C9)
set y=GetRectCenterY(C9)
endif
call TimerStart(T[GetPlayerId(p)],.0,false,null)
if GS8(ZO7)then
call G68(ZO7)
else
call GQ8(ZO7,p,x,y,false)
endif
call SetUnitX(ZO7,x)
call SetUnitY(ZO7,y)
call GN8(ZO7)
call SetUnitPathing(ZO7,true)
if PH7(ZO7,SU[DH4])!=null and GetUnitTypeId(ZO7)!=1211117642 then
set GV8=(R2I(((GetItemCharges(PH7(ZO7,SU[DH4]))*.67)*1.)))
if GetItemCharges(PH7(ZO7,SU[DH4]))==1 then
set GV8=0
endif
call SetItemCharges(PH7(ZO7,SU[DH4]),GV8)
call AddHeroXP(ZO7,GetHeroXP(OZ4[GetPlayerId(GetOwningPlayer(ZO7))]),true)
call RemoveUnit(OZ4[GetPlayerId(GetOwningPlayer(ZO7))])
endif
if RY4 and GetUnitPointValue(ZO7)==500 then
call ROG(ZO7,1094004788)
endif
set ZO7=null
set p=null
endfunction
function S7G takes unit S8G,integer S9G returns nothing
call UnitRemoveAbility(S8G,1094006068)
call UnitRemoveAbility(S8G,1094006069)
call UnitRemoveAbility(S8G,1094006070)
call UnitRemoveAbility(S8G,1094006071)
call UnitRemoveAbility(S8G,1094006072)
if S9G>=16 then
call UnitAddAbility(S8G,1094006072)
set S9G=S9G-16
endif
if S9G>=8 then
call UnitAddAbility(S8G,1094006071)
set S9G=S9G-8
endif
if S9G>=4 then
call UnitAddAbility(S8G,1094006070)
set S9G=S9G-4
endif
if S9G>=2 then
call UnitAddAbility(S8G,1094006069)
set S9G=S9G-2
endif
if S9G>=1 then
call UnitAddAbility(S8G,1094006068)
set S9G=S9G-1
endif
endfunction
function SDG takes nothing returns boolean
return GetSpellAbilityId()==1094006064
endfunction
function SEG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer SFG=(1+GetUnitAbilityLevel(S8G,1094006064))*GetHeroStr(S8G,true)
local integer SGG=R47(GetHandleId(S8G),"iPFCount")+1
local integer S9G=R47(GetHandleId(S8G),"iPFStrength")
local integer SHG=S9G
set LP4="SEG"
if SGG>9 then
set SGG=0
set SHG=A_7(5*GetUnitAbilityLevel(S8G,1094006064),S9G+1)
if SHG!=S9G then
call S7G(S8G,SHG)
if m5!=S8G then
call BO7("+1 Strength",3,S8G,.023,$FF,0,0,$FF)
endif
endif
endif
call SetUnitState(m5,UNIT_STATE_LIFE,GetUnitState(m5,UNIT_STATE_LIFE)+SFG)
if SGG!=0 or m5!=S8G or SHG==S9G then
call BO7("+"+I2S(SFG)+" HP",3,m5,.023,$FF,0,0,$FF)
else
call BO7("+"+I2S(SFG)+" HP
        +1 Strength",3,S8G,.023,$FF,0,0,$FF)
endif
call Q97(GetHandleId(S8G),"iPFCount",SGG)
call Q97(GetHandleId(S8G),"iPFStrength",SHG)
set S8G=null
set m5=null
endfunction
function SIG takes nothing returns boolean
return E38(GetEventDamage())
endfunction
function SJG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local real SKG=R77(GetHandleId(S8G),"rPFDamage")+GetEventDamage()
local integer S9G=R47(GetHandleId(S8G),"iPFStrength")
local integer SHG=S9G
set LP4="SJG"
if SKG>=500 then
set SKG=SKG-500
set SHG=A_7(5*GetUnitAbilityLevel(S8G,1094006064),S9G+1)
if SHG!=S9G then
call S7G(S8G,SHG)
call BO7("+1 Strength",3,S8G,.023,$FF,0,0,$FF)
endif
endif
call QD7(GetHandleId(S8G),"rPFDamage",SKG)
call Q97(GetHandleId(S8G),"iPFStrength",SHG)
set S8G=null
endfunction
function SMG takes nothing returns boolean
return GetLearnedSkill()==1094006064 and GetUnitAbilityLevel(GetTriggerUnit(),1094006064)==1
endfunction
function SNG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local trigger t=CreateTrigger()
set LP4="SNG"
call TriggerRegisterUnitEvent(t,S8G,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function SIG))
call TriggerAddAction(t,function SJG)
call QD7(GetHandleId(S8G),"rPFDamage",0)
call Q97(GetHandleId(S8G),"iPFCount",0)
call Q97(GetHandleId(S8G),"iPFStrength",0)
set t=null
set S8G=null
endfunction
function SV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SV8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SDG))
call TriggerAddAction(t,function SEG)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function SMG))
call TriggerAddAction(t,function SNG)
set t=null
endfunction
function SOG takes unit S8G,integer SPG returns nothing
call UnitRemoveAbility(S8G,1094006073)
call UnitRemoveAbility(S8G,1094006081)
call UnitRemoveAbility(S8G,1094006082)
call UnitRemoveAbility(S8G,1094006083)
call UnitRemoveAbility(S8G,1094006084)
if SPG>=16 then
call UnitAddAbility(S8G,1094006084)
set SPG=SPG-16
endif
if SPG>=8 then
call UnitAddAbility(S8G,1094006083)
set SPG=SPG-8
endif
if SPG>=4 then
call UnitAddAbility(S8G,1094006082)
set SPG=SPG-4
endif
if SPG>=2 then
call UnitAddAbility(S8G,1094006081)
set SPG=SPG-2
endif
if SPG>=1 then
call UnitAddAbility(S8G,1094006073)
set SPG=SPG-1
endif
endfunction
function SQG takes nothing returns boolean
return GetSpellAbilityId()==1094006065
endfunction
function SRG takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit m5=QA7(GetHandleId(t),"SFluxTarget")
set LP4="SRG"
call UnitRemoveAbility(m5,1094006090)
call UnitRemoveAbility(m5,1094006094)
call UnitRemoveAbility(m5,1094006095)
call UnitRemoveAbility(m5,1094006096)
call UnitRemoveAbility(m5,1110783306)
call UnitRemoveAbility(m5,1110783310)
call UnitRemoveAbility(m5,1110783311)
call UnitRemoveAbility(m5,1110783312)
call YO7(t)
set t=null
set m5=null
endfunction
function SSG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local real STG=.25*GetHeroAgi(S8G,true)
local integer SUG=R47(GetHandleId(S8G),"iSFCount")+1
local integer SPG=R47(GetHandleId(S8G),"iSFAgility")
local integer SVG=SPG
local trigger t=CreateTrigger()
local integer X37=GetUnitAbilityLevel(S8G,1094006065)
set LP4="SSG"
if SUG>9 then
set SUG=0
set SVG=A_7(5*X37,SPG+1)
if SVG!=SPG then
call SOG(S8G,SVG)
if m5!=S8G then
call BO7("+1 Agility",3,S8G,.023,0,$FF,0,$FF)
endif
endif
endif
call YO7(Q67(GetHandleId(m5),"SFluxEndTrig"))
call UnitRemoveAbility(m5,1094006090)
call UnitRemoveAbility(m5,1094006094)
call UnitRemoveAbility(m5,1094006095)
call UnitRemoveAbility(m5,1094006096)
call UnitRemoveAbility(m5,1110783306)
call UnitRemoveAbility(m5,1110783310)
call UnitRemoveAbility(m5,1110783311)
call UnitRemoveAbility(m5,1110783312)
if X37==1 then
call UnitAddAbility(m5,1094006090)
elseif X37==2 then
call UnitAddAbility(m5,1094006094)
elseif X37==3 then
call UnitAddAbility(m5,1094006095)
elseif X37==4 then
call UnitAddAbility(m5,1094006096)
endif
call TriggerRegisterTimerEvent(t,STG,false)
call TriggerRegisterUnitEvent(t,m5,EVENT_UNIT_DEATH)
call TriggerAddAction(t,function SRG)
call QG7(GetHandleId(t),"SFluxTarget",m5)
call QI7(GetHandleId(m5),"SFluxEndTrig",t)
if SUG!=0 or m5!=S8G or SVG==SPG then
call BO7(R2S(STG)+" s",3,m5,.023,0,$FF,0,$FF)
else
call BO7(R2S(STG)+" s
        +1 Agility",3,S8G,.023,0,$FF,0,$FF)
endif
call Q97(GetHandleId(S8G),"iSFCount",SUG)
call Q97(GetHandleId(S8G),"iSFAgility",SVG)
set S8G=null
set m5=null
set t=null
endfunction
function SWG takes nothing returns boolean
return E38(GetEventDamage())
endfunction
function SXG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local integer SYG=R47(GetHandleId(S8G),"iSFHit")+1
local integer SPG=R47(GetHandleId(S8G),"iSFAgility")
local integer SVG=SPG
set LP4="SXG"
if SYG>=20 then
set SYG=0
set SVG=A_7(5*GetUnitAbilityLevel(S8G,1094006065),SPG+1)
if SVG!=SPG then
call SOG(S8G,SVG)
call BO7("+1 Agility",3,S8G,.023,0,$FF,0,$FF)
endif
endif
call Q97(GetHandleId(S8G),"iSFHit",SYG)
call Q97(GetHandleId(S8G),"iSFAgility",SVG)
set S8G=null
endfunction
function SZG takes nothing returns boolean
return GetLearnedSkill()==1094006065 and GetUnitAbilityLevel(GetTriggerUnit(),1094006065)==1
endfunction
function SAG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local trigger t=CreateTrigger()
set LP4="SAG"
call TriggerRegisterUnitEvent(t,S8G,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function SWG))
call TriggerAddAction(t,function SXG)
call Q97(GetHandleId(S8G),"iSFHit",0)
call Q97(GetHandleId(S8G),"iSFCount",0)
call Q97(GetHandleId(S8G),"iSFAgility",0)
set t=null
set S8G=null
endfunction
function SW8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SW8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function SQG))
call TriggerAddAction(t,function SSG)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function SZG))
call TriggerAddAction(t,function SAG)
set t=null
endfunction
function SBG takes unit S8G,integer SCG returns nothing
call UnitRemoveAbility(S8G,1094006085)
call UnitRemoveAbility(S8G,1094006086)
call UnitRemoveAbility(S8G,1094006087)
call UnitRemoveAbility(S8G,1094006088)
call UnitRemoveAbility(S8G,1094006089)
if SCG>=16 then
call UnitAddAbility(S8G,1094006089)
set SCG=SCG-16
endif
if SCG>=8 then
call UnitAddAbility(S8G,1094006088)
set SCG=SCG-8
endif
if SCG>=4 then
call UnitAddAbility(S8G,1094006087)
set SCG=SCG-4
endif
if SCG>=2 then
call UnitAddAbility(S8G,1094006086)
set SCG=SCG-2
endif
if SCG>=1 then
call UnitAddAbility(S8G,1094006085)
set SCG=SCG-1
endif
endfunction
function S3G takes nothing returns boolean
return GetSpellAbilityId()==1094006066
endfunction
function S6G takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local unit m5=QA7(GetHandleId(t),"MFluxTarget")
local integer SLG=R47(GetHandleId(t),"iMFluxMP")
set LP4="S6G"
call SetUnitState(m5,UNIT_STATE_MANA,GetUnitState(m5,UNIT_STATE_MANA)+SLG)
call YO7(t)
set t=null
set m5=null
endfunction
function S1G takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer SLG=R2I(.75*GetUnitAbilityLevel(S8G,1094006066)*GetHeroInt(S8G,true))
local integer S0G=R47(GetHandleId(S8G),"iMFCount")+1
local integer SCG=R47(GetHandleId(S8G),"iMFIntelligence")
local integer S5G=SCG
local trigger t=CreateTrigger()
set LP4="S1G"
if S0G>9 then
set S0G=0
set S5G=A_7(5*GetUnitAbilityLevel(S8G,1094006066),SCG+1)
if S5G!=SCG then
call SBG(S8G,S5G)
if m5!=S8G then
call BO7("+1 Intelligence",3,S8G,.023,0,0,$FF,$FF)
endif
endif
endif
call QG7(GetHandleId(t),"MFluxTarget",m5)
call Q97(GetHandleId(t),"iMFluxMP",SLG)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddAction(t,function S6G)
if S0G!=0 or m5!=S8G or S5G==SCG then
call BO7("+"+I2S(SLG)+" MP",3,m5,.023,0,0,$FF,$FF)
else
call BO7("+"+I2S(SLG)+" MP
        +1 Intelligence",3,S8G,.023,0,0,$FF,$FF)
endif
call Q97(GetHandleId(S8G),"iMFCount",S0G)
call Q97(GetHandleId(S8G),"iMFIntelligence",S5G)
set S8G=null
set m5=null
set t=null
endfunction
function S2G takes nothing returns boolean
return GetSpellTargetUnit()==QA7(GetHandleId(GetTriggeringTrigger()),"uKappa")and IsUnitEnemy(QA7(GetHandleId(GetTriggeringTrigger()),"uKappa"),GetOwningPlayer(GetTriggerUnit()))
endfunction
function S_G takes nothing returns nothing
local unit S8G=GetSpellTargetUnit()
local integer T4G=R47(GetHandleId(S8G),"iMFCast")+1
local integer SCG=R47(GetHandleId(S8G),"iMFIntelligence")
local integer S5G=SCG
set LP4="S_G"
if T4G>=3 then
set T4G=0
set S5G=A_7(5*GetUnitAbilityLevel(S8G,1094006066),SCG+1)
if S5G!=SCG then
call SBG(S8G,S5G)
call BO7("+1 Intelligence",3,S8G,.023,0,0,$FF,$FF)
endif
endif
call Q97(GetHandleId(S8G),"iMFCast",T4G)
call Q97(GetHandleId(S8G),"iMFIntelligence",S5G)
set S8G=null
endfunction
function T7G takes nothing returns boolean
return GetLearnedSkill()==1094006066 and GetUnitAbilityLevel(GetTriggerUnit(),1094006066)==1
endfunction
function T8G takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local trigger t=CreateTrigger()
set LP4="T8G"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function S2G))
call TriggerAddAction(t,function S_G)
call QG7(GetHandleId(t),"uKappa",S8G)
call Q97(GetHandleId(S8G),"iMFCast",0)
call Q97(GetHandleId(S8G),"iMFCount",0)
call Q97(GetHandleId(S8G),"iMFIntelligence",0)
set t=null
set S8G=null
endfunction
function SX8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SX8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function S3G))
call TriggerAddAction(t,function S1G)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function T7G))
call TriggerAddAction(t,function T8G)
set t=null
endfunction
function T9G takes nothing returns boolean
return GetSpellAbilityId()==1094006067
endfunction
function TDG takes nothing returns nothing
local unit S8G=GetTriggerUnit()
local unit m5=GetSpellTargetUnit()
local integer TEG=0
local integer TFG=0
set LP4="TDG"
if GetUnitAbilityLevel(S8G,1094006091)>0 then
set TFG=R47(GetHandleId(S8G),"iPFStrength")
elseif GetUnitAbilityLevel(S8G,1094006092)>0 then
set TFG=R47(GetHandleId(S8G),"iSFAgility")
elseif GetUnitAbilityLevel(S8G,1094006093)>0 then
set TFG=R47(GetHandleId(S8G),"iMFIntelligence")
endif
set TEG=TFG/2
if ModuloInteger(TFG,2)>0 then
set TEG=TEG+1
endif
set TFG=TFG/2
if GetUnitAbilityLevel(S8G,1094006091)>0 then
call S7G(S8G,0)
call Q97(GetHandleId(S8G),"iPFStrength",0)
call SetHeroStr(m5,GetHeroStr(m5,false)+TEG,true)
call SetHeroStr(S8G,GetHeroStr(S8G,false)+TFG,true)
call BO7("+"+I2S(TEG)+" Strength",3,m5,.023,$FF,0,0,$FF)
call BO7("+"+I2S(TFG)+" Strength",3,S8G,.023,$FF,0,0,$FF)
call Q97(GetHandleId(m5),"FluxStr",R47(GetHandleId(m5),"FluxStr")+TEG)
call Q97(GetHandleId(S8G),"FluxStr",R47(GetHandleId(S8G),"FluxStr")+TFG)
elseif GetUnitAbilityLevel(S8G,1094006092)>0 then
call SOG(S8G,0)
call Q97(GetHandleId(S8G),"iSFAgility",0)
call SetHeroAgi(m5,GetHeroAgi(m5,false)+TEG,true)
call SetHeroAgi(S8G,GetHeroAgi(S8G,false)+TFG,true)
call BO7("+"+I2S(TEG)+" Agility",3,m5,.023,0,$FF,0,$FF)
call BO7("+"+I2S(TFG)+" Agility",3,S8G,.023,0,$FF,0,$FF)
call Q97(GetHandleId(m5),"FluxAgi",R47(GetHandleId(m5),"FluxAgi")+TEG)
call Q97(GetHandleId(S8G),"FluxAgi",R47(GetHandleId(S8G),"FluxAgi")+TFG)
elseif GetUnitAbilityLevel(S8G,1094006093)>0 then
call SBG(S8G,0)
call Q97(GetHandleId(S8G),"iMFIntelligence",0)
call SetHeroInt(m5,GetHeroInt(m5,false)+TEG,true)
call SetHeroInt(S8G,GetHeroInt(S8G,false)+TFG,true)
call BO7("+"+I2S(TEG)+" Intelligence",3,m5,.023,0,0,$FF,$FF)
call BO7("+"+I2S(TFG)+" Intelligence",3,S8G,.023,0,0,$FF,$FF)
call Q97(GetHandleId(m5),"FluxInt",R47(GetHandleId(m5),"FluxInt")+TEG)
call Q97(GetHandleId(S8G),"FluxInt",R47(GetHandleId(S8G),"FluxInt")+TFG)
endif
set S8G=null
set m5=null
endfunction
function TGG takes nothing returns boolean
return GetLearnedSkill()==1094006067 and GetUnitAbilityLevel(GetTriggerUnit(),1094006067)==1
endfunction
function THG takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),1094006091)
endfunction
function TIG takes nothing returns boolean
return GetSpellAbilityId()==1094006091 or GetSpellAbilityId()==1094006092 or GetSpellAbilityId()==1094006093
endfunction
function TJG takes nothing returns nothing
if GetSpellAbilityId()==1094006091 then
call UnitRemoveAbility(GetTriggerUnit(),1094006091)
call UnitAddAbility(GetTriggerUnit(),1094006092)
elseif GetSpellAbilityId()==1094006092 then
call UnitRemoveAbility(GetTriggerUnit(),1094006092)
call UnitAddAbility(GetTriggerUnit(),1094006093)
else
call UnitRemoveAbility(GetTriggerUnit(),1094006093)
call UnitAddAbility(GetTriggerUnit(),1094006091)
endif
endfunction
function SY8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SY8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T9G))
call TriggerAddAction(t,function TDG)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function TGG))
call TriggerAddAction(t,function THG)
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TIG))
call TriggerAddAction(t,function TJG)
set t=null
endfunction
function TKG takes nothing returns nothing
local unit TMG=G7[GetPlayerId(GetTriggerPlayer())]
local player p=GetTriggerPlayer()
local integer TNG=GetHandleId(TMG)
local integer TOG=R47(TNG,"FluxStr")
local integer TPG=R47(TNG,"FluxAgi")
local integer TQG=R47(TNG,"FluxInt")
local integer TRG=R47(TNG,"iPFStrength")
local integer TSG=R47(TNG,"iSFAgility")
local integer TTG=R47(TNG,"iMFIntelligence")
set LP4="TKG"
if GetUnitTypeId(TMG)==1211510832 then
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Strength: "+I2S(TRG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Agility: "+I2S(TSG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Bonus Intelligence: "+I2S(TTG))
endif
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Strength: "+I2S(TOG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Agility: "+I2S(TPG))
call DisplayTimedTextToPlayer(p,0,0,$F,"Flux Intelligence: "+I2S(TQG))
set TMG=null
set p=null
endfunction
function SZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="SZ8"
call TriggerRegisterPlayerChatEvent(t,Y7[1],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Y7[2],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Y7[3],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Y7[4],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Y7[5],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[1],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[2],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[3],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[4],"-flux",true)
call TriggerRegisterPlayerChatEvent(t,Z7[5],"-flux",true)
call TriggerAddAction(t,function TKG)
set t=null
endfunction
function TUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(J67)),(627)))
local real TVG=(LoadReal(C7,(GetHandleId(J67)),(628)))
local integer DB8=GetUnitAbilityLevel(CP7,1093751604)
local real YU9=(5+DB8*$F)*Pow(2,IMinBJ(ZD8,4)-1)
set LP4="TUG"
set YU9=YU9+IMaxBJ(ZD8-4,0)*50
if GetTriggerEventId()==EVENT_UNIT_DEATH then
if IsUnitType(J67,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(C7,(JZ7),(45))))
endif
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveInteger(C7,(GetHandleId(J67)),(627),(0))
call SaveReal(C7,(GetHandleId(J67)),(628),((0)*1.))
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751609 then
if IsUnitType(J67,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(C7,(JZ7),(45))))
endif
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveInteger(C7,(GetHandleId(J67)),(627),(0))
call SaveReal(C7,(GetHandleId(J67)),(628),((0)*1.))
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,false)
endif
call D38(CP7,J67,1,YU9)
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,true)
endif
call BO7(I2S(R2I(YU9))+"!",2,J67,.025,100,0,$C8,$D8)
endif
elseif(TimerGetElapsed(V))>TVG then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
if IsUnitType(J67,UNIT_TYPE_HERO) then
call KillUnit((LoadUnitHandle(C7,(JZ7),(45))))
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveInteger(C7,(GetHandleId(J67)),(627),(0))
call SaveReal(C7,(GetHandleId(J67)),(628),((0)*1.))
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,false)
endif
call D38(CP7,J67,1,YU9)
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,true)
endif
call BO7(I2S(R2I(YU9))+"!",2,J67,.025,100,0,$C8,$D8)
else
if IsUnitType(J67,UNIT_TYPE_HERO) then
call SetUnitX((LoadUnitHandle(C7,(JZ7),(45))),GetUnitX(J67))
call SetUnitY((LoadUnitHandle(C7,(JZ7),(45))),GetUnitY(J67))
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function TWG takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(CP7,1093751604)
local unit BB7
set LP4="PT3"
if(LoadInteger(C7,(GetHandleId(J67)),(627)))>0 then
call SaveInteger(C7,(GetHandleId(J67)),(627),((LoadInteger(C7,(GetHandleId(J67)),(627)))+1))
call SaveReal(C7,(GetHandleId(J67)),(628),(((TimerGetElapsed(V))+8)*1.))
else
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
if IsUnitType(J67,UNIT_TYPE_HERO) then
set BB7=CreateUnit(GetOwningPlayer(CP7),1865429305,GetUnitX(J67),GetUnitY(J67),0)
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
endif
call SaveInteger(C7,(GetHandleId(J67)),(627),(1))
if IsUnitType(J67,UNIT_TYPE_HERO) then
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",J67,"chest")))
else
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\shamanyouranus-ShadowyMissile.mdl",J67,"origin")))
endif
call SaveReal(C7,(GetHandleId(J67)),(628),(((TimerGetElapsed(V))+$A)*1.))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TUG))
set BB7=null
endif
call BO7("+"+I2S((LoadInteger(C7,(GetHandleId(J67)),(627)))),3,J67,.025,100,0,$C8,$D8)
call D38(CP7,J67,1,50)
set t=null
set BB7=null
endfunction
function TXG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),VE4)==false then
call GroupAddUnit(VE4,GetEnumUnit())
call TWG(VD4,GetEnumUnit())
endif
endfunction
function TYG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local integer TZG=GetTriggerEvalCount(t)
local real a=(LoadReal(C7,(JZ7),($89)))
local real x=AY7(GetUnitX(BB7)+(20)*Cos(a))
local real y=AZ7(GetUnitY(BB7)+(20)*Sin(a))
local group g
local group TAG=(LoadGroupHandle(C7,(JZ7),($85)))
local unit J67
set LP4="TYG"
if TZG==75 then
call ZH7(TAG)
call KillUnit(BB7)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set IM4=CP7
set VD4=CP7
set VE4=TAG
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,$B4+25,Condition(function LQ7))
call ForGroup(g,function TXG)
set J67=FirstOfGroup(g)
call ZH7(g)
endif
set t=null
set CP7=null
set BB7=null
set g=null
set J67=null
set TAG=null
return false
endfunction
function TBG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),x,y)*bj_DEGTORAD
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993394,GetUnitX(CP7),GetUnitY(CP7),a*bj_RADTODEG)
set LP4="TBG"
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function TYG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveGroupHandle(C7,(JZ7),($85),(ZI7()))
call Z27(CP7,1093751609)
set t=null
set CP7=null
set BB7=null
endfunction
function TCG takes nothing returns boolean
if GetSpellAbilityId()==1093751604 then
call TBG()
endif
return false
endfunction
function Q08 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q08"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function TCG))
set t=null
endfunction
function T3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit T6G=GetSummonedUnit()
set LP4="T3G"
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_SUMMON then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetUnitAbilityLevel(T6G,1110459457)>0 and GetOwningPlayer(GetSummoningUnit())==GetOwningPlayer(CP7)then
if IsUnitAlly(J67,GetOwningPlayer(CP7)) then
call SelectUnitAddForPlayer(T6G,GetOwningPlayer(CP7))
else
call IssueTargetOrderById(T6G,$D000F,J67)
endif
endif
set t=null
set CP7=null
set J67=null
set T6G=null
return false
endfunction
function TLG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="TLG"
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call RK7(J67,"DisruptionState")
call SetUnitInvulnerable(J67,false)
call PauseUnit(J67,false)
call ShowUnit(J67,true)
call RemoveSavedHandle(C7,(GetHandleId(J67)),(673))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call ClearSelectionForPlayer(GetOwningPlayer(J67))
call SelectUnitAddForPlayer(J67,GetOwningPlayer(J67))
call BY7(V84,GetUnitX(J67),GetUnitY(J67))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function T3G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call Z27(DA8,1093751605)
call SetUnitAbilityLevel(DA8,1093751605,GetUnitAbilityLevel(CP7,1093751608))
call IssueTargetOrderById(DA8,$D0132,J67)
call IssueTargetOrderById(DA8,$D0132,J67)
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function T1G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093751608)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(J67),1865429305,GetUnitX(J67),GetUnitY(J67),0)
set LP4="T1G"
call UnitApplyTimedLife(DA8,1112820806,2.6)
if IsUnitAlly(J67,GetOwningPlayer(CP7))==false then
set DA8=CreateUnit(GetOwningPlayer(CP7),1865429305,GetUnitX(J67),GetUnitY(J67),0)
call UnitApplyTimedLife(DA8,1112820806,2.6)
endif
call SetUnitInvulnerable(J67,true)
call PauseUnit(J67,true)
call ShowUnit(J67,false)
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\WILLTHEALMIGHTY-Void5.mdx",GetUnitX(J67),GetUnitY(J67))))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function TLG))
call SaveUnitHandle(C7,GetHandleId(CP7),(673),J67)
call RI7(J67,"DisruptionState")
set CP7=null
set J67=null
set t=null
set DA8=null
endfunction
function T0G takes nothing returns boolean
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093751608 and(IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) or ZG7(GetSpellTargetUnit())==false)then
call T1G()
endif
else
if GetSpellAbilityId()==1093751608 and GetSpellTargetUnit()!=GetTriggerUnit()and IsUnitAlly(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) and R87(GetHandleId(GetOwningPlayer(GetSpellTargetUnit())),"DisableHelp")then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652600))
endif
endif
return false
endfunction
function Q58 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q58"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function T0G))
set t=null
endfunction
function T5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093751618)
set LP4="T5G"
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call QG7(GetHandleId(CP7),"AI|SoulCatcherTgt",null)
elseif GetEventDamage()>5 then
call DisableTrigger(t)
call D38(GetEventDamageSource(),GetTriggerUnit(),3,(.1+.1*DB8)*GetEventDamage())
call EnableTrigger(t)
endif
set CP7=null
set t=null
return false
endfunction
function T2G takes nothing returns nothing
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local group g=ZI7()
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093751618)
local unit J67
local trigger t
local integer JZ7
set LP4="T2G"
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,475,Condition(function LQ7))
set J67=(LoadUnitHandle(C7,(GetHandleId(CP7)),(673)))
if J67!=null then
if N67(GetUnitX(J67),GetUnitY(J67),x,y)<475 and IsUnitEnemy(J67,GetOwningPlayer(CP7)) then
call GroupAddUnit(g,J67)
endif
endif
set J67=GroupPickRandomUnit(g)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x,y))
if J67!=null then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerAddCondition(t,Condition(function T5G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\void.mdx",J67,"chest")))
if IsUnitType(J67,UNIT_TYPE_HERO)then
call RR7(J67,"AI|SoulCatcher",$C)
call QG7(GetHandleId(CP7),"AI|SoulCatcherTgt",J67)
endif
endif
set g=null
set CP7=null
set J67=null
set t=null
endfunction
function T_G takes nothing returns boolean
if GetSpellAbilityId()==1093751618 then
call T2G()
endif
return false
endfunction
function Q28 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q28"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function T_G))
set t=null
endfunction
function U4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer TZG=GetTriggerEvalCount(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093751617)
set LP4="U4G"
if TZG==5 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,false)
endif
call D38(CP7,J67,1,4*(25+25*DB8))
if(RG7(J67,"DisruptionState"))then
call SetUnitInvulnerable(J67,true)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function U7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="U7G"
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function U4G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call TriggerEvaluate(t)
set t=null
set CP7=null
set J67=null
endfunction
function U8G takes nothing returns boolean
if GetSpellAbilityId()==1093751617 and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit())) and ZG7(GetSpellTargetUnit())==false then
call U7G()
endif
return false
endfunction
function Q_8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="Q_8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U8G))
set t=null
endfunction
function U9G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer TZG=GetTriggerEvalCount(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="U9G"
call UnitRemoveAbility(CP7,1093751632)
set t=null
set CP7=null
return false
endfunction
function UDG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="UDG"
call Z27(CP7,1093751632)
call UnitMakeAbilityPermanent(CP7,true,1093751632)
call SetUnitAbilityLevel(CP7,1093751632,GetUnitAbilityLevel(CP7,1093751631))
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function U9G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function UEG takes nothing returns boolean
if GetSpellAbilityId()==1093751631 then
call UDG()
endif
return false
endfunction
function R48 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="R48"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UEG))
set t=null
endfunction
function UFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer ZD8=GetTriggerEvalCount(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real x
local real y
local real d
local real UGG
local real WN9=(LoadReal(C7,(JZ7),(23)))
local real WO9=(LoadReal(C7,(JZ7),(24)))
local real a=MZ7(WN9,WO9,GetUnitX(J67),GetUnitY(J67))*bj_DEGTORAD
local integer DB8=GetUnitAbilityLevel(CP7,1093751633)
set LP4="UFG"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call UnitShareVision(BB7,GetOwningPlayer(J67),false)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerUnit()!=BB7 then
call KillUnit(BB7)
endif
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call UnitRemoveBuffs(BB7,true,true)
elseif ZD8<3/.02 then
call SetUnitFacing(BB7,a*bj_RADTODEG)
else
if ZD8==4/.02 then
call UnitShareVision(BB7,GetOwningPlayer(J67),true)
endif
call SetUnitFacing(BB7,a*bj_RADTODEG)
set x=WN9+(280+UU4*ZD8*.02)*.02*Cos(a)
set y=WO9+(280+UU4*ZD8*.02)*.02*Sin(a)
call SetUnitPosition(BB7,x,y)
call SaveReal(C7,(JZ7),(23),((x)*1.))
call SaveReal(C7,(JZ7),(24),((y)*1.))
if N67(x,y,GetUnitX(J67),GetUnitY(J67))<20 then
set d=RMinBJ(N67(x,y,(LoadReal(C7,(JZ7),(6))),(LoadReal(C7,(JZ7),(7)))),$5DC)
set UGG=d/$5DC*(110*GetUnitAbilityLevel(CP7,1093751633))
set UGG=RMaxBJ(UGG,50)
call KillUnit(BB7)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if LG7(J67)==false or IsUnitVisible(J67,GetOwningPlayer(CP7)) then
call D38(CP7,J67,1,UGG)
call DZ8(CP7,J67,2+.2*DB8)
endif
endif
endif
set t=null
set CP7=null
set J67=null
set BB7=null
return false
endfunction
function UHG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))*bj_DEGTORAD
local real x=AY7(GetUnitX(CP7)+$96*Cos(a))
local real y=AZ7(GetUnitY(CP7)+$96*Sin(a))
local integer DB8=GetUnitAbilityLevel(CP7,1093751633)
local unit BB7
local integer UIG
local string UJG="effects\\Snipe Target.mdx"
set LP4="UHG"
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7))==false and Y27(GetLocalPlayer())==false then
set UJG=""
endif
if DB8==1 then
set UIG=1747993415
elseif DB8==2 then
set UIG=1747993393
elseif DB8==3 then
set UIG=1747993414
elseif DB8==4 then
set UIG=1747993416
endif
set BB7=CreateUnit(GetOwningPlayer(CP7),UIG,x,y,a*bj_RADTODEG)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,BB7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function UFG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveReal(C7,(JZ7),(6),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(CP7))*1.))
call SaveReal(C7,(JZ7),(23),((GetUnitX(BB7))*1.))
call SaveReal(C7,(JZ7),(24),((GetUnitY(BB7))*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget(UJG,J67,"overhead")))
set t=null
set CP7=null
set J67=null
set BB7=null
endfunction
function UKG takes nothing returns boolean
if GetSpellAbilityId()==1093751633 and ZG7(GetSpellTargetUnit())==false then
call UHG()
endif
return false
endfunction
function R78 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="R78"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UKG))
call AC7(1093687350)
set t=null
endfunction
function UMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="UMG"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1110459461)
call UnitRemoveAbility(J67,1093751635)
set t=null
set J67=null
return false
endfunction
function UNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="UNG"
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(J67,1110459463)
call UnitRemoveAbility(J67,1093751860)
set t=null
set J67=null
return false
endfunction
function UOG takes nothing returns nothing
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(UN4,1093751861)
local boolean WGD=false
set LP4="UOG"
if DB8==0 then
set DB8=GetUnitAbilityLevel(UN4,1093808949)
set WGD=true
endif
if BP8(GetEnumUnit())==false then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UMG))
call SaveUnitHandle(C7,(JZ7),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751635,false)
call Z27(GetEnumUnit(),1093751635)
endif
call D38(UN4,GetEnumUnit(),1,DB8*50+$C8)
set t=null
endfunction
function UPG takes nothing returns nothing
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(UN4,1093751861)
local boolean WGD=false
set LP4="UPG"
if DB8==0 then
set DB8=GetUnitAbilityLevel(UN4,1093808949)
set WGD=true
endif
if BP8(GetEnumUnit())==false then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,3,false)
call TriggerRegisterUnitEvent(t,GetEnumUnit(),EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UNG))
call SaveUnitHandle(C7,(JZ7),(17),(GetEnumUnit()))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093751860,false)
call Z27(GetEnumUnit(),1093751860)
endif
if WGD then
call D38(UN4,GetEnumUnit(),1,DB8*50+50+75)
else
call D38(UN4,GetEnumUnit(),1,DB8*50+50)
endif
set t=null
endfunction
function UQG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local group g
local integer TZG=GetTriggerEvalCount(t)
local fogmodifier URG=(LoadFogModifierHandle(C7,(JZ7),(42)))
set LP4="UQG"
if TZG==1 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",CP7,"chest"))
elseif TZG==2 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Calldown_FlyUp.mdx",CP7,"chest"))
elseif TZG==3 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif TZG==4 then
set g=ZI7()
set IM4=CP7
set UN4=CP7
call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function LF7))
call ForGroup(g,function UOG)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
elseif TZG==5 then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Calldown_FlyDown.mdx",x,y))
elseif TZG==6 then
set g=ZI7()
set IM4=CP7
set UN4=CP7
call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function LF7))
call ForGroup(g,function UPG)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",x,y))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FogModifierStop(URG)
call DestroyFogModifier(URG)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set g=null
set URG=null
return false
endfunction
function USG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local string s=""
local fogmodifier T0D=CreateFogModifierRadius(GetOwningPlayer(CP7),FOG_OF_WAR_VISIBLE,x,y,350,true,true)
set LP4="USG"
call FogModifierStart(T0D)
if IsPlayerAlly(GetLocalPlayer(),GetOwningPlayer(CP7)) or Y27(GetLocalPlayer())then
set s="war3mapImported\\CallDown_4.mdx"
endif
call TriggerRegisterTimerEvent(t,.1,false)
call TriggerRegisterTimerEvent(t,.8,false)
call TriggerRegisterTimerEvent(t,1.6,false)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerRegisterTimerEvent(t,3.6,false)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function UQG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect(s,x,y)))
call SaveFogModifierHandle(C7,(JZ7),(42),(T0D))
set t=null
set CP7=null
set T0D=null
endfunction
function UTG takes nothing returns boolean
if GetSpellAbilityId()==1093751861 or GetSpellAbilityId()==1093808949 then
call USG()
endif
return false
endfunction
function R88 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="R88"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UTG))
set t=null
endfunction
function UUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer WB7=GetHandleId(t)
local unit CP7=QA7(WB7,"Source")
local integer PHD
set LP4="UUG"
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 and(GetEventDamage()>20 or IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE))then
set PHD=R47(GetHandleId(CP7),"Count")
if PHD>0 then
call Q97(GetHandleId(CP7),"Count",(PHD+1))
endif
call Q47(WB7)
call RN7(t)
endif
else
call Q47(WB7)
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function UVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=QA7(JZ7,"Source")
set LP4="UVG"
if YH7(CP7)==false then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093808951)
call UnitAddAbility(CP7,1093808706)
call UnitRemoveAbility(CP7,1093808706)
if(PH7((CP7),SU[GL4])!=null)then
call UnitAddAbility(CP7,1093808951)
endif
endif
set t=null
set CP7=null
return false
endfunction
function UWG takes unit CP7 returns nothing
local trigger t
set LP4="FlakCannon_Remove"
if YH7(CP7)==false then
call UnitRemoveAbility(CP7,1093808951)
call UnitAddAbility(CP7,1093808706)
call UnitRemoveAbility(CP7,1093808706)
if(PH7((CP7),SU[GL4])!=null)then
call UnitAddAbility(CP7,1093808951)
endif
else
set t=CreateTrigger()
call QG7(GetHandleId(t),"Source",CP7)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function UVG))
set t=null
endif
endfunction
function UXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer WB7=GetHandleId(t)
local unit CP7=QA7(WB7,"Source")
set LP4="UXG"
call UnitRemoveAbility(CP7,1093751895)
call UnitRemoveAbility(CP7,1110459466)
call UWG(CP7)
call Q47(WB7)
call RN7(t)
set t=null
return false
endfunction
function UYG takes nothing returns nothing
local unit EU8=GetAttacker()
local integer WB7=GetHandleId(EU8)
local integer PHD=R47(WB7,"Count")
local integer EV8=GetUnitAbilityLevel(EU8,1093808697)
local trigger t
set LP4="UYG"
if IsUnitIllusion(GetAttacker()) and GetUnitAbilityLevel(GetAttacker(),1093751895)>0 then
call UWG(GetAttacker())
call UnitRemoveAbility(GetAttacker(),1093751895)
endif
if GetAttacker()==EU8 then
set PHD=PHD+1
if PHD>3+EV8 then
call UnitRemoveAbility(EU8,1093751895)
call UnitRemoveAbility(EU8,1110459466)
call UWG(EU8)
set t=Q67(WB7,"FlakCannon_EndTrig")
call Q47(GetHandleId(t))
call RN7(t)
else
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function UUG))
call QG7(GetHandleId(t),"Source",EU8)
endif
endif
set t=null
set EU8=null
endfunction
function UZG takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093751895)>0 then
call UYG()
endif
return false
endfunction
function UAG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer WB7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
set LP4="UAG"
call TriggerRegisterTimerEvent(t,$F,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function UXG))
call QG7(WB7,"Source",CP7)
call QI7(GetHandleId(CP7),"FlakCannon_EndTrig",t)
call Q97(GetHandleId(CP7),"Count",(1))
call UnitRemoveAbility(CP7,1093808951)
call UnitAddAbility(CP7,1093808705)
call UnitRemoveAbility(CP7,1093808705)
if(PH7((CP7),SU[GL4])!=null)then
call UnitAddAbility(CP7,1093808951)
endif
set t=null
set CP7=null
endfunction
function UBG takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit()) and GetUnitTypeId(GetTriggerUnit())==1160786511 then
call UWG(GetTriggerUnit())
endif
return false
endfunction
function UCG takes nothing returns boolean
if GetSpellAbilityId()==1093808697 and GetUnitTypeId(GetTriggerUnit())==1160786510 then
call UAG()
endif
return false
endfunction
function R98 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="R98"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function UCG))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function UZG))
set t=CreateTrigger()
call TriggerRegisterEnterRectSimple(t,GetWorldBounds())
call TriggerAddCondition(t,Condition(function UBG))
set t=null
endfunction
function U3G takes nothing returns boolean
local unit J67=GetFilterUnit()
local unit CP7=UO4
local real U6G=UP4
local real ULG=UQ4
local real ON2=UR4
local real OS2=US4
local real x
local real y
local real a
local real d
set LP4="U3G"
if(Y57(GetFilterUnit())==false and IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))then
if(RG7(J67,"4324")==false)then
call RR7(J67,"4324",.3)
endif
set d=N67(U6G,ULG,GetUnitX(J67),GetUnitY(J67))
set a=MZ7(U6G,ULG,GetUnitX(J67),GetUnitY(J67))*bj_DEGTORAD
if d>UT4 then
set x=GetUnitX(J67)+$B*Cos(a)
set y=GetUnitY(J67)+$B*Sin(a)
else
set x=GetUnitX(J67)-$B*Cos(a)
set y=GetUnitY(J67)-$B*Sin(a)
endif
call SetUnitX(J67,x)
call SetUnitY(J67,y)
endif
set J67=null
set CP7=null
return false
endfunction
function U1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real U6G=(LoadReal(C7,(JZ7),(6)))
local real ULG=(LoadReal(C7,(JZ7),(7)))
local real x
local real y
local integer i=0
local group g
set LP4="U1G"
if GetTriggerEvalCount(t)>(50*(2+.5*GetUnitAbilityLevel(CP7,1093751637)))then
loop
exitwhen i>16
set i=i+1
endloop
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set UP4=U6G
set UQ4=ULG
set UO4=CP7
set IM4=CP7
loop
exitwhen i>16
set x=U6G+UT4*Cos(bj_DEGTORAD*360.*i/16.)
set y=ULG+UT4*Sin(bj_DEGTORAD*360.*i/16.)
set UR4=x
set US4=y
call GroupEnumUnitsInRange(g,x,y,75,Condition(function U3G))
set i=i+1
endloop
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function U0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real U6G=(LoadReal(C7,(JZ7),(6)))
local real ULG=(LoadReal(C7,(JZ7),(7)))
local real x
local real y
local integer i=0
set LP4="U0G"
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
loop
exitwhen i>16
set x=U6G+UT4*Cos(bj_DEGTORAD*360.*i/16.)
set y=ULG+UT4*Sin(bj_DEGTORAD*360.*i/16.)
set i=i+1
endloop
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Stand.mdx",U6G,ULG)))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((U6G)*1.))
call SaveReal(C7,(JZ7),(7),((ULG)*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function U1G))
set t=null
set CP7=null
return false
endfunction
function U5G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real U6G=GetSpellTargetX()
local real ULG=GetSpellTargetY()
set LP4="U5G"
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\KineticField_FX_Start.mdx",U6G,ULG)))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((U6G)*1.))
call SaveReal(C7,(JZ7),(7),((ULG)*1.))
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerAddCondition(t,Condition(function U0G))
call BA7(GetOwningPlayer(CP7),5.5,U6G,ULG,300)
set t=null
set CP7=null
endfunction
function U2G takes nothing returns boolean
if GetSpellAbilityId()==1093751637 then
call U5G()
endif
return false
endfunction
function RD8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RD8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function U2G))
set t=null
endfunction
function U_G takes nothing returns nothing
call D38(U54,GetEnumUnit(),1,U14)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Purge_NoBirth.mdx",GetEnumUnit(),"origin"))
endfunction
function V4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local group g
local integer TZG=GetTriggerEvalCount(t)
set LP4="V4G"
if TZG>20 then
call StopSound(V94,false,true)
call KillUnit(BB7)
call ShowUnit(BB7,false)
call KillUnit(DA8)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
set U54=CP7
set U14=.25*(120+50*DB8)*(TZG/20.)
set U24=false
if ModuloInteger(TZG,4)==0 then
set U24=true
endif
call GroupEnumUnitsInRange(g,GetUnitX(BB7),GetUnitY(BB7),400,Condition(function LP7))
call ForGroup(g,function U_G)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
set BB7=null
set DA8=null
return false
endfunction
function V7G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real V8G=GetSpellTargetX()
local real V9G=GetSpellTargetY()
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993419,V8G,V9G,0)
local integer DB8=GetUnitAbilityLevel(CP7,1093752118)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,V8G,V9G,0)
set LP4="V7G"
call SetSoundVolume(V94,$C8)
call StartSound(V94)
call SetSoundPosition(V94,V8G,V9G,100)
if WN7(GetOwningPlayer(CP7))then
call Z27(DA8,1093752117)
else
call Z27(DA8,1093752116)
endif
call IssuePointOrderById(DA8,$D01F9,V8G,V9G)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveInteger(C7,(JZ7),(5),(DB8))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function V4G))
set t=null
set CP7=null
set BB7=null
set DA8=null
endfunction
function VDG takes nothing returns boolean
if GetSpellAbilityId()==1093752118 then
call V7G()
endif
return false
endfunction
function RE8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RE8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VDG))
set t=null
endfunction
function VEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real V8G=(LoadReal(C7,(JZ7),(6)))
local real V9G=(LoadReal(C7,(JZ7),(7)))
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local real a=MZ7(x,y,V8G,V9G)
local real d=N67(x,y,V8G,V9G)
local real r=(LoadReal(C7,(JZ7),(671)))
set LP4="VEG"
call SetUnitFacing(BB7,a)
set x=x+r*Cos(a*bj_DEGTORAD)
set y=y+r*Sin(a*bj_DEGTORAD)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
if d<40 then
call KillUnit(BB7)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call RR7(J67,"4411",1)
call SetUnitPosition(J67,V8G,V9G)
call PanCameraToTimedForPlayer(GetOwningPlayer(J67),V8G,V9G,0)
elseif Y57(J67)then
call KillUnit(BB7)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set J67=null
set BB7=null
return false
endfunction
function VFG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local real x=(LoadReal(C7,(GetHandleId(J67)),(7400)))
local real y=(LoadReal(C7,(GetHandleId(J67)),(7500)))
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993398,GetUnitX(J67),GetUnitY(J67),0)
local real d=N67(x,y,GetUnitX(J67),GetUnitY(J67))
local real r=.02*(RMaxBJ(d/1.8,600))
set LP4="VFG"
call TriggerAddCondition(t,Condition(function VEG))
call TriggerRegisterTimerEvent(t,.02,true)
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveReal(C7,(JZ7),(671),((r)*1.))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",J67,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffect("effects\\Lightning_Ball_Tail_FX.mdx",x,y)))
call TriggerEvaluate(t)
set CP7=null
set J67=null
set BB7=null
set t=null
endfunction
function VGG takes nothing returns boolean
if GetSpellAbilityId()==1093751639 and ZG7(GetSpellTargetUnit())==false then
if IsUnitIllusion(GetSpellTargetUnit())then
call KillUnit(GetSpellTargetUnit())
else
call VFG()
endif
endif
return false
endfunction
function EEG takes nothing returns nothing
local unit J67=IM4
local integer i=0
loop
exitwhen i>$F
set i=i+1
endloop
set J67=null
endfunction
function VHG takes nothing returns nothing
local unit J67=GetEnumUnit()
local integer JZ7=GetHandleId(J67)
local integer i=1
set LP4="VHG"
loop
exitwhen i>$E
call SaveReal(C7,(JZ7),(7400+i-1),(((LoadReal(C7,(JZ7),(7400+i))))*1.))
call SaveReal(C7,(JZ7),(7500+i-1),(((LoadReal(C7,(JZ7),(7500+i))))*1.))
set i=i+1
endloop
call SaveReal(C7,(JZ7),(7400+$E),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(7500+$E),((GetUnitY(J67))*1.))
set J67=null
endfunction
function VIG takes nothing returns boolean
local group g=ZI7()
set LP4="VIG"
call GroupEnumUnitsInRange(g,0,0,99999,Condition(function LB7))
call ForGroup(g,function VHG)
call ZH7(g)
set g=null
return false
endfunction
function RF8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RF8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VGG))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function VIG))
set t=null
endfunction
function VJG takes nothing returns nothing
if UV4!=GetEnumUnit()then
call D38(UW4,GetEnumUnit(),1,UX4*25+25)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function VKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local group g
local integer TZG=GetTriggerEvalCount(t)
local unit VMG=null
set LP4="VKG"
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
call SetUnitX(BB7,GetUnitX(J67))
call SetUnitY(BB7,GetUnitY(J67))
if TZG==1 or TZG==100 or TZG==$C8 then
set g=ZI7()
if A47(J67)then
set VMG=CreateUnit(GetOwningPlayer(J67),1697656899,GetUnitX(J67),GetUnitY(J67),0)
call UnitApplyTimedLife(VMG,1112820806,.2)
call IssueTargetOrderById(DA8,$D0097,VMG)
else
call IssueTargetOrderById(DA8,$D0097,J67)
call D38(CP7,J67,1,DB8*25+25)
endif
call BJ7("war3mapImported\\ThunderStorm_Groundeffect.mdx",J67,"origin",.6)
set IM4=CP7
set UW4=CP7
set UV4=J67
set UX4=DB8
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),$C8+25,Condition(function LF7))
call ForGroup(g,function VJG)
call ZH7(g)
if GetTriggerEvalCount(t)==$C8 then
call KillUnit(DA8)
call KillUnit(BB7)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
endif
set t=null
set CP7=null
set J67=null
set DA8=null
set g=null
set VMG=null
set BB7=null
return false
endfunction
function VNG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093751894)
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1697657424,GetUnitX(J67),GetUnitY(J67),0)
set LP4="VNG"
call Z27(BB7,1097625443)
call Z27(DA8,1093752119)
call SetUnitAbilityLevel(DA8,1093752119,DB8)
call Z27(DA8,1097625443)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function VKG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveInteger(C7,(JZ7),(5),(DB8))
set CP7=null
set J67=null
set DA8=null
set t=null
set BB7=null
endfunction
function VOG takes nothing returns boolean
if GetSpellAbilityId()==1093751894 and ZG7(GetSpellTargetUnit())==false then
call VNG()
endif
return false
endfunction
function RG8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RG8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VOG))
set t=null
endfunction
function VPG takes nothing returns nothing
local integer VQG=UC4
local unit J67=GetEnumUnit()
local integer VRG=662-1+VQG
local real VSG=(LoadReal(C7,(GetHandleId(J67)),(VRG)))
local real VTG=(TimerGetElapsed(V))
set LP4="VPG"
if VSG<VTG then
call SaveReal(C7,(GetHandleId(J67)),(VRG),((VTG+2)*1.))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call D38(UJ4,J67,1,2+6*U34)
endif
endif
set J67=null
endfunction
function VUG takes nothing returns nothing
local integer VVG=UC4
local unit J67=GetEnumUnit()
local integer VWG=662-1+VVG
local real VXG=(LoadReal(C7,(GetHandleId(J67)),(VWG)))
local real VYG=(TimerGetElapsed(V))
set LP4="VUG"
if VXG<VYG then
call SaveReal(C7,(GetHandleId(J67)),(VWG),((VYG+2)*1.))
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call D38(UJ4,J67,1,$F+$A*U34)
endif
endif
set J67=null
endfunction
function VZG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_STRUCTURE)==false then
call D38(UJ4,GetEnumUnit(),1,UA4)
endif
endfunction
function VAG takes unit CP7,unit VBG returns nothing
local group g=ZI7()
set LP4="UF3"
set IM4=CP7
set UA4=25*U34
set UJ4=CP7
set UK4=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(VBG),GetUnitY(VBG),0)
call GroupEnumUnitsInRange(g,GetUnitX(VBG),GetUnitY(VBG),325,Condition(function LZ7))
call ForGroup(g,function VZG)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(VBG),GetUnitY(VBG)))
call KillUnit(VBG)
call ZH7(g)
set g=null
endfunction
function VCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit V3G=(LoadUnitHandle(C7,(JZ7),(393)))
local unit V6G=(LoadUnitHandle(C7,(JZ7),(394)))
local unit VLG=(LoadUnitHandle(C7,(JZ7),(395)))
local unit V1G=(LoadUnitHandle(C7,(JZ7),(396)))
local unit V0G=(LoadUnitHandle(C7,(JZ7),(397)))
local real x
local real y
local real a
local real d=(LoadReal(C7,(JZ7),($8A)))
local real U6G=GetUnitX(CP7)
local real ULG=GetUnitY(CP7)
local real V5G
local integer TZG=GetTriggerEvalCount(t)
local real V2G
local group g
local integer V_G=0
local real D49=2.25
local real W4G
set LP4="VCG"
if A47(V3G)==false then
set V_G=V_G+1
endif
if A47(V6G)==false then
set V_G=V_G+1
endif
if A47(VLG)==false then
set V_G=V_G+1
endif
if A47(V1G)==false then
set V_G=V_G+1
endif
if A47(V0G)==false then
set V_G=V_G+1
endif
if V_G==5 then
set D49=2.25
elseif V_G==4 then
set D49=2.1
elseif V_G==3 then
set D49=1.95
elseif V_G==2 then
set D49=1.8
elseif V_G==1 then
set D49=1.65
endif
set V5G=-1*360*.02/D49
set W4G=(LoadReal(C7,(JZ7),($89)))+V5G
call SaveReal(C7,(JZ7),($89),((W4G)*1.))
set U34=GetUnitAbilityLevel(CP7,1093751864)
set UJ4=CP7
if TZG==50 then
call ShowUnit(V6G,true)
call SaveBoolean(C7,(JZ7),(512),(true))
call Z27(V6G,1097625443)
endif
if TZG==100 then
call ShowUnit(VLG,true)
call SaveBoolean(C7,(JZ7),(513),(true))
call Z27(VLG,1097625443)
endif
if TZG==$96 then
call ShowUnit(V1G,true)
call SaveBoolean(C7,(JZ7),(514),(true))
call Z27(V1G,1097625443)
endif
if TZG==$C8 then
call ShowUnit(V0G,true)
call SaveBoolean(C7,(JZ7),(515),(true))
call Z27(V0G,1097625443)
endif
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093752115 then
if(LoadBoolean(C7,(JZ7),(655))) then
call SaveBoolean(C7,(JZ7),(655),(false))
call SaveBoolean(C7,(JZ7),(656),(false))
else
call SaveBoolean(C7,(JZ7),(655),(true))
call SaveBoolean(C7,(JZ7),(656),(false))
endif
elseif GetSpellAbilityId()==1093752114 then
if(LoadBoolean(C7,(JZ7),(656))) then
call SaveBoolean(C7,(JZ7),(655),(false))
call SaveBoolean(C7,(JZ7),(656),(false))
else
call SaveBoolean(C7,(JZ7),(655),(false))
call SaveBoolean(C7,(JZ7),(656),(true))
endif
endif
endif
if(LoadBoolean(C7,(JZ7),(655)))then
set d=RMaxBJ(d-5,100)
call SaveReal(C7,(JZ7),($8A),((d)*1.))
elseif(LoadBoolean(C7,(JZ7),(656)))then
set d=RMinBJ(d+5,875)
call SaveReal(C7,(JZ7),($8A),((d)*1.))
endif
if GetTriggerEventId()==EVENT_UNIT_DEATH or TZG==950 or(A47(V3G)and A47(V6G)and A47(VLG)and A47(V1G)and A47(V0G))or(TZG>1 and GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751864)then
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT then
call UnitRemoveAbility(CP7,1093752115)
call UnitRemoveAbility(CP7,1093752114)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if A47(V3G)==false then
call VAG(CP7,V3G)
endif
if A47(V6G)==false then
call VAG(CP7,V6G)
endif
if A47(VLG)==false then
call VAG(CP7,VLG)
endif
if A47(V1G)==false then
call VAG(CP7,V1G)
endif
if A47(V0G)==false then
call VAG(CP7,V0G)
endif
else
set g=ZI7()
if A47(V3G)==false and(LoadBoolean(C7,(JZ7),(511)))then
set V2G=360*5/5.
set a=V2G+W4G
set x=AY7(U6G+d*Cos(a*bj_DEGTORAD))
set y=AZ7(ULG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(V3G,x)
call SetUnitY(V3G,y)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function LC7))
if FirstOfGroup(g)!=null then
call VAG(CP7,V3G)
endif
call GroupClear(g)
set UM4=V3G
set UC4=1
set UJ4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L37))
call ForGroup(g,function VPG)
call GroupClear(g)
endif
if A47(V6G)==false and(LoadBoolean(C7,(JZ7),(512)))then
set V2G=360*4/5.
set a=V2G+W4G
set x=AY7(U6G+d*Cos(a*bj_DEGTORAD))
set y=AZ7(ULG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(V6G,x)
call SetUnitY(V6G,y)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function LC7))
if FirstOfGroup(g)!=null then
call VAG(CP7,V6G)
endif
call GroupClear(g)
set UM4=V6G
set UC4=2
set UJ4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L37))
call ForGroup(g,function VPG)
call GroupClear(g)
endif
if A47(VLG)==false and(LoadBoolean(C7,(JZ7),(513)))then
set V2G=360*3/5.
set a=V2G+W4G
set x=AY7(U6G+d*Cos(a*bj_DEGTORAD))
set y=AZ7(ULG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(VLG,x)
call SetUnitY(VLG,y)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function LC7))
if FirstOfGroup(g)!=null then
call VAG(CP7,VLG)
endif
call GroupClear(g)
set UM4=VLG
set UC4=3
set UJ4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L37))
call ForGroup(g,function VPG)
call GroupClear(g)
endif
if A47(V1G)==false and(LoadBoolean(C7,(JZ7),(514)))then
set V2G=360*2/5.
set a=V2G+W4G
set x=AY7(U6G+d*Cos(a*bj_DEGTORAD))
set y=AZ7(ULG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(V1G,x)
call SetUnitY(V1G,y)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function LC7))
if FirstOfGroup(g)!=null then
call VAG(CP7,V1G)
endif
call GroupClear(g)
set UM4=V1G
set UC4=4
set UJ4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L37))
call ForGroup(g,function VPG)
call GroupClear(g)
endif
if A47(V0G)==false and(LoadBoolean(C7,(JZ7),(515)))then
set V2G=360*1/5.
set a=V2G+W4G
set x=AY7(U6G+d*Cos(a*bj_DEGTORAD))
set y=AZ7(ULG+d*Sin(a*bj_DEGTORAD))
call SetUnitX(V0G,x)
call SetUnitY(V0G,y)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,95,Condition(function LC7))
if FirstOfGroup(g)!=null then
call VAG(CP7,V0G)
endif
call GroupClear(g)
set UM4=V0G
set UC4=5
set UJ4=CP7
call GroupEnumUnitsInRange(g,x,y,$AF,Condition(function L37))
call ForGroup(g,function VPG)
call GroupClear(g)
endif
call ZH7(g)
endif
set t=null
set CP7=null
set V3G=null
set V6G=null
set VLG=null
set V1G=null
set V0G=null
set g=null
return false
endfunction
function W7G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit V3G
local unit V6G
local unit VLG
local unit V1G
local unit W8G
local real x
local real y
set LP4="W7G"
set x=GetUnitX(CP7)+$FA*Cos(bj_DEGTORAD*360*5/5.*-1.)
set y=GetUnitY(CP7)+$FA*Sin(bj_DEGTORAD*360*5/5.*-1.)
set V3G=CreateUnit(GetOwningPlayer(CP7),1747993418,x,y,360*5/5.*-1.)
call Z27(V3G,1097625443)
set x=GetUnitX(CP7)+$FA*Cos(bj_DEGTORAD*360*4/5.*-1.)
set y=GetUnitY(CP7)+$FA*Sin(bj_DEGTORAD*360*4/5.*-1.)
set V6G=CreateUnit(GetOwningPlayer(CP7),1747993418,x,y,360*4/5.*-1.)
call ShowUnit(V6G,false)
call SetUnitInvulnerable(V6G,true)
set x=GetUnitX(CP7)+$FA*Cos(bj_DEGTORAD*360*3/5.*-1.)
set y=GetUnitY(CP7)+$FA*Sin(bj_DEGTORAD*360*3/5.*-1.)
set VLG=CreateUnit(GetOwningPlayer(CP7),1747993418,x,y,360*3/5.*-1.)
call ShowUnit(VLG,false)
call SetUnitInvulnerable(V6G,true)
set x=GetUnitX(CP7)+$FA*Cos(bj_DEGTORAD*360*2/5.*-1.)
set y=GetUnitY(CP7)+$FA*Sin(bj_DEGTORAD*360*2/5.*-1.)
set V1G=CreateUnit(GetOwningPlayer(CP7),1747993418,x,y,360*2/5.*-1.)
call ShowUnit(V1G,false)
call SetUnitInvulnerable(V1G,true)
set x=GetUnitX(CP7)+$FA*Cos(bj_DEGTORAD*360*1/5.*-1.)
set y=GetUnitY(CP7)+$FA*Sin(bj_DEGTORAD*360*1/5.*-1.)
set W8G=CreateUnit(GetOwningPlayer(CP7),1747993418,x,y,360*1/5.*-1.)
call ShowUnit(W8G,false)
call SetUnitInvulnerable(W8G,true)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(393),(V3G))
call SaveUnitHandle(C7,(JZ7),(394),(V6G))
call SaveUnitHandle(C7,(JZ7),(395),(VLG))
call SaveUnitHandle(C7,(JZ7),(396),(V1G))
call SaveUnitHandle(C7,(JZ7),(397),(W8G))
call SaveBoolean(C7,(JZ7),(511),(true))
call SaveBoolean(C7,(JZ7),(512),(false))
call SaveBoolean(C7,(JZ7),(513),(false))
call SaveBoolean(C7,(JZ7),(514),(false))
call SaveBoolean(C7,(JZ7),(515),(false))
call SaveBoolean(C7,(JZ7),(655),(false))
call SaveBoolean(C7,(JZ7),(656),(false))
call SaveReal(C7,(JZ7),($8A),(($96)*1.))
call Z27(CP7,1093752114)
call Z27(CP7,1093752115)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function VCG))
set CP7=null
set t=null
set V3G=null
set V6G=null
set VLG=null
set V1G=null
set W8G=null
endfunction
function W9G takes nothing returns boolean
if GetSpellAbilityId()==1093751864 then
call W7G()
endif
return false
endfunction
function RH8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RH8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function W9G))
set t=null
endfunction
function WDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
set LP4="WDG"
call BE7(CP7,GetEventDamage()*.05*DB8)
set t=null
set CP7=null
return false
endfunction
function WEG takes unit u returns nothing
local trigger t
set LP4="Overcharge_Remove"
call UnitRemoveAbility(u,1093751891)
call UnitRemoveAbility(u,1093751890)
call UnitRemoveAbility(u,1093751892)
call UnitRemoveAbility(u,1093751888)
if(LoadBoolean(C7,(GetHandleId(u)),(708)))then
call SaveBoolean(C7,(GetHandleId(u)),(708),(false))
set t=(LoadTriggerHandle(C7,(GetHandleId(u)),(709)))
call FlushChildHashtable(C7,(GetHandleId(t)))
call RN7(t)
call RemoveSavedHandle(C7,(GetHandleId(u)),(709))
set t=null
endif
endfunction
function WFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="WFG"
call WEG(CP7)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
return false
endfunction
function WGG takes unit u,integer i returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="UL3"
call SaveUnitHandle(C7,(JZ7),(2),(u))
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function WFG))
if i==1 then
call Z27(u,1093751891)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751891,false)
elseif i==2 then
call Z27(u,1093751890)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751890,false)
elseif i==3 then
call Z27(u,1093751892)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751892,false)
elseif i==4 then
call Z27(u,1093751888)
call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093751888,false)
endif
if(LoadBoolean(C7,(GetHandleId(u)),(708)))==false then
call SaveBoolean(C7,(GetHandleId(u)),(708),(true))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function WDG))
call SaveTriggerHandle(C7,(GetHandleId(u)),(709),(t))
call SaveUnitHandle(C7,(GetHandleId(t)),(2),(u))
call SaveInteger(C7,(GetHandleId(t)),(5),(i))
endif
set t=null
endfunction
function WHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer TZG=(LoadInteger(C7,(JZ7),(34)))
local integer DB8=GetUnitAbilityLevel(CP7,1093810257)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit WIG=(LoadUnitHandle(C7,(GetHandleId(CP7)),(652)))
local boolean WJG=false
local real WKG=.2*(GetUnitState(CP7,UNIT_STATE_LIFE)*.035)
local real WMG=.2*(GetUnitState(CP7,UNIT_STATE_MANA)*.035)
set LP4="WHG"
if GetTriggerEventId()==EVENT_UNIT_ISSUED_ORDER then
if GetIssuedOrderId()==852589then
call WGG(CP7,DB8)
elseif GetIssuedOrderId()==852590then
call WEG(CP7)
endif
endif
if GetUnitAbilityLevel(CP7,1093751891)>0 or GetUnitAbilityLevel(CP7,1093751890)>0 or GetUnitAbilityLevel(CP7,1093751892)>0 or GetUnitAbilityLevel(CP7,1093751888)>0 then
set WJG=true
call SetUnitState(CP7,UNIT_STATE_LIFE,RMaxBJ(GetUnitState(CP7,UNIT_STATE_LIFE)-WKG,1))
call SetUnitState(CP7,UNIT_STATE_MANA,RMaxBJ(GetUnitState(CP7,UNIT_STATE_MANA)-WMG,1))
endif
if WIG==null then
if J67!=null then
call WEG(J67)
set J67=null
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
else
if J67==null then
set J67=WIG
if WJG then
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call WGG(J67,DB8)
else
call WEG(J67)
endif
elseif J67!=WIG then
call WEG(J67)
if WJG then
set J67=WIG
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call WGG(J67,DB8)
endif
elseif WJG==false then
call WEG(J67)
elseif J67==WIG then
if WJG then
set J67=WIG
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call WGG(J67,DB8)
endif
endif
endif
set t=null
set CP7=null
set J67=null
set WIG=null
return false
endfunction
function WNG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093810257)
set LP4="WNG"
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(null))
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_ORDER)
call TriggerAddCondition(t,Condition(function WHG))
set CP7=null
set t=null
endfunction
function WOG takes nothing returns boolean
if GetLearnedSkill()==1093810257 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093810257)==1 then
call WNG()
endif
return false
endfunction
function RI8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RI8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function WOG))
set t=null
endfunction
function WPG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),UY4)==false then
call GroupAddUnit(UY4,GetEnumUnit())
call DZ8(UI4,GetEnumUnit(),.25+.5*UB4)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",GetEnumUnit(),"chest"))
endif
endfunction
function WQG takes unit CP7,unit J67,group TAG returns nothing
local real x1=GetUnitX(CP7)
local real y1=GetUnitY(CP7)
local real x2=GetUnitX(J67)
local real y2=GetUnitY(J67)
local real a=MZ7(x1,y1,x2,y2)*bj_DEGTORAD
local real x
local real y
local real d=N67(x1,y1,x2,y2)
local group g=ZI7()
local integer i=1
set LP4="UU3"
set UY4=TAG
set UI4=CP7
set UB4=GetUnitAbilityLevel(CP7,1093751873)
set UZ4=UB4*50+50
loop
exitwhen i>8
set IM4=CP7
set x=x1+d*i/8*Cos(a)
set y=y1+d*i/8*Sin(a)
call GroupEnumUnitsInRange(g,x,y,100,Condition(function LF7))
call ForGroup(g,function WPG)
call GroupClear(g)
set i=i+1
endloop
call ZH7(g)
set g=null
endfunction
function WRG takes unit CP7,unit J67 returns boolean
return(RG7(CP7,"Relocate|Active"))
endfunction
function WSG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real d=N37(CP7,J67)
local real a=MY7(CP7,J67)*bj_DEGTORAD
local real x=GetUnitX(CP7)+20*Cos(a)
local real y=GetUnitY(CP7)+20*Sin(a)
local location l
set LP4="WSG"
if d<300 or d>$866 then
set l=BS8(x,y)
set x=GetLocationX(l)
set y=GetLocationY(l)
call SetUnitX(CP7,AY7(x))
call SetUnitY(CP7,AY7(y))
call BW7(x,y,350)
call RemoveLocation(l)
set l=null
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SaveInteger(C7,(GetHandleId((CP7))),((4295)),(2))
else
call SetUnitX(CP7,x)
call SetUnitY(CP7,y)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function WTG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local group TAG=(LoadGroupHandle(C7,(JZ7),($85)))
local lightning WUG=(LoadLightningHandle(C7,(JZ7),($C4)))
local integer ZD8=GetTriggerEvalCount(t)
local real d=N37(CP7,J67)
local real a=1
local real L79=GetUnitState(CP7,UNIT_STATE_LIFE)
local real G4D=GetUnitState(CP7,UNIT_STATE_MANA)
local real WVG=(LoadReal(C7,(JZ7),(670)))
local real WWG=(LoadReal(C7,(JZ7),(667)))
local real WXG
local real WYG
local real WZG=1.5
set LP4="WTG"
if J67==null or CP7==null or A47(CP7) or(ZD8>600 and WRG(CP7,J67)==false and((LoadInteger(C7,(GetHandleId((CP7))),((4295))))==1)==false)or(d>925 and((LoadInteger(C7,(GetHandleId((CP7))),((4295))))==1)==false)or GetTriggerEventId()==EVENT_UNIT_DEATH or(GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT and GetSpellAbilityId()==1093751893)then
call ZH7(TAG)
call DestroyLightning(WUG)
call UnitRemoveAbility(J67,1093751880)
call UnitRemoveAbility(J67,1093751881)
call UnitRemoveAbility(J67,1093751879)
call UnitRemoveAbility(J67,1093751882)
call UnitRemoveAbility(J67,1110459464)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093751880)
call UnitRemoveAbility(CP7,1093751881)
call UnitRemoveAbility(CP7,1093751879)
call UnitRemoveAbility(CP7,1093751882)
call UnitRemoveAbility(CP7,1110459464)
call UnitRemoveAbility(CP7,1093751893)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093751873 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093751873,true)
endif
call RemoveSavedHandle(C7,GetHandleId(CP7),652)
call RemoveSavedHandle(C7,GetHandleId(J67),StringHash("AI|TetherSource"))
else
set WXG=L79/GetUnitState(CP7,UNIT_STATE_MAX_LIFE)
set WYG=G4D/GetUnitState(CP7,UNIT_STATE_MAX_MANA)
if WXG-WVG>0 and(WXG-WVG)<.5 then
if RG7(CP7,"ArmletOfMordiganState")==false then
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+WZG*(WXG-WVG)*GetUnitState(CP7,UNIT_STATE_MAX_LIFE))
endif
endif
if WYG-WWG>0 and(WXG-WVG)<.5 then
call SetUnitState(J67,UNIT_STATE_MANA,GetUnitState(J67,UNIT_STATE_MANA)+WZG*(WYG-WWG)*GetUnitState(CP7,UNIT_STATE_MAX_MANA))
endif
call SaveReal(C7,(JZ7),(670),((GetUnitState(CP7,UNIT_STATE_LIFE)/GetUnitState(CP7,UNIT_STATE_MAX_LIFE))*1.))
call SaveReal(C7,(JZ7),(667),((GetUnitState(CP7,UNIT_STATE_MANA)/GetUnitState(CP7,UNIT_STATE_MAX_MANA))*1.))
call MoveLightning(WUG,true,GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))
call WQG(CP7,J67,TAG)
if IsUnitVisible(CP7,GetLocalPlayer())==false and IsUnitVisible(J67,GetLocalPlayer())==false then
set a=0
endif
if Y27(GetLocalPlayer())then
set a=1
endif
if d<700 or((LoadInteger(C7,(GetHandleId((CP7))),((4295))))==1) then
call SetLightningColor(WUG,.0,1.,1.,a)
else
call SetLightningColor(WUG,.8,.7,.4,a)
endif
endif
set t=null
set CP7=null
set J67=null
set TAG=null
set WUG=null
return false
endfunction
function WAG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local lightning WUG=AddLightning("CHIM",true,GetUnitX(CP7),GetUnitY(CP7),GetUnitX(J67),GetUnitY(J67))
local integer DB8=GetUnitAbilityLevel(CP7,1093751873)
local integer WBG
local real d=N37(CP7,J67)
local real a=MY7(CP7,J67)*bj_DEGTORAD
local location l
local real x
local real y
set LP4="WAG"
call SetLightningColor(WUG,.0,1.,1.,1)
call Z27(CP7,1093751893)
if DB8==1 then
set WBG=1093751880
elseif DB8==2 then
set WBG=1093751881
elseif DB8==3 then
set WBG=1093751879
elseif DB8==4 then
set WBG=1093751882
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093751873,false)
call Z27(CP7,WBG)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),WBG,false)
call Z27(J67,WBG)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),WBG,false)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveGroupHandle(C7,(JZ7),($85),(ZI7()))
call SaveLightningHandle(C7,(JZ7),($C4),(WUG))
call SaveReal(C7,(JZ7),(670),((GetUnitState(CP7,UNIT_STATE_LIFE)/GetUnitState(CP7,UNIT_STATE_MAX_LIFE))*1.))
call SaveReal(C7,(JZ7),(667),((GetUnitState(CP7,UNIT_STATE_MANA)/GetUnitState(CP7,UNIT_STATE_MAX_MANA))*1.))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WTG))
call SaveUnitHandle(C7,(GetHandleId(CP7)),(652),(J67))
if IsUnitType(J67,UNIT_TYPE_HERO)then
call QG7((GetHandleId(J67)),"AI|TetherSource",CP7)
endif
if d>700 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",CP7,"chest")))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function WSG))
call SaveInteger(C7,(GetHandleId((CP7))),((4295)),(1))
endif
set CP7=null
set t=null
endfunction
function WCG takes nothing returns boolean
if GetSpellAbilityId()==1093751873 then
call WAG()
endif
return false
endfunction
function RJ8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RJ8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function WCG))
set t=null
endfunction
function W3G takes unit CP7,real x,real y returns boolean
local boolean J7D=false
local player p=GetOwningPlayer(CP7)
local unit DA8=CreateUnit(p,1697657425,GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="IsExplored"
call Z27(DA8,1093752372)
if IssuePointOrderById(DA8,$D022D,x,y) then
call KillUnit(DA8)
set DA8=null
return true
else
call KillUnit(DA8)
set DA8=null
return false
endif
endfunction
function W6G takes string WLG,unit J67 returns nothing
local texttag tt=CreateTextTag()
set LP4="I84"
call SetTextTagText(tt,WLG,.033)
call SetTextTagPosUnit(tt,J67,64)
call SetTextTagColor(tt,0,50,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,.85)
call SetTextTagVisibility(tt,true)
set tt=null
endfunction
function W1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer TZG=GetTriggerEvalCount(t)
set LP4="W1G"
if A47(CP7)==false and TZG<$C then
call W6G(I2S($C-TZG),CP7)
endif
if TZG==$C then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function W0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(GetHandleId(CP7)),(652)))
local real V8G=(LoadReal(C7,(JZ7),(47)))
local real V9G=(LoadReal(C7,(JZ7),(48)))
local real U6G=(LoadReal(C7,(JZ7),($BD)))
local real ULG=(LoadReal(C7,(JZ7),($BE)))
local fogmodifier URG=(LoadFogModifierHandle(C7,(JZ7),(42)))
set LP4="W0G"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call RK7(CP7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FogModifierStop(URG)
call DestroyFogModifier(URG)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call BW7(V8G,V9G,$FA)
call BW7(U6G,ULG,$FA)
if GetTriggerEvalCount(t)==1 then
if A47(CP7)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(CP7),GetUnitY(CP7)))
call SetUnitPosition(CP7,V8G,V9G)
call PanCameraToTimedForPlayer(GetOwningPlayer(CP7),V8G,V9G,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(CP7),GetUnitY(CP7)))
call XG7(CP7)
endif
if J67!=null and A47(J67)==false and GetOwningPlayer(J67)!=Y7[0]and GetOwningPlayer(J67)!=Z7[0]and((R87(GetHandleId(GetOwningPlayer((J67))),"DisableHelp"))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(J67),GetUnitY(J67)))
call RR7(J67,"4402",1)
call SetUnitPosition(J67,V8G,V9G)
if IsUnitType(J67,UNIT_TYPE_HERO) and A47(J67)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(J67),V8G,V9G,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(J67),GetUnitY(J67)))
call XG7(J67)
endif
else
if A47(CP7)==false then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(CP7),GetUnitY(CP7)))
call SetUnitPosition(CP7,U6G,ULG)
call PanCameraToTimedForPlayer(GetOwningPlayer(CP7),U6G,ULG,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(CP7),GetUnitY(CP7)))
call XG7(CP7)
endif
if J67!=null and A47(J67)==false and GetOwningPlayer(J67)!=Y7[0]and GetOwningPlayer(J67)!=Z7[0]and((R87(GetHandleId(GetOwningPlayer((J67))),"DisableHelp"))==false)then
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(J67),GetUnitY(J67)))
call RR7(J67,"4402",1)
call SetUnitPosition(J67,U6G,ULG)
if IsUnitType(J67,UNIT_TYPE_HERO) and A47(J67)==false then
call PanCameraToTimedForPlayer(GetOwningPlayer(J67),U6G,ULG,0)
endif
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",GetUnitX(J67),GetUnitY(J67)))
call XG7(J67)
endif
call RK7(CP7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FogModifierStop(URG)
call DestroyFogModifier(URG)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
endif
set t=null
set CP7=null
set J67=null
set URG=null
return false
endfunction
function W5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real V8G=(LoadReal(C7,(JZ7),(47)))
local real V9G=(LoadReal(C7,(JZ7),(48)))
local fogmodifier URG
local integer DB8=GetUnitAbilityLevel(CP7,1093751874)
set LP4="W5G"
if BI8(CP7)or C27(CP7)or A47(CP7)then
call RK7(CP7,"Relocate|Active")
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEvalCount(t)==(2.75-.25*DB8)/.05 then
set URG=CreateFogModifierRadius(GetOwningPlayer(CP7),FOG_OF_WAR_VISIBLE,GetUnitX(CP7),GetUnitY(CP7),400,true,true)
call FogModifierStart(URG)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function W0G))
call SaveReal(C7,(JZ7),($BD),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),($BE),((GetUnitY(CP7))*1.))
call SaveReal(C7,(JZ7),(47),((V8G)*1.))
call SaveReal(C7,(JZ7),(48),((V9G)*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",GetUnitX(CP7),GetUnitY(CP7))))
call SaveFogModifierHandle(C7,(JZ7),(42),(URG))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function W1G))
endif
set CP7=null
set t=null
set URG=null
return false
endfunction
function W2G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local unit J67=(LoadUnitHandle(C7,(GetHandleId(CP7)),(652)))
local integer id=GetPlayerId(GetOwningPlayer(CP7))
local integer DB8=GetUnitAbilityLevel(CP7,1093751874)
set LP4="W2G"
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl",CP7,"chest"))
if J67!=null then
endif
call PingMinimapEx(x,y,4.,$FF,0,0,false)
call BA7(Y7[1],2.5,x,y,300)
call BA7(Z7[1],2.5,x,y,300)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function W5G))
call SaveReal(C7,(JZ7),(47),((x)*1.))
call SaveReal(C7,(JZ7),(48),((y)*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffect("war3mapImported\\EarthlyEminence.mdl",x,y)))
call RI7(CP7,"Relocate|Active")
set CP7=null
set t=null
endfunction
function W_G takes nothing returns boolean
if GetSpellAbilityId()==1093751874 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call W2G()
else
if W3G(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())==false then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848658776))
else
if WM7(GetOwningPlayer(GetTriggerUnit()))then
if IsPointInRegion(UL4,GetSpellTargetX(),GetSpellTargetY()) then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
else
if IsPointInRegion(U64,GetSpellTargetX(),GetSpellTargetY()) then
call OD7(GetTriggerUnit())
call AV7(GetOwningPlayer(GetTriggerUnit()),GetObjectName(1848652633))
endif
endif
endif
endif
endif
return false
endfunction
function RK8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RK8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function W_G))
set U64=CreateRegion()
call RegionAddRect(U64,GD)
call RegionAddRect(U64,ND)
set UL4=CreateRegion()
call RegionAddRect(UL4,FD)
call RegionAddRect(UL4,OD)
set t=null
endfunction
function X4G takes unit CP7,unit X2E,real X7G,real X8G,real a2 returns nothing
local integer i=0
local real X9G
local real XDG=GetUnitY(X2E)
local real a
local real x
local real y
local real XEG
set LP4="IceBlockade_Surround"
if X2E!=null then
set X9G=GetUnitX(X2E)
set XDG=GetUnitY(X2E)
set a=MZ7(X7G,X8G,X9G,XDG)
else
set a=a2
set X9G=X7G+50*Cos(a*bj_DEGTORAD)
set XDG=X8G+50*Sin(a*bj_DEGTORAD)
endif
set XEG=a
set x=X9G+$C8*Cos(XEG*bj_DEGTORAD)
set y=XDG+$C8*Sin(XEG*bj_DEGTORAD)
call CE7(CreateDestructable(1110454326,x,y,-1*XEG,.6,1),5)
call BW7(x,y,300)
set XEG=a-40
set x=X9G+$C8*Cos(XEG*bj_DEGTORAD)
set y=XDG+$C8*Sin(XEG*bj_DEGTORAD)
call CE7(CreateDestructable(1110454326,x,y,-1*XEG,.6,1),5)
call BW7(x,y,300)
set XEG=a-80
set x=X9G+$C8*Cos(XEG*bj_DEGTORAD)
set y=XDG+$C8*Sin(XEG*bj_DEGTORAD)
call CE7(CreateDestructable(1110454326,x,y,-1*XEG,.6,1),5)
call BW7(x,y,300)
set XEG=a+40
set x=X9G+$C8*Cos(XEG*bj_DEGTORAD)
set y=XDG+$C8*Sin(XEG*bj_DEGTORAD)
call CE7(CreateDestructable(1110454326,x,y,-1*XEG,.6,1),5)
call BW7(x,y,300)
set XEG=a+80
set x=X9G+$C8*Cos(XEG*bj_DEGTORAD)
set y=XDG+$C8*Sin(XEG*bj_DEGTORAD)
call CE7(CreateDestructable(1110454326,x,y,-1*XEG,.6,1),5)
call BW7(x,y,300)
if X2E!=null then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",X2E,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",X2E,"chest"))
call D38(XH4,X2E,1,XJ4*70)
endif
endfunction
function XFG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),XK4)==false then
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO)==false then
call GroupAddUnit(XK4,GetEnumUnit())
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\ChainFreeze_F6.mdx",GetEnumUnit(),"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetEnumUnit(),"chest"))
call D38(XH4,GetEnumUnit(),1,XJ4*70)
else
set XI4=GetEnumUnit()
endif
endif
endfunction
function XGG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer C97=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(C97),(2)))
local unit X2E=(LoadUnitHandle(C7,(C97),(17)))
local unit XHG=(LoadUnitHandle(C7,(C97),(45)))
local real XIG=(LoadReal(C7,(C97),(683)))
local real XJG=(LoadReal(C7,(C97),(684)))
local real X7G=GetUnitX(XHG)
local real X8G=GetUnitY(XHG)
local real XKG=Atan2(XJG-X8G,XIG-X7G)
local real XMG=X7G+18*Cos(XKG)
local real XNG=X8G+18*Sin(XKG)
local group XOG=(LoadGroupHandle(C7,(C97),($85)))
local integer V8G=GetUnitAbilityLevel(CP7,1093753167)
local group g=ZI7()
set LP4="XGG"
set IM4=CP7
set XH4=CP7
set XK4=XOG
set XJ4=V8G
set XI4=null
call GroupEnumUnitsInRange(g,XMG,XNG,$E1,Condition(function LF7))
call ForGroup(g,function XFG)
call ZH7(g)
call SetUnitPosition(XHG,XMG,XNG)
if N67(XMG,XNG,XIG,XJG)<40 or XI4!=null then
call BW7(XMG,XNG,300)
call KillUnit(XHG)
call ShowUnit(XHG,false)
call SetUnitPathing(XHG,true)
if XI4!=null then
call X4G(CP7,XI4,XMG,XNG,XKG*bj_RADTODEG)
else
call X4G(CP7,null,XMG,XNG,XKG*bj_RADTODEG)
endif
call ZH7(XOG)
call FlushChildHashtable(C7,(C97))
call RN7(t)
endif
set t=null
set XHG=null
set XOG=null
set g=null
return false
endfunction
function XPG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer C97=GetHandleId(t)
local unit XHG=CreateUnit(GetOwningPlayer(CP7),1747993427,GetUnitX(CP7),GetUnitY(CP7),0)
local real X7G=GetUnitX(CP7)
local real X8G=GetUnitY(CP7)
local real X9G=GetSpellTargetX()
local real XDG=GetSpellTargetY()
local real XKG=Atan2(XDG-X8G,X9G-X7G)
local real XIG=AY7(X7G+$640*Cos(XKG))
local real XJG=AZ7(X8G+$640*Sin(XKG))
set LP4="XPG"
call SetUnitFacing(XHG,XKG*bj_RADTODEG)
call SetUnitPathing(XHG,false)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function XGG))
call SaveUnitHandle(C7,(C97),(2),(CP7))
call SaveReal(C7,(C97),(683),((XIG)*1.))
call SaveReal(C7,(C97),(684),((XJG)*1.))
call SaveReal(C7,(C97),($D),((XKG)*1.))
call SaveUnitHandle(C7,(C97),(45),(XHG))
call SaveGroupHandle(C7,(C97),($85),(ZI7()))
set CP7=null
set XHG=null
set t=null
endfunction
function XQG takes nothing returns boolean
if GetSpellAbilityId()==1093753167 then
call XPG()
endif
return false
endfunction
function RM8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RM8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XQG))
set t=null
endfunction
function XRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093753169)
local integer ZD8=GetTriggerEvalCount(t)
local real y=(ZD8-50)*(ZD8-50)/4.3
local real YU9
set LP4="XRG"
if DB8==1 then
set YU9=75
elseif DB8==2 then
set YU9=$96
else
set YU9=$E1
endif
if ZD8==1 then
call IssueTargetOrderById(CP7,$D000F,J67)
endif
if ZD8<50 then
if OCD(J67)==false then
call SetUnitFlyHeight(J67,700*ZD8/50,0)
endif
elseif ZD8<100 then
if OCD(J67)==false then
call SetUnitFlyHeight(J67,700-700*(ZD8-50)/50,0)
endif
else
if OCD(J67)==false then
call SetUnitFlyHeight(J67,GetUnitDefaultFlyHeight(J67),0)
endif
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call Q47(JZ7)
call RN7(t)
call CA7(J67,1093808180,1,1+DB8,1110459481)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093808180,false)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function XSG takes unit CP7,unit J67 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093753169)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="WalrusPunch_Launch"
call BO7("WALRUS PUNCH !!",3.5,CP7,.03,$FF,0,0,$FF)
call BY7(WX4,GetUnitX(J67),GetUnitY(J67))
call Z27(DA8,1093752144)
call IssueTargetOrderById(DA8,$D007F,J67)
if OCD(J67)==false then
call Z27(J67,1097691750)
call UnitRemoveAbility(J67,1097691750)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"head"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"left,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"right,hand"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",J67,"origin"))
call TriggerRegisterTimerEvent(t,.01,true)
call TriggerAddCondition(t,Condition(function XRG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",J67,"chest")))
set t=null
endfunction
function XTG takes nothing returns boolean
local trigger t2=GetTriggeringTrigger()
local integer MED=GetHandleId(t2)
local unit CP7=(LoadUnitHandle(C7,(MED),(2)))
local unit J67=(LoadUnitHandle(C7,(MED),(17)))
local integer WB7=GetHandleId(CP7)
local trigger t=Q67(WB7,"WalrusPunch|Clear")
set LP4="XTG"
if GetTriggerEvalCount(t2)==1 then
call IssueTargetOrderById(CP7,$D000F,J67)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 and GetEventDamage()>30 then
if J67==QA7(WB7,"WalrusPunch|Target")then
call CW7(CP7,1093752136,1,.1)
call CW7(CP7,1093752137,1,.1)
call XSG(CP7,J67)
if t!=null then
call TriggerEvaluate(t)
endif
endif
call RN7(t2)
call Q47(MED)
endif
else
call UnitRemoveAbility(CP7,1093752136)
call UnitRemoveAbility(CP7,1093752137)
call Q47(MED)
call RN7(t2)
endif
set t2=null
set t=null
set CP7=null
set J67=null
return false
endfunction
function XUG takes nothing returns boolean
local unit CP7=GetAttacker()
local unit J67=GetTriggerUnit()
local integer WB7=GetHandleId(CP7)
local trigger t=Q67(WB7,"WalrusPunch|Clear")
local trigger t2
local integer MED
set LP4="XUG"
if RG7(CP7,"WalrusPunch|Active") and t!=null and J67!=QA7(WB7,"WalrusPunch|Target")and IsUnitAlly(J67,GetOwningPlayer(CP7))==false and IsUnitType(J67,UNIT_TYPE_STRUCTURE)==false then
call QG7(WB7,"WalrusPunch|Target",J67)
call UnitRemoveAbility(CP7,1093752136)
call UnitRemoveAbility(CP7,1093752137)
if GetUnitState(J67,UNIT_STATE_LIFE)/GetUnitState(J67,UNIT_STATE_MAX_LIFE)>.5 then
call Z27(CP7,1093752136)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093752136,false)
else
call Z27(CP7,1093752137)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093752137,false)
endif
call IssueImmediateOrderById(CP7,$D0004)
set t2=CreateTrigger()
set MED=GetHandleId(t2)
call TriggerRegisterTimerEvent(t2,.0,false)
call TriggerRegisterTimerEvent(t2,2.,false)
call TriggerRegisterUnitEvent(t2,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t2,Condition(function XTG))
call SaveUnitHandle(C7,(MED),(2),(CP7))
call SaveUnitHandle(C7,(MED),(17),(J67))
endif
set CP7=null
set J67=null
return false
endfunction
function XVG takes nothing returns boolean
if RG7(GetAttacker(),"WalrusPunch|Active") then
call XUG()
endif
return false
endfunction
function XWG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer WB7=GetHandleId(CP7)
set LP4="XWG"
call RK7(CP7,"WalrusPunch|Active")
call DestroyEffect(Q17(WB7,"WalrusPunch|Visual"))
call UnitRemoveAbility(CP7,1093752136)
call UnitRemoveAbility(CP7,1093752137)
call Q77(WB7,"WalrusPunch|Visual")
call Q77(WB7,"WalrusPunch|Target")
call Q77(WB7,"WalrusPunch|Clear")
call Q47(JZ7)
call RN7(t)
set CP7=null
set t=null
return false
endfunction
function XXG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local integer WB7=GetHandleId(CP7)
set LP4="XXG"
call TriggerRegisterTimerEvent(t,10.,false)
call TriggerAddCondition(t,Condition(function XWG))
call RI7(CP7,"WalrusPunch|Active")
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call QG7(WB7,"WalrusPunch|Target",CP7)
call QH7(WB7,"WalrusPunch|Visual",(AddSpecialEffectTarget("war3mapImported\\WalrusPunchWeaponFX.mdx",CP7,"weapon")))
call QI7(WB7,"WalrusPunch|Clear",t)
set t=null
set CP7=null
endfunction
function XYG takes nothing returns boolean
if GetSpellAbilityId()==1093753169 then
call XXG()
endif
return false
endfunction
function RN8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RN8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function XYG))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function XVG))
set t=null
endfunction
function XZG takes nothing returns nothing
call ShowUnit(GetEnumUnit(),true)
call UnitRemoveAbility(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),false)
call PauseUnit(GetEnumUnit(),false)
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
call SetUnitPosition(GetEnumUnit(),XR4,XS4)
call SelectUnitForPlayerSingle(GetEnumUnit(),GetOwningPlayer(GetEnumUnit()))
else
call SetUnitX(GetEnumUnit(),XR4)
call SetUnitY(GetEnumUnit(),XS4)
endif
if GetEnumUnit()==XN4 and XO4!=null then
call IssueTargetOrderById(XN4,$D000F,XO4)
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
endfunction
function XAG takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),XM4)==false then
call GroupAddUnit(XM4,GetEnumUnit())
if GetEnumUnit()==XO4 then
call D38(XN4,GetEnumUnit(),1,40*XQ4+40)
call SetUnitAbilityLevel(XP4,1093687350,DX8(.25*XQ4+.25))
else
call D38(XN4,GetEnumUnit(),1,40*XQ4)
call SetUnitAbilityLevel(XP4,1093687350,DX8(.25*XQ4))
endif
call SetUnitX(XP4,GetUnitX(GetEnumUnit()))
call SetUnitY(XP4,GetUnitY(GetEnumUnit()))
call IssueTargetOrderById(XP4,$D007F,GetEnumUnit())
endif
endfunction
function XBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real BC7=GetUnitX(J67)
local real B37=GetUnitY(J67)
local real r=(LoadReal(C7,(JZ7),(671)))
local real a=MZ7(GetUnitX(BB7),GetUnitY(BB7),BC7,B37)*bj_DEGTORAD
local real x=GetUnitX(BB7)+r*Cos(a)
local real y=GetUnitY(BB7)+r*Sin(a)
local group XOG=(LoadGroupHandle(C7,(JZ7),($85)))
local group g
local integer ZD8=GetTriggerEvalCount(t)
local real YWE=RMinBJ(2.5+(ZD8*.02),$A)
local real XCG=$E1+40*(ZD8*.02)
set LP4="XBG"
set XQ4=GetUnitAbilityLevel(CP7,1093751607)
set IM4=CP7
set XM4=XOG
set XN4=CP7
set XO4=J67
set XP4=(LoadUnitHandle(C7,(JZ7),(19)))
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
call SetUnitFacing(BB7,a*bj_RADTODEG-$B4)
call SetUnitScale(BB7,YWE,YWE,YWE)
if N67(x,y,BC7,B37)<r*2 or ZD8==$96 then
call BW7(x,y,300)
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,XCG,Condition(function LF7))
call ForGroup(g,function XAG)
call ZH7(g)
set g=null
set XR4=x
set XS4=y
call ForGroup((LoadGroupHandle(C7,(JZ7),(22))),function XZG)
call ZH7((LoadGroupHandle(C7,(JZ7),(22))))
call ZH7(XOG)
call KillUnit(BB7)
call Q47(JZ7)
call RN7(t)
else
if ModuloInteger(GetTriggerEvalCount(t),5)==0 then
call BW7(x,y,300)
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,XCG,Condition(function LF7))
call ForGroup(g,function XAG)
call ZH7(g)
set g=null
endif
endif
set t=null
set CP7=null
set BB7=null
set XOG=null
return false
endfunction
function X3G takes nothing returns nothing
call DestroyEffect(AddSpecialEffect("war3mapImported\\ChainFreeze_F6.mdx",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit())))
call ShowUnit(GetEnumUnit(),false)
call Z27(GetEnumUnit(),1093678162)
call SetUnitInvulnerable(GetEnumUnit(),true)
call PauseUnit(GetEnumUnit(),true)
if XN4!=GetEnumUnit()then
set XU4=XU4+1
endif
endfunction
function X6G takes nothing returns boolean
return(((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO) and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetFilterUnit()))==false and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))or(GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit())and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit()))))and((LoadBoolean(C7,(GetHandleId(GetOwningPlayer(GetFilterUnit()))),($8B)))==false or XN4==GetFilterUnit()))!=null
endfunction
function XLG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit X2E=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer C97=GetHandleId(t)
local real X7G=GetUnitX(CP7)
local real X8G=GetUnitY(CP7)
local real X9G=GetUnitX(X2E)
local real XDG=GetUnitY(X2E)
local real a=MZ7(X7G,X8G,X9G,XDG)*bj_DEGTORAD
local unit X1G=CreateUnit(GetOwningPlayer(CP7),1747993395,GetUnitX(CP7),GetUnitY(CP7),GetUnitFacing(CP7))
local group g=ZI7()
set LP4="XLG"
set XT4=0
set XU4=1
set XN4=CP7
set XT4=1.5*RMaxBJ($85,GetUnitMoveSpeed(CP7))
call GroupEnumUnitsInRange(g,X7G,X8G,$FF,Condition(function X6G))
call ForGroup(g,function X3G)
set XP4=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call Z27(XP4,1093687350)
call SetUnitTimeScale(X1G,2)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function XBG))
call SaveUnitHandle(C7,(C97),(2),(CP7))
call SaveUnitHandle(C7,(C97),(17),(X2E))
call SaveUnitHandle(C7,(C97),(19),(XP4))
call SaveUnitHandle(C7,(C97),(45),(X1G))
call SaveReal(C7,(C97),($89),((a)*1.))
call SaveReal(C7,(C97),(671),((XT4*.02)*1.))
call SaveReal(C7,(C97),(47),((X9G)*1.))
call SaveReal(C7,(C97),(48),((XDG)*1.))
call SaveGroupHandle(C7,(C97),(22),(g))
call SaveGroupHandle(C7,(C97),($85),(ZI7()))
set t=null
set CP7=null
set X1G=null
set g=null
endfunction
function X0G takes nothing returns boolean
if GetSpellAbilityId()==1093751607 then
call XLG()
endif
return false
endfunction
function RO8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RO8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function X0G))
call AC7(1093687350)
set t=null
endfunction
function X5G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer C97=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(C97),(2)))
local unit X2E=(LoadUnitHandle(C7,(C97),(17)))
set LP4="X5G"
call Q47(C97)
call RN7(t)
call IssueTargetOrderById(CP7,$D0012,X2E)
set t=null
set CP7=null
set X2E=null
return false
endfunction
function X2G takes nothing returns nothing
local unit CP7=GetSummonedUnit()
local unit X2E=GetSummoningUnit()
local trigger t=CreateTrigger()
local integer C97=GetHandleId(t)
set LP4="X2G"
call TriggerAddCondition(t,Condition(function X5G))
call TriggerRegisterTimerEvent(t,.2,false)
call SaveUnitHandle(C7,(C97),(2),(CP7))
call SaveUnitHandle(C7,(C97),(17),(X2E))
set t=null
set CP7=null
set X2E=null
endfunction
function X_G takes nothing returns boolean
local integer id=GetUnitTypeId(GetSummonedUnit())
set LP4="X_G"
if id==1865429322 or id==1865429323 or id==1865429324 or id==1865429325 then
call X2G()
endif
return false
endfunction
function RP8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RP8"
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function X_G))
endfunction
function Y4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
set LP4="Y4G"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set YJ4=GetEventDamageSource()
else
call SetUnitX(CP7,GetUnitX(J67))
call SetUnitY(CP7,GetUnitY(J67))
call SetUnitX(DA8,GetUnitX(J67))
call SetUnitY(DA8,GetUnitY(J67))
endif
set t=null
set CP7=null
set J67=null
set DA8=null
return false
endfunction
function Y7G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="Y7G"
if GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set YJ4=GetEventDamageSource()
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function Y8G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetSummoningUnit()
local unit J67=GetSummonedUnit()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
set LP4="Y8G"
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Y4G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
if PD7(CP7,1227899192)then
call UnitAddAbility(DA8,1093678153)
endif
set t=null
set CP7=null
set J67=null
set DA8=null
endfunction
function Y9G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetSummoningUnit()
local unit J67=GetSummonedUnit()
set LP4="Y9G"
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function Y7G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set CP7=null
set J67=null
endfunction
function YDG takes nothing returns boolean
local integer XZ7=GetUnitTypeId(GetSummonedUnit())
set LP4="YDG"
if XZ7==1852862003 or XZ7==1852862006 or XZ7==1848652080 or XZ7==1848657754 then
call Y8G()
elseif YI7(XZ7)then
call Y9G()
endif
return false
endfunction
function RR8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RR8"
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function YDG))
set t=null
endfunction
function YEG takes nothing returns nothing
call DZ8(ZE4,GetEnumUnit(),.75+.25*GetUnitAbilityLevel(ZE4,1093809990))
endfunction
function YFG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local real LN9=(LoadReal(C7,(JZ7),($BD)))
local real LO9=(LoadReal(C7,(JZ7),($BE)))
local group g
local real d=N67(LN9,LO9,BC7,B37)/25
local location l
local integer ZD8=GetTriggerEvalCount(t)
local real x=LN9+d*ZD8*Cos(a)
local real y=LO9+d*ZD8*Sin(a)
set LP4="YFG"
call SetUnitX(J67,AY7(x))
call SetUnitY(J67,AZ7(y))
if OCD(J67)==false then
call SetUnitFlyHeight(J67,325-$D*ZD8,0)
endif
if ZD8==25 then
call SetUnitX(J67,AY7(BC7))
call SetUnitY(J67,AZ7(B37))
if IsPointInRegion(IT4,GetUnitX(J67),GetUnitY(J67)) then
set l=BS8(GetUnitX(J67),GetUnitY(J67))
call SetUnitX(J67,AA7(GetLocationX(l)))
call SetUnitY(J67,AB7(GetLocationY(l)))
call RemoveLocation(l)
set l=null
endif
set IM4=CP7
set ZE4=CP7
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),350,Condition(function LF7))
call GroupRemoveUnit(g,J67)
call ForGroup(g,function YEG)
call ZH7(g)
call BW7(GetUnitX(J67),GetUnitY(J67),$96)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(J67),GetUnitY(J67)))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if OCD(J67)==false then
call SetUnitFlyHeight(J67,GetUnitDefaultFlyHeight(J67),0)
endif
call SetUnitPathing(J67,true)
endif
set t=null
set CP7=null
set J67=null
set g=null
return false
endfunction
function YGG takes unit CP7,unit J67,unit Target2,real YHG,real YIG,effect FX,effect YJG returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real BC7=YHG
local real B37=YIG
local real a=MZ7(GetUnitX(J67),GetUnitY(J67),YHG,YIG)*bj_DEGTORAD
set LP4="Telekinesis_Push"
if N67(GetUnitX(J67),GetUnitY(J67),YHG,YIG)>375 then
set BC7=GetUnitX(J67)+375*Cos(a)
set B37=GetUnitY(J67)+375*Sin(a)
endif
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
call SaveReal(C7,(JZ7),($BD),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),($BE),((GetUnitY(J67))*1.))
call SaveEffectHandle(C7,(JZ7),(32),(FX))
call SaveEffectHandle(C7,(JZ7),($B0),(YJG))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function YFG))
set t=null
endfunction
function YKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local integer B59=(LoadInteger(C7,(JZ7),($C)))
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local integer YMG=(LoadInteger(C7,(JZ7),(706)))
local real a
set LP4="YKG"
if GetTriggerEventId()==EVENT_WIDGET_DEATH or(GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and BI8(J67)==false)then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810008,false)
call YGG(CP7,J67,(LoadUnitHandle(C7,(JZ7),(711))),BC7,B37,(LoadEffectHandle(C7,(JZ7),(32))),(LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093810008 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
set a=MZ7(GetUnitX(J67),GetUnitY(J67),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
if N67(GetUnitX(J67),GetUnitY(J67),GetSpellTargetX(),GetSpellTargetY())>375 then
set BC7=GetUnitX(J67)+375*Cos(a)
set B37=GetUnitY(J67)+375*Sin(a)
else
set BC7=GetSpellTargetX()
set B37=GetSpellTargetY()
endif
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",BC7,B37)))
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
call SaveUnitHandle(C7,(JZ7),(711),(GetSpellTargetUnit()))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetSpellTargetUnit(),"origin")))
endif
else
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
call SetUnitPathing(J67,false)
if(LoadInteger(C7,(JZ7),(707)))==1 then
set YMG=YMG+3
else
set YMG=YMG-3
endif
call SaveInteger(C7,(JZ7),(706),(YMG))
if YMG==30 then
call SaveInteger(C7,(JZ7),(707),(-1))
elseif YMG==-30 then
call SaveInteger(C7,(JZ7),(707),(1))
endif
if OCD(J67)==false then
if ZD8<$F then
call SetUnitFlyHeight(J67,ZD8*20,0)
else
call SetUnitFlyHeight(J67,300+YMG,0)
endif
endif
if ZD8>(B59-25)then
if OCD(J67)==false then
call SetUnitFlyHeight(J67,300,0)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809990,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810008,false)
call YGG(CP7,J67,(LoadUnitHandle(C7,(JZ7),(711))),BC7,B37,(LoadEffectHandle(C7,(JZ7),(32))),(LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function YNG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093809990)
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
set LP4="YNG"
call UnitAddAbility(DA8,1093810226)
call SetUnitAbilityLevel(DA8,1093810226,DB8)
call IssueTargetOrderById(DA8,$D007F,J67)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093809990,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810008,true)
call UnitAddAbility(CP7,1093810008)
call SetUnitPathing(J67,false)
if OCD(J67)==false then
call Z27(J67,1097691750)
call UnitRemoveAbility(J67,1097691750)
endif
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(711),(J67))
call SaveInteger(C7,(JZ7),($C),(R2I((1.25+.25*DB8)/.02)))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveInteger(C7,(JZ7),(706),(0))
call SaveInteger(C7,(JZ7),(707),(1))
call SaveReal(C7,(JZ7),(47),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(48),((GetUnitY(J67))*1.))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\AntiGravityTarget.mdx",J67,"origin")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffect("Abilities\\Spells\\Other\\GeneralAuraTarget\\GeneralAuraTarget.mdl",GetUnitX(J67),GetUnitY(J67))))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YKG))
set CP7=null
set J67=null
endfunction
function YOG takes nothing returns boolean
if GetSpellAbilityId()==1093809990 and ZG7(GetSpellTargetUnit())==false then
call YNG()
endif
return false
endfunction
function RS8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RS8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YOG))
call AC7(1093687350)
call AC7(1093810226)
set t=null
endfunction
function YPG takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093809991)
set LP4="FadeBolt_Hit"
if IsUnitType(J67,UNIT_TYPE_HERO) then
if DB8==1 then
call CW7(J67,1093810007,1,$A)
elseif DB8==2 then
call CW7(J67,1093810230,1,$A)
elseif DB8==3 then
call CW7(J67,1093810229,1,$A)
elseif DB8==4 then
call CW7(J67,1093810231,1,$A)
endif
else
if DB8==1 then
call CW7(J67,1093810481,1,$A)
elseif DB8==2 then
call CW7(J67,1093810266,1,$A)
elseif DB8==3 then
call CW7(J67,1093810482,1,$A)
elseif DB8==4 then
call CW7(J67,1093810480,1,$A)
endif
endif
call BY7(YL4,GetUnitX(J67),GetUnitY(J67))
endfunction
function YQG takes nothing returns nothing
local real d
set LP4="YQG"
if IsUnitInGroup(GetEnumUnit(),ZH4)==false then
set d=N37(GetEnumUnit(),ZG4)
if d<ZI4 then
set ZI4=d
set ZF4=GetEnumUnit()
endif
endif
endfunction
function YRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local real x=GetUnitX(J67)
local real y=GetUnitY(J67)
local group g=ZI7()
set LP4="YRG"
call GroupAddUnit(DND,J67)
call YPG(CP7,J67)
set IM4=CP7
set ZF4=null
set ZG4=J67
set ZH4=DND
set ZI4=$F423F
call GroupEnumUnitsInRange(g,x,y,440+25,Condition(function LL7))
call ForGroup(g,function YQG)
call ZH7(g)
if ZF4==null or GetTriggerEvalCount(t)>26 then
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set J67=ZF4
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
set g=null
set t=null
set CP7=null
set J67=null
set DND=null
return false
endfunction
function YSG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local group DND=ZI7()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),GetUnitFacing(CP7))
set LP4="YSG"
call BY7(YL4,GetUnitX(CP7),GetUnitY(CP7))
call Z27(DA8,1093810228)
call SetUnitAbilityLevel(DA8,1093810228,GetUnitAbilityLevel(CP7,1093809991))
call IssueTargetOrderById(DA8,$D0097,J67)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveGroupHandle(C7,(JZ7),($BB),(DND))
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerAddCondition(t,Condition(function YRG))
set CP7=null
set J67=null
set t=null
set DA8=null
endfunction
function YTG takes nothing returns boolean
if GetSpellAbilityId()==1093809991 and ZG7(GetSpellTargetUnit())==false then
call YSG()
endif
return false
endfunction
function RT8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RT8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YTG))
set t=null
endfunction
function YUG takes nothing returns boolean
if IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 then
if GetLearnedSkill()==1093809990 then
call UnitRemoveAbility(GetTriggerUnit(),1093809993)
elseif GetLearnedSkill()==1093809991 then
call UnitRemoveAbility(GetTriggerUnit(),1093809995)
elseif GetLearnedSkill()==1093810006 then
call UnitRemoveAbility(GetTriggerUnit(),1093809994)
endif
endif
return false
endfunction
function YVG takes integer id returns nothing
set ZJ4[ZK4]=id
set ZK4=ZK4+1
endfunction
function YWG takes integer id returns boolean
local integer i=0
set LP4="SpellSteal_IsBlocked"
loop
exitwhen i==ZK4
if id==ZJ4[i]then
return true
endif
set i=i+1
endloop
return false
endfunction
function YXG takes nothing returns boolean
local integer i1=GetSpellAbilityId()
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) and YWG(i1)==false then
call SaveInteger(C7,(GetHandleId(GetTriggerUnit())),(705),(i1))
call SaveInteger(C7,(GetHandleId(GetTriggerUnit())),(712),(GetUnitAbilityLevel(GetTriggerUnit(),i1)))
endif
return false
endfunction
function YYG takes unit u returns nothing
call UnitRemoveAbility(u,1093743428)
call UnitRemoveAbility(u,1093815881)
call UnitRemoveAbility(u,1093751126)
call UnitRemoveAbility(u,1093751893)
call UnitRemoveAbility(u,1093809217)
call UnitRemoveAbility(u,1093809218)
call UnitRemoveAbility(u,1093750344)
call UnitRemoveAbility(u,1093808206)
call UnitRemoveAbility(u,1093753394)
call UnitRemoveAbility(u,1093753395)
call UnitRemoveAbility(u,1093808181)
call UnitRemoveAbility(u,1093752405)
call UnitRemoveAbility(u,1093683011)
call UnitRemoveAbility(u,1093809221)
call UnitRemoveAbility(u,1093685844)
call UnitRemoveAbility(u,1093751361)
call UnitRemoveAbility(u,1093683265)
call UnitRemoveAbility(u,1093686081)
call UnitRemoveAbility(u,1093743153)
call UnitRemoveAbility(u,1093752646)
call UnitRemoveAbility(u,1093677652)
call UnitRemoveAbility(u,1093751609)
call UnitRemoveAbility(u,1093808456)
call UnitRemoveAbility(u,1093750094)
call UnitRemoveAbility(u,1093678667)
call UnitRemoveAbility(u,1093684805)
call UnitRemoveAbility(u,1093684560)
call UnitRemoveAbility(u,1093815618)
endfunction
function YZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer YAG=(LoadInteger(C7,(JZ7),(704)))
local integer YBG=(LoadInteger(C7,(JZ7),(713)))
set LP4="YZG"
if YAG==(LoadInteger(C7,(GetHandleId(CP7)),(704)))then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEvalCount(t)>($F-YBG)and A47(CP7)==false then
call UnitRemoveAbility(CP7,YAG)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function YCG takes unit CP7,integer YAG,real CS8 returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set LP4="SpellSteal_DelayRemove"
call TriggerRegisterTimerEvent(t,1.,true)
call TriggerAddCondition(t,Condition(function YZG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(704),(YAG))
call SaveInteger(C7,(GetHandleId(CP7)),(704),(-1))
call SaveInteger(C7,(JZ7),(713),(R2I((TimerGetElapsed(V))-CS8)))
set t=null
endfunction
function Y3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer YAG=(LoadInteger(C7,(JZ7),(704)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local integer DB8=GetUnitAbilityLevel(CP7,1093809992)
local real CS8=(LoadReal(C7,(JZ7),(411)))
set LP4="Y3G"
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT and GetTriggerEventId()!=EVENT_WIDGET_DEATH then
if ZD8==0 then
call SaveInteger(C7,(JZ7),(34),(1))
call DisplayTimedTextToPlayer(GetOwningPlayer(CP7),0,0,$A,"|c00ff0303"+GetObjectName(1848659031)+"|r")
else
call YYG(CP7)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),YAG,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call YCG(CP7,YAG,CS8)
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093809992 then
call YYG(CP7)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),YAG,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call YCG(CP7,YAG,CS8)
elseif GetSpellAbilityId()==YAG then
call SaveReal(C7,(JZ7),(411),(((TimerGetElapsed(V)))*1.))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH then
call YYG(CP7)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),YAG,false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call YCG(CP7,YAG,CS8)
endif
set t=null
set CP7=null
return false
endfunction
function Y6G takes nothing returns nothing
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer YAG=(LoadInteger(C7,(JZ7),(704)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real YLG=60*(2+GetUnitAbilityLevel(CP7,1093809992))
local integer Y1G=GetHandleId(CP7)
local integer Y0G=GetHandleId(J67)
set LP4="Y6G"
if(R47(Y0G,"WexLevel"))>0 then
call Q97(Y1G,"WexLevel",(R47(Y0G,"WexLevel")))
endif
if(R47(Y0G,"QuasLevel"))>0 then
call Q97(Y1G,"QuasLevel",(R47(Y0G,"QuasLevel")))
endif
if(R47(Y0G,"ExortLevel"))>0 then
call Q97(Y1G,"ExortLevel",(R47(Y0G,"ExortLevel")))
endif
if(LoadInteger(C7,(GetHandleId(J67)),(710)))>0 then
call SaveInteger(C7,(GetHandleId(CP7)),(710),((LoadInteger(C7,(GetHandleId(J67)),(710)))))
endif
call BY7(YC4,GetUnitX(CP7),GetUnitY(CP7))
call BO7(GetObjectName(YAG),3.5,CP7,.024,$AA,0,$FF,$D8)
call SaveInteger(C7,(GetHandleId(CP7)),(704),(YAG))
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),YAG,true)
call Z27(CP7,YAG)
call SetUnitAbilityLevel(CP7,YAG,DB8)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveInteger(C7,(JZ7),(704),(YAG))
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,YLG,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterTimerEvent(t,YLG-20,false)
call TriggerAddCondition(t,Condition(function Y3G))
if WQ7(GetOwningPlayer(CP7))then
call PZF(CP7,YAG,J67)
endif
set t=null
set CP7=null
set J67=null
endfunction
function Y5G takes unit CP7,unit J67,integer YAG,integer DB8 returns nothing
local trigger t=B27(J67,CP7,1747993666,"Y6G",900)
local integer JZ7=GetHandleId(t)
set LP4="SpellSteal_Steal"
call BY7(YB4,GetUnitX(J67),GetUnitY(J67))
call BO7(GetObjectName(YAG),3.75,J67,.024,$AA,0,$FF,$D8)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(704),(YAG))
call SaveInteger(C7,(JZ7),(5),(DB8))
set t=null
endfunction
function Y2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
set LP4="Y2G"
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if YWG(GetSpellAbilityId()) then
else
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function Y_G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
set LP4="Y_G"
if(LoadInteger(C7,(GetHandleId(J67)),(705)))!=0 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Nebula.mdx",J67,"origin"))
call Y5G(CP7,J67,(LoadInteger(C7,(GetHandleId(J67)),(705))),(LoadInteger(C7,(GetHandleId(J67)),(712))))
endif
set CP7=null
set J67=null
endfunction
function Z4G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local string fx=""
set LP4="Z4G"
if IsPlayerAlly(GetOwningPlayer(CP7),GetLocalPlayer())or Y27(GetLocalPlayer())then
set fx="war3mapImported\\Nebula.mdx"
endif
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget(fx,J67,"origin")))
call TriggerRegisterTimerEvent(t,20,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Y2G))
set CP7=null
set J67=null
endfunction
function Z7G takes nothing returns boolean
if GetSpellAbilityId()==1093809992 and ZG7(GetSpellTargetUnit())==false then
call Y_G()
endif
return false
endfunction
function Z8G takes nothing returns nothing
call YVG(1093752648)
call YVG(1095656306)
call YVG(1093677895)
call YVG(1093679411)
call YVG(1093743946)
call YVG(1093681479)
call YVG(1093681733)
call YVG(1093751896)
call YVG(1093808697)
call YVG(1093751369)
call YVG(1093747504)
call YVG(1093742932)
call YVG(1093744986)
call YVG(1093815877)
call YVG(1093743428)
call YVG(1093815881)
call YVG(1093751126)
call YVG(1093751893)
call YVG(1093809217)
call YVG(1093809218)
call YVG(1093750344)
call YVG(1093808206)
call YVG(1093753394)
call YVG(1093753395)
call YVG(1093808181)
call YVG(1093752405)
call YVG(1093683011)
call YVG(1093809221)
call YVG(1093685844)
call YVG(1093751361)
call YVG(1093683265)
call YVG(1093686081)
call YVG(1093743153)
call YVG(1093752646)
call YVG(1093677652)
call YVG(1093751609)
call YVG(1093808456)
call YVG(1093750094)
call YVG(1093684056)
call YVG(1093684055)
call YVG(1093681461)
call YVG(1093681735)
call YVG(1093808471)
call YVG(1093808472)
call YVG(1093808470)
call YVG(1093808473)
call YVG(1093748565)
call YVG(1093752392)
call YVG(1093752391)
call YVG(1093815600)
call YVG(1093815618)
call YVG(1093677625)
call YVG(1093816121)
call YVG(1093685582)
call YVG(1093677622)
call YVG(1095263841)
call YVG(1093679446)
call YVG(1093682265)
call YVG(1093752642)
call YVG(1093684314)
call YVG(1093685065)
call YVG(1093750337)
call YVG(1093748033)
call YVG(1093684819)
call YVG(1093747777)
call YVG(1093810257)
call YVG(1093687121)
call YVG(1093751864)
call YVG(1093742674)
call YVG(1093742926)
call YVG(1093682521)
call YVG(1093682760)
call YVG(1093686859)
call YVG(1093686865)
call YVG(1093678899)
call YVG(1093677898)
call YVG(1093678154)
call YVG(1093678157)
call YVG(1093678158)
call YVG(1093809990)
call YVG(1093810008)
call YVG(1093809991)
call YVG(1093809992)
call YVG(1093685557)
call YVG(1093686347)
call YVG(1095328363)
call YVG(1093683801)
call YVG(1093747011)
call YVG(1095331948)
call YVG(1095331954)
call YVG(1097163124)
call YVG(1093684016)
call YVG(1093683255)
call YVG(1093683254)
call YVG(1093682767)
call YVG(1093677656)
call YVG(1095332727)
call YVG(1095332962)
call YVG(1093681718)
call YVG(1093751349)
call YVG(1093808182)
call YVG(1093748292)
call YVG(1093748303)
call YVG(1093748305)
call YVG(1093749071)
call YVG(1093681720)
call YVG(1093752645)
call YVG(1093686328)
call YVG(1093686327)
call YVG(1093677367)
call YVG(1093751108)
call YVG(1093748304)
call YVG(1093683788)
call YVG(1094935400)
call YVG(1095333995)
call YVG(1095331943)
call YVG(1093742918)
call YVG(1093742917)
call YVG(1093686067)
call YVG(1093742916)
call YVG(1093742919)
call YVG(1093742920)
call YVG(1093686329)
call YVG(1093743959)
call YVG(1094936696)
call YVG(1093682756)
call YVG(1093686341)
call YVG(1093751863)
call YVG(1093744973)
call YVG(1093677647)
call YVG(1093679193)
call YVG(1093679194)
call YVG(1093679408)
call YVG(1093679410)
call YVG(1093683266)
call YVG(1093682227)
call YVG(1093682246)
call YVG(1093677655)
call YVG(1093681995)
call YVG(1093684023)
call YVG(1093683796)
call YVG(1095328865)
call YVG(1093809721)
call YVG(1093752655)
call YVG(1093748055)
call YVG(1093750095)
call YVG(1093753417)
call YVG(1093753416)
call YVG(1093753431)
call YVG(1093808945)
call YVG(1093743191)
call YVG(1093743681)
call YVG(1093751096)
call YVG(1093810265)
call YVG(1093810244)
call YVG(1093810246)
call YVG(1093815857)
call YVG(1093814863)
call YVG(1093814865)
call YVG(1093814864)
call YVG(1093814866)
call YVG(1093814860)
call YVG(1093813848)
call YVG(1093815089)
call YVG(1093815092)
call YVG(1093815095)
call YVG(1093815111)
call YVG(1093815109)
call YVG(1093815112)
call YVG(1093815097)
call YVG(1093813569)
call YVG(1093751349)
call YVG(1093743415)
endfunction
function RU8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RU8"
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z7G))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function YXG))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function YUG))
set t=null
call Z8G()
endfunction
function Z9G takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810001)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810002)
endif
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)>0 then
call UnitRemoveAbility(GetEnumUnit(),1093810004)
endif
endfunction
function ZDG takes nothing returns nothing
if BP8(GetEnumUnit())then
return
endif
if ZM4==1 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810003)==0 then
call Z27(GetEnumUnit(),1093810003)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810003,false)
endif
elseif ZM4==2 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810001)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call Z27(GetEnumUnit(),1093810001)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810001,false)
endif
elseif ZM4==3 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810002)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call Z27(GetEnumUnit(),1093810002)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810002,false)
endif
elseif ZM4==4 then
if GetUnitAbilityLevel(GetEnumUnit(),1093810004)==0 then
call UnitRemoveAbility(GetEnumUnit(),1093810003)
call UnitRemoveAbility(GetEnumUnit(),1093810001)
call UnitRemoveAbility(GetEnumUnit(),1093810002)
call Z27(GetEnumUnit(),1093810004)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetEnumUnit()),1093810004,false)
endif
endif
endfunction
function ZEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local group LID=(LoadGroupHandle(C7,(JZ7),(340)))
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local group g=ZI7()
set LP4="ZEG"
if CP7==null or GetUnitTypeId(CP7)!=1160786520 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call ForGroup(LID,function Z9G)
call ZH7(LID)
call ZH7(g)
return false
endif
set IM4=CP7
set ZM4=GetUnitAbilityLevel(CP7,1093810006)
if A47(CP7)==false then
call GroupEnumUnitsInRange(g,x,y,925,Condition(function D78))
endif
call GroupRemoveGroup(g,LID)
call ForGroup(LID,function Z9G)
if A47(CP7)==false then
call ForGroup(g,function ZDG)
endif
call SaveGroupHandle(C7,(JZ7),(340),(g))
call ZH7(LID)
set t=null
set CP7=null
set LID=null
set g=null
return false
endfunction
function ZFG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local integer i
local player p
set LP4="ZFG"
call TriggerRegisterTimerEvent(t,.3,true)
call TriggerAddCondition(t,Condition(function ZEG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveGroupHandle(C7,(JZ7),(340),(ZI7()))
set i=0
loop
exitwhen i>5
set p=Y7[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set p=Z7[i]
call SetPlayerAbilityAvailable(p,1093810003,false)
call SetPlayerAbilityAvailable(p,1093810001,false)
call SetPlayerAbilityAvailable(p,1093810002,false)
call SetPlayerAbilityAvailable(p,1093810004,false)
set i=i+1
endloop
set t=null
set CP7=null
endfunction
function ZGG takes nothing returns boolean
if GetLearnedSkill()==1093810006 and GetUnitAbilityLevel(GetTriggerUnit(),1093810006)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call ZFG()
endif
return false
endfunction
function RV8 takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="RV8"
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function ZGG))
set t=null
endfunction
function ZHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
set LP4="ZHG"
call AddUnitAnimationProperties(CP7,"alternate",false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function ZIG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function ZHG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function ZJG takes nothing returns boolean
if(GetSpellAbilityId()==1093678899 or GetSpellAbilityId()==1093677898 or GetSpellAbilityId()==1093678154 or GetSpellAbilityId()==1093678157 or GetSpellAbilityId()==1093678158)and GetUnitTypeId(GetTriggerUnit())==1160786520 then
call ZIG()
endif
return false
endfunction
function RW8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZJG))
set t=null
endfunction
function ZKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093810518)
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093810519 then
call UnitRemoveAbility(CP7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810519,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810518,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call DZ8(CP7,J67,.5+.5*DB8)
call SetUnitX(CP7,GetUnitX(J67))
call SetUnitY(CP7,GetUnitY(J67))
call IssueTargetOrderById(CP7,$D000F,J67)
call UnitShareVision(J67,GetOwningPlayer(CP7),false)
endif
else
call UnitRemoveAbility(CP7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810519,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810518,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call UnitShareVision(J67,GetOwningPlayer(CP7),false)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function ZMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEvalCount(GetTriggeringTrigger())>30 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call BW8(CP7)
endif
set t=null
set CP7=null
return false
endfunction
function ZNG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local integer DB8=GetUnitAbilityLevel(CP7,1093810518)
if ZD8>60 then
call UnitRemoveAbility(CP7,1110459734)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>100 and IsUnitType(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false then
call BE7(CP7,GetEventDamage())
set J67=G7[GetPlayerId(GetOwningPlayer(GetEventDamageSource()))]
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call BW8(CP7)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if A47(J67)==false then
call UnitShareVision(J67,GetOwningPlayer(CP7),true)
call Z27(CP7,1093810519)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810519,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093810518,false)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function ZKG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",CP7,"origin")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\RetaliationTarget.mdx",J67,"origin")))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function ZMG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
endif
endif
else
call SaveInteger(C7,(JZ7),(34),(ZD8+1))
endif
set t=null
set CP7=null
return false
endfunction
function ZOG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function ZNG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(0))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\RetaliationShield.mdx",CP7,"chest")))
set CP7=null
set t=null
endfunction
function ZPG takes nothing returns boolean
if GetSpellAbilityId()==1093810518 then
call ZOG()
endif
return false
endfunction
function Register_Retaliation takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZPG))
set t=null
endfunction
function ZQG takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedDamage.mdl",GetEnumUnit(),"chest"))
call D38(DP7,GetEnumUnit(),1,(25+5*DQ7)/5)
endfunction
function ZRG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093814355)
local group g
if GetUnitAbilityLevel(CP7,1110459984)==0 and GetUnitAbilityLevel(CP7,1110459985)==0 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093814327)
call UnitRemoveAbility(CP7,1110459983)
call UnitRemoveAbility(CP7,1093814616)
call UnitRemoveAbility(CP7,1093814615)
call UnitRemoveAbility(CP7,1093814614)
call UnitRemoveAbility(CP7,1093814617)
else
set IM4=CP7
set DP7=CP7
set DQ7=DB8
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),400+25,Condition(function LF7))
call ForGroup(g,function ZQG)
call ZH7(g)
endif
set g=null
set t=null
set CP7=null
return false
endfunction
function ZSG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093814355)
call UnitAddAbility(DA8,1093814325)
call SetUnitAbilityLevel(DA8,1093814325,DB8)
call IssueTargetOrderById(DA8,$D00DA,CP7)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function ZRG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\FlameGuard.mdx",CP7,"origin")))
if DB8==1 then
elseif DB8==2 then
elseif DB8==3 then
elseif DB8==4 then
endif
set CP7=null
set DA8=null
set t=null
endfunction
function ZTG takes nothing returns boolean
if GetSpellAbilityId()==1093814355 then
call ZSG()
endif
return false
endfunction
function RY8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZTG))
set t=null
endfunction
function ZUG takes unit CP7 returns nothing
call UnitRemoveAbility(CP7,1112500344)
call UnitRemoveAbility(CP7,1110454344)
endfunction
function ZVG takes unit CP7 returns nothing
call UnitRemoveAbility(CP7,1093814329)
call UnitRemoveAbility(CP7,1110459981)
endfunction
function ZWG takes unit CP7 returns nothing
call UnitRemoveAbility(CP7,1093814856)
call UnitRemoveAbility(CP7,1093814855)
call UnitRemoveAbility(CP7,1093814858)
call UnitRemoveAbility(CP7,1093814857)
call UnitRemoveAbility(CP7,1110459980)
endfunction
function ZXG takes unit CP7 returns nothing
call Z27(CP7,1093814329)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814329,false)
endfunction
function ZYG takes unit CP7 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093814320)
if DB8==1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814856,false)
call Z27(CP7,1093814856)
elseif DB8==2 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814855,false)
call Z27(CP7,1093814855)
elseif DB8==3 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814858,false)
call Z27(CP7,1093814858)
elseif DB8==4 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814857,false)
call Z27(CP7,1093814857)
endif
endfunction
function ZZG takes unit CP7,unit J67 returns nothing
local real a=GetRandomReal(0,360)
local real x=GetUnitX(J67)+50*Cos(a*bj_DEGTORAD)
local real y=GetUnitY(J67)+50*Sin(a*bj_DEGTORAD)
call SetUnitPosition(CP7,x,y)
call SetUnitFacing(CP7,bj_RADTODEG*Atan2(GetUnitY(J67)-GetUnitY(CP7),GetUnitX(J67)-GetUnitX(CP7)))
call SetUnitAnimation(CP7,"Attack")
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Fire_Blink_2.mdx",CP7,"chest"))
call ZWG(CP7)
if IsUnitType(J67,UNIT_TYPE_HERO) or IsUnitIllusion(J67) then
call ZYG(CP7)
call UnitRemoveAbility(CP7,1093814854)
else
call Z27(CP7,1093814854)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093814854,false)
endif
call IssueTargetOrderById(CP7,$D000F,J67)
endfunction
function ZAG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local real LN9=(LoadReal(C7,(JZ7),($BD)))
local real LO9=(LoadReal(C7,(JZ7),($BE)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local group g=(LoadGroupHandle(C7,(JZ7),(22)))
local unit J67=null
local boolean GFG=false
local fogmodifier T0D=(LoadFogModifierHandle(C7,(JZ7),(42)))
local integer DB8=GetUnitAbilityLevel(CP7,1093814320)
loop
exitwhen FirstOfGroup(g)==null or GFG
set J67=FirstOfGroup(g)
call GroupRemoveUnit(g,J67)
if IsUnitInGroup(J67,DND)and J67!=null then
set J67=null
set GFG=false
else
set GFG=true
endif
endloop
call SetUnitPathing(CP7,false)
call SetUnitInvulnerable(CP7,true)
call C_7(CP7)
if GFG==false or((LoadInteger(C7,(GetHandleId((CP7))),((4319))))==1) then
call SaveInteger(C7,(GetHandleId((CP7))),((4318)),(2))
call ZVG(CP7)
call UnitRemoveAbility(CP7,1093814854)
call ZWG(CP7)
call C_7(CP7)
call ZUG(CP7)
call UnitAddAbility(CP7,1093814322)
call UnitRemoveAbility(CP7,1093814322)
call C_7(CP7)
if((LoadInteger(C7,(GetHandleId((CP7))),((4319))))==1)==false then
call SetUnitX(CP7,LN9)
call SetUnitY(CP7,LO9)
endif
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call SetUnitPathing(CP7,true)
call SetUnitInvulnerable(CP7,false)
call SetUnitTimeScale(CP7,1)
call ZH7(DND)
call ZH7(g)
call RemoveUnit((LoadUnitHandle(C7,(JZ7),(19))))
call FogModifierStop(T0D)
call DestroyFogModifier(T0D)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call GroupAddUnit(DND,J67)
call ZZG(CP7,J67)
endif
set t=null
set CP7=null
set J67=null
set g=null
set DND=null
set T0D=null
return false
endfunction
function ZBG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local fogmodifier T0D=CreateFogModifierRadius(GetOwningPlayer(CP7),FOG_OF_WAR_VISIBLE,x,y,600,true,true)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1747993911,GetUnitX(CP7),GetUnitY(CP7),GetUnitFacing(CP7))
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093814320)
call SetUnitVertexColor(DA8,$FF,$FF,$FF,100)
call FogModifierStart(T0D)
call SaveInteger(C7,(GetHandleId((CP7))),((4318)),(1))
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,$96+100*DB8+25,Condition(function CL7))
call C_7(CP7)
call ZUG(CP7)
call UnitAddAbility(CP7,1093814321)
call UnitRemoveAbility(CP7,1093814321)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,125)
call SetUnitPathing(CP7,false)
call SetUnitInvulnerable(CP7,true)
call SetUnitTimeScale(CP7,3)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function ZAG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveReal(C7,(JZ7),($BD),((GetUnitX(CP7))*1.))
call SaveReal(C7,(JZ7),($BE),((GetUnitY(CP7))*1.))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call SaveGroupHandle(C7,(JZ7),(22),(g))
call SaveFogModifierHandle(C7,(JZ7),(42),(T0D))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call ZXG(CP7)
call TriggerEvaluate(t)
set CP7=null
set t=null
set T0D=null
set DA8=null
set g=null
endfunction
function ZCG takes nothing returns boolean
if GetSpellAbilityId()==1093814320 then
call ZBG()
endif
return false
endfunction
function Z3G takes nothing returns boolean
local unit YX8=GetSummonedUnit()
if IsUnitIllusion(YX8) and GetUnitTypeId(YX8)==1311788360 then
call ZVG(YX8)
call UnitRemoveAbility(YX8,1093814854)
call ZWG(YX8)
call UnitAddAbility(YX8,1093814322)
call UnitRemoveAbility(YX8,1093814322)
endif
set YX8=null
return false
endfunction
function RZ8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function ZCG))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(t,Condition(function Z3G))
set t=null
endfunction
function Z6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093814323)
local integer B59=2
if DB8>2 then
set B59=3
endif
if GetTriggerEvalCount(t)==B59 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
call D38(CP7,J67,1,20+20*DB8)
set t=null
set CP7=null
set J67=null
return false
endfunction
function ZLG takes nothing returns nothing
local unit CP7=IM4
local unit J67=IN4
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call UnitAddAbility(DA8,1093814324)
call IssueTargetOrderById(DA8,$D008A,J67)
call TriggerAddCondition(t,Condition(function Z6G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call TriggerRegisterTimerEvent(t,0,false)
call TriggerRegisterTimerEvent(t,1,true)
set DA8=null
set CP7=null
set J67=null
endfunction
function Z1G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit u1=null
local unit u2=null
local unit u3=null
local integer DRF=0
local unit u
local trigger t
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,425,Condition(function LL7))
loop
exitwhen FirstOfGroup(g)==null or DRF==2
set u=GroupPickRandomUnit(g)
if u!=null then
if DRF==0 then
set u1=u
elseif DRF==1 then
set u2=u
elseif DRF==2 then
set u3=u
endif
set DRF=DRF+1
call GroupRemoveUnit(g,u)
endif
endloop
call ZH7(g)
if u1!=null then
call B27(CP7,u1,1747993904,"ZLG",9000)
endif
if u2!=null then
call B27(CP7,u2,1747993904,"ZLG",9000)
endif
if u3!=null then
endif
set g=null
set CP7=null
set u=null
set u1=null
set u2=null
set u3=null
endfunction
function Z0G takes nothing returns boolean
if GetSpellAbilityId()==1093814323 then
call Z1G()
endif
return false
endfunction
function RX8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function Z0G))
set t=null
endfunction
function Z5G takes nothing returns boolean
local unit CP7=(LoadUnitHandle(C7,(GetHandleId(GetTriggeringTrigger())),(2)))
local integer JZ7=GetHandleId(CP7)
local integer i=0
local real VYG=(TimerGetElapsed(V))
local integer Z2G=(LoadInteger(C7,(JZ7),(749)))
local real x
local real y
local real t
loop
exitwhen i>Z2G
set t=(LoadReal(C7,(JZ7),($2710+i)))
if t+$A>VYG then
set x=(LoadReal(C7,(JZ7),($2AF8+i)))
set y=(LoadReal(C7,(JZ7),($2EE0+i)))
endif
set i=i+1
endloop
set CP7=null
return false
endfunction
function Z_G takes integer JZ7,integer Z2G,real B17,real B07 returns boolean
local real x
local real y
local real t
local integer i=0
local real VYG=(TimerGetElapsed(V))
loop
exitwhen i>Z2G
set t=(LoadReal(C7,(JZ7),($2710+i)))
if t+$A>VYG then
set x=(LoadReal(C7,(JZ7),($2AF8+i)))
set y=(LoadReal(C7,(JZ7),($2EE0+i)))
if N67(x,y,B17,B07)<75 then
return true
endif
endif
set i=i+1
endloop
return false
endfunction
function A4G takes integer JZ7,integer Z2G returns integer
local real t
local integer i=0
local real VYG=(TimerGetElapsed(V))
loop
exitwhen i>Z2G
set t=(LoadReal(C7,(JZ7),($2710+i)))
if t+$A<VYG then
return i
endif
set i=i+1
endloop
return-1
endfunction
function A7G takes unit CP7,integer A8G,real x,real y returns nothing
local integer JZ7=GetHandleId(CP7)
local integer Z2G=(LoadInteger(C7,(JZ7),(749)))
local integer A9G
if Z_G(JZ7,Z2G,x,y)then
return
endif
set A9G=A4G(JZ7,Z2G)
if A9G==-1 then
set A9G=Z2G
set Z2G=Z2G+1
call SaveInteger(C7,(JZ7),(749),(Z2G))
endif
call SaveInteger(C7,(JZ7),($32C8),(A8G))
call SaveReal(C7,(JZ7),($2710),(((TimerGetElapsed(V)))*1.))
call SaveReal(C7,(JZ7),($2AF8),((x)*1.))
call SaveReal(C7,(JZ7),($2AF8),((y)*1.))
endfunction
function ADG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5,true)
call TriggerAddCondition(t,Condition(function Z5G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function AEG takes nothing returns nothing
call D38(DS7,GetEnumUnit(),1,50+DR7*50)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",GetEnumUnit(),"origin"))
endfunction
function AFG takes unit CP7,unit MGD,real x,real y returns nothing
local group g
call KillUnit(MGD)
call BK7("war3mapImported\\Firaga_2.mdx",x,y,2)
set g=ZI7()
set IM4=CP7
set DS7=CP7
set DR7=GetUnitAbilityLevel(CP7,1093814859)
call GroupEnumUnitsInRange(g,x,y,450+25,Condition(function LF7))
call UnitRemoveAbility(CP7,1093678162)
call ForGroup(g,function AEG)
call Z27(CP7,1093678162)
call ZH7(g)
set g=null
endfunction
function AGG takes unit CP7,unit AHG returns nothing
local integer JZ7=GetHandleId(CP7)
local integer AIG=(LoadInteger(C7,(JZ7),(746)))
local unit AJG
local integer i=1
local integer x
loop
exitwhen i>AIG
set AJG=(LoadUnitHandle(C7,(JZ7),($5AA+i)))
if AJG==AHG then
set AIG=AIG-1
call SaveUnitHandle(C7,(JZ7),($5AA+i),((LoadUnitHandle(C7,(JZ7),($5AA+i+1)))))
call SaveInteger(C7,(JZ7),(746),(AIG))
set x=i+1
loop
exitwhen x>AIG
call SaveUnitHandle(C7,(JZ7),($5AA+x),((LoadUnitHandle(C7,(JZ7),($5AA+x+1)))))
set x=x+1
endloop
endif
set i=i+1
endloop
set AJG=null
endfunction
function AKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit MGD=(LoadUnitHandle(C7,(JZ7),(19)))
local real WP9=GetUnitX(MGD)
local real WQ9=GetUnitY(MGD)
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local real a=MZ7(WP9,WQ9,BC7,B37)*bj_DEGTORAD
local real B17
local real B07
local real d=N67(WP9,WQ9,BC7,B37)
local real F5D=GetUnitMoveSpeed(CP7)*2.5*.02
local group g
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call AGG(CP7,MGD)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif d<2 then
call SetUnitAnimationByIndex(MGD,1)
else
if d<F5D then
set B17=BC7
set B07=B37
else
set B17=WP9+F5D*Cos(a)
set B07=WQ9+F5D*Sin(a)
endif
call SetUnitX(MGD,B17)
call SetUnitY(MGD,B07)
endif
set t=null
set CP7=null
set MGD=null
return false
endfunction
function AMG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),GetSpellTargetX(),GetSpellTargetY())*bj_DEGTORAD
local integer JZ7=GetHandleId(CP7)
local integer AIG=(LoadInteger(C7,(JZ7),(746)))
local integer DB8=GetUnitAbilityLevel(CP7,1093814859)
local unit AJG=(LoadUnitHandle(C7,(JZ7),($5AA+1)))
local unit ANG=CreateUnit(GetOwningPlayer(CP7),1747993912,GetUnitX(CP7),GetUnitY(CP7),a*bj_RADTODEG)
local trigger t
local integer i=1
set AIG=AIG+1
call SaveUnitHandle(C7,(JZ7),($5AA+AIG),(ANG))
call SaveInteger(C7,(JZ7),(746),(AIG))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SetUnitVertexColor(ANG,$FF,$FF,$FF,75)
call SetUnitTimeScale(ANG,2)
call SetUnitAnimationByIndex(ANG,0)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function AKG))
call TriggerRegisterDeathEvent(t,ANG)
call UnitApplyTimedLife(ANG,1112820806,45)
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",ANG,"hand right alternate")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",ANG,"hand left alternate")))
call SaveEffectHandle(C7,(JZ7),($B1),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",ANG,"origin")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(ANG))
call SaveReal(C7,(JZ7),(47),((GetSpellTargetX())*1.))
call SaveReal(C7,(JZ7),(48),((GetSpellTargetY())*1.))
set CP7=null
set t=null
set AJG=null
set ANG=null
endfunction
function AOG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer Q5E=(LoadInteger(C7,(GetHandleId(CP7)),(747)))
if Q5E>0 then
call AMG()
call UnitRemoveAbility(CP7,DX7[Q5E])
set Q5E=Q5E-1
call SaveInteger(C7,(GetHandleId(CP7)),(747),(Q5E))
call Z27(CP7,DX7[Q5E])
else
call AV7(GetOwningPlayer(GetTriggerUnit()),"No more charges")
endif
set CP7=null
endfunction
function APG takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==1747993912
endfunction
function AQG takes nothing returns nothing
local real CFD=N67(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),DT7,DU7)
if CFD>DV7 and A47(GetEnumUnit())==false then
set DW7=GetEnumUnit()
set DV7=CFD
endif
endfunction
function ARG takes unit CP7,real x,real y returns unit
local group g=ZI7()
set DW7=null
set DV7=-1
set DT7=x
set DU7=y
call GroupEnumUnitsOfPlayer(g,GetOwningPlayer(CP7),Condition(function APG))
call ForGroup(g,function AQG)
call ZH7(g)
set g=null
return DW7
endfunction
function FireRemnant_FindTargetClosest takes nothing returns nothing
local real CFD=N67(GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),DT7,DU7)
if CFD<DV7 and A47(GetEnumUnit())==false then
set DW7=GetEnumUnit()
set DV7=CFD
endif
endfunction
function ASG takes unit u1,unit u2 returns real
local real A29=N37(u1,u2)
local real D49=A29/1300.
if D49>.4 then
return A29/.4
endif
return 1300.
endfunction
function ATG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real KME=(LoadReal(C7,(JZ7),(47)))
local real KNE=(LoadReal(C7,(JZ7),(48)))
local unit MGD=(LoadUnitHandle(C7,(JZ7),(19)))
local real WP9=GetUnitX(CP7)
local real WQ9=GetUnitY(CP7)
local real BC7=(LoadReal(C7,(JZ7),(6)))
local real B37=(LoadReal(C7,(JZ7),(7)))
local real a
local real B17
local real B07
local real d
local real AUG=(LoadReal(C7,(JZ7),(44)))
local real F5D=AUG*.02
local group g
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
if MGD!=null then
set BC7=GetUnitX(MGD)
set B37=GetUnitY(MGD)
call SaveReal(C7,(JZ7),(6),((BC7)*1.))
call SaveReal(C7,(JZ7),(7),((B37)*1.))
endif
set a=MZ7(WP9,WQ9,BC7,B37)*bj_DEGTORAD
set d=N67(WP9,WQ9,BC7,B37)
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SaveInteger(C7,(GetHandleId((CP7))),((4319)),(2))
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call SetUnitTimeScale(CP7,1)
call SetUnitAnimationByIndex(CP7,0)
call SetUnitPathing(CP7,true)
call SetUnitInvulnerable(CP7,false)
call UnitRemoveAbility(CP7,1093678162)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif d<F5D then
call SetUnitX(CP7,BC7)
call SetUnitY(CP7,B37)
call AFG(CP7,MGD,BC7,B37)
set MGD=ARG(CP7,KME,KNE)
if MGD==null then
call SaveInteger(C7,(GetHandleId((CP7))),((4319)),(2))
call BW7(BC7,B37,100)
call SetUnitVertexColor(CP7,$FF,$FF,$FF,$FF)
call SetUnitTimeScale(CP7,1)
call SetUnitAnimationByIndex(CP7,1)
call SetUnitPathing(CP7,true)
call SetUnitInvulnerable(CP7,false)
call UnitRemoveAbility(CP7,1093678162)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B1))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call SaveInteger(C7,(JZ7),(34),(ZD8+1))
call SaveUnitHandle(C7,(JZ7),(19),(MGD))
call SaveReal(C7,(JZ7),(44),((ASG(CP7,MGD))*1.))
call SaveReal(C7,(JZ7),(6),((GetUnitX(MGD))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(MGD))*1.))
endif
else
call SetUnitAnimationByIndex(CP7,0)
call SetUnitPathing(CP7,false)
set B17=WP9+F5D*Cos(a)
set B07=WQ9+F5D*Sin(a)
call SetUnitX(CP7,B17)
call SetUnitY(CP7,B07)
call SetUnitFacing(CP7,a*bj_RADTODEG)
endif
call A7G(CP7,ZD8,GetUnitX(CP7),GetUnitY(CP7))
set t=null
set CP7=null
set MGD=null
return false
endfunction
function AVG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)+$96)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function AWG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t
local integer JZ7=GetHandleId(CP7)
local integer AIG=(LoadInteger(C7,(JZ7),(746)))
local unit MGD
if AIG>0 and((LoadInteger(C7,(GetHandleId((CP7))),((4319))))==1)==false then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SetUnitVertexColor(CP7,$FF,0,0,75)
call SetUnitTimeScale(CP7,2)
call SetUnitAnimationByIndex(CP7,0)
call SetUnitPathing(CP7,false)
call SetUnitInvulnerable(CP7,true)
call Z27(CP7,1093678162)
call SaveInteger(C7,(GetHandleId((CP7))),((4319)),(1))
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function ATG))
call TriggerRegisterDeathEvent(t,CP7)
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",CP7,"hand right alternate")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\Phoenix_Missile_smaller.mdx",CP7,"hand left alternate")))
call SaveEffectHandle(C7,(JZ7),($B1),(AddSpecialEffectTarget("war3mapImported\\FlameDash_Ground.mdx",CP7,"origin")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(47),((GetSpellTargetX())*1.))
call SaveReal(C7,(JZ7),(48),((GetSpellTargetY())*1.))
set MGD=ARG(CP7,GetSpellTargetX(),GetSpellTargetY())
call SaveUnitHandle(C7,(JZ7),(19),(MGD))
call SaveReal(C7,(JZ7),(44),((ASG(CP7,MGD))*1.))
call SaveReal(C7,(JZ7),(6),((GetUnitX(MGD))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(MGD))*1.))
call SaveInteger(C7,(JZ7),(34),(1))
else
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.0,false)
call TriggerAddCondition(t,Condition(function AVG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
endif
set t=null
set CP7=null
set MGD=null
endfunction
function AXG takes nothing returns boolean
if GetSpellAbilityId()==DX7[0]or GetSpellAbilityId()==DX7[1]or GetSpellAbilityId()==DX7[2]or GetSpellAbilityId()==DX7[3]then
call AOG()
elseif GetSpellAbilityId()==1093814860 then
call AWG()
endif
return false
endfunction
function AYG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer Q5E=(LoadInteger(C7,(GetHandleId(CP7)),(747)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
if Q5E<3 then
set ZD8=ZD8-1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if ZD8==0 then
call UnitRemoveAbility(CP7,DX7[Q5E])
set ZD8=35
call SaveInteger(C7,(JZ7),(34),(ZD8))
set Q5E=Q5E+1
call SaveInteger(C7,(GetHandleId(CP7)),(747),(Q5E))
call Z27(CP7,DX7[Q5E])
endif
endif
set t=null
set CP7=null
return false
endfunction
function AZG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SaveInteger(C7,(GetHandleId(CP7)),(747),(3))
call Z27(CP7,DX7[3])
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function AYG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(34),(30))
set CP7=null
set t=null
endfunction
function AAG takes nothing returns boolean
if GetLearnedSkill()==1093814859 and IsUnitIllusion(GetTriggerUnit())==false then
call Z27(GetTriggerUnit(),1093814860)
call SetUnitAbilityLevel(GetTriggerUnit(),1093814860,GetUnitAbilityLevel(GetTriggerUnit(),1093814859))
if GetUnitAbilityLevel(GetTriggerUnit(),1093814859)==1 then
call AZG()
call ADG()
endif
endif
return false
endfunction
function RA8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function AXG))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function AAG))
set t=null
set DX7[0]=1093814863
set DX7[1]=1093814865
set DX7[2]=1093814864
set DX7[3]=1093814866
endfunction
function ABG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamage()>2 and DY7 then
set DY7=false
call D38(GetEventDamageSource(),J67,3,GetEventDamage()*.25)
set DY7=true
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function ACG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093812536)
set DY7=true
call UnitAddAbility(DA8,1093812535)
call SetUnitAbilityLevel(DA8,1093812535,DB8)
call IssueTargetOrderById(DA8,$D02BC,J67)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,2+DB8,false)
call TriggerAddCondition(t,Condition(function ABG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set CP7=null
set J67=null
set t=null
endfunction
function A3G takes nothing returns boolean
if GetSpellAbilityId()==1093812536 then
call ACG()
endif
return false
endfunction
function Register_ArcaneSeal takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A3G))
set t=null
endfunction
function A6G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real d=(LoadReal(C7,(JZ7),($8A)))
local real x=AY7(GetUnitX(J67)+d/$A*Cos(a))
local real y=AZ7(GetUnitY(J67)+d/$A*Sin(a))
if GetTriggerEvalCount(t)==$B or GetTriggerEventId()==EVENT_UNIT_DEATH then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call DestroyEffect(AddSpecialEffect("war3mapImported\\ThrustMovement.mdx",x,y))
call BW7(x,y,$96)
call SetUnitX(J67,x)
call SetUnitY(J67,y)
endif
set J67=null
set t=null
return false
endfunction
function ALG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093812537)
local real a
local real x
local real y
local real d
local integer i=-1
local boolean GGG=false
if CP7==J67 then
set a=GetUnitFacing(CP7)*bj_DEGTORAD
else
set a=MY7(CP7,J67)*bj_DEGTORAD
endif
loop
exitwhen GGG or i==23
set i=i+1
set x=AY7(GetUnitX(J67)+(350-i*25)*Cos(a))
set y=AZ7(GetUnitY(J67)+(350-i*25)*Sin(a))
if(IsPointInRegion(IT4,((x)*1.),((y)*1.)))==false then
set GGG=true
endif
endloop
set d=N67(x,y,GetUnitX(J67),GetUnitY(J67))
call TriggerRegisterTimerEvent(t,.03,true)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function A6G))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveReal(C7,(JZ7),($8A),((d)*1.))
if IsUnitAlly(CP7,GetOwningPlayer(J67)) then
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+50+50*DB8)
else
call D38(CP7,J67,3,50+50*DB8)
endif
set CP7=null
set J67=null
set t=null
endfunction
function A1G takes nothing returns boolean
if GetSpellAbilityId()==1093812537 then
call ALG()
endif
return false
endfunction
function Register_Thrust takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A1G))
set t=null
endfunction
function A0G takes nothing returns nothing
call IssueTargetOrderById(DZ7,$D008A,GetEnumUnit())
call D38(GetTriggerUnit(),GetEnumUnit(),1,60*DA7)
endfunction
function A5G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g1=ZI7()
local group g2=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093812534)
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
set DA7=DB8
set DZ7=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
call UnitAddAbility(DZ7,1093812549)
call SetUnitAbilityLevel(DZ7,1093812549,DB8)
call GroupEnumUnitsInRange(g1,x,y,425,Condition(function LV7))
call GroupEnumUnitsInRange(g2,x,y,825,Condition(function LV7))
call GroupRemoveGroup(g1,g2)
call ForGroup(g2,function A0G)
call ZH7(g1)
call ZH7(g2)
call DestroyEffect(AddSpecialEffect("war3mapImported\\ConjureForceAoE.mdx",x,y))
set CP7=null
set g1=null
set g2=null
endfunction
function A2G takes nothing returns boolean
if GetSpellAbilityId()==1093812534 then
call A5G()
endif
return false
endfunction
function Register_ConjureForce takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function A2G))
set t=null
endfunction
function A_G takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),DC7)==false then
call GroupAddUnit(DC7,GetEnumUnit())
call D38(DB7,GetEnumUnit(),3,D37)
endif
endfunction
function B4G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local group g=(LoadGroupHandle(C7,(JZ7),(22)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real WY9=(LoadReal(C7,(JZ7),($D)))
local real YU9=(LoadReal(C7,(JZ7),(20)))
local group B7G
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x
local real y
if GetTriggerEvalCount(t)>67 then
call ZH7(g)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call KillUnit(BB7)
else
set x=GetUnitX(BB7)
set y=GetUnitY(BB7)
set B7G=ZI7()
set DC7=g
set IM4=BB7
set DB7=CP7
set D37=YU9
call GroupEnumUnitsInRange(B7G,x,y,$E1,Condition(function LP7))
call ForGroup(B7G,function A_G)
call ZH7(B7G)
call SetUnitX(BB7,AY7(x+$F*Cos(WY9*bj_DEGTORAD)))
call SetUnitY(BB7,AZ7(y+$F*Sin(WY9*bj_DEGTORAD)))
endif
set t=null
set g=null
set B7G=null
set CP7=null
set BB7=null
return false
endfunction
function B8G takes unit CP7,real YU9,real x,real y returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local group g=ZI7()
local real x1=GetUnitX(CP7)
local real y1=GetUnitY(CP7)
local real x2=x
local real y2=y
local real WY9=MZ7(x1,y1,x2,y2)
local integer DB8=GetUnitAbilityLevel(CP7,1093812545)
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993673,x1,y1,WY9)
call SetUnitScale(BB7,1.5,1.5,1.5)
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveGroupHandle(C7,(JZ7),(22),(g))
call SaveReal(C7,(JZ7),($D),((WY9)*1.))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(20),((YU9)*1.))
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerAddCondition(t,Condition(function B4G))
set t=null
set BB7=null
set g=null
endfunction
function B9G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local boolean BDG=(LoadBoolean(C7,(JZ7),(95)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812545,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if BDG==false and GetEventDamage()>2 and GetEventDamage()<$BB8 and IsUnitIllusion(J67)==false then
call SaveReal(C7,(JZ7),(20),(((LoadReal(C7,(JZ7),(20)))+GetEventDamage())*1.))
call BE7(J67,GetEventDamage())
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_ENDCAST then
if GetSpellAbilityId()==1093812545 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call SaveBoolean(C7,(JZ7),(95),(true))
endif
elseif GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093812546 then
call B8G(CP7,(LoadReal(C7,(JZ7),(20))),GetSpellTargetX(),GetSpellTargetY())
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812545,true)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812546,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812545,true)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function BEG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call Z27(CP7,1093812546)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812546,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812545,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterTimerEvent(t,20,false)
call TriggerAddCondition(t,Condition(function B9G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveBoolean(C7,(JZ7),(95),(false))
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\WispShellBlue_2.mdx",CP7,"origin")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\DivineWrathTarget.mdx",J67,"origin")))
set CP7=null
set J67=null
set t=null
endfunction
function BFG takes nothing returns boolean
if GetSpellAbilityId()==1093812545 then
call BEG()
endif
return false
endfunction
function Register_DivineWrath takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BFG))
set t=null
endfunction
function BGG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEventId()!=EVENT_UNIT_SPELL_EFFECT or GetSpellAbilityId()==1093812804 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812803,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812804,false)
call UnitRemoveAbility(CP7,1097167980)
call UnitRemoveAbility(CP7,1093812787)
call UnitRemoveAbility(CP7,1093812784)
call UnitRemoveAbility(CP7,1093812785)
call UnitRemoveAbility(CP7,1093812786)
call UnitRemoveAbility(CP7,1110459954)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function BHG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093812803)
call TriggerRegisterTimerEvent(t,5,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BGG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call UnitAddAbility(CP7,1093812804)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812803,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812804,true)
call UnitAddAbility(CP7,1097167980)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1097167980,false)
if DB8==1 then
call UnitAddAbility(CP7,1093812787)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812787,false)
elseif DB8==2 then
call UnitAddAbility(CP7,1093812784)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812784,false)
elseif DB8==3 then
call UnitAddAbility(CP7,1093812785)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812785,false)
elseif DB8==4 then
call UnitAddAbility(CP7,1093812786)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093812786,false)
endif
set t=null
set CP7=null
endfunction
function BIG takes nothing returns boolean
if GetSpellAbilityId()==1093812803 then
call BHG()
endif
return false
endfunction
function Register_Wraith takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BIG))
set t=null
endfunction
function BJG takes unit CP7,unit SZE,unit J67,integer DB8 returns nothing
call DZ8(CP7,J67,1.25+.25*DB8)
call D38(CP7,J67,1,40*DB8)
call KillUnit(SZE)
endfunction
function BKG takes nothing returns boolean
if(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))and(IsUnitVisible(GetFilterUnit(),GetOwningPlayer(IM4)) or LG7(GetFilterUnit())==false)then
return IsUnitInGroup(GetFilterUnit(),FT7)==false
endif
return false
endfunction
function BMG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local group g
local integer i=1
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local real a=(LoadReal(C7,(JZ7),($89)))
local unit SZE
local unit J67
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
set FT7=DND
set x=AY7(x+$C*Cos(a))
set y=AZ7(y+$C*Sin(a))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
if GetTriggerEvalCount(t)>39 then
loop
exitwhen i>3
call KillUnit((LoadUnitHandle(C7,(JZ7),(393+i-1))))
set i=i+1
endloop
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,275,Condition(function BKG))
loop
exitwhen i>3
if(LoadBoolean(C7,(JZ7),(511+i-1)))==false then
set SZE=(LoadUnitHandle(C7,(JZ7),(393+i-1)))
set x=(LoadReal(C7,(JZ7),(549+i-1)))
set y=(LoadReal(C7,(JZ7),(567+i-1)))
set x=AY7(x+$C*Cos(a))
set y=AZ7(y+$C*Sin(a))
call SaveReal(C7,(JZ7),(549+i-1),((x)*1.))
call SaveReal(C7,(JZ7),(567+i-1),((y)*1.))
call SetUnitX(SZE,x)
call SetUnitY(SZE,y)
set J67=GroupPickRandomUnit(g)
if J67!=null then
call GroupRemoveUnit(g,J67)
call SaveInteger(C7,(GetHandleId((J67))),((4314)),(1))
call SaveBoolean(C7,(JZ7),(511+i-1),(true))
call BJG(CP7,SZE,J67,GetUnitAbilityLevel(CP7,1093812788))
endif
endif
set i=i+1
endloop
call ZH7(g)
set g=null
set SZE=null
set J67=null
endif
set t=null
set CP7=null
return false
endfunction
function BNG takes nothing returns nothing
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local real a=MZ7(x,y,BC7,B37)*bj_DEGTORAD
local real b
local unit DA8
local real B17=AY7(x+500*Cos(a))
local real B07=AZ7(y+500*Sin(a))
local integer i=0
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local real S19
local integer DB8=GetUnitAbilityLevel(CP7,1093812788)
local integer XZ7=1747993678
set i=i+1
set b=a*bj_RADTODEG+90
if b>360 then
set b=b-360
endif
set b=b*bj_DEGTORAD
set DA8=CreateUnit(GetOwningPlayer(CP7),XZ7,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)
call SaveUnitHandle(C7,(JZ7),(393+i-1),(DA8))
call SaveBoolean(C7,(JZ7),(511+i-1),(false))
call SaveReal(C7,(JZ7),(549+i-1),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(567+i-1),((GetUnitY(DA8))*1.))
set i=i+1
set b=a*bj_RADTODEG-90
if b<0 then
set b=360+b
endif
set b=b*bj_DEGTORAD
set DA8=CreateUnit(GetOwningPlayer(CP7),XZ7,x+100*Cos(a)+100*Cos(b),y+100*Sin(a)+100*Sin(b),a*bj_RADTODEG)
call SaveUnitHandle(C7,(JZ7),(393+i-1),(DA8))
call SaveBoolean(C7,(JZ7),(511+i-1),(false))
call SaveReal(C7,(JZ7),(549+i-1),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(567+i-1),((GetUnitY(DA8))*1.))
set i=i+1
set DA8=CreateUnit(GetOwningPlayer(CP7),XZ7,x+100*Cos(a),y+100*Sin(a),a*bj_RADTODEG)
call SaveUnitHandle(C7,(JZ7),(393+i-1),(DA8))
call SaveBoolean(C7,(JZ7),(511+i-1),(false))
call SaveReal(C7,(JZ7),(549+i-1),((GetUnitX(DA8))*1.))
call SaveReal(C7,(JZ7),(567+i-1),((GetUnitY(DA8))*1.))
call TriggerRegisterTimerEvent(t,.015,true)
call TriggerAddCondition(t,Condition(function BMG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveReal(C7,(JZ7),(47),((B17)*1.))
call SaveReal(C7,(JZ7),(48),((B07)*1.))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
set CP7=null
set DA8=null
set t=null
endfunction
function BOG takes nothing returns boolean
if GetSpellAbilityId()==1093812788 then
call BNG()
endif
return false
endfunction
function SN8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BOG))
set t=null
endfunction
function BPG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=GetTriggerEvalCount(t)
local integer DB8=GetUnitAbilityLevel(CP7,1093812789)
if ZD8==6 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitShareVision(J67,GetOwningPlayer(CP7),false)
endif
call D38(CP7,J67,1,20+$A*DB8)
set t=null
set CP7=null
set J67=null
return false
endfunction
function BQG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerAddCondition(t,Condition(function BPG))
call SaveUnitHandle(C7,(JZ7),(2),(GetTriggerUnit()))
call SaveUnitHandle(C7,(JZ7),(17),(GetEnumUnit()))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl",GetEnumUnit(),"overhead")))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetEnumUnit(),"origin"))
call UnitShareVision(GetEnumUnit(),GetOwningPlayer(GetTriggerUnit()),true)
set t=null
endfunction
function BRG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call UnitAddAbility(DA8,1093812791)
call IssueImmediateOrderById(DA8,$D0291)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetUnitX(CP7),GetUnitY(CP7)))
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),625,Condition(function LV7))
call ForGroup(g,function BQG)
call ZH7(g)
set g=null
set CP7=null
set DA8=null
endfunction
function BSG takes nothing returns boolean
if GetSpellAbilityId()==1093812789 then
call BRG()
endif
return false
endfunction
function Register_Miasma takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BSG))
set t=null
endfunction
function GetTotalMinutes takes nothing returns integer
return R2I((TimerGetElapsed(V))/60)
endfunction
function BTG takes unit CP7,integer BUG returns nothing
local integer F2D=GetHeroAgi(CP7,false)
local integer F_D=GetHeroStr(CP7,false)
local integer BVG=GetHeroInt(CP7,false)
call SetHeroAgi(CP7,F2D-BUG,true)
call SetHeroStr(CP7,F_D-BUG,true)
call SetHeroInt(CP7,BVG-BUG,true)
endfunction
function BWG takes unit CP7,integer BUG returns nothing
local integer F2D=GetHeroAgi(CP7,false)
local integer F_D=GetHeroStr(CP7,false)
local integer BVG=GetHeroInt(CP7,false)
call SetHeroAgi(CP7,F2D+BUG,true)
call SetHeroStr(CP7,F_D+BUG,true)
call SetHeroInt(CP7,BVG+BUG,true)
endfunction
function BXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer BYG=(LoadInteger(C7,(JZ7),(744)))
local integer DB8=GetUnitAbilityLevel(CP7,1093814066)
local integer BN8=(R2I((TimerGetElapsed(V))/60))
local real BZG=DB8+1+(.1+.1*DB8)*BN8
local integer BAG=3+3*DB8+R2I((.1+.1*DB8)*BN8)
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093814066 then
if J67!=null and J67!=GetSpellTargetUnit()then
call UnitRemoveAbility(J67,1093814607)
call BTG(J67,BYG)
call BTG(CP7,BYG)
call SaveInteger(C7,(JZ7),(744),(0))
endif
set J67=GetSpellTargetUnit()
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call Z27(J67,1093814607)
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",CP7,"chest",1.9)
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",J67,"chest",1.9)
return false
else
return false
endif
endif
if J67==null then
elseif A47(J67)or A47(CP7)or N37(CP7,J67)>$578 then
call BTG(CP7,BYG)
call BTG(J67,BYG)
call SaveInteger(C7,(JZ7),(744),(0))
call UnitRemoveAbility(CP7,1093814607)
call UnitRemoveAbility(J67,1093814607)
else
if GetUnitAbilityLevel(CP7,1093814607)==0 then
call Z27(CP7,1093814607)
endif
if GetUnitAbilityLevel(J67,1093814607)==0 then
call Z27(J67,1093814607)
endif
if BYG!=BAG then
call BWG(CP7,BAG-BYG)
call BWG(J67,BAG-BYG)
call SaveInteger(C7,(JZ7),(744),(BAG))
endif
call SetUnitState(CP7,UNIT_STATE_LIFE,GetUnitState(CP7,UNIT_STATE_LIFE)+BZG)
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+BZG)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function BBG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function BXG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(null))
call SaveInteger(C7,(JZ7),(744),(0))
set t=null
set CP7=null
endfunction
function BCG takes nothing returns boolean
if GetLearnedSkill()==1093814066 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093814066)==1 then
call BBG()
endif
return false
endfunction
function Register_Brotherhood takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function BCG))
set t=null
endfunction
function B3G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or(GetEventDamage()>30 and GetEventDamageSource()!=GetTriggerUnit()and WO7(GetOwningPlayer(GetEventDamageSource())))then
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
call BE7(CP7,GetEventDamage())
endif
call UnitRemoveAbility(CP7,1093814604)
call UnitRemoveAbility(CP7,1093814605)
call UnitRemoveAbility(CP7,1093812825)
call UnitRemoveAbility(CP7,1093814606)
call UnitRemoveAbility(CP7,1110459956)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
return false
endfunction
function B6G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093812822)
local real d
local integer id
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
if DB8==1 then
set d=4
set id=1093814604
elseif DB8==2 then
set d=5
set id=1093814605
elseif DB8==3 then
set d=6
set id=1093812825
elseif DB8==4 then
set d=7
set id=1093814606
endif
call Z27(J67,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),id,false)
call TriggerAddCondition(t,Condition(function B3G))
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterTimerEvent(t,d,false)
call SaveUnitHandle(C7,(JZ7),(2),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsp\\SpeedTarget.mdl",J67,"origin")))
set CP7=null
set J67=null
set t=null
endfunction
function BLG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),375,Condition(function D88))
call ForGroup(g,function B6G)
call ZH7(g)
set g=null
set CP7=null
endfunction
function B1G takes nothing returns boolean
if GetSpellAbilityId()==1093812822 then
call BLG()
endif
return false
endfunction
function Register_Gallop takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function B1G))
endfunction
function B0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer B5G=(LoadInteger(C7,(JZ7),(59)))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,B5G)
call UnitRemoveAbility(CP7,1110459978)
call UnitRemoveAbility(CP7,1110459979)
set t=null
set CP7=null
return false
endfunction
function B2G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J37=GetAttacker()
local integer DB8=GetUnitAbilityLevel(CP7,1093813593)
local integer id
if CP7==GetTriggerUnit()and GetRandomInt(1,100)<=($E+2*DB8)and RG7(CP7,"4316")==false and IsUnitAlly(CP7,GetOwningPlayer(J37))==false then
call RR7(CP7,"4316",1.2)
if DB8==1 then
set id=1093814084
elseif DB8==2 then
set id=1093814085
elseif DB8==3 then
set id=1093814086
elseif DB8==4 then
set id=1093814083
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),id,false)
call Z27(CP7,id)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterTimerEvent(t,.5,false)
call TriggerAddCondition(t,Condition(function B0G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveInteger(C7,(JZ7),(59),(id))
endif
set t=null
set CP7=null
set J37=null
return false
endfunction
function B_G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function B2G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set t=null
endfunction
function C4G takes nothing returns boolean
if GetLearnedSkill()==1093813593 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093813593)==1 then
call B_G()
endif
return false
endfunction
function R38 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function C4G))
set t=null
endfunction
function C7G takes unit u,integer d returns nothing
local integer array b
local integer a=d
local integer c=1
local integer i=0
local integer XDD
if d<1 then
call UnitRemoveAbility(u,D67[0])
call UnitRemoveAbility(u,D67[1])
call UnitRemoveAbility(u,D67[2])
call UnitRemoveAbility(u,D67[3])
call UnitRemoveAbility(u,D67[4])
call UnitRemoveAbility(u,D67[5])
call UnitRemoveAbility(u,D67[6])
call UnitRemoveAbility(u,D67[7])
call UnitRemoveAbility(u,D67[8])
return
endif
loop
exitwhen c==0
set c=a/2
set b[i]=a-c*2
set a=c
set i=i+1
endloop
set XDD=8
set i=0
loop
exitwhen i>XDD
if b[i]==1 then
call Z27(u,D67[i])
else
call UnitRemoveAbility(u,D67[i])
endif
set i=i+1
endloop
endfunction
function C8G takes unit CP7,integer DB8,unit J67 returns nothing
local integer JZ7=GetHandleId(CP7)
local integer C9G=(LoadInteger(C7,(JZ7),(739)))
if IsUnitType(J67,UNIT_TYPE_HERO) then
set C9G=C9G+$A
call SaveInteger(C7,(JZ7),(739),(C9G))
call BO7(GetUnitName(CP7)+" Won The Duel!!",5,CP7,.03,$FF,0,0,$FF)
call C7G(CP7,C9G)
endif
endfunction
function CDG takes unit u returns boolean
return GetUnitAbilityLevel(u,1113815395)==0 or YF7(u)==false
endfunction
function CEG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local real YJ8=(LoadReal(C7,(JZ7),(442)))
local unit DA8
if GetTriggerEvalCount(t)==1 then
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1093814069)
call IssueTargetOrderById(DA8,$D0267,J67)
set DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call UnitAddAbility(DA8,1093814069)
call IssueTargetOrderById(DA8,$D0267,CP7)
set DA8=null
endif
if GetTriggerEventId()==EVENT_WIDGET_DEATH or YJ8<(TimerGetElapsed(V))or CDG(CP7)==false or CDG(J67)==false then
if GetTriggerEventId()==EVENT_WIDGET_DEATH then
if GetTriggerUnit()==CP7 then
call C8G(J67,DB8,GetTriggerUnit())
else
call C8G(CP7,DB8,GetTriggerUnit())
endif
endif
call UnitRemoveAbility(CP7,1110459975)
call UnitRemoveAbility(J67,1110459975)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call SetUnitPathing(CP7,true)
call SetUnitPathing(J67,true)
elseif GetIssuedOrderId()!=$D0005 then
call SetUnitPathing(CP7,false)
call SetUnitPathing(J67,false)
call DisableTrigger(t)
call IssueTargetOrderById(CP7,$D000F,J67)
call IssueTargetOrderById(J67,$D000F,CP7)
call EnableTrigger(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CFG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093813065)
local trigger t
local integer JZ7
call SetUnitPathing(CP7,false)
call SetUnitPathing(J67,false)
call IssueTargetOrderById(CP7,$D000F,J67)
call IssueTargetOrderById(J67,$D000F,CP7)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",CP7,"overhead")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("war3mapImported\\DuelFX.mdx",J67,"overhead")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveReal(C7,(JZ7),(442),(((TimerGetElapsed(V))+.75*DB8+3.25)*1.))
call TriggerAddCondition(t,Condition(function CEG))
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerRegisterTimerEvent(t,.01,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterDeathEvent(t,J67)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ISSUED_ORDER)
set CP7=null
set J67=null
set t=null
endfunction
function CGG takes nothing returns boolean
if GetSpellAbilityId()==1093813065 and ZG7(GetSpellTargetUnit())==false then
call CFG()
endif
return false
endfunction
function RL8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CGG))
set t=null
set D67[0]=1093814091
set D67[1]=1093814090
set D67[2]=1093814089
set D67[3]=1093814088
set D67[4]=1093814094
set D67[5]=1093814095
set D67[6]=1093814093
set D67[7]=1093814092
set D67[8]=1093814096
endfunction
function CHG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local real d
local unit J37
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set d=GetEventDamage()
if E38(d)and d>50 then
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
set J37=GetEventDamageSource()
if IsUnitType(J37,UNIT_TYPE_HERO)==false and GetUnitAbilityLevel(J37,1093678162)!=0 then
set J37=G7[GetPlayerId(GetOwningPlayer(J37))]
endif
call BE7(CP7,d)
set d=d*(.4+.2*DB8)
if IsUnitAlly(J67,GetOwningPlayer(CP7)) then
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+d)
else
call D38(CP7,J67,3,d)
endif
endif
endif
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED or ZD8==3 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($AF))))
call DestroyEffect((LoadEffectHandle(C7,(JZ7),($B0))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CIG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093814609)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",CP7,"chest",1.9)
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",J67,"chest",1.9)
call SaveEffectHandle(C7,(JZ7),($AF),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",CP7,"chest")))
call SaveEffectHandle(C7,(JZ7),($B0),(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",J67,"chest")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
call TriggerAddCondition(t,Condition(function CHG))
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_DAMAGED)
set CP7=null
set J67=null
set t=null
endfunction
function CJG takes nothing returns boolean
if GetSpellAbilityId()==1093814609 then
call CIG()
endif
return false
endfunction
function Register_Deflection takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CJG))
set t=null
endfunction
function CKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
set ZD8=ZD8+1
call SaveInteger(C7,(JZ7),(34),(ZD8))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or ZD8>4 then
call UnitRemoveAbility(J67,DL7[DB8])
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+20+$A*DB8)
call BJ7("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl",J67,"chest",1.9)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CMG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093814834)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call BW8(J67)
call BT8(J67,0,0)
call Z27(J67,DL7[DB8])
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),DL7[DB8],false)
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",J67,"overhead")))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveInteger(C7,(JZ7),(34),(0))
call TriggerAddCondition(t,Condition(function CKG))
call TriggerRegisterTimerEvent(t,1,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerEvaluate(t)
set CP7=null
set J67=null
set t=null
endfunction
function CNG takes nothing returns boolean
if GetSpellAbilityId()==1093814834 then
call CMG()
endif
return false
endfunction
function RC8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CNG))
set DL7[1]=1093814841
set DL7[2]=1093814849
set DL7[3]=1093814840
set DL7[4]=1093814839
set t=null
endfunction
function COG takes unit CP7,integer DB8 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,GetUnitX(CP7),GetUnitY(CP7),0)
call Z27(DA8,1093814851)
call SetUnitAbilityLevel(DA8,1093814851,DB8/3)
call IssueTargetOrderById(DA8,$D0085,CP7)
set DA8=null
endfunction
function CPG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_SUMMONED) or IsUnitIllusion(GetEnumUnit()) then
call D38(GetTriggerUnit(),GetEnumUnit(),1,GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE)*.25)
endif
call D38(GetTriggerUnit(),GetEnumUnit(),1,60*D57+$A*(D07+D17))
endfunction
function CQG takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set D07=D07+1
else
set D17=D17+1
endif
endfunction
function CRG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer DB8=GetUnitAbilityLevel(CP7,1093814850)
local group g=ZI7()
call DestroyEffect(AddSpecialEffect("war3mapImported\\OverwhelmingOdds.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,315+25,Condition(function LV7))
set D17=0
set D07=0
set D57=DB8
call ForGroup(g,function CQG)
call ForGroup(g,function CPG)
call ZH7(g)
call COG(CP7,9*D07+3*D17)
set CP7=null
set g=null
endfunction
function CSG takes nothing returns boolean
if GetSpellAbilityId()==1093814850 then
call CRG()
endif
return false
endfunction
function R68 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CSG))
call AC7(1093814851)
set t=null
endfunction
function CTG takes nothing returns nothing
set E77=true
call D38(D27,GetEnumUnit(),1,((300+300*E47)/D_7)/20)
set E77=false
endfunction
function CUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real x=(LoadReal(C7,(JZ7),(6)))
local real y=(LoadReal(C7,(JZ7),(7)))
local group g
if GetTriggerEvalCount(t)>20 then
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
set g=ZI7()
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,$AA+25,Condition(function L27))
set E47=GetUnitAbilityLevel(CP7,1093812807)
set D27=CP7
set D_7=CountUnitsInGroup(g)
call ForGroup(g,function CTG)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function CVG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local string s="war3mapImported\\DivineWrathTarget.mdx"
local location l=GetSpellTargetLoc()
call PlaySoundAtPointBJ(EC7,100,l,0)
call RemoveLocation(l)
set l=null
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function CUG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call DestroyEffect(AddSpecialEffect(s,x,y))
set t=null
set CP7=null
endfunction
function CWG takes nothing returns boolean
if GetSpellAbilityId()==1093812807 then
call CVG()
endif
return false
endfunction
function R08 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function CWG))
set t=null
set EC7=CreateSound("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget2.wav",false,true,true,$A,$A,"SpellsEAX")
call SetSoundParamsFromLabel(EC7,"StarfallTarget")
call SetSoundDuration(EC7,$BB8)
endfunction
function CXG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093812820)
local real d
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
set d=GetEventDamage()*(.2+.05*DB8)
else
call SaveInteger(C7,(GetHandleId((J67))),((4317)),(2))
call UnitRemoveAbility(J67,1093814582)
call UnitRemoveAbility(J67,1093814581)
call UnitRemoveAbility(J67,1093814583)
call UnitRemoveAbility(J67,1093814584)
call UnitRemoveAbility(J67,1110459987)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CYG takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local integer DB8=GetUnitAbilityLevel(CP7,1093812820)
local unit LastTarget=(LoadUnitHandle(C7,(GetHandleId(CP7)),(741)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(J67)),(742)))
local integer id
if((LoadInteger(C7,(GetHandleId((J67))),((4317))))==1) then
call SaveInteger(C7,(GetHandleId(J67)),(742),(0))
call SaveReal(C7,(GetHandleId(J67)),(743),(((TimerGetElapsed(V)))*1.))
else
if(LoadReal(C7,(GetHandleId(J67)),(743)))+$A<(TimerGetElapsed(V))then
set ZD8=1
else
set ZD8=ZD8+1
endif
if IsUnitType(J67,UNIT_TYPE_HERO) or IsUnitIllusion(J67) then
call BP7(GetOwningPlayer(CP7),I2S(ZD8)+"!",2,J67,.026,50,0,$FF,$D8)
endif
call SaveInteger(C7,(GetHandleId(J67)),(742),(ZD8))
call SaveReal(C7,(GetHandleId(J67)),(743),(((TimerGetElapsed(V)))*1.))
if ZD8==4 then
call SaveInteger(C7,(GetHandleId(J67)),(742),(0))
call SaveInteger(C7,(GetHandleId((J67))),((4317)),(1))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.5+.5*DB8,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function CXG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
if DB8==1 then
set id=1093814582
elseif DB8==2 then
set id=1093814581
elseif DB8==3 then
set id=1093814583
elseif DB8==4 then
set id=1093814584
endif
call Z27(J67,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),id,false)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FarseerMissile_Purple_2.mdx",J67,"chest"))
endif
endif
set t=null
endfunction
function CZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
call CYG(CP7,J67)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function CAG takes nothing returns nothing
local trigger t=CreateTrigger()
local unit J67=GetTriggerUnit()
local unit CP7=GetAttacker()
local integer JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,1.2,false)
call TriggerAddCondition(t,Condition(function CZG))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set J67=null
set CP7=null
set t=null
endfunction
function CBG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetAttacker()==CP7 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(CP7))then
if RG7(CP7,"4315")==false then
call RR7(CP7,"4315",.3)
call CAG()
endif
endif
set t=null
set CP7=null
return false
endfunction
function CCG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function CBG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function C3G takes nothing returns boolean
if GetLearnedSkill()==1093812820 and IsUnitIllusion(GetTriggerUnit())==false and GetUnitAbilityLevel(GetTriggerUnit(),1093812820)==1 then
call CCG()
endif
return false
endfunction
function Register_Amp takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function C3G))
set t=null
endfunction
function C6G takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local integer DB8=GetUnitAbilityLevel(CP7,1093812805)
local real YU9=40+20*DB8+1.6*GetHeroInt(CP7,true)
set E77=true
call D38(CP7,J67,1,YU9)
set E77=false
set CP7=null
set J67=null
endfunction
function CLG takes nothing returns nothing
local trigger t=B27(GetTriggerUnit(),GetSpellTargetUnit(),1747993681,"C6G",500)
local integer JZ7=GetHandleId(t)
set t=null
endfunction
function C1G takes nothing returns boolean
if GetSpellAbilityId()==1093812805 and ZG7(GetSpellTargetUnit())==false then
call CLG()
endif
return false
endfunction
function R58 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C1G))
set t=null
endfunction
function C0G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real d
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
else
call UnitRemoveAbility(J67,1093814360)
call UnitRemoveAbility(J67,1093814576)
call UnitRemoveAbility(J67,1093814361)
call UnitRemoveAbility(J67,1093814362)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set J67=null
set t=null
return false
endfunction
function C5G takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093814350)
local real NY7=2+DB8
local integer id=1093814360
if DB8==1 then
set id=1093814360
elseif DB8==2 then
set id=1093814576
elseif DB8==3 then
set id=1093814361
elseif DB8==4 then
set id=1093814362
endif
call Z27(J67,id)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),id,false)
call TriggerRegisterTimerEvent(t,NY7,false)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(t,Condition(function C0G))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set CP7=null
set J67=null
set t=null
endfunction
function C2G takes nothing returns boolean
if GetSpellAbilityId()==1093814350 and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO) and ZG7(GetSpellTargetUnit())==false then
call C5G()
endif
return false
endfunction
function R28 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function C2G))
set t=null
endfunction
function C_G takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local real x=GetUnitX(J67)
local real y=GetUnitY(J67)
local integer DB8=GetUnitAbilityLevel(CP7,1093814612)
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
call UnitAddAbility(DA8,1093814613)
call SetUnitAbilityLevel(DA8,1093814613,DB8)
call IssueImmediateOrderById(DA8,$D0080)
set CP7=null
set J67=null
set DA8=null
endfunction
function L4G takes unit CP7,group g returns unit
local unit L7G=null
local real d=99999
local unit HQE=FirstOfGroup(g)
call GroupRemoveUnit(g,HQE)
loop
exitwhen HQE==null
if N37(CP7,HQE)<d then
set d=N37(CP7,HQE)
set L7G=HQE
endif
set HQE=FirstOfGroup(g)
call GroupRemoveUnit(g,HQE)
endloop
return L7G
endfunction
function L8G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=null
local group g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),$640+25,Condition(function L57))
set J67=L4G(CP7,g)
call ZH7(g)
if J67!=null then
call B27(CP7,J67,1747993910,"C_G",800)
endif
set g=null
set J67=null
set CP7=null
endfunction
function L9G takes nothing returns boolean
if GetSpellAbilityId()==1093814612 then
call L8G()
endif
return false
endfunction
function R18 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function L9G))
set t=null
endfunction
function LDG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093813335)
local unit YV8
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()==EVENT_UNIT_DEATH and IsPlayerEnemy(GetOwningPlayer(GetKillingUnit()),GetOwningPlayer(J67)) then
set YV8=GetKillingUnit()
if EC8(YV8)then
set YV8=(G7[GetPlayerId(GetOwningPlayer((YV8)))])
endif
if IsUnitType(YV8,UNIT_TYPE_STRUCTURE) then
call D38(CP7,YV8,1,25*DB8)
else
call D38(CP7,YV8,1,100*DB8)
endif
call DZ8(CP7,GetKillingUnit(),.5+.5*DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function LEG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DEATH)
call TriggerRegisterTimerEvent(t,$A,false)
call TriggerAddCondition(t,Condition(function LDG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("war3mapImported\\GaiaShield.mdx",J67,"origin")))
set t=null
set CP7=null
set J67=null
endfunction
function LFG takes nothing returns boolean
if GetSpellAbilityId()==1093813335 then
call LEG()
endif
return false
endfunction
function Register_DeathWatch takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LFG))
set t=null
endfunction
function LGG takes nothing returns nothing
if N37(E87,GetEnumUnit())>E97 then
call UnitRemoveAbility(GetEnumUnit(),1093813337)
endif
endfunction
function LHG takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(),1093813337)
endfunction
function LIG takes nothing returns boolean
return(IsUnitEnemy(IM4,GetOwningPlayer(GetFilterUnit()))and(GetUnitAbilityLevel(GetFilterUnit(),1093678162)==0 and IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and A47(GetFilterUnit())==false)and(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false or CC7(GetFilterUnit())))!=null
endfunction
function LJG takes nothing returns nothing
call GroupAddUnit(ED7,GetEnumUnit())
call UnitAddAbility(GetEnumUnit(),1093813337)
endfunction
function LKG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit DA8=(LoadUnitHandle(C7,(JZ7),(19)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local group g
local integer DB8=GetUnitAbilityLevel(CP7,1093813336)
if A47(DA8)or GetTriggerEvalCount(t)>$C8 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call ForGroup(DND,function LHG)
call ZH7(DND)
else
set E97=$FA+25
set E87=DA8
set IM4=CP7
call ForGroup(DND,function LGG)
set ED7=DND
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(DA8),GetUnitY(DA8),E97,Condition(function LIG))
call ForGroup(g,function LJG)
call ZH7(g)
set g=null
endif
set t=null
set CP7=null
return false
endfunction
function LMG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local integer id
local unit DA8
local integer DB8=GetUnitAbilityLevel(CP7,1093813336)
if DB8==1 then
set id=1865429330
elseif DB8==2 then
set id=1865429331
elseif DB8==3 then
set id=1865429329
else
set id=1865429332
endif
set DA8=CreateUnit(GetOwningPlayer(CP7),id,x,y,0)
call UnitApplyTimedLife(DA8,1112820806,$A)
call TriggerRegisterTimerEvent(t,.05,true)
call TriggerAddCondition(t,Condition(function LKG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(19),(DA8))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
set t=null
set CP7=null
set DA8=null
endfunction
function LNG takes nothing returns boolean
if GetSpellAbilityId()==1093813336 then
call LMG()
endif
return false
endfunction
function Register_RealityShift takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LNG))
set t=null
endfunction
function LOG takes nothing returns nothing
call D38(EE7,GetEnumUnit(),1,50+50*EF7)
endfunction
function LPG takes unit CP7,real x,real y returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(CP7),1697656901,x,y,0)
local group g=ZI7()
call UnitAddAbility(DA8,1093813553)
call IssuePointOrderById(DA8,$D0270,x,y)
set IM4=CP7
set EF7=GetUnitAbilityLevel(CP7,1093813552)
set EE7=CP7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LF7))
call ForGroup(g,function LOG)
call ZH7(g)
call DestroyEffect(AddSpecialEffect("",x,y))
set g=null
set DA8=null
endfunction
function LQG takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer i=0
local unit LRG
local boolean LSG=false
local real x
local real y
local integer JZ7=GetHandleId(CP7)
loop
exitwhen i>2 or LSG
set LRG=(LoadUnitHandle(C7,(JZ7),(724+i)))
if LRG!=null and A47(LRG)==false then
call KillUnit(LRG)
call RemoveSavedHandle(C7,(JZ7),(724+i))
set LSG=true
endif
set i=i+1
endloop
if LSG then
set x=GetSpellTargetX()
set y=GetSpellTargetY()
call LPG(CP7,x,y)
endif
set LRG=null
set CP7=null
endfunction
function LTG takes nothing returns boolean
if GetSpellAbilityId()==1093813552 then
call LQG()
endif
return false
endfunction
function LUG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit LRG
local integer i=0
local real x
local real y
set JZ7=GetHandleId(CP7)
loop
exitwhen i>2
set LRG=(LoadUnitHandle(C7,(JZ7),(724+i)))
if LRG!=null and A47(LRG)==false then
set x=GetUnitX(CP7)
set y=GetUnitY(CP7)
if i==0 then
set x=x-125
set y=y-125
elseif i==1 then
set x=x+125
set y=y-125
else
set x=x-125
set y=y+125
endif
call SetUnitX(LRG,x)
call SetUnitY(LRG,y)
if GetTriggerEventId()==EVENT_WIDGET_DEATH or A47(CP7)then
call KillUnit(LRG)
call RemoveSavedHandle(C7,(JZ7),(724+i))
endif
endif
set i=i+1
endloop
set LRG=null
set CP7=null
set t=null
return false
endfunction
function LVG takes unit CP7,integer JA7 returns nothing
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit LRG
if JA7==0 then
set x=x-125
set y=y-125
elseif JA7==1 then
set x=x+125
set y=y-125
else
set x=x-125
set y=y+125
endif
set LRG=CreateUnit(GetOwningPlayer(CP7),1747993682,x,y,0)
call SaveUnitHandle(C7,(GetHandleId(CP7)),(724+JA7),(LRG))
set LRG=null
endfunction
function LWG takes unit CP7 returns nothing
local integer i=0
local boolean LXG=false
local integer LYG=-1
local unit LRG
local integer JZ7=GetHandleId(CP7)
loop
exitwhen i>2 or LXG
set LRG=(LoadUnitHandle(C7,(JZ7),(724+i)))
if LRG==null or A47(LRG)then
set LYG=i
set LXG=true
endif
set i=i+1
endloop
if LXG then
call LVG(CP7,LYG)
endif
set LRG=null
endfunction
function LZG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer DB8=GetUnitAbilityLevel(CP7,1093813552)
if A47(CP7)==false then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_DEATH then
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(CP7)) and GetUnitAbilityLevel(GetTriggerUnit(),1093678162)==0 then
if N37(GetTriggerUnit(),CP7)<$401 and GetRandomInt(0,100)<($A+5*DB8)then
call LWG(CP7)
endif
endif
else
call LWG(CP7)
endif
endif
set t=null
set CP7=null
return false
endfunction
function LAG takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=GetTriggerUnit()
call TriggerRegisterTimerEvent(t,20,true)
call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function LZG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function LUG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function LBG takes nothing returns boolean
if GetLearnedSkill()==1093813552 and GetUnitAbilityLevel(GetTriggerUnit(),1093813552)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call LAG()
endif
return false
endfunction
function Register_HauntingEchos takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LTG))
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function LBG))
set t=null
endfunction
function LCG takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real WN9=(LoadReal(C7,(JZ7),(6)))
local real WO9=(LoadReal(C7,(JZ7),(7)))
local integer DB8=GetUnitAbilityLevel(CP7,1093813338)
local real F5D=(30*DB8)/$A
local real a=MY7(J67,CP7)*bj_DEGTORAD
local real x=WN9+F5D*Cos(a)
local real y=WO9+F5D*Sin(a)
call SetUnitX(J67,x)
call SetUnitY(J67,y)
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
if GetTriggerEvalCount(t)==$A then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call D38(CP7,J67,1,$A+$A*DB8)
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function L3G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.025,true)
call TriggerAddCondition(t,Condition(function LCG))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveReal(C7,(JZ7),(6),((GetUnitX(J67))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(J67))*1.))
set t=null
set CP7=null
set J67=null
endfunction
function L6G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local integer i=0
local boolean LSG=false
local integer JZ7
local unit LRG
local group g
if GetSpellAbilityId()==1093813552 then
set JZ7=GetHandleId(CP7)
loop
exitwhen i>2
set LRG=(LoadUnitHandle(C7,(JZ7),(724+i)))
if LRG!=null and A47(LRG)==false then
set LSG=true
endif
set i=i+1
endloop
set LRG=null
if LSG==false then
set CP7=null
return
endif
endif
set g=ZI7()
call GroupEnumUnitsInRange(g,GetUnitX(CP7),GetUnitY(CP7),725,Condition(function LV7))
call ForGroup(g,function L3G)
call ZH7(g)
set g=null
set CP7=null
endfunction
function LLG takes nothing returns boolean
if GetSpellAbilityId()==1093813552 or GetSpellAbilityId()==1093813336 or GetSpellAbilityId()==1093813335 then
if GetUnitAbilityLevel(GetTriggerUnit(),1093813338)>0 then
call L6G()
endif
endif
return false
endfunction
function Register_FatalAttraction takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function LLG))
set t=null
endfunction
function L1G takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ULE=(LoadInteger(C7,(JZ7),(422)))
local integer U1E=(LoadInteger(C7,(JZ7),(423)))
local integer VSD=(LoadInteger(C7,(JZ7),(424)))
call SetHeroAgi(J67,GetHeroAgi(J67,false)+ULE,true)
call SetHeroStr(J67,GetHeroStr(J67,false)+U1E,true)
call SetHeroInt(J67,GetHeroInt(J67,false)+VSD,true)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set J67=null
return false
endfunction
function L0G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local integer DB8=GetUnitAbilityLevel(CP7,1093813835)
local trigger t
local integer JZ7
local integer CJ9
local integer ULE
local integer U1E
local integer VSD
local real F5D
if IsUnitType(J67,UNIT_TYPE_HERO) then
set CJ9=Y_7(J67)
set F5D=.15
if CJ9==2 then
set ULE=R2I(F5D*GetHeroAgi(J67,false))-1
set U1E=0
set VSD=0
elseif CJ9==3 then
set ULE=0
set U1E=R2I(F5D*GetHeroStr(J67,false))-1
set VSD=0
elseif CJ9==1 then
set ULE=0
set U1E=0
set VSD=R2I(F5D*GetHeroInt(J67,false))-1
endif
call SetHeroAgi(J67,GetHeroAgi(J67,false)-ULE,true)
call SetHeroStr(J67,GetHeroStr(J67,false)-U1E,true)
call SetHeroInt(J67,GetHeroInt(J67,false)-VSD,true)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,7,false)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function L1G))
call SaveInteger(C7,(JZ7),(422),(ULE))
call SaveInteger(C7,(JZ7),(424),(VSD))
call SaveInteger(C7,(JZ7),(423),(U1E))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",J67,"chest"))
call D38(CP7,J67,EH7,50+50*DB8)
set CP7=null
set J67=null
endfunction
function L5G takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),x,y)*bj_DEGTORAD
set x=GetUnitX(CP7)
set y=GetUnitY(CP7)
if BW7(x,y,EG7)>0 then
set EH7=3
else
set EH7=1
endif
call GroupEnumUnitsInRange(g,x,y,EG7+25,Condition(function LV7))
call ForGroup(g,function L0G)
call ZH7(g)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\WhirlingDeath_01.mdx",CP7,"origin"))
set CP7=null
set g=null
endfunction
function L2G takes nothing returns boolean
if GetSpellAbilityId()==1093813835 then
call L5G()
endif
return false
endfunction
function R_8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function L2G))
set t=null
endfunction
function L_G takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093813555)
call D38(CP7,J67,3,60+40*DB8)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",J67,"origin"))
endfunction
function D4H takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),IP4)==false then
call GroupAddUnit(IP4,GetEnumUnit())
call L_G(IM4,GetEnumUnit())
endif
endfunction
function D7H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer D8H=(LoadInteger(C7,(JZ7),(18)))
local integer ZD8=GetTriggerEvalCount(t)
local unit D9H
local group DDH=(LoadGroupHandle(C7,(JZ7),(16)))
local group g
local boolean DEH=(LoadBoolean(C7,(JZ7),(727)))
local boolean DFH=(LoadBoolean(C7,(JZ7),(740)))
if BI8(ZO7)then
set DFH=true
call SaveBoolean(C7,(JZ7),(740),(DFH))
endif
if DEH==false then
set D9H=(LoadUnitHandle(C7,(JZ7),(700+D8H+1-ZD8)))
call RemoveUnit(D9H)
else
set D9H=(LoadUnitHandle(C7,(JZ7),(700+ZD8)))
if DFH==false then
call SetUnitX(ZO7,GetUnitX(D9H))
call SetUnitY(ZO7,GetUnitY(D9H))
endif
call RemoveUnit(D9H)
set g=ZI7()
set IM4=ZO7
set IP4=DDH
call GroupEnumUnitsInRange(g,GetUnitX(ZO7),GetUnitY(ZO7),$FA,Condition(function LN7))
call ForGroup(g,function D4H)
call ZH7(g)
endif
if ZD8==(D8H)then
call BW7(GetUnitX(ZO7),GetUnitY(ZO7),90)
call ZH7(DDH)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set ZO7=null
set D9H=null
set DDH=null
set g=null
return false
endfunction
function DGH takes nothing returns nothing
if YE7(GetEnumDestructable())and IsDestructableDeadBJ(GetEnumDestructable())==false then
set EI7=EI7+1
endif
endfunction
function DHH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
local real WY9=(LoadReal(C7,(JZ7),($D)))
local integer B59=(LoadInteger(C7,(JZ7),($C)))
local integer ZD8=GetTriggerEvalCount(t)
local real x=(LoadReal(C7,(JZ7),(6)))+ZD8*50*Cos(WY9*bj_DEGTORAD)
local real y=(LoadReal(C7,(JZ7),(7)))+ZD8*50*Sin(WY9*bj_DEGTORAD)
local boolean WGD=(LoadBoolean(C7,(JZ7),($F)))
local unit DIH
local trigger DJH=(LoadTriggerHandle(C7,(JZ7),($B)))
local integer DKH=GetHandleId(DJH)
local integer ID=1966092625
local real XCG=$FA
local rect r
local real d=90
set r=Rect(x-d,y-d,x+d,y+d)
set EI7=0
call EnumDestructablesInRect(r,Condition(function WE7),function DGH)
if EI7>0 or ZD8==B59 or ZD8==(B59-1)or ZD8==(B59-2)then
set ID=1966092624
endif
set DIH=CreateUnit(GetOwningPlayer(ZO7),ID,x,y,WY9)
call SaveUnitHandle(C7,(DKH),(700+ZD8),(DIH))
if EI7>0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call TriggerRegisterTimerEvent(DJH,.5/B59,true)
call TriggerAddCondition(DJH,Condition(function D7H))
call SaveInteger(C7,(DKH),(18),(ZD8))
call SaveBoolean(C7,(DKH),(727),(true))
call SaveUnitHandle(C7,(DKH),($E),(ZO7))
call SaveGroupHandle(C7,(DKH),(16),(ZI7()))
call SaveReal(C7,(DKH),(6),((x)*1.))
call SaveReal(C7,(DKH),(7),((y)*1.))
call SaveBoolean(C7,(DKH),(740),(false))
elseif ZD8>B59 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call TriggerRegisterTimerEvent(DJH,.5/B59,true)
call TriggerAddCondition(DJH,Condition(function D7H))
call SaveInteger(C7,(DKH),(18),(ZD8))
call SaveBoolean(C7,(DKH),(727),(false))
call SaveUnitHandle(C7,(DKH),($E),(ZO7))
call SaveGroupHandle(C7,(DKH),(16),(ZI7()))
call SaveBoolean(C7,(DKH),(740),(false))
endif
set t=null
set ZO7=null
set DIH=null
set DJH=null
return false
endfunction
function DMH takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real WY9=MZ7(GetUnitX(ZO7),GetUnitY(ZO7),GetLocationX(l),GetLocationY(l))
local integer DB8=GetUnitAbilityLevel(ZO7,1093813555)
local integer DNH
local integer B59
local trigger DOH=CreateTrigger()
set DNH=600+$C8*DB8
set B59=DNH/50
call SaveUnitHandle(C7,(JZ7),($E),(ZO7))
call SaveInteger(C7,(JZ7),(5),(DB8))
call SaveReal(C7,(JZ7),($D),((WY9)*1.))
call SaveInteger(C7,(JZ7),($C),(B59))
call SaveTriggerHandle(C7,(JZ7),($B),(DOH))
call SaveReal(C7,(JZ7),(6),((GetUnitX(ZO7))*1.))
call SaveReal(C7,(JZ7),(7),((GetUnitY(ZO7))*1.))
call TriggerRegisterTimerEvent(t,.5/B59,true)
call TriggerAddCondition(t,Condition(function DHH))
call RemoveLocation(l)
set t=null
set ZO7=null
set l=null
endfunction
function DPH takes nothing returns boolean
if GetSpellAbilityId()==1093813555 then
call DMH()
endif
return false
endfunction
function S48 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DPH))
set t=null
endfunction
function DQH takes unit CP7 returns nothing
local integer ZD8=(LoadInteger(C7,(GetHandleId(CP7)),(728)))
local integer DB8=GetUnitAbilityLevel(CP7,1093813556)
local integer i=1
set ZD8=IMinBJ(ZD8,4*DB8)
loop
exitwhen i>16
if ZD8==i then
call Z27(CP7,EJ7[i])
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),EJ7[i],false)
else
call UnitRemoveAbility(CP7,EJ7[i])
endif
set i=i+1
endloop
endfunction
function DRH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(CP7)),(728)))-1
call SaveInteger(C7,(GetHandleId(CP7)),(728),(ZD8))
call DQH(CP7)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function DSH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(CP7)),(728)))+1
if IsUnitEnemy(GetAttacker(),GetOwningPlayer(CP7)) then
call SaveInteger(C7,(GetHandleId(CP7)),(728),(ZD8))
call DQH(CP7)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,16,false)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function DRH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
endif
set t=null
set CP7=null
return false
endfunction
function DTH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function DSH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set t=null
set CP7=null
endfunction
function DUH takes nothing returns boolean
if GetLearnedSkill()==1093813556 and GetUnitAbilityLevel(GetTriggerUnit(),1093813556)==1 and IsUnitIllusion(GetTriggerUnit())==false then
call DTH()
endif
return false
endfunction
function S78 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(t,Condition(function DUH))
set t=null
set EJ7[1]=1093813319
set EJ7[2]=1093813318
set EJ7[3]=1093813324
set EJ7[4]=1093813325
set EJ7[5]=1093813322
set EJ7[6]=1093813321
set EJ7[7]=1093813326
set EJ7[8]=1093813327
set EJ7[9]=1093813320
set EJ7[$A]=1093813333
set EJ7[$B]=1093813328
set EJ7[$C]=1093813329
set EJ7[$D]=1093813330
set EJ7[$E]=1093813331
set EJ7[$F]=1093813332
set EJ7[16]=1093813323
endfunction
function DVH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
call UnitRemoveAbility(CP7,1114663271)
call UnitRemoveAbility(CP7,1111845217)
call UnitRemoveAbility(CP7,1093813848)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function DWH takes unit CP7,unit J67 returns nothing
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local integer L89=R2I(100*GetUnitState(J67,UNIT_STATE_LIFE)/GetUnitState(J67,UNIT_STATE_MAX_LIFE))
local integer DB8=B47(A_7(R2I(100-L89)/5,20),1)
call UnitAddAbility(DA8,1093813334)
call SetUnitAbilityLevel(DA8,1093813334,DB8)
call IssueTargetOrderById(DA8,$D006B,J67)
set DA8=null
endfunction
function DXH takes nothing returns nothing
if L8==false then
call D38(EO7,GetEnumUnit(),3,(25+25*EP7)*.5)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call DWH(EO7,GetEnumUnit())
endif
endfunction
function DYH takes nothing returns nothing
if IsUnitInGroup(GetEnumUnit(),EN7)==false then
call GroupAddUnit(EN7,GetEnumUnit())
call D38(EO7,GetEnumUnit(),3,60+40*EP7)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",GetEnumUnit(),"origin"))
call DWH(EO7,GetEnumUnit())
endif
endfunction
function DZH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real BC7=(LoadReal(C7,(JZ7),(6)))
local real B37=(LoadReal(C7,(JZ7),(7)))
local real x
local real y
local real a
local integer DAH=(LoadInteger(C7,(JZ7),(33)))
local group DND=(LoadGroupHandle(C7,(JZ7),($BB)))
local group g
local integer ZD8=(LoadInteger(C7,(JZ7),(34)))
local real DBH
if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT then
if GetSpellAbilityId()==1093813848 then
call SaveInteger(C7,(JZ7),(33),(2))
call GroupClear(DND)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813848,false)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,0,false)
call TriggerAddCondition(t,Condition(function DVH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
endif
elseif GetTriggerEventId()==EVENT_WIDGET_DEATH or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==-1 then
call L97(CP7)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093813557 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813557,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813848,false)
call UnitRemoveAbility(CP7,1093813848)
call UnitRemoveAbility(CP7,1114663271)
call UnitRemoveAbility(CP7,1111845217)
call KillUnit(BB7)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
elseif DAH==0 then
set a=MZ7(GetUnitX(BB7),GetUnitY(BB7),BC7,B37)*bj_DEGTORAD
set x=GetUnitX(BB7)+16*Cos(a)
set y=GetUnitY(BB7)+16*Sin(a)
call BW7(x,y,$AF)
if N67(x,y,BC7,B37)<40 then
set x=BC7
set y=B37
endif
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
set IM4=CP7
set EO7=CP7
set EP7=GetUnitAbilityLevel(CP7,1093813557)
set EN7=DND
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,EK7+25,Condition(function LF7))
call ForGroup(g,function DYH)
call ZH7(g)
if x==BC7 and y==B37 then
call SaveInteger(C7,(JZ7),(33),(1))
call GroupClear(DND)
endif
elseif DAH==1 then
set ZD8=ZD8+1
if ZD8==25 then
set x=GetUnitX(BB7)
set y=GetUnitY(BB7)
call BW7(x,y,$AF)
set ZD8=0
set IM4=CP7
set EO7=CP7
set EP7=GetUnitAbilityLevel(CP7,1093813557)
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,EM7+25,Condition(function LF7))
call ForGroup(g,function DXH)
call ZH7(g)
set DBH=($F+5*EP7)/2
if GetUnitState(CP7,UNIT_STATE_MANA)<DBH or N37(CP7,BB7)>$7D0 then
call SaveInteger(C7,(JZ7),(33),(2))
call GroupClear(DND)
call UnitRemoveAbility(CP7,1093813848)
call UnitRemoveAbility(CP7,1114663271)
call UnitRemoveAbility(CP7,1111845217)
else
call SetUnitState(CP7,UNIT_STATE_MANA,GetUnitState(CP7,UNIT_STATE_MANA)-DBH)
endif
endif
call SaveInteger(C7,(JZ7),(34),(ZD8))
elseif DAH==2 then
set a=MZ7(GetUnitX(BB7),GetUnitY(BB7),GetUnitX(CP7),GetUnitY(CP7))*bj_DEGTORAD
set x=GetUnitX(BB7)+16*Cos(a)
set y=GetUnitY(BB7)+16*Sin(a)
call BW7(x,y,$AF)
call SetUnitX(BB7,x)
call SetUnitY(BB7,y)
set IM4=CP7
set EO7=CP7
set EP7=GetUnitAbilityLevel(CP7,1093813557)
set EN7=DND
set g=ZI7()
call GroupEnumUnitsInRange(g,x,y,EK7+25,Condition(function LF7))
call ForGroup(g,function DYH)
call ZH7(g)
if N67(x,y,GetUnitX(CP7),GetUnitY(CP7))<40 then
call L97(CP7)
call KillUnit(BB7)
call ZH7(DND)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if(LoadInteger(C7,(GetHandleId(CP7)),(704)))==0 or(LoadInteger(C7,(GetHandleId(CP7)),(704)))==1093813557 then
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813557,true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813848,false)
endif
endif
set t=null
set CP7=null
set BB7=null
set DND=null
set g=null
return false
endfunction
function DCH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetSpellTargetX()
local real y=GetSpellTargetY()
local real a=MZ7(GetUnitX(CP7),GetUnitY(CP7),x,y)*bj_DEGTORAD
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993683,GetUnitX(CP7),GetUnitY(CP7),a*bj_RADTODEG)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerRegisterUnitEvent(t,CP7,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function DZH))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),(6),((x)*1.))
call SaveReal(C7,(JZ7),(7),((y)*1.))
call SaveInteger(C7,(JZ7),(33),(0))
call SaveGroupHandle(C7,(JZ7),($BB),(ZI7()))
call L77(CP7)
call Z27(CP7,1093813848)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813557,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(CP7),1093813848,true)
set CP7=null
set t=null
set BB7=null
endfunction
function D3H takes nothing returns boolean
if GetSpellAbilityId()==1093813557 then
call DCH()
endif
return false
endfunction
function S88 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D3H))
call AC7(1093813334)
set t=null
endfunction
function Trap_RemoveBonus takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if((LoadInteger(C7,(GetHandleId(CP7)),(754)))==(LoadInteger(C7,(JZ7),(754))))then
call D28((CP7),(0))
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set t=null
set CP7=null
return false
endfunction
function D6H takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set FV7=FV7+60
else
set FV7=FV7+20
endif
call UnitRemoveAbility(GetEnumUnit(),1093815365)
call UnitRemoveAbility(GetEnumUnit(),1110460209)
endfunction
function DLH takes nothing returns nothing
if IsUnitType(GetEnumUnit(),UNIT_TYPE_HERO) then
set FV7=FV7+60
else
set FV7=FV7+20
endif
endfunction
function D1H takes nothing returns nothing
call DZ8(FW7,GetEnumUnit(),.5+FX7*.5)
call D38(FW7,GetEnumUnit(),1,FV7)
endfunction
function D0H takes nothing returns boolean
return GetUnitAbilityLevel(GetFilterUnit(),1110460209)>0
endfunction
function RFD takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
set FW7=CP7
set FX7=GetUnitAbilityLevel(CP7,1093815353)
set FV7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function D0H))
call ForGroup(g,function D6H)
call ForGroup(g,function D1H)
call ZH7(g)
set g=null
set CP7=null
endfunction
function D5H takes nothing returns boolean
if GetSpellAbilityId()==1093815353 then
call RFD()
endif
return false
endfunction
function D2H takes string BQ7,unit J67,unit ZO7 returns nothing
local texttag tt=CreateTextTag()
call SetTextTagText(tt,BQ7,.033)
call SetTextTagPosUnit(tt,J67,64)
call SetTextTagColor(tt,0,75,$FF,$FF)
call SetTextTagVelocity(tt,0,.0355)
call SetTextTagFadepoint(tt,.15)
call SetTextTagPermanent(tt,false)
call SetTextTagLifespan(tt,1.)
if IsUnitAlly(ZO7,GetLocalPlayer())or Y27(GetLocalPlayer())then
call SetTextTagVisibility(tt,true)
else
call SetTextTagVisibility(tt,false)
endif
set tt=null
endfunction
function D_H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local real CS8=(LoadReal(C7,(GetHandleId(J67)),(753)))
if GetTriggerEventId()==EVENT_WIDGET_DEATH or CS8<(TimerGetElapsed(V))then
call UnitRemoveAbility(J67,1093815365)
call UnitRemoveAbility(J67,1110460209)
call SaveReal(C7,(GetHandleId(J67)),(753),((0)*1.))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set J67=null
return false
endfunction
function E4H takes unit CP7,unit J67 returns nothing
local trigger t
local integer JZ7
local group g=ZI7()
call SaveReal(C7,(GetHandleId(J67)),(753),(((TimerGetElapsed(V))+FU7)*1.))
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.25,true)
call TriggerRegisterDeathEvent(t,J67)
call TriggerAddCondition(t,Condition(function D_H))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call Z27(J67,1093815365)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815365,false)
set FW7=CP7
set FX7=GetUnitAbilityLevel(CP7,1093815353)
set FV7=0
call GroupEnumUnitsInRange(g,0,0,9999,Condition(function D0H))
call ForGroup(g,function DLH)
call ZH7(g)
call D2H(I2S(FV7),J67,CP7)
set t=null
endfunction
function E7H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
if GetTriggerEventId()!=EVENT_UNIT_DAMAGED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
if GetEventDamageSource()==CP7 and GetEventDamage()>0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if BP8(J67)==false then
call E4H(CP7,J67)
endif
endif
endif
set t=null
set CP7=null
set J67=null
return false
endfunction
function E8H takes nothing returns nothing
local unit CP7=GetAttacker()
local unit J67=GetTriggerUnit()
local trigger t
local integer JZ7
if RG7(CP7,"4325")==false then
call RR7(CP7,"4325",.2)
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,J67,EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2.5,false)
call TriggerAddCondition(t,Condition(function E7H))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
endif
set CP7=null
set J67=null
endfunction
function E9H takes nothing returns boolean
if GetUnitAbilityLevel(GetAttacker(),1093815353)>0 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(GetTriggerUnit())!=1848651852 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetAttacker()))then
call E8H()
endif
return false
endfunction
function SF8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function D5H))
set t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(t,Condition(function E9H))
set t=null
endfunction
function EDH takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit EEH=IM4
local unit J67=IN4
local integer DB8=GetUnitAbilityLevel(CP7,1093815361)
if Y57(J67)==false then
call D38(CP7,J67,1,20+80*DB8)
call CA7(J67,1093815627,1,4,1110460212)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093815627,false)
call UnitMakeAbilityPermanent(J67,true,1093815626)
endif
set CP7=null
set J67=null
set EEH=null
endfunction
function EFH takes nothing returns nothing
local unit CP7=FY7
local unit J67=GetEnumUnit()
local trigger t=B27(FZ7,J67,1747993925,"EDH",600)
local integer JZ7=GetHandleId(t)
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
set CP7=null
set J67=null
set t=null
endfunction
function EGH takes unit CP7,unit J67 returns nothing
local integer DB8=GetUnitAbilityLevel(CP7,1093815361)
local group g=ZI7()
set IM4=CP7
set FY7=CP7
set FZ7=J67
call GroupEnumUnitsInRange(g,GetUnitX(J67),GetUnitY(J67),500+25,Condition(function LF7))
call GroupRemoveUnit(g,J67)
call ForGroup(g,function EFH)
call ZH7(g)
set CP7=null
set J67=null
set g=null
endfunction
function EHH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local unit BB7=(LoadUnitHandle(C7,(JZ7),(45)))
local real x=GetUnitX(BB7)
local real y=GetUnitY(BB7)
local real BC7=GetUnitX(J67)
local real B37=GetUnitY(J67)
local real EIH=N67(BC7,B37,x,y)
local integer ZD8=GetTriggerEvalCount(t)
local real BL7=MZ7(x,y,BC7,B37)
local real B17
local real B07
local real B67=EIH/((FA7/.02)-ZD8)
if B67<FB7*.02 then
set B67=FB7*.02
endif
set B17=x+B67*Cos(BL7*bj_DEGTORAD)
set B07=y+B67*Sin(BL7*bj_DEGTORAD)
call SetUnitX(BB7,B17)
call SetUnitY(BB7,B07)
call SetUnitFacing(BB7,BL7)
if N67(BC7,B37,B17,B07)<=B67 then
call KillUnit(BB7)
call EGH(CP7,J67)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set J67=null
set CP7=null
set BB7=null
return false
endfunction
function EJH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit BB7=CreateUnit(GetOwningPlayer(CP7),1747993930,GetUnitX(CP7),GetUnitY(CP7),0)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerAddCondition(t,Condition(function EHH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveUnitHandle(C7,(JZ7),(45),(BB7))
set CP7=null
set J67=null
set BB7=null
set t=null
endfunction
function EKH takes nothing returns boolean
if GetSpellAbilityId()==1093815361 then
call EJH()
endif
return false
endfunction
function SE8 takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EKH))
set t=null
endfunction
function EMH takes nothing returns nothing
call DZ8(EQ7,GetEnumUnit(),1.5)
call D38(EQ7,GetEnumUnit(),2,50+50*ER7)
endfunction
function ENH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local real a=(LoadReal(C7,(JZ7),($89)))
local real BC7=(LoadReal(C7,(JZ7),(47)))
local real B37=(LoadReal(C7,(JZ7),(48)))
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local group g=ZI7()
local integer DB8=GetUnitAbilityLevel(CP7,1093813812)
set x=AY7(x+32*Cos(a))
set y=AZ7(y+32*Sin(a))
if N67(x,y,BC7,B37)<40 then
set x=BC7
set y=B37
endif
call SetUnitX(CP7,x)
call SetUnitY(CP7,y)
call SetUnitFacing(CP7,a*bj_RADTODEG)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,125+25,Condition(function LF7))
if FirstOfGroup(g)!=null or(x==BC7 and y==B37)or GetTriggerEvalCount(t)>$C8 or GetTriggerEventId()==EVENT_WIDGET_DEATH then
call DestroyEffect(AddSpecialEffect("war3mapImported\\BlackDragonMissile.mdx",x,y))
call GroupEnumUnitsInRange(g,x,y,300+25,Condition(function LF7))
set ER7=DB8
set EQ7=CP7
if GetTriggerEventId()!=EVENT_WIDGET_DEATH then
call ForGroup(g,function EMH)
endif
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
call ZH7(g)
set t=null
set CP7=null
set g=null
return false
endfunction
function EOH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local real a=MZ7(x,y,BC7,B37)*bj_DEGTORAD
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call TriggerRegisterTimerEvent(t,.02,true)
call TriggerRegisterDeathEvent(t,CP7)
call TriggerAddCondition(t,Condition(function ENH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveReal(C7,(JZ7),($89),((a)*1.))
call SaveReal(C7,(JZ7),(47),((BC7)*1.))
call SaveReal(C7,(JZ7),(48),((B37)*1.))
set CP7=null
set t=null
endfunction
function EPH takes nothing returns boolean
if GetSpellAbilityId()==1093813812 then
call EOH()
endif
return false
endfunction
function Register_SonicBoom takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EPH))
set t=null
endfunction
function EQH takes nothing returns nothing
local unit CP7=ES7
local unit J67=GetEnumUnit()
call CW7(J67,1093813811,1,$A)
call D38(CP7,J67,2,50*ET7+2*GetHeroAgi(CP7,true))
set CP7=null
set J67=null
endfunction
function ERH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real ESH=B87((TimerGetElapsed(V))-(LoadReal(C7,(GetHandleId(CP7)),(358))),5.)
local integer DB8=GetUnitAbilityLevel(CP7,1093813573)
local real YU9=(40+80*DB8)*(ESH)
local group g=ZI7()
local real d=ESH*600
local real a=(LoadReal(C7,(GetHandleId(CP7)),(736)))
local real x=GetUnitX(CP7)+d*Cos(a)
local real y=GetUnitY(CP7)+d*Sin(a)
set IM4=CP7
call GroupEnumUnitsInRange(g,x,y,325,Condition(function LF7))
set ET7=DB8
set ES7=CP7
call ForGroup(g,function EQH)
call ZH7(g)
call BK7("effects\\BasicWaterFlash.mdx",x,y,1)
set CP7=null
set g=null
endfunction
function ETH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=(LoadUnitHandle(C7,(JZ7),($E)))
call SetUnitTimeScale(ZO7,1)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if GetTriggerEventId()!=EVENT_UNIT_DEATH then
call OD7(ZO7)
endif
set t=null
set ZO7=null
return false
endfunction
function EUH takes nothing returns nothing
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit ZO7=GetTriggerUnit()
local location l=GetSpellTargetLoc()
local real x=GetLocationX(l)
local real y=GetLocationY(l)
local real a=MZ7(GetUnitX(ZO7),GetUnitY(ZO7),x,y)*bj_DEGTORAD
local real D49=RMaxBJ(N67(GetUnitX(ZO7),GetUnitY(ZO7),x,y)/600,.32)
call RemoveLocation(l)
call SaveReal(C7,(GetHandleId(ZO7)),(356),((x)*1.))
call SaveReal(C7,(GetHandleId(ZO7)),(357),((y)*1.))
call SaveReal(C7,(GetHandleId(ZO7)),(736),((a)*1.))
call SaveReal(C7,(GetHandleId(ZO7)),(358),(((TimerGetElapsed(V)))*1.))
call SetUnitTimeScale(ZO7,.75)
call SaveUnitHandle(C7,(JZ7),($E),(ZO7))
call TriggerRegisterTimerEvent(t,D49-.01,false)
call TriggerRegisterUnitEvent(t,ZO7,EVENT_UNIT_DEATH)
call TriggerAddCondition(t,Condition(function ETH))
set t=null
set l=null
set ZO7=null
endfunction
function EVH takes nothing returns boolean
if GetSpellAbilityId()==1093813573 then
if GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_CAST then
call SaveBoolean(C7,(GetHandleId(GetTriggerUnit())),(360),(false))
call EUH()
elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_SPELL_EFFECT then
call SaveBoolean(C7,(GetHandleId(GetTriggerUnit())),(360),(true))
elseif(LoadBoolean(C7,(GetHandleId(GetTriggerUnit())),(360))) then
call ERH()
endif
endif
return false
endfunction
function Register_WindBlast takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_CAST)
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EVH))
set t=null
endfunction
function EWH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetUnitAbilityLevel(CP7,1110456374)==0 and GetUnitAbilityLevel(CP7,1110456375)==0 then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call UnitRemoveAbility(CP7,1093813810)
call UnitRemoveAbility(CP7,1110459959)
endif
set t=null
set CP7=null
return false
endfunction
function EXH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=GetSpellTargetUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093813810,false)
call Z27(J67,1093813810)
call TriggerRegisterTimerEvent(t,.2,true)
call TriggerAddCondition(t,Condition(function EWH))
call SaveUnitHandle(C7,(JZ7),(2),(J67))
set CP7=null
set t=null
endfunction
function EYH takes nothing returns boolean
if GetSpellAbilityId()==1093813808 then
call EXH()
endif
return false
endfunction
function Register_WindBarrier takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function EYH))
set t=null
endfunction
function EZH takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=GetUnitAbilityLevel(CP7,1093813813)
local integer id
local integer EAH
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
if IsUnitAlly(J67,GetOwningPlayer(CP7)) then
set EAH=1110459960
if DB8==1 then
set id=1093813831
elseif DB8==2 then
set id=1093813830
elseif DB8==3 then
set id=1093813832
endif
call SetUnitState(J67,UNIT_STATE_LIFE,GetUnitState(J67,UNIT_STATE_LIFE)+100+50*DB8)
else
set EAH=1110459961
if DB8==1 then
set id=1093813828
elseif DB8==2 then
set id=1093813827
elseif DB8==3 then
set id=1093813829
endif
call D38(CP7,J67,1,100+50*DB8)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),id,false)
call CA7(J67,id,1,4,EAH)
set t=null
set CP7=null
set J67=null
return false
endfunction
function EBH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetEnumUnit()
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call BW8(J67)
call BT8(J67,0,0)
call UnitAddAbility(DA8,1093813833)
call IssueTargetOrderById(DA8,$D00B0,J67)
call TriggerRegisterTimerEvent(t,4,false)
call TriggerAddCondition(t,Condition(function EZH))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
set t=null
set CP7=null
set J67=null
set DA8=null
endfunction
function ECH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local real BC7=GetSpellTargetX()
local real B37=GetSpellTargetY()
local group g=ZI7()
call BA7(GetOwningPlayer(CP7),4,BC7,B37,300)
call GroupEnumUnitsInRange(g,BC7,B37,400+25,Condition(function C37))
call ForGroup(g,function EBH)
call ZH7(g)
set CP7=null
set g=null
endfunction
function E3H takes nothing returns boolean
if GetSpellAbilityId()==1093813813 then
call ECH()
endif
return false
endfunction
function Register_PrevailingWinds takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E3H))
set t=null
endfunction
function E6H takes nothing returns nothing
local integer JZ7=GetHandleId(GetTriggeringTrigger())
local unit CP7=IM4
local unit J67=IN4
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local real YU9=GetUnitAbilityLevel(CP7,1093813844)*60+40
call UnitAddAbility(DA8,1093813845)
call IssueTargetOrderById(DA8,$D008A,J67)
call D38(CP7,J67,1,YU9)
set DA8=null
set CP7=null
set J67=null
endfunction
function ELH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local group g=ZI7()
local real x=GetUnitX(CP7)
local real y=GetUnitY(CP7)
local unit u1=null
local unit u2=null
local unit u3=null
local integer DRF=0
local unit u
local trigger t
call GroupEnumUnitsInRange(g,x,y,425,Condition(function LV7))
loop
exitwhen FirstOfGroup(g)==null or DRF==3
set u=GroupPickRandomUnit(g)
if u!=null then
if DRF==0 then
set u1=u
elseif DRF==1 then
set u2=u
elseif DRF==2 then
set u3=u
endif
set DRF=DRF+1
call GroupRemoveUnit(g,u)
endif
endloop
call ZH7(g)
if u1!=null then
call B27(CP7,u1,1747993690,"E6H",400)
endif
if u2!=null then
call B27(CP7,u2,1747993690,"E6H",400)
endif
if u3!=null then
call B27(CP7,u3,1747993690,"E6H",400)
endif
set g=null
set CP7=null
set u=null
set u1=null
set u2=null
set u3=null
endfunction
function E1H takes nothing returns boolean
if GetSpellAbilityId()==1093813844 then
call ELH()
endif
return false
endfunction
function Register_HolyShackles takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function E1H))
set t=null
endfunction
function E0H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local integer W99=(LoadInteger(C7,(JZ7),(30)))
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer ZD8=(LoadInteger(C7,(GetHandleId(CP7)),(737)))
local trigger E5H=(LoadTriggerHandle(C7,(GetHandleId(CP7)),(738)))
if GetTriggerEventId()==EVENT_UNIT_DAMAGED then
if GetEventDamageSource()==CP7 then
call DisableTrigger(t)
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
set ZD8=ZD8-1
if ZD8==0 then
call FlushChildHashtable(C7,(GetHandleId(E5H)))
call RN7(E5H)
call RemoveSavedHandle(C7,(GetHandleId(CP7)),(738))
call SaveInteger(C7,(GetHandleId(CP7)),(737),(-1))
call UnitRemoveAbility(CP7,1093813838)
call UnitRemoveAbility(CP7,1110459969)
else
call SaveInteger(C7,(GetHandleId(CP7)),(737),(ZD8))
endif
endif
else
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
endif
set t=null
set J67=null
set CP7=null
set E5H=null
return false
endfunction
function E2H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit CP7=(LoadUnitHandle(C7,(JZ7),(2)))
if GetTriggerEventId()!=EVENT_PLAYER_UNIT_ATTACKED then
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
call RemoveSavedHandle(C7,(GetHandleId(CP7)),(738))
call SaveInteger(C7,(GetHandleId(CP7)),(737),(-1))
call UnitRemoveAbility(CP7,1093813838)
call UnitRemoveAbility(CP7,1110459969)
elseif GetAttacker()==CP7 then
set t=CreateTrigger()
set JZ7=GetHandleId(t)
call TriggerRegisterUnitEvent(t,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
call TriggerRegisterTimerEvent(t,2,false)
call TriggerAddCondition(t,Condition(function E0H))
call SaveUnitHandle(C7,(JZ7),(2),(CP7))
call SaveUnitHandle(C7,(JZ7),(17),(GetTriggerUnit()))
endif
set t=null
set CP7=null
return false
endfunction
function E_H takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call SetPlayerAbilityAvailable(GetOwningPlayer(J67),1093813838,false)
call Z27(J67,1093813838)
call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterTimerEvent(t,$C,false)
call TriggerAddCondition(t,Condition(function E2H))
call SaveUnitHandle(C7,(JZ7),(2),(J67))
call SaveInteger(C7,(GetHandleId(J67)),(737),(GetUnitAbilityLevel(CP7,1093813841)+1))
call SaveTriggerHandle(C7,(GetHandleId(J67)),(738),(t))
set J67=null
set t=null
set CP7=null
endfunction
function F4H takes nothing returns boolean
if GetSpellAbilityId()==1093813841 then
call E_H()
endif
return false
endfunction
function Register_Focus takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F4H))
set t=null
endfunction
function F7H takes nothing returns boolean
local trigger t=GetTriggeringTrigger()
local integer JZ7=GetHandleId(t)
local unit J67=(LoadUnitHandle(C7,(JZ7),(17)))
local integer DB8=(LoadInteger(C7,(JZ7),(5)))
local unit DA8
if GetTriggerEvalCount(t)==1 then
set DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
call UnitAddAbility(DA8,1093813847)
call IssueTargetOrderById(DA8,$D0267,J67)
endif
if(DB8+3)*$A<GetTriggerEvalCount(t)then
call UnitRemoveAbility(J67,1110459974)
call UnitRemoveAbility(J67,1098282348)
call UnitRemoveAbility(J67,1093678162)
call UnitRemoveAbility(J67,1096971630)
call DestroyEffect((LoadEffectHandle(C7,(JZ7),(32))))
call FlushChildHashtable(C7,(JZ7))
call RN7(t)
else
call BW8(J67)
call BT8(J67,0,0)
endif
set t=null
set J67=null
return false
endfunction
function F8H takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local trigger t=CreateTrigger()
local integer JZ7=GetHandleId(t)
call Z27(J67,1098282348)
call Z27(J67,1096971630)
call Z27(J67,1093678162)
call TriggerRegisterTimerEvent(t,.1,true)
call TriggerAddCondition(t,Condition(function F7H))
call SaveInteger(C7,(JZ7),(5),(GetUnitAbilityLevel(CP7,1093813836)))
call SaveUnitHandle(C7,(JZ7),(17),(J67))
call SaveEffectHandle(C7,(JZ7),(32),(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl",J67,"origin")))
call BW8(J67)
call BT8(J67,0,0)
set t=null
set J67=null
set CP7=null
endfunction
function F9H takes nothing returns boolean
if GetSpellAbilityId()==1093813836 then
call F8H()
endif
return false
endfunction
function Register_DivineIntervention takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function F9H))
set t=null
endfunction
function FDH takes nothing returns nothing
local unit CP7=GetTriggerUnit()
local unit J67=GetSpellTargetUnit()
local unit DA8=CreateUnit(GetOwningPlayer(J67),1697656901,GetUnitX(J67),GetUnitY(J67),0)
local integer DB8=GetUnitAbilityLevel(CP7,1093813583)
call UnitAddAbility(DA8,1093813584)
call IssuePointOrderById(DA8,$D0270,GetUnitX(J67),GetUnitY(J67))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\FrozenOrb_NoTrail.mdx",J67,"chest"))
call D38(CP7,J67,1,DB8*75)
set CP7=null
set DA8=null
set J67=null
endfunction
function FEH takes nothing returns boolean
if GetSpellAbilityId()==1093813583 then
call FDH()
endif
return false
endfunction
function Register_Chill takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(t,Condition(function FEH))
set t=null
endfunction

function InitCustomTeams takes nothing returns nothing
	local integer index = 1
	loop
	    exitwhen index > $B
	    if index < 6 then
	        call SetPlayerTeam(Player(index),0)
	    elseif index > 6 then
	    	call SetPlayerTeam(Player(index),1)
	    endif
	    set index = index + 1
	endloop
endfunction

function FFH takes string FGH,string FHH,integer FIH returns integer
local integer i=FIH
local string FJH=null
set LP4="Custom_StrIndexOf"
loop
exitwhen i==StringLength(FGH)
set FJH=SubString(FGH,i,i+1)
if(FJH==FHH)then
return i
endif
set i=i+1
endloop
return-1
endfunction
function FKH takes nothing returns nothing
local string FMH=GetEventPlayerChatString()
local integer FNH=FFH(FMH," ",0)
local integer FOH=FFH(FMH," ",FNH+1)
local integer FPH=S2I(SubString(FMH,FNH,FOH+1))
local string FQH=SubString(FMH,FOH+1,StringLength(FMH))
local boolean FRH=false
local integer i=0
set LP4="FKH"
set FQH="+"+FQH
if FPH<$C then
loop
exitwhen i==$E
if(FQH==GetPlayerName(Player(i)))then
set FRH=true
endif
set i=i+1
endloop
if((not FRH)and(UF4>0)and(GetPlayerController(Player(FPH))==MAP_CONTROL_COMPUTER)and(FPH!=0)and(FPH!=6)and(FPH<$C)and(StringLength(FQH)<20))then
set KY4[FPH]=FQH
call SetPlayerName(Player(FPH),FQH)
set UF4=UF4-1
endif
endif
endfunction
function FSH takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
set LP4="FSH"
loop
exitwhen i==$E
call TriggerRegisterPlayerChatEvent(t,Player(i),"-rn ",false)
set i=i+1
endloop
call TriggerAddAction(t,function FKH)
set t=null
endfunction
function SebraHookAim takes nothing returns nothing
local real dt=TimerGetElapsed(V)
local real X
local real Y
local real dx
local real dy
local real Vx
local real Vy
local group g=ZI7()
local unit ZO7=GetOrderedUnit()
local unit J67
local integer i=1
local integer DB8
call SyncSelections()
call GroupEnumUnitsSelected(g,GetTriggerPlayer(),null)
set J67=FirstOfGroup(g)
call ZH7(g)
set g=null
set dx=GetUnitX(J67)
set dy=GetUnitY(J67)
call NX7(.1)
set dt=TimerGetElapsed(V)-dt
set X=GetUnitX(J67)
set Y=GetUnitY(J67)
set dx=(X-dx)/dt
set dy=(Y-dy)/dt
loop
set ZO7=G7[i]
set DB8=GetUnitAbilityLevel(ZO7,1093678665)
if DB8>0 then
set dt=ZJ7(40./.03,X+dx*.3-GetUnitX(ZO7),Y+dy*.3-GetUnitY(ZO7),dx,dy)
if dt>0 and dt<=((400.+200.*DB8)*.03/40.)then
call IssuePointOrderById(ZO7,$D0278,X+dx*(dt+.3),Y+dy*(dt+.3))
endif
endif
set i=i+1
exitwhen i>$A
endloop
set J67=null
set ZO7=null
endfunction
function FTH takes nothing returns nothing
set WN4=CreateRegion()
call RegionAddRect(WN4,ND)
set WO4=CreateRegion()
call RegionAddRect(WO4,OD)
set WP4=CreateRegion()
call RegionAddRect(WP4,TD)
call RegionAddRect(WP4,WD)
call RegionAddRect(WP4,XD)
set WQ4=CreateRegion()
call RegionAddRect(WQ4,YD)
call RegionAddRect(WQ4,ZD)
call RegionAddRect(WQ4,AD)
set IT4=CreateRegion()
call RegionAddRect(IT4,BD)
call RegionAddRect(IT4,LD)
call RegionAddRect(IT4,KE)
call RegionAddRect(IT4,RE)
call RegionAddRect(IT4,SE)
call RegionAddRect(IT4,TE)
call RegionAddRect(IT4,WE)
call RegionAddRect(IT4,YE)
call RegionAddRect(IT4,ZE)
call RegionAddRect(IT4,EF)
call RegionAddRect(IT4,FF)
call RegionAddRect(IT4,GF)
call RegionAddRect(IT4,HF)
call RegionAddRect(IT4,JF)
call RegionAddRect(IT4,KF)
call RegionAddRect(IT4,MF)
call RegionAddRect(IT4,NF)
call RegionAddRect(IT4,OF)
call RegionAddRect(IT4,PF)
call RegionAddRect(IT4,QF)
call RegionAddRect(IT4,RF)
call RegionAddRect(IT4,SF)
call RegionAddRect(IT4,TF)
call RegionAddRect(IT4,UF)
call RegionAddRect(IT4,WF)
call RegionAddRect(IT4,XF)
call RegionAddRect(IT4,YF)
call RegionAddRect(IT4,ZF)
call RegionAddRect(IT4,BF)
call RegionAddRect(IT4,CF)
call RegionAddRect(IT4,LF)
call RegionAddRect(IT4,DG)
call RegionAddRect(IT4,EG)
call RegionAddRect(IT4,FG)
call RegionAddRect(IT4,GG)
call RegionAddRect(IT4,JG)
call RegionAddRect(IT4,MG)
call RegionAddRect(IT4,OG)
call RegionAddRect(IT4,PG)
call RegionAddRect(IT4,QG)
call RegionAddRect(IT4,RG)
call RegionAddRect(IT4,SG)
call RegionAddRect(IT4,TG)
call RegionAddRect(IT4,UG)
call RegionAddRect(IT4,VG)
call RegionAddRect(IT4,WG)
call RegionAddRect(IT4,XG)
call RegionAddRect(IT4,ZG)
call RegionAddRect(IT4,AG)
call RegionAddRect(IT4,BG)
call RegionAddRect(IT4,CG)
call RegionAddRect(IT4,LG)
call RegionAddRect(IT4,DH)
call RegionAddRect(IT4,EH)
call RegionAddRect(IT4,HH)
call RegionAddRect(IT4,OH)
call RegionAddRect(IT4,PH)
call RegionAddRect(IT4,QH)
call RegionAddRect(IT4,RH)
call RegionAddRect(IT4,TH)
call RegionAddRect(IT4,UH)
call RegionAddRect(IT4,WH)
call RegionAddRect(IT4,XH)
call RegionAddRect(IT4,YH)
call RegionAddRect(IT4,ZH)
call RegionAddRect(IT4,AH)
call RegionAddRect(IT4,CH)
call RegionAddRect(IT4,DI)
call RegionAddRect(IT4,EI)
call RegionAddRect(IT4,GI)
call RegionAddRect(IT4,HI)
call RegionAddRect(IT4,II)
call RegionAddRect(IT4,JI)
call RegionAddRect(IT4,NI)
call RegionAddRect(IT4,PI)
call RegionAddRect(IT4,SI)
call RegionAddRect(IT4,TI)
call RegionAddRect(IT4,UI)
call RegionAddRect(IT4,WI)
call RegionAddRect(IT4,XI)
call RegionAddRect(IT4,YI)
call RegionAddRect(IT4,BI)
call RegionAddRect(IT4,CI)
call RegionAddRect(IT4,LI)
call RegionAddRect(IT4,TJ)
call RegionAddRect(IT4,MK)
call RegionAddRect(IT4,UK)
call RegionAddRect(IT4,YK)
call RegionAddRect(IT4,SM)
call RegionAddRect(IT4,TM)
call RegionAddRect(IT4,UM)
call RegionAddRect(IT4,WM)
call RegionAddRect(IT4,YM)
call RegionAddRect(IT4,ZM)
call RegionAddRect(IT4,JN)
endfunction
function FUH takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="FUH"
call BT7(t,EVENT_PLAYER_UNIT_SELL)
call TriggerAddCondition(t,Condition(function CAF))
set t=null
endfunction
function FVH takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="FVH"
call TriggerAddCondition(t,Condition(function CBF))
call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
set WV4=t
set t=null
endfunction
function FWH takes nothing returns nothing
local trigger t=CreateTrigger()
call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(t,Condition(function F8G))
set t=null
endfunction
function FXH takes nothing returns nothing
local trigger t=CreateTrigger()
set LP4="FXH"
call TriggerRegisterTimerEvent(t,14.,false)
call TriggerAddCondition(t,Condition(function U39))
set t=CreateTrigger()
call TriggerRegisterTimerEvent(t,15.,false)
call TriggerAddCondition(t,Condition(function UB9))
set t=null
endfunction
function FYH takes nothing returns nothing
set WR4=CreateTrigger()
call TriggerRegisterTimerEventSingle(WR4,65.)
call TriggerAddAction(WR4,function U69)
endfunction
function FZH takes nothing returns nothing
set WS4=CreateTrigger()
call TriggerRegisterTimerEventSingle(WS4,90.)
call TriggerAddAction(WS4,function UL9)
endfunction
function FAH takes nothing returns nothing
set H04=CreateTrigger()
call TriggerRegisterTimerEventSingle(H04,120.)
call TriggerAddAction(H04,function U19)
endfunction
function FBH takes nothing returns nothing
local location FY9
set LP4="FBH"
set FY9=GetRectCenter(MD)
//Roshan
set T4=CreateUnitAtLoc(Player($C),1848651852,FY9,bj_UNIT_FACING)
call SetUnitAcquireRange(T4,$96)
call RemoveLocation(FY9)
call UnitAddItem(T4,CreateItem(SU[T0],0,0))
call UnitAddAbility(T4,1093743666)
set FY9=GetRectCenter(Br)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(cr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Cr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(fr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Fr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Hr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(jr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Jr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(lr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(mr)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Ni)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=GetRectCenter(Bi)
call RemoveUnit(CreateUnitAtLoc(A7,1966092337,FY9,0))
call RemoveLocation(FY9)
set FY9=null
endfunction
function aiAutoInitDEDG takes nothing returns nothing
if not CT then
call RX9()
endif
if not VT then
call RY9()
endif
endfunction

function TJ9 takes nothing returns nothing
	local integer O5=1
	local integer FCH=0
	local integer F3H=0
	local boolean F6H=false
	local boolean FLH=false
	local trigger t=null
	set LP4="TJ9"
	call DestroyTrigger(GetTriggeringTrigger())
	if AL4 then
	return
	endif
	set O5=1
	loop
	exitwhen(O5>5 or(X54!=null and X24!=null))
	if(GetPlayerSlotState(Y7[O5])==PLAYER_SLOT_STATE_PLAYING)and X54==null then
	set X54=Y7[O5]
	endif
	if(GetPlayerSlotState(Z7[O5])==PLAYER_SLOT_STATE_PLAYING)and X24==null then
	set X24=Z7[O5]
	endif
	set O5=O5+1
	endloop
	set O5=1
	loop
	exitwhen O5>5
	if WQ7(Y7[O5])then
	if(FCH<3)then
	set eY[64+GetPlayerId(Y7[O5])]=FCH
	elseif(FCH==3)then
	set eY[64+GetPlayerId(Y7[O5])]=0
	else
	set eY[64+GetPlayerId(Y7[O5])]=GetRandomInt(1,2)
	endif
	call ForceAddPlayer(QW4,Y7[O5])
	set QX4[GetPlayerId(Y7[O5])]=true
	set FCH=FCH+1
	set F6H=true
	endif
	if WQ7(Z7[O5])then
	if(F3H<3)then
	if F3H==1 then
	set eY[64+GetPlayerId(Z7[O5])]=2
	elseif F3H==2 then
	set eY[64+GetPlayerId(Z7[O5])]=1
	else
	set eY[64+GetPlayerId(Z7[O5])]=F3H
	endif
	elseif(F3H==3)then
	set eY[64+GetPlayerId(Z7[O5])]=0
	else
	set eY[64+GetPlayerId(Z7[O5])]=GetRandomInt(1,2)
	endif
	call ForceAddPlayer(QW4,Z7[O5])
	set QX4[GetPlayerId(Z7[O5])]=true
	set F3H=F3H+1
	set FLH=true
	endif
	set O5=O5+1
	endloop
	set O5=1
	loop
	exitwhen O5>5
	if(WQ7(Y7[O5]))then
	call UHF(Y7[O5],FCH)
	endif
	if(WQ7(Z7[O5]))then
	call UHF(Z7[O5],F3H)
	endif
	set O5=O5+1
	endloop
	if((F6H)or(FLH))then
	set O5=1
	loop
	exitwhen O5>5
	if WQ7(Y7[O5])then
	call UGF(Y7[O5])
	endif
	if WQ7(Z7[O5])then
	call UGF(Z7[O5])
	endif
	set O5=O5+1
	endloop
	set O5=1
	loop
	exitwhen O5>5
	if(WP7(Y7[O5]))then
	set QS4=Y7[O5]
	if(F6H)then
	call DisplayTimedTextToForce(W7,10.,P[GetPlayerId(QS4)]+GetPlayerName(QS4)+GetObjectName(1496331828)+P[0]+GetPlayerName(Y7[0])+"|r")
	call DisplayTimedTextToPlayer(QS4,0,0,10.,GetObjectName(1496331833))
	call O99(QS4)
	else
	set LA4=false
	endif
	exitwhen true
	endif
	set O5=O5+1
	endloop
	set O5=1
	loop
	exitwhen O5>5
	if(WP7(Z7[O5]))then
	set QT4=Z7[O5]
	if(FLH)then
	call DisplayTimedTextToForce(X7,10.,P[GetPlayerId(QT4)]+GetPlayerName(QT4)+GetObjectName(1496331828)+P[6]+GetPlayerName(Z7[0])+"|r")
	call DisplayTimedTextToPlayer(QT4,0,0,10.,GetObjectName(1496331833))
	call O99(QT4)
	else
	set LB4=false
	endif
	exitwhen true
	endif
	set O5=O5+1
	endloop
	if(F6H and QS4==null and QT4!=null)then
	call DisplayTimedTextToPlayer(QT4,0,0,10.,GetObjectName(1496331832))
	endif
	if(FLH and QS4!=null and QT4==null)then
	call DisplayTimedTextToPlayer(QS4,0,0,10.,GetObjectName(1496331832))
	endif
	set CM4=CreateTrigger()
	call UIF(CM4,true,F6H,FLH)
	call TriggerAddAction(CM4,function THF)
	set CN4=CreateTrigger()
	call UIF(CN4,false,FLH,F6H)
	call TriggerAddAction(CN4,function THF)
	call TriggerAddAction(QZ4,function A2E)
	if((not L)and(not RY4)and(not Z8)and(not P44)and(not P74)and(not HC4)and(not G9)and(not O14)and(not V8)and(not SM4))then
	set t=CreateTrigger()
	if(QS4!=null)then
	call TriggerRegisterPlayerChatEvent(t,QS4,"-airepick",false)
	call DisplayTimedTextToPlayer(QS4,0,0,10.,"You can make AI repick their hero using "+"|c00dd8dff"+"-airepick|r")
	endif
	if(QT4!=null)then
	call TriggerRegisterPlayerChatEvent(t,QT4,"-airepick",false)
	call DisplayTimedTextToPlayer(QT4,0,0,10.,"You can make AI repick their hero using "+"|c00dd8dff"+"-airepick|r")
	endif
	call TriggerAddAction(t,function A5E)
	endif
	if(QS4!=null)then
	set t=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(t,QS4,"-aigrant",false)
	call TriggerAddAction(t,function UOF)
	endif
	if(QT4!=null)then
	set t=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(t,QT4,"-aigrant",false)
	call TriggerAddAction(t,function UOF)
	endif
	set t=CreateTrigger()
	call TriggerAddAction(t,function A5E)
	call DisplayTimedTextToPlayer(QS4,0,0,10.," ")
	call DisplayTimedTextToPlayer(QT4,0,0,10.," ")
	if(T64)then
	set TL4[1]=SU[C0]
	set TL4[2]=SU[F5]
	set TL4[3]=SU[G5]
	set TL4[4]=SU[J5]
	set TL4[5]=SU[M5]
	set T14[1]=180.
	set T14[2]=160.
	set T14[3]=140.
	set T14[4]=120.
	set T14[5]=100.
	endif
	call E0F()
	set Q34=CreateTrigger()
	call TriggerRegisterUnitInRange(Q34,JZ4,6000.,null)
	call TriggerRegisterUnitInRange(Q34,JC4,1500.,null)
	call TriggerAddCondition(Q34,Condition(function F1F))
	call DisableTrigger(Q34)
	set QL4=CreateTrigger()
	call TriggerRegisterTimerEvent(QL4,5.,true)
	call TriggerAddCondition(QL4,Condition(function F0F))
	call DisableTrigger(QL4)
	set QC4=CreateTrigger()
	call TriggerRegisterUnitInRange(QC4,IY4,6000.,null)
	call TriggerRegisterUnitInRange(QC4,JE4,1500.,null)
	call TriggerAddCondition(QC4,Condition(function F5F))
	call DisableTrigger(QC4)
	set Q64=CreateTrigger()
	call TriggerRegisterTimerEvent(Q64,5.,true)
	call TriggerAddCondition(Q64,Condition(function F2F))
	call DisableTrigger(Q64)
	set LU4[0]=GetUnitX(IY4)
	set LU4[1]=GetUnitY(IY4)
	set LU4[2]=(GetUnitX(JE4)+GetUnitX(JP4)+GetUnitX(JQ4))/3
	set LU4[3]=(GetUnitY(JE4)+GetUnitY(JP4)+GetUnitY(JQ4))/3
	set LU4[4]=(GetUnitX(JF4)+GetUnitX(JR4)+GetUnitX(JU4))/3
	set LU4[5]=(GetUnitY(JF4)+GetUnitY(JR4)+GetUnitY(JU4))/3
	set LU4[6]=(GetUnitX(JG4)+GetUnitX(JS4)+GetUnitX(JV4))/3
	set LU4[7]=(GetUnitY(JG4)+GetUnitY(JS4)+GetUnitY(JV4))/3
	set LU4[8]=(GetUnitX(JH4)+GetUnitX(JT4)+GetUnitX(JW4))/3
	set LU4[9]=(GetUnitY(JH4)+GetUnitY(JT4)+GetUnitY(JW4))/3
	set LU4[24]=GetUnitX(JZ4)
	set LU4[25]=GetUnitY(JZ4)
	set LU4[26]=(GetUnitX(JC4)+GetUnitX(K74)+GetUnitX(K84))/3
	set LU4[27]=(GetUnitY(JC4)+GetUnitY(K74)+GetUnitY(K84))/3
	set LU4[28]=(GetUnitX(J34)+GetUnitX(K94)+GetUnitX(KF4))/3
	set LU4[29]=(GetUnitY(J34)+GetUnitY(K94)+GetUnitY(KF4))/3
	set LU4[30]=(GetUnitX(J64)+GetUnitX(KD4)+GetUnitX(KG4))/3
	set LU4[31]=(GetUnitY(J64)+GetUnitY(KD4)+GetUnitY(KG4))/3
	set LU4[32]=(GetUnitX(JL4)+GetUnitX(KE4)+GetUnitX(KH4))/3
	set LU4[33]=(GetUnitY(JL4)+GetUnitY(KE4)+GetUnitY(KH4))/3
	set O5=0
	loop
	exitwhen O5>23
	set LT4[O5]=null
	set LT4[24+O5]=null
	set O5=O5+1
	endloop
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,JZ4,1200.,Q54)
	call TriggerAddCondition(t,Condition(function IJF))
	call TriggerAddAction(t,function INF)
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,IY4,1200.,Q54)
	call TriggerAddCondition(t,Condition(function IKF))
	call TriggerAddAction(t,function INF)
	set t=CreateTrigger()
	call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
	call TriggerAddCondition(t,Condition(function QNF))
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,45.,false)
	call TriggerAddAction(t,function UNF)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,20.,false)
	call TriggerAddCondition(t,Condition(function QM9))
	set O5=1
	loop
	if(IsPlayerInForce(Player(O5),QW4))then
	set Q14[O5]=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(Q14[O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q54)
	call TriggerRegisterPlayerUnitEvent(Q14[O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q54)
	call TriggerAddCondition(Q14[O5],Condition(function PPF))
	call TriggerAddAction(Q14[O5],function PQF)
	set Q14[16+O5]=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(Q14[16+O5],Player(O5),EVENT_PLAYER_UNIT_ISSUED_ORDER,Q54)
	call TriggerAddCondition(Q14[16+O5],Condition(function PPF))
	call TriggerAddAction(Q14[16+O5],function PVF)
	set Q14[96+O5]=CreateTrigger()
	call DisableTrigger(Q14[96+O5])
	call TriggerRegisterTimerEvent(Q14[96+O5],.2,true)
	call TriggerAddCondition(Q14[96+O5],Condition(function SM7))
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function IHF))
	call TriggerAddAction(t,function IIF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function IOF))
	call TriggerAddAction(t,function IPF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q54)
	call TriggerAddCondition(t,Condition(function GXF))
	call TriggerAddAction(t,function GYF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_USE_ITEM,Q54)
	call TriggerAddCondition(t,Condition(function VS7))
	call TriggerAddAction(t,function PWF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function QEF))
	call TriggerAddAction(t,function QFF)
	endif
	if(GetPlayerSlotState(Player(O5))==PLAYER_SLOT_STATE_PLAYING)then
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_ORDER,Q54)
	call TriggerAddCondition(t,Condition(function POF))
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_DEATH,Q54)
	call TriggerAddCondition(t,Condition(function IGF))
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function IRF))
	call TriggerAddAction(t,function IYF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q54)
	call TriggerAddCondition(t,Condition(function IZF))
	call TriggerAddAction(t,function IAF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q54)
	call TriggerAddCondition(t,Condition(function VT7))
	call TriggerAddAction(t,function PBF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_FINISH,Q54)
	call TriggerAddCondition(t,Condition(function VT7))
	call TriggerAddAction(t,function P6F)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q54)
	call TriggerAddCondition(t,Condition(function VT7))
	call TriggerAddAction(t,function P1F)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_EFFECT,Q54)
	call TriggerAddCondition(t,Condition(function QDF))
	call TriggerAddAction(t,function QFF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_CAST,Q54)
	call TriggerAddCondition(t,Condition(function R7F))
	call TriggerAddAction(t,function SPF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_SPELL_ENDCAST,Q54)
	call TriggerAddAction(t,function SRF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Player(O5),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER,Q54)
	call TriggerAddCondition(t,Condition(function PTF))
	call TriggerAddAction(t,function PUF)
	if GetPlayerController(Player(O5))==MAP_CONTROL_USER and(not SM4)then
	call T89(Player(O5),true)
	call T99(Player(O5),true)
	endif
	endif
	set O5=O5+1
	exitwhen O5>$B
	endloop
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function I3F))
	call TriggerAddAction(t,function I0F)
	call JWF()
	call JBF()
	set t=CreateTrigger()
	call B6(t,EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function P0F))
	call TriggerAddAction(t,function Q8F)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_DEATH,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_DEATH,Q54)
	call TriggerAddCondition(t,Condition(function I5F))
	set t=CreateTrigger()
	call c6(t,EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerRegisterPlayerUnitEvent(t,Player($C),EVENT_PLAYER_UNIT_ATTACKED,Q54)
	call TriggerAddCondition(t,Condition(function P0F))
	call TriggerAddAction(t,function Q8F)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,200.,false)
	call TriggerAddAction(t,function UFF)
	set DO7=CreateTrigger()
	call TriggerRegisterTimerEvent(DO7,9.,true)
	call TriggerAddAction(DO7,function TMF)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,A7,EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerAddAction(t,function K9F)
	call J87()
	set PY4=true
	set PZ4=true
	if(((P17(true)==1)and(P17(false)>2))or((P17(true)==2)and(P17(false)==5)))then
	set PB4=$A
	else
	set PB4=GetRandomInt($B,$F)
	endif
	if(((P17(false)==1)and(P17(true)>2))or((P17(false)==2)and(P17(true)==5)))then
	set PA4=$A
	else
	set PA4=GetRandomInt($B,$F)
	endif
	if(P4)then
	call YM7(bj_FORCE_ALL_PLAYERS,30.,"
	The AI has a system that enables them to simulate Item Drop Mode
	They keep a duplicate of dropped items in exchange for their gold")
	endif
	else
	call DestroyTrigger(HK)
	call DestroyTrigger(QY4)
	call DestroyTrigger(HN)
	call DestroyTrigger(Ho)
	call DestroyTrigger(QZ4)
	set QZ4=null
	call DestroyTrigger(Hn)
	call DestroyTrigger(QA4)
	call ForceClear(QW4)
	endif
	if(not A4)then
	call DestroyTrigger(MS)
	endif
	if(not ZT)then
	call DestroyTrigger(QB4)
	endif
	call AC7(1093678665)
	call AC7(1093677645)
	call AC7(1093750089)
	if HA4!=0 then
	set C_4=5/I2R(HA4)
	endif
	if HB4!=0 then
	set L44=5/I2R(HB4)
	endif
	set t=null
endfunction

//===========================================================================
// function: main
//===========================================================================
function main takes nothing returns nothing
	local integer index
	local trigger iTrigger
	local string tString
	
	local weathereffect we
	local integer i
	local player p
	local unit u
	local integer unitID
	local trigger t
	local real life
	local integer BU7
	local integer F1H
	local version F0H
	local integer A1F
	local real F5H
	local real F2H
	local real F_H
	local real G4H
	local real G7H
	local real G8H
	local real G9H
	local real GDH
	local real GEH
	local real GFH
	local real GGH
	local real GHH
	local real GIH
	local real GJH
	local real GKH
	local real GMH
	local real GNH
	local real GOH
	local real GPH
	local real GQH
	local integer FN8
	local player j8
	local real GRH
	local real GSH
	local real GTH
	local real GUH
	local real GVH
	local real GWH
	local real GXH
	local real GYH
	local real GZH
	local real GAH
	local real GBH
	local real GCH
	local real G3H
	local real G6H
	local real GLH
	local real G1H
	local real G0H
	local real G5H
	local real G2H
	local real G_H
	local real H4H
	local real H7H
	local real H8H
	local real H9H
	local location FY9
	local region PUD
	local integer RP7
	local integer x
	local integer y
	set LP4="main"
	call FSH()
	set IB7[0]=CreateTrigger()
	set IC7=GetHandleId(IB7[0])
	set i=1
	loop
	exitwhen i>9
	set IB7[i]=CreateTrigger()
	set i=i+1
	endloop
	set i=0

	call SetCameraBounds(-7552.+GetCameraMargin(CAMERA_MARGIN_LEFT),-7936.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7552.-GetCameraMargin(CAMERA_MARGIN_RIGHT),7424.-GetCameraMargin(CAMERA_MARGIN_TOP),-7552.+GetCameraMargin(CAMERA_MARGIN_LEFT),7424.-GetCameraMargin(CAMERA_MARGIN_TOP),7552.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7936.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
	call SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl","Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")
	call SetWaterBaseColor(0,0,$FF,$FF)
	call NewSoundEnvironment("Default")
	call SetAmbientDaySound("FelwoodDay")
	call SetAmbientNightSound("FelwoodNight")
	call SetMapMusic("Music",true,0)
	set yE=CreateSound("Abilities\\Spells\\Human\\Avatar\\Avatar.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(yE,"Avatar")
	call SetSoundDuration(yE,$C7F)
	set zE=CreateSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(zE,"BlinkTarget")
	call SetSoundDuration(zE,$5BA)
	call SetSoundPitch(zE,1.6)
	set vX=CreateSound("Abilities\\Spells\\Human\\Blizzard\\BlizzardLoop1.wav",true,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(vX,"BlizzardLoop")
	call SetSoundDuration(vX,$FA0)
	set UN=CreateSound("Buildings\\Undead\\TempleOfTheDamned\\TempleOfTheDamnedWhat.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(UN,"TempleOfTheDamnedWhat")
	call SetSoundDuration(UN,$DBE)
	call SetSoundDistanceCutoff(UN,2000.)
	set WN=CreateSound("Abilities\\Spells\\Human\\Flare\\FlareTarget2.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(WN,"Flare2")
	call SetSoundDuration(WN,$540)
	call SetSoundDistanceCutoff(WN,2000.)
	set YN=CreateSound("Sounds\\Dominating.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(YN,$70A)
	call SetSoundChannel(YN,0)
	call SetSoundVolume(YN,$7F)
	call SetSoundPitch(YN,1.)
	set nX=CreateSound("Sounds\\Double_Kill.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(nX,$7DC)
	call SetSoundChannel(nX,0)
	call SetSoundVolume(nX,$7F)
	call SetSoundPitch(nX,1.)
	set EX=CreateSound("Sounds\\firstblood.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(EX,$61F)
	call SetSoundChannel(EX,0)
	call SetSoundVolume(EX,$7F)
	call SetSoundPitch(EX,1.)
	set OX=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(OX,"GoblinSapperPissed")
	call SetSoundDuration(OX,$5EB)
	call SetSoundChannel(OX,0)
	set ZN=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack1.wav",false,false,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(ZN,"GoblinSapperYesAttack")
	call SetSoundDuration(ZN,813)
	call SetSoundChannel(ZN,0)
	set AN=CreateSound("Sounds\\GodLike.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(AN,$724)
	call SetSoundChannel(AN,0)
	call SetSoundVolume(AN,$7F)
	call SetSoundPitch(AN,1.)
	set bX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(bX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(bX,$79C)
	set BX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(BX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(BX,$6C5)
	set cX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(cX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(cX,$DF2)
	set CX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(CX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(CX,$DF8)
	set fX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(fX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(fX,$DE6)
	set kX=CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(kX,"HEROGoblinALCHEMISTPissed")
	call SetSoundDuration(kX,$2A73)
	set LX=CreateSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(LX,"HeroBladeMasterPissed")
	call SetSoundDuration(LX,$8BB)
	set mX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(mX,"HeroDreadLordPissed")
	call SetSoundDuration(mX,$B69)
	set MX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(MX,"HeroDreadLordPissed")
	call SetSoundDuration(MX,7125)
	set PX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(PX,"HeroDreadLordPissed")
	call SetSoundDuration(PX,$F9E)
	set qX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(qX,"HeroDreadLordPissed")
	call SetSoundDuration(qX,$6BF)
	set QX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(QX,"HeroDreadLordPissed")
	call SetSoundDuration(QX,8893)
	set tX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(tX,"HeroDreadLordPissed")
	call SetSoundDuration(tX,6066)
	set TX=CreateSound("Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(TX,"HeroDreadLordPissed")
	call SetSoundDuration(TX,$4FD)
	set BN=CreateSound("Sounds\\HolyShit.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(BN,$915)
	call SetSoundChannel(BN,0)
	call SetSoundVolume(BN,$7F)
	call SetSoundPitch(BN,1.)
	set UX=CreateSound("Buildings\\NightElf\\MoonWell\\MoonWellWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(UX,"MoonWellWhat")
	call SetSoundDuration(UX,$B9C)
	call SetSoundDistances(UX,600.,10000.)
	call SetSoundDistanceCutoff(UX,2000.)
	set CN=CreateSound("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaos.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(CN,"MarkOfChaos")
	call SetSoundDuration(CN,$FA0)
	set JO=CreateSound("Sounds\\Killing_Spree.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(JO,$949)
	call SetSoundChannel(JO,0)
	call SetSoundVolume(JO,$7F)
	call SetSoundPitch(JO,1.)
	set oO=CreateSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(oO,"DeathNightElfBuildingCancel")
	call SetSoundDuration(oO,$E5B)
	set TO=CreateSound("Sounds\\MegaKill.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(TO,$A34)
	call SetSoundChannel(TO,0)
	call SetSoundVolume(TO,$7F)
	call SetSoundPitch(TO,1.)
	set aO=CreateSound("Abilities\\Spells\\NightElf\\ShadowMeld\\ShadowMeld1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(aO,"ShadowMeld")
	call SetSoundDuration(aO,941)
	set VO=CreateSound("Sounds\\MonsterKill.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(VO,$D10)
	call SetSoundChannel(VO,0)
	call SetSoundVolume(VO,$7F)
	call SetSoundPitch(VO,1.)
	set EO=CreateSound("Units\\Creeps\\Ogre\\OgrePissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(EO,"OgrePissed")
	call SetSoundDuration(EO,$CED)
	set XO=CreateSound("Sounds\\Ownage.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(XO,$A1A)
	call SetSoundChannel(XO,0)
	call SetSoundVolume(XO,$7F)
	call SetSoundPitch(XO,1.)
	set OO=CreateSound("Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(OO,"PandarenBrewmasterPissed")
	call SetSoundDuration(OO,$90C)
	set AO=CreateSound("Abilities\\Spells\\Human\\Polymorph\\PolymorphDone.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(AO,"PolymorphDone")
	call SetSoundDuration(AO,$5DA)
	set NO=CreateSound("Buildings\\Naga\\TempleofTides\\TempleOfTidesWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(NO,"TempleOfTidesWhat")
	call SetSoundDuration(NO,$D9B)
	call SetSoundDistanceCutoff(NO,2000.)
	set bO=CreateSound("Buildings\\Undead\\TombOfRelics\\TombOfRelicsWhat1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(bO,"TombOfRelicsWhat")
	call SetSoundDuration(bO,$BF9)
	call SetSoundDistanceCutoff(bO,2000.)
	set BO=CreateSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(BO,"Disenchant")
	call SetSoundDuration(BO,$7FB)
	set cO=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,$A,$A,"")
	call SetSoundParamsFromLabel(cO,"Rescue")
	call SetSoundDuration(cO,$ED4)
	set CO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(CO,"RiflemanPissed")
	call SetSoundDuration(CO,$C56)
	set fO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(fO,"RiflemanPissed")
	call SetSoundDuration(fO,$51A)
	set FO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(FO,"RiflemanPissed")
	call SetSoundDuration(FO,$A40)
	set gO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(gO,"RiflemanPissed")
	call SetSoundDuration(gO,$EC9)
	set hO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(hO,"RiflemanPissed")
	call SetSoundDuration(hO,4168)
	set HO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed6.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(HO,"RiflemanPissed")
	call SetSoundDuration(HO,$AFA)
	set kO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed7.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(kO,"RiflemanPissed")
	call SetSoundDuration(kO,4609)
	set lO=CreateSound("Units\\Human\\Rifleman\\RiflemanPissed8.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(lO,"RiflemanPissed")
	call SetSoundDuration(lO,5480)
	set mO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(mO,"HeroShadowHunterPissed")
	call SetSoundDuration(mO,$8F5)
	set pO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(pO,"HeroShadowHunterPissed")
	call SetSoundDuration(pO,$6FD)
	set qO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(qO,"HeroShadowHunterPissed")
	call SetSoundDuration(qO,$8FD)
	set QO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(QO,"HeroShadowHunterPissed")
	call SetSoundDuration(QO,$AC0)
	set tO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(tO,"HeroShadowHunterPissed")
	call SetSoundDuration(tO,$C39)
	set UO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(UO,"HeroShadowHunterPissed")
	call SetSoundDuration(UO,$682)
	set wO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(wO,"HeroShadowHunterPissed")
	call SetSoundDuration(wO,$4A3)
	set WO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(WO,"HeroShadowHunterPissed")
	call SetSoundDuration(WO,$864)
	set zO=CreateSound("Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav",false,true,true,$A,$A,"HeroAcksEAX")
	call SetSoundParamsFromLabel(zO,"HeroShadowHunterPissed")
	call SetSoundDuration(zO,$7EA)
	set vR=CreateSound("Abilities\\Spells\\Undead\\Sleep\\SleepBirth1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(vR,"Sleep")
	call SetSoundDuration(vR,$C83)
	set eR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(eR,"SpellBreakerPissed")
	call SetSoundDuration(eR,$F3D)
	set oR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(oR,"SpellBreakerPissed")
	call SetSoundDuration(oR,$D27)
	set rR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(rR,"SpellBreakerPissed")
	call SetSoundDuration(rR,$E43)
	set aR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(aR,"SpellBreakerPissed")
	call SetSoundDuration(aR,$9BA)
	set RR=CreateSound("Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(RR,"SpellBreakerPissed")
	call SetSoundDuration(RR,$3842)
	set bR=CreateSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav",false,true,true,$A,$A,"MissilesEAX")
	call SetSoundParamsFromLabel(bR,"DevourMagicLaunch")
	call SetSoundDuration(bR,$4C9)
	set BR=CreateSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav",false,true,true,$A,$A,"MissilesEAX")
	call SetSoundParamsFromLabel(BR,"BlackArrowHit")
	call SetSoundDuration(BR,$6F0)
	call SetSoundVolume(BR,50)
	set YO=CreateSound("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(YO,"HornOfCenariusSound")
	call SetSoundDuration(YO,$2F59)
	call SetSoundVolume(YO,115)
	set CR=CreateSound("Sounds\\triple_kill.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(CR,$773)
	call SetSoundChannel(CR,0)
	call SetSoundVolume(CR,$7F)
	call SetSoundPitch(CR,1.)
	set ZO=CreateSound("Sounds\\Unstoppable.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(ZO,$7F6)
	call SetSoundChannel(ZO,0)
	call SetSoundVolume(ZO,$7F)
	call SetSoundPitch(ZO,1.)
	set LO=CreateSound("Abilities\\Spells\\Human\\DivineShield\\PaladinDivineShieldDeath1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(LO,"DivineShieldDeath")
	call SetSoundDuration(LO,$413)
	call SetSoundDistanceCutoff(LO,1500.)
	set hR=CreateSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(hR,"SoulGem")
	call SetSoundDuration(hR,4474)
	set DP=CreateSound("Sounds\\WhickedSick.mp3",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundDuration(DP,$A34)
	call SetSoundChannel(DP,0)
	call SetSoundVolume(DP,$7F)
	call SetSoundPitch(DP,1.)
	set JR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(JR,"WitchDoctorPissed")
	call SetSoundDuration(JR,$502)
	set lR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(lR,"WitchDoctorPissed")
	call SetSoundDuration(lR,$4E0)
	set LR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(LR,"WitchDoctorPissed")
	call SetSoundDuration(LR,$5F4)
	set mR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(mR,"WitchDoctorPissed")
	call SetSoundDuration(mR,$4B0)
	set pR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(pR,"WitchDoctorPissed")
	call SetSoundDuration(pR,$ACA)
	set PR=CreateSound("Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(PR,"WitchDoctorPissed")
	call SetSoundDuration(PR,$B21)
	set qR=CreateSound("Units\\Creeps\\GoblinSapper\\GoblinSapperYesAttack4.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(qR,"GoblinSapperYesAttack")
	call SetSoundDuration(qR,$443)
	call SetSoundChannel(qR,0)
	set QR=CreateSound("Abilities\\Spells\\NightElf\\shadowstrike\\ShadowStrikeBirth1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(QR,"ShadowStrikeBirth")
	call SetSoundDuration(QR,$892)
	call SetSoundPitch(QR,1.2)
	set sR=CreateSound("Abilities\\Spells\\NightElf\\CorrosiveBreath\\CorrosiveBreathMissileLaunch1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(sR,"CorrosiveBreathMissileLaunch")
	call SetSoundDuration(sR,$515)
	call SetSoundPitch(sR,1.2)
	set SR=CreateSound("Sound\\Interface\\Warning\\NightElf\\SentinelAllyHeroDies1.wav",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(SR,"AllyHeroDiesNightElf")
	call SetSoundDuration(SR,$7AB)
	call SetSoundVolume(SR,$7F)
	set UR=CreateSound("Sound\\Interface\\Warning\\Undead\\NecromancerAllyHeroDies1.wav",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(UR,"AllyHeroDiesUndead")
	call SetSoundDuration(UR,$78D)
	call SetSoundVolume(UR,$7F)
	set WR=CreateSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav",false,false,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(WR,"ReviveHuman")
	call SetSoundDuration(WR,$C7C)
	call SetSoundChannel(WR,8)
	set zR=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,$A,$A,"")
	call SetSoundParamsFromLabel(zR,"SecretFound")
	call SetSoundDuration(zR,$9DD)
	set EP=CreateSound("Sounds\\UltraKill.mp3",false,false,false,$A,$A,"")
	call SetSoundDuration(EP,$7A6)
	call SetSoundChannel(EP,0)
	call SetSoundVolume(EP,$7F)
	call SetSoundPitch(EP,1.)
	set GP=CreateSound("Sounds\\Rampage.mp3",false,false,false,$A,$A,"")
	call SetSoundDuration(GP,$4AB)
	call SetSoundChannel(GP,0)
	call SetSoundVolume(GP,$7F)
	call SetSoundPitch(GP,1.)
	set eI=CreateSound("Units\\Orc\\AncestralGuardian\\AncestralGuardianAttack1.wav",false,true,true,$A,$A,"CombatSoundsEAX")
	call SetSoundParamsFromLabel(eI,"AncestralGuardianAttack1")
	call SetSoundDuration(eI,$49D)
	set oI=CreateSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(oI,"Feedback")
	call SetSoundDuration(oI,$4C6)
	set IP=CreateSound("Units\\Undead\\Abomination\\AbominationPissed5.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(IP,"AbominationPissed")
	call SetSoundDuration(IP,$6C7)
	set JP=CreateSound("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(JP,"ArtilleryExplodeDeath")
	call SetSoundDuration(JP,$5CE)
	set RI=CreateSound("Units\\Undead\\CryptFiend\\CryptFiendPissed2.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(RI,"CryptFiendPissed")
	call SetSoundDuration(RI,$DD5)
	set KP=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(KP,"BansheeDeath")
	call SetSoundDuration(KP,$94C)
	set U_4=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(U_4,"FlameStrikeTarget")
	call SetSoundDuration(U_4,$787)
	set V44=CreateSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav",false,false,false,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(V44,"VolcanoLoop")
	call SetSoundDuration(V44,7616)
	set V74=CreateSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",false,false,false,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(V74,"ThunderClap")
	call SetSoundDuration(V74,$D7B)
	set V84=CreateSound("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImage.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(V84,"MirrorImage")
	call SetSoundDuration(V84,$6DC)
	set V94=CreateSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav",true,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(V94,"CloudOfFogLoop")
	call SetSoundDuration(V94,$7F6)
	call SetSoundPitch(V94,.9)
	set VJ4=CreateSound("Units\\Human\\Gyrocopter\\GyrocopterPissed1.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(VJ4,"GyrocopterPissed")
	call SetSoundDuration(VJ4,$F49)
	set VK4="Sound\\Music\\mp3Music\\Tension.mp3"
	set VM4="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
	set VN4="Sound\\Music\\mp3Music\\NightElfDefeat.mp3"
	set VO4="Sound\\Music\\mp3Music\\NightElfVictory.mp3"
	set VP4=CreateSound("Sound\\Interface\\SecretFound.wav",false,false,false,$A,$A,"")
	call SetSoundParamsFromLabel(VP4,"SecretFound")
	call SetSoundDuration(VP4,$9DD)
	set VQ4=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,$A,$A,"")
	call SetSoundParamsFromLabel(VQ4,"Hint")
	call SetSoundDuration(VQ4,$7D6)
	set WX4=CreateSound("war3mapImported\\pl_impact_stun.mp3",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundDuration(WX4,$53C)
	call SetSoundChannel(WX4,$B)
	call SetSoundVolume(WX4,$7F)
	call SetSoundPitch(WX4,1.)
	call SetSoundDistances(WX4,600.,10000.)
	call SetSoundDistanceCutoff(WX4,2000.)
	call SetSoundConeAngles(WX4,.0,.0,$7F)
	call SetSoundConeOrientation(WX4,.0,.0,.0)
	set WY4=CreateSound("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",true,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(WY4,"HumanFireLarge")
	call SetSoundDuration(WY4,$D8F)
	set WZ4=CreateSound("Units\\Human\\Phoenix\\PhoenixEggWhat1.wav",false,false,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(WZ4,"PhoenixEggWhat")
	call SetSoundDuration(WZ4,$62B)
	call SetSoundChannel(WZ4,0)
	set YZ4=CreateSound("Abilities\\Spells\\NightElf\\BattleRoar\\BattleRoar.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(YZ4,"BattleRoar")
	call SetSoundDuration(YZ4,$7C7)
	set YA4=CreateSound("Buildings\\Undead\\Ziggurat\\ZigguratUpgrade.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(YA4,"ZigguratUpgradeWhat")
	call SetSoundDuration(YA4,4203)
	call SetSoundDistances(YA4,600.,10000.)
	call SetSoundDistanceCutoff(YA4,3000.)
	set YB4=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(YB4,"SpellStealMissileLaunch")
	call SetSoundDuration(YB4,$605)
	set YC4=CreateSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealTarget.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(YC4,"SpellStealTarget")
	call SetSoundDuration(YC4,984)
	set Y34=CreateSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav",false,true,true,$A,$A,"DefaultEAXON")
	call SetSoundParamsFromLabel(Y34,"AcolyteMining")
	call SetSoundDuration(Y34,4233)
	call SetSoundChannel(Y34,0)
	set Y64=CreateSound("Abilities\\Weapons\\AvengerMissile\\DestroyerMissile.wav",false,true,true,$A,$A,"MissilesEAX")
	call SetSoundParamsFromLabel(Y64,"DestroyerMissileLaunch")
	call SetSoundDuration(Y64,817)
	set YL4=CreateSound("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouch.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(YL4,"SpiritTouch")
	call SetSoundDuration(YL4,$7FB)
	call SetSoundChannel(YL4,$B)
	set Y14=CreateSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",false,true,true,$A,$A,"SpellsEAX")
	call SetSoundParamsFromLabel(Y14,"FlameStrikeTarget")
	call SetSoundDuration(Y14,$787)
	set pH=Rect(6900,-7800,7600,-7000)
	set go=Rect(6176.,3136.,6400.,3392.)
	set jo=Rect(3616.,3584.,3872.,3872.)
	set lo=Rect(2304.,5280.,2752.,5728.)
	set C9=Rect(6176.,5952.,6624.,6240.)
	set Qo=Rect(-4224.,-6848.,-3968.,-6592.)
	set to=Rect(-6304.,-4384.,-6080.,-4224.)
	set Uo=Rect(-4928.,-5760.,-4736.,-5536.)
	set wo=Rect(6048.,3424.,6304.,3776.)
	set zo=Rect(4128.,3776.,4352.,4032.)
	set er=Rect(2752.,5408.,3040.,5632.)
	set L9=Rect(-7040.,-6912.,-6688.,-6656.)
	set ar=Rect(-3648.,-6880.,-3424.,-6688.)
	set Er=Rect(-6336.,-4224.,-5984.,-3904.)
	set Xr=Rect(-4896.,-5504.,-4608.,-5184.)
	set ED=Rect(2912.,-2944.,3104.,-2720.)
	set FD=Rect(5696.,5504.,7296.,7392.)
	set GD=Rect(-7680.,-8032.,-6176.,-6240.)
	set HD=Rect(-2464.,1536.,-2240.,1760.)
	set Br=Rect(4288.,-2688.,4544.,-2400.)
	set cr=Rect(-3328.,-416.,-3104.,-96.)
	set Cr=Rect(1440.,-4096.,1728.,-3872.)
	set fr=Rect(-4576.,3328.,-4448.,3488.)
	set Fr=Rect(-3264.,4192.,-2912.,4320.)
	set Hr=Rect(2848.,-5088.,3072.,-4928.)
	set jr=Rect(-1824.,2240.,-1472.,2464.)
	set Jr=Rect(3008.,-3776.,3136.,-3648.)
	set lr=Rect(1184.,2976.,1280.,3104.)
	set mr=Rect(-512.,-3648.,-320.,-3520.)
	set pr=Rect(-7104.,6656.,-6848.,6912.)
	set qr=Rect(-7104.,6656.,-6880.,6880.)
	set MD=Rect(2304.,-672.,2592.,-384.)
	set Sr=Rect(3872.,-3008.,4928.,-1952.)
	set Ur=Rect(-3552.,-768.,-2528.,320.)
	set Wr=Rect(1056.,-5216.,2368.,-3744.)
	set zr=Rect(-5120.,3008.,-3648.,4320.)
	set Zr=Rect(-3456.,3808.,-2656.,4864.)
	set vi=Rect(2272.,-6080.,3776.,-4928.)
	set ei=Rect(-1888.,2208.,-992.,3040.)
	set xi=Rect(416.,2624.,1632.,3648.)
	set oi=Rect(2592.,-4800.,3744.,-3328.)
	set ai=Rect(-1024.,-3808.,192.,-2752.)
	set ND=Rect(-7936.,-7776.,-5920.,-5760.)
	set OD=Rect(5504.,5184.,7744.,7136.)
	set Ai=Rect(-800.,3072.,64.,4032.)
	set Ni=Rect(-384.,3392.,-192.,3520.)
	set bi=Rect(-1728.,-5056.,-768.,-3840.)
	set Bi=Rect(-1152.,-4704.,-960.,-4480.)
	set PD=Rect(-480.,-800.,-256.,-512.)
	set QD=Rect(2112.,-736.,2752.,-160.)
	set di=Rect(2112.,-960.,2720.,-640.)
	set fi=Rect(2112.,-1088.,2720.,-864.)
	set Fi=Rect(2656.,-1120.,2784.,-416.)
	set Gi=Rect(2752.,-1248.,2880.,-544.)
	set Ji=Rect(2848.,-1344.,2912.,-640.)
	set li=Rect(2912.,-1408.,2976.,-704.)
	set Li=Rect(2208.,-1216.,2816.,-992.)
	set pi=Rect(2464.,-1472.,3200.,-1152.)
	set TD=Rect(-8160.,-8192.,-3712.,-4352.)
	set WD=Rect(-8192.,-4960.,-4640.,-3552.)
	set XD=Rect(-4000.,-7744.,-3072.,-5152.)
	set YD=Rect(2304.,4064.,8032.,7776.)
	set ZD=Rect(4640.,1952.,8000.,4384.)
	set AD=Rect(3136.,2816.,5216.,4960.)
	set BD=Rect(-7968.,5216.,-7456.,5920.)
	set LD=Rect(-8064.,2880.,-7648.,4512.)
	set KE=Rect(-3296.,3712.,-2688.,3968.)
	set RE=Rect(-2400.,2016.,-1952.,2624.)
	set SE=Rect(-2016.,1600.,-1216.,2048.)
	set TE=Rect(-2144.,2528.,-1888.,2944.)
	set WE=Rect(-1280.,1728.,-736.,2176.)
	set YE=Rect(-1696.,-768.,-1376.,-448.)
	set ZE=Rect(-576.,.0,-352.,256.)
	set EF=Rect(3104.,-2784.,3680.,-2304.)
	set FF=Rect(3264.,-3040.,3872.,-2656.)
	set GF=Rect(4960.,-3104.,5632.,-2816.)
	set HF=Rect(4896.,-3744.,5280.,-3456.)
	set JF=Rect(7488.,-3520.,8192.,-2336.)
	set KF=Rect(6656.,-3328.,7808.,-2656.)
	set MF=Rect(7104.,-8192.,8192.,-5920.)
	set NF=Rect(5952.,-8192.,7200.,-7712.)
	set OF=Rect(7168.,-6240.,8128.,-5184.)
	set PF=Rect(5824.,-8032.,6400.,-7776.)
	set QF=Rect(6976.,-6560.,7488.,-5920.)
	set RF=Rect(-5856.,2944.,-5600.,3200.)
	set SF=Rect(6784.,-7776.,7264.,-7456.)
	set TF=Rect(-8128.,-8192.,5536.,-7744.)
	set UF=Rect(2368.,-7904.,2688.,-7584.)
	set WF=Rect(-1664.,-7808.,-1344.,-7552.)
	set XF=Rect(-2944.,-8192.,-1664.,-7680.)
	set YF=Rect(-4000.,-8192.,-3168.,-7616.)
	set ZF=Rect(-5760.,-8000.,-5184.,-7584.)
	set BF=Rect(-3296.,3744.,-3104.,3872.)
	set CF=Rect(-8192.,-8192.,-6720.,-7744.)
	set LF=Rect(-8192.,-6432.,-7456.,-4928.)
	set DG=Rect(-8192.,-8128.,-7904.,8160.)
	set EG=Rect(-7744.,3936.,-7328.,5600.)
	set FG=Rect(-7680.,1984.,-6560.,2816.)
	set GG=Rect(-7776.,1696.,-6944.,2176.)
	set JG=Rect(-8032.,-3040.,-7680.,-2720.)
	set MG=Rect(-7904.,-2656.,-7552.,-2336.)
	set OG=Rect(-3936.,-2720.,-3584.,-2400.)
	set PG=Rect(-3168.,-1952.,-2912.,-1696.)
	set QG=Rect(-4128.,-1632.,-3776.,-1152.)
	set RG=Rect(-4992.,-1792.,-3968.,-1440.)
	set SG=Rect(-5536.,-1664.,-4832.,-1280.)
	set TG=Rect(-2304.,3872.,-2048.,4096.)
	set UG=Rect(-5664.,-1440.,-5344.,.0)
	set VG=Rect(-5824.,-1504.,-5472.,-544.)
	set WG=Rect(-5216.,-1216.,-4480.,-384.)
	set XG=Rect(-5632.,448.,-5152.,1856.)
	set ZG=Rect(-5856.,1440.,-5248.,2592.)
	set AG=Rect(-5408.,1888.,-4928.,2368.)
	set BG=Rect(-5056.,1664.,-4064.,2144.)
	set CG=Rect(-4320.,1344.,-3808.,1952.)
	set LG=Rect(-4224.,1440.,-3200.,2016.)
	set DH=Rect(-2112.,3424.,-1856.,3744.)
	set EH=Rect(-2400.,640.,-2208.,896.)
	set HH=Rect(-3392.,640.,-3200.,896.)
	set OH=Rect(-3744.,-1024.,-3232.,384.)
	set PH=Rect(-2016.,-5504.,-1664.,-4768.)
	set QH=Rect(-1760.,-5248.,-1312.,-4800.)
	set RH=Rect(896.,-3328.,1088.,-3072.)
	set TH=Rect(2368.,-3808.,2688.,-3360.)
	set UH=Rect(1952.,-3744.,2208.,-3456.)
	set WH=Rect(-768.,-1344.,-480.,-1024.)
	set XH=Rect(1152.,-6560.,1376.,-6272.)
	set YH=Rect(1216.,-6368.,1504.,-6176.)
	set ZH=Rect(-1376.,-6784.,-1184.,-6528.)
	set AH=Rect(7616.,-6528.,8192.,8160.)
	set CH=Rect(7072.,-2304.,7264.,-2048.)
	set DI=Rect(-7872.,7872.,8192.,8192.)
	set EI=Rect(1792.,7776.,2112.,8192.)
	set GI=Rect(-2656.,.0,-2496.,256.)
	set HI=Rect(-768.,7232.,-416.,7424.)
	set II=Rect(-7968.,5472.,-7648.,5792.)
	set JI=Rect(1120.,7904.,1312.,8160.)
	set NI=Rect(736.,4480.,1120.,4800.)
	set PI=Rect(2208.,4928.,2400.,5152.)
	set SI=Rect(576.,4384.,1120.,4928.)
	set TI=Rect(2560.,4160.,2784.,4576.)
	set UI=Rect(-5984.,-3776.,-5504.,-3232.)
	set WI=Rect(576.,4256.,1024.,4672.)
	set XI=Rect(544.,4352.,992.,4768.)
	set YI=Rect(704.,2496.,1376.,2784.)
	set BI=Rect(-2240.,1792.,-1856.,2240.)
	set CI=Rect(-1472.,1472.,-992.,1728.)
	set LI=Rect(2368.,-3200.,2656.,-2880.)
	set TJ=Rect(2624.,-3584.,2816.,-2848.)
	set MK=Rect(2464.,-3392.,2656.,-3136.)
	set UK=Rect(2784.,-3232.,2976.,-2976.)
	set YK=Rect(2784.,-3424.,2976.,-3168.)
	set SM=Rect(7328.,7808.,8192.,8192.)
	set TM=Rect(1984.,7584.,3296.,8192.)
	set UM=Rect(2240.,7392.,2560.,8192.)
	set WM=Rect(-1888.,416.,-1696.,576.)
	set YM=Rect(7776.,2720.,8192.,3648.)
	set ZM=Rect(5280.,640.,5664.,1184.)
	set JN=Rect(-3104.,2720.,-2624.,3232.)
	set TH=Rect(2816.,-3488.,3008.,-3232.)
	set UH=Rect(1568.,-2976.,1760.,-2656.)
	set LI=Rect(2368.,-3264.,2656.,-2944.)
	set TJ=Rect(2624.,-3648.,2816.,-2912.)
	set MK=Rect(2464.,-3456.,2656.,-3200.)
	set TF=Rect(-8192.,-8128.,5472.,-7648.)
	set eE=Rect(-8192.,-3712.,-7008.,-2144.)
	set oE=Rect(-3360.,-8192.,-1472.,-7648.)
	set aE=Rect(-2528.,-7840.,-1696.,-7488.)
	set nE=Rect(-2336.,-7584.,-1600.,-7456.)
	set VE=Rect(-8192.,2016.,-6816.,2880.)
	set EE=Rect(6880.,-3328.,8000.,-2624.)
	set XE=Rect(3904.,2976.,4160.,3264.)
	set OE=Rect(2336.,5952.,2592.,6240.)
	set IE=Rect(6304.,1984.,6560.,2272.)
	set AE=Rect(-3328.,-6912.,-3072.,-6624.)
	set bE=Rect(-4384.,-4800.,-4128.,-4512.)
	set BE=Rect(-6432.,-3840.,-6176.,-3552.)
	set cE=Rect(-7584.,6176.,-6304.,7552.)
	set CE=Rect(2208.,-1152.,2720.,-352.)
	set dE=Rect(2560.,-1440.,2976.,-1024.)
	set fE=Rect(-1088.,5376.,768.,6624.)
	set FE=Rect(1600.,1024.,3456.,2432.)
	set gE=Rect(5504.,-1056.,7200.,512.)
	set GE=Rect(-6944.,-1792.,-5248.,-224.)
	set JE=Rect(-1536.,-7424.,640.,-6048.)
	set lE=Rect(-3328.,-7200.,-2464.,-6368.)
	set LE=Rect(-4288.,-4544.,-3424.,-3712.)
	set ME=Rect(-6784.,-3616.,-5920.,-2784.)
	set pE=Rect(1472.,5440.,2336.,6272.)
	set PE=Rect(2656.,2336.,3520.,3168.)
	set qE=Rect(5984.,1152.,6848.,1984.)
	set QE=Rect(-4128.,-3712.,-2496.,-2272.)
	set MN=Rect(-8192.,-8128.,-5120.,-5536.)
	set TN=Rect(4608.,4352.,8192.,8192.)
	set cz=Rect(3536.,3148.,6248.,5832.)
	set Cz=Rect(-6348.,-6900.,-3628.,-4480.)
	set He=Rect(.0,.0,.0,.0)
	set Q54=null
	set iL=Condition(function GZF)
	set Q24=Condition(function I1F)
	set ip=Condition(function GAF)
	set iP=Condition(function ISF)
	set LV4=Condition(function KEF)
	set Ha=Location(.0,.0)
	set HA=Location(.0,.0)
	set Hb=Location(.0,.0)
	set HB=Location(.0,.0)
	set p=Player($F)
	set A_4=CreateUnit(p,1966092378,7360.,-4416.,270.)
	call SetUnitColor(A_4,ConvertPlayerColor($C))
	set A24=CreateUnit(p,1966092378,-7296.,4224.,270.)
	call SetUnitColor(A24,ConvertPlayerColor($C))
	set IE4=CreateUnit(p,1848657231,-7168.,6464.,270.)
	call SetUnitColor(IE4,ConvertPlayerColor(0))
	set wJ=CreateUnit(p,1848652102,-7424.,-6976.,270.)
	set SJ=CreateUnit(p,1848657231,-7360.,6464.,270.)
	call SetUnitColor(SJ,ConvertPlayerColor(0))
	set WJ=CreateUnit(p,1848652102,-7424.,-6592.,270.)
	set yJ=CreateUnit(p,1848652102,-7424.,-6464.,270.)
	set qK=CreateUnit(p,1848657231,-7360.,6784.,270.)
	call SetUnitColor(qK,ConvertPlayerColor(0))
	set LK=CreateUnit(p,1848657231,-6848.,6784.,270.)
	call SetUnitColor(LK,ConvertPlayerColor(0))
	set zJ=CreateUnit(p,1848652102,-7424.,-6720.,270.)
	set ZJ=CreateUnit(p,1848652102,-7424.,-6848.,270.)
	set vk=CreateUnit(p,1852206952,-7232.,-7136.,270.)
	set u=CreateUnit(p,1967339316,3200.,-64.,270.)
	set cJ=CreateUnit(p,1848657231,-6848.,6464.,270.)
	call SetUnitColor(cJ,ConvertPlayerColor(0))
	set FK=CreateUnit(p,1848652102,7040.,6272.,270.)
	set gK=CreateUnit(p,1848652102,7040.,5888.,270.)
	set GK=CreateUnit(p,1848652102,7040.,5760.,270.)
	set JK=CreateUnit(p,1848652102,7040.,6016.,270.)
	set fK=CreateUnit(p,1848652102,7040.,6144.,270.)
	set lK=CreateUnit(p,1852073580,6784.,6368.,270.)
	set gJ=CreateUnit(p,1848657231,-7360.,7104.,270.)
	call SetUnitColor(gJ,ConvertPlayerColor(0))
	set PK=CreateUnit(p,1848657231,-7168.,7104.,270.)
	call SetUnitColor(PK,ConvertPlayerColor(0))
	set u=CreateUnit(p,1967339316,-4544.,1152.,270.)
	set tJ=CreateUnit(p,1848657231,-7168.,6784.,270.)
	call SetUnitColor(tJ,ConvertPlayerColor(0))
	set Cl=CreateUnit(p,1848657231,-6848.,7104.,270.)
	call SetUnitColor(Cl,ConvertPlayerColor(0))
	set B74=CreateUnit(p,1966092592,-7296.,4416.,270.)
	call SetUnitColor(B74,ConvertPlayerColor($C))
	set B44=CreateUnit(p,1966092592,7360.,-4224.,270.)
	call SetUnitColor(B44,ConvertPlayerColor($C))
	set WB4=CreateUnit(p,1848657231,-6656.,7104.,270.)
	call SetUnitColor(WB4,ConvertPlayerColor(0))
	set WC4=CreateUnit(p,1848657231,-6656.,6464.,270.)
	call SetUnitColor(WC4,ConvertPlayerColor(0))
	set WA4=CreateUnit(p,1848657231,-6656.,6784.,270.)
	call SetUnitColor(WA4,ConvertPlayerColor(0))
	set p=Player(0)
	set ek=CreateUnit(p,1849897784,-7264.,-6880.,270.)
	call SetUnitColor(ek,ConvertPlayerColor($C))
	set xk=CreateUnit(p,1848652107,-7264.,-6688.,270.)
	call SetUnitColor(xk,ConvertPlayerColor($C))
	set ak=CreateUnit(p,1848651833,-6560.,-6432.,270.)
	call SetUnitColor(ak,ConvertPlayerColor($C))
	set LJ=CreateUnit(p,1848651864,-7072.,-6368.,270.)
	call SetUnitColor(LJ,ConvertPlayerColor(1))
	set JJ=CreateUnit(p,1848651862,-6816.,-6368.,270.)
	call SetUnitColor(JJ,ConvertPlayerColor($C))
	set GJ=CreateUnit(p,1848651863,-7200.,-6432.,270.)
	call SetUnitColor(GJ,ConvertPlayerColor($C))
	set dJ=CreateUnit(p,1848651826,-6688.,-6368.,270.)
	call SetUnitColor(dJ,ConvertPlayerColor($C))
	set Wk=CreateUnit(p,1697657397,-6624.,-7136.,270.)
	set ik=CreateUnit(p,1749236021,-6880.,-7136.,270.)
	call SetUnitColor(ik,ConvertPlayerColor(0))
	set BJ=CreateUnit(p,1702129516,-5632.,-6144.,270.)
	set Ak=CreateUnit(p,1697656915,-4448.,-4960.,270.)
	set bk=CreateUnit(p,1697656915,-5280.,-6112.,270.)
	set Nk=CreateUnit(p,1697656915,-6368.,-4256.,270.)
	set Bk=CreateUnit(p,1697656915,-5600.,-5728.,270.)
	set ck=CreateUnit(p,1700884333,-6080.,-4480.,270.)
	set Ck=CreateUnit(p,1700884325,-6656.,-4480.,270.)
	set fk=CreateUnit(p,1700884333,-4416.,-5312.,270.)
	set Gk=CreateUnit(p,1700884325,-4864.,-4992.,270.)
	set Fk=CreateUnit(p,1697656915,-3744.,-6816.,270.)
	set dk=CreateUnit(p,1700884333,-4032.,-7040.,270.)
	set gk=CreateUnit(p,1700884325,-4032.,-6528.,270.)
	set lk=CreateUnit(p,1701670775,-5792.,-5408.,270.)
	set Jk=CreateUnit(p,1701670775,-6624.,-5088.,270.)
	set jk=CreateUnit(p,1701670775,-5088.,-5536.,270.)
	set Lk=CreateUnit(p,1701670775,-5344.,-3936.,270.)
	set pk=CreateUnit(p,1701670775,-5088.,-4576.,270.)
	set Pk=CreateUnit(p,1701670775,-3936.,-5344.,270.)
	set qk=CreateUnit(p,1701670775,-4512.,-7072.,270.)
	set Qk=CreateUnit(p,1701670775,-4896.,-6240.,270.)
	set Sk=CreateUnit(p,1701670775,-3808.,-5856.,270.)
	set tk=CreateUnit(p,1701670775,-5472.,-4704.,270.)
	set Uk=CreateUnit(p,1701670775,-4512.,-5856.,270.)
	set wk=CreateUnit(p,1700884343,-4544.,-6528.,270.)
	set Rk=CreateUnit(p,1697656915,-6112.,-1248.,270.)
	set ok=CreateUnit(p,1700884343,-6080.,-5120.,270.)
	set Ok=CreateUnit(p,1697656915,-6112.,1568.,270.)
	set Ek=CreateUnit(p,1697656915,-1504.,-1824.,270.)
	set Vk=CreateUnit(p,1697656915,-544.,-6688.,270.)
	set nk=CreateUnit(p,1697656915,4960.,-6752.,270.)
	set MJ=CreateUnit(p,1697656915,-3488.,-3296.,270.)
	set dl=CreateUnit(p,1848657989,-6944.,-6368.,270.)
	call SetUnitColor(dl,ConvertPlayerColor($C))
	set QJ=CreateUnit(p,1848657989,5920.,6176.,270.)
	call SetUnitColor(QJ,ConvertPlayerColor($C))
	set p=Player(1)
	set zk=CreateUnit(p,1701080930,-6400.,-5696.,270.)
	set yk=CreateUnit(p,1701080930,-5248.,-6848.,270.)
	set p=Player(6)
	set XK=CreateUnit(p,1848651826,5920.,5920.,270.)
	call SetUnitColor(XK,ConvertPlayerColor($C))
	set OK=CreateUnit(p,1848651863,5984.,6432.,270.)
	call SetUnitColor(OK,ConvertPlayerColor($C))
	set AK=CreateUnit(p,1848651862,5920.,6048.,270.)
	call SetUnitColor(AK,ConvertPlayerColor($C))
	set NK=CreateUnit(p,1848651864,5920.,6304.,270.)
	call SetUnitColor(NK,ConvertPlayerColor(1))
	set dK=CreateUnit(p,1849897784,6496.,6368.,270.)
	call SetUnitColor(dK,ConvertPlayerColor($C))
	set CK=CreateUnit(p,1848652107,6304.,6368.,270.)
	call SetUnitColor(CK,ConvertPlayerColor($C))
	set QK=CreateUnit(p,1970496880,4352.,3584.,270.)
	set BK=CreateUnit(p,1848651833,5984.,5792.,270.)
	call SetUnitColor(BK,ConvertPlayerColor($C))
	set cK=CreateUnit(p,1849897781,6816.,5984.,270.)
	call SetUnitColor(cK,ConvertPlayerColor($C))
	set bK=CreateUnit(p,1966092369,6816.,5664.,270.)
	set qJ=CreateUnit(p,1966092365,6048.,-2080.,270.)
	set PJ=CreateUnit(p,1966092356,6304.,-96.,270.)
	set ol=CreateUnit(p,1970956647,4384.,4256.,270.)
	set WK=CreateUnit(p,1970172012,5184.,4864.,220.)
	set zK=CreateUnit(p,1970564964,3904.,3904.,270.)
	set ZK=CreateUnit(p,1966092365,1056.,-96.,270.)
	set vl=CreateUnit(p,1966092356,2528.,1824.,270.)
	set el=CreateUnit(p,1966092366,3936.,3488.,270.)
	set xl=CreateUnit(p,1966092372,4832.,4832.,270.)
	set SK=CreateUnit(p,1966092372,5152.,4512.,270.)
	set rl=CreateUnit(p,1970956647,3168.,4064.,270.)
	set al=CreateUnit(p,1970956647,5728.,4000.,270.)
	set EK=CreateUnit(p,1966092366,2976.,5792.,270.)
	set VK=CreateUnit(p,1970496880,3392.,5504.,270.)
	set aK=CreateUnit(p,1970564964,3392.,6080.,270.)
	set xK=CreateUnit(p,1970956647,4128.,6240.,270.)
	set eK=CreateUnit(p,1970495856,3968.,5888.,270.)
	set Vl=CreateUnit(p,1969385326,4992.,5952.,270.)
	set El=CreateUnit(p,1970956647,2656.,4704.,270.)
	set Xl=CreateUnit(p,1970956647,5536.,2464.,270.)
	set Ol=CreateUnit(p,1970956647,4064.,5280.,270.)
	set Rl=CreateUnit(p,1970956647,3488.,4832.,270.)
	set Al=CreateUnit(p,1970495856,6400.,3584.,270.)
	set Nl=CreateUnit(p,1970564964,6080.,2944.,270.)
	set bl=CreateUnit(p,1970496880,6656.,2880.,270.)
	set Bl=CreateUnit(p,1966092366,6368.,2528.,270.)
	set cl=CreateUnit(p,1970956647,5024.,3744.,270.)
	set vK=CreateUnit(p,1970956647,6880.,3936.,270.)
	set wK=CreateUnit(p,1969385326,6464.,4608.,270.)
	set TK=CreateUnit(p,1970956647,4640.,2848.,270.)
	set HJ=CreateUnit(p,1966092365,-4704.,5920.,270.)
	set UJ=CreateUnit(p,1966092356,32.,5920.,270.)
	set p=Player($F)
	set DJ=CreateUnit(p,1697656900,-6005.1,5458.6,212.15)
	set lJ=CreateUnit(p,1697656898,-561.7,-651.7,325.6)
	set FJ=CreateUnit(p,1697656897,5717.5,-6070.9,64.)
	set fJ=CreateUnit(p,1697656888,-5467.9,-5891.1,307.304)
	set CJ=CreateUnit(p,1697656881,4901.8,4536.6,212.11)
	call ConfigureNeutralVictim()
	set bH=Filter(function WE7)
	set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)
	set filterEnumDestructablesInCircleBJ=Filter(function L4)
	set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)
	set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)
	set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)
	set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)
	set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)
	set BU7=0
	loop
	exitwhen BU7==16
	set bj_FORCE_PLAYER[BU7]=CreateForce()
	call ForceAddPlayer(bj_FORCE_PLAYER[BU7],Player(BU7))
	set BU7=BU7+1
	endloop
	set bj_FORCE_ALL_PLAYERS=CreateForce()
	call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)
	set bj_cineModePriorSpeed=GetGameSpeed()
	set bj_cineModePriorFogSetting=IsFogEnabled()
	set bj_cineModePriorMaskSetting=IsFogMaskEnabled()
	set BU7=0
	loop
	exitwhen BU7>=bj_MAX_QUEUED_TRIGGERS
	set bj_queuedExecTriggers[BU7]=null
	set bj_queuedExecUseConds[BU7]=false
	set BU7=BU7+1
	endloop
	set bj_isSinglePlayer=false
	set F1H=0
	set BU7=0
	loop
	exitwhen BU7>=$C
	if(GetPlayerController(Player(BU7))==MAP_CONTROL_USER and GetPlayerSlotState(Player(BU7))==PLAYER_SLOT_STATE_PLAYING)then
	set F1H=F1H+1
	endif
	set BU7=BU7+1
	endloop
	set TC4[0]=""
	set TC4[1]="CLG.Pajkatt"
	set TC4[2]="CLG.Mirakel"
	set TC4[3]="CLG.Akke"
	set TC4[4]="CLG.MiSeRy"
	set TC4[5]="CLG.Lacoste"
	set TC4[6]="Darer.M"
	set TC4[7]="Darer.G"
	set TC4[8]="Darer.Artstyle"
	set TC4[9]="Darer.Funn1k"
	set TC4[$A]="M5.Admiration"
	set TC4[$B]="M5.Vigoss"
	set TC4[$C]="M5.Bl00DAnGeL-"
	set TC4[$D]="M5.PGG"
	set TC4[$E]="M5.Silent"
	set TC4[$F]="Na`Vi.XBOCT"
	set TC4[16]="Na`Vi.Dendi"
	set TC4[17]="Na`Vi.Puppey"
	set TC4[18]="Na`Vi.LighTofHeaveN"
	set TC4[19]="Na`Vi.ARS-ART"
	set TC4[20]="EG.Fear"
	set TC4[21]="EG.Bulba"
	set TC4[22]="EG.Maelk"
	set TC4[23]="EG.DeMoN"
	set TC4[24]="EG.Universe"
	set TC4[25]="IG.Ferrari_430"
	set TC4[26]="IG.Faith"
	set TC4[27]="IG.Zhou"
	set TC4[28]="IG.ChuaN"
	set TC4[29]="IG.YYF"
	set TC4[30]="LGD.xiao8"
	set TC4[31]="LGD.Sylar"
	set TC4[32]="LGD.Yao"
	set TC4[33]="LGD.DD"
	set TC4[34]="LGD.ddc"
	set TC4[35]="EHOME.357"
	set TC4[36]="EHOME.KingJ"
	set TC4[37]="EHOME.LaNm"
	set TC4[38]="EHOME.MMY!"
	set TC4[39]="EHOME.PCT"
	set TC4[40]="DK.Super"
	set TC4[41]="DK.Zippo"
	set TC4[42]="DK.LongDD"
	set TC4[43]="DK.Burning"
	set TC4[44]="DK.rOtk"
	set TC4[45]="AL.bleek"
	set TC4[46]="AL.Musica"
	set TC4[47]="AL.Snoopy"
	set TC4[48]="AL.Shatan"
	set TC4[49]="AL.Godot"
	set TC4[50]="TZ.iceiceice"
	set TC4[51]="TZ.xFreedom"
	set TC4[52]="TZ.xy-"
	set TC4[53]="TZ.YamateH"
	set TC4[54]="TZ.Ice"
	set TC4[55]="TongFu.Kabu"
	set TC4[56]="TongFu.SanSheng"
	set TC4[57]="13abyKnight"
	set TC4[58]="dLxYan"
	set TC4[59]="TongFu.Awoke"
	set TC4[60]="Green"
	set TC4[61]="TongFu.Mu"
	set TC4[62]="TongFu.Hao"
	set TC4[63]="MS.SexyBamboe"
	set TC4[64]="Bane"
	set TC4[65]="MS.Black^"
	set TC4[66]="MS.1437"
	set TC4[67]="MS.KuroKy"
	set TC4[68]="MS.SingSing"
	set TC4[69]="Yrk"
	set TC4[70]="sExtasY"
	set TC4[71]="Tayschrenn"
	set TC4[72]="theCupofteA"
	set TC4[73]="idef!x"
	set TC4[74]="kEEper"
	set TC4[75]="nEKro"
	set TC4[76]="Tulex"
	set TC4[77]="Warlog"
	set TC4[78]="Radge"
	set TC4[79]="Bu1LD0z3R"
	set TC4[80]="r1sk"
	set TC4[81]="Toneeh"
	set TC4[82]="Mr.Escobar"
	set TC4[83]="Ghost0"
	set TC4[84]="Blackshatan"
	set TC4[85]="TeG-Hyperion"
	set TC4[86]="TeG-Ly0n"
	set TC4[87]="TeG-ppasarel"
	set TC4[88]="Ro-Coco"
	set TC4[89]="TeG-RMP"
	set TC4[90]="TeG-jackass"
	set TC4[91]="NozG"
	set TC4[92]="lacosteeeee"
	set TC4[93]="NlKE"
	set TC4[94]="Swoopie"
	set TC4[95]="Soundchaosdebug"
	set TC4[96]="Luck_Duck"
	set TC4[97]="Simba"
	set TC4[98]="AMXZAKU"
	set TC4[99]="HurDur"
	set TC4[100]="Zaetr"
	set TC4[101]="Dargon_Knight"
	set TC4[102]="Ciel"
	set TC4[103]="SaDJ0KeR"
	set TC4[104]="Phaselock"
	set TC4[105]="PleaseBugMeNot"
	set TC4[106]="changeling"
	set TC4[107]="Deel"
	set TC4[108]="xbox619"
	set TC4[109]="Uncle_Zhuge"
	set TC4[110]="Thedeath"
	set TC4[111]="gAmmAlysE"
	set TC4[112]="Ace_Tobi"
	set TC4[113]="RisingDemon"
	set TC4[114]="Harreke"
	set TC4[115]="cipd"
	set TC4[116]="Sebra"
	set TC4[117]="Simple-.-"
	set TC4[118]="gaibo1"
	set TC4[119]="Cloud_str"
	set bj_isSinglePlayer=(F1H==1)
	set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,$2710,$2710)
	set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,$2710,$2710)
	set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,$2710,$2710)
	set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
	set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
	set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,$2710,$2710)
	set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,$2710,$2710)
	set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,$2710,$2710)
	set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,$2710,$2710)
	set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)
	set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)
	call DelayedSuspendDecayCreate()
	set F0H=VersionGet()
	if(F0H==VERSION_REIGN_OF_CHAOS)then
	set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0
	else
	set bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1
	endif
	call InitQueuedTriggers()
	call InitRescuableBehaviorBJ()
	call InitDNCSounds()
	call InitMapRects()
	call InitSummonableCaps()
	call V5()
	set A1F=0
	loop
	set bj_stockAllowedPermanent[A1F]=false
	set bj_stockAllowedCharged[A1F]=false
	set bj_stockAllowedArtifact[A1F]=false
	set A1F=A1F+1
	exitwhen A1F>$A
	endloop
	call SetAllItemTypeSlots($B)
	call SetAllUnitTypeSlots($B)
	set bj_stockUpdateTimer=CreateTimer()
	call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function B4F)
	set bj_stockItemPurchased=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player($F),EVENT_PLAYER_UNIT_SELL_ITEM,null)
	call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)
	call DetectGameStarted()
	set i=0
	set i=0
	loop
	exitwhen(i>16)
	set J[i]=0
	set K[i]=0
	set H[i]=0
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>100)
	set G[i]=false
	set je[i]=0
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>4)
	set M[i]=0
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>2)
	set C[i]=0
	set P7[i]=0
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>$C)
	set P[i]=""
	set A[i]=CreateTimer()
	set Q[i]=0
	set U[i]=0
	set GZ[i]=false
	set GZ[256+i]=false
	set GZ[272+i]=false
	set GZ[304+i]=false
	set G0[48+i]=false
	set G0[i]=false
	set hG[i]=0
	set eY[80+i]=3
	set eY[i]=0
	set eY[544+i]=0
	set h4[i]=null
	set IJ7[i]=null
	set hq[288+i]=.0
	set hq[304+i]=.0
	set hq[640+i]=.0
	set hq[656+i]=.0
	set HC[i]=Location(.0,.0)
	set HC[16+i]=Location(.0,.0)
	set HC[32+i]=Location(.0,.0)
	set HC[48+i]=Location(.0,.0)
	set HC[256+i]=Location(.0,.0)
	set h9[i]=null
	set h8[i]=null
	set eY[$D0+i]=0
	set eY[$E0+i]=0
	set eY[$F0+i]=$F423F
	set hG[$C0+i]=0
	set hG[288+i]=0
	set hq[624+i]=0
	set B04[i]=true
	set B04[16+i]=true
	set B04[32+i]=false
	set B04[48+i]=false
	set B04[64+i]=true
	set B04[112+i]=true
	set LS4[48+i]=-1
	set LS4[64+i]=-1
	set G0[$E0+i]=false
	set h8[$90+i]=null
	set GZ[$B0+i]=false
	set G77[i]=0
	set G77[16+i]=0
	set G77[32+i]=0
	set G77[48+i]=0
	set G77[96+i]=0
	set G77[112+i]=0
	set G77[$A0+i]=0
	set G77[$B0+i]=0
	set G77[$F0+i]=0
	set G77[272+i]=0
	set G77[288+i]=0
	set G77[464+i]=0
	set G97[48+i]=false
	set G97[320+i]=true
	set G77[$D0+i]=StringHash("aiBuy|"+I2S(i))
	set G77[$E0+i]=StringHash("aiBuyS|"+I2S(i))
	set G77[256+i]=StringHash("aiBuyBear|"+I2S(i))
	set G77[352+i]=StringHash("aiIt#|"+I2S(i))
	set G77[368+i]=StringHash("aiIt#copy|"+I2S(i))
	set G77[448+i]=StringHash("aiBuyLux|"+I2S(i))
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>$D)
	set I[i]=false
	set T[i]=CreateTimer()
	set V4[i]=false
	set S7[i]=0
	set T7[i]=0
	set Be[i]=0
	set oo[i]=false
	set i=i+1
	endloop
	set V=CreateTimer()
	set i=0
	loop
	exitwhen(i>1)
	set F[i]=0
	set mx[i]=false
	set A8[i]=0
	set eo[i]=false
	set i=i+1
	endloop
	set W4=$96
	set av=true
	set Ev=true
	set Ov=true
	set Rv=true
	set Av=true
	set Nv=true
	set bv=true
	set Bv=true
	set cv=true
	set Cv=true
	set Dv=true
	set fv=true
	set C4=3
	set D7=1
	set i=0
	loop
	exitwhen(i>17)
	set G7[i]=null
	set i=i+1
	endloop
	set W7=CreateForce()
	set X7=CreateForce()
	set O8=CreateGroup()
	set C8=CreateForce()
	set D9=.0
	set E9=true
	set F9=true
	set i=0
	loop
	exitwhen(i>$E)
	set O9[i]=false
	set i=i+1
	endloop
	set i=0
	loop
	exitwhen(i>$F)
	set B9[i]="Here"
	set i=i+1
	endloop
	call Z17()
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,15.,true)
	call TriggerAddCondition(t,Condition(function l8))
	set t=null
	set IF4[0]=false
	set IF4[1]=false
	set IF4[2]=false
	set IF4[3]=false
	set IF4[4]=false
	set IF4[5]=false
	set IF4[6]=false
	set IF4[7]=false
	set IF4[8]=false
	set IF4[9]=false
	set IF4[$A]=false
	set IF4[$B]=false
	set IF4[$C]=false
	set IF4[$D]=false
	set IF4[$E]=false
	set IF4[$F]=false
	set IF4[16]=false
	call FTH()
	call BV8(1110455898)
	call BV8(1112560453)
	call BV8(1110455889)
	call BV8(1112757326)
	call BV8(1112044643)
	call BV8(1110458957)
	call BV8(1110458962)
	call BV8(1110459185)
	call BV8(1111844210)
	call BV8(1110454869)
	call BV8(1110456133)
	call BV8(1110459206)
	call BV8(1110455885)
	call BV8(1110456142)
	call BV8(1110456403)
	call BV8(1110454353)
	call BV8(1110456114)
	call BV8(1112891758)
	call BV8(1110456629)
	call BV8(1110456371)
	call BV8(1110454870)
	call BV8(1110454617)
	call BV8(1112432994)
	call BV8(1110456402)
	call BV8(1110455862)
	call BV8(1110455113)
	call BV8(1110455859)
	call BV8(1113943649)
	call BV8(1113943655)
	call BV8(1110455107)
	call BV8(1110454348)
	call BV8(1112040289)
	call BV8(1113813860)
	call BV8(1110456121)
	call BV8(1110458961)
	call BV8(1110458937)
	call BV8(1114665575)
	call BV8(1110456397)
	call BV8(1110454855)
	call BV8(1110454616)
	call BV8(1110454596)
	call BV8(1110456626)
	call BV8(1110458705)
	call BV8(1111847784)
	call BV8(1110454321)
	call BV8(1110454583)
	call BV8(1110458693)
	call BV8(1110458692)
	call BV8(1110456399)
	call BV8(1114010223)
	call BV8(1110454839)
	call BV8(1110454840)
	call BV8(1110455624)
	call BV8(1110458963)
	call BV8(1113813609)
	call BV8(1110458950)
	call BV8(1110458949)
	call BV8(1110456624)
	call BV8(1110454328)
	call BV8(1110455362)
	call BV8(1110454854)
	call BV8(1112896368)
	call BV8(1114993524)
	call BV8(1110459203)
	call BV8(1111716457)
	call BV8(1110455114)
	call BV8(1111847784)
	call BV8(1110454321)
	call BV8(1110458705)
	call BV8(1113943649)
	call BV8(1113943655)
	call BV8(1110456120)
	call BV8(1113875828)
	call BV8(1110454356)
	call BV8(1114860655)
	call BV8(1112433768)
	call BV8(1093749828)
	call BV8(1110459204)
	call BV8(1093749313)
	call BV8(1110455347)
	call BV8(1112436833)
	call BV8(1110454606)
	call BV8(1112105826)
	call BV8(1110455377)
	call BV8(1110454339)
	call BV8(1110456651)
	call BV8(1110455091)
	call BV8(1110456390)
	call BV8(1110456389)
	call BV8(1114664809)
	call BV8(1110458701)
	call BV8(1112437348)
	call BV8(1110454344)
	call BV8(1112500344)
	call BV8(1110455110)
	call BV8(1110454862)
	call BV8(1110459703)
	call BV8(1110455876)
	call BV8(1110458958)
	call BV8(1110456657)
	call BV8(1110459465)
	call BV8(1110458946)
	call BV8(1110456650)
	call BV8(1110458694)
	call BV8(1110456386)
	call BV8(1110456113)
	call BV8(1110456398)
	call BV8(1110454857)
	call BV8(1110456401)
	call BV8(1110459186)
	call BV8(1110455891)
	call BV8(1110454867)
	call BV8(1110454871)
	call BV8(1110455633)
	call BV8(1110454852)
	call BV8(1110458969)
	call BV8(1110454864)
	call BV8(1110455622)
	call BV8(1110459728)
	call BV8(1110459730)
	call BV8(1110459732)
	call BV8(1110459982)
	call BV8(1110459993)
	call BV8(1110459988)
	call BV8(1110459994)
	call BV8(1110460208)
	call BV8(1110459957)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function BZ8))
	set t=null
	call FlushGameCache(InitGameCache("dr.x"))
	set IU4=InitGameCache("dr.x")
	set H34[0]=1093744454
	set H34[1]=1093744455
	set H34[2]=1093744456
	set H34[3]=1093744451
	set H34[4]=1093744452
	set H34[5]=1093744453
	set H34[6]=1093744458
	set H34[7]=1093744457
	set H34[8]=1093744460
	set TJ4[0]=1093751109
	set TJ4[1]=1093751110
	set TJ4[2]=1093751113
	set TJ4[3]=1093751115
	set TJ4[4]=1093751114
	set TJ4[5]=1093751112
	set TJ4[6]=1093751119
	set TJ4[7]=1093751118
	set TJ4[8]=1093751117
	set TJ4[9]=1093751111
	set TJ4[$A]=1093751121
	set H64[0]=1093748555
	set H64[1]=1093748556
	set H64[2]=1093748554
	set H64[3]=1093748560
	set H64[4]=1093748557
	set H64[5]=1093748558
	set H64[6]=1093748559
	set H64[7]=1093748553
	set H64[8]=1093748561
	set HL4[0]=1093747533
	set HL4[1]=1093747531
	set HL4[2]=1093747526
	set HL4[3]=1093747529
	set HL4[4]=1093747527
	set HL4[5]=1093747528
	set T9=CreateTrigger()
	call TriggerAddCondition(T9,Condition(function EW8))
	set U9[0]=1747990855
	set W9[0]=50
	set U9[1]=1747990868
	set W9[1]=100
	set U9[2]=1747990854
	set W9[2]=$96
	set U9[3]=1747990856
	set W9[3]=$C8
	set U9[4]=1747990853
	set W9[4]=$FA
	set U9[5]=1747990852
	set W9[5]=300
	set U9[6]=1747990851
	set W9[6]=350
	set U9[7]=1747990850
	set W9[7]=400
	set U9[8]=1747990841
	set W9[8]=450
	set U9[9]=1747990849
	set W9[9]=500
	set U9[$A]=1747990858
	set W9[$A]=550
	set U9[$B]=1747990859
	set W9[$B]=600
	set U9[$C]=1747990860
	set W9[$C]=650
	set U9[$D]=1747990861
	set W9[$D]=700
	set U9[$E]=1747990862
	set W9[$E]=750
	set U9[$F]=1747990863
	set W9[$F]=800
	set U9[16]=1747990864
	set W9[16]=850
	set U9[17]=1747990865
	set W9[17]=900
	set U9[18]=1747990866
	set W9[18]=950
	set U9[19]=1747990867
	set W9[19]=$3E8
	set U9[20]=1747990857
	set W9[20]=$41A
	set U9[21]=1747990874
	set W9[21]=$44C
	set U9[22]=1747990872
	set W9[22]=$47E
	set U9[23]=1747992881
	set W9[23]=$4B0
	set U9[24]=1747992882
	set W9[24]=$4E2
	set U9[25]=1747992886
	set W9[25]=$514
	set U9[26]=1747992883
	set W9[26]=$546
	set U9[27]=1747992884
	set W9[27]=$578
	set U9[28]=1747990873
	set W9[28]=$5AA
	set U9[29]=1747990870
	set W9[29]=$5DC
	set U9[30]=1747992880
	set W9[30]=$60E
	set U9[31]=1747990869
	set W9[31]=$640
	set U9[32]=1747992902
	set W9[32]=$672
	set U9[33]=1747992900
	set W9[33]=$6A4
	set U9[34]=1747992901
	set W9[34]=$6D6
	set U9[35]=1747992899
	set W9[35]=$708
	set U9[36]=1747992898
	set W9[36]=$73A
	set U9[37]=1747992897
	set W9[37]=$76C
	set U9[38]=1747992889
	set W9[38]=$79E
	set U9[39]=1747992903
	set W9[39]=$7D0
	set U9[40]=1747992887
	set W9[40]=$802
	set U9[41]=1747992911
	set W9[41]=$834
	set U9[42]=1747992921
	set W9[42]=$866
	set U9[43]=1747992904
	set W9[43]=$898
	set U9[44]=1747992905
	set W9[44]=$8CA
	set U9[45]=1747992906
	set W9[45]=$8FC
	set U9[46]=1747992912
	set W9[46]=$92E
	set U9[47]=1747992913
	set W9[47]=$960
	set U9[48]=1747992907
	set W9[48]=$992
	set U9[49]=1747992914
	set W9[49]=$9C4
	set U9[50]=1747992908
	set W9[50]=$9F6
	set U9[51]=1747992915
	set W9[51]=$A28
	set U9[52]=1747990871
	set W9[52]=$A5A
	set U9[53]=1747992909
	set W9[53]=$A8C
	set U9[54]=1747992888
	set W9[54]=$ABE
	set U9[55]=1747992916
	set W9[55]=$AF0
	set U9[56]=1747992917
	set W9[56]=$B22
	set U9[57]=1747992910
	set W9[57]=$B54
	set U9[58]=1747992918
	set W9[58]=$B86
	set U9[59]=1747992919
	set W9[59]=$BB8
	set V9[0]=U9[EN8(1)]
	set V9[1]=U9[EN8(1)]
	set V9[2]=U9[EN8(1)]
	set V9[3]=U9[EN8(1)]
	set V9[4]=U9[EN8(1)]
	set V9[5]=U9[EN8(1)]
	set V9[6]=U9[EN8(1)]
	set V9[7]=U9[EN8(1)]
	set V9[8]=U9[EN8(1)]
	set V9[9]=U9[EN8(1)]
	set V9[$A]=U9[EN8(1)]
	set V9[$B]=U9[EN8(1)]
	set V9[$C]=U9[EN8(1)]
	set V9[$D]=U9[EN8(1)]
	set V9[$E]=U9[EN8(1)]
	set C7=InitHashtable()
	set IV4=Rect(-7040,-7680,7040,7168)
	call SetFloatGameState(GAME_STATE_TIME_OF_DAY,6.)
	call SuspendTimeOfDay(false)
	call SetTimeOfDayScale(.5)
	call SetSkyModel("Environment\\Sky\\FoggedSky\\FoggedSky.mdl")
	call SetCreepCampFilterState(true)
	set vo="Normal Mode"
	call TimerStart(V,99999.,false,null)
	set Bo=AddWeatherEffect(bj_mapInitialPlayableArea,1380018290)
	set bo=AddWeatherEffect(bj_mapInitialPlayableArea,1397645939)
	set fL=AddWeatherEffect(bj_mapInitialPlayableArea,1280470369)
	set FL=AddWeatherEffect(bj_mapInitialPlayableArea,1464822903)
	set Y7[0]=Player(0)
	set Y7[1]=Player(1)
	set Y7[2]=Player(2)
	set Y7[3]=Player(3)
	set Y7[4]=Player(4)
	set Y7[5]=Player(5)
	set Z7[0]=Player(6)
	set Z7[1]=Player(7)
	set Z7[2]=Player(8)
	set Z7[3]=Player(9)
	set Z7[4]=Player($A)
	set Z7[5]=Player($B)
	set A7=Player($C)
	set B7=Player($F)
	call SetUnitPathing(fJ,false)
	call SetUnitPathing(FJ,false)
	call SetUnitPathing(lJ,false)
	call SetUnitPathing(DJ,false)
	call SetUnitPathing(CJ,false)
	call BQ8(CJ,true)
	call BQ8(DJ,true)
	call BQ8(lJ,true)
	call BQ8(FJ,true)
	call BQ8(fJ,true)
	set Z=GetUnitLoc(CJ)
	set vv=GetUnitLoc(fJ)
	set ev=GetUnitLoc(lJ)
	set ov=GetUnitLoc(DJ)
	set rv=GetUnitLoc(FJ)
	set G8=1093678663
	set N8[1]=vv
	set N8[2]=ov
	set N8[3]=ev
	set N8[4]=rv
	set N8[5]=Z
	set Jv=GetRectCenter(jo)
	set lv=GetRectCenter(lo)
	set Lv=GetRectCenter(go)
	set mv=GetRectCenter(zo)
	set qv=GetRectCenter(er)
	set pv=GetRectCenter(wo)
	set Qv=GetRectCenter(Xr)
	set tv=GetRectCenter(Er)
	set sv=GetRectCenter(ar)
	set Tv=GetRectCenter(Uo)
	set Wv=GetRectCenter(to)
	set Uv=GetRectCenter(Qo)
	set E7=GetRectCenter(HD)
	set F7=GetRectCenter(ED)
	set X8=true
	set IW4=GetUnitX(vk)
	set IX4=GetUnitY(vk)
	set ML=GetUnitX(ik)
	set PL=GetUnitY(ik)
	set QL=GetUnitX(xk)
	set SL=GetUnitY(xk)
	set tL=GetUnitX(ek)
	set TL=GetUnitY(ek)
	set UL=GetUnitX(Wk)
	set wL=GetUnitY(Wk)
	set zL=GetUnitX(JJ)
	set vm=GetUnitY(JJ)
	set em=GetUnitX(GJ)
	set xm=GetUnitY(GJ)
	set om=GetUnitX(dJ)
	set rm=GetUnitY(dJ)
	set im=GetUnitX(LJ)
	set am=GetUnitY(LJ)
	set Vm=GetUnitX(ak)
	set Em=GetUnitY(ak)
	set Xm=GetUnitX(dl)
	set Om=GetUnitY(dl)
	set Am=GetUnitX(BJ)
	set Nm=GetUnitY(BJ)
	set bm=GetUnitX(Ok)
	set Bm=GetUnitY(Ok)
	set cm=GetUnitX(Ek)
	set Cm=GetUnitY(Ek)
	set dm=GetUnitX(nk)
	set fm=GetUnitY(nk)
	set Fm=GetUnitX(Rk)
	set hm=GetUnitY(Rk)
	set Jm=GetUnitX(MJ)
	set lm=GetUnitY(MJ)
	set Mm=GetUnitX(Vk)
	set pm=GetUnitY(Vk)
	set Pm=GetUnitX(Nk)
	set Qm=GetUnitY(Nk)
	set Tm=GetUnitX(Ak)
	set Um=GetUnitY(Ak)
	set wm=GetUnitX(Fk)
	set Wm=GetUnitY(Fk)
	set zm=GetUnitX(Bk)
	set vM=GetUnitY(Bk)
	set eM=GetUnitX(bk)
	set oM=GetUnitY(bk)
	set rM=GetUnitX(ck)
	set iM=GetUnitY(ck)
	set aM=GetUnitX(fk)
	set nM=GetUnitY(fk)
	set VM=GetUnitX(dk)
	set XM=GetUnitY(dk)
	set AM=GetUnitX(Ck)
	set bM=GetUnitY(Ck)
	set BM=GetUnitX(Gk)
	set cM=GetUnitY(Gk)
	set dM=GetUnitX(gk)
	set fM=GetUnitY(gk)
	set gM=GetUnitX(lk)
	set hM=GetUnitY(lk)
	set HM=GetUnitX(Jk)
	set JM=GetUnitY(Jk)
	set kM=GetUnitX(Lk)
	set lM=GetUnitY(Lk)
	set pM=GetUnitX(pk)
	set sM=GetUnitY(pk)
	set tM=GetUnitX(Pk)
	set wM=GetUnitY(Pk)
	set zM=GetUnitX(jk)
	set vp=GetUnitY(jk)
	set ep=GetUnitX(Qk)
	set op=GetUnitY(Qk)
	set rp=GetUnitX(Sk)
	set ap=GetUnitY(Sk)
	set Vp=GetUnitX(qk)
	set Ep=GetUnitY(qk)
	set Xp=GetUnitX(tk)
	set Rp=GetUnitY(tk)
	set Ap=GetUnitX(Uk)
	set bp=GetUnitY(Uk)
	set Bp=GetUnitX(ok)
	set cp=GetUnitY(ok)
	set Cp=GetUnitX(wk)
	set dp=GetUnitY(wk)
	set fp=GetUnitX(zk)
	set Fp=GetUnitY(zk)
	set gp=GetUnitX(yk)
	set Hp=GetUnitY(yk)
	call RemoveUnit(Nk)
	call RemoveUnit(Ck)
	call RemoveUnit(ck)
	call RemoveUnit(Ak)
	call RemoveUnit(Gk)
	call RemoveUnit(fk)
	call RemoveUnit(Fk)
	call RemoveUnit(gk)
	call RemoveUnit(dk)
	call RemoveUnit(ok)
	call RemoveUnit(wk)
	call RemoveUnit(BJ)
	call RemoveUnit(Bk)
	call RemoveUnit(bk)
	call RemoveUnit(lk)
	call RemoveUnit(Jk)
	call RemoveUnit(Lk)
	call RemoveUnit(pk)
	call RemoveUnit(Pk)
	call RemoveUnit(jk)
	call RemoveUnit(Qk)
	call RemoveUnit(Sk)
	call RemoveUnit(qk)
	call RemoveUnit(tk)
	call RemoveUnit(Uk)
	call RemoveUnit(ak)
	call RemoveUnit(dl)
	call RemoveUnit(LJ)
	call RemoveUnit(dJ)
	call RemoveUnit(GJ)
	call RemoveUnit(JJ)
	call RemoveUnit(xk)
	call RemoveUnit(ek)
	call RemoveUnit(vk)
	call RemoveUnit(ik)
	call RemoveUnit(Wk)
	call RemoveUnit(Ok)
	call RemoveUnit(Ek)
	call RemoveUnit(nk)
	call RemoveUnit(Rk)
	call RemoveUnit(MJ)
	call RemoveUnit(Vk)
	call RemoveUnit(zk)
	call RemoveUnit(yk)
	set IY4=CreateUnit(Y7[0],1852206952,IW4,IX4,270)
	set IZ4=CreateUnit(B7,1749236021,ML,PL,270)
	set I34=CreateUnit(B7,1848652107,QL,SL,270)
	set IL4=CreateUnit(B7,1849897784,tL,TL,270)
	set I04=CreateUnit(B7,1697657397,UL,wL,270)
	set I_4=CreateUnit(B7,1848651862,zL,vm,270)
	set J44=CreateUnit(B7,1848651863,em,xm,270)
	set J74=CreateUnit(B7,1848651826,om,rm,270)
	set J84=CreateUnit(B7,1848651864,im,am,270)
	set J94=CreateUnit(B7,1848651833,Vm,Em,270)
	set JD4=CreateUnit(B7,1848657989,Xm,Om,270)
	set JE4=CreateUnit(Y7[0],1702129516,Am,Nm,270)
	set JF4=CreateUnit(Y7[0],1697656914,bm,Bm,90)
	set JG4=CreateUnit(Y7[0],1697656914,cm,Cm,45)
	set JH4=CreateUnit(Y7[0],1697656914,dm,fm,0)
	set JI4=CreateUnit(Y7[0],1697657137,Fm,hm,90)
	set JJ4=CreateUnit(Y7[0],1697657137,Jm,lm,45)
	set JK4=CreateUnit(Y7[0],1697657137,Mm,pm,0)
	set JM4=CreateUnit(Y7[0],1697656915,Pm,Qm,90)
	set JN4=CreateUnit(Y7[0],1697656915,Tm,Um,45)
	set JO4=CreateUnit(Y7[0],1697656915,wm,Wm,0)
	set JP4=CreateUnit(Y7[0],1697657145,zm,vM,45)
	set JQ4=CreateUnit(Y7[0],1697657145,eM,oM,45)
	set JR4=CreateUnit(Y7[0],1700884333,rM,iM,90)
	set JS4=CreateUnit(Y7[0],1700884333,aM,nM,45)
	set JT4=CreateUnit(Y7[0],1700884333,VM,XM,0)
	set JU4=CreateUnit(Y7[0],1700884325,AM,bM,90)
	set JV4=CreateUnit(Y7[0],1700884325,BM,cM,45)
	set JW4=CreateUnit(Y7[0],1700884325,dM,fM,0)
	set fP=CreateUnit(Y7[0],1701670775,gM,hM,270)
	set FP=CreateUnit(Y7[0],1701670775,HM,JM,270)
	set lP=CreateUnit(Y7[0],1701670775,kM,lM,270)
	set LP=CreateUnit(Y7[0],1701670775,pM,sM,270)
	set MP=CreateUnit(Y7[0],1701670775,tM,wM,270)
	set pP=CreateUnit(Y7[0],1701670775,zM,vp,270)
	set PP=CreateUnit(Y7[0],1701670775,ep,op,270)
	set qP=CreateUnit(Y7[0],1701670775,rp,ap,270)
	set QP=CreateUnit(Y7[0],1701670775,Vp,Ep,270)
	set sP=CreateUnit(Y7[0],1701670775,Xp,Rp,270)
	set tP=CreateUnit(Y7[0],1701670775,Ap,bp,270)
	set WP=CreateUnit(Y7[0],1700884343,Bp,cp,270)
	set zP=CreateUnit(Y7[0],1700884343,Cp,dp,270)
	set vq=CreateUnit(Y7[0],1701080930,fp,Fp,270)
	set eq=CreateUnit(Y7[0],1701080930,gp,Hp,270)
	set QP4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JM4)+800,GetUnitY(JM4)+800)
	set QQ4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JN4)+$46C,GetUnitY(JN4)+$46C)
	set QR4=Rect(GetRectMinX(bj_mapInitialPlayableArea),GetRectMinY(bj_mapInitialPlayableArea),GetUnitX(JO4)+800,GetUnitY(JO4)+800)
	call SetPlayerAbilityAvailable(B7,1098018609,false)
	call SetUnitColor(IZ4,gL)
	call SetUnitColor(I04,gL)
	call SetUnitColor(IL4,JL)
	call SetUnitColor(I34,JL)
	call SetUnitColor(I_4,JL)
	call SetUnitColor(J44,JL)
	call SetUnitColor(J74,JL)
	call SetUnitColor(J84,JL)
	call SetUnitColor(J94,JL)
	call BQ8(JF4,true)
	call BQ8(JG4,true)
	call BQ8(JH4,true)
	call BQ8(JI4,true)
	call BQ8(JJ4,true)
	call BQ8(JK4,true)
	call BQ8(JM4,true)
	call BQ8(JN4,true)
	call BQ8(JO4,true)
	call BQ8(JP4,true)
	call BQ8(JQ4,true)
	call BQ8(JE4,true)
	call BQ8(JR4,true)
	call BQ8(JS4,true)
	call BQ8(JT4,true)
	call BQ8(JU4,true)
	call BQ8(JV4,true)
	call BQ8(JW4,true)
	call BQ8(WP,true)
	call BQ8(zP,true)
	call BQ8(vq,true)
	call BQ8(eq,true)
	call BQ8(fP,true)
	call BQ8(FP,true)
	call BQ8(lP,true)
	call BQ8(LP,true)
	call BQ8(MP,true)
	call BQ8(pP,true)
	call BQ8(PP,true)
	call BQ8(qP,true)
	call BQ8(QP,true)
	call BQ8(sP,true)
	call BQ8(tP,true)
	set JX4=GetUnitX(lK)
	set JY4=GetUnitY(lK)
	set rq=GetUnitX(cK)
	set iq=GetUnitY(cK)
	set aq=GetUnitX(CK)
	set Eq=GetUnitY(CK)
	set Rq=GetUnitX(dK)
	set Aq=GetUnitY(dK)
	set Nq=GetUnitX(bK)
	set bq=GetUnitY(bK)
	set Bq=GetUnitX(AK)
	set cq=GetUnitY(AK)
	set Cq=GetUnitX(OK)
	set Dq=GetUnitY(OK)
	set fq=GetUnitX(XK)
	set Fq=GetUnitY(XK)
	set Hq=GetUnitX(NK)
	set jq=GetUnitY(NK)
	set Jq=GetUnitX(BK)
	set Mq=GetUnitY(BK)
	set qq=GetUnitX(QJ)
	set Qq=GetUnitY(QJ)
	set Sq=GetUnitX(WK)
	set tq=GetUnitY(WK)
	set Uq=GetUnitX(HJ)
	set zq=GetUnitY(HJ)
	set Zq=GetUnitX(ZK)
	set vQ=GetUnitY(ZK)
	set eQ=GetUnitX(qJ)
	set xQ=GetUnitY(qJ)
	set oQ=GetUnitX(UJ)
	set iQ=GetUnitY(UJ)
	set aQ=GetUnitX(vl)
	set EQ=GetUnitY(vl)
	set OQ=GetUnitX(PJ)
	set RQ=GetUnitY(PJ)
	set AQ=GetUnitX(EK)
	set NQ=GetUnitY(EK)
	set bQ=GetUnitX(el)
	set BQ=GetUnitY(el)
	set cQ=GetUnitX(Bl)
	set CQ=GetUnitY(Bl)
	set fQ=GetUnitX(xl)
	set FQ=GetUnitY(xl)
	set hQ=GetUnitX(SK)
	set HQ=GetUnitY(SK)
	set lQ=GetUnitX(VK)
	set LQ=GetUnitY(VK)
	set mQ=GetUnitX(QK)
	set MQ=GetUnitY(QK)
	set PQ=GetUnitX(bl)
	set QQ=GetUnitY(bl)
	set SQ=GetUnitX(aK)
	set UQ=GetUnitY(aK)
	set WQ=GetUnitX(zK)
	set zQ=GetUnitY(zK)
	set ZQ=GetUnitX(Nl)
	set vs=GetUnitY(Nl)
	set es=GetUnitX(El)
	set os=GetUnitY(El)
	set rs=GetUnitX(rl)
	set as=GetUnitY(rl)
	set ns=GetUnitX(Rl)
	set Vs=GetUnitY(Rl)
	set Es=GetUnitX(xK)
	set Xs=GetUnitY(xK)
	set Rs=GetUnitX(Ol)
	set As=GetUnitY(Ol)
	set Ns=GetUnitX(ol)
	set bs=GetUnitY(ol)
	set Bs=GetUnitX(al)
	set cs=GetUnitY(al)
	set Cs=GetUnitX(Xl)
	set Ds=GetUnitY(Xl)
	set fs=GetUnitX(cl)
	set Fs=GetUnitY(cl)
	set Hs=GetUnitX(vK)
	set js=GetUnitY(vK)
	set Js=GetUnitX(TK)
	set Ks=GetUnitY(TK)
	set ls=GetUnitX(eK)
	set Ls=GetUnitY(eK)
	set ms=GetUnitX(Al)
	set Ms=GetUnitY(Al)
	set ps=GetUnitX(Vl)
	set Ps=GetUnitY(Vl)
	set Qs=GetUnitX(wK)
	set Ss=GetUnitY(wK)
	call RemoveUnit(El)
	call RemoveUnit(rl)
	call RemoveUnit(Rl)
	call RemoveUnit(xK)
	call RemoveUnit(Ol)
	call RemoveUnit(ol)
	call RemoveUnit(al)
	call RemoveUnit(Xl)
	call RemoveUnit(cl)
	call RemoveUnit(vK)
	call RemoveUnit(TK)
	call RemoveUnit(HJ)
	call RemoveUnit(UJ)
	call RemoveUnit(EK)
	call RemoveUnit(ZK)
	call RemoveUnit(vl)
	call RemoveUnit(el)
	call RemoveUnit(qJ)
	call RemoveUnit(PJ)
	call RemoveUnit(Bl)
	call RemoveUnit(xl)
	call RemoveUnit(SK)
	call RemoveUnit(VK)
	call RemoveUnit(QK)
	call RemoveUnit(bl)
	call RemoveUnit(aK)
	call RemoveUnit(zK)
	call RemoveUnit(Nl)
	call RemoveUnit(eK)
	call RemoveUnit(Al)
	call RemoveUnit(Vl)
	call RemoveUnit(wK)
	call RemoveUnit(WK)
	call RemoveUnit(AK)
	call RemoveUnit(OK)
	call RemoveUnit(XK)
	call RemoveUnit(NK)
	call RemoveUnit(BK)
	call RemoveUnit(QJ)
	call RemoveUnit(dK)
	call RemoveUnit(CK)
	call RemoveUnit(lK)
	call RemoveUnit(cK)
	call RemoveUnit(bK)
	set JZ4=CreateUnit(Z7[0],1852073580,JX4,JY4,270)
	set JA4=CreateUnit(B7,1849897781,rq,iq,270)
	set zs=CreateUnit(B7,1848652107,aq,Eq,270)
	set Zs=CreateUnit(B7,1849897784,Rq,Aq,270)
	set JB4=CreateUnit(B7,1966092369,Nq,bq,270)
	set eS=CreateUnit(B7,1848651862,Bq,cq,0)
	set oS=CreateUnit(B7,1848651863,Cq,Dq,0)
	set rS=CreateUnit(B7,1848651826,fq,Fq,0)
	set aS=CreateUnit(B7,1848651864,Hq,jq,0)
	set nS=CreateUnit(B7,1848651833,Jq,Mq,0)
	set VS=CreateUnit(B7,1848657989,qq,Qq,0)
	set JC4=CreateUnit(Z7[0],1970172012,Sq,tq,$DC)
	set J34=CreateUnit(Z7[0],1966092365,Uq,zq,270)
	set J64=CreateUnit(Z7[0],1966092365,Zq,vQ,270)
	set JL4=CreateUnit(Z7[0],1966092365,eQ,xQ,270)
	set J14=CreateUnit(Z7[0],1966092356,oQ,iQ,270)
	set J04=CreateUnit(Z7[0],1966092356,aQ,EQ,270)
	set J54=CreateUnit(Z7[0],1966092356,OQ,RQ,270)
	set J24=CreateUnit(Z7[0],1966092366,AQ,NQ,270)
	set J_4=CreateUnit(Z7[0],1966092366,bQ,BQ,270)
	set K44=CreateUnit(Z7[0],1966092366,cQ,CQ,270)
	set K74=CreateUnit(Z7[0],1966092372,fQ,FQ,270)
	set K84=CreateUnit(Z7[0],1966092372,hQ,HQ,270)
	set K94=CreateUnit(Z7[0],1970496880,lQ,LQ,270)
	set KD4=CreateUnit(Z7[0],1970496880,mQ,MQ,270)
	set KE4=CreateUnit(Z7[0],1970496880,PQ,QQ,270)
	set KF4=CreateUnit(Z7[0],1970564964,SQ,UQ,270)
	set KG4=CreateUnit(Z7[0],1970564964,WQ,zQ,270)
	set KH4=CreateUnit(Z7[0],1970564964,ZQ,vs,270)
	call K77()
	set PS=CreateUnit(Z7[0],1970956647,es,os,270)
	set QS=CreateUnit(Z7[0],1970956647,rs,as,270)
	set SS=CreateUnit(Z7[0],1970956647,ns,Vs,270)
	set tS=CreateUnit(Z7[0],1970956647,Es,Xs,270)
	set TS=CreateUnit(Z7[0],1970956647,Rs,As,270)
	set US=CreateUnit(Z7[0],1970956647,Ns,bs,270)
	set WS=CreateUnit(Z7[0],1970956647,Bs,cs,270)
	set ZS=CreateUnit(Z7[0],1970956647,Cs,Ds,270)
	set vt=CreateUnit(Z7[0],1970956647,fs,Fs,270)
	set et=CreateUnit(Z7[0],1970956647,Hs,js,270)
	set xt=CreateUnit(Z7[0],1970956647,Js,Ks,270)
	set ot=CreateUnit(Z7[0],1970495856,ls,Ls,270)
	set rt=CreateUnit(Z7[0],1970495856,ms,Ms,270)
	set at=CreateUnit(Z7[0],1969385326,ps,Ps,270)
	set Vt=CreateUnit(Z7[0],1969385326,Qs,Ss,270)
	set QM4=Rect(GetUnitX(J24)-800,GetUnitY(J24)-800,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
	set QN4=Rect(GetUnitX(J_4)-$46C,GetUnitY(J_4)-$46C,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
	set QO4=Rect(GetUnitX(K44)-800,GetUnitY(K44)-800,GetRectMaxX(bj_mapInitialPlayableArea),GetRectMaxY(bj_mapInitialPlayableArea))
	call SetUnitColor(JA4,hL)
	call SetUnitColor(Zs,JL)
	call SetUnitColor(zs,JL)
	call SetUnitColor(eS,JL)
	call SetUnitColor(oS,JL)
	call SetUnitColor(rS,JL)
	call SetUnitColor(aS,JL)
	call SetUnitColor(nS,JL)
	call BQ8(J34,true)
	call BQ8(J64,true)
	call BQ8(JL4,true)
	call BQ8(J14,true)
	call BQ8(J04,true)
	call BQ8(J54,true)
	call BQ8(J24,true)
	call BQ8(J_4,true)
	call BQ8(K44,true)
	call BQ8(K74,true)
	call BQ8(K84,true)
	call BQ8(JC4,true)
	call BQ8(K94,true)
	call BQ8(KD4,true)
	call BQ8(KE4,true)
	call BQ8(KF4,true)
	call BQ8(KG4,true)
	call BQ8(KH4,true)
	call BQ8(ot,true)
	call BQ8(rt,true)
	call BQ8(at,true)
	call BQ8(Vt,true)
	call BQ8(PS,true)
	call BQ8(QS,true)
	call BQ8(SS,true)
	call BQ8(tS,true)
	call BQ8(TS,true)
	call BQ8(US,true)
	call BQ8(WS,true)
	call BQ8(ZS,true)
	call BQ8(vt,true)
	call BQ8(et,true)
	call BQ8(xt,true)
	set F5H=GetUnitX(wJ)
	set F2H=GetUnitY(wJ)
	set F_H=GetUnitX(ZJ)
	set G4H=GetUnitY(ZJ)
	set G7H=GetUnitX(zJ)
	set G8H=GetUnitY(zJ)
	set G9H=GetUnitX(WJ)
	set GDH=GetUnitY(WJ)
	set GEH=GetUnitX(yJ)
	set GFH=GetUnitY(yJ)
	set GGH=GetUnitX(FK)
	set GHH=GetUnitY(FK)
	set GIH=GetUnitX(fK)
	set GJH=GetUnitY(fK)
	set GKH=GetUnitX(JK)
	set GMH=GetUnitY(JK)
	set GNH=GetUnitX(gK)
	set GOH=GetUnitY(gK)
	set GPH=GetUnitX(GK)
	set GQH=GetUnitY(GK)
	set FN8=125
	call RemoveUnit(wJ)
	call RemoveUnit(ZJ)
	call RemoveUnit(zJ)
	call RemoveUnit(WJ)
	call RemoveUnit(yJ)
	call RemoveUnit(FK)
	call RemoveUnit(fK)
	call RemoveUnit(JK)
	call RemoveUnit(gK)
	call RemoveUnit(GK)
	set KI4=CreateUnit(Player(1),1852010352,F5H,F2H,270)
	call UnitAddAbility(KI4,1093743665)
	call ClearSelectionForPlayer(Player(1))
	call SelectUnitAddForPlayer(KI4,Player(1))
	if GetLocalPlayer()==Player(1)then
	call SetUnitVertexColor(KI4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KI4,$FF,$FF,$FF,FN8)
	endif
	set KJ4=CreateUnit(Player(2),1852010352,F_H,G4H,270)
	call UnitAddAbility(KJ4,1093743665)
	call ClearSelectionForPlayer(Player(2))
	call SelectUnitAddForPlayer(KJ4,Player(2))
	if GetLocalPlayer()==Player(2)then
	call SetUnitVertexColor(KJ4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KJ4,$FF,$FF,$FF,FN8)
	endif
	set KK4=CreateUnit(Player(3),1852010352,G7H,G8H,270)
	call UnitAddAbility(KK4,1093743665)
	call ClearSelectionForPlayer(Player(3))
	call SelectUnitAddForPlayer(KK4,Player(3))
	if GetLocalPlayer()==Player(3)then
	call SetUnitVertexColor(KK4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KK4,$FF,$FF,$FF,FN8)
	endif
	set KM4=CreateUnit(Player(4),1852010352,G9H,GDH,270)
	call UnitAddAbility(KM4,1093743665)
	call ClearSelectionForPlayer(Player(4))
	call SelectUnitAddForPlayer(KM4,Player(4))
	if GetLocalPlayer()==Player(4)then
	call SetUnitVertexColor(KM4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KM4,$FF,$FF,$FF,FN8)
	endif
	set KN4=CreateUnit(Player(5),1852010352,GEH,GFH,270)
	call UnitAddAbility(KN4,1093743665)
	call ClearSelectionForPlayer(Player(5))
	call SelectUnitAddForPlayer(KN4,Player(5))
	if GetLocalPlayer()==Player(5)then
	call SetUnitVertexColor(KN4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KN4,$FF,$FF,$FF,FN8)
	endif
	set KO4=CreateUnit(Player(7),1852010352,GGH,GHH,270)
	call UnitAddAbility(KO4,1093752649)
	call ClearSelectionForPlayer(Player(7))
	call SelectUnitAddForPlayer(KO4,Player(7))
	if GetLocalPlayer()==Player(7)then
	call SetUnitVertexColor(KO4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KO4,$FF,$FF,$FF,FN8)
	endif
	set KP4=CreateUnit(Player(8),1852010352,GIH,GJH,270)
	call UnitAddAbility(KP4,1093752649)
	call ClearSelectionForPlayer(Player(8))
	call SelectUnitAddForPlayer(KP4,Player(8))
	if GetLocalPlayer()==Player(8)then
	call SetUnitVertexColor(KP4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KP4,$FF,$FF,$FF,FN8)
	endif
	set KQ4=CreateUnit(Player(9),1852010352,GKH,GMH,270)
	call UnitAddAbility(KQ4,1093752649)
	call ClearSelectionForPlayer(Player(9))
	call SelectUnitAddForPlayer(KQ4,Player(9))
	if GetLocalPlayer()==Player(9)then
	call SetUnitVertexColor(KQ4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KQ4,$FF,$FF,$FF,FN8)
	endif
	set KR4=CreateUnit(Player($A),1852010352,GNH,GOH,270)
	call UnitAddAbility(KR4,1093752649)
	call ClearSelectionForPlayer(Player($A))
	call SelectUnitAddForPlayer(KR4,Player($A))
	if GetLocalPlayer()==Player($A)then
	call SetUnitVertexColor(KR4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KR4,$FF,$FF,$FF,FN8)
	endif
	set KS4=CreateUnit(Player($B),1852010352,GPH,GQH,270)
	call UnitAddAbility(KS4,1093752649)
	call ClearSelectionForPlayer(Player($B))
	call SelectUnitAddForPlayer(KS4,Player($B))
	if GetLocalPlayer()==Player($B)then
	call SetUnitVertexColor(KS4,$FF,$FF,$FF,$FF)
	else
	call SetUnitVertexColor(KS4,$FF,$FF,$FF,FN8)
	endif
	set KT4[1]=KI4
	set KT4[2]=KJ4
	set KT4[3]=KK4
	set KT4[4]=KM4
	set KT4[5]=KN4
	set KT4[7]=KO4
	set KT4[8]=KP4
	set KT4[9]=KQ4
	set KT4[$A]=KR4
	set KT4[$B]=KS4
	set KU4[1]=GetUnitX(KI4)
	set KU4[2]=GetUnitX(KJ4)
	set KU4[3]=GetUnitX(KK4)
	set KU4[4]=GetUnitX(KM4)
	set KU4[5]=GetUnitX(KN4)
	set KU4[7]=GetUnitX(KO4)
	set KU4[8]=GetUnitX(KP4)
	set KU4[9]=GetUnitX(KQ4)
	set KU4[$A]=GetUnitX(KR4)
	set KU4[$B]=GetUnitX(KS4)
	set KV4[1]=GetUnitY(KI4)
	set KV4[2]=GetUnitY(KJ4)
	set KV4[3]=GetUnitY(KK4)
	set KV4[4]=GetUnitY(KM4)
	set KV4[5]=GetUnitY(KN4)
	set KV4[7]=GetUnitY(KO4)
	set KV4[8]=GetUnitY(KP4)
	set KV4[9]=GetUnitY(KQ4)
	set KV4[$A]=GetUnitY(KR4)
	set KV4[$B]=GetUnitY(KS4)
	call FR8()
	call FW8()
	call AQ7(1702061422,"stand 4")
	call AQ7(1697656918,"stand 4")
	call AQ7(1701081721,"spell")
	call AQ7(1697656919,"spell")
	call AQ7(1969711215,"stand victory")
	call AQ7(1966092337,"stand victory")
	call AQ7(1970169187,"stand channel")
	call AQ7(1966092338,"stand channel")
	call AM7(1848651853,.4,1848651853)
	call AM7(1697657426,.5,1697657426)
	call AM7(1697657428,1.2,1697657428)
	call AM7(1697657427,.5,1697657427)
	call AM7(1697657648,.5,1697657648)
	call AM7(1848659027,1,1848659027)
	set t=CreateTrigger()
	set j8=Player($F)
	set GRH=GetUnitX(qK)
	set GSH=GetUnitY(qK)
	set GTH=GetUnitX(tJ)
	set GUH=GetUnitY(tJ)
	set GVH=GetUnitX(LK)
	set GWH=GetUnitY(LK)
	set GXH=GetUnitX(SJ)
	set GYH=GetUnitY(SJ)
	set GZH=GetUnitX(IE4)
	set GAH=GetUnitY(IE4)
	set GBH=GetUnitX(cJ)
	set GCH=GetUnitY(cJ)
	set G3H=GetUnitX(gJ)
	set G6H=GetUnitY(gJ)
	set GLH=GetUnitX(PK)
	set G1H=GetUnitY(PK)
	set G0H=GetUnitX(Cl)
	set G5H=GetUnitY(Cl)
	set H4H=GetUnitX(WA4)
	set H7H=GetUnitY(WA4)
	set G2H=GetUnitX(WC4)
	set G_H=GetUnitY(WC4)
	set H8H=GetUnitX(WB4)
	set H9H=GetUnitY(WB4)
	call RemoveUnit(qK)
	call RemoveUnit(IE4)
	call RemoveUnit(tJ)
	call RemoveUnit(SJ)
	call RemoveUnit(LK)
	call RemoveUnit(cJ)
	call RemoveUnit(gJ)
	call RemoveUnit(PK)
	call RemoveUnit(Cl)
	call RemoveUnit(WA4)
	call RemoveUnit(WC4)
	call RemoveUnit(WB4)
	set MO4=CreateUnit(j8,1848651832,GXH,GYH,270)
	set MP4=CreateUnit(j8,1848657738,GZH,GAH,270)
	set MQ4=CreateUnit(j8,1848652100,GBH,GCH,270)
	set MR4=CreateUnit(j8,1848659016,G2H,G_H,270)
	set MS4=CreateUnit(j8,1848652110,GRH,GSH,270)
	set MT4=CreateUnit(j8,1848651831,GTH,GUH,270)
	set MU4=CreateUnit(j8,1848651829,GVH,GWH,270)
	set MV4=CreateUnit(j8,1848659017,H4H,H7H,270)
	set MW4=CreateUnit(j8,1848652098,G3H,G6H,270)
	set MX4=CreateUnit(j8,1848652112,GLH,G1H,270)
	set MY4=CreateUnit(j8,1848657739,G0H,G5H,270)
	set MZ4=CreateUnit(j8,1848659018,H8H,H9H,270)
	call SetUnitColor(MO4,ConvertPlayerColor(1))
	call SetUnitColor(MP4,ConvertPlayerColor(1))
	call SetUnitColor(MQ4,ConvertPlayerColor(9))
	call SetUnitColor(MR4,ConvertPlayerColor(9))
	call SetUnitColor(MS4,ConvertPlayerColor(6))
	call SetUnitColor(MT4,ConvertPlayerColor(6))
	call SetUnitColor(MU4,ConvertPlayerColor($A))
	call SetUnitColor(MV4,ConvertPlayerColor($A))
	call SetUnitColor(MW4,ConvertPlayerColor(0))
	call SetUnitColor(MX4,ConvertPlayerColor(0))
	call SetUnitColor(MY4,ConvertPlayerColor($B))
	call SetUnitColor(MZ4,ConvertPlayerColor($B))
	set BV4[1]=MO4
	set BV4[2]=MP4
	set BV4[3]=MQ4
	set BV4[4]=MR4
	set BV4[5]=MS4
	set BV4[6]=MT4
	set BV4[7]=MU4
	set BV4[8]=MV4
	set BV4[9]=MW4
	set BV4[$A]=MX4
	set BV4[$B]=MY4
	set BV4[$C]=MZ4
	call SG9()
	call SF9()
	set t=null
	call FZ8()
	call F08()
	set YR=CreateTrigger()
	call TriggerRegisterTimerEventSingle(YR,.01)
	call TriggerAddAction(YR,function F58)
	set t=CreateTrigger()
	call TriggerRegisterPlayerEventLeave(t,Y7[1])
	call TriggerRegisterPlayerEventLeave(t,Y7[2])
	call TriggerRegisterPlayerEventLeave(t,Y7[3])
	call TriggerRegisterPlayerEventLeave(t,Y7[4])
	call TriggerRegisterPlayerEventLeave(t,Y7[5])
	call TriggerRegisterPlayerEventLeave(t,Z7[1])
	call TriggerRegisterPlayerEventLeave(t,Z7[2])
	call TriggerRegisterPlayerEventLeave(t,Z7[3])
	call TriggerRegisterPlayerEventLeave(t,Z7[4])
	call TriggerRegisterPlayerEventLeave(t,Z7[5])
	call TriggerAddAction(t,function GH8)
	if R8 then
	call F_8()
	set t=CreateTrigger()
	if IsPlayerObserver(KW4)then
	call TriggerRegisterPlayerEventLeave(t,KW4)
	endif
	if IsPlayerObserver(KX4)then
	call TriggerRegisterPlayerEventLeave(t,KX4)
	endif
	call TriggerAddAction(t,function G88)
	endif
	set U2[0]=false
	set U2[1]=false
	set U2[2]=false
	set U2[3]=false
	set U2[4]=false
	set U2[5]=false
	set U2[6]=false
	set U2[7]=false
	set U2[8]=false
	set U2[9]=false
	set U2[$A]=false
	set U2[$B]=false
	set U2[$C]=false
	set U2[$D]=false
	set U2[$E]=false
	set U2[$F]=false
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_HERO_REVIVE_FINISH)
	call TriggerAddAction(t,function S4G)
	set t=CreateTrigger()
	call TriggerRegisterEnterRectSimple(t,bj_mapInitialPlayableArea)
	call TriggerAddCondition(t,Condition(function S68))
	call TriggerAddAction(t,function TQ8)
	set M64=t
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SELL)
	call TriggerAddAction(t,function TV8)
	call TriggerAddCondition(t,Condition(function TU8))
	set M14=t
	set M04=CreateTrigger()
	call TriggerRegisterTimerEvent(M04,.8,true)
	call TriggerAddCondition(M04,Condition(function TW8))
	call DisableTrigger(M04)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.5,true)
	call TriggerAddAction(t,function BC8)
	set M54=t
	call BM8(0,0,false)
	call TZ8()
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.5,true)
	call BT7(t,EVENT_PLAYER_UNIT_SELL)
	call TriggerAddCondition(t,Condition(function TA8))
	set t=null
	call AC7(1093809990)
	call AC7(1093810008)
	call AC7(1093809992)
	call AC7(1093810006)
	call AC7(1093809991)
	call AC7(1093809993)
	call AC7(1093809995)
	call AC7(1093809994)
	set ZR=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(ZR,Y7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(ZR,Z7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(ZR,A7,EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerAddAction(ZR,function T38)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.5,true)
	call TriggerAddCondition(t,Condition(function YN8))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function ZJ8))
	call TriggerAddAction(t,function ZS8)
	set DS=t
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function AH8))
	set t=null
	set NY4=CreateTrigger()
	call TriggerAddCondition(NY4,Condition(function AN8))
	set ZI=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(ZI,A7,EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerAddCondition(ZI,Condition(function AS8))
	call TriggerAddAction(ZI,function AV8)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Y7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[0],EVENT_PLAYER_UNIT_DEATH,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function AC8))
	set t=CreateTrigger()
	call TriggerAddCondition(t,Condition(function BD8))
	call TriggerRegisterTimerEvent(t,6,false)
	set t=null
	set DV=DV+1
	set RU[DV]=1227900486
	set SU[DV]=1227900487
	set ZU[DV]=0
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp"
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227895377
	set SU[DV]=1227895375
	set ZU[DV]=1747988785
	set AU[DV]=1227894849
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBootsOfSpeed.blp"
	set CU[DV]=0
	set EV=DV
	set DV=DV+1
	set RU[DV]=1227895379
	set SU[DV]=1227895376
	set ZU[DV]=1747988786
	set AU[DV]=1227899713
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
	set CU[DV]=0
	set FV=DV
	set DV=DV+1
	set RU[DV]=1227895374
	set SU[DV]=1227895378
	set ZU[DV]=1747988787
	set AU[DV]=1227899731
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
	set CU[DV]=0
	set JV=DV
	set DV=DV+1
	set RU[DV]=1227895384
	set SU[DV]=1227895385
	set ZU[DV]=1747988789
	set AU[DV]=1227899956
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNCirclet.blp"
	set CU[DV]=0
	set MV=DV
	set DV=DV+1
	set RU[DV]=1227895386
	set SU[DV]=1227895859
	set ZU[DV]=1747988790
	set AU[DV]=1227899734
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
	set CU[DV]=0
	set NV=DV
	set DV=DV+1
	set RU[DV]=1227895600
	set SU[DV]=1227895860
	set ZU[DV]=1747988791
	set AU[DV]=1227899954
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_03.blp"
	set CU[DV]=0
	set OV=DV
	set DV=DV+1
	set RU[DV]=1227895601
	set SU[DV]=1227895861
	set ZU[DV]=1747988792
	set AU[DV]=1227899957
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
	set CU[DV]=0
	set QV=DV
	set DV=DV+1
	//��Ʒ������ I032
	set RU[DV]=1227895602
	//��Ʒ������ I046
	set SU[DV]=1227895862
	//��λ������ h019
	set ZU[DV]=1747988793
	//��Ʒ������ I0CZ
	set AU[DV]=1227899738
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSteelMelee.blp"
	set CU[DV]=0
	set SV=DV
	set DV=DV+1
	set RU[DV]=1227895603
	set SU[DV]=1227895863
	set ZU[DV]=1747988801
	set AU[DV]=1227899959
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_12.blp"
	set CU[DV]=0
	set TV=DV
	set DV=DV+1
	set RU[DV]=1227895604
	set SU[DV]=1227895864
	set ZU[DV]=1747988802
	set AU[DV]=1227899736
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_19.blp"
	set CU[DV]=0
	set UV=DV
	set DV=DV+1
	set RU[DV]=1227895605
	set SU[DV]=1227895865
	set ZU[DV]=1747988803
	set AU[DV]=1227899721
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNFrostMourne.blp"
	set CU[DV]=0
	set XV=DV
	set DV=DV+1
	set RU[DV]=1227895606
	set SU[DV]=1227895873
	set ZU[DV]=1747988804
	set AU[DV]=1227899720
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Bow_06.blp"
	set CU[DV]=0
	set AV=DV
	set DV=DV+1
	set RU[DV]=1227895607
	set SU[DV]=1227895874
	set ZU[DV]=1747988805
	set AU[DV]=1227899730
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
	set CU[DV]=0
	set BV=DV
	set DV=DV+1
	set RU[DV]=1227895608
	set SU[DV]=1227895875
	set ZU[DV]=1747988806
	set AU[DV]=1227899722
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGauntletsOfOgrePower.blp"
	set CU[DV]=0
	set CV=DV
	set DV=DV+1
	set RU[DV]=1227895609
	set SU[DV]=1227895876
	set ZU[DV]=1747988807
	set AU[DV]=1227899975
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
	set CU[DV]=0
	set LV=DV
	set DV=DV+1
	set RU[DV]=1227902291
	set SU[DV]=1227902290
	set ZU[DV]=0
	set AU[DV]=1227902292
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGem.blp"
	set CU[DV]=0
	set EW=DV
	set DV=DV+1
	set DV=DV+1
	set RU[DV]=1227895618
	set SU[DV]=1227895877
	set ZU[DV]=1747988808
	set AU[DV]=1227899969
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
	set CU[DV]=0
	set HW=DV
	set DV=DV+1
	set RU[DV]=1227895619
	set SU[DV]=1227895878
	set ZU[DV]=1747988809
	set AU[DV]=1227899729
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPeriapt1.blp"
	set CU[DV]=0
	set NW=DV
	set DV=DV+1
	set RU[DV]=1227895620
	set SU[DV]=1227895879
	set ZU[DV]=1747988810
	set AU[DV]=1227899733
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNNatureTouchGrow.blp"
	set CU[DV]=0
	set OW=DV
	set DV=DV+1
	set RU[DV]=1227895621
	set SU[DV]=1227895880
	set ZU[DV]=1747988811
	set AU[DV]=1227899703
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
	set CU[DV]=$E
	set QW=DV
	set DV=DV+1
	set RU[DV]=1227895621
	set SU[DV]=1227895881
	set ZU[DV]=1747988811
	set AU[DV]=1227899976
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
	set CU[DV]=0
	set RW=DV
	set DV=DV+1
	set RU[DV]=1227895622
	set SU[DV]=1227895882
	set ZU[DV]=1747988812
	set AU[DV]=1227899725
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNMantleOfIntelligence.blp"
	set CU[DV]=0
	set TW=DV
	set DV=DV+1
	set RU[DV]=1227895623
	set SU[DV]=1227895883
	set ZU[DV]=1747988813
	set AU[DV]=1227899716
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
	set CU[DV]=0
	set UW=DV
	set DV=DV+1
	set RU[DV]=1227895624
	set SU[DV]=1227895884
	set ZU[DV]=1747988814
	set AU[DV]=1227899719
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerMasterTraining.blp"
	set CU[DV]=0
	set VW=DV
	set DV=DV+1
	set RU[DV]=1227895625
	set SU[DV]=1227895885
	set ZU[DV]=1747988815
	set AU[DV]=1227899952
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHammer.blp"
	set CU[DV]=0
	set YW=DV
	set DV=DV+1
	set RU[DV]=1227895626
	set SU[DV]=1227895886
	set ZU[DV]=1747988816
	set AU[DV]=1227899726
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfNegation.blp"
	set CU[DV]=0
	set ZW=DV
	set DV=DV+1
	set RU[DV]=1227895627
	set SU[DV]=1227895887
	set ZU[DV]=1747988817
	set AU[DV]=1227899960
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalkerAdeptTraining.tga"
	set CU[DV]=0
	set GX=DV
	set DV=DV+1
	set RU[DV]=1227895628
	set SU[DV]=1227895888
	set ZU[DV]=1747988818
	set AU[DV]=1227899717
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
	set CU[DV]=0
	set NX=DV
	set DV=DV+1
	set RU[DV]=1227895629
	set SU[DV]=1227895889
	set ZU[DV]=1747988819
	set AU[DV]=1227899970
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate13.blp"
	set CU[DV]=0
	set RX=DV
	set DV=DV+1
	set RU[DV]=1227895630
	set SU[DV]=1227895890
	set ZU[DV]=1747988820
	set AU[DV]=1227899724
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUsedSoulGem.blp"
	set CU[DV]=0
	set SX=DV
	set DV=DV+1
	set RU[DV]=1227895632
	set SU[DV]=1227895891
	set ZU[DV]=1747988821
	set AU[DV]=1227899737
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
	set CU[DV]=0
	set WX=DV
	set DV=DV+1
	set RU[DV]=1227895633
	set SU[DV]=1227895892
	set ZU[DV]=1747988822
	set AU[DV]=1227899977
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
	set CU[DV]=0
	set YX=DV
	set DV=DV+1
	set RU[DV]=1227895634
	set SU[DV]=1227895893
	set ZU[DV]=1747988823
	set AU[DV]=1227899735
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingPurple.blp"
	set CU[DV]=0
	set ZX=DV
	set DV=DV+1
	set RU[DV]=1227895635
	set SU[DV]=1227895894
	set ZU[DV]=1747988824
	set AU[DV]=1227899978
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
	set CU[DV]=0
	set AX=DV
	set DV=DV+1
	set RU[DV]=1227895636
	set SU[DV]=1227895895
	set ZU[DV]=1747988825
	set AU[DV]=1227899728
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
	set CU[DV]=0
	set GY=DV
	set DV=DV+1
	set RU[DV]=1227895637
	set SU[DV]=1227895896
	set ZU[DV]=1747988826
	set AU[DV]=1227899715
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfTeleportation.blp"
	set CU[DV]=0
	set HY=DV
	set DV=DV+1
	set RU[DV]=1227895638
	set SU[DV]=1227895897
	set ZU[DV]=1747989040
	set AU[DV]=1227899701
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
	set CU[DV]=0
	set SY=DV
	set DV=DV+1
	set RU[DV]=1227895639
	set SU[DV]=1227895898
	set ZU[DV]=1747989041
	set AU[DV]=1227899979
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
	set CU[DV]=0
	set UY=DV
	set DV=DV+1
	set RU[DV]=1227895640
	set SU[DV]=1227896112
	set ZU[DV]=1747989042
	set AU[DV]=1227899953
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWandOfCyclone.blp"
	set CU[DV]=0
	set ZY=DV
	set DV=DV+1
	set RU[DV]=1227895617
	set SU[DV]=1227896113
	set ZU[DV]=1747989043
	set AU[DV]=1227899961
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
	set CU[DV]=0
	set DZ=DV
	set DV=DV+1
	set RU[DV]=1227901762
	set SU[DV]=1227901761
	set ZU[DV]=0
	set AU[DV]=1227901763
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
	set CU[DV]=0
	set EZ=DV
	set DV=DV+1
	set RU[DV]=1227895641
	set SU[DV]=1227896114
	set ZU[DV]=1747989044
	set AU[DV]=1227899705
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
	set CU[DV]=0
	set HZ=DV
	set DV=DV+1
	set RU[DV]=1227895642
	set SU[DV]=1227896115
	set ZU[DV]=1747989045
	set AU[DV]=1227899723
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSoulGem.blp"
	set CU[DV]=0
	set NZ=DV
	set DV=DV+1
	set RU[DV]=1227895856
	set SU[DV]=1227896116
	set ZU[DV]=1747989046
	set AU[DV]=1227899980
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPeriapt.blp"
	set CU[DV]=0
	set OZ=DV
	set DV=DV+1
	set RU[DV]=1227895857
	set SU[DV]=1227896117
	set ZU[DV]=1747989047
	set AU[DV]=1227899958
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSteelRanged.blp"
	set CU[DV]=0
	set RZ=DV
	set DV=DV+1
	set RU[DV]=1227894860
	set SU[DV]=1227899222
	set ZU[DV]=1747989058
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
	set CU[DV]=0
	set UZ=DV
	set DV=DV+1
	set RU[DV]=1227896133
	set SU[DV]=1227899213
	set ZU[DV]=0
	set AU[DV]=1227899982
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle0.blp"
	set CU[DV]=0
	set XZ=DV
	set DV=DV+1
	set RU[DV]=1227899221
	set SU[DV]=1227899214
	set ZU[DV]=0
	set AU[DV]=1227899983
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle1.blp"
	set CU[DV]=0
	set AZ=DV
	set DV=DV+1
	set RU[DV]=1227899219
	set SU[DV]=1227899215
	set ZU[DV]=0
	set AU[DV]=1227899984
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle2.blp"
	set CU[DV]=0
	set BZ=DV
	set DV=DV+1
	set RU[DV]=1227899220
	set SU[DV]=1227899216
	set ZU[DV]=0
	set AU[DV]=1227899985
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle3.blp"
	set CU[DV]=0
	set CZ=DV
	set DV=DV+1
	set RU[DV]=1227900759
	set SU[DV]=1227900761
	set ZU[DV]=0
	set AU[DV]=1227900979
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Illusion.blp"
	set CU[DV]=0
	set WA=DV
	set DV=DV+1
	set RU[DV]=1227900978
	set SU[DV]=1227900760
	set ZU[DV]=0
	set AU[DV]=1227899986
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Regeneration.blp"
	set CU[DV]=0
	set QA=DV
	set DV=DV+1
	set RU[DV]=1227900758
	set SU[DV]=1227900977
	set ZU[DV]=0
	set AU[DV]=1227900980
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Haste.blp"
	set CU[DV]=0
	set NA=DV
	set DV=DV+1
	set RU[DV]=1227899218
	set SU[DV]=1227900976
	set ZU[DV]=0
	set AU[DV]=1227900982
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle_DoubleDamage.blp"
	set CU[DV]=0
	set JA=DV
	set DV=DV+1
	set RU[DV]=1227899217
	set SU[DV]=1227900762
	set ZU[DV]=0
	set AU[DV]=1227900981
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBottle_Invisibility.blp"
	set CU[DV]=0
	set IA=DV
	set DV=DV+1
	set RU[DV]=1227900740
	set SU[DV]=1227900739
	set ZU[DV]=1747990324
	set AU[DV]=1227900741
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
	set CU[DV]=17
	set YA=DV
	set DV=DV+1
	set RU[DV]=1227900995
	set SU[DV]=1227900994
	set ZU[DV]=0
	set AU[DV]=1227900993
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStarWand.blp"
	set CU[DV]=17
	set DS4=DV
	set DV=DV+1
	set RU[DV]=1227901012
	set SU[DV]=1227901010
	set ZU[DV]=1747990359
	set AU[DV]=1227901014
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
	set CU[DV]=5
	set ZA=DV
	set DV=DV+1
	set RU[DV]=1227901013
	set SU[DV]=1227901008
	set ZU[DV]=0
	set AU[DV]=1227901015
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
	set CU[DV]=5
	set BA=DV
	set DV=DV+1
	set RU[DV]=1227902516
	set SU[DV]=1227902515
	set ZU[DV]=0
	set AU[DV]=1227902517
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
	set CU[DV]=30
	set JB=DV
	set DV=DV+1
	set RU[DV]=1227902519
	set SU[DV]=1227902518
	set ZU[DV]=0
	set AU[DV]=1227902520
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPoisonBlade.blp"
	set CU[DV]=30
	set QB=DV
	set DV=DV+1
	set RU[DV]=1227901495
	set SU[DV]=1227901494
	set ZU[DV]=1747990579
	set AU[DV]=1227901496
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
	set CU[DV]=0
	set GB=DV
	set DV=DV+1
	set RU[DV]=1227901514
	set SU[DV]=1227901513
	set ZU[DV]=1747990583
	set AU[DV]=1227901515
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGreenStaff.blp"
	set CU[DV]=30
	set DZ4=DV
	set DV=DV+1
	set RU[DV]=1227903033
	set SU[DV]=1227903042
	set ZU[DV]=1747993929
	set AU[DV]=1227903041
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"
	set CU[DV]=0
	set U3=DV
	set DV=DV+1
	set RU[DV]=1227902273
	set SU[DV]=1227902265
	set ZU[DV]=1747993421
	set AU[DV]=1227902274
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
	set CU[DV]=0
	set E24=DV
	set DV=DV+1
	set RU[DV]=1227902276
	set SU[DV]=1227902277
	set ZU[DV]=0
	set AU[DV]=1227902275
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
	set CU[DV]=0
	set E_4=DV
	set DV=DV+1
	set RU[DV]=1227896119
	set SU[DV]=1227896131
	set ZU[DV]=1747989057
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAncientOfTheEarth.blp"
	set CU[DV]=0
	set QC=DV
	set DV=DV+1
	set RU[DV]=1227895858
	set SU[DV]=1227896132
	set ZU[DV]=1747989048
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNLesserClarityPotion.blp"
	set CU[DV]=0
	set NC=DV
	set DV=DV+1
	set RU[DV]=1227901007
	set SU[DV]=1227901006
	set ZU[DV]=1747990358
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNVialFull.blp"
	set CU[DV]=0
	set OC=DV
	set DV=DV+1
	set RU[DV]=1227896118
	set SU[DV]=1227896134
	set ZU[DV]=1747989049
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHealingSalve.blp"
	set CU[DV]=0
	set PC=DV
	set DV=DV+1
	set RU[DV]=1227896120
	set SU[DV]=1227896135
	set ZU[DV]=1747989059
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp"
	set CU[DV]=0
	set TC=DV
	set DV=DV+1
	set RU[DV]=1227896121
	set SU[DV]=1227896136
	set ZU[DV]=1747989060
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBlueSentryWard.blp"
	set CU[DV]=0
	set VC=DV
	set DV=DV+1
	set RU[DV]=1227896129
	set SU[DV]=1227896137
	set ZU[DV]=1747989061
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
	set CU[DV]=0
	set WC=DV
	set DV=DV+1
	set RU[DV]=1227896130
	set SU[DV]=1227896138
	set ZU[DV]=1747989062
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNCritterChicken.blp"
	set CU[DV]=0
	set YC=DV
	set DV=DV+1
	set RU[DV]=1227899440
	set SU[DV]=1227899441
	set ZU[DV]=0
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNCheese.blp"
	set CU[DV]=0
	set ZC=DV
	set DV=DV+1
	set RU[DV]=1227900743
	set SU[DV]=1227900742
	set ZU[DV]=1747990325
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPotionOfDivinity.blp"
	set CU[DV]=30
	set AC=DV
	set DV=DV+1
	set RU[DV]=1227900745
	set SU[DV]=1227900744
	set ZU[DV]=1747990326
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDustOfAppearance.blp"
	set CU[DV]=60
	set BC=DV
	set DV=DV+1
	set RU[DV]=1227901780
	set SU[DV]=1227901779
	set ZU[DV]=1747993145
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWandOfManaSteal.blp"
	set CU[DV]=0
	set CC=DV
	set DV=DV+1
	set RU[DV]=1227902534
	set SU[DV]=1227902535
	set ZU[DV]=1747993651
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSmokePotion.blp"
	set CU[DV]=90
	set LC=DV
	set DV=DV+1
	set RU[DV]=1227896369
	set SU[DV]=1227896370
	set ZU[DV]=0
	set AU[DV]=1227895114
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfFire.blp"
	set CU[DV]=0
	set W3=DV
	set DV=DV+1
	set RU[DV]=1227896372
	set SU[DV]=1227896371
	set ZU[DV]=0
	set AU[DV]=1227895115
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_17.blp"
	set CU[DV]=0
	set Y3=DV
	set DV=DV+1
	set RU[DV]=1227896373
	set SU[DV]=1227896374
	set ZU[DV]=0
	set AU[DV]=1227895116
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNThoriumArmor.blp"
	set CU[DV]=25
	set Z3=DV
	set DV=DV+1
	set RU[DV]=1227896376
	set SU[DV]=1227896375
	set ZU[DV]=0
	set AU[DV]=1227895117
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
	set CU[DV]=0
	set B3=DV
	set DV=DV+1
	set RU[DV]=1227896377
	set SU[DV]=1227896385
	set ZU[DV]=0
	set AU[DV]=1227899702
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingVioletSpider.tga"
	set CU[DV]=0
	set C3=DV
	set DV=DV+1
	set RU[DV]=1227896387
	set SU[DV]=1227896386
	set ZU[DV]=0
	set AU[DV]=1227895120
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAbility_Rogue_Sprint.blp"
	set CU[DV]=60
	set E6=DV
	set DV=DV+1
	set RU[DV]=1227895631
	set SU[DV]=1227895380
	set ZU[DV]=0
	set AU[DV]=1227895122
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegGreen.blp"
	set CU[DV]=0
	set F6=DV
	set DV=DV+1
	set RU[DV]=1227895381
	set SU[DV]=1227896153
	set ZU[DV]=0
	set AU[DV]=1227895121
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLeg.blp"
	set CU[DV]=0
	set G6=DV
	set DV=DV+1
	set RU[DV]=1227896368
	set SU[DV]=1227896154
	set ZU[DV]=0
	set AU[DV]=1227895123
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWirtsLegBlue.blp"
	set CU[DV]=0
	set H6=DV
	set DV=DV+1
	set RU[DV]=1227896389
	set SU[DV]=1227896388
	set ZU[DV]=0
	set AU[DV]=1227895124
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
	set CU[DV]=100
	set N6=DV
	set DV=DV+1
	set RU[DV]=1227902543
	set SU[DV]=1227902542
	set ZU[DV]=0
	set AU[DV]=1227902544
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGoldGloves.BLP"
	set CU[DV]=100
	set S6=DV
	set DV=DV+1
	set RU[DV]=1227896391
	set SU[DV]=1227896390
	set ZU[DV]=0
	set AU[DV]=1227895125
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Mace_10.blp"
	set CU[DV]=0
	set V6=DV
	set DV=DV+1
	set RU[DV]=1227896393
	set SU[DV]=1227896392
	set ZU[DV]=0
	set AU[DV]=1227895126
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRunedBracers.blp"
	set CU[DV]=0
	set W6=DV
	set DV=DV+1
	set RU[DV]=1227896395
	set SU[DV]=1227896394
	set ZU[DV]=0
	set AU[DV]=1227895127
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
	set CU[DV]=0
	set A6=DV
	set DV=DV+1
	set RU[DV]=1227896397
	set SU[DV]=1227896396
	set ZU[DV]=0
	set AU[DV]=1227895128
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNTalisman.tga"
	set CU[DV]=0
	set DL=DV
	set DV=DV+1
	set RU[DV]=1227896902
	set SU[DV]=1227896903
	set ZU[DV]=0
	set AU[DV]=1227895129
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_10.blp"
	set CU[DV]=0
	set HL=DV
	set DV=DV+1
	set RU[DV]=1227896905
	set SU[DV]=1227896904
	set ZU[DV]=0
	set AU[DV]=1227895130
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNJapaneseSword.BLP"
	set CU[DV]=0
	set OL=DV
	set DV=DV+1
	set RU[DV]=1227896906
	set SU[DV]=1227896907
	set ZU[DV]=0
	set AU[DV]=1227895344
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
	set CU[DV]=0
	set RL=DV
	set DV=DV+1
	set RU[DV]=1227896909
	set SU[DV]=1227896908
	set ZU[DV]=0
	set AU[DV]=1227899704
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Hammer_10.blp"
	set CU[DV]=0
	set WL=DV
	set DV=DV+1
	set RU[DV]=1227896910
	set SU[DV]=1227896911
	set ZU[DV]=0
	set AU[DV]=1227895345
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Plate06.blp"
	set CU[DV]=22
	set ZL=DV
	set DV=DV+1
	set RU[DV]=1227896913
	set SU[DV]=1227896912
	set ZU[DV]=0
	set AU[DV]=1227895346
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStormHammer.blp"
	set CU[DV]=0
	set AL=DV
	set DV=DV+1
	set RU[DV]=1227896915
	set SU[DV]=1227896914
	set ZU[DV]=0
	set AU[DV]=1227895347
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
	set CU[DV]=$C
	set LL=DV
	set DV=DV+1
	set RU[DV]=1227901506
	set SU[DV]=1227901497
	set ZU[DV]=0
	set AU[DV]=1227901508
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
	set CU[DV]=$C
	set D1=DV
	set DV=DV+1
	set RU[DV]=1227900247
	set SU[DV]=1227900246
	set ZU[DV]=0
	set AU[DV]=1227900248
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_11.blp"
	set CU[DV]=0
	set E1=DV
	set DV=DV+1
	set RU[DV]=1227901507
	set SU[DV]=1227901505
	set ZU[DV]=0
	set AU[DV]=1227901509
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDiffusal2.blp"
	set CU[DV]=0
	set F1=DV
	set DV=DV+1
	set RU[DV]=1227896917
	set SU[DV]=1227896916
	set ZU[DV]=0
	set AU[DV]=1227895348
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
	set CU[DV]=60
	set H1=DV
	set DV=DV+1
	set RU[DV]=1227896919
	set SU[DV]=1227896918
	set ZU[DV]=0
	set AU[DV]=1227899727
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Helmet_13.blp"
	set CU[DV]=0
	set J1=DV
	set DV=DV+1
	set RU[DV]=1227896920
	set SU[DV]=1227896921
	set ZU[DV]=0
	set AU[DV]=1227895349
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHelmOfValor.blp"
	set CU[DV]=22
	set O1=DV
	set DV=DV+1
	set RU[DV]=1227897136
	set SU[DV]=1227896922
	set ZU[DV]=0
	set AU[DV]=1227895350
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStaffofpurification.blp"
	set CU[DV]=30
	set P1=DV
	set DV=DV+1
	set RU[DV]=1227897138
	set SU[DV]=1227897137
	set ZU[DV]=0
	set AU[DV]=1227895351
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPhilosophersStone.blp"
	set CU[DV]=0
	set Q1=DV
	set DV=DV+1
	set RU[DV]=1227897140
	set SU[DV]=1227897139
	set ZU[DV]=0
	set AU[DV]=1227895352
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSpellShieldAmulet.blp"
	set CU[DV]=45
	set R1=DV
	set DV=DV+1
	set RU[DV]=1227897142
	set SU[DV]=1227897141
	set ZU[DV]=0
	set AU[DV]=1227895353
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSpell_Holy_BlessingOfStrength.blp"
	set CU[DV]=0
	set T1=DV
	set DV=DV+1
	set RU[DV]=1227897144
	set SU[DV]=1227897143
	set ZU[DV]=0
	set AU[DV]=1227895361
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAbility_Gouge.blp"
	set CU[DV]=0
	set U1=DV
	set DV=DV+1
	set RU[DV]=1227897153
	set SU[DV]=1227897145
	set ZU[DV]=0
	set AU[DV]=1227895362
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_06.blp"
	set CU[DV]=0
	set V1=DV
	set DV=DV+1
	set RU[DV]=1227897154
	set SU[DV]=1227897155
	set ZU[DV]=0
	set AU[DV]=1227895363
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp"
	set CU[DV]=0
	set X1=DV
	set DV=DV+1
	set RU[DV]=1227900722
	set SU[DV]=1227900506
	set ZU[DV]=0
	set AU[DV]=1227900728
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=80
	set A1=DV
	set DV=DV+1
	set RU[DV]=1227900726
	set SU[DV]=1227900720
	set ZU[DV]=0
	set AU[DV]=1227900729
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=75
	set D0=DV
	set DV=DV+1
	set RU[DV]=1227897157
	set SU[DV]=1227900505
	set ZU[DV]=0
	set AU[DV]=1227900727
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=70
	set E0=DV
	set DV=DV+1
	set RU[DV]=1227900725
	set SU[DV]=1227900499
	set ZU[DV]=0
	set AU[DV]=1227895364
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=65
	set J0=DV
	set DV=DV+1
	set RU[DV]=1227900723
	set SU[DV]=1227897156
	set ZU[DV]=0
	set AU[DV]=1227900738
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=60
	set N0=DV
	set DV=DV+1
	set RU[DV]=1227900724
	set SU[DV]=1227900721
	set ZU[DV]=0
	set AU[DV]=1227900737
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=55
	set O0=DV
	set DV=DV+1
	set RU[DV]=1227903030
	set SU[DV]=1227903032
	set ZU[DV]=0
	set AU[DV]=1227903031
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRodOfNecromancy.blp"
	set CU[DV]=50
	set R0=DV
	set DV=DV+1
	set RU[DV]=1227899224
	set SU[DV]=1227899223
	set ZU[DV]=0
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNArcaniteArmor.blp"
	set CU[DV]=0
	set T0=DV
	set DV=DV+1
	set RU[DV]=1227897159
	set SU[DV]=1227897158
	set ZU[DV]=0
	set AU[DV]=1227895365
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
	set CU[DV]=35
	set X0=DV
	set DV=DV+1
	set RU[DV]=1227902294
	set SU[DV]=1227902293
	set ZU[DV]=0
	set AU[DV]=1227902295
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingAxe_02.blp"
	set CU[DV]=50
	set Y0=DV
	set DV=DV+1
	set RU[DV]=1227897161
	set SU[DV]=1227897160
	set ZU[DV]=0
	set AU[DV]=1227895366
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNLothars.BLP"
	set CU[DV]=22
	set B0=DV
	set DV=DV+1
	set RU[DV]=1227897163
	set SU[DV]=1227897165
	set ZU[DV]=0
	set AU[DV]=1227895111
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
	set CU[DV]=40
	set C0=DV
	set DV=DV+1
	set RU[DV]=1227897162
	set SU[DV]=1227897168
	set ZU[DV]=0
	set AU[DV]=1227895367
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
	set CU[DV]=36
	set F5=DV
	set DV=DV+1
	set RU[DV]=1227897169
	set SU[DV]=1227897166
	set ZU[DV]=0
	set AU[DV]=1227899971
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
	set CU[DV]=32
	set G5=DV
	set DV=DV+1
	set RU[DV]=1227897171
	set SU[DV]=1227897167
	set ZU[DV]=0
	set AU[DV]=1227899972
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
	set CU[DV]=28
	set J5=DV
	set DV=DV+1
	set RU[DV]=1227897170
	set SU[DV]=1227897164
	set ZU[DV]=0
	set AU[DV]=1227899955
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_06.blp"
	set CU[DV]=24
	set M5=DV
	set DV=DV+1
	set RU[DV]=1227897173
	set SU[DV]=1227897172
	set ZU[DV]=0
	set AU[DV]=1227895368
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNNecromancerAdept.blp"
	set CU[DV]=90
	set N5=DV
	set DV=DV+1
	set RU[DV]=1227897174
	set SU[DV]=1227897176
	set ZU[DV]=0
	set AU[DV]=1227895369
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBookOfTheDead.blp"
	set CU[DV]=90
	set R5=DV
	set DV=DV+1
	set RU[DV]=1227897175
	set SU[DV]=1227897177
	set ZU[DV]=0
	set AU[DV]=1227895370
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp"
	set CU[DV]=90
	set S5=DV
	set DV=DV+1
	set RU[DV]=1227899184
	set SU[DV]=1227897178
	set ZU[DV]=0
	set AU[DV]=1227899471
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
	set CU[DV]=0
	set T5=DV
	set DV=DV+1
	set RU[DV]=1227901003
	set SU[DV]=1227901002
	set ZU[DV]=0
	set AU[DV]=1227901004
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrb of Water.blp"
	set CU[DV]=0
	set W5=DV
	set DV=DV+1
	set RU[DV]=1227899186
	set SU[DV]=1227899185
	set ZU[DV]=0
	set AU[DV]=1227899472
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
	set CU[DV]=0
	set A5=DV
	set DV=DV+1
	set RU[DV]=1227902025
	set SU[DV]=1227902026
	set ZU[DV]=0
	set AU[DV]=1227902027
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_25.blp"
	set CU[DV]=0
	set B5=DV
	set DV=DV+1
	set RU[DV]=1227899188
	set SU[DV]=1227899187
	set ZU[DV]=0
	set AU[DV]=1227899473
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Crossbow_10.blp"
	set CU[DV]=0
	set C5=DV
	set DV=DV+1
	set RU[DV]=1227899190
	set SU[DV]=1227899189
	set ZU[DV]=0
	set AU[DV]=1227899474
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"
	set CU[DV]=0
	set L5=DV
	set DV=DV+1
	set RU[DV]=1227901752
	set SU[DV]=1227901751
	set ZU[DV]=0
	set AU[DV]=1227901753
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Weapon_Halberd_10.blp"
	set CU[DV]=0
	set E2=DV
	set DV=DV+1
	set RU[DV]=1227899191
	set SU[DV]=1227899192
	set ZU[DV]=0
	set AU[DV]=1227899475
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"
	set CU[DV]=0
	set F2=DV
	set DV=DV+1
	set RU[DV]=1227901777
	set SU[DV]=1227901776
	set ZU[DV]=0
	set AU[DV]=1227901778
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNTransmute.blp"
	set CU[DV]=0
	set H2=DV
	set DV=DV+1
	set RU[DV]=1227899201
	set SU[DV]=1227899193
	set ZU[DV]=0
	set AU[DV]=1227899476
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
	set CU[DV]=0
	set P2=DV
	set DV=DV+1
	set RU[DV]=1227899201
	set SU[DV]=1227901772
	set AU[DV]=1227901773
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfAszune.blp"
	set CU[DV]=0
	set R2=DV
	set DV=DV+1
	set RU[DV]=1227899203
	set SU[DV]=1227899202
	set ZU[DV]=0
	set AU[DV]=1227899477
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHornOfDoom.blp"
	set CU[DV]=35
	set S2=DV
	set DV=DV+1
	set RU[DV]=1227899204
	set SU[DV]=1227899205
	set ZU[DV]=0
	set AU[DV]=1227899478
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
	set CU[DV]=0
	set T2=DV
	set DV=DV+1
	set RU[DV]=1227899207
	set SU[DV]=1227899206
	set ZU[DV]=0
	set AU[DV]=1227899732
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNIceShard.blp"
	set CU[DV]=0
	set W2=DV
	set DV=DV+1
	set RU[DV]=1227899208
	set SU[DV]=1227899209
	set ZU[DV]=0
	set AU[DV]=1227899479
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_ThrowingKnife_04.blp"
	set CU[DV]=0
	set X2=DV
	set DV=DV+1
	set RU[DV]=1227899448
	set SU[DV]=1227899225
	set ZU[DV]=0
	set AU[DV]=1227894850
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FQ4=DV
	set DV=DV+1
	set RU[DV]=1227899211
	set SU[DV]=1227899210
	set ZU[DV]=0
	set AU[DV]=1227899480
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHeartOfSearinox.blp"
	set CU[DV]=$D2
	set Z2=DV
	set DV=DV+1
	set RU[DV]=1227896651
	set SU[DV]=1227899212
	set ZU[DV]=0
	set AU[DV]=1227899481
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Sword_09.blp"
	set CU[DV]=35
	set D44=DV
	set DV=DV+1
	set RU[DV]=1227899458
	set SU[DV]=1227899457
	set ZU[DV]=0
	set AU[DV]=1227899482
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
	set CU[DV]=0
	set D74=DV
	set DV=DV+1
	set RU[DV]=1227902021
	set SU[DV]=1227902019
	set ZU[DV]=0
	set AU[DV]=1227902020
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedUnholyArmor.blp"
	set CU[DV]=0
	set D84=DV
	set DV=DV+1
	set RU[DV]=1227899459
	set SU[DV]=1227899460
	set ZU[DV]=0
	set AU[DV]=1227894851
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNArcaneRing.blp"
	set CU[DV]=33
	set D94=DV
	set DV=DV+1
	set RU[DV]=1227899462
	set SU[DV]=1227899461
	set ZU[DV]=0
	set AU[DV]=1227899696
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNThunderMallet.blp"
	set CU[DV]=35
	set DD4=DV
	set DV=DV+1
	set RU[DV]=1227895092
	set SU[DV]=1227895108
	set ZU[DV]=0
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRavenForm.blp"
	set CU[DV]=0
	set DE4=DV
	set DV=DV+1
	set RU[DV]=1227899464
	set SU[DV]=1227899463
	set ZU[DV]=0
	set AU[DV]=1227899697
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNCloakOfFlames.blp"
	set CU[DV]=0
	set DF4=DV
	set DV=DV+1
	set RU[DV]=1227899465
	set SU[DV]=1227899466
	set ZU[DV]=0
	set AU[DV]=1227899698
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Chest_Chain_14.blp"
	set CU[DV]=0
	set DG4=DV
	set DV=DV+1
	set RU[DV]=1227899468
	set SU[DV]=1227899467
	set ZU[DV]=0
	set AU[DV]=1227899699
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Gem_Bloodstone_02.blp"
	set CU[DV]=0
	set DH4=DV
	set DV=DV+1
	set RU[DV]=1227899470
	set SU[DV]=1227899469
	set ZU[DV]=0
	set AU[DV]=1227899700
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHoodOfCunning.blp"
	set CU[DV]=0
	set DI4=DV
	set DV=DV+1
	set RU[DV]=1227894867
	set SU[DV]=1227894861
	set ZU[DV]=0
	set AU[DV]=1227895107
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
	set CU[DV]=0
	set DJ4=DV
	set DV=DV+1
	set RU[DV]=1227894868
	set SU[DV]=1227894865
	set ZU[DV]=0
	set AU[DV]=1227895109
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
	set CU[DV]=0
	set DK4=DV
	set DV=DV+1
	set RU[DV]=1227894870
	set SU[DV]=1227894862
	set ZU[DV]=0
	set AU[DV]=1227895110
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyStrength.blp"
	set CU[DV]=0
	set DM4=DV
	set DV=DV+1
	set RU[DV]=1227894871
	set SU[DV]=1227894866
	set ZU[DV]=0
	set AU[DV]=1227899973
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUnholyStrength.blp"
	set CU[DV]=0
	set DN4=DV
	set DV=DV+1
	set RU[DV]=1227894872
	set SU[DV]=1227894874
	set ZU[DV]=0
	set AU[DV]=1227899718
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
	set CU[DV]=30
	set DO4=DV
	set DV=DV+1
	set RU[DV]=1227894873
	set SU[DV]=1227895088
	set ZU[DV]=0
	set AU[DV]=1227899974
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAdvancedMoonArmor.blp"
	set CU[DV]=0
	set DP4=DV
	set DV=DV+1
	set RU[DV]=1227895091
	set SU[DV]=1227895090
	set ZU[DV]=0
	set AU[DV]=1227899714
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNStaffOfSilence.blp"
	set CU[DV]=18
	set DQ4=DV
	set DV=DV+1
	set RU[DV]=1227900747
	set SU[DV]=1227900746
	set ZU[DV]=0
	set AU[DV]=1227900748
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPhaseBoots.blp"
	set CU[DV]=8
	set DR4=DV
	set DV=DV+1
	set RU[DV]=1227900999
	set SU[DV]=1227901001
	set ZU[DV]=0
	set AU[DV]=1227901000
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNForceStaff.blp"
	set CU[DV]=25
	set DT4=DV
	set DV=DV+1
	set RU[DV]=1227901232
	set SU[DV]=1227901750
	set ZU[DV]=0
	set AU[DV]=1227901234
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPipeOfInsight.blp"
	set CU[DV]=25
	set DU4=DV
	set DV=DV+1
	set RU[DV]=1227901511
	set SU[DV]=1227901510
	set ZU[DV]=0
	set AU[DV]=1227901512
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
	set CU[DV]=$C
	set DV4=DV
	set DV=DV+1
	set RU[DV]=1227901764
	set SU[DV]=1227901766
	set ZU[DV]=0
	set AU[DV]=1227901765
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNImprovedUnholyArmor.blp"
	set CU[DV]=$C
	set DW4=DV
	set DV=DV+1
	set RU[DV]=1227901784
	set SU[DV]=1227901785
	set ZU[DV]=0
	set AU[DV]=1227901786
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
	set CU[DV]=8
	set DX4=DV
	set DV=DV+1
	set RU[DV]=1227902023
	set SU[DV]=1227902022
	set ZU[DV]=0
	set AU[DV]=1227902024
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUrnOfKelThuzad.blp"
	set CU[DV]=0
	set DY4=DV
	set DV=DV+1
	set RU[DV]=1227902032
	set SU[DV]=1227902028
	set ZU[DV]=0
	set AU[DV]=1227902033
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSoulRing.blp"
	set CU[DV]=25
	set E04=DV
	set DV=DV+1
	set RU[DV]=1227902034
	set SU[DV]=1227902036
	set ZU[DV]=0
	set AU[DV]=1227902035
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGhostBlade.blp"
	set CU[DV]=30
	set E54=DV
	set DV=DV+1
	set RU[DV]=1227902282
	set SU[DV]=1227902281
	set ZU[DV]=0
	set AU[DV]=1227902283
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNArcaneBoots.blp"
	set CU[DV]=45
	set F44=DV
	set DV=DV+1
	set RU[DV]=1227902513
	set SU[DV]=1227902512
	set ZU[DV]=0
	set AU[DV]=1227902514
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNMedalionOfCourage.blp"
	set CU[DV]=7
	set H3=DV
	set DV=DV+1
	set RU[DV]=1227902532
	set SU[DV]=1227902533
	set ZU[DV]=0
	set AU[DV]=1227902531
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
	set CU[DV]=30
	set RB=DV
	set DV=DV+1
	set RU[DV]=1227902540
	set SU[DV]=1227902539
	set ZU[DV]=0
	set AU[DV]=1227902541
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNJanggo.blp"
	set CU[DV]=0
	set VB=DV
	set DV=DV+1
	set RU[DV]=1227902770
	set SU[DV]=1227902771
	set ZU[DV]=0
	set AU[DV]=1227902772
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"
	set CU[DV]=30
	set M3=DV
	set DV=DV+1
	set RU[DV]=1227902787
	set SU[DV]=1227902789
	set ZU[DV]=0
	set AU[DV]=1227902788
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBoneChimes.blp"
	set CU[DV]=30
	set WB=DV
	set DV=DV+1
	set RU[DV]=1227902790
	set SU[DV]=1227902791
	set ZU[DV]=0
	set AU[DV]=1227902792
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"
	set CU[DV]=30
	set YB=DV
	set DV=DV+1
	set RU[DV]=1227902794
	set SU[DV]=1227902793
	set ZU[DV]=0
	set AU[DV]=1227902795
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNTranquilBoots.blp"
	set CU[DV]=30
	set LB=DV
	set DV=DV+1
	set RU[DV]=1227902797
	set SU[DV]=1227902796
	set ZU[DV]=0
	set AU[DV]=1227902798
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWitchDoctorMaster.blp"
	set CU[DV]=16
	set EC=DV
	set DV=DV+1
	set RU[DV]=1227902800
	set SU[DV]=1227902799
	set ZU[DV]=0
	set AU[DV]=1227902801
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNPendantOfMana.blp"
	set CU[DV]=20
	set FC=DV
	set DV=DV+1
	set RU[DV]=1227902805
	set SU[DV]=1227902806
	set ZU[DV]=0
	set AU[DV]=1227902807
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHalberd.blp"
	set CU[DV]=30
	set N3=DV
	set DV=DV+1
	set RU[DV]=1227902809
	set SU[DV]=1227902808
	set ZU[DV]=0
	set AU[DV]=1227902810
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAnnihilator.blp"
	set CU[DV]=60
	set R3=DV
	set DV=DV+1
	set RU[DV]=1227903024
	set SU[DV]=1227903025
	set ZU[DV]=0
	set AU[DV]=1227903026
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"
	set CU[DV]=0
	set GC=DV
	set DV=DV+1
	set RU[DV]=1227903027
	set SU[DV]=1227903028
	set ZU[DV]=0
	set AU[DV]=1227903029
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingJadeFalcon.blp"
	set CU[DV]=0
	set JC=DV
	set DV=DV+1
	set RU[DV]=1346522445
	set SU[DV]=1346522446
	set ZU[DV]=0
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
	set CU[DV]=0
	set XC=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989063
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747990582
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896140
	set SU[DV]=1227896146
	set ZU[DV]=1747989064
	set AU[DV]=1227899987
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set DA4=DV
	set DV=DV+1
	set RU[DV]=1227896141
	set SU[DV]=1227896147
	set ZU[DV]=1747989065
	set AU[DV]=1227899988
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set DB4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989066
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896143
	set SU[DV]=1227896148
	set ZU[DV]=1747989067
	set AU[DV]=1227899989
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set DC4=DV
	set DV=DV+1
	set ZU[DV]=1747988788
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D34=DV
	set DV=DV+1
	set RU[DV]=1227896144
	set SU[DV]=1227896149
	set ZU[DV]=1747989068
	set AU[DV]=1227899991
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D64=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989069
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896139
	set SU[DV]=1227896150
	set ZU[DV]=1747989070
	set AU[DV]=1227899992
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set DL4=DV
	set DV=DV+1
	set RU[DV]=1227896142
	set SU[DV]=1227896151
	set ZU[DV]=1747989071
	set AU[DV]=1227899993
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D04=DV
	set DV=DV+1
	set RU[DV]=1227896145
	set SU[DV]=1227896152
	set ZU[DV]=1747989072
	set AU[DV]=1227899994
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D54=DV
	set DV=DV+1
	set RU[DV]=1227896398
	set SU[DV]=1227896399
	set ZU[DV]=1747989073
	set AU[DV]=1227900208
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D24=DV
	set DV=DV+1
	set RU[DV]=1227896401
	set SU[DV]=1227896400
	set ZU[DV]=1747989074
	set AU[DV]=1227900209
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set D_4=DV
	set DV=DV+1
	set RU[DV]=1227896402
	set SU[DV]=1227896403
	set ZU[DV]=1747989075
	set AU[DV]=1227900210
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E44=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989076
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896407
	set SU[DV]=1227896406
	set ZU[DV]=1747989077
	set AU[DV]=1227900212
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E74=DV
	set DV=DV+1
	set RU[DV]=1227896408
	set SU[DV]=1227896409
	set ZU[DV]=1747989078
	set AU[DV]=1227900213
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E84=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989079
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896624
	set SU[DV]=1227896410
	set ZU[DV]=1747989080
	set AU[DV]=1227900214
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E94=DV
	set DV=DV+1
	set RU[DV]=1227896625
	set SU[DV]=1227896626
	set ZU[DV]=1747989081
	set AU[DV]=1227900215
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set ED4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989082
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896628
	set SU[DV]=1227896627
	set ZU[DV]=1747989296
	set AU[DV]=1227900216
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EE4=DV
	set DV=DV+1
	set ZU[DV]=1747989297
	set BU[DV]=""
	set CU[DV]=0
	set EF4=DV
	set DV=DV+1
	set RU[DV]=1227896630
	set SU[DV]=1227896662
	set ZU[DV]=1747989298
	set AU[DV]=1227900225
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EG4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989299
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896631
	set SU[DV]=1227896663
	set ZU[DV]=1747989300
	set AU[DV]=1227900226
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EH4=DV
	set DV=DV+1
	set RU[DV]=1227896632
	set SU[DV]=1227896664
	set ZU[DV]=1747989301
	set AU[DV]=1227900227
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EI4=DV
	set DV=DV+1
	set RU[DV]=1227896633
	set SU[DV]=1227896665
	set ZU[DV]=1747989302
	set AU[DV]=1227900228
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EJ4=DV
	set DV=DV+1
	set RU[DV]=1227896641
	set SU[DV]=1227896666
	set ZU[DV]=0
	set AU[DV]=1227900229
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EK4=DV
	set DV=DV+1
	set RU[DV]=1227896642
	set SU[DV]=1227896880
	set ZU[DV]=1747989304
	set AU[DV]=1227900230
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EM4=DV
	set DV=DV+1
	set RU[DV]=1227896643
	set SU[DV]=1227896881
	set ZU[DV]=1747989305
	set AU[DV]=1227900231
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EN4=DV
	set DV=DV+1
	set RU[DV]=1227896644
	set SU[DV]=1227896882
	set ZU[DV]=1747989313
	set AU[DV]=1227900232
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EO4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989315
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896645
	set SU[DV]=1227896883
	set ZU[DV]=1747989316
	set AU[DV]=1227900233
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EP4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989317
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896647
	set SU[DV]=1227896646
	set ZU[DV]=1747989318
	set AU[DV]=1227900234
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EQ4=DV
	set DV=DV+1
	set RU[DV]=1227896648
	set SU[DV]=1227896884
	set ZU[DV]=1747989319
	set AU[DV]=1227900235
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set ER4=DV
	set DV=DV+1
	set RU[DV]=1227896655
	set SU[DV]=1227896885
	set ZU[DV]=1747989320
	set AU[DV]=1227900236
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set ES4=DV
	set DV=DV+1
	set ZU[DV]=1747989322
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set ET4=DV
	set DV=DV+1
	set RU[DV]=1227896650
	set SU[DV]=1227896888
	set ZU[DV]=1747989324
	set AU[DV]=1227900239
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EU4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989325
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989326
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896653
	set SU[DV]=1227896889
	set ZU[DV]=1747989327
	set AU[DV]=1227900240
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EV4=DV
	set DV=DV+1
	set RU[DV]=1227896656
	set SU[DV]=1227896897
	set ZU[DV]=1747989329
	set AU[DV]=1227900241
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EW4=DV
	set DV=DV+1
	set RU[DV]=1227896657
	set SU[DV]=1227896898
	set ZU[DV]=1747989330
	set AU[DV]=1227900242
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EX4=DV
	set DV=DV+1
	set RU[DV]=1227896658
	set SU[DV]=1227896899
	set ZU[DV]=1747989331
	set AU[DV]=1227900243
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EY4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989332
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747989333
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227896659
	set SU[DV]=1227896900
	set ZU[DV]=1747989334
	set AU[DV]=1227900244
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EZ4=DV
	set DV=DV+1
	set RU[DV]=1227896660
	set SU[DV]=1227896901
	set ZU[DV]=1747989335
	set AU[DV]=1227900245
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EA4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747990329
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=1227900984
	set SU[DV]=1227900983
	set ZU[DV]=1747990355
	set AU[DV]=1227900985
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EB4=DV
	set DV=DV+1
	set RU[DV]=1227900996
	set SU[DV]=1227900998
	set ZU[DV]=1747990356
	set AU[DV]=1227900997
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EC4=DV
	set DV=DV+1
	set RU[DV]=1227903044
	set SU[DV]=1227903045
	set ZU[DV]=0
	set AU[DV]=1227903046
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set FG4=DV
	set DV=DV+1
	set RU[DV]=1227901016
	set SU[DV]=1227901018
	set ZU[DV]=1747990360
	set AU[DV]=1227901017
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E34=DV
	set DV=DV+1
	set RU[DV]=1227896652
	set SU[DV]=1227901774
	set ZU[DV]=1747989328
	set AU[DV]=1227901775
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E64=DV
	set DV=DV+1
	set RU[DV]=1227901783
	set SU[DV]=1227901782
	set ZU[DV]=1747993153
	set AU[DV]=1227901781
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set EL4=DV
	set DV=DV+1
	set RU[DV]=1227902029
	set SU[DV]=1227902030
	set ZU[DV]=1747993169
	set AU[DV]=1227902031
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set E14=DV
	set DV=DV+1
	set RU[DV]=1227902521
	set SU[DV]=1227902529
	set ZU[DV]=1747993649
	set AU[DV]=1227902530
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set F74=DV
	set DV=DV+1
	set RU[DV]=1227902536
	set SU[DV]=1227902537
	set ZU[DV]=1747993433
	set AU[DV]=1227902538
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set F84=DV
	set DV=DV+1
	set RU[DV]=1227902773
	set SU[DV]=1227902774
	set ZU[DV]=1747993668
	set AU[DV]=1227902775
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set F94=DV
	set DV=DV+1
	set RU[DV]=1227902786
	set SU[DV]=1227902785
	set ZU[DV]=1747989336
	set AU[DV]=1227902777
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSnazzyScroll.blp"
	set CU[DV]=0
	set FD4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747993684
	set BU[DV]=""
	set CU[DV]=0
	set FE4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747993685
	set BU[DV]=""
	set CU[DV]=0
	set FF4=DV
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747993913
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747993921
	set BU[DV]=""
	set CU[DV]=0
	set DV=DV+1
	set RU[DV]=0
	set SU[DV]=0
	set ZU[DV]=1747993923
	set BU[DV]=""
	set CU[DV]=0
	set t=CreateTrigger()
	call TriggerAddCondition(t,Condition(function IZ9))
	set H14=t
	set t=null
	set FP4=FP4+1
	set FI4[FP4]=YX
	set FJ4[FP4]=OZ
	set FO4[FP4]=W3
	set FP4=FP4+1
	set FI4[FP4]=AX
	set FJ4[FP4]=OW
	set FK4[FP4]=DA4
	set FO4[FP4]=Y3
	set FP4=FP4+1
	set FI4[FP4]=TV
	set FJ4[FP4]=OW
	set FK4[FP4]=DB4
	set FO4[FP4]=Z3
	set FP4=FP4+1
	set FI4[FP4]=ZX
	set FJ4[FP4]=UY
	set FO4[FP4]=B3
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=DC4
	set FO4[FP4]=E6
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=JV
	set FK4[FP4]=FV
	set FO4[FP4]=F6
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=NV
	set FK4[FP4]=FV
	set FO4[FP4]=G6
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=GY
	set FK4[FP4]=FV
	set FO4[FP4]=H6
	set FP4=FP4+1
	set FI4[FP4]=FV
	set FJ4[FP4]=D64
	set FO4[FP4]=N6
	set FP4=FP4+1
	set FI4[FP4]=WX
	set FJ4[FP4]=GY
	set FK4[FP4]=UY
	set FO4[FP4]=V6
	set FP4=FP4+1
	set FI4[FP4]=MV
	set FJ4[FP4]=CV
	set FK4[FP4]=DL4
	set FO4[FP4]=W6
	set FP4=FP4+1
	set FI4[FP4]=MV
	set FJ4[FP4]=SY
	set FK4[FP4]=D04
	set FO4[FP4]=A6
	set FP4=FP4+1
	set FI4[FP4]=MV
	set FJ4[FP4]=TW
	set FK4[FP4]=D54
	set FO4[FP4]=DL
	set FP4=FP4+1
	set FI4[FP4]=OV
	set FJ4[FP4]=JV
	set FK4[FP4]=D24
	set FO4[FP4]=HL
	set FP4=FP4+1
	set FI4[FP4]=GX
	set FJ4[FP4]=NV
	set FK4[FP4]=D_4
	set FO4[FP4]=OL
	set FP4=FP4+1
	set FI4[FP4]=RZ
	set FJ4[FP4]=NV
	set FK4[FP4]=E44
	set FO4[FP4]=RL
	set FP4=FP4+1
	set FI4[FP4]=SV
	set FJ4[FP4]=TV
	set FK4[FP4]=GY
	set FO4[FP4]=ZL
	set FP4=FP4+1
	set FI4[FP4]=YW
	set FJ4[FP4]=FV
	set FK4[FP4]=E74
	set FO4[FP4]=AL
	set FP4=FP4+1
	set FI4[FP4]=OV
	set FJ4[FP4]=OV
	set FK4[FP4]=GY
	set FM4[FP4]=E84
	set FO4[FP4]=LL
	set FP4=FP4+1
	set FI4[FP4]=LL
	set FJ4[FP4]=E84
	set FO4[FP4]=D1
	set FP4=FP4+1
	set FI4[FP4]=E1
	set FJ4[FP4]=E84
	set FO4[FP4]=D1
	set FP4=FP4+1
	set FI4[FP4]=HW
	set FJ4[FP4]=UW
	set FO4[FP4]=H1
	set FP4=FP4+1
	set FI4[FP4]=UW
	set FJ4[FP4]=E94
	set FO4[FP4]=O1
	set FP4=FP4+1
	set FI4[FP4]=OZ
	set FJ4[FP4]=ZY
	set FK4[FP4]=UY
	set FM4[FP4]=ED4
	set FO4[FP4]=P1
	set FP4=FP4+1
	set FI4[FP4]=SX
	set FJ4[FP4]=BV
	set FK4[FP4]=NZ
	set FO4[FP4]=Q1
	set FP4=FP4+1
	set FI4[FP4]=Y3
	set FJ4[FP4]=Z3
	set FK4[FP4]=EE4
	set FO4[FP4]=R1
	set FP4=FP4+1
	set FI4[FP4]=OL
	set FJ4[FP4]=HL
	set FO4[FP4]=T1
	set FP4=FP4+1
	set FI4[FP4]=YW
	set FJ4[FP4]=YW
	set FK4[FP4]=EG4
	set FO4[FP4]=U1
	set FP4=FP4+1
	set FI4[FP4]=W3
	set FJ4[FP4]=SV
	set FK4[FP4]=UV
	set FO4[FP4]=V1
	set FP4=FP4+1
	set FI4[FP4]=QV
	set FJ4[FP4]=SV
	set FK4[FP4]=EH4
	set FO4[FP4]=X1
	set FP4=FP4+1
	set FI4[FP4]=YW
	set FJ4[FP4]=GX
	set FK4[FP4]=EI4
	set FO4[FP4]=A1
	set FP4=FP4+1
	set FI4[FP4]=HL
	set FJ4[FP4]=HZ
	set FK4[FP4]=EJ4
	set FO4[FP4]=Y0
	set FP4=FP4+1
	set FI4[FP4]=UV
	set FJ4[FP4]=U3
	set FO4[FP4]=B0
	set FP4=FP4+1
	set FI4[FP4]=ZY
	set FJ4[FP4]=DL
	set FK4[FP4]=EM4
	set FO4[FP4]=C0
	set FP4=FP4+1
	set FI4[FP4]=C0
	set FJ4[FP4]=EM4
	set FO4[FP4]=F5
	set FP4=FP4+1
	set FI4[FP4]=F5
	set FJ4[FP4]=EM4
	set FO4[FP4]=G5
	set FP4=FP4+1
	set FI4[FP4]=G5
	set FJ4[FP4]=EM4
	set FO4[FP4]=J5
	set FP4=FP4+1
	set FI4[FP4]=J5
	set FJ4[FP4]=EM4
	set FO4[FP4]=M5
	set FP4=FP4+1
	set FI4[FP4]=ZY
	set FJ4[FP4]=NV
	set FK4[FP4]=EN4
	set FO4[FP4]=N5
	set FP4=FP4+1
	set FI4[FP4]=N5
	set FJ4[FP4]=EN4
	set FO4[FP4]=R5
	set FP4=FP4+1
	set FI4[FP4]=R5
	set FJ4[FP4]=EN4
	set FO4[FP4]=S5
	set FP4=FP4+1
	set FI4[FP4]=HZ
	set FJ4[FP4]=W3
	set FK4[FP4]=EO4
	set FO4[FP4]=T5
	set FP4=FP4+1
	set FI4[FP4]=XV
	set FJ4[FP4]=HY
	set FO4[FP4]=A5
	set FP4=FP4+1
	set FI4[FP4]=X1
	set FJ4[FP4]=XV
	set FK4[FP4]=EP4
	set FO4[FP4]=C5
	set FP4=FP4+1
	set FI4[FP4]=XV
	set FJ4[FP4]=RZ
	set FK4[FP4]=RZ
	set FO4[FP4]=L5
	set FP4=FP4+1
	set FI4[FP4]=HY
	set FJ4[FP4]=EQ4
	set FO4[FP4]=F2
	set FP4=FP4+1
	set FI4[FP4]=VW
	set FJ4[FP4]=NZ
	set FK4[FP4]=ER4
	set FO4[FP4]=P2
	set FP4=FP4+1
	set FI4[FP4]=VW
	set FJ4[FP4]=H1
	set FK4[FP4]=ES4
	set FO4[FP4]=S2
	set FP4=FP4+1
	set FI4[FP4]=VW
	set FJ4[FP4]=J1
	set FK4[FP4]=ES4
	set FO4[FP4]=S2
	set FP4=FP4+1
	set FI4[FP4]=HZ
	set FJ4[FP4]=HZ
	set FK4[FP4]=SX
	set FM4[FP4]=E24
	set FO4[FP4]=T2
	set FP4=FP4+1
	set FI4[FP4]=HZ
	set FJ4[FP4]=HZ
	set FK4[FP4]=SX
	set FM4[FP4]=E_4
	set FO4[FP4]=T2
	set FP4=FP4+1
	set FI4[FP4]=AV
	set FJ4[FP4]=WX
	set FK4[FP4]=GB
	set FO4[FP4]=X2
	set FP4=FP4+1
	set FI4[FP4]=UY
	set FJ4[FP4]=TV
	set FK4[FP4]=F84
	set FO4[FP4]=H3
	set FP4=FP4+1
	set FI4[FP4]=OV
	set FJ4[FP4]=GX
	set FK4[FP4]=SX
	set FM4[FP4]=ZY
	set FO4[FP4]=FQ4
	set FP4=FP4+1
	set FI4[FP4]=W3
	set FJ4[FP4]=V6
	set FK4[FP4]=EU4
	set FO4[FP4]=Z2
	set FP4=FP4+1
	set FI4[FP4]=HZ
	set FJ4[FP4]=ZW
	set FK4[FP4]=OZ
	set FO4[FP4]=D44
	set FP4=FP4+1
	set FI4[FP4]=NZ
	set FJ4[FP4]=YX
	set FK4[FP4]=DZ
	set FO4[FP4]=D74
	set FP4=FP4+1
	set FI4[FP4]=NZ
	set FJ4[FP4]=YX
	set FK4[FP4]=EZ
	set FO4[FP4]=D74
	set FP4=FP4+1
	set FI4[FP4]=BV
	set FJ4[FP4]=ZX
	set FK4[FP4]=EV4
	set FO4[FP4]=D94
	set FP4=FP4+1
	set FI4[FP4]=NW
	set FJ4[FP4]=AL
	set FK4[FP4]=E64
	set FO4[FP4]=DD4
	set FP4=FP4+1
	set FI4[FP4]=YC
	set FK4[FP4]=EW4
	set FO4[FP4]=DE4
	set FP4=FP4+1
	set FI4[FP4]=AX
	set FJ4[FP4]=B3
	set FK4[FP4]=UW
	set FM4[FP4]=EX4
	set FO4[FP4]=DF4
	set FP4=FP4+1
	set FI4[FP4]=AX
	set FJ4[FP4]=C3
	set FK4[FP4]=UW
	set FM4[FP4]=EX4
	set FO4[FP4]=DF4
	set FP4=FP4+1
	set FI4[FP4]=NW
	set FJ4[FP4]=RX
	set FK4[FP4]=TV
	set FM4[FP4]=EY4
	set FO4[FP4]=DG4
	set FP4=FP4+1
	set FI4[FP4]=Q1
	set FJ4[FP4]=W3
	set FO4[FP4]=DH4
	set FP4=FP4+1
	set FI4[FP4]=AX
	set FJ4[FP4]=AX
	set FK4[FP4]=YX
	set FM4[FP4]=NX
	set FO4[FP4]=DI4
	set FP4=FP4+1
	set FI4[FP4]=FV
	set FJ4[FP4]=HW
	set FK4[FP4]=QV
	set FM4[FP4]=EZ4
	set FO4[FP4]=DK4
	set FP4=FP4+1
	set FI4[FP4]=ZW
	set FJ4[FP4]=RX
	set FK4[FP4]=EA4
	set FO4[FP4]=DO4
	set FP4=FP4+1
	set FI4[FP4]=V6
	set FJ4[FP4]=V6
	set FK4[FP4]=FD4
	set FO4[FP4]=DQ4
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=QV
	set FK4[FP4]=QV
	set FO4[FP4]=DR4
	set FP4=FP4+1
	set FI4[FP4]=YA
	set FJ4[FP4]=OW
	set FK4[FP4]=OW
	set FM4[FP4]=OW
	set FN4[FP4]=EB4
	set FO4[FP4]=DS4
	set FP4=FP4+1
	set FI4[FP4]=ZY
	set FJ4[FP4]=AX
	set FK4[FP4]=EC4
	set FO4[FP4]=DT4
	set FP4=FP4+1
	set FI4[FP4]=DI4
	set FJ4[FP4]=Y3
	set FK4[FP4]=E34
	set FO4[FP4]=DU4
	set FP4=FP4+1
	set FI4[FP4]=DZ
	set FJ4[FP4]=SY
	set FK4[FP4]=SY
	set FO4[FP4]=DV4
	set FP4=FP4+1
	set FI4[FP4]=EZ
	set FJ4[FP4]=SY
	set FK4[FP4]=SY
	set FO4[FP4]=DV4
	set FP4=FP4+1
	set FI4[FP4]=UY
	set FJ4[FP4]=CV
	set FK4[FP4]=CV
	set FM4[FP4]=EL4
	set FO4[FP4]=DX4
	set FP4=FP4+1
	set FI4[FP4]=UY
	set FJ4[FP4]=AX
	set FK4[FP4]=E14
	set FO4[FP4]=E04
	set FP4=FP4+1
	set FI4[FP4]=AV
	set FJ4[FP4]=DZ4
	set FO4[FP4]=E54
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=BV
	set FO4[FP4]=F44
	set FP4=FP4+1
	set FI4[FP4]=GY
	set FJ4[FP4]=W6
	set FK4[FP4]=F74
	set FO4[FP4]=RB
	set FP4=FP4+1
	set FI4[FP4]=RB
	set FJ4[FP4]=F74
	set FO4[FP4]=RB
	set FP4=FP4+1
	set FI4[FP4]=VB
	set FJ4[FP4]=F74
	set FO4[FP4]=RB
	set FP4=FP4+1
	set FI4[FP4]=HW
	set FJ4[FP4]=GY
	set FK4[FP4]=F94
	set FO4[FP4]=M3
	set FP4=FP4+1
	set FI4[FP4]=EV
	set FJ4[FP4]=ZX
	set FK4[FP4]=AX
	set FO4[FP4]=YB
	set FP4=FP4+1
	set FI4[FP4]=ZY
	set FJ4[FP4]=ZY
	set FK4[FP4]=NZ
	set FO4[FP4]=EC
	set FP4=FP4+1
	set FI4[FP4]=OL
	set FJ4[FP4]=GB
	set FO4[FP4]=N3
	set FP4=FP4+1
	set FI4[FP4]=RL
	set FJ4[FP4]=HY
	set FO4[FP4]=R3
	set FP4=FP4+1
	set FI4[FP4]=A6
	set FJ4[FP4]=B3
	set FO4[FP4]=GC
	set FP4=FP4+1
	set FI4[FP4]=A6
	set FJ4[FP4]=C3
	set FO4[FP4]=JC
	set DV=DV+1
	set RU[DV]=1227899226
	set SU[DV]=1227895089
	set ZU[DV]=0
	set AU[DV]=1227900249
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FR4=DV
	set DV=DV+1
	set RU[DV]=1227894854
	set SU[DV]=1227894852
	set ZU[DV]=0
	set AU[DV]=1227900250
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FS4=DV
	set DV=DV+1
	set RU[DV]=1227895096
	set SU[DV]=1227894841
	set ZU[DV]=0
	set AU[DV]=1227900464
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FT4=DV
	set DV=DV+1
	set RU[DV]=1227895097
	set SU[DV]=1227894837
	set ZU[DV]=0
	set AU[DV]=1227900470
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FU4=DV
	set DV=DV+1
	set RU[DV]=1227895105
	set SU[DV]=1227894855
	set ZU[DV]=0
	set AU[DV]=1227900465
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FV4=DV
	set DV=DV+1
	set RU[DV]=1227895106
	set SU[DV]=1227894836
	set ZU[DV]=0
	set AU[DV]=1227900466
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FW4=DV
	set DV=DV+1
	set RU[DV]=1227895112
	set SU[DV]=1227894835
	set ZU[DV]=0
	set AU[DV]=1227900467
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FX4=DV
	set DV=DV+1
	set RU[DV]=1227895113
	set SU[DV]=1227894834
	set ZU[DV]=0
	set AU[DV]=1227900469
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FY4=DV
	set DV=DV+1
	set RU[DV]=1227895371
	set SU[DV]=1227894833
	set ZU[DV]=0
	set AU[DV]=1227900468
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FZ4=DV
	set DV=DV+1
	set RU[DV]=1227895372
	set SU[DV]=1227894857
	set ZU[DV]=0
	set AU[DV]=1227900485
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FA4=DV
	set DV=DV+1
	set RU[DV]=1227899442
	set SU[DV]=1227894856
	set ZU[DV]=0
	set AU[DV]=1227900473
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FC4=DV
	set DV=DV+1
	set RU[DV]=1227899443
	set SU[DV]=1227894864
	set ZU[DV]=0
	set AU[DV]=1227900481
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F34=DV
	set DV=DV+1
	set RU[DV]=1227899444
	set SU[DV]=1227894869
	set ZU[DV]=0
	set AU[DV]=1227900471
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F64=DV
	set DV=DV+1
	set RU[DV]=1227899447
	set SU[DV]=1227894832
	set ZU[DV]=0
	set AU[DV]=1227900484
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FL4=DV
	set DV=DV+1
	set RU[DV]=1227899446
	set SU[DV]=1227895094
	set ZU[DV]=0
	set AU[DV]=1227900483
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F14=DV
	set DV=DV+1
	set RU[DV]=1227899445
	set SU[DV]=1227895095
	set ZU[DV]=0
	set AU[DV]=1227900482
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F04=DV
	set DV=DV+1
	set RU[DV]=1227899449
	set SU[DV]=1227894863
	set ZU[DV]=0
	set AU[DV]=1227900472
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F54=DV
	set DV=DV+1
	set RU[DV]=1227901493
	set SU[DV]=1227901268
	set ZU[DV]=0
	set AU[DV]=1227901258
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F24=DV
	set DV=DV+1
	set RU[DV]=1227901270
	set SU[DV]=1227901269
	set ZU[DV]=0
	set AU[DV]=1227901241
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set F_4=DV
	set DV=DV+1
	set RU[DV]=1227901271
	set SU[DV]=1227901267
	set ZU[DV]=0
	set AU[DV]=1227901257
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G44=DV
	set DV=DV+1
	set RU[DV]=1227901272
	set SU[DV]=1227901266
	set ZU[DV]=0
	set AU[DV]=1227901249
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G74=DV
	set DV=DV+1
	set RU[DV]=1227901273
	set SU[DV]=1227901265
	set ZU[DV]=0
	set AU[DV]=1227901256
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G84=DV
	set DV=DV+1
	set RU[DV]=1227901274
	set SU[DV]=1227901259
	set ZU[DV]=0
	set AU[DV]=1227901255
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G94=DV
	set DV=DV+1
	set RU[DV]=1227901488
	set SU[DV]=1227901260
	set ZU[DV]=0
	set AU[DV]=1227901254
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GD4=DV
	set DV=DV+1
	set RU[DV]=1227901489
	set SU[DV]=1227901261
	set ZU[DV]=0
	set AU[DV]=1227901253
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GE4=DV
	set DV=DV+1
	set RU[DV]=1227901490
	set SU[DV]=1227901264
	set ZU[DV]=0
	set AU[DV]=1227901252
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GG4=DV
	set DV=DV+1
	set RU[DV]=1227901491
	set SU[DV]=1227901263
	set ZU[DV]=0
	set AU[DV]=1227901251
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GH4=DV
	set DV=DV+1
	set RU[DV]=1227901492
	set SU[DV]=1227901262
	set ZU[DV]=0
	set AU[DV]=1227901250
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GI4=DV
	set DV=DV+1
	set RU[DV]=1227901238
	set SU[DV]=1227901239
	set ZU[DV]=0
	set AU[DV]=1227901240
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GJ4=DV
	set DV=DV+1
	set RU[DV]=1227901530
	set SU[DV]=1227901523
	set ZU[DV]=0
	set AU[DV]=1227901522
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GK4=DV
	set DV=DV+1
	set RU[DV]=1227901744
	set SU[DV]=1227901524
	set ZU[DV]=0
	set AU[DV]=1227901516
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GM4=DV
	set DV=DV+1
	set RU[DV]=1227901745
	set SU[DV]=1227901525
	set ZU[DV]=0
	set AU[DV]=1227901517
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GN4=DV
	set DV=DV+1
	set RU[DV]=1227901746
	set SU[DV]=1227901527
	set ZU[DV]=0
	set AU[DV]=1227901518
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GO4=DV
	set DV=DV+1
	set RU[DV]=1227901747
	set SU[DV]=1227901526
	set ZU[DV]=0
	set AU[DV]=1227901521
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GP4=DV
	set DV=DV+1
	set RU[DV]=1227901748
	set SU[DV]=1227901529
	set ZU[DV]=0
	set AU[DV]=1227901520
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GQ4=DV
	set DV=DV+1
	set RU[DV]=1227901749
	set SU[DV]=1227901528
	set ZU[DV]=0
	set AU[DV]=1227901519
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GR4=DV
	set DV=DV+1
	set RU[DV]=1227901769
	set SU[DV]=1227901768
	set ZU[DV]=0
	set AU[DV]=1227901770
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GS4=DV
	set DV=DV+1
	set RU[DV]=1227902004
	set SU[DV]=1227902005
	set ZU[DV]=0
	set AU[DV]=1227902008
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set FB4=DV
	set DV=DV+1
	set RU[DV]=1227902003
	set SU[DV]=1227902000
	set ZU[DV]=0
	set AU[DV]=1227902009
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GT4=DV
	set DV=DV+1
	set RU[DV]=1227902002
	set SU[DV]=1227902007
	set ZU[DV]=0
	set AU[DV]=1227902017
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GU4=DV
	set DV=DV+1
	set RU[DV]=1227902037
	set SU[DV]=1227902038
	set ZU[DV]=0
	set AU[DV]=1227902039
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GV4=DV
	set DV=DV+1
	set RU[DV]=1227902257
	set SU[DV]=1227902256
	set ZU[DV]=0
	set AU[DV]=1227902258
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GX4=DV
	set DV=DV+1
	set RU[DV]=1227902261
	set SU[DV]=1227902260
	set ZU[DV]=0
	set AU[DV]=1227902259
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GY4=DV
	set DV=DV+1
	set RU[DV]=1227902262
	set SU[DV]=1227902263
	set ZU[DV]=0
	set AU[DV]=1227902264
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GZ4=DV
	set DV=DV+1
	set RU[DV]=1227902278
	set SU[DV]=1227902279
	set ZU[DV]=0
	set AU[DV]=1227902280
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GA4=DV
	set DV=DV+1
	set RU[DV]=1227902285
	set SU[DV]=1227902284
	set ZU[DV]=0
	set AU[DV]=1227902286
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GB4=DV
	set DV=DV+1
	set RU[DV]=1227902287
	set SU[DV]=1227902288
	set ZU[DV]=0
	set AU[DV]=1227902289
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G34=DV
	set DV=DV+1
	set RU[DV]=1227902545
	set SU[DV]=1227902546
	set ZU[DV]=0
	set AU[DV]=1227902547
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G64=DV
	set DV=DV+1
	set RU[DV]=1227902548
	set SU[DV]=1227902549
	set ZU[DV]=0
	set AU[DV]=1227902550
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set GL4=DV
	set DV=DV+1
	set RU[DV]=1227902551
	set SU[DV]=1227902552
	set ZU[DV]=0
	set AU[DV]=1227902553
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G14=DV
	set DV=DV+1
	set RU[DV]=1227902554
	set SU[DV]=1227902768
	set ZU[DV]=0
	set AU[DV]=1227902769
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G04=DV
	set DV=DV+1
	set RU[DV]=1227902802
	set SU[DV]=1227902803
	set ZU[DV]=0
	set AU[DV]=1227902804
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=60
	set G54=DV
	set DV=DV+1
	set RU[DV]=1227895617
	set SU[DV]=1227896113
	set ZU[DV]=1747990603
	set AU[DV]=1227899961
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSteelArmor.blp"
	set CU[DV]=0
	set LU[DV]=DZ
	set DV=DV+1
	set RU[DV]=1227895641
	set SU[DV]=1227896114
	set ZU[DV]=1747990616
	set AU[DV]=1227899705
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbofSlowness.blp"
	set CU[DV]=0
	set LU[DV]=HZ
	set DV=DV+1
	set RU[DV]=1227895379
	set SU[DV]=1227895376
	set ZU[DV]=1747990611
	set AU[DV]=1227899713
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
	set CU[DV]=0
	set LU[DV]=FV
	set DV=DV+1
	set RU[DV]=1227895374
	set SU[DV]=1227895378
	set ZU[DV]=1747990608
	set AU[DV]=1227899731
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBoots.blp"
	set CU[DV]=0
	set LU[DV]=JV
	set DV=DV+1
	set RU[DV]=1227895386
	set SU[DV]=1227895859
	set ZU[DV]=1747990609
	set AU[DV]=1227899734
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNBelt.blp"
	set CU[DV]=0
	set LU[DV]=NV
	set DV=DV+1
	set RU[DV]=1227895601
	set SU[DV]=1227895861
	set ZU[DV]=1747990612
	set AU[DV]=1227899957
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNClawsOfAttack.blp"
	set CU[DV]=0
	set LU[DV]=QV
	set DV=DV+1
	set RU[DV]=1227895618
	set SU[DV]=1227895877
	set ZU[DV]=1747990606
	set AU[DV]=1227899969
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNHelmutPurple.blp"
	set CU[DV]=0
	set LU[DV]=HW
	set DV=DV+1
	set RU[DV]=1227895621
	set SU[DV]=1227895880
	set ZU[DV]=1747990615
	set AU[DV]=1227899703
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNDaggerOfEscape.blp"
	set CU[DV]=$E
	set LU[DV]=QW
	set DV=DV+1
	set RU[DV]=1227895623
	set SU[DV]=1227895883
	set ZU[DV]=1747990607
	set AU[DV]=1227899716
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNUndeadShrine.blp"
	set CU[DV]=0
	set LU[DV]=UW
	set DV=DV+1
	set RU[DV]=1227895632
	set SU[DV]=1227895891
	set ZU[DV]=1747990613
	set AU[DV]=1227899737
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAlleriaFlute.blp"
	set CU[DV]=0
	set LU[DV]=WX
	set DV=DV+1
	set RU[DV]=1227895633
	set SU[DV]=1227895892
	set ZU[DV]=1747990599
	set AU[DV]=1227899977
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGoldRing.blp"
	set CU[DV]=0
	set LU[DV]=YX
	set DV=DV+1
	set RU[DV]=1227895635
	set SU[DV]=1227895894
	set ZU[DV]=1747990604
	set AU[DV]=1227899978
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRingSkull.blp"
	set CU[DV]=0
	set LU[DV]=AX
	set DV=DV+1
	set RU[DV]=1227895636
	set SU[DV]=1227895895
	set ZU[DV]=1747990610
	set AU[DV]=1227899728
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNRobeOfTheMagi.blp"
	set CU[DV]=0
	set LU[DV]=GY
	set DV=DV+1
	set RU[DV]=1227895638
	set SU[DV]=1227895897
	set ZU[DV]=1747990597
	set AU[DV]=1227899701
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSlippersOfAgility.blp"
	set CU[DV]=0
	set LU[DV]=SY
	set DV=DV+1
	set RU[DV]=1227895639
	set SU[DV]=1227895898
	set ZU[DV]=1747990602
	set AU[DV]=1227899979
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNSobiMask.blp"
	set CU[DV]=0
	set LU[DV]=UY
	set DV=DV+1
	set RU[DV]=1227900740
	set SU[DV]=1227900739
	set ZU[DV]=1747990601
	set AU[DV]=1227900741
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNWand.blp"
	set CU[DV]=0
	set LU[DV]=YA
	set DV=DV+1
	set RU[DV]=1227901012
	set SU[DV]=1227901010
	set ZU[DV]=1747990598
	set AU[DV]=1227901015
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrcMeleeUpTwo.blp"
	set CU[DV]=0
	set LU[DV]=ZA
	set DV=DV+1
	set RU[DV]=1227901495
	set SU[DV]=1227901494
	set ZU[DV]=1747990614
	set AU[DV]=1227901496
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNAmulet.blp"
	set CU[DV]=0
	set LU[DV]=GB
	set DV=DV+1
	set RU[DV]=1227895628
	set SU[DV]=1227895888
	set ZU[DV]=1747990605
	set AU[DV]=1227899717
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
	set CU[DV]=0
	set LU[DV]=NX
	set DV=DV+1
	set RU[DV]=1227896129
	set SU[DV]=1227896137
	set ZU[DV]=1747990600
	set AU[DV]=0
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNScrollUber.blp"
	set CU[DV]=0
	set LU[DV]=WC
	set DV=DV+1
	set RU[DV]=1227895607
	set SU[DV]=1227895874
	set ZU[DV]=1747990835
	set AU[DV]=1227899730
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNEnchantedGemstone.blp"
	set CU[DV]=0
	set LU[DV]=BV
	set DV=DV+1
	set RU[DV]=1227895377
	set SU[DV]=1227895375
	set ZU[DV]=1747993167
	set AU[DV]=1227894849
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Misc_Cape_08.blp"
	set CU[DV]=0
	set LU[DV]=EV
	set DV=DV+1
	set RU[DV]=1227902273
	set SU[DV]=1227902265
	set ZU[DV]=1747993422
	set AU[DV]=1227902274
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNOrbOfVenom.blp"
	set CU[DV]=0
	set LU[DV]=E24
	set DV=DV+1
	set RU[DV]=1227895603
	set SU[DV]=1227895863
	set ZU[DV]=1747993648
	set AU[DV]=1227899959
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNGlove.blp"
	set CU[DV]=0
	set LU[DV]=TV
	set DV=DV+1
	set RU[DV]=1228222513
	set SU[DV]=1228222512
	set ZU[DV]=0
	set AU[DV]=1228222514
	set BU[DV]="ReplaceableTextures\\CommandButtons\\BTNINV_Wand_05.blp"
	set CU[DV]=0
	set GW4=DV
	call E5()
	set CU4=InitHashtable()
	call FUH()
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
	call TriggerAddCondition(t,Condition(function LGF))
	set H84=t
	set t=null
	call FVH()
	call FWH()
	call G9G()
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(t,Condition(function IL9))
	set BH=t
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,1.,true)
	call TriggerAddCondition(t,Condition(function I39))
	if MC4 then
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	call TriggerAddCondition(t,Condition(function LSF))
	endif
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function UVF))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(t,Condition(function LVF))
	set cH=t
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddAction(t,function GC9)
	call TriggerAddCondition(t,Condition(function GY9))
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,1.,true)
	call TriggerAddCondition(t,Condition(function GL9))
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SUMMON)
	call TriggerAddAction(t,function LR8)
	call TriggerAddCondition(t,Condition(function LM8))
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.33,true)
	call TriggerAddCondition(t,Condition(function D99))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.75,true)
	call TriggerAddCondition(t,Condition(function DG9))
	set t=null
	call SetPlayerAbilityAvailable(Y7[1],1093744436,false)
	call SetPlayerAbilityAvailable(Y7[2],1093744436,false)
	call SetPlayerAbilityAvailable(Y7[3],1093744436,false)
	call SetPlayerAbilityAvailable(Y7[4],1093744436,false)
	call SetPlayerAbilityAvailable(Y7[5],1093744436,false)
	call SetPlayerAbilityAvailable(Z7[1],1093744436,false)
	call SetPlayerAbilityAvailable(Z7[2],1093744436,false)
	call SetPlayerAbilityAvailable(Z7[3],1093744436,false)
	call SetPlayerAbilityAvailable(Z7[4],1093744436,false)
	call SetPlayerAbilityAvailable(Z7[5],1093744436,false)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function DI9))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t,Condition(function LXF))
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(t,Condition(function LWF))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
	call TriggerAddCondition(t,Condition(function LZF))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t,Condition(function LCF))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.5,true)
	call TriggerAddCondition(t,Condition(function L_F))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_CAST)
	call TriggerAddAction(t,function EOG)
	call SetAltMinimapIcon("war3mapImported\\black.blp")
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function H_G))
	call SetPlayerAbilityAvailable(Y7[1],1093752406,false)
	call SetPlayerAbilityAvailable(Y7[2],1093752406,false)
	call SetPlayerAbilityAvailable(Y7[3],1093752406,false)
	call SetPlayerAbilityAvailable(Y7[4],1093752406,false)
	call SetPlayerAbilityAvailable(Y7[5],1093752406,false)
	call SetPlayerAbilityAvailable(Z7[1],1093752406,false)
	call SetPlayerAbilityAvailable(Z7[2],1093752406,false)
	call SetPlayerAbilityAvailable(Z7[3],1093752406,false)
	call SetPlayerAbilityAvailable(Z7[4],1093752406,false)
	call SetPlayerAbilityAvailable(Z7[5],1093752406,false)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_USE_ITEM)
	call TriggerAddCondition(t,Condition(function I4G))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddAction(t,function ES9)
	call TriggerAddCondition(t,Condition(function ER9))
	call FBH()
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,FJ,300,Condition(function WE7))
	call TriggerRegisterUnitInRange(t,lJ,300,Condition(function WE7))
	call TriggerRegisterUnitInRange(t,DJ,300,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function ET9))
	set t=null
	set FS=CreateTrigger()
	call TriggerAddAction(FS,function EU9)
	set GS=CreateTrigger()
	call TriggerAddAction(GS,function EV9)
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,Xr)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,Uo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,bE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EW9))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,zo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,jo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,XE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EX9))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,Er)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,to)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,BE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EY9))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,er)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,lo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,OE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EZ9))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,Qo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,ar)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,AE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EA9))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,wo)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,go)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	set PUD=CreateRegion()
	call RegionAddRect(PUD,IE)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EB9))
	set t=null
	set PUD=null
	set HS=CreateTrigger()
	call TriggerAddAction(HS,function F79)
	set cA=CreateTrigger()
	call TriggerRegisterUnitEvent(cA,JU4,EVENT_UNIT_DEATH)
	call TriggerAddAction(cA,function F99)
	set CA=CreateTrigger()
	call TriggerRegisterUnitEvent(CA,JV4,EVENT_UNIT_DEATH)
	call TriggerAddAction(CA,function FD9)
	set dA=CreateTrigger()
	call TriggerRegisterUnitEvent(dA,JW4,EVENT_UNIT_DEATH)
	call TriggerAddAction(dA,function FE9)
	set DA=CreateTrigger()
	call TriggerRegisterUnitEvent(DA,JR4,EVENT_UNIT_DEATH)
	call TriggerAddAction(DA,function FF9)
	set fA=CreateTrigger()
	call TriggerRegisterUnitEvent(fA,JS4,EVENT_UNIT_DEATH)
	call TriggerAddAction(fA,function FG9)
	set FA=CreateTrigger()
	call TriggerRegisterUnitEvent(FA,JT4,EVENT_UNIT_DEATH)
	call TriggerAddAction(FA,function FH9)
	set gA=CreateTrigger()
	call TriggerRegisterUnitEvent(gA,KF4,EVENT_UNIT_DEATH)
	call TriggerAddAction(gA,function FI9)
	set GA=CreateTrigger()
	call TriggerRegisterUnitEvent(GA,KG4,EVENT_UNIT_DEATH)
	call TriggerAddAction(GA,function FJ9)
	set LA=CreateTrigger()
	call TriggerRegisterUnitEvent(LA,KH4,EVENT_UNIT_DEATH)
	call TriggerAddAction(LA,function FK9)
	set mA=CreateTrigger()
	call TriggerRegisterUnitEvent(mA,K94,EVENT_UNIT_DEATH)
	call TriggerAddAction(mA,function FM9)
	set MA=CreateTrigger()
	call TriggerRegisterUnitEvent(MA,KD4,EVENT_UNIT_DEATH)
	call TriggerAddAction(MA,function FN9)
	set PA=CreateTrigger()
	call TriggerRegisterUnitEvent(PA,KE4,EVENT_UNIT_DEATH)
	call TriggerAddAction(PA,function FO9)
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JE4,EVENT_UNIT_DAMAGED)
	call TriggerAddCondition(t,Condition(function FP9))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JC4,EVENT_UNIT_DAMAGED)
	call TriggerAddCondition(t,Condition(function FR9))
	set t=null
	set SA=CreateTrigger()
	call BT7(SA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(SA,Condition(function FS9))
	call TriggerAddAction(SA,function FT9)
	set TA=CreateTrigger()
	call BT7(TA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(TA,Condition(function FU9))
	call TriggerAddAction(TA,function FV9)
	set JS=CreateTrigger()
	call TriggerAddAction(JS,function FW9)
	set wA=CreateTrigger()
	call TriggerRegisterTimerEventSingle(wA,75.)
	call TriggerAddAction(wA,function FX9)
	set KS=CreateTrigger()
	call TriggerAddCondition(KS,Condition(function GW9))
	set MS=CreateTrigger()
	call TriggerAddAction(MS,function GX9)
	set vA=CreateTrigger()
	call TriggerAddAction(vA,function T_8)
	set eA=CreateTrigger()
	call BT7(eA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(eA,Condition(function U78))
	call TriggerAddAction(eA,function U88)
	set xA=CreateTrigger()
	call BT7(xA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(xA,Condition(function U98))
	call TriggerAddAction(xA,function UD8)
	set ES=CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(ES,1.)
	call TriggerAddAction(ES,function UI8)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SELECTED)
	call TriggerAddCondition(t,Condition(function UN9))
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DESELECTED)
	call TriggerAddCondition(t,Condition(function UK9))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JI4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JI4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function V98))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JJ4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JJ4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VD8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JK4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JK4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VE8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JM4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JM4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VF8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JN4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JN4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VG8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JO4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JO4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VH8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JP4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JP4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VI8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JQ4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JQ4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VJ8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JR4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JR4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VK8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JS4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JS4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VM8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JT4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JT4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VN8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JU4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JU4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VO8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JV4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JV4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VP8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,JW4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,JW4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function VQ8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,J14,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,J14,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function UA8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,J04,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,J04,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function UB8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,J54,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,J54,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function UC8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,J24,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,J24,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U38))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,J_4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,J_4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U68))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,K44,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,K44,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function UL8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,K74,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,K74,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U18))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,K84,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,K84,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U08))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,K94,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,K94,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U58))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,KD4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,KD4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U28))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,KE4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,KE4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function U_8))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,KF4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,KF4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function V48))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,KG4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,KG4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function V78))
	set t=CreateTrigger()
	call TriggerRegisterUnitEvent(t,KH4,EVENT_UNIT_DAMAGED)
	call TriggerRegisterUnitEvent(t,KH4,EVENT_UNIT_DEATH)
	call TriggerAddCondition(t,Condition(function V88))
	set VA=CreateTrigger()
	call TriggerRegisterTimerEvent(VA,1.,true)
	call TriggerAddCondition(VA,Condition(function UX8))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,5.,true)
	call TriggerAddCondition(t,Condition(function VZ8))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,4.,true)
	call TriggerAddCondition(t,Condition(function V68))
	set t=null
	set KU=ZI7()
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,bj_mapInitialPlayableArea)
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function V_8))
	set t=null
	set PUD=null
	set t=CreateTrigger()
	call TriggerAddCondition(t,Condition(function W48))
	call TriggerRegisterTimerEvent(t,5.,true)
	set t=null
	call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_VISIBLE,-4550,$4E2,300,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,-4550,$4E2,300,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_VISIBLE,$C80,1,300,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,$C80,1,300,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,-7292,4186,450,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Y7[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
	call DestroyFogModifier(CreateFogModifierRadius(Z7[0],FOG_OF_WAR_VISIBLE,7348,-4334,450,true,true))
	call DestroyFogModifier(CreateFogModifierRect(Y7[0],FOG_OF_WAR_VISIBLE,IV4,true,true))
	call DestroyFogModifier(CreateFogModifierRect(Z7[0],FOG_OF_WAR_VISIBLE,IV4,true,true))
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function IKG))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,3.5,true)
	call TriggerAddCondition(t,Condition(function BH8))
	set t=null
	set OD4=CreateTrigger()
	call TriggerRegisterUnitEvent(OD4,JC4,EVENT_UNIT_DEATH)
	call TriggerAddAction(OD4,function BaseDeathEvent)
	set OE4=CreateTrigger()
	call TriggerRegisterUnitEvent(OE4,JE4,EVENT_UNIT_DEATH)
	call TriggerAddAction(OE4,function BaseDeathEvent)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_ATTACKED)
	call TriggerAddCondition(t,Condition(function C28))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function L78))
	set t=null
	set OG4=CreateTrigger()
	call TriggerAddAction(OG4,function LE8)
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,A7,EVENT_PLAYER_UNIT_ATTACKED,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function LG8))
	set t=null
	set ow=CreateRegion()
	call RegionAddRect(ow,QD)
	call RegionAddRect(ow,di)
	call RegionAddRect(ow,fi)
	call RegionAddRect(ow,Fi)
	call RegionAddRect(ow,Gi)
	call RegionAddRect(ow,Ji)
	call RegionAddRect(ow,li)
	call RegionAddRect(ow,Li)
	call RegionAddRect(ow,pi)
	set T84=CreateRegion()
	call RegionAddRect(T84,MN)
	call RegionAddRect(T84,TN)
	set EA=CreateTrigger()
	call TriggerRegisterEnterRectSimple(EA,bj_mapInitialPlayableArea)
	call TriggerAddCondition(EA,Condition(function DJ9))
	call TriggerAddAction(EA,function DK9)
	set OA=CreateTrigger()
	call BT7(OA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(OA,Condition(function DM9))
	call TriggerAddAction(OA,function DN9)
	set RA=CreateTrigger()
	call BT7(RA,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddCondition(RA,Condition(function DO9))
	call TriggerAddAction(RA,function DP9)
	if(bj_isSinglePlayer and DQ9())then
	    //如果是单机模式而且只有一个人
	    call EM9()
	endif
	set t=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(t,Le,"-wtf",true)
	call TriggerAddAction(t,function EO9)
	call TriggerAddCondition(t,Condition(function EN9))
	set t=CreateTrigger()
	call TriggerRegisterPlayerUnitEvent(t,Y7[1],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Y7[2],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Y7[3],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Y7[4],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Y7[5],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[1],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[2],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[3],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[4],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerRegisterPlayerUnitEvent(t,Z7[5],EVENT_PLAYER_HERO_LEVEL,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function EP9))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(t,Le,"-test",true)
	call TriggerAddCondition(t,Condition(function EQ9))
	set t=null

	//===========================================================================
	// Separator
	//===========================================================================

	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,GetWorldBounds())
	call TriggerRegisterEnterRegion(t,PUD,null)
	call TriggerAddCondition(t,Condition(function JV9))
	call TriggerAddAction(t,function AAE)
	set t=null
	set PUD=null
	call HOF(JG4,$E,0)
	call HOF(JJ4,$C,0)
	call HOF(JF4,34,1)
	call HOF(JI4,33,1)
	call HOF(JH4,55,2)
	call HOF(JK4,52,2)
	call HOF(J64,$E,0)
	call HOF(J04,16,0)
	call HOF(J34,35,1)
	call HOF(J14,37,1)
	call HOF(JL4,57,2)
	call HOF(J54,58,2)
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,FJ,300,Condition(function WE7))
	call TriggerRegisterUnitInRange(t,lJ,300,Condition(function WE7))
	call TriggerRegisterUnitInRange(t,DJ,300,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function JW9))
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,25.,false)
	call TriggerAddAction(t,function JL9)
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,2.,false)
	call TriggerAddCondition(t,Condition(function JU9))
	set t=null
	set SB4=CreateRegion()
	call RegionAddRect(SB4,GD)
	call RegionAddRect(SB4,FD)
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,25.,false)
	call TriggerAddAction(t,function J39)
	set t=null
	set t=CreateTrigger()
	call TriggerRegisterPlayerChatEvent(t,Y7[1],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Y7[2],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Y7[3],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Y7[4],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Y7[5],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Z7[1],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Z7[2],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Z7[3],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Z7[4],"-",false)
	call TriggerRegisterPlayerChatEvent(t,Z7[5],"-",false)
	call TriggerAddAction(t,function K79)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_FINISH)
	call TriggerAddCondition(t,Condition(function OA9))
	call TriggerAddAction(t,function O69)
	set AW[0]=false
	set AW[1]=false
	set AW[2]=false
	set AW[3]=false
	set AW[4]=false
	set AW[5]=false
	set AW[6]=false
	set AW[7]=false
	set AW[8]=false
	set AW[9]=false
	set AW[$A]=false
	set AW[$B]=false
	set AW[$C]=false
	set AW[$D]=false
	set AW[$E]=false
	set AW[$F]=false
	set AW[16]=false
	set O64[0]=false
	set O64[1]=false
	set O64[2]=false
	set O64[3]=false
	set O64[4]=false
	set O64[5]=false
	set O64[6]=false
	set O64[7]=false
	set O64[8]=false
	set O64[9]=false
	set O64[$A]=false
	set O64[$B]=false
	set O64[$C]=false
	set O64[$D]=false
	set O64[$E]=false
	set O64[$F]=false
	set O64[16]=false
	set O64[GetPlayerId(Y7[1])]=true
	set O64[GetPlayerId(Y7[2])]=true
	set O64[GetPlayerId(Y7[3])]=true
	set O64[GetPlayerId(Y7[4])]=true
	set O64[GetPlayerId(Y7[5])]=true
	set O64[GetPlayerId(Z7[1])]=true
	set O64[GetPlayerId(Z7[2])]=true
	set O64[GetPlayerId(Z7[3])]=true
	set O64[GetPlayerId(Z7[4])]=true
	set O64[GetPlayerId(Z7[5])]=true
	call PF9()
	set eb[0]=true
	set eb[1]=true
	set eb[2]=true
	set eb[3]=true
	set eb[4]=true
	set eb[5]=true
	set eb[6]=true
	set eb[7]=true
	set eb[8]=true
	set eb[9]=true
	set eb[$A]=true
	set eb[$B]=true
	set eb[$C]=true
	set eb[$D]=true
	set eb[$E]=true
	set eb[$F]=true
	set ib[0]=false
	set ib[1]=false
	set ib[2]=false
	set ib[3]=false
	set ib[4]=false
	set ib[5]=false
	set ib[6]=false
	set ib[7]=false
	set ib[8]=false
	set ib[9]=false
	set ib[$A]=false
	set ib[$B]=false
	set ib[$C]=false
	set ib[$D]=false
	set ib[$E]=false
	set CW[GetPlayerId(Y7[1])]=false
	set CW[GetPlayerId(Y7[2])]=false
	set CW[GetPlayerId(Y7[3])]=false
	set CW[GetPlayerId(Y7[4])]=false
	set CW[GetPlayerId(Y7[5])]=false
	set CW[GetPlayerId(Z7[1])]=false
	set CW[GetPlayerId(Z7[2])]=false
	set CW[GetPlayerId(Z7[3])]=false
	set CW[GetPlayerId(Z7[4])]=false
	set CW[GetPlayerId(Z7[5])]=false
	set ab[GetPlayerId(Y7[1])]=false
	set ab[GetPlayerId(Y7[2])]=false
	set ab[GetPlayerId(Y7[3])]=false
	set ab[GetPlayerId(Y7[4])]=false
	set ab[GetPlayerId(Y7[5])]=false
	set ab[GetPlayerId(Z7[1])]=false
	set ab[GetPlayerId(Z7[2])]=false
	set ab[GetPlayerId(Z7[3])]=false
	set ab[GetPlayerId(Z7[4])]=false
	set ab[GetPlayerId(Z7[5])]=false
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_ORDER)
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
	call BT7(t,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
	call TriggerAddCondition(t,Condition(function K49))
	set PT[GetPlayerId(Y7[1])]=false
	set PT[GetPlayerId(Y7[2])]=false
	set PT[GetPlayerId(Y7[3])]=false
	set PT[GetPlayerId(Y7[4])]=false
	set PT[GetPlayerId(Y7[5])]=false
	set PT[GetPlayerId(Z7[1])]=false
	set PT[GetPlayerId(Z7[2])]=false
	set PT[GetPlayerId(Z7[3])]=false
	set PT[GetPlayerId(Z7[4])]=false
	set PT[GetPlayerId(Z7[5])]=false
	set Ob[0]=false
	set Ob[1]=false
	set Ob[2]=false
	set Ob[3]=false
	set Ob[4]=false
	set Ob[5]=false
	set Ob[6]=false
	set Ob[7]=false
	set Ob[8]=false
	set Ob[9]=false
	set Ob[$A]=false
	set Ob[$B]=false
	set Ob[$C]=false
	set Ob[$D]=false
	set Ob[$E]=false
	set Ob[$F]=false
	set Ob[16]=false
	set Ab[0]=true
	set Ab[1]=true
	set Ab[2]=true
	set Ab[3]=true
	set Ab[4]=true
	set Ab[5]=true
	set Ab[6]=true
	set Ab[7]=true
	set Ab[8]=true
	set Ab[9]=true
	set Ab[$A]=true
	set Ab[$B]=true
	set Ab[$C]=true
	set Ab[$D]=true
	set Ab[$E]=true
	set Ab[$F]=true
	set Ab[16]=true
	set MT[GetPlayerId(Y7[1])]=false
	set MT[GetPlayerId(Y7[2])]=false
	set MT[GetPlayerId(Y7[3])]=false
	set MT[GetPlayerId(Y7[4])]=false
	set MT[GetPlayerId(Y7[5])]=false
	set MT[GetPlayerId(Z7[1])]=false
	set MT[GetPlayerId(Z7[2])]=false
	set MT[GetPlayerId(Z7[3])]=false
	set MT[GetPlayerId(Z7[4])]=false
	set MT[GetPlayerId(Z7[5])]=false
	call PM9()
	set Nb[0]=false
	set Nb[1]=false
	set Nb[2]=false
	set Nb[3]=false
	set Nb[4]=false
	set Nb[5]=false
	set Nb[6]=false
	set Nb[7]=false
	set Nb[8]=false
	set Nb[9]=false
	set Nb[$A]=false
	set Nb[$B]=false
	set Nb[$C]=false
	set Nb[$D]=false
	set Nb[$E]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\WitchDoctor\\WitchDoctorPissed6.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed6.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Undead\\HeroDreadLord\\HeroDreadlordPissed7.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistPissed6.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\BloodElfSpellThief\\SpellbreakerPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed6.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed7.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Human\\Rifleman\\RiflemanPissed8.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed1.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed2.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed3.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed4.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed5.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed6.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed7.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed8.wav"
	set db[Fb]=false
	set Fb=Fb+1
	set Cb[Fb]="Units\\Orc\\HeroShadowHunter\\ShadowHunterPissed9.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed1.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed2.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed3.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed4.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\Ogre\\OgrePissed5.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed1.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed2.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed3.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed4.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed5.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed6.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\GoblinSapper\\GoblinSapperPissed7.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed1.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed2.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed3.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Orc\\HeroBladeMaster\\HeroBladeMasterPissed4.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed1.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed2.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed3.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed4.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed5.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed6.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed7.wav"
	set db[Fb]=false
	set Cb[Fb]="Units\\Creeps\\PandarenBrewmaster\\PandarenBrewmasterPissed8.wav"
	set db[Fb]=false
	set QT[0]=false
	set QT[1]=false
	set QT[2]=false
	set QT[3]=false
	set QT[4]=false
	set QT[5]=false
	set QT[6]=false
	set QT[7]=false
	set QT[8]=false
	set QT[9]=false
	set QT[$A]=false
	set QT[$B]=false
	set QT[$C]=false
	set QT[$D]=false
	set t=CreateTrigger()
	set RP7=GetHandleId(t)
	call TriggerRegisterTimerEvent(t,.02,true)
	call TriggerAddCondition(t,Condition(function Q79))
	call QD7(RP7,"T_CurrentX",(0)*1.)
	call QD7(RP7,"T_CurrentY",(0)*1.)
	call QD7(RP7,"T_MaxX",($A0)*1.)
	set fb[0]=false
	set fb[1]=false
	set fb[2]=false
	set fb[3]=false
	set fb[4]=false
	set fb[5]=false
	set fb[6]=false
	set fb[7]=false
	set fb[8]=false
	set fb[9]=false
	set fb[$A]=false
	set fb[$B]=false
	set fb[$C]=false
	set t=null
	set t=CreateTrigger()
	call TriggerAddAction(t,function R39)
	call TriggerAddCondition(t,Condition(function QG9))
	set YG4=t
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,.01,false)
	call TriggerAddCondition(t,Condition(function R69))
	set t=null
	if R8 then
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,1.,true)
	call TriggerAddCondition(t,Condition(function UJ9))
	endif
	set t=null
	set Tj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Tj,A[1])
	call TriggerAddAction(Tj,function UQ9)
	set Uj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Uj,A[2])
	call TriggerAddAction(Uj,function UR9)
	set wj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(wj,A[3])
	call TriggerAddAction(wj,function US9)
	set zj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(zj,A[4])
	call TriggerAddAction(zj,function UT9)
	set Zj=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(Zj,A[5])
	call TriggerAddAction(Zj,function UU9)
	set vJ=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(vJ,A[7])
	call TriggerAddAction(vJ,function UV9)
	set eJ=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(eJ,A[8])
	call TriggerAddAction(eJ,function UW9)
	set xJ=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(xJ,A[9])
	call TriggerAddAction(xJ,function UX9)
	set oJ=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(oJ,A[$A])
	call TriggerAddAction(oJ,function UY9)
	set iJ=CreateTrigger()
	call TriggerRegisterTimerExpireEvent(iJ,A[$B])
	call TriggerAddAction(iJ,function UZ9)
	call FXH()
	call FYH()
	call FZH()
	call FAH()
	set OJ=CreateTrigger()
	call BT7(OJ,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(OJ,Condition(function TYD))
	call TriggerAddAction(OJ,function TZD)
	set t=CreateTrigger()
	set PUD=CreateRegion()
	call RegionAddRect(PUD,GetWorldBounds())
	call TriggerRegisterEnterRegion(t,PUD,Condition(function WE7))
	call TriggerAddCondition(t,Condition(function V2F))
	set YS[1]=1093686867
	set YS[2]=1093686859
	set YS[3]=1093686865
	set YS[4]=1093687372
	set YS[5]=1093686861
	set YS[6]=1093686862
	set YS[7]=1093686863
	set YS[8]=1093686864
	set YS[9]=1093686855
	set YS[$A]=1093686874
	set t=null
	set PUD=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)
	call TriggerAddCondition(t,Condition(function Q_G))
	set t=null
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_DEATH)
	call TriggerAddAction(t,function ZIE)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_DROP_ITEM)
	call BT7(t,EVENT_PLAYER_UNIT_PAWN_ITEM)
	call TriggerAddCondition(t,Condition(function R7G))
	set SU4=t
	set t=null
	set bj[GetPlayerId(Y7[1])]=false
	set bj[GetPlayerId(Y7[2])]=false
	set bj[GetPlayerId(Y7[3])]=false
	set bj[GetPlayerId(Y7[4])]=false
	set bj[GetPlayerId(Y7[5])]=false
	set bj[GetPlayerId(Z7[1])]=false
	set bj[GetPlayerId(Z7[2])]=false
	set bj[GetPlayerId(Z7[3])]=false
	set bj[GetPlayerId(Z7[4])]=false
	set bj[GetPlayerId(Z7[5])]=false
	set MU[0]=GetRandomInt(1,2)
	set MU[1]=GetRandomInt(1,2)
	set MU[2]=GetRandomInt(1,2)
	set MU[3]=GetRandomInt(1,2)
	set MU[4]=GetRandomInt(1,2)
	set MU[5]=GetRandomInt(1,2)
	set MU[6]=GetRandomInt(1,2)
	set MU[7]=GetRandomInt(1,2)
	set MU[8]=GetRandomInt(1,2)
	set MU[9]=GetRandomInt(1,2)
	set MU[$A]=GetRandomInt(1,2)
	set MU[$B]=GetRandomInt(1,2)
	set MU[$C]=GetRandomInt(1,2)
	set MU[$D]=GetRandomInt(1,2)
	set MU[$E]=GetRandomInt(1,2)
	set MU[$F]=GetRandomInt(1,2)
	set LW4[0]=$FE
	set LW4[1]=$FF
	set LW4[2]=257
	set LW4[3]=261
	set LW4[4]=259
	set LW4[5]=262
	set LW4[6]=260
	set LW4[7]=$FD
	set LW4[8]=256
	set LW4[9]=258
	set t=CreateTrigger()
	call TriggerRegisterTimerEvent(t,15.,false)
	call TriggerAddAction(t,function TJ9)
	set LO4=CreateTrigger()
	call DisableTrigger(LO4)
	call TriggerRegisterTimerEvent(LO4,15.,true)
	call TriggerAddAction(LO4,function E7F)
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddAction(t,function MPG)
	call TriggerRegisterTimerEventPeriodic(HK,5.)
	call TriggerAddAction(HK,function B8E)
	call TriggerRegisterTimerEventPeriodic(QY4,5.)
	call TriggerAddAction(QY4,function G5F)
	call DisableTrigger(QY4)
	call TriggerRegisterTimerEventPeriodic(Hn,1.)
	call TriggerAddAction(Hn,function MDF)
	call TriggerRegisterTimerEventPeriodic(HN,1.)
	call TriggerAddAction(HN,function MGF)
	call TriggerRegisterTimerEventPeriodic(Ho,2.)
	call TriggerAddAction(Ho,function MNF)
	call DisableTrigger(QA4)
	call TriggerRegisterTimerEventPeriodic(QA4,2.)
	call TriggerAddAction(QA4,function R4F)
	set t=CreateTrigger()
	call ky(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddAction(t,function E9F)
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,JZ4,700.,null)
	call TriggerAddCondition(t,Condition(function D6))
	call TriggerAddAction(t,function FTF)
	set t=CreateTrigger()
	call TriggerRegisterUnitInRange(t,IY4,700.,null)
	call TriggerAddCondition(t,Condition(function C6))
	call TriggerAddAction(t,function FWF)
	call DisableTrigger(QB4)
	call TriggerRegisterTimerEventPeriodic(QB4,120.)
	call TriggerAddAction(QB4,function T3F)
	set PA4=$C
	set PB4=$C
	call E1F()
	if GetPlayerController(Y7[1])==MAP_CONTROL_COMPUTER or GetPlayerController(Y7[2])==MAP_CONTROL_COMPUTER or GetPlayerController(Y7[3])==MAP_CONTROL_COMPUTER or GetPlayerController(Y7[4])==MAP_CONTROL_COMPUTER or GetPlayerController(Y7[5])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[1])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[2])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[3])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[4])==MAP_CONTROL_COMPUTER or GetPlayerController(Z7[5])==MAP_CONTROL_COMPUTER then
	call DisplayTimedTextToPlayer(Le,0,0,10.,"|c00dd8dff"+GetObjectName(1496332600))
	call DisplayTimedTextToPlayer(Le,0,0,10.,"|c00dd8dff"+GetObjectName(1496332601))
	call DisplayTimedTextToPlayer(Le,0,0,$A," ")
	endif
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
	call TriggerAddCondition(t,Condition(function V6F))
	set t=CreateTrigger()
	call BT7(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)
	call TriggerAddCondition(t,Condition(function Q0G))
	call ExecuteFunc("F48")
	set t=null
	call ExecuteFunc("K47")
	call J87()
	call MO7()

	call DisplayTextToForce( GetPlayersAll(), ( "|cffff0000伟大的游戏开始了|r" ) )
	call QH9("All Pick")
	call QI9("Normal Exp AI")
	call QI9("Normal Gold AI")
	call QH9("Super Creeps")
	call QI9("Super Tower")


	//call CreateNUnitsAtLoc( 1, 'Hlgr', Player(1), Location(-7081.584, -6920.714), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'UC18', Player(2), Location(-7081.584, -6920.714), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'Hvwd', Player(3), Location(-7081.584, -6920.714), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'H000', Player(4), Location(-7081.584, -6920.714), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'E01B', Player(5), Location(-7081.584, -6920.714), bj_UNIT_FACING )

	//call CreateNUnitsAtLoc( 1, 'Ulic', Player(7), Location(6500, 6000), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'NC00', Player(8), Location(6500, 6000), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'H001', Player(9), Location(6500, 6000), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'O00J', Player(10), Location(6500, 6000), bj_UNIT_FACING )
	//call CreateNUnitsAtLoc( 1, 'Nbrn', Player(11), Location(6500, 6000), bj_UNIT_FACING )

	// function: main
	// 移除荒芜之地
	call SetBlightRectBJ( false, Player(SelfIndex), GetPlayableMapRect() )
	//call DisplayTextToForce( GetPlayersAll(), "|cff0042ff为了发挥游戏的更大效果|r" )

	//===========================================================================
	// Custom Trigger
	//===========================================================================
	//call DisplayTimedTextToForce(GetPlayersAll(),5,"自定义触发")
	//set iTrigger=CreateTrigger()
	//call TriggerRegisterPlayerChatEvent(t, Player(SelfIndex), " ", false )
	//call TriggerAddCondition(t, Condition( function Trig_SplitString_Conditions ) )
	//call TriggerAddAction( iTrigger, function SplitString )
	//set iTrigger=null
	set iTrigger = CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "FunMode", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_FunMode_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_FunMode_Actions )
	set iTrigger = null
	set iTrigger = CreateTrigger(  )
    call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ClearChat", false )
    call TriggerAddCondition( iTrigger, Condition( function Trig_ClearChat_Conditions ) )
    call TriggerAddAction( iTrigger, function Trig_ClearChat_Actions )
    set iTrigger=null
    set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "TestData", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_TestData_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_TestData_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "Fog", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_Fog_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Fog_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "isCheck", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_IsCheck_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_IsCheck_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ShowPoint", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_ShowPoint_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ShowPoint_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "EndGame", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_EndGame_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_EndGame_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "CreateUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_CreateUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_CreateUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "CopyUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_CopyUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_CopyUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "RemoveUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_RemoveUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_RemoveUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "AddUnitFor", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_AddUnitToStructure_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_AddUnitToStructure_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "RemoveUnitFor", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_RemoveUnitFromStructure_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_RemoveUnitFromStructure_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "CreateItem", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_CreateItem_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_CreateItem_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ShowItem", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_ShowItem_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ShowItem_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "AddItem", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_AddItem_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_AddItem_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "RemoveItem", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_RemoveItem_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_RemoveItem_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "AddAbility", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_AddAbility_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_AddAbility_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SetAbilityLevel", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_SetAbilityLevel_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_SetAbilityLevel_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "RemoveAbility", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_RemoveAbility_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_RemoveAbility_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SetTeleportUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_SetTeleportUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_SetTeleportUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "RemoveTeleport", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_RemoveTeleport_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_RemoveTeleport_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "AutoSkill", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_AutoSkill_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_AutoSkill_Actions )
	set iTrigger=null
	set iTrigger = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_ATTACKED )
	call TriggerAddAction( iTrigger, function Trig_UnitAttack_Actions )
	set iTrigger = null
	set iTrigger=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_HERO_LEVEL )
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_HERO_SKILL )
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SPELL_CHANNEL )
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SPELL_ENDCAST )
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SPELL_EFFECT )
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SPELL_FINISH )
	call TriggerAddCondition( iTrigger, Condition( function Trig_EnableGetTech_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_EnableGetTech_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SPELL_CAST )
	call TriggerAddAction( iTrigger, function Trig_UseAbility_Actions )
	set iTrigger=null
	set iTrigger = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_DEATH )
	call TriggerAddAction ( iTrigger, function UnitDeadEvent )
	set iTrigger = null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "Convert", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_Convert_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Convert_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ShowGold", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_ShowGold_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ShowGold_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "Gold", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_Gold_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Gold_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "Level", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_Level_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Level_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "Time", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_Time_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Time_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ChangeOwner", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_ChangeOwner_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ChangeOwner_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SetCoordUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_SetCoordUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_SetCoordUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ReplaceShopItems", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_ReplaceShopItems_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ReplaceShopItems_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "IssueOrder", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_IssueOrder_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_IssueOrder_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "IssueAreaOrder", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_IssueAreaOrder_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_IssueAreaOrder_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "IssueTargetOrder", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_IssueTargetOrder_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_IssueTargetOrder_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SetTargetUnit", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_SetTargetUnit_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_SetTargetUnit_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SetTargetOrder", false )
	call TriggerAddCondition( iTrigger, Condition( function Trig_SetTargetOrder_Conditions ) )
	call TriggerAddAction(iTrigger, function Trig_SetTargetOrder_Actions )
	set iTrigger=null

	set iTrigger=CreateTrigger()
	call TriggerRegisterEnterRectSimple( iTrigger, GetEntireMapRect() )	// 单位进入地图事件
	//call TriggerAddCondition( iTrigger, Condition( function Trig_Salvation_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_Salvation_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_DEATH )	// 单位死亡事件
	call TriggerAddAction( iTrigger, function Trig_IntensifyStructure_Actions )	//建筑
	set iTrigger=null

	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "AutoHero", false )	//自动选择记录的英雄
	call TriggerAddCondition( iTrigger, Condition( function Trig_AutoHero_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_AutoHero_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "SaveHero", false )	//保存存档
	call TriggerAddCondition( iTrigger, Condition( function Trig_SaveHero_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_SaveHero_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterPlayerChatEvent( iTrigger, Player(SelfIndex), "ReadHero", false )	//读取存档
	call TriggerAddCondition( iTrigger, Condition( function Trig_ReadHero_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ReadHero_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_PICKUP_ITEM )	//操作物品事件
	call TriggerAddCondition( iTrigger, Condition( function Trig_ForgeItems_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_ForgeItems_Actions )
	set iTrigger=null
	set iTrigger=CreateTrigger()
	//call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_UNIT_SELL )	// 选择英雄事件
	call TriggerRegisterEnterRectSimple( iTrigger, GetEntireMapRect() )
	call TriggerAddCondition( iTrigger, Condition( function Trig_GetHero_Conditions ) )
	call TriggerAddAction( iTrigger, function Trig_GetHero_Actions )
	set iTrigger=null
	set iTrigger = CreateTrigger(  )
	call TriggerRegisterAnyUnitEventBJ( iTrigger, EVENT_PLAYER_HERO_LEVEL )	//英雄等级事件
	call TriggerAddAction( iTrigger, function Trig_HeroUpgrade_Actions )
	set iTrigger = null
	set t = CreateTrigger(  )
	call TriggerRegisterTimerEventPeriodic( t, 5.00 )	//每5秒
	call TriggerAddAction( t, function Trig_Timer_Actions )
	set iTrigger = null
	set iTrigger = CreateTrigger(  )
	call TriggerRegisterTimerEventPeriodic( iTrigger, 60.00 )	//每60秒
	call TriggerAddAction( iTrigger, function Trig_RefreshWild_Actions )
	set iTrigger = null

	//读取存档
	call Preloader(filePath)
	//call DisplayTimedTextToForce(GetPlayersAll(),5,"|cff0042ff读取存档|r" + filePath)
	if GetPlayerTechMaxAllowed(Player(PLAYER_NEUTRAL_PASSIVE-1), 0) == 1 then
	    set tString = GetPlayerName(Player(PLAYER_NEUTRAL_PASSIVE))
	    //call DisplayTimedTextToForce(GetPlayersAll(),5,"|cff0042ff读取存档|r" + tString)
	else
	    set tString = "Hlgr,UC18,Hvwd,H000,E01B,AAAAA,Ulic,NC00,H001,O00J,Nbrn"
		//call DisplayTimedTextToForce(GetPlayersAll(),5,"|cffff0000读取存档失败|r")
	endif


	call SplitStringWith( tString, "," )
	set index = 1
	//set bj_forLoopAIndexEnd = TDSCount
	//call BJDebugMsg("|cff0042ff数量|r" + I2S(TDSCount) )
	
	loop
		//call BJDebugMsg( I2S(index) + "-->" + I2S(TDSCount) )
	    exitwhen index > TDSCount
	    //call BJDebugMsg( I2S(index) + "-->" + I2S(TDSCount) )
	    if index != 6 then
	        set tString = TDSList[index]
	        //call BJDebugMsg( I2S(index) + "-->" + tString )
	        set HeroID[index] = ASCIIStringToInteger( tString )
	    endif

	    set index = index + 1
	endloop
	//call DisplayTimedTextToForce(GetPlayersAll(),5,"2")

endfunction

//===========================================================================
// function: config
//===========================================================================
function config takes nothing returns nothing
    //constant mapcontrol controlType = MAP_CONTROL_COMPUTER
    call SetMapName("TRIGSTR_50000")
    call SetMapDescription("TRIGSTR_50001")
    call SetPlayers($A)
    call SetTeams($A)
    call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
	//call DefineStartLocation(0,6310.,6000.)
	call DefineStartLocation(0,-6990.,6840.)
	call DefineStartLocation(1,-6990.,6840.)
	call DefineStartLocation(2,-6990.,6840.)
	call DefineStartLocation(3,-6990.,6840.)
	call DefineStartLocation(4,-6990.,6840.)
	call DefineStartLocation(5,-6990.,6840.)
	call DefineStartLocation(6,-6990.,6840.)
	call DefineStartLocation(7,-6990.,6840.)
	call DefineStartLocation(8,-6990.,6840.)
	call DefineStartLocation(9,-6990.,6840.)
	//call SetCameraPosition( 6310, 5930 )
	//call DefineStartLocation(12,0,0)
	call SetPlayerStartLocation(Player(1),0)
	call ForcePlayerStartLocation(Player(1),0)
	call SetPlayerColor(Player(1),ConvertPlayerColor(1))
	call SetPlayerRacePreference(Player(1),RACE_PREF_NIGHTELF)
	call SetPlayerRaceSelectable(Player(1),false)
	call SetPlayerController(Player(1),MAP_CONTROL_USER)
	call SetPlayerStartLocation(Player(2),1)
	call ForcePlayerStartLocation(Player(2),1)
	call SetPlayerColor(Player(2),ConvertPlayerColor(2))
	call SetPlayerRacePreference(Player(2),RACE_PREF_NIGHTELF)
	call SetPlayerRaceSelectable( Player(2), false )
	call SetPlayerController(Player(2),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(3),2)
	call ForcePlayerStartLocation(Player(3),2)
	call SetPlayerColor(Player(3),ConvertPlayerColor(3))
	call SetPlayerRacePreference(Player(3),RACE_PREF_NIGHTELF)
	call SetPlayerRaceSelectable(Player(3),false)
	call SetPlayerController(Player(3),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(4),3)
	call ForcePlayerStartLocation(Player(4),3)
	call SetPlayerColor(Player(4),ConvertPlayerColor(4))
	call SetPlayerRacePreference(Player(4),RACE_PREF_NIGHTELF)
	call SetPlayerRaceSelectable(Player(4),false)
	call SetPlayerController(Player(4),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(5),4)
	call ForcePlayerStartLocation(Player(5),4)
	call SetPlayerColor(Player(5),ConvertPlayerColor(5))
	call SetPlayerRacePreference(Player(5),RACE_PREF_NIGHTELF)
	call SetPlayerRaceSelectable(Player(5),false)
	call SetPlayerController(Player(5),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(7),5)
	call ForcePlayerStartLocation(Player(7),5)
	call SetPlayerColor(Player(7),ConvertPlayerColor(7))
	call SetPlayerRacePreference(Player(7),RACE_PREF_UNDEAD)
	call SetPlayerRaceSelectable(Player(7),false)
	call SetPlayerController(Player(7),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(8),6)
	call ForcePlayerStartLocation(Player(8),6)
	call SetPlayerColor(Player(8),ConvertPlayerColor(8))
	call SetPlayerRacePreference(Player(8),RACE_PREF_UNDEAD)
	call SetPlayerRaceSelectable(Player(8),false)
	call SetPlayerController(Player(8),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player(9),7)
	call ForcePlayerStartLocation(Player(9),7)
	call SetPlayerColor(Player(9),ConvertPlayerColor(9))
	call SetPlayerRacePreference(Player(9),RACE_PREF_UNDEAD)
	call SetPlayerRaceSelectable(Player(9),false)
	call SetPlayerController(Player(9),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player($A),8)
	call ForcePlayerStartLocation(Player($A),8)
	call SetPlayerColor(Player($A),ConvertPlayerColor($A))
	call SetPlayerRacePreference(Player($A),RACE_PREF_UNDEAD)
	call SetPlayerRaceSelectable(Player($A),false)
	call SetPlayerController(Player($A),MAP_CONTROL_COMPUTER)
	call SetPlayerStartLocation(Player($B),9)
	call ForcePlayerStartLocation(Player($B),9)
	call SetPlayerColor(Player($B),ConvertPlayerColor($B))
	call SetPlayerRacePreference(Player($B),RACE_PREF_UNDEAD)
	call SetPlayerRaceSelectable(Player($B),false)
	call SetPlayerController(Player($B),MAP_CONTROL_COMPUTER)
	call InitCustomTeams()
	call SetPlayerAlliance(Player($F),Player(1),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(2),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(3),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(4),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(5),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(7),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(8),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player(9),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player($A),ConvertAllianceType(6),true)
	call SetPlayerAlliance(Player($F),Player($B),ConvertAllianceType(6),true)
	call SetStartLocPrioCount(0,9)
	call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(0,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(1,9)
	call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(1,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(2,9)
	call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(2,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(3,9)
	call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(3,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(4,9)
	call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(4,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(5,9)
	call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(5,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(6,9)
	call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(6,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(7,9)
	call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,7,8,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(7,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(8,9)
	call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,4,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,5,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,6,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,7,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(8,8,9,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrioCount(9,9)
	call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,3,3,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,4,4,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,5,5,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,6,6,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,7,7,MAP_LOC_PRIO_HIGH)
	call SetStartLocPrio(9,8,8,MAP_LOC_PRIO_HIGH)
	call PlayMusic("Sound\\Music\\mp3Music\\PH1.mp3")

endfunction